/*! For license information please see extension.js.LICENSE.txt */
var e,t={669:(e,t,n)=>{e.exports=n(609)},448:(e,t,n)=>{var r=n(867),o=n(26),a=n(372),i=n(327),l=n(97),c=n(109),u=n(985),s=n(874),f=n(648),d=n(644),p=n(205);e.exports=function(e){return new Promise((function(t,n){var m,h=e.data,y=e.headers,v=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}r.isFormData(h)&&r.isStandardBrowserEnv()&&delete y["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",E=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(w+":"+E)}var S=l(e.baseURL,e.url);function O(){if(b){var r="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null,a={data:v&&"text"!==v&&"json"!==v?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};o((function(e){t(e),g()}),(function(e){n(e),g()}),a),b=null}}if(b.open(e.method.toUpperCase(),i(S,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=O:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(O)},b.onabort=function(){b&&(n(new f("Request aborted",f.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||s;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new f(t,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,e,b)),b=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||u(S))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;k&&(y[e.xsrfHeaderName]=k)}"setRequestHeader"in b&&r.forEach(y,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete y[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),v&&"json"!==v&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(m=function(e){b&&(n(!e||e&&e.type?new d:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m))),h||(h=null);var R=p(S);R&&-1===["http","https","file"].indexOf(R)?n(new f("Unsupported protocol "+R+":",f.ERR_BAD_REQUEST,e)):b.send(h)}))}},609:(e,t,n)=>{var r=n(867),o=n(849),a=n(321),i=n(185),l=function e(t){var n=new a(t),l=o(a.prototype.request,n);return r.extend(l,a.prototype,n),r.extend(l,n),l.create=function(n){return e(i(t,n))},l}(n(546));l.Axios=a,l.CanceledError=n(644),l.CancelToken=n(972),l.isCancel=n(502),l.VERSION=n(288).version,l.toFormData=n(675),l.AxiosError=n(648),l.Cancel=l.CanceledError,l.all=function(e){return Promise.all(e)},l.spread=n(713),l.isAxiosError=n(268),e.exports=l,e.exports.default=l},972:(e,t,n)=>{var r=n(644);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},644:(e,t,n)=>{var r=n(648);function o(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(867).inherits(o,r,{__CANCEL__:!0}),e.exports=o},502:e=>{e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{var r=n(867),o=n(327),a=n(782),i=n(572),l=n(185),c=n(97),u=n(875),s=u.validators;function f(e){this.defaults=e,this.interceptors={request:new a,response:new a}}f.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=l(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:s.transitional(s.boolean),forcedJSONParsing:s.transitional(s.boolean),clarifyTimeoutError:s.transitional(s.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var a,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var f=[i,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(c),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var d=t;r.length;){var p=r.shift(),m=r.shift();try{d=p(d)}catch(e){m(e);break}}try{a=i(d)}catch(e){return Promise.reject(e)}for(;c.length;)a=a.then(c.shift(),c.shift());return a},f.prototype.getUri=function(e){e=l(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(l(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)})),e.exports=f},648:(e,t,n)=>{var r=n(867);function o(e,t,n,r,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}r.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=o.prototype,i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){i[e]={value:e}})),Object.defineProperties(o,i),Object.defineProperty(a,"isAxiosError",{value:!0}),o.from=function(e,t,n,i,l,c){var u=Object.create(a);return r.toFlatObject(e,u,(function(e){return e!==Error.prototype})),o.call(u,e.message,t,n,i,l),u.name=e.name,c&&Object.assign(u,c),u},e.exports=o},782:(e,t,n)=>{var r=n(867);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},97:(e,t,n)=>{var r=n(793),o=n(303);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},572:(e,t,n)=>{var r=n(867),o=n(527),a=n(502),i=n(546),l=n(644);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new l}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},185:(e,t,n)=>{var r=n(867);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function i(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function l(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var u={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||a,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}},26:(e,t,n)=>{var r=n(648);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},527:(e,t,n)=>{var r=n(867),o=n(546);e.exports=function(e,t,n){var a=this||o;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},546:(e,t,n)=>{var r=n(867),o=n(16),a=n(648),i=n(874),l=n(675),c={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,f={transitional:i,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n(448)),s),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,a=r.isObject(e),i=t&&t["Content-Type"];if((n=r.isFileList(e))||a&&"multipart/form-data"===i){var c=this.env&&this.env.FormData;return l(n?{"files[]":e}:e,c&&new c)}return a||"application/json"===i?(u(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||f.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw a.from(e,a.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){f.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){f.headers[e]=r.merge(c)})),e.exports=f},874:e=>{e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},288:e=>{e.exports={version:"0.27.2"}},849:e=>{e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},327:(e,t,n)=>{var r=n(867);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),a=i.join("&")}if(a){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},303:e=>{e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:(e,t,n)=>{var r=n(867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,a,i){var l=[];l.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),r.isString(o)&&l.push("path="+o),r.isString(a)&&l.push("domain="+a),!0===i&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},268:(e,t,n)=>{var r=n(867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},985:(e,t,n)=>{var r=n(867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16:(e,t,n)=>{var r=n(867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},623:e=>{e.exports=null},109:(e,t,n)=>{var r=n(867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,i={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},205:e=>{e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},713:e=>{e.exports=function(e){return function(t){return e.apply(null,t)}}},675:(e,t,n)=>{var r=n(867);e.exports=function(e,t){t=t||new FormData;var n=[];function o(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(a,i){if(r.isPlainObject(a)||r.isArray(a)){if(-1!==n.indexOf(a))throw Error("Circular reference detected in "+i);n.push(a),r.forEach(a,(function(n,a){if(!r.isUndefined(n)){var l,c=i?i+"."+a:a;if(n&&!i&&"object"==typeof n)if(r.endsWith(a,"{}"))n=JSON.stringify(n);else if(r.endsWith(a,"[]")&&(l=r.toArray(n)))return void l.forEach((function(e){!r.isUndefined(e)&&t.append(c,o(e))}));e(n,c)}})),n.pop()}else t.append(i,o(a))}(e),t}},875:(e,t,n)=>{var r=n(288).version,o=n(648),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,l){if(!1===e)throw new o(a(r," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,l)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],l=t[i];if(l){var c=e[i],u=void 0===c||l(c,i,e);if(!0!==u)throw new o("option "+i+" must be "+u,o.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new o("Unknown option "+i,o.ERR_BAD_OPTION)}},validators:a}},867:(e,t,n)=>{var r,o=n(849),a=Object.prototype.toString,i=(r=Object.create(null),function(e){var t=a.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function l(e){return e=e.toLowerCase(),function(t){return i(t)===e}}function c(e){return Array.isArray(e)}function u(e){return void 0===e}var s=l("ArrayBuffer");function f(e){return null!==e&&"object"==typeof e}function d(e){if("object"!==i(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=l("Date"),m=l("File"),h=l("Blob"),y=l("FileList");function v(e){return"[object Function]"===a.call(e)}var g=l("URLSearchParams");function b(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var w,E=(w="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return w&&e instanceof w});e.exports={isArray:c,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||a.call(e)===t||v(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:f,isPlainObject:d,isUndefined:u,isDate:p,isFile:m,isBlob:h,isFunction:v,isStream:function(e){return f(e)&&v(e.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:b,merge:function e(){var t={};function n(n,r){d(t[r])&&d(n)?t[r]=e(t[r],n):d(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)b(arguments[r],n);return t},extend:function(e,t,n){return b(t,(function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,o,a,i={};t=t||{};do{for(o=(r=Object.getOwnPropertyNames(e)).length;o-- >0;)i[a=r[o]]||(t[a]=e[a],i[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:l,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:E,isFileList:y}},840:(e,t,n)=>{n.d(t,{Z:()=>xv});const r=window.ReactDOM,o=window.Blueprint.Core;var a=n(196);const i="undefined"==typeof window||"Deno"in window;function l(){}function c(e){return"number"==typeof e&&e>=0&&e!==1/0}function u(e,t){return e.filter((e=>-1===t.indexOf(e)))}function s(e,t){return Math.max(e+(t||0)-Date.now(),0)}function f(e,t,n){return k(e)?"function"==typeof t?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function d(e,t,n){return k(e)?[{...t,queryKey:e},n]:[e||{},t]}function p(e,t){const{type:n="all",exact:r,fetchStatus:o,predicate:a,queryKey:i,stale:l}=e;if(k(i))if(r){if(t.queryHash!==h(i,t.options))return!1}else if(!v(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return!("boolean"==typeof l&&t.isStale()!==l||void 0!==o&&o!==t.state.fetchStatus||a&&!a(t))}function m(e,t){const{exact:n,fetching:r,predicate:o,mutationKey:a}=e;if(k(a)){if(!t.options.mutationKey)return!1;if(n){if(y(t.options.mutationKey)!==y(a))return!1}else if(!v(t.options.mutationKey,a))return!1}return!("boolean"==typeof r&&"loading"===t.state.status!==r||o&&!o(t))}function h(e,t){return((null==t?void 0:t.queryKeyHashFn)||y)(e)}function y(e){return JSON.stringify(e,((e,t)=>S(t)?Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}):t))}function v(e,t){return g(e,t)}function g(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some((n=>!g(e[n],t[n])))}function b(e,t){if(e===t)return e;const n=E(e)&&E(t);if(n||S(e)&&S(t)){const r=n?e.length:Object.keys(e).length,o=n?t:Object.keys(t),a=o.length,i=n?[]:{};let l=0;for(let r=0;r<a;r++){const a=n?r:o[r];i[a]=b(e[a],t[a]),i[a]===e[a]&&l++}return r===a&&l===r?e:i}return t}function w(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function E(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function S(e){if(!O(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!O(n)&&!!n.hasOwnProperty("isPrototypeOf")}function O(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e){return Array.isArray(e)}function R(e){return new Promise((t=>{setTimeout(t,e)}))}function x(e){R(0).then(e)}function T(e,t,n){return null!=n.isDataEqual&&n.isDataEqual(e,t)?e:"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?b(e,t):t}const _=console,C=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()};const o=r=>{t?e.push(r):x((()=>{n(r)}))};return{batch:o=>{let a;t++;try{a=o()}finally{t--,t||(()=>{const t=e;e=[],t.length&&x((()=>{r((()=>{t.forEach((e=>{n(e)}))}))}))})()}return a},batchCalls:e=>(...t)=>{o((()=>{e(...t)}))},schedule:o,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e}}}();class j{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.push(e),this.onSubscribe(),()=>{this.listeners=this.listeners.filter((t=>t!==e)),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const A=new class extends j{constructor(){super(),this.setup=e=>{if(!i&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach((e=>{e()}))}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}},P=new class extends j{constructor(){super(),this.setup=e=>{if(!i&&window.addEventListener){const t=()=>e();return window.addEventListener("online",t,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((e=>{"boolean"==typeof e?this.setOnline(e):this.onOnline()}))}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach((e=>{e()}))}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}};function I(e){return Math.min(1e3*2**e,3e4)}function L(e){return"online"!==(null!=e?e:"online")||P.isOnline()}class N{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}}function D(e){return e instanceof N}function M(e){let t,n,r,o=!1,a=0,i=!1;const l=new Promise(((e,t)=>{n=e,r=t})),c=()=>!A.isFocused()||"always"!==e.networkMode&&!P.isOnline(),u=r=>{i||(i=!0,null==e.onSuccess||e.onSuccess(r),null==t||t(),n(r))},s=n=>{i||(i=!0,null==e.onError||e.onError(n),null==t||t(),r(n))},f=()=>new Promise((n=>{t=e=>{if(i||!c())return n(e)},null==e.onPause||e.onPause()})).then((()=>{t=void 0,i||null==e.onContinue||e.onContinue()})),d=()=>{if(i)return;let t;try{t=e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(u).catch((t=>{var n,r;if(i)return;const l=null!=(n=e.retry)?n:3,u=null!=(r=e.retryDelay)?r:I,p="function"==typeof u?u(a,t):u,m=!0===l||"number"==typeof l&&a<l||"function"==typeof l&&l(a,t);!o&&m?(a++,null==e.onFail||e.onFail(a,t),R(p).then((()=>{if(c())return f()})).then((()=>{o?s(t):d()}))):s(t)}))};return L(e.networkMode)?d():f().then(d),{promise:l,cancel:t=>{i||(s(new N(t)),null==e.abort||e.abort())},continue:()=>{null==t||t()},cancelRetry:()=>{o=!0},continueRetry:()=>{o=!1}}}class z{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),c(this.cacheTime)&&(this.gcTimeout=setTimeout((()=>{this.optionalRemove()}),this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:i?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class F extends z{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||_,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){const n=T(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(l).catch(l):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some((e=>!1!==e.options.enabled))}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((e=>e.getCurrentResult().isStale))}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!s(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find((e=>e.shouldFetchOnWindowFocus()));t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;const t=this.observers.find((e=>e.shouldFetchOnReconnect()));t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var n,r;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return null==(o=this.retryer)||o.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}Array.isArray(this.options.queryKey);const a=function(){if("function"==typeof AbortController)return new AbortController}(),i={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};l(i);const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(i)):Promise.reject("Missing queryFn")};var u;l(c),null==(n=this.options.behavior)||n.onFetch(c),this.revertState=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(r=c.fetchOptions)?void 0:r.meta))&&this.dispatch({type:"fetch",meta:null==(u=c.fetchOptions)?void 0:u.meta});const s=e=>{var t,n;D(e)&&e.silent||this.dispatch({type:"error",error:e}),D(e)||null==(t=(n=this.cache.config).onError)||t.call(n,e,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=M({fn:c.fetchFn,abort:null==a?void 0:a.abort.bind(a),onSuccess:e=>{var t,n;void 0!==e?(this.setData(e),null==(t=(n=this.cache.config).onSuccess)||t.call(n,e,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):s(new Error("undefined"))},onError:s,onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var n,r;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(n=e.meta)?n:null,fetchStatus:L(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return D(o)&&o.revert&&this.revertState?{...this.revertState}:{...t,error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),C.batch((()=>{this.observers.forEach((t=>{t.onQueryUpdate(e)})),this.cache.notify({query:this,type:"updated",action:e})}))}}class U extends j{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,n){var r;const o=t.queryKey,a=null!=(r=t.queryHash)?r:h(o,t);let i=this.get(a);return i||(i=new F({cache:this,logger:e.getLogger(),queryKey:o,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(o)}),this.add(i)),i}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter((t=>t!==e)),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){C.batch((()=>{this.queries.forEach((e=>{this.remove(e)}))}))}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[n]=d(e,t);return void 0===n.exact&&(n.exact=!0),this.queries.find((e=>p(n,e)))}findAll(e,t){const[n]=d(e,t);return Object.keys(n).length>0?this.queries.filter((e=>p(n,e))):this.queries}notify(e){C.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){C.batch((()=>{this.queries.forEach((e=>{e.onFocus()}))}))}onOnline(){C.batch((()=>{this.queries.forEach((e=>{e.onOnline()}))}))}}class B extends z{constructor(e){super(),this.options={...e.defaultOptions,...e.options},this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||_,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0},this.updateCacheTime(this.options.cacheTime),this.scheduleGc()}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter((t=>t!==e)),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()}async execute(){const e=()=>{var e;return this.retryer=M({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t="loading"===this.state.status;try{var n,r,o,a,i,l;if(!t){var c,u,s,f;this.dispatch({type:"loading",variables:this.options.variables}),await(null==(c=(u=this.mutationCache.config).onMutate)?void 0:c.call(u,this.state.variables,this));const e=await(null==(s=(f=this.options).onMutate)?void 0:s.call(f,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}const d=await e();return await(null==(n=(r=this.mutationCache.config).onSuccess)?void 0:n.call(r,d,this.state.variables,this.state.context,this)),await(null==(o=(a=this.options).onSuccess)?void 0:o.call(a,d,this.state.variables,this.state.context)),await(null==(i=(l=this.options).onSettled)?void 0:i.call(l,d,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:d}),d}catch(e){try{var d,p,m,h,y,v;throw await(null==(d=(p=this.mutationCache.config).onError)?void 0:d.call(p,e,this.state.variables,this.state.context,this)),await(null==(m=(h=this.options).onError)?void 0:m.call(h,e,this.state.variables,this.state.context)),await(null==(y=(v=this.options).onSettled)?void 0:y.call(v,void 0,e,this.state.variables,this.state.context)),e}finally{this.dispatch({type:"error",error:e})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!L(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),C.batch((()=>{this.observers.forEach((t=>{t.onMutationUpdate(e)})),this.mutationCache.notify({mutation:this,type:"updated",action:e})}))}}class q extends j{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,n){const r=new B({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter((t=>t!==e)),this.notify({type:"removed",mutation:e})}clear(){C.batch((()=>{this.mutations.forEach((e=>{this.remove(e)}))}))}getAll(){return this.mutations}find(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find((t=>m(e,t)))}findAll(e){return this.mutations.filter((t=>m(e,t)))}notify(e){C.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.mutations.filter((e=>e.state.isPaused));return C.batch((()=>e.reduce(((e,t)=>e.then((()=>t.continue().catch(l)))),Promise.resolve())))}}function X(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}const G=a.createContext(void 0),K=a.createContext(!1);function H(e,t){return e||(t&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=G),window.ReactQueryClientContext):G)}const V=({context:e}={})=>{const t=a.useContext(H(e,a.useContext(K)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Q=({client:e,children:t,context:n,contextSharing:r=!1})=>{a.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]);const o=H(n,r);return a.createElement(K.Provider,{value:!n&&r},a.createElement(o.Provider,{value:e},t))};function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function $(e){return e.state.isPaused}function Y(e){return"success"===e.state.status}function Z(e,t={}){const n=[],r=[];if(!1!==t.dehydrateMutations){const r=t.shouldDehydrateMutation||$;e.getMutationCache().getAll().forEach((e=>{r(e)&&n.push(function(e){return{mutationKey:e.options.mutationKey,state:e.state}}(e))}))}if(!1!==t.dehydrateQueries){const n=t.shouldDehydrateQuery||Y;e.getQueryCache().getAll().forEach((e=>{n(e)&&r.push(function(e){return{state:e.state,queryKey:e.queryKey,queryHash:e.queryHash}}(e))}))}return{mutations:n,queries:r}}async function J({queryClient:e,persister:t,buster:n="",dehydrateOptions:r}){const o={buster:n,timestamp:Date.now(),clientState:Z(e,r)};await t.persistClient(o)}const ee=a.createContext(!1),te=()=>a.useContext(ee),ne=ee.Provider,re=({client:e,children:t,persistOptions:n,onSuccess:r,...o})=>{const[i,l]=a.useState(!0),c=a.useRef({persistOptions:n,onSuccess:r});return a.useEffect((()=>{c.current={persistOptions:n,onSuccess:r}})),a.useEffect((()=>{let t=!1;l(!0);const[n,r]=function(e){let t,n=!1;const r=async function({queryClient:e,persister:t,maxAge:n=864e5,buster:r="",hydrateOptions:o}){try{const a=await t.restoreClient();if(a)if(a.timestamp){const i=Date.now()-a.timestamp>n,l=a.buster!==r;i||l?t.removeClient():function(e,t,n){if("object"!=typeof t||null===t)return;const r=e.getMutationCache(),o=e.getQueryCache(),a=t.mutations||[],i=t.queries||[];a.forEach((t=>{var o;r.build(e,{...null==n||null==(o=n.defaultOptions)?void 0:o.mutations,mutationKey:t.mutationKey},t.state)})),i.forEach((t=>{var r;const a=o.get(t.queryHash);a?a.state.dataUpdatedAt<t.state.dataUpdatedAt&&a.setState(t.state):o.build(e,{...null==n||null==(r=n.defaultOptions)?void 0:r.queries,queryKey:t.queryKey,queryHash:t.queryHash},t.state)}))}(e,a.clientState,o)}else t.removeClient()}catch(e){t.removeClient()}}(e).then((()=>{n||(t=function(e){const t=e.queryClient.getQueryCache().subscribe((()=>{J(e)})),n=e.queryClient.getMutationCache().subscribe((()=>{J(e)}));return()=>{t(),n()}}(e))}));return[()=>{n=!0,null==t||t()},r]}({...c.current.persistOptions,queryClient:e});return r.then((()=>{t||(null==c.current.onSuccess||c.current.onSuccess(),l(!1))})),()=>{t=!0,n()}}),[e]),a.createElement(Q,W({client:e},o),a.createElement(ne,{value:i},t))};var oe=n(147).i8,ae="zotero-roam-portal",ie="zotero-roam-slot",le=1500,ce="ZOTERO_ROAM",ue="REACT_QUERY",se="REACT_QUERY_CLIENT",fe={artwork:"Illustration",audioRecording:"Recording",bill:"Legislation",blogPost:"Blog post",book:"Book",bookSection:"Chapter",case:"Legal case",computerProgram:"Data",conferencePaper:"Conference paper",dictionaryEntry:"Dictionary entry",document:"Document",email:"Letter",encyclopediaArticle:"Encyclopaedia article",film:"Film",forumPost:"Forum post",hearing:"Hearing",instantMessage:"Instant message",interview:"Interview",journalArticle:"Article",letter:"Letter",magazineArticle:"Magazine article",manuscript:"Manuscript",map:"Image",newspaperArticle:"Newspaper article",patent:"Patent",podcast:"Podcast",preprint:"Preprint",presentation:"Presentation",radioBroadcast:"Radio broadcast",report:"Report",statute:"Legislation",thesis:"Thesis",tvBroadcast:"TV broadcast",videoRecording:"Recording",webpage:"Webpage"},de={DATALIST_ITEM:"zr-datalist--item",DATALIST_PAGINATION:"zr-datalist--pagination",DATALIST_TOOLBAR:"zr-datalist--toolbar",DATALIST_WRAPPER:"zr-datalist--listwrapper",DATE_PICKER:"zr-date-picker",DIVIDER_MINIMAL:"zr-divider-minimal",INPUT_BOX:"zr-input-box",INPUT_DATE_RANGE:"zr-date-range-input",INPUT_TEXT:"zr-text-input",POPOVER:"zr-popover",PREFIX_DIALOG_AUXILIARY:"zr-auxiliary-dialog--",PREFIX_DIALOG_OVERLAY:"zr-dialog-overlay--",PREFIX_DRAWER:"zr-drawer--",TABS:"zr-tabs",TABS_MINIMAL:"zr-tabs-minimal",TEXT_ACCENT_1:"zr-accent-1",TEXT_ACCENT_2:"zr-accent-2",TEXT_AUXILIARY:"zr-auxiliary",TEXT_SECONDARY:"zr-secondary",TEXT_SMALL:"zr-text-small",TRIBUTE:"zr-tribute",TRIBUTE_SELECTED:"zr-tribute--selected",TRIBUTE_DETAILS:"zr-tribute--item-details"};function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const me=function(e){var t=e.ariaLabelledBy,n=void 0===t?null:t,i=e.className,l=e.extraClasses,c=void 0===l?[]:l,u=e.isOpen,s=e.label,f=void 0===s?null:s,d=e.onClose,p=e.title,m=void 0===p?null:p,h=Jy().portalId,y=(0,a.useMemo)((function(){return[de.PREFIX_DIALOG_AUXILIARY+i].concat((e=c,function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).join(" ");var e}),[i,c]),v=(0,a.useMemo)((function(){return!n&&f?{element:React.createElement(o.H5,{id:i+"-label",style:{display:"none"}},f),id:i+"-label"}:{element:null,id:null}}),[n,i,f]);return(0,r.createPortal)(React.createElement(o.Dialog,{"aria-labelledby":n||v.id||void 0,canEscapeKeyClose:!0,canOutsideClickClose:!0,className:y,enforceFocus:!1,isOpen:u,lazy:!0,title:m,usePortal:!1,onClose:d},v.element,e.children),document.getElementById(h))};function he(e){var t=e.buttonText,n=void 0===t?"Go back":t,r=e.error,a=e.resetErrorBoundary,i=void 0===a?void 0:a;return React.createElement(o.Callout,{intent:"danger",title:r.name},React.createElement("p",null,r.message),void 0!==i&&React.createElement(o.Button,{intent:"danger",onClick:i,outlined:!0,text:n}))}var ye=n(669),ve=n.n(ye),ge=n(367);function be(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){be(a,r,o,i,l,"next",e)}function l(e){be(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke="axios-retry";function Re(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&ge(e)}var xe=["get","head","options"],Te=xe.concat(["put","delete"]);function _e(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function Ce(e){return!!e.config&&_e(e)&&-1!==Te.indexOf(e.config.method)}function je(e){return Re(e)||Ce(e)}function Ae(){return 0}function Pe(e){var t=e[ke]||{};return t.retryCount=t.retryCount||0,e[ke]=t,t}function Ie(){return(Ie=we((function*(e,t,n,r){var o=n.retryCount<e&&t(r);if("object"==typeof o)try{return!1!==(yield o)}catch(e){return!1}return o}))).apply(this,arguments)}function Le(e,t){e.interceptors.request.use((e=>(Pe(e).lastRequestTime=Date.now(),e))),e.interceptors.response.use(null,function(){var n=we((function*(n){var{config:r}=n;if(!r)return Promise.reject(n);var{retries:o=3,retryCondition:a=je,retryDelay:i=Ae,shouldResetTimeout:l=!1,onRetry:c=(()=>{})}=function(e,t){return Se(Se({},t),e[ke])}(r,t),u=Pe(r);if(yield function(e,t,n,r){return Ie.apply(this,arguments)}(o,a,u,n)){u.retryCount+=1;var s=i(u.retryCount,n);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,r),!l&&r.timeout&&u.lastRequestTime){var f=Date.now()-u.lastRequestTime,d=r.timeout-f-s;if(d<=0)return Promise.reject(n);r.timeout=d}return r.transformRequest=[e=>e],c(u.retryCount,n,r),new Promise((t=>setTimeout((()=>t(e(r))),s)))}return Promise.reject(n)}));return function(e){return n.apply(this,arguments)}}())}Le.isNetworkError=Re,Le.isSafeRequestError=function(e){return!!e.config&&_e(e)&&-1!==xe.indexOf(e.config.method)},Le.isIdempotentRequestError=Ce,Le.isNetworkOrIdempotentRequestError=je,Le.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=Math.pow(2,e)*t;return n+.2*n*Math.random()},Le.isRetryableError=_e;var Ne=ve().create({baseURL:"https://api.zotero.org/",headers:{"Zotero-API-Version":3}});Le(Ne,{retries:2,retryCondition:function(e){if(e.response){var t=e.response.status;return 429==t||t>=500}return!0},retryDelay:function(e,t){if(t.response){var n=t.response.headers;return 1e3*(Number(n.backoff)||Number(n["retry-after"])||e)}return 3e3*e}});var De=ve().create({baseURL:"https://api.semanticscholar.org/v1/paper/",params:{include_unknown_references:"true"}});Le(De,{retries:3});var Me=ve().create({baseURL:"https://en.wikipedia.org/api/rest_v1/data/citation/zotero"});const ze=o.Toaster.create({className:"zr-toaster"});var Fe,Ue=function(e){return"fulfilled"===e.status},Be=function(e){return Boolean(e)},qe=function(e){return"annotation"===e.data.itemType},Xe=function(e){return"note"===e.data.itemType},Ge=function(e){return qe(e)||Xe(e)},Ke=function(e){return"attachment"===e.data.itemType},He=function(e){return!(Ke(e)||Ge(e))},Ve=function(e){return e.CITED="cited",e.CITING="citing",e}({}),Qe=function(e){return 0!=e.inLibrary},We=["func","use","__with"];function $e(e,t,n){return $e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ye(o,n.prototype),o},$e.apply(null,arguments)}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ye(e,t)}function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ze(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){return function(e){if(Array.isArray(e))return at(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t){return[].concat(rt(e),[t])}function lt(e,t){return[].concat(rt(e.slice(0,t)),rt(e.slice(t+1,e.length)))}function ct(e,t,n){return[].concat(rt(e.slice(0,t)),[n],rt(e.slice(t+1,e.length)))}function ut(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}function st(e){return e.reduce((function(e,t){return Ge(t)?e.notes.push(t):Ke(t)?"application/pdf"==t.data.contentType&&e.pdfs.push(t):e.items.push(t),e}),{items:[],pdfs:[],notes:[]})}function ft(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,a=e.data.url,i=Lt(e.data.DOI),l=a?{href:a,title:a}:!!i&&{href:"https://doi/org/"+i,title:i},c=e.data.creators.map((function(e){return{full:"name"in e?e.name:[e.firstName,e.lastName].filter(Be).join(" ")||"",last:("lastName"in e?e.lastName:e.name)||"",role:e.creatorType||""}})),u=Array.from(new Set(e.data.tags.map((function(e){return e.tag})))),s=e.meta.creatorSummary||"",f=e.meta.parsedDate?isNaN(Number(new Date(e.meta.parsedDate)))?"":new Date(e.meta.parsedDate).getUTCFullYear().toString():"",d=f?"(".concat(f,")"):"",p={abstract:e.data.abstractNote||"",authors:s,authorsFull:c.map((function(e){return e.full})),authorsLastNames:c.map((function(e){return e.last})),authorsRoles:c.map((function(e){return e.role})),children:{pdfs:n,notes:r},createdByUser:(null===(t=e.meta.createdByUser)||void 0===t?void 0:t.username)||null,inGraph:o.get("@"+e.key)||!1,itemKey:e.data.key,itemType:e.data.itemType,key:e.key,location:e.library.type+"s/"+e.library.id,meta:[s,d].filter(Be).join(" "),publication:e.data.publicationTitle||e.data.bookTitle||e.data.university||"",tags:u,title:e.data.title,weblink:l,year:f,zotero:{local:kt(e,{format:"target"}),web:xt(e,{format:"target"})},raw:e,_multiField:""};return p._multiField=[p.abstract,p.authorsFull.join(" "),p.year,p.title,p.tags.map((function(e){return"#".concat(e)})).join(", "),p.key].filter(Be).join(" "),p}function dt(e){var t=e;return t.startsWith("\n")?t=dt(t=t.slice(1)):t.endsWith("\n")&&(t=dt(t=t.slice(0,-1))),t.replaceAll(/\n{2}/g,"\n")}function pt(e,t,n){var r,o,a=t.items,i=void 0===a?[]:a,l=t.pdfs,c=void 0===l?[]:l,u=t.notes,s=void 0===u?[]:u,f=((o={authors:"",authorsLastNames:[],authorsString:"",doi:(r=e).doi,intent:r.intent,isInfluential:r.isInfluential,links:{},meta:r.venue.split(/ ?:/)[0],title:r.title,url:r.url||"",year:r.year?r.year.toString():"",_multiField:""}).authorsLastNames=r.authors.map((function(e){return 1==(t=e.name.replaceAll("."," ").split(" ").filter(Be)).length?t[0]:t.slice(1).filter((function(e){return e.length>1})).join(" ");var t})),o.authorsString=o.authorsLastNames.join(" "),o.authors=function(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e[0]+" & "+e[1];case 3:return e[0]+", "+e[1]+" & "+e[2];default:return e[0]+" et al."}}(o.authorsLastNames),r.paperId&&(o.links["semantic-scholar"]="https://www.semanticscholar.org/paper/".concat(r.paperId)),r.arxivId&&(o.links.arxiv="https://arxiv.org/abs/".concat(r.arxivId)),(r.doi||r.title)&&(o.links["connected-papers"]="https://www.connectedpapers.com/"+(r.doi?"api/redirect/doi/"+r.doi:"search?q="+encodeURIComponent(r.title)),o.links["google-scholar"]="https://scholar.google.com/scholar?q="+(r.doi||encodeURIComponent(r.title))),o._multiField=[o.authorsString,o.year,o.title].filter(Be).join(" "),o);if(f.doi){var d=i.find((function(e){return Lt(e.data.DOI)==f.doi}));if(d){var p=_t(d.data.key,d.library.type+"s/"+d.library.id,{pdfs:c,notes:s});return tt(tt({},f),{},{inGraph:n.get("@"+d.key)||!1,inLibrary:{children:p,raw:d}})}return tt(tt({},f),{},{inGraph:!1,inLibrary:!1})}return tt(tt({},f),{},{inGraph:!1,inLibrary:!1})}function mt(e,t){var n=Je(e,3),r=n[0],o=void 0===r?0:r,a=n[1],i=void 0===a?0:a,l=n[2],c=void 0===l?0:l,u=Je(t,3),s=u[0],f=void 0===s?0:s,d=u[1],p=void 0===d?0:d,m=u[2];return o<f||o==f&&(i<p||i==p&&c<=(void 0===m?0:m))?-1:1}function ht(e){return e.split("|").map((function(e){return Number(e)}))}function yt(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(t){ze.show({intent:"success",message:"Successfully copied to clipboard: ".concat(e),timeout:800})})).catch((function(t){var n,r;null===(n=window.zoteroRoam)||void 0===n||null===(r=n.error)||void 0===r||r.call(n,{origin:"Copy",message:"Failed to copy to clipboard: ".concat(e),detail:t.message,showToaster:1e3})})):ze.show({message:"Clipboard API is not available. The following could not be copied: ".concat(e),timeout:1e3})}function vt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gt(e,t){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];for(var i=Array.prototype.slice.call(arguments,2),l=e.split("."),c=l.pop(),u=t,s=0;s<l.length;s++)u=u[l[s]];if(!u[c])throw new Error("Function ".concat(c," doesn't exist"));return(n=u)[c].apply(n,rt(i))}function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.template_comment,r=void 0===n?"{{comment}}":n,o=t.template_highlight,a=void 0===o?"[[>]] {{highlight}} ([p. {{page_label}}]({{link_page}})) {{tags_string}}":o;if("highlight"==e.type){var i=e.comment,l=e.page_label,c=e.link_page,u=e.tags_string,s=r,f=a,d={comment:i,highlight:e.text,page_label:l,link_page:c,tags_string:u};for(var p in d)s=s.replaceAll("{{".concat(p,"}}"),"".concat(d[p])),f=f.replaceAll("{{".concat(p,"}}"),"".concat(d[p]));return{string:f,text:f,children:i?[s]:[]}}return e.type,null}function wt(e){return Xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n").flat(1).map((function(e){return function(e){var t=e,n={"<blockquote>":"> ","</blockquote>":"","<strong>":"**","</strong>":"**","<em>":"__","</em>":"__","<b>":"**","</b>":"**","<br />":"\n","<br/>":"\n","<br>":"\n","<u>":"","</u>":"","<ul>":"","</ul>":"","<ol>":"","</ol>":"","</li><li>":" ","<li>":"","</li>":""};for(var r in n)t=t.replaceAll("".concat(r),"".concat(n[r]));["p","div","span","h1","h2","h3","h4","h5","h6"].forEach((function(e){var n=new RegExp("</?".concat(e,">|<").concat(e," .+?>"),"g");t=t.replaceAll(n,e.startsWith("h")?"**":"")}));return t=dt(t=t.replaceAll(/<a.+?href="(.+?)">(.+?)<\/a>/g,"[$2]($1)"))}(e)})).filter((function(e){return e.trim()}))}function Et(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).accent_class,r=void 0===n?"zr-accent-1":n,o=e.key,a=e.data.title,i=e.meta.creatorSummary||"",l=e.meta.parsedDate?isNaN(Number(new Date(e.meta.parsedDate)))?"":new Date(e.meta.parsedDate).getUTCFullYear():"",c=[i,l?"(".concat(l,")"):""].filter(Be).join(" "),u={authors:i,citekey:"@"+o,key:o,summary:c,summary_or_key:c||o,title:a,year:l},s={citation:"[{{summary_or_key}}]([[{{citekey}}]])",citekey:"{{citekey}}",inline:"{{summary}}",key:"{{key}}",pageref:"[[{{citekey}}]]",popover:"{{=: {{summary_or_key}} | {{embed: [[{{citekey}}]]}} }}",tag:"#[[{{citekey}}]]",zettlr:'<span class="'.concat(r,'">{{summary_or_key}}</span> {{title}}')}[t]||t||"{{citekey}}";for(var f in u)s=s.replaceAll("{{".concat(f,"}}"),"".concat(u[f]));return s}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.func,r=void 0===n?"":n,o=t.use,a=void 0===o?"default":o,i=t.__with,l=void 0===i?"raw":i,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,We);return"function"==a&&r?gt(r,window,"raw"==l?e:Ft(e)):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.group_by,r=void 0!==n&&n,o=t.template_comment,a=t.template_highlight,i=Ft(e);if("day_added"==r){var l=i.sort((function(e,t){return e.date_added<t.date_added?-1:1})).reduce((function(e,t){var n=new Date(t.date_added).toLocaleDateString("en-CA");return e[n]?e[n].push(t):e[n]=[t],e}),{});return Object.keys(l).sort((function(e,t){return new Date(e)<new Date(t)?-1:1})).map((function(e){var t=l[e].sort((function(e,t){return mt(e.sortIndex,t.sortIndex)}));return{string:jt("".concat(e,"T00:00"),{brackets:!0}),text:jt("".concat(e,"T00:00"),{brackets:!0}),children:t.map((function(e){return bt(e,{template_comment:o,template_highlight:a})})).filter(Be)}})).filter((function(e){return e.children.length>0}))}return i.map((function(e){return bt(e,{template_comment:o,template_highlight:a})})).filter(Be)}(e,tt({},c))}function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.func,r=void 0===n?"":n,o=t.split_char,a=void 0===o?"":o,i=t.split_preset,l=void 0===i?"\n":i,c=t.split_use,u=void 0===c?"preset":c,s=t.use,f=void 0===s?"default":s,d=t.__with,p="custom"==u?a:l;return"function"==f&&r?gt(r,window,"raw"==(void 0===d?"raw":d)?e:Xt(e,p)):wt(e,p)}function kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=void 0===n?"markdown":n,o=t.text,a=void 0===o?"Local library":o,i="group"==e.library.type?"groups/".concat(e.library.id):"library",l="zotero://select/".concat(i,"/items/").concat(e.data.key);return"markdown"===r?"[".concat(a,"](").concat(l,")"):l}function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"href",n="group"==e.library.type?"groups/".concat(e.library.id):"library",r="",o="";return["linked_file","imported_file","imported_url"].includes(e.data.linkMode)?(r="zotero://open-pdf/"+n+"/items/"+e.data.key,o=e.data.filename||e.data.title):(r=e.data.url,o=e.data.title),"markdown"===t?"[".concat(o,"](").concat(r,")"):r}function xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=void 0===n?"markdown":n,o=t.text,a=void 0===o?"Web library":o,i=("user"==e.library.type?"users":"groups")+"/".concat(e.library.id),l="https://www.zotero.org/".concat(i,"/items/").concat(e.data.key);return"markdown"===r?"[".concat(a,"](").concat(l,")"):l}function Tt(e,t){var n=Array.from(e),r=Array.from(t);return n.length+r.length!=0&&(n.length!==r.length||n.some((function(e,t){return e!==r[t]})))}function _t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.pdfs,o=void 0===r?[]:r,a=n.notes,i=void 0===a?[]:a,l=o.filter((function(n){return n.data.parentItem==e&&n.library.type+"s/"+n.library.id==t})),c=l.map((function(e){return e.key}));return{pdfs:l,notes:i.filter((function(n){return[e].concat(rt(c)).includes(n.data.parentItem)&&n.library.type+"s/"+n.library.id==t}))}}function Ct(e){var t=e.constructor===Date?e:new Date(e),n=new Date;n.setHours(0,0,0);var r=new Date;return r.setDate(n.getDate()-1),r.setHours(0,0,0),t>n?"Today at ".concat(Pt(t)):t>r?"Yesterday at ".concat(Pt(t)):["".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(At(t.getDate())),t.getFullYear()!=n.getFullYear()&&t.getFullYear()].filter(Be).join(" ")}function jt(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).brackets,n=void 0===t||t,r=e.constructor===Date?e:new Date(e),o="".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()]," ").concat(At(r.getDate()),", ").concat(r.getFullYear());return n?"[[".concat(o,"]]"):o}function At(e){var t=e%10;return 1==t&&11!=e?e+"st":2==t&&12!=e?e+"nd":3==t&&13!=e?e+"rd":e+"th"}function Pt(e){var t=e.constructor===Date?e:new Date(e);return"".concat(t.getHours(),":").concat(("0"+t.getMinutes()).slice(-2))}function It(e,t){return e.some((function(e){return t.includes(e)}))}function Lt(e){if(e){var t=e.match(/10\.([0-9]+?)\/(.+)/g);return!!t&&t[0].toLowerCase()}return!1}function Nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"".concat(0==e?"No":e," ").concat(t).concat(1==e?"":"s").concat(n)}function Dt(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).as_date,n=void 0===t||t,r=Je(Array.from(e.matchAll(/(.+) ([0-9]+).{2}, ([0-9]{4})/g))[0],4),o=(r[0],r[1]),a=r[2],i=r[3],l=[parseInt(i),["January","February","March","April","May","June","July","August","September","October","November","December"].findIndex((function(e){return e==o})),parseInt(a)];return n?$e(Date,l):l}function Mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.any_case,o=void 0===r||r,a=n.match,i=void 0===a?"partial":a,l=n.search_compounds,c=void 0===l||l,u=n.word_order,s=void 0===u?"strict":u;if(t.constructor===String)return zt(e,t,{any_case:o,match:i,search_compounds:c,word_order:s});if(t.constructor===Array)return t.some((function(t){return zt(e,t,{any_case:o,match:i,search_compounds:c,word_order:s})}));throw new Error("Unexpected input type ".concat(t.constructor.name," : target should be a String or an Array"))}function zt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.any_case,o=void 0===r||r,a=n.match,i=void 0===a?"partial":a,l=n.search_compounds,c=void 0===l||l,u=n.word_order,s=void 0===u?"strict":u,f=e,d=t;1==o&&(f=e.toLowerCase(),d=t.toLowerCase());var p=f.split(" "),m=p.some((function(e){return e.includes("-")}));if(1!=p.length){var h=p.map((function(e){return vt(e)}));return 1==c&&(m?h=h.map((function(e){return e.includes("-")?e.replace("-","(?: |-)?"):e})):m||"strict"!=s||(h=[h.join("(?: |-)?")])),"loose"==s?"word"==i?h.map((function(e){return"(?:\\W|^)"+e+"(?:\\W|$)"})).every((function(e){return new RegExp(e).test(d)})):h.every((function(e){return new RegExp(e).test(d)})):"partial"==i?new RegExp(h.join(" ")).test(d):"exact"==i?new RegExp("^"+h.join(" ")+"$").test(d):new RegExp("(?:\\W|^)"+h.join(" ")+"(?:\\W|$)").test(d)}var y=vt(f);switch(m&&1==c&&(y=y.replace("-","(?: |-)?")),i){case"partial":return new RegExp(y).test(d);case"exact":return new RegExp("^"+y+"$").test(d);case"word":return new RegExp("(?:\\W|^)"+y+"(?:\\W|$)").test(d);default:return!1}}function Ft(e){return e.map((function(e){var t=e.data,n=t.annotationColor,r=t.annotationComment,o=t.annotationPageLabel,a=t.annotationPosition,i=t.annotationSortIndex,l=t.annotationText,c=t.annotationType,u=t.dateAdded,s=t.dateModified,f=t.parentItem,d=t.tags,p=jt(u,{brackets:!1}),m=jt(s,{brackets:!1}),h=e.library.type+"s/"+e.library.id,y=h.startsWith("groups/")?h:"library",v=JSON.parse(a),g="zotero://open-pdf/".concat(y,"/items/").concat(f),b=g+"?page=".concat(v.pageIndex+1);return{color:n,comment:r,date_added:u,date_modified:s,day_added:p,day_modified:m,key:e.key,library:h,link_pdf:g,link_page:b,page_label:o,parent_item:f,position:v,raw:e,sortIndex:ht(i),tags:d.map((function(e){return e.tag})),tags_string:d.map((function(e){return"#[[".concat(e.tag,"]]")})).join(", "),text:l,type:c}}))}function Ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=tt(tt({},e),{},{depth:n}),o=t.filter((function(e){return e.data.parentCollection==r.key}));if(o.length>0){for(var a=[r],i=0;i<o.length;i++)a.push.apply(a,rt(Ut(o[i],t,n+1)));return a}return[r]}function Bt(e){if(e.length>0){for(var t=rt(e).sort((function(e,t){return e.data.name.toLowerCase()<t.data.name.toLowerCase()?-1:1})),n=t.filter((function(e){return e.data.parentCollection})),r=t.filter((function(e){return!e.data.parentCollection})).map((function(e){return tt(tt({},e),{},{depth:0})})),o=[],a=function(e){n.filter((function(t){return t.data.parentCollection==r[e].key})).length>0?o.push.apply(o,rt(Ut(r[e],n))):o.push(r[e])},i=0;i<r.length;i++)a(i);return o}return[]}function qt(e,t){return e.sort((function(e,n){return"".concat(e[t]).toLowerCase()<"".concat(n[t]).toLowerCase()?-1:1}))}function Xt(e,t){var n=function(e){var t;if("string"!=typeof e)throw new Error("Input is of type ".concat(Ze(e),", expected String"));var n=new RegExp(/^<\/?(.+?)>|<(.+?)>$/),r=n.test(e);return{result:r,htmlTag:r&&(null===(t=e.match(n))||void 0===t?void 0:t[1])||null}}(t),r=n.result,o=n.htmlTag;if(r&&o){var a=new RegExp("</?".concat(o,">|<").concat(o," .+?>"),"g");return e.map((function(e){return e.data.note.split(a).filter(Be)}))}return e.map((function(e){return e.data.note.split(t).filter(Be)}))}function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Gt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=new CustomEvent("zotero-roam:".concat(e._type),{bubbles:!0,cancelable:!0,detail:e});t.dispatchEvent(n)}function Wt(e){var t,n,r=e.detail,o=r.error,a=r.page.title,i=r.success;if(o)null===(t=window.zoteroRoam)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,{origin:"API",message:"Metadata import failed for ".concat(a),context:Ht(Ht({},e.detail),{},{error:wn(o)}),showToaster:!0});else if(i)ze.show({intent:"success",message:"Metadata added to "+a,timeout:le});else{var l,c;null===(l=window.zoteroRoam)||void 0===l||null===(c=l.warn)||void 0===c||c.call(l,{origin:"API",message:"Metadata import had uncertain outcome",context:e.detail})}}function $t(e){var t,n,r=e.detail,o=r.error,a=r.page.title,i=r.raw.notes,l=r.success;if(o)null===(t=window.zoteroRoam)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,{origin:"API",message:"Notes import failed for ".concat(a),context:Ht(Ht({},e.detail),{},{error:wn(o)}),showToaster:!0});else if(l)ze.show({intent:"success",message:"Notes added to "+a+" (".concat(i.length,")"),timeout:le});else{var c,u;null===(c=window.zoteroRoam)||void 0===c||null===(u=c.warn)||void 0===u||u.call(c,{origin:"API",message:"Notes import had uncertain outcome",context:e.detail})}}function Yt(e){var t,n,r=e.detail,o=r.args.tags,a=r.error,i=r.library;a?null===(t=window.zoteroRoam)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,{origin:"API",message:"Tag deletion failed",context:Ht(Ht({},e.detail),{},{error:wn(a)}),showToaster:!0}):ze.show({intent:"success",message:Nt(o.length,"tag"," deleted from ".concat(i)),timeout:le})}function Zt(e){var t=e.detail,n=t.data,r=n.failed,o=n.successful,a=t.error,i=t.library;if((a=wn(a))||r.length>0&&0==o.length){var l,c;null===(l=window.zoteroRoam)||void 0===l||null===(c=l.error)||void 0===c||c.call(l,{origin:"API",message:"Tag modification failed",context:Ht(Ht({},e.detail),{},{error:a}),showToaster:!0})}else{var u,s,f=o.reduce((function(e,t){return e.success+=Object.keys(t.successful).length,e.error+=Object.keys(t.failed).length,e}),{error:0,success:0});0==r.length&&0==f.error?ze.show({intent:"success",message:Nt(f.success,"item"," successfully modified in ".concat(i,".")),timeout:le}):null===(u=window.zoteroRoam)||void 0===u||null===(s=u.warn)||void 0===s||s.call(u,{origin:"API",message:"",detail:"".concat(Nt(f.success,"item","")," modified in ").concat(i,", with some problems. \n Check the extension's logs for more details."),context:Ht(Ht({},e.detail),{},{error:a}),showToaster:!0})}}function Jt(e){var t=e.detail,n=t.data,r=t.error,o=t.library,a=n.failed,i=void 0===a?[]:a,l=n.successful,c=void 0===l?[]:l;if((r=wn(r))||i.length>0&&0==c.length){var u,s;null===(u=window.zoteroRoam)||void 0===u||null===(s=u.error)||void 0===s||s.call(u,{origin:"API",message:"Error sending data to Zotero",context:Ht(Ht({},e.detail),{},{error:r}),showToaster:!0})}else{var f,d,p=c.reduce((function(e,t){return e.success+=Object.keys(t.successful).length,e.error+=Object.keys(t.failed).length,e}),{error:0,success:0});0==i.length&&0==p.error?ze.show({intent:"success",message:Nt(p.success,"item"," added to ".concat(o,".")),timeout:le}):null===(f=window.zoteroRoam)||void 0===f||null===(d=f.warn)||void 0===d||d.call(f,{origin:"API",message:"Unsuccessful when sending data to Zotero",detail:"".concat(Nt(p.success,"item","")," added to ").concat(o,", with some problems. \n Check the extension's logs for more details."),context:Ht(Ht({},e.detail),{},{error:r}),showToaster:!0})}}Fe||(Fe={});var en=["doi"],tn=["data"],nn=["data"],rn=["data","headers"],on=["data","headers"];function an(){an=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==ln(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function cn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ln(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ln(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function pn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dn(a,r,o,i,l,"next",e)}function l(e){dn(a,r,o,i,l,"throw",e)}i(void 0)}))}}function mn(e){return function(e){if(Array.isArray(e))return vn(e)}(e)||hn(e)||yn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function yn(e,t){if(e){if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gn(e,t){return[e,t].forEach((function(e){if(e.constructor!==Object||!e.tag||!e.meta)throw new Error("Received bad input: ".concat(JSON.stringify(e),", expected a Zotero tag"));if(void 0===e.meta.type)throw new Error("Received bad input: ".concat(JSON.stringify(e),", expected the tag to have a type"))})),e.meta.type==t.meta.type&&e.tag==t.tag}function bn(e){var t=e;["div"].forEach((function(e){var n=new RegExp("</?".concat(e,">|<").concat(e," .+?>"),"g");t=t.replaceAll(n,"")})),t=dt(t).trim();var n=document.createElement("textarea");n.innerHTML=t;var r=n.innerText;return(r=r.replaceAll(/<\/?i>/g,"__")).replaceAll(/<a href="(.+)">(.+)<\/a>/g,"[$2]($1)")}function wn(e){try{return"AxiosError"==(e.name||"")?{code:e.code,message:e.message,status:e.status,config:{url:e.config.url}}:e.message}catch(t){return e}}function En(){return(En=pn(an().mark((function e(t,n,r){var o,a,i,l,c;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.apikey,a=n.path,t.length>50&&(null===(i=window.zoteroRoam)||void 0===i||null===(l=i.warn)||void 0===l||l.call(i,{origin:"API",message:"API limits exceeded",detail:"Only 50 Zotero tags can be deleted at once. Any additional tags selected will be ignored."})),c=t.slice(0,50).map((function(e){return encodeURIComponent(e)})).join(" || "),e.next=5,Ne.delete("".concat(a,"/tags"),{headers:{"Zotero-API-Key":o,"If-Unmodified-Since-Version":r},params:{tag:c}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sn(e,t){return On.apply(this,arguments)}function On(){return(On=pn(an().mark((function e(t,n){var r,o,a,i,l,c,u,s,f,d,p,m;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.dataURI,o=t.apikey,a=t.since,i=void 0===a?null:a,l=Math.ceil(n/100-1),c=[],u=1;u<=l;u++)s=new URLSearchParams(""),i&&s.set("since","".concat(i)),s.set("start","".concat(100*u)),s.set("limit","".concat(100)),c.push(Ne.get("".concat(r,"?").concat(s.toString()),{headers:{"Zotero-API-Key":o}}));return f=[null],e.prev=5,e.next=8,Promise.all(c);case 8:return d=e.sent,f=d,e.abrupt("return",d.map((function(e){return e.data})).flat(1));case 13:return e.prev=13,e.t0=e.catch(5),null===(p=window.zoteroRoam)||void 0===p||null===(m=p.error)||void 0===m||m.call(p,{origin:"API",message:"Failed to fetch additional data",context:{dataURI:r,error:wn(e.t0),responses:f,totalResults:n}}),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function kn(e,t){return Rn.apply(this,arguments)}function Rn(){return(Rn=pn(an().mark((function e(t,n){var r,o,a,i,l,c,u;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n.apikey,o=n.path,a=[],i=Math.ceil(t.length/100),l=1;l<=i;l++)c=t.slice(100*(l-1),100*l),a.push(Ne.get("".concat(o,"/items"),{headers:{"Zotero-API-Key":r},params:{include:"biblatex",itemKey:c.join(",")}}));return e.next=6,Promise.all(a);case 6:return u=e.sent,e.abrupt("return",u.map((function(e){return e.data})).flat(1).map((function(e){return e.biblatex})).join("\n"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e,t){return Tn.apply(this,arguments)}function Tn(){return Tn=pn(an().mark((function e(t,n){var r,o,a,i,l,c,u,s,f,d,p,m,h,y,v,g,b=arguments;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:{},o=n.apikey,a=n.path,i="".concat(a,"/items/").concat(t),l=r.linkwrap,c=void 0===l?0:l,u=r.locale,s=void 0===u?"en-US":u,f=r.style,d=void 0===f?"chicago-note-bibliography":f,e.prev=4,e.next=7,Ne.get(i,{headers:{"Zotero-API-Key":o},params:{include:"bib",linkwrap:c,locale:s,style:d}});case 7:return m=e.sent,h=m.data,y=cn(m,tn),p=sn({data:h},y),e.abrupt("return",h.bib);case 14:return e.prev=14,e.t0=e.catch(4),null===(v=window.zoteroRoam)||void 0===v||null===(g=v.error)||void 0===g||g.call(v,{origin:"API",message:"Failed to fetch bibliography",context:{config:r,dataURI:i,error:wn(e.t0),response:p}}),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}}),e,null,[[4,14]])}))),Tn.apply(this,arguments)}function _n(){return(_n=pn(an().mark((function e(t){var n,r,o,a,i,l;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Me.get(encodeURIComponent(t));case 3:return r=e.sent,o=r.data,a=cn(r,nn),n=sn({data:o},a),e.abrupt("return",{item:o[0],query:t});case 10:return e.prev=10,e.t0=e.catch(0),null===(i=window.zoteroRoam)||void 0===i||null===(l=i.error)||void 0===l||l.call(i,{origin:"API",message:"Failed to fetch metadata from Wikipedia",context:{error:wn(e.t0),query:t,response:n}}),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Cn(){return Cn=pn(an().mark((function e(t){var n,r,o,a,i,l,c,u,s,f,d,p,m,h,y,v,g,b,w,E,S,O,k=arguments;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.length>1&&void 0!==k[1]?k[1]:0,r=(k.length>2?k[2]:void 0).match,o=void 0===r?[]:r,a=t.apikey,i=t.path,l={data:null,error:null,library:i,since:n,success:!1},e.prev=4,e.next=7,Ne.get("".concat(i,"/collections"),{headers:{"Zotero-API-Key":a},params:{since:n}});case 7:if(f=e.sent,d=f.data,p=f.headers,m=cn(f,rn),c=sn({data:d,headers:p},m),u=d,h=p["last-modified-version"],y=p["total-results"],!((v=Number(y))>100)){e.next=20;break}return e.next=18,Sn({dataURI:"".concat(i,"/collections"),apikey:a,since:n},v);case 18:b=e.sent,(g=u).push.apply(g,mn(b));case 20:if(!(n>0&&u.length>0)){e.next=28;break}return e.next=23,jn(t,n);case 23:w=e.sent,E=w.collections,s=void 0===E?[]:E,Qt(sn(sn({},l),{},{data:u,success:!0,type:"collections",_type:"update"}));case 28:return e.abrupt("return",{data:zn({modified:u,deleted:s},o),lastUpdated:Number(h)});case 31:return e.prev=31,e.t0=e.catch(4),null===(S=window.zoteroRoam)||void 0===S||null===(O=S.error)||void 0===O||O.call(S,{origin:"API",message:"Failed to fetch collections",context:{data:u,deleted:s,error:wn(e.t0),response:c}}),Qt(sn(sn({},l),{},{error:e.t0,success:!1,type:"collections",_type:"update"})),e.abrupt("return",Promise.reject(e.t0));case 36:case"end":return e.stop()}}),e,null,[[4,31]])}))),Cn.apply(this,arguments)}function jn(e,t){return An.apply(this,arguments)}function An(){return(An=pn(an().mark((function e(t,n){var r,o,a,i,l,c,u;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apikey,o=t.path,e.prev=1,e.next=4,Ne.get("".concat(o,"/deleted"),{headers:{"Zotero-API-Key":r},params:{since:n}});case 4:return i=e.sent,l=i.data,a=l,e.abrupt("return",l);case 10:return e.prev=10,e.t0=e.catch(1),null===(c=window.zoteroRoam)||void 0===c||null===(u=c.error)||void 0===u||u.call(c,{origin:"API",message:"Failed to fetch deleted data",context:{error:wn(e.t0),response:a}}),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Pn(e,t,n){return In.apply(this,arguments)}function In(){return In=pn(an().mark((function e(t,n,r){var o,a,i,l,c,u,s,f,d,p,m,h,y,v,g,b,w,E,S,O,k,R,x,T,_,C,j,A;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.match,a=void 0===o?[]:o,i=t.apikey,l=t.dataURI,c=t.library.path,u=t.since,s=void 0===u?0:u,(f=new URLSearchParams("")).set("since","".concat(s)),f.set("start","0"),f.set("limit","100"),d={data:null,error:null,library:c,since:s,success:!1},e.prev=7,e.next=10,Ne.get("".concat(l,"?").concat(f.toString()),{headers:{"Zotero-API-Key":i}});case 10:if(y=e.sent,v=y.data,g=y.headers,b=cn(y,on),p=sn({data:v,headers:g},b),m=v,w=g["last-modified-version"],E=g["total-results"],!((S=Number(E))>100)){e.next=23;break}return e.next=21,Sn({dataURI:l,apikey:i,since:s},S);case 21:k=e.sent,(O=m).push.apply(O,mn(k));case 23:if(!(s>0)){e.next=33;break}return e.next=26,jn({apikey:i,path:c},s);case 26:R=e.sent,x=R.items,h=void 0===x?[]:x,T=["tags",{library:c}],_=r.getQueryData(T)||{},C=_.lastUpdated,(m.length>0||Number(C)<Number(w))&&(r.refetchQueries(T),Qt(sn(sn({},d),{},{data:m,success:!0,type:"items",_type:"update"})));case 33:return e.abrupt("return",{data:zn({modified:m,deleted:h},a,{with_citekey:!0}),lastUpdated:Number(w)});case 36:return e.prev=36,e.t0=e.catch(7),null===(j=window.zoteroRoam)||void 0===j||null===(A=j.error)||void 0===A||A.call(j,{origin:"API",message:"Failed to fetch items",context:{data:m,deleted:h,error:wn(e.t0),response:p}}),Qt(sn(sn({},d),{},{error:e.t0,success:!1,type:"items",_type:"update"})),e.abrupt("return",Promise.reject(e.t0));case 41:case"end":return e.stop()}}),e,null,[[7,36]])}))),In.apply(this,arguments)}function Ln(){return(Ln=pn(an().mark((function e(t){var n,r,o,a;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.get("keys/".concat(t),{headers:{"Zotero-API-Key":t}});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),null===(o=window.zoteroRoam)||void 0===o||null===(a=o.error)||void 0===a||a.call(o,{origin:"API",message:"Failed to fetch permissions"}),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Nn(){return(Nn=pn(an().mark((function e(t){var n,r,o,a,i,l,c;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,De.get("".concat(t));case 3:return r=e.sent,o=r.data,a=o.citations,i=o.references,n=r,e.abrupt("return",{doi:t,citations:Fn(a),references:Fn(i)});case 9:return e.prev=9,e.t0=e.catch(0),null===(l=window.zoteroRoam)||void 0===l||null===(c=l.error)||void 0===c||c.call(l,{origin:"API",message:"Failed to fetch data from SemanticScholar",context:{error:wn(e.t0),response:n}}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function Dn(){return(Dn=pn(an().mark((function e(t){var n,r,o,a,i,l,c,u,s,f,d,p,m;return an().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apikey,r=t.path,o=[],e.prev=2,e.next=5,Ne.get("".concat(r,"/tags?limit=100"),{headers:{"Zotero-API-Key":n}});case 5:if(a=e.sent,i=a.data,l=a.headers,o=i,c=l["last-modified-version"],u=l["total-results"],!((s=Number(u))>100)){e.next=16;break}return e.next=14,Sn({dataURI:"".concat(r,"/tags"),apikey:n},s);case 14:d=e.sent,(f=o).push.apply(f,mn(d));case 16:return e.abrupt("return",{data:Mn(o),lastUpdated:Number(c)});case 19:return e.prev=19,e.t0=e.catch(2),null===(p=window.zoteroRoam)||void 0===p||null===(m=p.error)||void 0===m||m.call(p,{origin:"API",message:"Failed to fetch tags",context:{error:wn(e.t0),path:r,tags:o}}),e.abrupt("return",Promise.reject(e.t0));case 23:case"end":return e.stop()}}),e,null,[[2,19]])})))).apply(this,arguments)}function Mn(e){try{var t=function(e){return e.reduce((function(e,t){return function(e,t){var n=t.tag;if(e.has(n)){var r=e.get(n);if(Array.isArray(r))r.every((function(e){return!gn(t,e)}))&&e.set(n,[].concat(mn(r),[t]));else{if("object"!==ln(r))throw new Error("Map entry is of unexpected type ".concat(ln(r),", expected Array or Object"));gn(t,r)||e.set(n,[r,t])}}else e.set(n,t);return e}(e,t)}),new Map)}(e),n=Array.from(t.keys()).reduce((function(e,t){try{var n=t.charAt(0).toLowerCase();e[n]?e[n].push(t):e[n]=[t]}catch(e){throw new Error("Could not add ".concat(JSON.stringify(t)," to dictionary"))}return e}),{}),r=Object.keys(n).sort((function(e,t){return e<t?-1:1})),o={};return r.forEach((function(e){o[e]=function(e,t){var n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yn(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(Array.from(e).sort((function(e,t){return e>t?-1:1})));try{var a=function(){var e=n.value;try{var o,a=r.findIndex((function(t){return Mt(e,t.token,{any_case:!0,match:"exact",search_compounds:!0})})),i=t.get(e);-1==a?r.push({token:e.toLowerCase(),roam:[],zotero:Array.isArray(i)?i:[i]}):Array.isArray(i)?(o=r[a].zotero).push.apply(o,mn(i)):r[a].zotero.push(i)}catch(t){throw new Error("Failed to categorize ".concat(e,": ")+t.message)}};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return r.sort((function(e,t){return e.token<t.token?-1:1}))}(n[e],t)})),o}catch(e){throw new Error("Could not create tag list : "+e.message)}}function zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).with_citekey,r=void 0!==n&&n,o=e.modified,a=void 0===o?[]:o,i=e.deleted,l=void 0===i?[]:i,c=r?function(e){return mn(e).map((function(e){var t,n=e.key,r=!1;return void 0!==e.data.extra&&e.data.extra.includes("Citation Key: ")&&(n=(null===(t=e.data.extra.match("Citation Key: (.+)"))||void 0===t?void 0:t[1])||n,r=!0),sn(sn({},e),{},{key:n,has_citekey:r})}))}(mn(a)):mn(a),u=mn(l),s=0==u.length?t:t.filter((function(e){return!u.includes(e.data.key)}));if(0==c.length)return s;if(0==s.length)return c;var f=function(e){return function(e){if(Array.isArray(e))return e}(e)||hn(e)||yn(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s).slice(0);return c.forEach((function(e){var t=f.findIndex((function(t){return t.data.key==e.data.key}));-1==t?f.push(e):f[t]=e})),f}function Fn(e){return e.map((function(e){var t=e.doi,n=cn(e,en);return sn({doi:Lt(t)},n)}))}function Un(e,t){for(var n=t.apikey,r=t.path,o=Math.ceil(e.length/50),a=[],i=1;i<=o;i++){var l=e.slice(50*(i-1),50*i);a.push(Ne.post("".concat(r,"/items"),JSON.stringify(l),{headers:{"Zotero-API-Key":n}}))}return Promise.allSettled(a)}function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Bn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Bn(o)?o:String(o)),r)}var o}function Xn(e,t){return Xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xn(e,t)}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xn(e,t)}(i,e);var t,n,r,o,a=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Gn(t);if(n){var o=Gn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={error:null,errorInfo:null},t}return r=i,(o=[{key:"componentDidCatch",value:function(e,t){var n,r;this.setState({error:e,errorInfo:t}),null===(n=window.zoteroRoam)||void 0===n||null===(r=n.error)||void 0===r||r.call(n,{origin:"Interface",message:"Failed to render",context:{error:wn(e),errorInfo:t}})}},{key:"render",value:function(){return this.state.error?React.createElement(he,{error:this.state.error}):this.props.children}}])&&qn(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),i}(a.Component);function Hn(e){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(e)}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yn(r.key),r)}}function Wn(e,t,n){return t&&Qn(e.prototype,t),n&&Qn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $n(e,t,n){return(t=Yn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e){var t=function(e,t){if("object"!==Hn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Hn(t)?t:String(t)}var Zn=Wn((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$n(this,"Provider",(function(e){var n,r,o=e.children,i=e.init,l=e.updater,c=(n=(0,a.useState)(i),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1],f=(0,a.useCallback)((function(e){s((function(n){var r,o,a,i,c=e(n);return null===(r=(o=t.hooks).beforeUpdate)||void 0===r||r.call(o,n,c),l(c),null===(a=(i=t.hooks).afterUpdate)||void 0===a||a.call(i,n,c),c}))}),[l]),d=(0,a.useMemo)((function(){return[u,f]}),[u,f]);return React.createElement(t.context.Provider,{value:d},o)})),$n(this,"useSettings",(function(){var e=(0,a.useContext)(t.context);if(!e)throw new Error("No context provided");return e})),this.context=(0,a.createContext)(null),this.hooks=n}));const Jn=window.Blueprint.Select;function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tr=function(e){var t,n,r=(t=(0,a.useState)(e),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?er(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],l=(0,a.useCallback)((function(){i((function(e){return!e}))}),[]);return[o,{set:(0,a.useCallback)((function(e){i(e)}),[]),toggle:l,on:(0,a.useCallback)((function(){return i(!0)}),[]),off:(0,a.useCallback)((function(){return i(!1)}),[])}]};function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}var rr=["description","label","setValue","title","value"],or=["buttonProps","onSelect","options","popoverTargetProps","value"],ar=["buttonProps","description","menuTitle","onSelect","options","title","value"],ir=["label","onChange","value"],lr=["description","ifEmpty","label","onChange","placeholder","title","validate","value"],cr=["popoverTargetProps"],ur=["description","isChecked","label","onChange","title"];function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==nr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===nr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mr(){return mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mr.apply(this,arguments)}function hr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var yr={canEscapeKeyClose:!1,minimal:!0,placement:"bottom",popoverClassName:de.POPOVER},vr=function(e){var t=e.children;return React.createElement("div",{"zr-role":"settings-row"},t)},gr=function(e){var t=e.children,n=e.description,r=void 0===n?null:n,o=e.rightElement,a=void 0===o?null:o,i=e.title,l=void 0===i?null:i;return React.createElement("div",{"zr-role":"settings-row-col"},React.createElement("div",null,l&&React.createElement(Er,null,l),r&&React.createElement(Or,null,r)),a,React.createElement("div",{"zr-role":"settings-row-col--container"},t))},br=function(e){var t=e.children,n=e.description,r=void 0===n?null:n,o=e.onChange,i=e.options,l=e.selected,c=e.title,u=void 0===c?null:c;return React.createElement("div",{"zr-role":"settings-row-group"},React.createElement("div",null,u&&React.createElement(Er,null,u),r&&React.createElement(Or,null,r)),a.Children.map(t,(function(e){return(0,a.cloneElement)(e,{handleSelect:o,options:i,selected:l})})))},wr=function(e){var t=e.alignToBaseline,n=void 0!==t&&t,r=e.children,i=e.description,l=void 0===i?null:i,c=e.handleSelect,u=e.id,s=e.options,f=e.selected,d=(0,a.useMemo)((function(){return f==u}),[u,f]),p=(0,a.useCallback)((function(){return c(u)}),[c,u]);return React.createElement("div",{className:["zr-settings-rowgroup--option",n&&"align-items-baseline"].filter(Be).join(" ")},React.createElement(o.Checkbox,{checked:f==u,className:["zr-settings-rowgroup--option-label",d&&"selected"].filter(Be).join(" "),inline:!1,labelElement:React.createElement("div",null,React.createElement(Sr,null,s[u]),l&&React.createElement(Or,null,l)),onChange:p}),r)},Er=function(e){var t=e.children;return React.createElement(o.H4,null,t)},Sr=function(e){var t=e.children;return React.createElement(o.H5,null,t)},Or=function(e){var t=e.children;return React.createElement("span",{className:[de.TEXT_SECONDARY,de.TEXT_SMALL].join(" ")},t)},kr=function(e){var t=e.item,n=e.text,r=void 0===n?null:n;return React.createElement("div",{className:"zr-definition--wrapper"},React.createElement(o.Code,{className:"zr-definition--item"},t),r&&React.createElement("span",null,r))},Rr=function(e){var t=e.description,n=void 0===t?null:t,r=e.label,i=e.setValue,l=e.title,c=void 0===l?null:l,u=(e.value,hr(e,rr)),s=(0,a.useCallback)((function(e,t){return i(e)}),[i]);return React.createElement(vr,null,React.createElement("div",null,c&&React.createElement(Er,null,c),n&&React.createElement(Or,null,n)),React.createElement(o.NumericInput,mr({"aria-label":r,min:0,minorStepSize:1,onValueChange:s,selectAllOnFocus:!0,selectAllOnIncrement:!0},u)))},xr=function(e){var t=e.buttonProps,n=void 0===t?{}:t,r=e.onSelect,i=e.options,l=e.popoverTargetProps,c=void 0===l?{}:l,u=e.value,s=hr(e,or),f=(0,a.useCallback)((function(e){return r(e.value)}),[r]),d=(0,a.useCallback)((function(e,t){var n=t.handleClick,r=e.value==u;return React.createElement(o.MenuItem,{key:e.value.toString(),htmlTitle:e.label,labelElement:r?React.createElement(o.Icon,{icon:"small-tick"}):null,onClick:n,"aria-selected":r,text:e.label})}),[u]),p=(0,a.useCallback)((function(e){var t=e.items,n=e.itemsParentRef,r=e.renderItem,a=t.map(r).filter((function(e){return null!=e}));return React.createElement(o.Menu,mr({ulRef:n},c),a)}),[c]),m=(0,a.useMemo)((function(){return dr(dr({},yr),{},{targetProps:c})}),[c]);return React.createElement(Jn.Select,mr({className:["zr-setting--single-input",de.TEXT_SMALL].join(" "),filterable:!1,itemListRenderer:p,itemRenderer:d,itemsEqual:"value",items:i,matchTargetWidth:!1,onItemSelect:f,popoverProps:m},s),React.createElement(o.Button,mr({alignText:"right",intent:"primary",minimal:!0,rightIcon:"caret-down",text:i.find((function(e){return e.value==u})).label},n)))},Tr=function(e){var t=e.buttonProps,n=void 0===t?{}:t,r=e.description,o=void 0===r?null:r,i=e.menuTitle,l=e.onSelect,c=e.options,u=e.title,s=void 0===u?null:u,f=e.value,d=hr(e,ar),p=(0,a.useMemo)((function(){return{title:i}}),[i]);return React.createElement(vr,null,React.createElement("div",null,s&&React.createElement(Er,null,s),o&&React.createElement(Or,null,o)),React.createElement(xr,mr({buttonProps:n,options:c,onSelect:l,popoverTargetProps:p,value:f},d)))},_r=function(e){var t=e.label,n=void 0===t?void 0:t,r=e.onChange,i=e.value,l=hr(e,ir),c=(0,a.useCallback)((function(e){return r(e.target.value)}),[r]);return React.createElement(o.TextArea,mr({"aria-label":n,autoComplete:"off",className:[de.INPUT_TEXT,de.TEXT_AUXILIARY,de.TEXT_SMALL,o.Classes.CODE_BLOCK].join(" "),fill:!0,growVertically:!1,onChange:c,spellCheck:"false",title:n,value:i},l))},Cr=function(e){var t=e.children;return React.createElement("div",{className:[de.INPUT_BOX,de.INPUT_TEXT].join(" "),"zr-role":"input-text"},t)},jr=function(e){return!0},Ar=function(e){var t,n,r=e.description,i=void 0===r?null:r,l=e.ifEmpty,c=void 0===l?null:l,u=e.label,s=void 0===u?void 0:u,f=e.onChange,d=e.placeholder,p=void 0===d?void 0:d,m=e.title,h=void 0===m?null:m,y=e.validate,v=void 0===y?jr:y,g=e.value,b=hr(e,lr),w=(t=tr(v(g)),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=w[0],S=w[1].set,O=(0,a.useCallback)((function(e){f(e.target.value),S(v(e.target.value))}),[f,S,v]);return React.createElement(vr,null,React.createElement("div",null,h&&React.createElement(Er,null,h),i&&React.createElement(Or,null,i)),React.createElement(Cr,null,g||1==c?React.createElement("input",mr({"aria-invalid":!E,"aria-label":s,autoComplete:"off",className:[de.INPUT_BOX,de.INPUT_TEXT,de.TEXT_SMALL,o.Classes.INPUT].join(" "),onChange:O,placeholder:p,spellCheck:"false",title:s,type:"text",value:g},b)):c))},Pr=function(e){var t=e.description,n=void 0===t?null:t,r=e.onSelectChange,i=e.onValueChange,l=e.placeholder,c=void 0===l?void 0:l,u=e.selectOptions,s=e.selectValue,f=e.textValue,d=e.title,p=void 0===d?null:d,m=e.inputGroupProps,h=void 0===m?{}:m,y=e.inputLabel,v=e.selectButtonProps,g=void 0===v?{}:v,b=e.selectProps,w=void 0===b?{}:b,E=e.selectLabel,S=w.popoverTargetProps,O=hr(w,cr),k=(0,a.useMemo)((function(){return dr({title:E},S)}),[E,S]),R=(0,a.useCallback)((function(e){return i(e.target.value)}),[i]);return React.createElement(vr,null,React.createElement("div",null,p&&React.createElement(Er,null,p),n&&React.createElement(Or,null,n)),React.createElement(o.ControlGroup,{className:"zr-text-select-group"},React.createElement(xr,mr({buttonProps:g,onSelect:r,options:u,popoverTargetProps:k,value:s},O)),React.createElement(o.InputGroup,mr({"aria-label":y,autoComplete:"off",className:[de.INPUT_BOX,de.INPUT_TEXT,de.TEXT_SMALL].join(" "),onChange:R,placeholder:c,spellCheck:"false",title:y,type:"text",value:f},h))))},Ir=function(e){var t=e.description,n=void 0===t?null:t,r=e.isChecked,a=e.label,i=e.onChange,l=void 0===i?void 0:i,c=e.title,u=void 0===c?null:c,s=hr(e,ur);return React.createElement(vr,null,React.createElement("div",null,u&&React.createElement(Er,null,u),n&&React.createElement(Or,null,n)),React.createElement(o.Switch,mr({"aria-checked":r,checked:r,"aria-label":a,onChange:l,role:"switch"},s)))};function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lr.apply(this,arguments)}const Nr=function(e){var t=e.request,n=t.apikey,r=t.dataURI,i=t.library,l=i.path,c=i.type,u=(0,a.useMemo)((function(){var e="users"==c?{icon:"user",htmlTitle:"User library"}:"groups"==c?{icon:"people",htmlTitle:"Group library"}:{};return React.createElement(o.Tag,Lr({minimal:!0},e),l)}),[l,c]);return React.createElement("div",{className:"zr-settings--card"},React.createElement("div",{"zr-role":"settings-row"},React.createElement("span",{className:de.TEXT_AUXILIARY},"Library"),React.createElement("div",null,u)),React.createElement("div",{"zr-role":"settings-row"},React.createElement("span",{className:de.TEXT_AUXILIARY},"Data URI"),React.createElement("div",null,r&&React.createElement("span",null,r))),React.createElement("div",{"zr-role":"settings-row"},React.createElement("span",{className:de.TEXT_AUXILIARY},"API Key"),React.createElement("div",null,n&&React.createElement("span",null,"*".repeat(n.length)))))};function Dr(e,t){switch(t.type){case"add":return it(e,t.value);case"remove":return lt(e,t.index);case"update":return ct(e,t.index,t.value);default:return e}}var Mr=function(e,t){return(0,a.useReducer)(Dr,e,t)};function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){Ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Br(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Br(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function qr(){qr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Br(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Xr(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Gr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xr(a,r,o,i,l,"next",e)}function l(e){Xr(a,r,o,i,l,"throw",e)}i(void 0)}))}}var Kr=function(){return{ZOTERORANDOMCITEKEY:{help:"Returns one or more Zotero citekeys, with optional tag query",handler:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return window.zoteroRoam.getItems("items").filter((function(e){return Hr(t,e.data.tags.map((function(e){return e.tag})))})).map((function(e){return"@"+e.key})).sort((function(){return.5-Math.random()})).slice(0,Number(e)||1)}}},ZOTEROITEMABSTRACT:{help:"Returns the abstract of a Zotero item.",handler:function(e){return function(){return e.variables.item.data.abstractNote||""}}},ZOTEROITEMCITATION:{help:"Returns a formatted citation for a Zotero item. Options: style (default: 'chicago-note-bibliography'), locale (default: en-US), linkwrap (default: 0).",handler:function(e){return Gr(qr().mark((function t(){var n,r,o,a,i=arguments;return qr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:"chicago-note-bibliography",r=i.length>1&&void 0!==i[1]?i[1]:"en-US",o=i.length>2&&void 0!==i[2]?i[2]:0,a=e.variables.item,t.next=6,window.zoteroRoam.getItemCitation(a,{style:n,locale:r,linkwrap:o});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))}},ZOTEROITEMCITEKEY:{help:"Returns the citekey for a Zotero item, with the '@' prefix. If the item doesn't have a citekey, its Zotero key will be used. Options: brackets (`true` (default)|`false`).",handler:function(e){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n="@"+e.variables.item.key;return t?"[[".concat(n,"]]"):n}}},ZOTEROITEMCOLLECTIONS:{help:"Returns the comma-separated list of the collection(s) a Zotero item belongs to.",handler:function(e){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=e.variables.item;return window.zoteroRoam.getItemCollections(n,{return_as:"string",brackets:t})}}},ZOTEROITEMCREATORS:{help:"Returns the comma-separated list of the creator(s) of a Zotero item. Options: brackets (`true`(default)|`false`|`existing`), use_type(`true`(default)|`false`).",handler:function(e){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.variables.item;return window.zoteroRoam.getItemCreators(r,{return_as:"string",brackets:t,use_type:n})}}},ZOTEROITEMDATEADDED:{help:"Returns the date on which an item was added to Zotero. Options: brackets (`true`(default)|`false`).",handler:function(e){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return jt(e.variables.item.data.dateAdded,{brackets:t})}}},ZOTEROITEMKEY:{help:"Returns the citekey for a Zotero item, without the '@' prefix. If the item doesn't have a citekey, its Zotero key will be used.",handler:function(e){return function(){return e.variables.item.key}}},ZOTEROITEMLINK:{help:"Returns the link to a Zotero item (web or local library). Options: type (`local`(default)|`web`).",handler:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local",n=e.variables.item;return"local"==t?kt(n,{format:"target"}):xt(n,{format:"target"})}}},ZOTEROITEMMETADATA:{help:"Returns the formatted metadata for a Zotero item and its children (PDFs, notes/annotations), using the extension's default formatter. Use this if you want to use the default metadata template as part of your SmartBlock.",handler:function(e){return function(){var t=e.variables,n=t.item,r=t.pdfs,o=t.notes;return Qr(window.zoteroRoam.getItemMetadata(n,r,o))}}},ZOTEROITEMPUBLICATION:{help:"Returns the place of publication for a Zotero item. The command will look for the following fields, in order: `publicationTitle`, `bookTitle`, `university`. If no information is found, it will return an empty string.",handler:function(e){return function(){var t=e.variables.item;return t.data.publicationTitle||t.data.bookTitle||t.data.university||""}}},ZOTEROITEMRELATED:{help:"Returns the comma-separated list of the citekeys of a Zotero item's relations, if any. Options: brackets (`true`(default)|`false`).",handler:function(e){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=e.variables.item;return window.zoteroRoam.getItemRelated(n,{return_as:"string",brackets:t})}}},ZOTEROITEMTAGS:{help:"Returns the space-separated list of the tag(s) of a Zotero item, if any. Options: brackets (`true` (default)|`false`).",handler:function(e){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=e.variables.item;return window.zoteroRoam.getItemTags(n,{return_as:"string",brackets:t})}}},ZOTEROITEMTITLE:{help:"Returns the title of a Zotero item.",handler:function(e){return function(){return e.variables.item.data.title||""}}},ZOTEROITEMTYPE:{help:"Returns the formatted type of a Zotero item, according to current user settings. Options: brackets (`true` (default)|`false`).",handler:function(e){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=e.variables.item;return window.zoteroRoam.getItemType(n,{brackets:t})}}},ZOTEROITEMURL:{help:"Returns the URL of a Zotero item, if available. If the item has no URL but has a DOI, its DOI URL will be returned.",handler:function(e){return function(){var t=e.variables.item,n=t.data.url,r=Lt(t.data.DOI);return n||(r?"https://doi/org/"+r:"")}}},ZOTEROITEMYEAR:{help:"Returns the year of publication of a Zotero item, if available.",handler:function(e){return function(){var t=e.variables.item;return t.meta.parsedDate?isNaN(Number(new Date(t.meta.parsedDate)))?"":new Date(t.meta.parsedDate).getUTCFullYear().toString():""}}},ZOTERONOTES:{help:"Formats a list of Zotero notes/annotations, with current user settings",handler:function(e){return function(){var t=e.variables.notes,n=void 0===t?[]:t;return Qr(window.zoteroRoam.formatNotes(n))}}},ZOTEROPDFS:{help:"Returns the comma-separated links to a list of Zotero PDFs",handler:function(e){return function(){var t=e.variables.pdfs,n=void 0===t?[]:t;return window.zoteroRoam.formatPDFs(n,"string")}}}}};function Hr(e,t){var n=e.split(/([\|\&]?)([^\&\|\(\)]+|\(.+\))([\|\&]?)/).filter(Be);return n.includes("|")?function(e,t){for(var n=!1,r=0;r<e.length&&0==n;r++)n=Vr(e[r],t);return n}(n.filter((function(e){return"|"!=e})),t):function(e,t){for(var n=!0,r=0;r<e.length&&1==n;r++)n=Vr(e[r],t);return n}(n.filter((function(e){return"&"!=e})),t)}function Vr(e,t){if(e.startsWith("(")&&e.endsWith(")"))return Hr(e.slice(1,-1),t);if(e.startsWith("-")){var n=e.slice(1);return!t.includes(n)}return t.includes(e)}function Qr(e){return e?e.map((function(e){if("string"==typeof e)return{string:e,text:e,children:[]};if("object"===Br(e))return Fr(Fr({},e),{},{children:Qr(e.children||[])});var t,n;throw null===(t=window.zoteroRoam)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,{origin:"Metadata",message:"Bad element received",context:{element:e}}),new Error("All array items should be of type String or Object, not ".concat(Br(e)))})):[]}function Wr(){var e,t,n=Kr();null!==(e=window.roamjs)&&void 0!==e&&null!==(t=e.extension)&&void 0!==t&&t.smartblocks&&Object.keys(n).forEach((function(e){var t,n,r;null===(t=window.roamjs)||void 0===t||null===(n=t.extension)||void 0===n||null===(r=n.smartblocks)||void 0===r||r.unregisterCommand(e)}))}function $r(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=Gr(qr().mark((function e(t,n){var r,o,a,i,l,c,u,s,f,d,p,m,h;return qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.param,o=t.paramValue,a=n.item,i=n.notes,l=n.page,c=n.pdfs,u={args:{smartblock:t,uid:l.uid},error:null,page:l,raw:{item:a,notes:i,pdfs:c},success:null},s=Ur({targetUid:l.uid,variables:{}},r,o),Object.keys(n).forEach((function(e){s.variables[e]=n[e]})),e.prev=5,e.next=8,null===(f=window.roamjs)||void 0===f||null===(d=f.extension)||void 0===d||null===(p=d.smartblocks)||void 0===p?void 0:p.triggerSmartblock(s);case 8:return e.abrupt("return",Promise.resolve(Fr(Fr({},u),{},{success:!0})));case 11:return e.prev=11,e.t0=e.catch(5),null===(m=window.zoteroRoam)||void 0===m||null===(h=m.error)||void 0===h||h.call(m,{origin:"SmartBlocks",message:"Failed to trigger SmartBlock",context:Fr(Fr({},s),{},{error:e.t0.message})}),e.abrupt("return",Promise.resolve(Fr(Fr({},u),{},{error:e.t0,success:!1})));case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){to(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function to(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Zr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Zr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function no(){no=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Zr(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ro(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function oo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ro(a,r,o,i,l,"next",e)}function l(e){ro(a,r,o,i,l,"throw",e)}i(void 0)}))}}function ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||io(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(e,t){if(e){if("string"==typeof e)return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lo(e,t):void 0}}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function co(e){var t=Array.isArray(e)?e:[e];if(0==t.length)return console.warn("At least one data request must be specified for the extension to function. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/zotero-roam/getting-started/api"),{dataRequests:[],apiKeys:[],libraries:[]};var n,r=null===(n=t.find((function(e){return e.apikey})))||void 0===n?void 0:n.apikey;if(r){var o=t.map((function(e){if("library"in e){var t=e.apikey,n=e.library,o=e.name,a=void 0===o?"":o,i=n.id,l=n.type;if(!i||isNaN(Number(i)))throw new Error("A library ID is missing or invalid. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");if(!l||!["users","groups"].includes(l))throw new Error("A library type is missing or invalid. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");return{apikey:t||r,dataURI:[l,i,"items"].join("/"),library:{id:i,path:[l,i].join("/"),type:l,uri:"items"},name:a}}var c=e.apikey,u=e.dataURI,s=e.name,f=void 0===s?"":s;if(!u)throw new Error("Each data request must be assigned a data URI. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");var d,p=function(e){if(Array.isArray(e))return lo(e)}(d=u.matchAll(/(users|groups)\/(\d+?)\/(items.*)/g))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||io(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(0==p.length)throw new Error("An incorrect data URI was provided for a request : ".concat(u,". See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/prereqs#zotero-api-credentials"));var m=ao(p[0],4),h=m[1],y=m[2],v=m[3];return{apikey:c||r,dataURI:u,library:{id:y,path:[h,y].join("/"),type:h,uri:v},name:f}})),a=Array.from(new Set(o.map((function(e){return e.apikey})))),i=o.reduce((function(e,t){var n=t.library.path,r=t.apikey;if(e.find((function(e){return e.path==n})))throw new Error("The same library was provided twice: ".concat(n,"."));return e.push({path:n,apikey:r}),e}),[]);return{dataRequests:o,apiKeys:a,libraries:i}}throw new Error("At least one data request must be assigned an API key. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/zotero-roam/getting-started/api")}function uo(e){var t=e.queryKey;return!t.includes("permissions")&&"permissions"!=t[0]&&Y(e)}function so(e){var t=e.annotations,n=void 0===t?{}:t,r=e.autocomplete,o=void 0===r?{}:r,a=e.copy,i=void 0===a?{}:a,l=e.metadata,c=void 0===l?{}:l,u=e.notes,s=void 0===u?{}:u,f=e.other,d=void 0===f?{}:f,p=e.pageMenu,m=void 0===p?{}:p,h=e.sciteBadge,y=void 0===h?{}:h,v=e.shortcuts,g=void 0===v?{}:v,b=e.typemap,w=void 0===b?{}:b,E=e.webimport,S=void 0===E?{}:E;return{annotations:eo({func:"",group_by:!1,template_comment:"{{comment}}",template_highlight:"[[>]] {{highlight}} ([p. {{page_label}}]({{link_page}})) {{tags_string}}",use:"default",__with:"formatted"},n),autocomplete:eo({display_char:"",display_use:"preset",display:"citekey",format_char:"",format_use:"preset",format:"citation",trigger:""},o),copy:eo({always:!1,overrideKey:"shiftKey",preset:"citekey",template:"@{{key}}",useAsDefault:"preset",useQuickCopy:!1},i),metadata:eo({func:"",smartblock:{param:"srcUid",paramValue:""},use:"default"},c),notes:eo({func:"",nest_char:"",nest_position:"top",nest_preset:"[[Notes]]",nest_use:"preset",split_char:"",split_preset:"\n",split_use:"preset",use:"default",__with:"text"},s),other:eo({autoload:!1,cacheEnabled:!1,darkTheme:!1,render_inline:!1},d),pageMenu:eo({defaults:["addMetadata","importNotes","viewItemInfo","openZoteroLocal","openZoteroWeb","pdfLinks","sciteBadge","connectedPapers","semanticScholar","googleScholar","citingPapers"],trigger:"default"},m),sciteBadge:eo({layout:"horizontal",showLabels:!1,showZero:!0,small:!1,tooltipPlacement:"auto",tooltipSlide:0},y),shortcuts:eo({copyDefault:"",copyCitation:"",copyCitekey:"",copyPageRef:"",copyTag:"",focusSearchBar:"",goToItemPage:"",importMetadata:"",toggleDashboard:"",toggleNotes:"alt+N",toggleSearchPanel:"alt+E",toggleSettingsPanel:"",toggleQuickCopy:""},po(g)),typemap:eo(eo({},fe),w),webimport:eo({tags:[]},S)}}function fo(){var e,t=document.getElementById(ie);if(t)try{(0,r.unmountComponentAtNode)(t),t.remove()}catch(e){console.error(e)}null===(e=document.getElementById(ae))||void 0===e||e.remove()}function po(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(""==r)t[n]=r;else try{(0,o.parseKeyCombo)(e[n]),t[n]=e[n]}catch(t){var a,i;null===(a=window.zoteroRoam)||void 0===a||null===(i=a.warn)||void 0===i||i.call(a,{origin:"Shortcuts",message:"Invalid hotkey: "+e[n]})}})),t}function mo(e){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(e)}function ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vo.apply(this,arguments)}function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?go(Object(n),!0).forEach((function(t){wo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==mo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==mo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===mo(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eo={itemRenderer:function(e,t){var n=t.handleClick;return React.createElement(o.MenuItem,{key:e.value,onClick:n,text:e.label})},popoverProps:{canEscapeKeyClose:!1,minimal:!0,placement:"bottom-right",popoverClassName:de.POPOVER,targetProps:{title:"Select the type of library you want to use"}}},So=[{label:"User library",value:"users"},{label:"Group library",value:"groups"}];function Oo(e){var t=e.inputRef,n=void 0===t?void 0:t,r=e.pos,i=e.req,l=e.updateReq,c=i.apikey,u=i.library,s=u.type,f=u.id,d=i.name,p=(0,a.useMemo)((function(){function e(e,t){l(bo(bo({},i),{},wo({},e,t.target.value)))}function t(e,t){l(bo(bo({},i),{},{library:bo(bo({},i.library),{},wo({},e,t))}))}return{updateAPIKey:function(t){return e("apikey",t)},updateLibraryType:function(e){return t("type",e.value)},updateLibraryID:function(e){return t("id",e.target.value)},updateName:function(t){return e("name",t)}}}),[i,l]);return React.createElement(React.Fragment,null,React.createElement(o.FormGroup,{label:"Library",labelFor:"req-library"+r},React.createElement(o.ControlGroup,null,React.createElement(Jn.Select,vo({filterable:!1,items:So,onItemSelect:p.updateLibraryType},Eo),React.createElement(o.Button,{active:!0,className:de.TEXT_SMALL,icon:"users"==s?"user":"people",intent:"primary",minimal:!0,rightIcon:"caret-down",text:s})),React.createElement(o.InputGroup,{className:[de.INPUT_BOX,de.INPUT_TEXT,de.TEXT_SMALL].join(" "),id:"req-library"+r,inputRef:n,onChange:p.updateLibraryID,placeholder:"e.g, 123456",value:f}))),React.createElement(o.FormGroup,{label:"API Key",labelFor:"req-apikey"+r},React.createElement(o.InputGroup,{className:[de.INPUT_BOX,de.INPUT_TEXT,de.TEXT_SMALL].join(" "),id:"req-apikey"+r,onChange:p.updateAPIKey,placeholder:"Zotero API key",value:c})),React.createElement(o.FormGroup,{label:"Name",labelFor:"req-name"+r},React.createElement(o.InputGroup,{className:[de.INPUT_BOX,de.INPUT_TEXT,de.TEXT_SMALL].join(" "),id:"req-name"+r,onChange:p.updateName,placeholder:"Nickname (optional)",value:d})))}var ko={apikey:"",library:{type:"users",id:""},name:""};function Ro(e){var t=e.dispatch,n=e.inputRef,r=ho((0,a.useState)(ko),2),i=r[0],l=r[1],c=(0,a.useCallback)((function(){t({type:"add",value:i}),l(ko)}),[t,i]);return React.createElement("div",{className:"zr-data-request new"},React.createElement(o.ControlGroup,null,React.createElement(Oo,{inputRef:n,pos:"new",req:i,updateReq:l}),React.createElement(o.Button,{className:[de.TEXT_SMALL,o.Classes.FIXED].join(" "),intent:"success",minimal:!0,onClick:c,text:"Add",title:"Add the request"})))}function xo(e){var t=e.dispatch,n=e.pos,r=e.req;return React.createElement("div",{className:"zr-data-request existing"},React.createElement(o.ControlGroup,null,React.createElement(Oo,{pos:n,req:r,updateReq:function(e){return t({type:"updateSelf",value:e})}}),React.createElement(o.Button,{className:o.Classes.FIXED,icon:"remove",intent:"danger",minimal:!0,onClick:function(){return t({type:"removeSelf"})},title:"Remove the request"})))}const To=function(e){var t=e.closeDialog,n=e.dataRequests,r=void 0===n?[]:n,i=e.updateRequests,l=ho(Mr(r),2),c=l[0],u=l[1],s=ho((0,a.useState)(null),2),f=s[0],d=s[1],p=(0,a.useRef)(null);(0,a.useEffect)((function(){d(null)}),[c]),(0,a.useEffect)((function(){var e;null==p||null===(e=p.current)||void 0===e||e.focus()}),[]);var m=(0,a.useCallback)((function(e,t){switch(t.type){case"removeSelf":return u({type:"remove",index:e});case"updateSelf":return u({type:"update",index:e,value:t.value});default:return}}),[u]),h=(0,a.useCallback)((function(){try{var e=co(c);i(e),t()}catch(e){d(e)}}),[t,c,i]);return React.createElement(React.Fragment,null,React.createElement("div",{className:o.Classes.DIALOG_BODY},c.map((function(e,t){return React.createElement(xo,{key:t,pos:t,req:e,dispatch:function(e){return m(t,e)}})})),React.createElement(o.H6,null,"Add a new request"),React.createElement(Ro,{dispatch:u,inputRef:p}),f&&React.createElement(he,{error:f})),React.createElement("div",{className:o.Classes.DIALOG_FOOTER},React.createElement("div",{className:o.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(o.Button,{minimal:!0,onClick:t,text:"Cancel"}),React.createElement(o.Button,{intent:"primary",minimal:!0,onClick:h,text:"OK"}))))};function _o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jo=new Zn({afterUpdate:function(e,t){var n,r,o;null===(n=window)||void 0===n||null===(r=n.zoteroRoam)||void 0===r||null===(o=r.updateLibraries)||void 0===o||o.call(r,t.libraries)}}),Ao=jo.Provider,Po=jo.useSettings,Io=["className","children"];function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lo.apply(this,arguments)}var No=function(e){var t=e.className,n=void 0===t?null:t,r=e.children,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Io);return React.createElement("li",Lo({className:[n,de.DATALIST_ITEM].filter(Be).join(" ")},o),r)},Do=function(e){var t=e.children;return React.createElement("ul",{className:de.DATALIST_WRAPPER},t)},Mo=(0,a.memo)((function(e){var t=e.arrows,n=void 0===t?"last":t,r=e.currentPage,i=e.itemsPerPage,l=void 0===i?30:i,c=e.nbItems,u=e.setCurrentPage,s=(0,a.useMemo)((function(){return 0==c?0:Math.ceil(c/l)}),[l,c]),f=(0,a.useCallback)((function(){r<s&&u(r+1)}),[r,s,u]),d=(0,a.useCallback)((function(){r>1&&u(r-1)}),[r,u]),p=React.createElement("span",{className:de.TEXT_SMALL,"zr-role":"items-count"},React.createElement("strong",null,(r-1)*l+1,"-",Math.min(r*l,c))," / ",Nt(c,"item")),m=React.createElement(o.ControlGroup,null,React.createElement(o.Button,{"aria-disabled":1==r,disabled:1==r,icon:"chevron-left",minimal:!0,onClick:d,title:"Go to previous page of results"}),React.createElement(o.Button,{"aria-disabled":r>=s,disabled:r>=s,icon:"chevron-right",minimal:!0,onClick:f,title:"Go to next page of results"}));return React.createElement("div",{className:de.DATALIST_PAGINATION},c>0?React.createElement(React.Fragment,null,"first"==n&&m,p,"last"==n&&m):null)})),zo=function(e){var t=e.children;return React.createElement("div",{className:de.DATALIST_TOOLBAR},t)},Fo=n(697);function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string";if(e){var n=e.map((function(e){return{title:e.data.filename||e.data.title,key:e.key,link:Rt(e,"href")}}));switch(t){case"identity":return n;case"links":return n.map((function(e){return"[".concat(e.title,"](").concat(e.link,")")}));default:return n.map((function(e){return"[".concat(e.title,"](").concat(e.link,")")})).join(", ")}}else switch(t){case"identity":case"links":return[];default:return""}}function qo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.return_as,r=void 0===n?"string":n,o=t.brackets,a=void 0===o||o,i=t.use_type,l=void 0===i||i,c=e.data.creators.map((function(e){var t="name"in e?e.name:"".concat([e.firstName,e.lastName].filter(Be).join(" "));return{name:t,type:e.creatorType,inGraph:Ka(t)}}));switch(r){case"identity":return c;case"array":return c.map((function(e){return e.name}));default:return c.map((function(e){var t=1==a||"existing"==a&&e.inGraph?"[[".concat(e.name,"]]"):e.name;return 1==l?t+("author"==e.type?"":" (".concat(e.type,")")):t})).join(", ")}}function Xo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.return_as,r=void 0===n?"string":n,o=t.brackets,a=void 0===o||o,i=e.data.tags.map((function(e){return e.tag})),l=1==a?i.map((function(e){return"#[[".concat(e,"]]")})):i;return"array"===r?l:l.join(" ")}function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(n),!0).forEach((function(t){na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vo(e){return function(e){if(Array.isArray(e))return Wo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){if(e){if("string"==typeof e)return Wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wo(e,t):void 0}}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $o(){$o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Go(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Yo(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Zo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Yo(a,r,o,i,l,"next",e)}function l(e){Yo(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ra(r.key),r)}}function ta(e,t,n){return t&&ea(e.prototype,t),n&&ea(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function na(e,t,n){return(t=ra(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ra(e){var t=function(e,t){if("object"!==Go(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Go(t)?t:String(t)}function oa(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function aa(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,la(e,t,"get"))}function ia(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,la(e,t,"set"),n),n}function la(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ca=new WeakMap,ua=new WeakMap,sa=new WeakMap,fa=new WeakMap,da=function(){function e(t){var n=t.idbDatabase,r=void 0===n?null:n,o=t.queryClient,a=t.requests,i=t.settings;Jo(this,e),oa(this,ca,{writable:!0,value:void 0}),oa(this,ua,{writable:!0,value:void 0}),oa(this,sa,{writable:!0,value:void 0}),oa(this,fa,{writable:!0,value:void 0}),na(this,"logs",[]),na(this,"formatPDFs",Bo),na(this,"getItemCreators",qo),na(this,"getItemDateAdded",Ea),na(this,"getItemLink",Sa),na(this,"getItemPublication",ka),na(this,"getItemTags",Xo);var l=a.libraries,c=i.annotations,u=i.notes,s=i.typemap;ia(this,ca,r),ia(this,ua,l),ia(this,sa,o),ia(this,fa,{annotations:c,notes:u,typemap:s})}var t,n,r,o,a,i;return ta(e,[{key:"clearDataCache",value:(i=Zo($o().mark((function e(){return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===aa(this,ca)){e.next=10;break}return e.prev=1,e.next=4,aa(this,ca).selectStore(ue).clear();case 4:this.info({origin:"Database",message:"Successfully cleared data from cache",showToaster:1e3}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.error({origin:"Database",message:"Failed to clear data from cache",context:{error:wn(e.t0)}});case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return i.apply(this,arguments)})},{key:"deleteDatabase",value:(a=Zo($o().mark((function e(){return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!aa(this,ca)){e.next=3;break}return e.next=3,aa(this,ca).deleteSelf();case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"isDataCached",value:(o=Zo($o().mark((function e(){var t;return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===aa(this,ca)){e.next=12;break}return e.prev=1,e.next=4,aa(this,ca).selectStore(ue).get(se);case 4:return t=e.sent,e.abrupt("return",void 0!==t);case 8:return e.prev=8,e.t0=e.catch(1),this.error({origin:"Database",message:"Failed to obtain caching status",context:{error:wn(e.t0)}}),e.abrupt("return",!1);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return o.apply(this,arguments)})},{key:"getDataCacheUpdatedAt",value:(r=Zo($o().mark((function e(){var t,n;return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!aa(this,ca)){e.next=12;break}return e.prev=1,e.next=4,aa(this,ca).selectStore(ue).get(se);case 4:return t=e.sent,n=t.timestamp,e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),this.error({origin:"Database",message:"Failed to retrieve cache age",context:{error:wn(e.t0)}});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return r.apply(this,arguments)})},{key:"updateLibraries",value:function(e){ia(this,ua,e)}},{key:"updateSetting",value:function(e,t){aa(this,fa)[e]=t}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.logs.push(new ha(e,t))}},{key:"error",value:function(e){this.send(e,"error")}},{key:"info",value:function(e){this.send(e,"info")}},{key:"warn",value:function(e){this.send(e,"warning")}},{key:"formatNotes",value:function(e){return ya(e,null,{annotationsSettings:aa(this,fa).annotations,notesSettings:aa(this,fa).notes})}},{key:"getBibEntries",value:(n=Zo($o().mark((function e(t){return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,va(t,{libraries:aa(this,ua),queryClient:aa(this,sa)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getItemCitation",value:(t=Zo($o().mark((function e(t){var n,r=arguments;return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,ba(t,n,{libraries:aa(this,ua)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getCollections",value:function(e){return function(e,t){var n=t.queryClient,r=["collections",{library:e.path}],o=n.getQueryData(r);return(null==o?void 0:o.data)||[]}(aa(this,ua).find((function(t){return t.path==e})),{queryClient:aa(this,sa)})}},{key:"getItemChildren",value:function(e){return function(e,t){var n=t.queryClient,r=e.library.type+"s/"+e.library.id;return xa("children",{predicate:function(e){return e.queryKey[2].dataURI.startsWith(r)}},{queryClient:n}).filter((function(t){return t.data.parentItem==e.data.key}))}(e,{queryClient:aa(this,sa)})}},{key:"getItemCollections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.return_as,r=void 0===n?"string":n,o=t.brackets,a=void 0===o||o,i=e.library.type+"s/"+e.library.id;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.return_as,o=void 0===r?"string":r,a=n.brackets,i=void 0===a||a;if(e.data.collections.length>0){var l=[];e.data.collections.forEach((function(e){var n=t.find((function(t){return t.key==e}));n&&l.push(n.data.name)}));var c=1==i?l.map((function(e){return"[[".concat(e,"]]")})):l;return"array"===o?c:c.join(", ")}return[]}(e,this.getCollections(i),{return_as:r,brackets:a})}},{key:"getItemMetadata",value:function(e,t,n){return Oa(e,t,n,{annotationsSettings:aa(this,fa).annotations,notesSettings:aa(this,fa).notes,typemap:aa(this,fa).typemap})}},{key:"getItemRelated",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.return_as,r=void 0===n?"string":n,o=t.brackets,a=void 0===o||o,i=e.library,l=i.type,c=i.id;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.return_as,o=void 0===r?"string":r,a=n.brackets,i=void 0===a||a;if(e.data.relations&&e.data.relations["dc:relation"]){var l=e.data.relations["dc:relation"];"string"==typeof l&&(l=[l]);var c=[],u=/(users|groups)\/([^/]+)\/items\/(.+)/g;switch(l.forEach((function(e){var n,r,o=(n=Array.from(e.matchAll(u))[0],r=4,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uo(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[3],a=t.find((function(e){return e.data.key==o}));a&&c.push(a)})),o){case"raw":return c;case"array":return 1==i?c.map((function(e){return"[[@".concat(e.key,"]]")})):c.map((function(e){return e.key}));default:return(1==i?c.map((function(e){return"[[@".concat(e.key,"]]")})):c.map((function(e){return e.key}))).join(", ")}}else switch(o){case"raw":case"array":return[];default:return""}}(e,this.getItems("items").filter((function(e){return e.library.id==c&&e.library.type==l})),{return_as:r,brackets:a})}},{key:"getItemType",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).brackets;return Ra(e,{brackets:void 0===t||t},{typemap:aa(this,fa).typemap})}},{key:"getItems",value:function(){return xa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",{},{queryClient:aa(this,sa)})}},{key:"getTags",value:function(e){return function(e,t){var n=t.queryClient,r=["tags",{library:t.libraries.find((function(t){return t.path==e})).path}];return n.getQueryData(r).data}(e,{libraries:aa(this,ua),queryClient:aa(this,sa)})}}]),e}(),pa=new WeakMap,ma=new WeakMap,ha=ta((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";Jo(this,e),oa(this,pa,{writable:!0,value:{error:"danger",info:"primary",warning:"warning"}}),oa(this,ma,{writable:!0,value:{error:"warning-sign",info:"info-sign",warning:"warning-sign"}});var r=t.origin,a=void 0===r?"":r,i=t.message,l=void 0===i?"":i,c=t.detail,u=void 0===c?"":c,s=t.context,f=void 0===s?{}:s,d=t.showToaster,p=void 0!==d&&d;this.level=n,this.origin=a,this.message=l,this.detail=u,this.context=f,this.intent=aa(this,pa)[n]||void 0,this.timestamp=new Date,p&&ze.show({icon:aa(this,ma)[n]||null,intent:this.intent,message:this.detail?React.createElement(React.Fragment,null,React.createElement(o.H5,null,this.message),React.createElement("p",null,this.detail)):this.message,timeout:p.constructor===Number?p:1e3})}));function ya(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0,i=a.annotationsSettings,l=a.notesSettings;if(e&&0!=e.length){var c=e.filter(qe).sort((function(e,t){return function(e,t){return mt(ht(e),ht(t))}(e.data.annotationSortIndex,t.data.annotationSortIndex)})),u=e.filter(Xe).sort((function(e,t){return e.data.dateAdded<t.data.dateAdded?-1:1})),s=[].concat(Vo(St(c,i)),Vo(Ot(u,l))),f=l.nest_char,d=l.nest_position,p=l.nest_preset,m=l.nest_use;if("preset"==m&&!p)return s;if(o){var h=(t=("custom"==m?f:p)||"",n=o,!!(r=window.roamAlphaAPI.q("[\n\t\t:find (pull ?b [:block/uid :block/children])\n\t\t:in $ ?string ?parentUID\n\t\t:where\n\t\t\t[?par :block/uid ?parentUID]\n\t\t\t[?par :block/children ?b]\n\t\t\t[?b :block/uid ?uid]\n\t\t\t[?b :block/string ?string]\n\t]",t,n))[0]&&r[0][0]);if(h){var y=h.uid,v=h.children,g="bottom"==d?(void 0===v?[]:v).length:0;return s.map((function(e){return e.constructor===String?{string:e,text:e,order:g,parentUID:y}:Ho(Ho({},e),{},{order:g,parentUID:y})}))}}var b=("custom"==m?f:p)||"";return[{string:b,text:b,children:s}]}return[]}function va(e,t){return ga.apply(this,arguments)}function ga(){return ga=Zo($o().mark((function e(t,n){var r,o,a,i,l,c;return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.libraries,o=n.queryClient,a=xa("items",{},{queryClient:o}),i=t.reduce((function(e,t){var n=a.find((function(e){return e.key==t}));if(n){var r=n.library.type+"s/"+n.library.id;Object.keys(e).includes(r)?e[r].push(n.data.key):e[r]=[n.data.key]}return e}),{}),l=[],Object.keys(i).forEach((function(e){var t=r.find((function(t){return t.path==e}));t&&l.push(kn(i[e],t))})),e.next=7,Promise.all(l);case 7:return c=e.sent,e.abrupt("return",c.join("\n"));case 9:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ba(e){return wa.apply(this,arguments)}function wa(){return wa=Zo($o().mark((function e(t){var n,r,o,a,i,l=arguments;return $o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=(l.length>2?l[2]:void 0).libraries,o=t.library.type+"s/"+t.library.id,a=r.find((function(e){return e.path==o})),e.next=6,xn(t.data.key,a,n);case 6:return i=e.sent,e.abrupt("return",bn(i));case 8:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function Ea(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).brackets,n=void 0===t||t;return jt(e.data.dateAdded,{brackets:n})}function Sa(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"local"==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local")?kt(e,t):xt(e,t)}function Oa(e,t,n,r){var o=r.annotationsSettings,a=r.notesSettings,i=r.typemap,l=[];if(e.data.title&&l.push("Title:: ".concat(e.data.title)),e.data.creators.length>0&&l.push("Author(s):: ".concat(qo(e,{return_as:"string",brackets:!0,use_type:!0}))),e.data.abstractNote&&l.push("Abstract:: ".concat(e.data.abstractNote)),e.data.itemType&&l.push("Type:: ".concat(Ra(e,{brackets:!0},{typemap:i}))),l.push("Publication:: ".concat(ka(e,{brackets:!0}))),e.data.url&&l.push("URL : ".concat(e.data.url)),e.data.dateAdded&&l.push("Date Added:: ".concat(Ea(e))),l.push("Zotero links:: ".concat(Sa(e,"local",{format:"markdown",text:"Local library"}),", ").concat(Sa(e,"web",{format:"markdown",text:"Web library"}))),e.data.tags.length>0&&l.push("Tags:: ".concat(Xo(e,{return_as:"string",brackets:!0}))),t.length>0&&l.push("PDF links : ".concat(Bo(t,"links").join(", "))),n.length>0){var c=ya(n,null,{annotationsSettings:o,notesSettings:a});l.push.apply(l,Vo(c))}return l}function ka(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).brackets,n=void 0===t||t,r=e.data.publicationTitle||e.data.bookTitle||e.data.university;return r?1==n?"[[".concat(r,"]]"):r:""}function Ra(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).brackets,n=void 0===t||t,r=(arguments.length>2?arguments[2]:void 0).typemap[e.data.itemType]||e.data.itemType;return 1==n?"[[".concat(r,"]]"):r}function xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2?arguments[2]:void 0).queryClient.getQueriesData(Ho({queryKey:["items"]},t)).map((function(e){var t,n,r=(t=e,n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||Qo(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];return(null==r?void 0:r.data)||[]})).flat(1);switch(e){case"items":return n.filter(He);case"attachments":return n.filter(Ke);case"children":return n.filter((function(e){return["note","annotation"].includes(e.data.itemType)||"attachment"==e.data.itemType&&"application/pdf"==e.data.contentType}));case"annotations":return n.filter(qe);case"notes":return n.filter(Xe);case"pdfs":return n.filter((function(e){return"attachment"==e.data.itemType&&"application/pdf"==e.data.contentType}));default:return n}}var Ta=["id"],_a=["string","children"];function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){Aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Aa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ia(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ia(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pa(){Pa=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Ia(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Ia(e){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(e)}function La(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Da(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ma(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Da(a,r,o,i,l,"next",e)}function l(e){Da(a,r,o,i,l,"throw",e)}i(void 0)}))}}function za(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=Ma(Pa().mark((function e(t,n){var r,o,a,i,l,c,u,s,f,d,p,m,h,y,v,g=arguments;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>2&&void 0!==g[2]?g[2]:0,o=n.string,a=n.children,i=void 0===a?[]:a,l=La(n,_a),void 0!==o){e.next=7;break}throw null===(c=window.zoteroRoam)||void 0===c||null===(u=c.error)||void 0===u||u.call(c,{origin:"Metadata",message:"Bad object received",context:{object:n}}),new Error("All blocks passed as an Object must have a string property.");case 7:return e.next=9,Xa(l.parentUID||t,o,l.order||r,l);case 9:if(s=e.sent,i.constructor!==Array){e.next=31;break}f=i.length-1;case 12:if(!(f>=0)){e.next=29;break}if("object"!==Ia(d=i[f])){e.next=19;break}return e.next=17,za(s,d,r);case 17:e.next=26;break;case 19:if("string"!=typeof i[f]){e.next=24;break}return e.next=22,Xa(s,d,r,{});case 22:e.next=26;break;case 24:throw null===(p=window.zoteroRoam)||void 0===p||null===(m=(h=p).error)||void 0===m||m.call(h,{origin:"Metadata",message:"Bad element received",context:{element:i[f]}}),new Error("All children array items should be of type String or Object, not ".concat(Ia(d)));case 26:f--,e.next=12;break;case 29:e.next=33;break;case 31:throw null===(y=window.zoteroRoam)||void 0===y||null===(v=y.error)||void 0===v||v.call(y,{origin:"Metadata",message:"Bad object received",context:{object:n}}),new Error("If provided, the 'children' property of a block should be an Array, not ".concat(Ia(i)));case 33:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(e,t){return Ba.apply(this,arguments)}function Ba(){return Ba=Ma(Pa().mark((function e(t,n){var r,o,a,i,l,c,u,s,f,d=arguments;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:0,o={args:{blocks:n,uid:t},error:null,success:null},!(n.length>0)){e.next=30;break}e.prev=3,a=n.length-1;case 5:if(!(a>=0)){e.next=22;break}if("object"!==Ia(i=n[a])){e.next=12;break}return e.next=10,za(t,i,r);case 10:e.next=19;break;case 12:if("string"!=typeof i){e.next=17;break}return e.next=15,Xa(t,i,r,{});case 15:e.next=19;break;case 17:throw null===(l=window.zoteroRoam)||void 0===l||null===(c=(u=l).error)||void 0===c||c.call(u,{origin:"Metadata",message:"Bad element received",context:{element:n[a]}}),new Error("All array items should be of type String or Object, not ".concat(n[a].constructor.name));case 19:a--,e.next=5;break;case 22:return e.abrupt("return",Promise.resolve(ja(ja({},o),{},{success:!0})));case 25:return e.prev=25,e.t0=e.catch(3),e.abrupt("return",Promise.resolve(ja(ja({},o),{},{error:e.t0,success:!1})));case 28:e.next=32;break;case 30:return null===(s=window.zoteroRoam)||void 0===s||null===(f=s.warn)||void 0===f||f.call(s,{origin:"Metadata",message:"Empty metadata array received"}),e.abrupt("return",Promise.resolve(o));case 32:case"end":return e.stop()}}),e,null,[[3,25]])}))),Ba.apply(this,arguments)}function qa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={label:e,callback:t,"disable-hotkey":!0};n.ui?n.ui.commandPalette.addCommand(r):window.roamAlphaAPI.ui.commandPalette.addCommand(r)}function Xa(e,t){return Ga.apply(this,arguments)}function Ga(){return Ga=Ma(Pa().mark((function e(t,n){var r,o,a,i,l,c,u,s=arguments;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:0,o=s.length>3&&void 0!==s[3]?s[3]:{},a=window.roamAlphaAPI.util.generateUID(),i={string:n,uid:a},Object.keys(o).length>0)for(l=0,c=Object.keys(o);l<c.length;l++)u=c[l],["children-view-type","alignment","heading"].includes(u)&&(i[u]=o[u]);return e.next=7,window.roamAlphaAPI.createBlock({location:{"parent-uid":t,order:r},block:i});case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}function Ka(e){var t=window.roamAlphaAPI.q("[\n\t\t:find ?uid \n\t\t:in $ ?title \n\t\t:where\n\t\t\t[?p :node/title ?title]\n\t\t\t[?p :block/uid ?uid]\n\t\t]",e);return!!t[0]&&t[0][0]}function Ha(){return new Map(window.roamAlphaAPI.q('[\n\t\t:find ?title ?uid \n\t\t:where\n\t\t\t[?e :node/title ?title]\n\t\t\t[(clojure.string/starts-with? ?title "@")]\n\t\t\t[?e :block/uid ?uid]\n\t\t]'))}function Va(){var e=window.roamAlphaAPI.ui.getFocusedBlock()||{},t=e["block-uid"],n=e["window-id"];if(!t||!n)return null;var r=["block-input",n,t].join("-"),o=document.getElementById(r)||{},a=o.selectionStart,i=void 0===a?null:a,l=o.selectionEnd,c=void 0===l?null:l,u={id:r,location:{"block-uid":t,"window-id":n}};return i&&c&&(u.selection={start:i,end:c}),u}function Qa(e,t,n,r,o,a){return Wa.apply(this,arguments)}function Wa(){return(Wa=Ma(Pa().mark((function e(t,n,r,o,a,i){var l,c,u,s,f,d,p,m,h,y,v,g,b,w,E,S,O,k,R,x,T,_,C,j;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.item,c=t.pdfs,u=void 0===c?[]:c,s=t.notes,f=void 0===s?[]:s,d="@"+l.key,p=n||window.roamAlphaAPI.util.generateUID(),m={new:!1,title:d,uid:p},p!=n&&(window.roamAlphaAPI.createPage({page:{title:d,uid:p}}),m.new=!0),h=r.use,y=void 0===h?"default":h,v=r.func,g=void 0===v?"":v,b=r.smartblock,w=b.param,E=b.paramValue,"smartblock"!=y){e.next=24;break}return S={item:l,notes:f,page:m,pdfs:u},e.prev=8,e.next=11,$r({param:w,paramValue:E},S);case 11:return Qt(ja(ja({},O=e.sent),{},{_type:"metadata-added"})),e.abrupt("return",O);case 16:return e.prev=16,e.t0=e.catch(8),null===(k=window.zoteroRoam)||void 0===k||null===(R=k.error)||void 0===R||R.call(k,{origin:"Metadata",message:"Failed to import metadata via SmartBlock for: "+d,detail:e.t0.message,context:{page:m,settings:{annotations:i,metadata:r,notes:a}},showToaster:1e3}),e.next=21,Promise.reject(e.t0);case 21:return e.abrupt("return",e.sent);case 22:e.next=47;break;case 24:if(e.prev=24,"function"!=y||!g){e.next=31;break}return e.next=28,gt(g,window,l,u,f);case 28:e.t1=e.sent,e.next=32;break;case 31:e.t1=Oa(l,u,f,{annotationsSettings:i,notesSettings:a,typemap:o});case 32:return x=e.t1,e.next=35,Ua(p,x);case 35:return T=e.sent,_=ja({page:m,raw:{item:l,pdfs:u,notes:f}},T),Qt(ja(ja({},_),{},{_type:"metadata-added"})),e.abrupt("return",_);case 41:return e.prev=41,e.t2=e.catch(24),null===(C=window.zoteroRoam)||void 0===C||null===(j=C.error)||void 0===j||j.call(C,{origin:"Metadata",message:"Failed to import metadata for: "+d,detail:e.t2.message,context:{page:m,settings:{annotations:i,metadata:r,notes:a}},showToaster:1e3}),e.next=46,Promise.reject(e.t2);case 46:return e.abrupt("return",e.sent);case 47:case"end":return e.stop()}}),e,null,[[8,16],[24,41]])})))).apply(this,arguments)}function $a(e,t,n,r){return Ya.apply(this,arguments)}function Ya(){return(Ya=Ma(Pa().mark((function e(t,n,r,o){var a,i,l,c,u,s,f,d,p,m,h;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.item,i=t.notes,l=void 0===i?[]:i,c="@"+a.key,u=n||window.roamAlphaAPI.util.generateUID(),s={new:!1,title:c,uid:u},u!=n&&(window.roamAlphaAPI.createPage({page:{title:c,uid:u}}),s.new=!0),e.prev=5,f=ya(l,u,{annotationsSettings:o,notesSettings:r}),e.next=9,Ua(u,f);case 9:return d=e.sent,p=ja({page:s,raw:{item:a,notes:l}},d),Qt(ja(ja({},p),{},{_type:"notes-added"})),e.abrupt("return",p);case 15:return e.prev=15,e.t0=e.catch(5),null===(m=window.zoteroRoam)||void 0===m||null===(h=m.error)||void 0===h||h.call(m,{origin:"Notes",message:"Failed to import notes for: "+c,detail:e.t0.message,context:{page:s,settings:{annotations:o,notes:r}},showToaster:1e3}),e.next=20,Promise.reject(e.t0);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}function Za(e){return Ja.apply(this,arguments)}function Ja(){return Ja=Ma(Pa().mark((function e(t){var n,r=arguments;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"outline",e.next=3,window.roamAlphaAPI.ui.rightSidebar.addWindow({window:{type:n,"block-uid":t}});case 3:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function ei(e){return ti.apply(this,arguments)}function ti(){return(ti=Ma(Pa().mark((function e(t){return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.roamAlphaAPI.ui.mainWindow.openPage({page:{uid:t}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={label:e};t.ui?t.ui.commandPalette.removeCommand(n):window.roamAlphaAPI.ui.commandPalette.removeCommand(n)}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oi=(0,a.createContext)(null),ai=function(e){var t,n,r=e.children,o=(t=(0,a.useState)((function(){return Ha()})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],l=o[1],c=(0,a.useCallback)((function(){l((function(){return Ha()}))}),[]),u=(0,a.useMemo)((function(){return[i,c]}),[i,c]);return React.createElement(oi.Provider,{value:u},r)};ai.propTypes={children:Fo.node};var ii=function(){var e=(0,a.useContext)(oi);if(!e)throw new Error("No context provided");return e},li=function(e,t){return li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},li(e,t)};var ci=function(){return ci=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ci.apply(this,arguments)};Object.create,Object.create;var ui=n(184),si=n.n(ui),fi=o.Classes.getClassNamespace(),di="".concat(fi,"-popover2"),pi="".concat(fi,"-popover2-target"),mi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=a.createRef(),t.reposition=function(){var e;return null===(e=t.ref.current)||void 0===e?void 0:e.reposition()},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}li(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.popoverClassName,r=e.ref,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","popoverClassName","ref"]);return a.createElement(o.Popover,ci({className:si()(pi,t),popoverClassName:si()(di,n),ref:void 0===r?this.ref:(0,o.mergeRefs)(r,this.ref)},i))},t}(a.PureComponent);function hi(e){return hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hi(e)}function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){gi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==hi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==hi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===hi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wi=new Zn({afterUpdate:function(e,t){var n,r,o;null===(n=window)||void 0===n||null===(r=n.zoteroRoam)||void 0===r||null===(o=r.updateSetting)||void 0===o||o.call(r,"annotations",t)}}),Ei=wi.Provider,Si=wi.useSettings,Oi=[{label:"Group by date added",value:"dateAdded"},{label:"Don't group annotations",value:!1}],ki={default:"Default formatter",function:"Custom function"},Ri=[{label:"Use raw metadata",value:"raw"},{label:"Use simplified data",value:"formatted"}],xi=React.createElement(React.Fragment,null,"Replacements available:",React.createElement(kr,{item:"{{comment}}",text:"the comment's text"})),Ti=React.createElement(React.Fragment,null,"Replacements available:",React.createElement(kr,{item:"{{highlight}}",text:"the highlighted text"}),React.createElement(kr,{item:"{{page_label}}",text:"the page number"}),React.createElement(kr,{item:"{{link_page}}",text:"the link to the PDF page"}),React.createElement(kr,{item:"{{tags_string}}",text:"the tags associated with the highlight (comma-separated)"}));function _i(e){return _i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_i(e)}function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach((function(t){Ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ai(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ii=new Zn,Li=Ii.Provider,Ni=Ii.useSettings,Di=[{label:"By name",value:"srcName"},{label:"By UID",value:"srcUid"}],Mi={default:"Default formatter",function:"Custom function",smartblock:"SmartBlock"};function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach((function(t){Bi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==zi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===zi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xi=new Zn({afterUpdate:function(e,t){var n,r,o;null===(n=window)||void 0===n||null===(r=n.zoteroRoam)||void 0===r||null===(o=r.updateSetting)||void 0===o||o.call(r,"notes",t)}}),Gi=Xi.Provider,Ki=Xi.useSettings,Hi=[{label:"At the top",value:"top"},{label:"At the bottom",value:"bottom"}],Vi=[{label:"Don't nest",value:!1},{label:"[[Notes]]",value:"[[Notes]]"}],Qi={preset:"Preset",custom:"Custom content"},Wi=[{label:"Newline",value:"\n"},{label:"Paragraph",value:"</p>"}],$i={preset:"Preset",custom:"Custom separator"},Yi={default:"Default formatter",function:"Custom function"},Zi=[{label:"Use raw metadata",value:"raw"},{label:"Use HTML blocks",value:"text"}];function Ji(e){return Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ji(e)}function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach((function(t){nl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ji(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ji(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ji(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ol=new Zn({afterUpdate:function(e,t){var n,r,o;null===(n=window)||void 0===n||null===(r=n.zoteroRoam)||void 0===r||null===(o=r.updateSetting)||void 0===o||o.call(r,"typemap",t)}}),al=ol.Provider,il=ol.useSettings;function ll(e){return ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(e)}function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}function ul(){ul=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==ll(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function sl(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function fl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sl(a,r,o,i,l,"next",e)}function l(e){sl(a,r,o,i,l,"throw",e)}i(void 0)}))}}function dl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ml={autoFocus:!0,boundary:"window",className:"zr-library-item-popover",interactionKind:o.PopoverInteractionKind.HOVER,lazy:!0,placement:"right-start",popoverClassName:de.POPOVER};const hl=(0,a.memo)((function(e){var t=e.closeDialog,n=e.inGraph,r=e.item,i=e.notes,l=void 0===i?[]:i,c=e.pdfs,u=void 0===c?[]:c,s=dl(Si(),1)[0],f=dl(Ni(),1)[0],d=dl(Ki(),1)[0],p=dl(il(),1)[0],m=dl(ii(),2)[1],h=(0,a.useCallback)((function(){t&&t()}),[t]),y=(0,a.useMemo)((function(){return n?{className:de.TEXT_SMALL,onClick:function(){return ei(n)}}:{className:[de.TEXT_SMALL,de.TEXT_AUXILIARY].join(" ")}}),[n]),v=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,React.createElement(o.MenuItem,{icon:"application",text:"Open in Zotero (app)",href:kt(r,{format:"target"}),target:"_blank"}),React.createElement(o.MenuItem,{icon:"cloud",text:"Open in Zotero (web)",href:xt(r,{format:"target"}),target:"_blank"}))}),[r]),g=(0,a.useCallback)(fl(ul().mark((function e(){var t;return ul().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa({item:r,pdfs:u,notes:l},n,f,p,d,s);case 2:return(t=e.sent).success&&t.page.new&&m(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[s,n,r,f,u,l,d,p,m]),b=(0,a.useCallback)(fl(ul().mark((function e(){var t,n,r;return ul().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,n=t.success,r=t.args.uid,n&&Za(r);case 6:case"end":return e.stop()}}),e)}))),[g]),w=(0,a.useCallback)((function(){0!=n&&(ei(n),h())}),[h,n]),E=(0,a.useCallback)((function(){0!=n&&Za(n)}),[n]),S=(0,a.useMemo)((function(){if(u.length>0){var e="group"==r.library.type?"groups/"+r.library.id:"library";return React.createElement(React.Fragment,null,React.createElement(o.MenuDivider,{title:"PDF Attachments"}),u.map((function(t,n){var r=["linked_file","imported_file","imported_url"].includes(t.data.linkMode)?"zotero://open-pdf/".concat(e,"/items/").concat(t.data.key):t.data.url;return React.createElement(o.MenuItem,{key:n,href:r,icon:"paperclip",rel:"noreferrer",target:"_blank",text:t.data.filename||t.data.title})})))}return null}),[r.library,u]),O=(0,a.useMemo)((function(){return n?React.createElement(o.Menu,{className:de.TEXT_SMALL},React.createElement(o.MenuItem,{icon:"arrow-right",text:"Go to Roam page",onClick:w}),React.createElement(o.MenuItem,{icon:"inheritance",text:"Open in sidebar",onClick:E}),React.createElement(o.MenuDivider,null),v,S):React.createElement(o.Menu,{className:de.TEXT_SMALL},React.createElement(o.MenuItem,{icon:"add",text:"Import metadata",onClick:g}),React.createElement(o.MenuItem,{icon:"inheritance",text:"Import & open in sidebar",onClick:b}),React.createElement(o.MenuDivider,null),v,S)}),[g,b,n,w,E,S,v]);return React.createElement(mi,cl({},ml,{content:O}),React.createElement(o.Button,cl({intent:0!=n?o.Intent.SUCCESS:void 0,minimal:!0,rightIcon:"chevron-right",small:!0,text:"@"+r.key},y)))}));function yl(e){var t=e.item;return React.createElement("pre",{className:[o.Classes.CODE_BLOCK,de.TEXT_AUXILIARY].join(" ")},JSON.stringify(t,null,"  "))}const vl=function(e){var t=e.item,n=e.isOpen,r=e.onClose;return React.createElement(o.Drawer,{canEscapeKeyClose:!1,canOutsideClickClose:!0,className:de.PREFIX_DRAWER+"data",isOpen:n,lazy:!1,onClose:r,size:"40%"},React.createElement(Kn,null,React.createElement(o.Tabs,{animate:!1,className:de.TABS_MINIMAL,id:"zr-drawer--data"},React.createElement(o.Tab,{id:"item",panel:React.createElement(yl,{item:t}),title:"Item"}),React.createElement(o.Tabs.Expander,null),React.createElement(o.Button,{icon:"cross",minimal:!0,onClick:r}))))};var gl=["children","href","minimal"];function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bl.apply(this,arguments)}const wl=function(e){var t=e.children,n=void 0===t?null:t,r=e.href,a=e.minimal,i=void 0===a||a,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,gl);return React.createElement(o.AnchorButton,bl({href:r,intent:"primary",minimal:i,rel:"noreferrer",target:"_blank"},l),n)};function El(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ol(e){var t=e.item,n=El(tr(!1),2),r=n[0],a=n[1],i=a.on,l=a.off;return React.createElement(React.Fragment,null,React.createElement(o.Button,{icon:"eye-open",minimal:!0,onClick:i}),React.createElement(o.Dialog,{canEscapeKeyClose:!1,className:"zr-raw-item-dialog",isOpen:r,lazy:!0,onClose:l},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement("pre",{className:[o.Classes.CODE_BLOCK,de.TEXT_AUXILIARY].join(" ")},JSON.stringify(t,null,"  ")))))}function kl(e){var t=e.annot,n=t.color,r=t.comment,i=t.date_modified,l=t.link_page,c=t.link_pdf,u=t.page_label,s=t.raw,f=t.tags,d=t.text,p=t.type,m=(0,a.useMemo)((function(){return{backgroundImage:"linear-gradient(120deg, ".concat(n,"50 0%, ").concat(n,"50 100%)")}}),[n]);return React.createElement("div",{className:[de.PREFIX_DRAWER+"notes-card",de.TEXT_SMALL].join(" ")},React.createElement("div",{"zr-role":"card-header"},React.createElement("span",null,f.map((function(e,t){return React.createElement(o.Tag,{key:t,minimal:!0},e)}))),React.createElement(o.ButtonGroup,{minimal:!0},React.createElement(Ol,{item:s}),React.createElement(wl,{className:de.TEXT_SMALL,href:c,icon:"paperclip"},"PDF"),React.createElement(wl,{className:de.TEXT_SMALL,href:l},"Page ",u))),React.createElement("div",{className:"zr-annotation--highlight"},d&&React.createElement("span",{style:m},d),"image"==p&&React.createElement("code",{className:o.Classes.CODE},"Images are currently not supported")),r&&React.createElement("div",{className:"zr-annotation--comment"},React.createElement(o.Icon,{icon:"nest",intent:"primary",size:14}),r),React.createElement("div",{"zr-role":"card-footer"},React.createElement("span",{className:de.TEXT_SECONDARY},Ct(i))))}function Rl(e){var t=e.note,n=t.date_modified,r=t.link_note,i=t.raw,l=t.tags,c=El(Ki(),1)[0],u=(0,a.useMemo)((function(){return Ot([i],c)}),[c,i]);return React.createElement("div",{className:[de.PREFIX_DRAWER+"notes-card",de.TEXT_SMALL].join(" ")},React.createElement("div",{"zr-role":"card-header"},React.createElement("span",null,l.map((function(e,t){return React.createElement(o.Tag,{key:t,minimal:!0},e)}))),React.createElement(o.ButtonGroup,{minimal:!0},React.createElement(Ol,{item:i}),React.createElement(wl,{className:de.TEXT_SMALL,href:r,icon:"comment"},"View in Zotero"))),u.map((function(e,t){return React.createElement("div",{key:t,className:"zr-note--contents"},e)})),React.createElement("div",{"zr-role":"card-footer"},React.createElement("span",{className:de.TEXT_SECONDARY},Ct(n))))}function xl(e){var t=Ft(e.annots).sort((function(e,t){return mt(e.sortIndex,t.sortIndex)}));return React.createElement(React.Fragment,null,t.map((function(e){return React.createElement(kl,{key:e.key,annot:e})})))}function Tl(e){var t=e.notes.map((function(e){var t=e.data,n=t.dateAdded,r=t.dateModified,o=t.parentItem,a=t.note,i=t.tags,l=e.library.type+"s/"+e.library.id,c=l.startsWith("groups/")?l:"library",u="zotero://select/".concat(c,"/items/").concat(e.key);return{date_added:n,date_modified:r,key:e.key,location:l,link_note:u,note:a,parent_item:o,raw:e,tags:i.map((function(e){return e.tag}))}}));return React.createElement(React.Fragment,null,t.map((function(e){return React.createElement(Rl,{key:e.key,note:e})})))}const _l=(0,a.memo)((function(e){var t=e.isOpen,n=e.notes,r=e.onClose,i=(0,a.useMemo)((function(){return n.filter(qe)}),[n]),l=(0,a.useMemo)((function(){return n.filter(Xe)}),[n]);return React.createElement(o.Drawer,{canEscapeKeyClose:!1,canOutsideClickClose:!0,className:de.PREFIX_DRAWER+"notes",isOpen:t,lazy:!1,onClose:r,size:"40%"},React.createElement(Kn,null,React.createElement(o.Tabs,{animate:!1,className:de.TABS_MINIMAL,id:"zr-drawer--notes"},i.length>0&&React.createElement(o.Tab,{id:"annotations",panel:React.createElement(xl,{annots:i}),title:"Annotations"}),l.length>0&&React.createElement(o.Tab,{id:"notes",panel:React.createElement(Tl,{notes:l}),title:"Notes"}),React.createElement(o.Tabs.Expander,null),React.createElement(o.Button,{icon:"cross",minimal:!0,onClick:r}))))}));function Cl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Al=function(e){var t=e.item,n=e.onClose,r=t.children,a=t.inGraph,i=t.itemType,l=t.meta,c=t.publication,u=t.raw,s=t.title,f=Cl(tr(!1),2),d=f[0],p=f[1],m=p.on,h=p.off,y=Cl(tr(!1),2),v=y[0],g=y[1],b=g.on,w=g.off;return React.createElement(React.Fragment,null,React.createElement(No,{className:"zr-query--result"},React.createElement("div",{"zr-role":"item-header"},React.createElement("div",{"zr-role":"item-details"},React.createElement("span",{className:de.TEXT_AUXILIARY,"data-item-type":i,"zr-role":"item-title"},s),React.createElement("span",{className:de.TEXT_ACCENT_1},l),React.createElement("span",{className:de.TEXT_SECONDARY},c),React.createElement(o.Button,{icon:"eye-open",minimal:!0,onClick:m,title:"Show the item's raw metadata"}),r.notes.length>0?React.createElement(o.Button,{className:de.TEXT_SMALL,icon:"duplicate",minimal:!0,text:Nt(r.notes.length,"linked note"),onClick:b,title:"Show the item's linked notes"}):null),React.createElement(hl,{closeDialog:n,inGraph:a,item:u,notes:r.notes,pdfs:r.pdfs}))),React.createElement(vl,{item:u,isOpen:d,onClose:h}),r.notes.length>0&&React.createElement(_l,{notes:r.notes,isOpen:v,onClose:w}))};var Pl=["options","value","setValue"];function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Il.apply(this,arguments)}function Ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nl={className:de.TEXT_SMALL,initialContent:null,itemPredicate:function(e,t){return Mt(e,t.label,{any_case:!0,match:"partial",search_compounds:!1,word_order:"loose"})},itemsEqual:"value",openOnKeyDown:!0,popoverProps:{canEscapeKeyClose:!1,fill:!0,minimal:!0,popoverClassName:de.POPOVER},resetOnSelect:!0,tagInputProps:{inputProps:{autoComplete:"off",placeholder:"Add...",spellCheck:"false"},placeholder:"Click to add an element"},tagRenderer:function(e){return e.label}};function Dl(e){var t=e.options,n=void 0===t?[]:t,r=e.value,i=void 0===r?[]:r,l=e.setValue,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Pl),u=(0,a.useMemo)((function(){return n.filter((function(e){return i.includes(e.value)}))}),[n,i]),s=(0,a.useCallback)((function(e,t){return l([].concat(function(e){if(Array.isArray(e))return Ll(e)}(n=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Ll(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ll(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e.value]));var n}),[l,i]),f=(0,a.useCallback)((function(e,t){return l(i.filter((function(t){return t!=e.value})))}),[l,i]),d=(0,a.useCallback)((function(e,t){var n=t.handleClick,r=i.includes(e.value);return React.createElement(o.MenuItem,{"aria-selected":r,key:e.value,labelElement:r?React.createElement(o.Icon,{icon:"small-tick"}):null,onClick:n,text:e.label})}),[i]);return React.createElement(Jn.MultiSelect,Il({itemRenderer:d,items:n,onItemSelect:s,onRemove:f,selectedItems:u},Nl,c))}var Ml=["selectedTags","onRemove","onSelect"];function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zl.apply(this,arguments)}function Fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ul={canEscapeKeyClose:!1,className:"zr-input-tags",fill:!0,minimal:!0,popoverClassName:de.POPOVER},Bl={inputProps:{"aria-label":"Add tags from Roam",placeholder:"Add tag",title:"Add tags from Roam"},leftIcon:"tag",tagProps:{minimal:!0}},ql={createNewItemFromQuery:function(e){return e},createNewItemRenderer:function(e,t,n){return React.createElement(o.MenuItem,{"aria-selected":t,htmlTitle:"Add tag, "+"'".concat(e,"'"),icon:"small-plus",onClick:n,text:e})},itemRenderer:function(e,t){var n=t.handleClick,r=t.modifiers.active;return React.createElement(o.MenuItem,{"aria-selected":r,key:e,onClick:n,text:e})},itemListPredicate:function(e,t){return t.filter((function(t){return Mt(e,t,{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"})})).sort((function(e,t){return e.length<t.length?-1:1})).slice(0,30)},tagRenderer:function(e){return e}},Xl=(0,a.memo)((function(e){var t,n,r=e.selectedTags,o=e.onRemove,i=e.onSelect,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ml),c=(t=(0,a.useState)((function(){return window.roamAlphaAPI.q("[\n\t\t:find ?title \n\t\t:where\n\t\t\t[?e :node/title ?title]\n\t\t]").flat(1).sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1}))})),n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fl(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],u=(0,a.useCallback)((function(e,t){return i(e)}),[i]),s=(0,a.useCallback)((function(e,t){return o(e)}),[o]);return React.createElement(Jn.MultiSelect,zl({className:de.TEXT_SMALL,createNewItemPosition:"first",fill:!0,initialContent:null,items:c,onItemSelect:u,onRemove:s,openOnKeyDown:!0,placeholder:"Add tags from Roam",popoverProps:Ul,resetOnQuery:!0,resetOnSelect:!0,selectedItems:r,tagInputProps:Bl},ql,l))}));const Gl=window.Blueprint.DateTime;function Kl(){return Kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kl.apply(this,arguments)}var Hl={canEscapeKeyClose:!1,fill:!0,minimal:!0,placement:"bottom",popoverClassName:[de.POPOVER,de.DATE_PICKER].join(" ")},Vl={formatDate:function(e){return jt(e,{brackets:!1})},parseDate:function(e){return new Date(e)}};function Ql(e){var t=e.value,n=e.setValue;return React.createElement(Gl.DateInput,Kl({className:de.INPUT_BOX,closeOnSelection:!0,highlightCurrentDay:!0,onChange:n,placeholder:"Date",popoverProps:Hl,rightElement:React.createElement(o.Icon,{icon:"timeline-events"}),shortcuts:!1,value:t},Vl))}function Wl(e){var t=e.value,n=e.setValue;return React.createElement(Gl.DateRangeInput,Kl({className:de.INPUT_DATE_RANGE,closeOnSelection:!0,highlightCurrentDay:!0,onChange:n,popoverProps:Hl,shortcuts:!1,value:t},Vl))}function $l(e){var t=e.value,n=e.setValue,r=(0,a.useCallback)((function(e){return n(e.target.value)}),[n]);return React.createElement(o.InputGroup,{className:[de.INPUT_BOX,de.INPUT_TEXT].join(" "),onChange:r,placeholder:"Enter text",value:t})}var Yl=function(e){return e.DATE="date",e.DATE_RANGE="date-range",e.ITEM_TAGS="tags",e.ITEM_TYPE="item-type",e.SELECT="select",e.TEXT="text",e}({}),Zl=["inputType"];function Jl(e,t){if(e){if("string"==typeof e)return ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ec(e,t):void 0}}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tc(e){var t,n,r=e.value,o=e.setValue,i=(t=il(),n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||Jl(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],l=(0,a.useMemo)((function(){return Object.keys(i).map((function(e){return{value:e,label:i[e]}}))}),[i]);return React.createElement(Dl,{options:l,value:r,setValue:o})}function nc(e){var t=e.value,n=e.setValue,r=(0,a.useCallback)((function(e){return n([].concat(function(e){if(Array.isArray(e))return ec(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||Jl(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]));var r}),[n,t]),o=(0,a.useCallback)((function(e){return n(t.filter((function(t){return t!=e})))}),[n,t]);return React.createElement(Xl,{onRemove:o,onSelect:r,selectedTags:t})}const rc=function(e){var t=e.inputType,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Zl);switch(t){case Yl.ITEM_TYPE:return React.createElement(tc,n);case Yl.ITEM_TAGS:return React.createElement(nc,n);case Yl.DATE:return React.createElement(Ql,n);case Yl.DATE_RANGE:return React.createElement(Wl,n);case Yl.TEXT:return React.createElement($l,n);default:return null}};function oc(e){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(e)}function ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ic={property:"Citekey",relationship:"exists",value:null},lc={Abstract:{contains:{checkInput:function(e){return(null==e?void 0:e.constructor)===String},defaultInput:"",inputType:Yl.TEXT,testItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!!e.abstract&&Mt(t,e.abstract)}},"does not contain":{checkInput:function(e){return(null==e?void 0:e.constructor)===String},defaultInput:"",inputType:Yl.TEXT,testItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!(!e.abstract||t&&Mt(t,e.abstract))}},"does not exist":{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return!e.abstract}},exists:{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return Boolean(e.abstract)}}},Citekey:{exists:{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return Boolean(e.raw.has_citekey)}},"does not exist":{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return!e.raw.has_citekey}}},DOI:{exists:{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return Boolean(e.raw.data.DOI)}},"does not exist":{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return!e.raw.data.DOI}}},"Item added":{before:{checkInput:function(e){return e instanceof Date},defaultInput:new Date,inputType:Yl.DATE,stringify:function(e){return jt(e,{brackets:!1})},testItem:function(e,t){if(null==t)return!0;var n=t;return n.setHours(0,0,0),new Date(e.raw.data.dateAdded)<n}},after:{checkInput:function(e){return e instanceof Date},defaultInput:new Date,inputType:Yl.DATE,stringify:function(e){return jt(e,{brackets:!1})},testItem:function(e,t){if(null==t)return!0;var n=t;return n.setHours(0,0,0),new Date(e.raw.data.dateAdded)>n}},between:{checkInput:function(e){return(null==e?void 0:e.constructor)===Array&&2==e.length&&e.every((function(e){return null==e||(null==e?void 0:e.constructor)===Date}))},defaultInput:[null,null],inputType:Yl.DATE_RANGE,stringify:function(e){return e.map((function(e){return e?jt(e,{brackets:!1}):"..."})).join("-")},testItem:function(e,t){var n,r,o,a,i=(a=2,function(e){if(Array.isArray(e))return e}(o=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(o,a)||function(e,t){if(e){if("string"==typeof e)return ac(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ac(e,t):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];if(null==l)n=!0;else{var u=l;u.setHours(0,0,0),n=new Date(e.raw.data.dateAdded)>u}if(null==c)r=!0;else{var s=c;s.setHours(0,0,0),r=new Date(e.raw.data.dateAdded)<s}return n&&r}}},"Item type":{"is any of":{checkInput:function(e){return(null==e?void 0:e.constructor)===Array&&e.length>0&&e.every((function(e){return(null==e?void 0:e.constructor)===String}))},defaultInput:[],inputType:Yl.ITEM_TYPE,stringify:function(e){return e.join(", ")},testItem:function(e,t){return t.includes(e.itemType)}},"is not":{checkInput:function(e){return(null==e?void 0:e.constructor)===Array&&e.length>0&&e.every((function(e){return(null==e?void 0:e.constructor)===String}))},defaultInput:[],inputType:Yl.ITEM_TYPE,stringify:function(e){return e.join(", ")},testItem:function(e,t){return!t.includes(e.itemType)}}},Notes:{exist:{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return e.children.notes.length>0}},"do not exist":{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return 0==e.children.notes.length}}},PDF:{exists:{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return e.children.pdfs.length>0}},"does not exist":{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return 0==e.children.pdfs.length}}},"Roam page":{exists:{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return Boolean(e.inGraph)}},"does not exist":{checkInput:function(){return!1},defaultInput:null,inputType:null,testItem:function(e){return 0==e.inGraph}}},Tags:{include:{checkInput:function(e){return(null==e?void 0:e.constructor)===Array&&(0==e.length||e.every((function(e){return(null==e?void 0:e.constructor)===String})))},defaultInput:[],inputType:Yl.ITEM_TAGS,stringify:function(e){return e.join(", ")},testItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0!=e.tags.length&&0!=t.length&&t.every((function(t){return Mt(t,e.tags,{match:"exact"})}))}},"include any of":{checkInput:function(e){return(null==e?void 0:e.constructor)===Array&&(0==e.length||e.every((function(e){return(null==e?void 0:e.constructor)===String})))},defaultInput:[],inputType:Yl.ITEM_TAGS,stringify:function(e){return e.join(", ")},testItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0!=e.tags.length&&0!=t.length&&t.some((function(t){return Mt(t,e.tags,{match:"exact"})}))}},"do not include":{checkInput:function(e){return(null==e?void 0:e.constructor)===Array&&(0==e.length||e.every((function(e){return(null==e?void 0:e.constructor)===String})))},defaultInput:[],inputType:Yl.ITEM_TAGS,stringify:function(e){return e.join(", ")},testItem:function(e,t){return 0==e.tags.length||0==t.length||t.every((function(t){return!Mt(t,e.tags,{match:"exact"})}))}}},Title:{contains:{checkInput:function(e){return(null==e?void 0:e.constructor)===String},defaultInput:"",inputType:Yl.TEXT,testItem:function(e){return Mt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e.title)}},"does not contain":{checkInput:function(e){return(null==e?void 0:e.constructor)===String},defaultInput:"",inputType:Yl.TEXT,testItem:function(e,t){return!Mt(t,e.title)}}}};function cc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(Array.isArray(e))return uc(e,t,n);if("object"==oc(e)){var r=e.property,o=e.relationship,a=e.value;if(r&&o){var i=lc[r][o];return null===i.inputType?i.testItem(n):i.testItem(n,a)}return!0}throw new Error("Unexpected query input of type ".concat(oc(e),", expected Array or Object"))}function uc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return 0==e.length||(t?e.some((function(e){return cc(e,!t,n)})):e.every((function(e){return cc(e,!t,n)})))}function sc(e,t){return Array.isArray(e)?it(e,t):[e,t]}function fc(e){return fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(e)}function dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(n),!0).forEach((function(t){mc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==fc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==fc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===fc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hc={minimal:!0,placement:"bottom",popoverClassName:de.POPOVER},yc=pc(pc({},hc),{},{targetProps:{title:"Select a property to query"}}),vc=pc(pc({},hc),{},{targetProps:{title:"Select a relationship to test for the property"}});function gc(e,t){var n=t.handleClick;return React.createElement(o.MenuItem,{key:e,onClick:n,text:e})}const bc=function(e){var t=e.dispatch,n=e.isFirstChild,r=e.isOnlyChild,i=e.term,l=e.useOR,c=void 0!==l&&l,u=i.property,s=i.relationship,f=i.value,d=void 0===f?"":f,p=(0,a.useCallback)((function(){t({type:"updateSelf",value:sc(i,ic)})}),[t,i]),m=(0,a.useCallback)((function(){return t({type:"removeSelf"})}),[t]),h=(0,a.useCallback)((function(e){t({type:"updateSelf",value:pc(pc({},i),e)})}),[t,i]),y=(0,a.useCallback)((function(e){var t={property:e},n=lc[e];if(s in n||(t.relationship=Object.keys(n)[0]),t.relationship){var r=n[t.relationship];r.checkInput(d)||(t.value=r.defaultInput)}h(t)}),[h,s,d]),v=(0,a.useCallback)((function(e){var t={relationship:e},n=lc[u][e];n.checkInput(d)||(t.value=n.defaultInput),h(t)}),[h,u,d]),g=(0,a.useCallback)((function(e){return h({value:e})}),[h]);return React.createElement("div",{className:"zr-query-entry"},!n&&React.createElement("span",{"zr-role":"query-entry-operator"},c?"AND":"OR"),React.createElement("div",null,React.createElement(Jn.Select,{filterable:!1,itemRenderer:gc,items:Object.keys(lc),onItemSelect:y,popoverProps:yc},React.createElement(o.Button,{minimal:!0,rightIcon:"caret-down",text:u})),React.createElement(Jn.Select,{filterable:!1,itemRenderer:gc,items:Object.keys(lc[u]),onItemSelect:v,popoverProps:vc},React.createElement(o.Button,{minimal:!0,rightIcon:"caret-down",text:s})),React.createElement(rc,{inputType:lc[u][s].inputType,value:d,setValue:g})),r?null:React.createElement("div",null,React.createElement(o.Button,{className:["zr-query-entry--add-sibling",de.TEXT_SMALL].join(" "),icon:"small-plus",minimal:!0,onClick:p,small:!0,text:c?"OR":"AND"}),React.createElement(o.Button,{className:"zr-query-entry--remove-self",icon:r?"cross":"small-cross",intent:r?void 0:o.Intent.DANGER,minimal:!0,onClick:m,title:"Remove query term"})))};function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wc.apply(this,arguments)}const Ec=function e(t){var n=t.dispatch,r=t.isFirstChild,i=t.isOnlyChild,l=t.terms,c=void 0===l?[]:l,u=t.useOR,s=void 0===u||u,f=(0,a.useCallback)((function(){return n({type:"removeSelf"})}),[n]),d=(0,a.useCallback)((function(){return n({type:"updateSelf",value:sc(c,ic)})}),[n,c]),p=(0,a.useCallback)((function(e,t){switch(t.type){case"removeSelf":return n({type:"updateSelf",value:lt(c,e)});case"updateSelf":return n({type:"updateSelf",value:ct(c,e,t.value)});default:return}}),[n,c]);return React.createElement(React.Fragment,null,React.createElement("div",{className:"zr-query-box"},!r&&React.createElement("span",{"zr-role":"query-entry-operator"},s?"OR":"AND"),React.createElement("div",null,c.map((function(t,n){var r={dispatch:function(e){return p(n,e)},isFirstChild:0==n,isOnlyChild:1==c.length,useOR:!s};return React.createElement(a.Fragment,{key:n},Array.isArray(t)?React.createElement(e,wc({terms:t},r)):React.createElement(bc,wc({term:t},r)))}))),!i&&React.createElement(o.Button,{className:"zr-query-box--remove-self",icon:"cross",minimal:!0,onClick:f,title:"Remove query group"})),React.createElement(o.Button,{className:["zr-query-box--add-sibling",de.TEXT_SMALL].join(" "),minimal:!0,onClick:d,rightIcon:"small-plus",small:!0,text:s?"OR":"AND"}))};function Sc(){return Sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sc.apply(this,arguments)}function Oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rc(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).parentheses,r=void 0===n||n;if(Array.isArray(e)){var o=e.map((function(e){return Rc(e,!t)})).join(t?" or ":" and ");return r?"(".concat(o,")"):o}return function(e){var t=e.property,n=e.relationship,r=function(e){var t,n,r=e.property,o=e.relationship,a=e.value;return null==a?"":(null===(t=(n=lc[r][o]).stringify)||void 0===t?void 0:t.call(n,a))||"".concat(a)}(e);return[t,n,r].filter(Be).join(" ")}(e)}function xc(e){var t=e.addTerm,n=e.buttonProps,r=void 0===n?{}:n,i=e.useOR,l=Oc(tr(!1),2),c=l[0],u=l[1],s=u.on,f=u.off,d=Oc((0,a.useState)([ic]),2),p=d[0],m=d[1],h=(0,a.useCallback)((function(e){switch(e.type){case"removeSelf":default:return;case"updateSelf":return m(e.value)}}),[]),y=(0,a.useCallback)((function(){t(p),f()}),[t,f,p]);return React.createElement(React.Fragment,null,React.createElement(o.Button,Sc({className:de.TEXT_SMALL,minimal:!0,onClick:s,rightIcon:"small-plus",small:!0},r)),React.createElement(o.Dialog,{canEscapeKeyClose:!1,className:"zr-query-term-dialog",isOpen:c,lazy:!0,onClose:f},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement(Ec,{dispatch:h,isFirstChild:!0,isOnlyChild:!0,terms:p,useOR:!i})),React.createElement("div",{className:o.Classes.DIALOG_FOOTER},React.createElement("div",{className:o.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(o.Button,{minimal:!0,onClick:f,text:"Cancel"}),React.createElement(o.Button,{intent:"primary",minimal:!0,onClick:y,text:"OK"})))))}function Tc(e){var t=e.dispatch,n=e.isLast,r=e.term,i=e.useOR,l=Oc(tr(!1),2),c=l[0],u=l[1],s=u.on,f=u.off,d=(0,a.useCallback)((function(){f(),t({type:"removeSelf"})}),[f,t]),p=(0,a.useCallback)((function(e){switch(e.type){case"removeSelf":d();break;case"updateSelf":return t({type:"updateSelf",value:e.value});default:return}}),[t,d]);return React.createElement(React.Fragment,null,React.createElement(o.Tag,{"zr-role":"filter-tag",interactive:!0,minimal:!0,onClick:s,onRemove:d},Rc(r,!i,{parentheses:!1})),!n&&React.createElement("span",{className:de.TEXT_AUXILIARY,"zr-role":"filter-operator"},i?"OR":"AND"),React.createElement(o.Dialog,{canEscapeKeyClose:!1,className:"zr-query-term-dialog",isOpen:c,lazy:!0,onClose:f},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement(Ec,{dispatch:p,isFirstChild:!0,isOnlyChild:!0,terms:r,useOR:!i})),React.createElement("div",{className:o.Classes.DIALOG_FOOTER},React.createElement("div",{className:o.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(o.Button,{minimal:!0,onClick:d,text:"Remove term"}),React.createElement(o.Button,{intent:"primary",minimal:!0,onClick:f,text:"OK"})))))}function _c(e){var t=e.dispatch,n=e.filter,r=e.isOnlyChild,i=e.useOR,l=(0,a.useCallback)((function(e){return t({type:"add",value:e})}),[t]),c=(0,a.useCallback)((function(){return t({type:"removeSelf"})}),[t]),u=(0,a.useCallback)((function(e,r){switch(r.type){case"updateSelf":return t({type:"update",index:e,value:r.value});case"removeSelf":return 1==n.length?t({type:"removeSelf"}):t({type:"remove",index:e});default:return}}),[t,n.length]);return React.createElement(React.Fragment,null,React.createElement("div",{className:"zr-query-filter--elements"},n.map((function(e,t){return React.createElement(Tc,{key:t,dispatch:function(e){return u(t,e)},isLast:t==n.length-1,term:e,useOR:i})})),React.createElement(xc,{addTerm:l,buttonProps:{intent:"primary",text:i?"OR":"AND"},useOR:!i})),!r&&React.createElement(o.Button,{className:"zr-filter--remove-self",icon:"small-cross",minimal:!0,onClick:c,title:"Remove query group"}))}const Cc=function(e){var t=e.dispatch,n=e.terms,r=e.useOR,o=(0,a.useCallback)((function(e){return t({type:"add",value:e})}),[t]),i=(0,a.useCallback)((function(e,r){var o=n[e];switch(r.type){case"removeSelf":return t({type:"remove",index:e});case"add":return t({type:"update",index:e,value:[sc(o,r.value)]});case"remove":return t({type:"update",index:e,value:lt(o,r.index)});case"update":return t({type:"update",index:e,value:ct(o,r.index,r.value)});default:return}}),[t,n]);return React.createElement("div",{className:"zr-query-filters"},n.map((function(e,t){return React.createElement("div",{className:"zr-query-filter",key:t},t>0&&React.createElement("span",{"zr-role":"filter-list-operator"},r?"OR":"AND"),React.createElement(_c,{dispatch:function(e){return i(t,e)},isOnlyChild:1==n.length,filter:e,useOR:!r}))})),React.createElement(xc,{addTerm:o,buttonProps:{text:0==n.length?"Set filter":r?"OR":"AND"},useOR:!r}))};function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ac=function(e){var t,n,r=e.itemsPerPage,o=void 0===r?20:r,i=(t=(0,a.useState)(1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jc(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1],u=(0,a.useMemo)((function(){return[o*(l-1),o*l]}),[l,o]),s=(0,a.useCallback)((function(e){c(e)}),[]);return{currentPage:l,pageLimits:u,setCurrentPage:s}};function Pc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Ic(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ic(e,t){if(e){if("string"==typeof e)return Lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lc(e,t):void 0}}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nc(e){var t,n=e.items,r=e.onClose,i=Ac({itemsPerPage:20}),l=i.currentPage,c=i.pageLimits,u=i.setCurrentPage,s=Pc((0,a.useState)(!0),1)[0],f=Pc(Mr([]),2),d=f[0],p=f[1],m=(0,a.useMemo)((function(){return n.filter((function(e){return uc(d,s,e)}))}),[n,d,s]);return(0,a.useEffect)((function(){u(1)}),[n,m,u]),React.createElement("div",{className:"zr-query-builder"},React.createElement(zo,null,React.createElement(Cc,{dispatch:p,terms:d,useOR:s})),React.createElement("div",{className:"zr-queryitems--datalist"},0==m.length?React.createElement(o.NonIdealState,{className:de.TEXT_AUXILIARY,description:"No items to display"}):React.createElement(Do,null,m.slice.apply(m,(t=c,function(e){if(Array.isArray(e))return Lc(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||Ic(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return React.createElement(Al,{key:[e.location,e.key].join("-"),item:e,onClose:r})})))),React.createElement(zo,null,React.createElement(Mo,{arrows:"first",currentPage:l,itemsPerPage:20,nbItems:m.length,setCurrentPage:u})))}const Dc=function(e){var t=e.itemList,n=e.onClose,r=Pc(ii(),1)[0],i=Pc((0,a.useState)(null),2),l=i[0],c=i[1];return(0,a.useEffect)((function(){t&&function(e,t){return new Promise((function(n){setTimeout((function(){var r=e.items.map((function(n){var r=_t(n.data.key,n.library.type+"s/"+n.library.id,{pdfs:e.pdfs,notes:e.notes});return ft(n,r.pdfs,r.notes,t)}));n(r)}),0)}))}(t,r).then((function(e){c(e)}))}),[t,r]),null==l?React.createElement(o.Spinner,{size:15}):React.createElement(Nc,{items:l,onClose:n})};function Mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zc(e){var t=e.items;return React.createElement(Do,null,t.slice(0,20).map((function(e,t){return React.createElement(No,{key:e.key+"-"+t},e.key)})))}const Fc=function(e){var t,n,r=e.itemList,i=(t=(0,a.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mc(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];return(0,a.useEffect)((function(){r&&c(r.notes)}),[r]),null==l?React.createElement(o.Spinner,{size:15}):React.createElement(zc,{items:l})};function Uc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const qc=function(e){var t=e.item,n=Uc(tr(!1),2),r=n[0],a=n[1],i=a.on,l=a.off,c=Uc(tr(!1),2),u=c[0],s=c[1],f=s.on,d=s.off;return React.createElement(React.Fragment,null,React.createElement(No,{className:"zr-query--result"},React.createElement("div",{"zr-role":"item-header"},React.createElement("div",{"zr-role":"item-details"},React.createElement("span",{className:de.TEXT_AUXILIARY,"zr-role":"item-title"},t.title),t.parent.key&&React.createElement("span",{className:de.TEXT_ACCENT_1},"@",t.parent.key),React.createElement(o.Button,{className:de.TEXT_SMALL,icon:"eye-open",minimal:!0,onClick:i,title:"Show the item's raw metadata"}),t.annotations.length>0?React.createElement(o.Button,{className:de.TEXT_SMALL,icon:"duplicate",minimal:!0,text:Nt(t.annotations.length,"linked note"),onClick:f}):null),React.createElement(wl,{className:de.TEXT_SMALL,href:t.link,icon:"paperclip"},"Open PDF"))),React.createElement(vl,{item:t.raw,isOpen:r,onClose:l}),t.annotations.length>0&&React.createElement(_l,{notes:t.annotations,isOpen:u,onClose:d}))};function Xc(e,t){if(e){if("string"==typeof e)return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gc(e,t):void 0}}function Gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kc(e){var t,n=e.items,r=Ac({itemsPerPage:20}),i=r.currentPage,l=r.pageLimits,c=r.setCurrentPage;return(0,a.useEffect)((function(){c(1)}),[n,c]),React.createElement("div",{className:"zr-query-builder"},React.createElement("div",{className:"zr-querypdfs--datalist"},0==n.length?React.createElement(o.NonIdealState,{className:de.TEXT_AUXILIARY,description:"No items to display"}):React.createElement(Do,null,n.slice.apply(n,(t=l,function(e){if(Array.isArray(e))return Gc(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||Xc(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e,t){return React.createElement(qc,{key:[e.key,t].join("-"),item:e})})))),React.createElement(zo,null,React.createElement(Mo,{arrows:"first",currentPage:i,itemsPerPage:20,nbItems:n.length,setCurrentPage:c})))}const Hc=function(e){var t,n,r=e.itemList,i=(t=(0,a.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||Xc(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];return(0,a.useEffect)((function(){r&&function(e){return new Promise((function(t){setTimeout((function(){var n=e.pdfs.map((function(t){var n,r,o,a,i,l,c,u=(n=t.data.key,r=t.data.parentItem,o=t.library.type+"s/"+t.library.id,c=void 0===(l=(a={items:e.items,notes:e.notes}).notes)?[]:l,{parent:(void 0===(i=a.items)?[]:i).find((function(e){return e.data.key==r&&e.library.type+"s/"+e.library.id==o})),annotations:c.filter(qe).filter((function(e){return e.data.parentItem==n&&e.library.type+"s/"+e.library.id==o}))});return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{annotations:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],key:e.data.key,link:Rt(e,"href"),parent:t,title:e.data.filename||e.data.title,raw:e,tags:e.data.tags.map((function(e){return e.tag}))}}(t,u.parent,u.annotations)}));t(n)}),0)}))}(r).then((function(e){c(e)}))}),[r]),null==l?React.createElement(o.Spinner,{size:15}):React.createElement(Kc,{items:l})},Vc=n(688).useSyncExternalStore;class Qc extends j{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.length&&(this.currentQuery.addObserver(this),Wc(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return $c(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $c(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),w(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const o=this.hasListeners();o&&Yc(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),!o||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();const a=this.computeRefetchInterval();!o||this.currentQuery===r&&this.options.enabled===n.enabled&&a===this.currentRefetchInterval||this.updateRefetchInterval(a)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e);return this.createResult(t,e)}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach((n=>{Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})})),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.isFetchingOptimistic=!0,n.fetch().then((()=>this.createResult(n,t)))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then((()=>(this.updateResult(),this.currentResult)))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(l)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),i||this.currentResult.isStale||!c(this.options.staleTime))return;const e=s(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((()=>{this.currentResult.isStale||this.updateResult()}),e)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!i&&!1!==this.options.enabled&&c(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||A.isFocused())&&this.executeFetch()}),this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const n=this.currentQuery,r=this.options,o=this.currentResult,a=this.currentResultState,i=this.currentResultOptions,l=e!==n,c=l?e.state:this.currentQueryInitialState,u=l?this.currentResult:this.previousQueryResult,{state:s}=e;let f,{dataUpdatedAt:d,error:p,errorUpdatedAt:m,fetchStatus:h,status:y}=s,v=!1,g=!1;if(t._optimisticResults){const o=this.hasListeners(),a=!o&&Wc(e,t),i=o&&Yc(e,n,t,r);(a||i)&&(h=L(e.options.networkMode)?"fetching":"paused",d||(y="loading")),"isRestoring"===t._optimisticResults&&(h="idle")}if(t.keepPreviousData&&!s.dataUpdatedAt&&null!=u&&u.isSuccess&&"error"!==y)f=u.data,d=u.dataUpdatedAt,y=u.status,v=!0;else if(t.select&&void 0!==s.data)if(o&&s.data===(null==a?void 0:a.data)&&t.select===this.selectFn)f=this.selectResult;else try{this.selectFn=t.select,f=t.select(s.data),f=T(null==o?void 0:o.data,f,t),this.selectResult=f,this.selectError=null}catch(e){this.selectError=e}else f=s.data;if(void 0!==t.placeholderData&&void 0===f&&"loading"===y){let e;if(null!=o&&o.isPlaceholderData&&t.placeholderData===(null==i?void 0:i.placeholderData))e=o.data;else if(e="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.selectError=null}catch(e){this.selectError=e}void 0!==e&&(y="success",f=T(null==o?void 0:o.data,e,t),g=!0)}this.selectError&&(p=this.selectError,f=this.selectResult,m=Date.now(),y="error");const b="fetching"===h,w="loading"===y,E="error"===y;return{status:y,fetchStatus:h,isLoading:w,isSuccess:"success"===y,isError:E,isInitialLoading:w&&b,data:f,dataUpdatedAt:d,error:p,errorUpdatedAt:m,failureCount:s.fetchFailureCount,failureReason:s.fetchFailureReason,errorUpdateCount:s.errorUpdateCount,isFetched:s.dataUpdateCount>0||s.errorUpdateCount>0,isFetchedAfterMount:s.dataUpdateCount>c.dataUpdateCount||s.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:E&&0===s.dataUpdatedAt,isPaused:"paused"===h,isPlaceholderData:g,isPreviousData:v,isRefetchError:E&&0!==s.dataUpdatedAt,isStale:Zc(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,w(n,t))return;this.currentResult=n;const r={cache:!0};!1!==(null==e?void 0:e.listeners)&&(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options;if("all"===e||!e&&!this.trackedProps.size)return!0;const n=new Set(null!=e?e:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some((e=>{const r=e;return this.currentResult[r]!==t[r]&&n.has(r)}))})()&&(r.listeners=!0),this.notify({...r,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||D(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){C.batch((()=>{var t,n,r,o;if(e.onSuccess)null==(t=(n=this.options).onSuccess)||t.call(n,this.currentResult.data),null==(r=(o=this.options).onSettled)||r.call(o,this.currentResult.data,null);else if(e.onError){var a,i,l,c;null==(a=(i=this.options).onError)||a.call(i,this.currentResult.error),null==(l=(c=this.options).onSettled)||l.call(c,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)})),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})}))}}function Wc(e,t){return function(e,t){return!(!1===t.enabled||e.state.dataUpdatedAt||"error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&$c(e,t,t.refetchOnMount)}function $c(e,t,n){if(!1!==t.enabled){const r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&Zc(e,t)}return!1}function Yc(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&Zc(e,n)}function Zc(e,t){return e.isStaleByTime(t.staleTime)}class Jc extends j{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){1===this.listeners.length&&this.observers.forEach((e=>{e.subscribe((t=>{this.onUpdate(e,t)}))}))}onUnsubscribe(){this.listeners.length||this.destroy()}destroy(){this.listeners=[],this.observers.forEach((e=>{e.destroy()}))}setQueries(e,t){this.queries=e,C.batch((()=>{const e=this.observers,n=this.findMatchingObservers(this.queries);n.forEach((e=>e.observer.setOptions(e.defaultedQueryOptions,t)));const r=n.map((e=>e.observer)),o=Object.fromEntries(r.map((e=>[e.options.queryHash,e]))),a=r.map((e=>e.getCurrentResult())),i=r.some(((t,n)=>t!==e[n]));(e.length!==r.length||i)&&(this.observers=r,this.observersMap=o,this.result=a,this.hasListeners()&&(u(e,r).forEach((e=>{e.destroy()})),u(r,e).forEach((e=>{e.subscribe((t=>{this.onUpdate(e,t)}))})),this.notify()))}))}getCurrentResult(){return this.result}getQueries(){return this.observers.map((e=>e.getCurrentQuery()))}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map((e=>e.observer.getOptimisticResult(e.defaultedQueryOptions)))}findMatchingObservers(e){const t=this.observers,n=e.map((e=>this.client.defaultQueryOptions(e))),r=n.flatMap((e=>{const n=t.find((t=>t.options.queryHash===e.queryHash));return null!=n?[{defaultedQueryOptions:e,observer:n}]:[]})),o=r.map((e=>e.defaultedQueryOptions.queryHash)),a=n.filter((e=>!o.includes(e.queryHash))),i=t.filter((e=>!r.some((t=>t.observer===e)))),l=e=>{const t=this.client.defaultQueryOptions(e),n=this.observersMap[t.queryHash];return null!=n?n:new Qc(this.client,t)},c=a.map(((e,t)=>{if(e.keepPreviousData){const n=i[t];if(void 0!==n)return{defaultedQueryOptions:e,observer:n}}return{defaultedQueryOptions:e,observer:l(e)}}));return r.concat(c).sort(((e,t)=>n.indexOf(e.defaultedQueryOptions)-n.indexOf(t.defaultedQueryOptions)))}onUpdate(e,t){const n=this.observers.indexOf(e);-1!==n&&(this.result=function(e,t,n){const r=e.slice(0);return r[t]=n,r}(this.result,n,t),this.notify())}notify(){C.batch((()=>{this.listeners.forEach((e=>{e(this.result)}))}))}}const eu=a.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),tu=()=>a.useContext(eu);function nu(e,t){return"function"==typeof e?e(...t):!!e}const ru=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},ou=e=>{a.useEffect((()=>{e.clearReset()}),[e])},au=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&nu(n,[e.error,r]),iu=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},lu=(e,t)=>e.isLoading&&e.isFetching&&!t,cu=(e,t,n)=>(null==e?void 0:e.suspense)&&lu(t,n),uu=(e,t,n)=>t.fetchOptimistic(e).then((({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)})).catch((t=>{n.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)}));function su({queries:e,context:t}){const n=V({context:t}),r=te(),o=a.useMemo((()=>e.map((e=>{const t=n.defaultQueryOptions(e);return t._optimisticResults=r?"isRestoring":"optimistic",t}))),[e,n,r]),[i]=a.useState((()=>new Jc(n,o))),l=i.getOptimisticResult(o);Vc(a.useCallback((e=>r?()=>{}:i.subscribe(C.batchCalls(e))),[i,r]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),a.useEffect((()=>{i.setQueries(o,{listeners:!1})}),[o,i]);const c=tu();o.forEach((e=>{ru(e,c),iu(e)})),ou(c);const u=l.some(((e,t)=>cu(o[t],e,r)))?l.flatMap(((e,t)=>{const n=o[t],a=i.getObservers()[t];if(n&&a){if(cu(n,e,r))return uu(n,a,c);lu(e,r)&&uu(n,a,c)}return[]})):[];if(u.length>0)throw Promise.all(u);const s=l.find(((e,t)=>{var n,r;return au({result:e,errorResetBoundary:c,useErrorBoundary:null!=(n=null==(r=o[t])?void 0:r.useErrorBoundary)&&n,query:i.getQueries()[t]})}));if(null!=s&&s.error)throw s.error;return l}function fu(e){return fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fu(e)}var du=["cacheTime","retry","staleTime"],pu=["staleTime","refetchInterval"],mu=["staleTime","refetchInterval"],hu=["apikey","library"],yu=["staleTime","refetchInterval"],vu=["cacheTime"],gu=["staleTime"],bu=["apikey","library"];function wu(){wu=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==fu(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ku(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==fu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==fu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===fu(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ru(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function xu(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Tu(){var e;return e=wu().mark((function e(t,n){var r,o,a,i,l,c,u,s;return wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.apikey,r=t.library.path,o=Ru(t,bu),a=["items",r,Ou({},o)],i=n.getQueryData(a)||{},l=i.data,c=void 0===l?[]:l,u=i.lastUpdated,s=void 0===u?0:u,e.next=5,Pn(Ou(Ou({},t),{},{since:s}),{match:c},n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})),Tu=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xu(a,r,o,i,l,"next",e)}function l(e){xu(a,r,o,i,l,"throw",e)}i(void 0)}))},Tu.apply(this,arguments)}var _u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.cacheTime,r=void 0===n?1/0:n,o=t.retry,a=void 0===o?function(e,t){return e<1&&404!=t.toJSON().status}:o,i=t.staleTime,l=void 0===i?6e5:i,c=Ru(t,du),u=e.map((function(e){return Ou({queryKey:["citoid",{url:e}],queryFn:function(t){return function(e){return _n.apply(this,arguments)}(e)},cacheTime:r,retry:a,staleTime:l},c)}));return su({queries:u})},Cu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.staleTime,r=void 0===n?3e5:n,o=t.refetchInterval,a=void 0===o?3e5:o,i=Ru(t,pu),l=V(),c=e.map((function(e){var t=["collections",{library:e.path}],n=l.getQueryData(t)||{},o=n.data,c=n.lastUpdated;return Ou({queryKey:t,queryFn:function(t){return function(e){return Cn.apply(this,arguments)}(e,c,{match:o})},staleTime:r,refetchInterval:a},i)}));return su({queries:c})},ju=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=V(),r=(0,a.useMemo)((function(){var r=t.staleTime,o=void 0===r?6e4:r,a=t.refetchInterval,i=void 0===a?6e4:a,l=Ru(t,mu);return e.map((function(e){e.apikey;var t=["items",e.library.path,Ou({},Ru(e,hu))];return Ou({queryKey:t,queryFn:function(t){return function(e,t){return Tu.apply(this,arguments)}(e,n)},staleTime:o,refetchInterval:i},l)}))}),[e,n,t]);return su({queries:r})},Au=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.staleTime,r=void 0===n?36e5:n,o=t.refetchInterval,a=void 0===o?36e5:o,i=Ru(t,yu),l=e.map((function(e){return Ou({queryKey:["permissions",{apikey:e}],queryFn:function(t){return function(e){return Ln.apply(this,arguments)}(e)},staleTime:r,refetchInterval:a},i)}));return su({queries:l})},Pu=function(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.cacheTime,l=void 0===i?1/0:i,c=Ru(o,vu);return t=Ou({queryKey:["semantic",{doi:e}],queryFn:function(t){return function(e){return Nn.apply(this,arguments)}(e)},cacheTime:l},c),function(e,t){const n=V({context:e.context}),r=te(),o=tu(),i=n.defaultQueryOptions(e);i._optimisticResults=r?"isRestoring":"optimistic",i.onError&&(i.onError=C.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=C.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=C.batchCalls(i.onSettled)),iu(i),ru(i,o),ou(o);const[l]=a.useState((()=>new t(n,i))),c=l.getOptimisticResult(i);if(Vc(a.useCallback((e=>r?()=>{}:l.subscribe(C.batchCalls(e))),[l,r]),(()=>l.getCurrentResult()),(()=>l.getCurrentResult())),a.useEffect((()=>{l.setOptions(i,{listeners:!1})}),[i,l]),cu(i,c,r))throw uu(i,l,o);if(au({result:c,errorResetBoundary:o,useErrorBoundary:i.useErrorBoundary,query:l.getCurrentQuery()}))throw c.error;return i.notifyOnChangeProps?c:l.trackResult(c)}(f(t,n,r),Qc)},Iu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,a.useMemo)((function(){var n=t.staleTime,r=void 0===n?18e4:n,o=Ru(t,gu);return e.map((function(e){var t=e.apikey,n=e.path;return Ou({queryKey:["tags",{library:n}],queryFn:function(e){return function(e){return Dn.apply(this,arguments)}({apikey:t,path:n})},staleTime:r},o)}))}),[e,t]);return su({queries:n})},Lu=function(e){var t=(0,a.useMemo)((function(){return Array.from(new Set(e.map((function(e){return e.apikey}))))}),[e]),n=Au(t,{notifyOnChangeProps:["data","isLoading"]}),r=n.some((function(e){return e.isLoading})),o=(0,a.useMemo)((function(){return n.map((function(e){return e.data||[]})).flat(1)}),[n]);return{data:(0,a.useMemo)((function(){return e.filter((function(e){var t,n,r=o.find((function(t){return t.key==e.apikey}));if(r){var a,i,l=r.access,c=(t=e.path.split("/"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eu(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1];return(("users"==u?l.user:(null===(a=l.groups)||void 0===a?void 0:a[s])||(null===(i=l.groups)||void 0===i?void 0:i.all))||{}).write||!1}return!1}))}),[e,o]),isLoading:r}};function Nu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Du(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Du(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Du(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mu=function(e){return e.ITEMS="items",e.NOTES="notes",e.PDFS="pdfs",e}(Mu||{}),zu=[{show:Mu.ITEMS,title:"Items"},{show:Mu.PDFS,title:"PDFs"}];function Fu(e){var t=e.itemList,n=e.onClose,r=e.show;return r==Mu.ITEMS?React.createElement(Dc,{itemList:t,onClose:n}):r==Mu.PDFS?React.createElement(Hc,{itemList:t}):React.createElement(Fc,{itemList:t})}function Uu(e){var t=e.itemList,n=e.onClose,r=Nu((0,a.useState)(Mu.ITEMS),2),i=r[0],l=r[1],c=(0,a.useCallback)((function(e,t,n){return l(e)}),[]);return React.createElement(o.Tabs,{animate:!1,className:de.TABS_MINIMAL,id:"explorer-lists",onChange:c,renderActiveTabPanelOnly:!1,selectedTabId:i},zu.map((function(e){return React.createElement(o.Tab,{key:e.show,id:e.show,panel:React.createElement(Fu,{itemList:t,onClose:n,show:e.show}),title:e.title})})))}const Bu=function(e){var t=e.onClose,n=Nu(Po(),1)[0].dataRequests,r=ju(n,{notifyOnChangeProps:["data"],select:function(e){return e.data}}),i=r.some((function(e){return e.isLoading})),l=(0,a.useMemo)((function(){return r.map((function(e){return e.data||[]})).flat(1)}),[r]),c=(0,a.useMemo)((function(){return st(l)}),[l]);return React.createElement(Kn,null,React.createElement("div",null,i?React.createElement(o.Spinner,null):React.createElement(Uu,{itemList:c,onClose:t})))};function qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xu(e){var t,n,r=e.abstract,i=e.allAbstractsShown,l=(t=tr(i),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return qu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qu(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],s=u.set,f=u.toggle;return(0,a.useEffect)((function(){s(i)}),[i,s]),r?React.createElement("div",{className:"zr-log-item--abstract"},React.createElement(o.Button,{className:de.TEXT_SMALL,"zr-role":"abstract-toggle",icon:c?"chevron-down":"chevron-right",onClick:f,minimal:!0,small:!0},"Abstract"),c?React.createElement("span",{"zr-role":"abstract-text",className:[de.TEXT_SMALL,de.TEXT_AUXILIARY].join(" ")},r):null):null}const Gu=(0,a.memo)((function(e){var t=e.allAbstractsShown,n=e.item,r=e.onClose,o=n.abstract,a=n.children,i=n.inGraph,l=n.itemType,c=n.meta,u=n.publication,s=n.raw,f=n.title;return React.createElement(No,{className:"zr-log-entry","data-in-graph":(0!=i).toString()},React.createElement("div",{"zr-role":"item-header"},React.createElement("div",{"zr-role":"item-details"},React.createElement("span",{className:de.TEXT_AUXILIARY,"data-item-type":l,"zr-role":"item-title"},f),React.createElement("span",{className:de.TEXT_ACCENT_1},c),React.createElement("span",{className:de.TEXT_SECONDARY},u)),React.createElement(hl,{closeDialog:r,inGraph:i,item:s,notes:a.notes,pdfs:a.pdfs})),React.createElement(Xu,{abstract:o,allAbstractsShown:t}))}));function Ku(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return new Promise((function(n){setTimeout((function(){var r=e.items,o=void 0===r?[]:r,a=e.pdfs,i=void 0===a?[]:a,l=e.notes,c=void 0===l?[]:l,u=new Map(window.roamAlphaAPI.q('[\n\t\t:find [(pull ?e [:node/title :edit/time :block/uid {:block/_parents [:edit/time]}])...] \n\t\t:where\n\t\t\t[?e :node/title ?t]\n\t\t\t[(clojure.string/starts-with? ?t "@")]\n\t\t]').filter((function(e){return e.time})).map((function(e){var t,n=e.title,r=e.uid,o=e._parents?Math.max.apply(Math,function(e){if(Array.isArray(e))return Na(e)}(t=e._parents.map((function(e){return e.time})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e.time;return[n,{edited:new Date(Math.max(o,e.time)),uid:r}]}))),s=new Date;s.setHours(0,0,0);var f=new Date;f.setDate(s.getDate()-1),f.setHours(0,0,0);var d=new Date;d.setDate(s.getDate()-t),d.setHours(0,0,0);var p=o.reduce((function(e,t){var n,r=u.get("@"+t.key)||{},o=r.edited,a=void 0===o?null:o,l=r.uid,p=void 0!==l&&l,m=new Date(t.data.dateModified),h=new Date(Math.max.apply(Math,function(e){if(Array.isArray(e))return Ku(e)}(n=[a,m].filter(Be).map((function(e){return Number(e)})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Ku(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ku(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));if(h<=d)return e;var y=function(e,t){var n=t.edited,r=t.inGraph,o=t.notes,a=t.pdfs,i=e.key,l=e.library.type+"s/"+e.library.id,c=e.meta.creatorSummary||"",u=e.meta.parsedDate?"(".concat(new Date(e.meta.parsedDate).getUTCFullYear(),")"):"",s=_t(i,l,{pdfs:a,notes:o});return{abstract:e.data.abstractNote||"",children:s,edited:n,inGraph:r,itemType:e.data.itemType,key:i,location:l,meta:[c,u].filter(Be).join(" "),publication:e.data.publicationTitle||e.data.bookTitle||e.data.university||"",raw:e,title:e.data.title||""}}(t,{edited:h,inGraph:p,notes:c,pdfs:i});return h>s?(e.today.push(y),e.numItems+=1):h>f?(e.yesterday.push(y),e.numItems+=1):h>d&&(e.recent.push(y),e.numItems+=1),e}),{today:[],yesterday:[],recent:[],numItems:0});Object.values(p).filter(Array.isArray).forEach((function(e){return e.sort((function(e,t){return e.edited<t.edited?1:-1}))})),n(p)}),0)}))}function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vu.apply(this,arguments)}function Qu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $u=(0,a.memo)((function(e){var t=e.allAbstractsShown,n=e.items,r=e.label,o=e.onClose;return 0==n.length?null:React.createElement(React.Fragment,null,React.createElement("h5",null,r),n.map((function(e){return React.createElement(Gu,{key:[e.location,e.key].join("/"),allAbstractsShown:t,item:e,onClose:o})})))})),Yu={labelRenderer:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isHandleTooltip:!1}).isHandleTooltip?"Last ".concat(e," days"):""},min:3,max:30,stepSize:1},Zu=(0,a.memo)((function(e){var t=e.itemList,n=e.onClose,r=Qu((0,a.useState)(7),2),i=r[0],l=r[1],c=Qu(tr(!1),2),u=c[0],s=c[1].toggle,f=Qu((0,a.useState)(null),2),d=f[0],p=f[1];return(0,a.useEffect)((function(){t&&Hu(t,i).then((function(e){return p(e)}))}),[i,t]),null==d?React.createElement(o.Spinner,{size:15}):React.createElement("div",{className:"zr-recentitems--datalist"},0==d.numItems?React.createElement(o.NonIdealState,{className:de.TEXT_AUXILIARY,description:"No items to display"}):React.createElement(Do,null,React.createElement($u,{allAbstractsShown:u,items:d.today,label:"Today",onClose:n}),React.createElement($u,{allAbstractsShown:u,items:d.yesterday,label:"Yesterday",onClose:n}),React.createElement($u,{allAbstractsShown:u,items:d.recent,label:"Recently",onClose:n})),React.createElement(zo,null,React.createElement(o.Slider,Vu({onChange:l,value:i},Yu)),React.createElement(o.Switch,{"aria-checked":u,checked:u,label:"Show all abstracts",role:"switch",onChange:s})))}));const Ju=(0,a.memo)((function(e){var t=e.onClose,n=Qu(Po(),1)[0].dataRequests,r=ju(n,{notifyOnChangeProps:["data"],select:function(e){return e.data}}),i=r.some((function(e){return e.isLoading})),l=(0,a.useMemo)((function(){return r.map((function(e){return e.data||[]})).flat(1)}),[r]),c=(0,a.useMemo)((function(){return st(l)}),[l]);return React.createElement(Kn,null,React.createElement("div",{style:{height:"100%"}},i?React.createElement(o.Spinner,null):React.createElement(Zu,{itemList:c,onClose:t})))}));var es=function(){return React.createElement(o.Callout,null,"No writeable libraries were found. Please check that your API key(s) have the permission to write to at least one of the Zotero libraries you use. ",React.createElement("a",{href:"https://alix-lahuec.gitbook.io/zotero-roam/getting-started/prereqs#zotero-api-credentials",target:"_blank",rel:"noreferrer"},"Refer to the extension docs")," for more details.")};function ts(){return ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ts.apply(this,arguments)}var ns={filterable:!1,itemRenderer:function(e,t){var n=t.handleClick;return React.createElement(o.MenuItem,{key:e,onClick:n,text:e})},matchTargetWidth:!0,popoverProps:{minimal:!0,placement:"bottom-right",popoverClassName:de.POPOVER}};const rs=(0,a.memo)((function(e){var t=e.libProps,n=t.currentLibrary.path,r=t.onSelect,a=t.options;return React.createElement(Jn.Select,ts({items:a,onItemSelect:r},ns),React.createElement(o.Button,{className:["zr-dashboard--library-select",de.TEXT_AUXILIARY,de.TEXT_SMALL].join(" "),icon:"folder-open",minimal:!0,text:n}))}));function os(){return os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},os.apply(this,arguments)}function as(e){var t=e.icon,n=void 0===t?null:t,r=e.isSelected,i=e.label,l=e.name,c=e.onClick,u=e.value,s=[l,u].join("_"),f=(0,a.useCallback)((function(){return c(u)}),[c,u]);return React.createElement("span",{className:"zr-sort-option",onClick:f},React.createElement("input",{type:"radio",checked:r,disabled:r,id:s,name:l,onChange:function(){},value:u}),React.createElement(o.Icon,{icon:n}),React.createElement("label",{className:de.TEXT_SMALL,htmlFor:s},i))}const is=function(e){var t=e.name,n=e.onSelect,r=e.options,a=e.selectedOption;return React.createElement(o.ButtonGroup,{minimal:!0},r.map((function(e){return React.createElement(as,os({key:e.value,isSelected:e.value==a,name:t,onClick:n},e))})))};function ls(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cs=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=(e=(0,a.useState)(n),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ls(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return[o,(0,a.useCallback)((function(e){i(e.target.value)}),[])]};class us extends j{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.client.defaultMutationOptions(e),w(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){var e;this.listeners.length||null==(e=this.currentMutation)||e.removeObserver(this)}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0},t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){C.batch((()=>{var t,n,r,o;if(this.mutateOptions&&this.hasListeners())if(e.onSuccess)null==(t=(n=this.mutateOptions).onSuccess)||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(o=this.mutateOptions).onSettled)||r.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var a,i,l,c;null==(a=(i=this.mutateOptions).onError)||a.call(i,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(l=(c=this.mutateOptions).onSettled)||l.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)}))}))}}function ss(e,t,n){const r=function(e,t,n){return k(e)?"function"==typeof t?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:"function"==typeof e?{...t,mutationFn:e}:{...e}}(e,t,n),o=V({context:r.context}),[i]=a.useState((()=>new us(o,r)));a.useEffect((()=>{i.setOptions(r)}),[i,r]);const l=Vc(a.useCallback((e=>i.subscribe(C.batchCalls(e))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),c=a.useCallback(((e,t)=>{i.mutate(e,t).catch(fs)}),[i]);if(l.error&&nu(i.options.useErrorBoundary,[l.error]))throw l.error;return{...l,mutate:c,mutateAsync:l.mutate}}function fs(){}function ds(e){return ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ds(e)}var ps=["key","version"];function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){ys(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ds(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ds(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ds(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vs=function(){var e=V();return ss((function(t){var n=t.into,r=t.library,o=r.apikey,a=r.path,i=t.tags,l=[];return e.getQueriesData(["items",a]).map((function(e){return(e[1]||{}).data||[]})).flat(1).filter(He).filter((function(e){return e.data.tags.length>0})).forEach((function(e){var t=e.data.tags,r=t.findIndex((function(e){return e.tag==n&&(0==e.type||!e.type)}));r>-1&&t.splice(r,1);var o=t.filter((function(e){return!i.includes(e.tag)}));o.length<t.length&&(o.push({tag:n,type:0}),l.push({key:e.data.key,version:e.version,tags:o}))})),Un(l,{apikey:o,path:a})}),{onSettled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=r.into,a=r.library.path,i=r.tags,l=t.reduce((function(e,t){return Ue(t)?e.successful.push(t.value.data):e.failed.push(t.reason),e}),{successful:[],failed:[]});l.successful.length>0&&e.invalidateQueries(["items",a],{refetchType:"all"}),Qt({args:{into:o,tags:i},data:l,error:n,library:a,_type:"tags-modified"})}})};function gs(e){return function(e){if(Array.isArray(e))return Es(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ws(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||ws(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ws(e,t){if(e){if("string"==typeof e)return Es(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Es(e,t):void 0}}function Es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ss(e){var t=e.handleChange,n=e.status,r=e.value,i=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e;null==i||null===(e=i.current)||void 0===e||e.focus()}),[]),React.createElement(o.InputGroup,{disabled:"loading"==n,fill:!0,inputRef:i,onChange:t,placeholder:"Enter a value",value:r})}function Os(e){var t=e.disabled,n=e.library,r=e.tags,i=bs(tr(!1),2),l=i[0],c=i[1],u=c.on,s=c.off,f=bs(cs(""),2),d=f[0],p=f[1],m=vs(),h=m.mutate,y=m.status,v=(0,a.useCallback)((function(){h({into:d,library:n,tags:r},{onSuccess:function(){return s()}})}),[s,n,h,r,d]);return React.createElement(React.Fragment,null,React.createElement(o.MenuItem,{disabled:t,htmlTitle:"Choose custom value...",intent:"primary",multiline:!0,onClick:u,shouldDismissPopover:!1,text:"Choose custom value..."}),React.createElement(o.Dialog,{isOpen:l,lazy:!0,onClose:s},React.createElement("div",{className:o.Classes.DIALOG_BODY},"The following tags will be merged :",React.createElement(o.UL,null,r.map((function(e){return React.createElement("li",{key:e},e)}))),React.createElement(Ss,{handleChange:p,status:y,value:d})),React.createElement("div",{className:o.Classes.DIALOG_FOOTER},React.createElement("div",{className:o.Classes.DIALOG_FOOTER_ACTIONS},React.createElement(o.Button,{disabled:0==d.length,loading:"loading"==y,minimal:!0,onClick:v,text:"OK",title:"Confirm modification of tag(s)"})))))}const ks=function(e){var t=e.library,n=e.options,r=n.roam,i=void 0===r?[]:r,l=n.zotero,c=void 0===l?[]:l,u=(0,a.useMemo)((function(){return[].concat(gs(i),gs(c))}),[i,c]),s=vs(),f=s.mutate,d=s.status,p=(0,a.useMemo)((function(){return["error","success","loading"].includes(d)}),[d]),m=(0,a.useCallback)((function(e){f({into:e,library:t,tags:u})}),[t,f,u]);return React.createElement(React.Fragment,null,i.map((function(e){return React.createElement(o.MenuItem,{key:e,disabled:p,labelElement:React.createElement(o.Tag,{intent:"success",minimal:!0},"In Roam"),multiline:!0,onClick:function(){return m(e)},text:e})})),c.map((function(e){return React.createElement(o.MenuItem,{key:e,disabled:p,multiline:!0,onClick:function(){return m(e)},text:e})})),React.createElement(o.MenuDivider,null),React.createElement(Os,{disabled:["error","success","loading"].includes(d),library:t,tags:u}))};function Rs(e){return function(e){if(Array.isArray(e))return xs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xs(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ts=function(e){var t,n=e.deleteTags,r=void 0===n||n,i=e.library,l=e.mergeAs,c=void 0===l||l,u=e.suggestion,s=(t=V(),ss((function(e){var n=e.library,r=n.apikey,o=n.path,a=e.tags,i=(t.getQueryData(["tags",{library:o}])||{}).lastUpdated;return function(e,t,n){return En.apply(this,arguments)}(a,{apikey:r,path:o},void 0===i?0:i)}),{onSettled:function(e,n,r,o){var a=r.library.path,i=r.tags;n||t.invalidateQueries(["items",a],{refetchType:"all"},{throwOnError:!0}),Qt({args:{tags:i},error:n,library:a,_type:"tags-deleted"})}})),f=s.mutate,d=s.status,p=(0,a.useCallback)((function(){f({library:i,tags:[].concat(Rs(u.use.roam),Rs(u.use.zotero))})}),[u.use,i,f]);return React.createElement(o.Menu,{className:de.TEXT_SMALL},c&&u.type?React.createElement(o.MenuItem,{disabled:["loading","success"].includes(d),icon:"group-objects",text:"Merge as"},React.createElement(ks,{library:i,options:u.use})):null,r?React.createElement(o.MenuItem,{disabled:["loading","success"].includes(d),icon:"success"==d?"tick":"trash",intent:"danger",text:"success"==d?"Deleted":"Delete tag(s)",onClick:p}):null)},_s=function(e){var t=e.text,n=e.uid,r=void 0===n?null:n;return React.createElement(o.Tag,{active:!0,intent:"primary",minimal:!0,multiline:!0,"data-tag-source":"roam","data-tag":t,"data-uid":r},t)},Cs=function(e){var t=e.tagElement,n=t.tag,r=t.meta,a=r.numItems,i=r.type,l=void 0===i?0:i;return React.createElement(o.Tag,{active:!0,intent:"warning",minimal:!0,multiline:!1,"data-tag-source":"zotero","data-tag":n,"data-tag-type":l},n+" ("+a+")")};var js=function(e){return e.ALL="all",e.SUGGESTIONS="suggestions",e}({}),As=function(e){return e.ALL="all-items",e.SUGGESTIONS="suggestions",e}({}),Ps=function(e){return e.ALPHABETICAL="alphabetical",e.ROAM="roam",e.USAGE="usage",e}({});function Is(e){return Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Is(e)}var Ls=["roam"];function Ns(e){return function(e){if(Array.isArray(e))return Fs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ms(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Is(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Is(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zs(e,t){if(e){if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fs(e,t):void 0}}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Us(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count_roam,n=void 0!==t&&t;return e.zotero.reduce((function(e,t){return e+t.meta.numItems}),0)+(n?e.roam.length:0)}function Bs(e){return 1==e.zotero.length&&(0==e.roam.length||1==e.roam.length&&e.zotero[0].tag==e.roam[0].title)}function qs(e){var t,n=e.roam.map((function(e){return e.title})),r=e.zotero.reduce((function(e,t){return n.includes(t.tag)||e.includes(t.tag)||e.push(t.tag),e}),[]),o={roam:n,zotero:r};return 0==n.length?1==e.zotero.length?{recommend:r[0],type:null,use:o}:1==r.length?{recommend:r[0],type:"auto",use:o}:{recommend:(null===(t=e.zotero.find((function(e){return 0==e.meta.type})))||void 0===t?void 0:t.tag)||null,type:"manual",use:o}:1==n.length?0==r.length?{recommend:n[0],type:1==e.zotero.length?null:"auto",use:o}:{recommend:n[0],type:"auto",use:o}:{recommend:null,type:"manual",use:o}}function Xs(e){return new Promise((function(t){setTimeout((function(){var n=Object.keys(e).map((function(t){var n,r,o=(n=Array.from(new Set([t,t.toUpperCase()])),window.roamAlphaAPI.q("[\n\t\t:find (pull ?e [:node/title :block/uid]) \n\t\t:in $ [?k ...] \n\t\t:where\n\t\t\t[?e :node/title ?title]\n\t\t\t[(clojure.string/starts-with? ?title ?k)]\n\t\t]",n).flat(1)).sort((function(e,t){return e.title>t.title?-1:1})),a=Array.from(e[t]),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zs(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(o);try{var l=function(){var e=r.value,t=a.findIndex((function(t){return Mt(e.title,t.token,{match:"exact"})}));if(t>=0){var n=a[t],o=n.roam,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,Ls);a[t]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(n),!0).forEach((function(t){Ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({roam:[].concat(Ns(o),[e])},i)}};for(i.s();!(r=i.n()).done;)l()}catch(e){i.e(e)}finally{i.f()}return a})).flat(1);t(n)}),0)}))}const Gs=(0,a.memo)((function(e){var t=e.entry,n=e.library,r=Bs(t),a=qs(t),i=Us(t);return React.createElement(No,{className:"zr-tag-entry","data-token":t.token,"in-graph":(t.roam.length>0).toString()},React.createElement("div",{"zr-role":"item-header"},React.createElement("div",{"zr-role":"item-info"},t.roam.length>0?React.createElement(o.Icon,{htmlTitle:"This tag exists in Roam ("+t.roam.map((function(e){return e.title})).join(", ")+")",icon:"tick-circle",intent:"success",size:14}):React.createElement(o.Icon,{icon:"blank"}),React.createElement("span",{className:de.TEXT_AUXILIARY,"zr-role":"title"},t.token),!r&&React.createElement("span",{className:de.TEXT_SMALL,"zr-role":"item-additional"},t.roam.map((function(e){return React.createElement(_s,{key:e.title,text:e.title,uid:e.uid})})),t.zotero.map((function(e){var t=e.tag,n=e.meta.type;return React.createElement(Cs,{key:[t,n].join("_"),tagElement:e})})))),React.createElement("span",{className:[de.TEXT_SECONDARY,de.TEXT_SMALL].join(" "),"zr-role":"item-count"},Nt(i,"item")),React.createElement("div",{"zr-role":"item-actions"},React.createElement(Ts,{deleteTags:!0,library:n,mergeAs:!0,suggestion:a}))))}));function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ks.apply(this,arguments)}function Hs(e){return function(e){if(Array.isArray(e))return Vs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Vs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vs(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qs(e){var t=e.library,n=e.suggestion,r=n.recommend,i=n.use,l=vs(),c=l.mutate,u=l.status,s=(0,a.useCallback)((function(){c({into:r,library:t,tags:[].concat(Hs(i.roam),Hs(i.zotero))})}),[t,c,r,i]),f=(0,a.useMemo)((function(){return"error"==u?{disabled:!0,icon:"warning",intent:o.Intent.DANGER}:"success"==u?{disabled:!0,icon:"tick",intent:o.Intent.SUCCESS,text:"Merged"}:{icon:"many-to-one"}}),[u]);return React.createElement(o.Button,Ks({active:!0,className:["zr-tag-suggestion--auto-merge",de.TEXT_SMALL].join(" "),intent:"primary",loading:"loading"==u,onClick:s,text:"Auto-merge",title:"Suggestion : "+r},f))}function Ws(e){var t=e.library,n=e.suggestion;return React.createElement(mi,{content:React.createElement(o.Menu,null,React.createElement(ks,{library:t,options:n.use})),interactionKind:"click",popoverClassName:de.POPOVER},React.createElement(o.Button,{className:["zr-tag-suggestion--merge-as",de.TEXT_SMALL].join(" "),intent:"primary",rightIcon:"caret-down",text:"Merge as ..."}))}const $s=function(e){var t=e.entry,n=e.library,r=qs(t);switch(r.type){case"auto":case"manual":return React.createElement(o.ButtonGroup,{minimal:!0},"auto"==r.type&&React.createElement(Qs,{library:n,suggestion:r}),"manual"==r.type&&React.createElement(Ws,{library:n,suggestion:r}),React.createElement(mi,{content:React.createElement(Ts,{library:n,mergeAs:"auto"==r.type,suggestion:r}),interactionKind:"click",placement:"bottom-start",popoverClassName:de.POPOVER},React.createElement(o.Button,{icon:"more"})));default:return null}},Ys=(0,a.memo)((function(e){var t=e.entry,n=e.library;return React.createElement(No,{className:"zr-tag-suggestion","data-token":t.token,"in-graph":(t.roam.length>0).toString()},React.createElement("div",{"zr-role":"item-header"},React.createElement("span",{"zr-role":"item-info"},t.roam.length>0?React.createElement(o.Icon,{htmlTitle:"This tag exists in Roam ("+t.roam.map((function(e){return e.title})).join(", ")+")",icon:"tick-circle",intent:"success",size:14}):React.createElement(o.Icon,{icon:"blank",size:14}),React.createElement("span",{className:de.TEXT_AUXILIARY,"zr-role":"title"},t.token)),React.createElement(o.Tag,{htmlTitle:t.zotero.map((function(e){return e.tag})).join(" - "),intent:"warning",icon:"tag",minimal:!0,"zr-role":"item-count"},Nt(t.zotero.length,"tag")),React.createElement("div",{"zr-role":"item-actions"},React.createElement($s,{entry:t,library:n}))))})),Zs=(0,a.memo)((function(e){var t=e.stats;if(t){var n=t.nTags,r=t.nRoam,a=t.nAuto,i=t.nTotal,l=Math.round(a/n*100)/100,c=Math.round(r/i*100)/100;return React.createElement("div",{className:[de.TEXT_AUXILIARY,de.TEXT_SMALL].join(" "),"zr-role":"list-stats"},React.createElement("span",{"zr-role":"stats-text"},"Zotero has ",n," tags, matched in ",i," groups"),React.createElement("span",{"zr-role":"stats-figures"},React.createElement("span",{"zr-role":"stats-bar"},"Automatic : ",100*l,"%",React.createElement(o.ProgressBar,{animate:!1,intent:"warning",stripes:!1,value:l})),React.createElement("span",{"zr-role":"stats-bar"},"In Roam : ",100*c,"%",React.createElement(o.ProgressBar,{animate:!1,intent:"primary",stripes:!1,value:c}))))}return null}));function Js(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||ef(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ef(e,t){if(e){if("string"==typeof e)return tf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tf(e,t):void 0}}function tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nf=[{icon:"sort-desc",label:"Most Used",value:Ps.USAGE},{icon:"sort-alphabetical",label:"Name",value:Ps.ALPHABETICAL},{icon:"star",label:"In Roam",value:Ps.ROAM}];const rf=(0,a.memo)((function(e){var t=e.filter,n=e.items,r=e.library,i=Ac({itemsPerPage:30}),l=i.currentPage,c=i.pageLimits,u=i.setCurrentPage,s=Js((0,a.useState)(Ps.USAGE),2),f=s[0],d=s[1],p=Js((0,a.useState)(),2),m=p[0],h=p[1],y=Js((0,a.useState)(),2),v=y[0],g=y[1];(0,a.useEffect)((function(){n&&(Xs(n).then((function(e){h(e),g((function(){return(t=e).map((function(e){return{nTags:e.zotero.length,nAuto:0==e.zotero.length?0:e.zotero.filter((function(e){return 1==e.meta.type})).length,in_roam:e.roam.length>0?1:0}})).reduce((function(e,t){return e.nTags+=t.nTags,e.nAuto+=t.nAuto,e.nRoam+=t.in_roam,e}),{nTags:0,nAuto:0,nRoam:0,nTotal:t.length});var t}))})),u(1))}),[n,u]);var b,w=(0,a.useMemo)((function(){return m?t==js.SUGGESTIONS?m.filter((function(e){return!Bs(e)})):m:[]}),[t,m]),E=(0,a.useCallback)((function(e){d((function(){return e})),u(1)}),[u]),S=(0,a.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ps.ALPHABETICAL,n=Ns(e);switch(t){case"usage":return n.sort((function(e,t){return Us(e)>Us(t)?-1:1}));case"roam":return n.sort((function(e,t){return e.roam.length>t.roam.length?-1:1}));default:return n}}(w,f)}),[w,f]);return null==m?React.createElement(o.Spinner,{size:15}):React.createElement("div",{className:"zr-tagmanager--datalist"},React.createElement(zo,null,React.createElement(is,{name:"zr-tagmanager-sort-"+t,onSelect:E,options:nf,selectedOption:f}),React.createElement(Mo,{currentPage:l,itemsPerPage:30,nbItems:w.length,setCurrentPage:u})),React.createElement("div",{className:"zr-tagmanager--datalist--contents"},0==S.length?React.createElement(o.NonIdealState,{className:de.TEXT_AUXILIARY,description:"No items to display"}):React.createElement(Do,null,S.slice.apply(S,(b=c,function(e){if(Array.isArray(e))return tf(e)}(b)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(b)||ef(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return t==js.SUGGESTIONS?React.createElement(Ys,{key:e.token,entry:e,library:r}):React.createElement(Gs,{key:e.token,entry:e,library:r})})))),t==js.ALL&&React.createElement(Zs,{stats:v}))}));function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?af(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lf=[{id:As.SUGGESTIONS,filterValue:js.SUGGESTIONS,title:"Suggestions"},{id:As.ALL,filterValue:js.ALL,title:"All tags"}];function cf(e){var t=e.items,n=e.libProps,r=of((0,a.useState)("suggestions"),2),i=r[0],l=r[1],c=(0,a.useCallback)((function(e,t,n){return l(e)}),[]);return React.createElement(o.Tabs,{animate:!1,className:de.TABS_MINIMAL,id:"tag-lists",onChange:c,renderActiveTabPanelOnly:!1,selectedTabId:i},lf.map((function(e){return React.createElement(o.Tab,{key:e.id,id:e.id,panel:React.createElement(rf,{filter:e.filterValue,items:t,library:n.currentLibrary}),title:e.title})})),React.createElement(o.Tabs.Expander,null),React.createElement(rs,{libProps:n}))}function uf(e){var t=e.libraries,n=of((0,a.useState)(t[0]),2),r=n[0],i=n[1],l=Iu([r],{notifyOnChangeProps:["data"],select:function(e){return e.data}})[0],c=l.isLoading,u=l.data,s=(0,a.useMemo)((function(){return t.map((function(e){return e.path}))}),[t]),f=(0,a.useCallback)((function(e){return i(t.find((function(t){return t.path==e})))}),[t]),d=(0,a.useMemo)((function(){return{currentLibrary:r,onSelect:f,options:s}}),[f,s,r]);return React.createElement("div",null,c?React.createElement(o.Spinner,null):React.createElement(cf,{items:u,libProps:d}))}const sf=function(){var e=of(Po(),1)[0].libraries,t=Lu(e),n=t.data,r=t.isLoading;return React.createElement(Kn,null,r?React.createElement(o.Spinner,null):0==n.length?React.createElement(es,null):React.createElement(uf,{libraries:n}))};function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ff.apply(this,arguments)}function df(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pf=function(e){return e.EXPLORER="explorer",e.RECENT_ITEMS="recent-items",e.TAG_MANAGER="tag-manager",e}(pf||{}),mf={className:"zr-dashboard-tab",panelClassName:"zr-dashboard-panel"},hf=(0,a.memo)((function(e){var t,n,r=e.defaultTab,i=e.onClose,l=(t=(0,a.useState)(r),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return df(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?df(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1];(0,a.useEffect)((function(){u(r)}),[r]);var s=(0,a.useCallback)((function(e,t,n){return u(e)}),[]);return React.createElement(o.Tabs,{animate:!1,className:[de.TABS,"zr-dashboard-tabs-wrapper"].join(" "),id:"zr-dashboard--tabs",onChange:s,selectedTabId:c,vertical:!0},React.createElement(o.Tab,ff({id:"recent-items",panel:React.createElement(Ju,{onClose:i}),title:React.createElement(React.Fragment,null,React.createElement(o.Icon,{htmlTitle:"Recent Items",icon:"history"}),React.createElement("span",null,"Recent Items"))},mf)),React.createElement(o.Tab,ff({id:"tag-manager",panel:React.createElement(sf,null),title:React.createElement(React.Fragment,null,React.createElement(o.Icon,{htmlTitle:"Tag Manager",icon:"tag"}),React.createElement("span",null,"Tag Manager"))},mf)),React.createElement(o.Tabs.Expander,null),React.createElement(o.Tab,ff({id:"explorer",panel:React.createElement(Bu,{onClose:i}),title:React.createElement(React.Fragment,null,React.createElement(o.Icon,{htmlTitle:"Explorer",icon:"code-block"}),React.createElement("span",null,"Explorer"))},mf)))}));const yf=(0,a.memo)((function(e){var t=e.isOpen,n=e.onClose;return React.createElement(me,{className:"dashboard",isOpen:t,label:"zoteroRoam Dashboard",onClose:n},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement("div",{className:"zr-dashboard--main"},React.createElement(hf,{defaultTab:pf.RECENT_ITEMS,onClose:n}))))}));function vf(e){return vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(e)}function gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gf(Object(n),!0).forEach((function(t){wf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wf(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==vf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==vf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===vf(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sf=new Zn({beforeUpdate:function(e,t){!0===e.cacheEnabled&&!1===t.cacheEnabled&&setTimeout((function(){var e,t;null===(e=window.zoteroRoam)||void 0===e||null===(t=e.clearDataCache)||void 0===t||t.call(e)}),1e3)}}),Of=Sf.Provider,kf=Sf.useSettings,Rf=function(e){return e.DISABLED="disabled",e.OFF="off",e.ON="on",e}({});function xf(){return xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xf.apply(this,arguments)}function Tf(e){return function(e){if(Array.isArray(e))return jf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Cf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cf(e,t){if(e){if("string"==typeof e)return jf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jf(e,t):void 0}}function jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Af=React.createElement(o.Tag,{intent:"primary",minimal:!0},"Beta"),Pf=function(){return"true"==document.getElementsByTagName("body")[0].getAttribute("zr-dark-theme")};function If(){var e=_f(kf(),1)[0].darkTheme,t=_f(tr(e),2),n=t[0],r=t[1],i=r.set,l=r.toggle,c=(0,a.useCallback)((function(){var e=Pf();document.getElementsByTagName("body")[0].setAttribute("zr-dark-theme",(!e).toString()),l()}),[l]);return(0,a.useEffect)((function(){i(Pf())}),[i]),React.createElement(o.Switch,{alignIndicator:"right",checked:n,inline:!1,label:"Dark Theme",onChange:c})}var Lf=(0,a.memo)((function(){var e=Jy().version;return React.createElement("div",{className:"zr-icon-tooltip-footer"},React.createElement(If,null),React.createElement("span",{className:"zr-icon-tooltip-footer--row"},React.createElement("a",{href:"https://alix-lahuec.gitbook.io/zotero-roam/",target:"_blank",rel:"noreferrer"},"Docs"),React.createElement(o.Tag,{className:"zr-version-tag"},"v",e)))}));function Nf(e){var t=e.queries,n=t.map((function(e){return e.dataUpdatedAt})).filter(Be),r=n.length>0?React.createElement("span",{"zr-role":"timestamp"},Pt(Math.max.apply(Math,Tf(n)))):null,i=t.some((function(e){return e.isFetching})),l=t.every((function(e){return e.isSuccess})),c=t.some((function(e){return e.isLoadingError})),u=t.some((function(e){return e.isRefetchError})),s=(0,a.useCallback)((function(){t.forEach((function(e){e.refetch()}))}),[t]),f="blank",d={};return l?(f="tick",d={intent:o.Intent.SUCCESS,color:"#00e676",title:"The last update was successful"}):c?(f="delete",d={intent:o.Intent.DANGER,title:"The extension was unable to retrieve the data"}):u&&(f="error",d={intent:o.Intent.WARNING,title:"The last update was unsuccessful"}),React.createElement("span",{"zr-role":"status"},r,i?React.createElement(o.Spinner,{size:16}):React.createElement(o.Icon,xf({size:16,icon:f},d)),React.createElement(o.Button,{minimal:!0,onClick:s,disabled:i,title:"Refresh data"},React.createElement(o.Icon,{size:16,icon:"refresh"})))}function Df(e){var t=e.queries;return React.createElement("ul",{className:o.Classes.LIST_UNSTYLED},Object.keys(t).map((function(e){return React.createElement("li",{className:"zr-queries-status",key:e},React.createElement("span",{"zr-role":"entry"},e),React.createElement(Nf,{queries:t[e]}))})))}var Mf=(0,a.memo)((function(e){var t=e.openDashboard,n=e.openLogger,r=e.openSearchPanel,i=e.openSettingsPanel,l=e.status,c=e.toggleExtension,u=_f(Po(),1)[0],s=u.apiKeys,f=u.dataRequests,d=u.libraries,p=(0,a.useMemo)((function(){return{enabled:l==Rf.ON,notifyOnChangeProps:["dataUpdatedAt","status","isFetching"]}}),[l]),m=ju(f,p),h=Au(s,p),y=Iu(d,p),v=Cu(d,p),g=[].concat(Tf(h),Tf(m),Tf(y),Tf(v)).some((function(e){return e.isLoading})),b=[].concat(Tf(h),Tf(m),Tf(y),Tf(v)).some((function(e){return"fetching"==e.fetchStatus})),w=[].concat(Tf(h),Tf(m),Tf(y),Tf(v)).some((function(e){return e.isLoadingError})),E=m.some((function(e){return e.data})),S=(0,a.useMemo)((function(){return w?"error":g&&b?"loading":"ready"}),[b,g,w]),O=(0,a.useMemo)((function(){return l==Rf.DISABLED?"warning-sign":w?"issue":"manual"}),[w,l]),k=(0,a.useMemo)((function(){return{Permissions:h,Collections:v,Tags:y,Items:m}}),[v,m,h,y]),R=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,React.createElement("span",null,React.createElement("strong",null,"Status : ")," ",l),l==Rf.DISABLED&&React.createElement(o.Button,{"aria-haspopup":"dialog",icon:"warning-sign",intent:"warning",minimal:!0,onClick:i,text:"Click to finish setting up zoteroRoam",title:"Click to open zoteroRoam settings"}),React.createElement(o.Divider,null),l==Rf.ON?React.createElement(React.Fragment,null,React.createElement("span",{className:"zr-icon-tooltip-body"},React.createElement(Df,{queries:k})),React.createElement(o.Divider,null)):null,React.createElement(Lf,null))}),[i,k,l]),x=(0,a.useMemo)((function(){return React.createElement(o.Menu,null,React.createElement(o.MenuItem,{text:"Settings",icon:"settings",onClick:i}),React.createElement(o.MenuItem,{disabled:!E,text:"Dashboard",icon:"dashboard",labelElement:Af,onClick:t}),React.createElement(o.MenuItem,{disabled:!E,text:"Search in library",icon:"search",onClick:r}),React.createElement(o.MenuItem,{text:"View logs",icon:"console",onClick:n}))}),[E,t,n,r,i]);return React.createElement(o.Tooltip,{popoverClassName:"zr-icon-tooltip",usePortal:!1,content:R,placement:"auto",interactionKind:"hover",hoverOpenDelay:450,hoverCloseDelay:450},React.createElement(o.ContextMenu,{content:x},React.createElement(o.Button,{id:"zotero-roam-icon","data-extension-status":l,"data-fetching-status":S,disabled:l==Rf.DISABLED,icon:O,minimal:!0,small:!0,onClick:c,"aria-haspopup":"true",title:l==Rf.DISABLED?"zoteroRoam is disabled":"Click to toggle the zoteroRoam extension"})))}));const zf=Mf;var Ff=n(351),Uf=n.n(Ff);function Bf(e){return Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(e)}function qf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qf(Object(n),!0).forEach((function(t){Gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gf(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Bf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Bf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Bf(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hf=new Zn,Vf=Hf.Provider,Qf=Hf.useSettings,Wf=[{label:"Citekey",value:"citekey"},{label:"Zettlr",value:"zettlr"}],$f={preset:"Preset",custom:"Custom template"},Yf=[{label:"Citation",value:"citation"},{label:"Citekey",value:"citekey"},{label:"Citekey (raw)",value:"key"},{label:"Page reference",value:"pageref"},{label:"Popover",value:"popover"},{label:"Tag",value:"tag"}],Zf={preset:"Preset",custom:"Custom template"},Jf=React.createElement(React.Fragment,null,"Replacements available:",React.createElement(kr,{item:"{{authors}}",text:"Author et al."}),React.createElement(kr,{item:"{{citekey}}",text:"@someCitekey"}),React.createElement(kr,{item:"{{key}}",text:"someCitekey"}),React.createElement(kr,{item:"{{summary}}",text:"Author et al. (2023)"}),React.createElement(kr,{item:"{{summary_or_key}}"}),React.createElement(kr,{item:"{{title}}"}),React.createElement(kr,{item:"{{year}}"}));function ed(e){return ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ed(e)}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach((function(t){rd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ed(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ed(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ed(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ad(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ad(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var id="display",ld={selectClass:de.TRIBUTE_SELECTED,containerClass:de.TRIBUTE,lookup:id,menuShowMinLength:1,menuItemLimit:25,menuItemTemplate:function(e){var t=e.original,n=t.itemType,r=t.display;return'\n        <span data-item-type="'.concat(n,'"></span>\n        <span class="').concat(de.TRIBUTE_DETAILS,'">').concat(r,"</span>\n        ")},noMatchTemplate:function(){return'<span style:"visibility: hidden;"></span>'},requireLeadingSpace:!0,selectTemplate:function(e){return e.original.value},searchOpts:{pre:"<span>",post:"</span>",skip:!0}};const cd=(0,a.memo)((function(){var e=od(Po(),1)[0].dataRequests,t=od(Qf(),1)[0],n=t.trigger,r=t.display_char,o=t.display_use,i=void 0===o?"preset":o,l=t.display,c=void 0===l?"citekey":l,u=t.format_char,s=t.format_use,f=void 0===s?"preset":s,d=t.format,p=void 0===d?"citation":d,m=(0,a.useMemo)((function(){return"preset"==i?c:r}),[c,r,i]),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"citekey",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"citekey",r=(0,a.useCallback)((function(e){return e.data?e.data.filter(He).sort((function(e,t){return e.data.dateModified>t.data.dateModified?-1:1})).map((function(e){return{key:e.key,itemType:e.data.itemType,source:"zotero",value:Et(e,t,{accent_class:de.TEXT_ACCENT_1})||e.key,display:Et(e,n,{accent_class:de.TEXT_ACCENT_1})||e.key}})):[]}),[n,t]),o=ju(e,{select:r,notifyOnChangeProps:["data"]});return(0,a.useMemo)((function(){return o.map((function(e){return e.data||[]})).flat(1)}),[o])}(e,(0,a.useMemo)((function(){return"preset"==f?p:u}),[p,u,f]),m)||[],y=(0,a.useMemo)((function(){return nd(nd({trigger:n},ld),{},{values:function(e,t){t(h.filter((function(t){return t[id].toLowerCase().includes(e.toLowerCase())})))}})}),[h,n]),v=(0,a.useCallback)((function(){var e=document.querySelector("textarea.rm-block-input");e&&null==e.getAttribute("zotero-tribute")&&(document.querySelectorAll(".".concat(de.TRIBUTE)).forEach((function(e){return e.remove()})),e.setAttribute("zotero-tribute","active"),new(Uf())(y).attach(e),e.addEventListener("tribute-replaced",(function(t){if("zotero"==t.detail.item.original.source){var n=t.detail.context.mentionTriggerChar+t.detail.context.mentionText,r=t.detail.context.mentionPosition,o=t.detail.item.original.value,a=t.target.defaultValue,i=vt(n),l=new RegExp(i,"g"),c=a.replaceAll(l,(function(e,t){return t==r?o:e}));Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(e,c);var u=new Event("input",{bubbles:!0});e.dispatchEvent(u)}})))}),[y]);return(0,a.useEffect)((function(){var e=new MutationObserver(v);return e.observe(document,{childList:!0,subtree:!0}),function(){e.disconnect();try{document.querySelector(".".concat(de.TRIBUTE)).remove()}catch(e){}}}),[v]),null}));function ud(e){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(e)}function sd(e){return function(e){if(Array.isArray(e))return hd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||md(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(n),!0).forEach((function(t){pd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ud(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ud(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function md(e,t){if(e){if("string"==typeof e)return hd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hd(e,t):void 0}}function hd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yd=new Zn,vd=yd.Provider,gd=yd.useSettings;function bd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ed=(0,a.memo)((function(e){var t,n,r=e.coords,i=e.isOpen,l=e.itemsMap,c=e.onClose,u=e.target,s=bd(Si(),1)[0],f=bd(Ni(),1)[0],d=bd(Ki(),1)[0],p=bd(il(),1)[0],m=bd(tr(!1),2),h=m[0],y=m[1],v=y.on,g=y.off,b=null==u||null===(t=u.parentElement)||void 0===t?void 0:t.dataset.linkTitle,w=(null==u||null===(n=u.parentElement)||void 0===n?void 0:n.dataset.linkUid)||!1,E=(0,a.useMemo)((function(){return b?l.get(b).data:null}),[b,l]),S=(0,a.useCallback)((function(){setTimeout((function(){try{document.querySelector("body > .bp3-context-menu+.bp3-portal").style.display="none"}catch(e){}}),100)}),[]),O=(0,a.useCallback)((function(){if(E){var e=E.children,t=e.pdfs,n=void 0===t?[]:t,r=e.notes,o=void 0===r?[]:r;Qa({item:E.raw,pdfs:n,notes:o},w,f,p,d,s),c()}}),[s,E,f,d,c,w,p]),k=(0,a.useCallback)((function(){g(),c()}),[c,g]),R=(0,a.useMemo)((function(){if(E&&0!=E.children.pdfs.length){var e=E.location.startsWith("groups/")?E.location:"library";return React.createElement(React.Fragment,null,React.createElement(o.MenuDivider,{title:"PDF Attachments"}),E.children.pdfs.map((function(t,n){var r=["linked_file","imported_file","imported_url"].includes(t.data.linkMode)?"zotero://open-pdf/".concat(e,"/items/").concat(t.data.key):t.data.url;return React.createElement(o.MenuItem,{key:n,className:"zr-context-menu--option",href:r,icon:"paperclip",rel:"noreferrer",target:"_blank",text:t.data.filename||t.data.title})})))}return null}),[E]),x=(0,a.useMemo)((function(){return E&&0!=E.children.notes.length?React.createElement(React.Fragment,null,React.createElement(o.MenuDivider,null),React.createElement(o.MenuItem,{className:"zr-context-menu--option",icon:"comment",text:"Show notes",onClick:v,shouldDismissPopover:!1}),React.createElement(_l,{isOpen:h,notes:E.children.notes,onClose:k})):null}),[k,h,E,v]);return React.createElement(o.Overlay,{isOpen:i,hasBackdrop:!1,lazy:!1,onClose:c,onOpening:S,usePortal:!1},React.createElement("div",{className:["zr-context-menu--wrapper",o.Classes.POPOVER].join(" "),style:r},React.createElement(o.Menu,{className:"zr-context-menu"},React.createElement(o.MenuItem,{className:"zr-context-menu--option",icon:"add",text:"Import metadata",intent:"primary",onClick:O}),React.createElement(o.MenuDivider,null),E&&React.createElement(o.MenuItem,{className:"zr-context-menu-option",icon:"application",text:"Open in Zotero",href:E.zotero.local}),E&&React.createElement(o.MenuItem,{className:"zr-context-menu-option",icon:"cloud",text:"Open in Zotero (web)",href:E.zotero.web}),R,x)))}));const Sd=(0,a.memo)((function(){var e,t,n,o,i=Jy().portalId,l=bd(Po(),1)[0].dataRequests,c=bd(kf(),1)[0].render_inline,u=bd((0,a.useState)(!1),2),s=u[0],f=u[1],d=bd((0,a.useState)({left:0,top:0}),2),p=d[0],m=d[1],h=bd((0,a.useState)(null),2),y=h[0],v=h[1],g=(e=l,t=(0,a.useCallback)((function(e){if(e.data){var t=st(e.data);return t.items.map((function(e){var n=e.data.url,r=Lt(e.data.DOI),o=n?{href:n,title:n}:!!r&&{href:"https://doi/org/"+r,title:r},a=e.library.type+"s/"+e.library.id,i=_t(e.data.key,a,{pdfs:t.pdfs,notes:t.notes});return["@"+e.key,{citation:Et(e,"inline")||"@"+e.key,data:{children:i,location:a,raw:e,weblink:o,zotero:{local:kt(e,{format:"target"}),web:xt(e,{format:"target"})}}}]}))}return[]}),[]),n=ju(e,{notifyOnChangeProps:["data"],select:t}),o=(0,a.useMemo)((function(){return n.map((function(e){return e.data||[]})).flat(1)}),[n]),new Map(o)),b=(0,a.useCallback)((function(e){e.preventDefault();var t=e.pageX,n=e.pageY,r=e.target;m({left:t,top:n}),v(r),f(!0)}),[]),w=(0,a.useCallback)((function(){f(!1),v(null)}),[]),E=(0,a.useCallback)((function(){for(var e=document.querySelectorAll("span[data-link-title^='@']"),t=0;t<e.length;t++){var n=e[t],r=n.getElementsByClassName("rm-page-ref")[0],o=n.getAttribute("data-link-title"),a=n.getAttribute("data-in-library"),i=g.has(o).toString();null!=a&&a==i||(n.setAttribute("data-in-library",i),(null!=a||"false"!=i)&&("true"==i?(1==c&&(r.textContent=g.get(o).citation),r.addEventListener("contextmenu",b)):(r.textContent=o,r.removeEventListener("contextmenu",b))))}}),[g,c,b]),S=(0,a.useCallback)((function(){document.querySelectorAll("span[data-link-title^='@'][data-in-library]").forEach((function(e){e.removeAttribute("data-in-library");var t=e.getElementsByClassName("rm-page-ref")[0];t.textContent=e.getAttribute("data-link-title"),t.removeEventListener("contextmenu",b)}))}),[b]);return(0,a.useEffect)((function(){var e=setInterval((function(){E()}),1e3);return function(){clearInterval(e),S()}}),[E,S]),(0,a.useEffect)((function(){document.querySelectorAll("span[data-link-title^='@'][data-in-library]").forEach((function(e){var t=e.getElementsByClassName("rm-page-ref")[0],n=e.getAttribute("data-link-title"),r="true"==e.getAttribute("data-in-library");t.textContent=r?g.get(n).citation:n}))}),[c,g]),(0,r.createPortal)(React.createElement(Ed,{coords:p,isOpen:s,itemsMap:g,onClose:w,target:y}),document.getElementById(i))}));function Od(e){return Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(e)}function kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kd(Object(n),!0).forEach((function(t){xd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Od(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Od(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Od(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _d=new Zn,Cd=_d.Provider,jd=_d.useSettings,Ad=[{label:"Metadata import",value:"addMetadata"},{label:"Notes import",value:"importNotes"},{label:"Item details",value:"viewItemInfo"},{label:"Zotero link (local)",value:"openZoteroLocal"},{label:"Zotero link (web)",value:"openZoteroWeb"},{label:"PDF links",value:"pdfLinks"},{label:"Scite Badge",value:"sciteBadge"},{label:"Connected Papers link",value:"connectedPapers"},{label:"Semantic Scholar link",value:"semanticScholar"},{label:"Google Scholar link",value:"googleScholar"},{label:"Citations & References",value:"citingPapers"}],Pd=[{label:"Default",value:"default"},{label:"Always",value:!0},{label:"Never",value:!1}];const Id=function(e){var t=e.action,n=e.text;return React.createElement(o.Tag,{className:"zr-shortcut-sequence",htmlTitle:"Press "+n+" to "+t,minimal:!0},n)};function Ld(e){return Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ld(e)}function Nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nd(Object(n),!0).forEach((function(t){Md(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Md(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ld(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ld(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ld(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fd=new Zn,Ud=Fd.Provider,Bd=Fd.useSettings,qd=function(e){if(""==e)return!0;try{return(0,o.parseKeyCombo)(e),!0}catch(e){return!1}};function Xd(e){return Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(e)}function Gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gd(Object(n),!0).forEach((function(t){Hd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Xd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Xd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Xd(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qd=new Zn,Wd=Qd.Provider,$d=Qd.useSettings,Yd=[{label:"Citation",value:"citation"},{label:"Citekey",value:"citekey"},{label:"Page reference",value:"page-reference"},{label:"Key",value:"raw"},{label:"Tag",value:"tag"}],Zd={preset:"Preset",template:"Custom template"},Jd=[{label:"Alt",value:"altKey"},{label:"Ctrl",value:"ctrlKey"},{label:"Shift",value:"shiftKey"},{label:"System key",value:"metaKey"}],ep=React.createElement(React.Fragment,null,"Replacements available:",React.createElement(kr,{item:"{{authors}}",text:"Author et al."}),React.createElement(kr,{item:"{{key}}",text:"someCitekey"}),React.createElement(kr,{item:"{{title}}"}),React.createElement(kr,{item:"{{year}}"}));function tp(e,t){var n=e.authors,r=e.key,o=e.title,a=e.year,i=t.preset,l=t.template;if("template"===t.useAsDefault){var c=l,u={authors:n,key:r,title:o,year:a};for(var s in u)c=c.replaceAll("{{".concat(s,"}}"),"".concat(u[s]));return c}return function(e,t){var n=e.key,r="[[@"+n+"]]";switch(!0){case"page-reference"==t:return r;case"raw"==t:return n;case"tag"==t:return"#"+r;case"citation"==t:return"["+e.authors+" ("+e.year+")]("+r+")";default:return"@"+n}}(e,i)}function np(e){return np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(e)}function rp(){rp=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==np(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function op(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function ap(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){op(a,r,o,i,l,"next",e)}function l(e){op(a,r,o,i,l,"throw",e)}i(void 0)}))}}function ip(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ip(Object(n),!0).forEach((function(t){cp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ip(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==np(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==np(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===np(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function up(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fp={popoverClassName:de.POPOVER},dp=function(e,t,n){var r="[[@"+e+"]]";switch(t){case"page-reference":return r;case"tag":return"#"+r;case"citation":return"["+n.authors+" ("+n.year+")]("+r+")";default:return"@"+e}};function pp(e){var t=e.citekey,n=e.format,r=e.item,i=up(Bd(),1)[0],l=(0,a.useMemo)((function(){return po(i)}),[i]),c=(0,a.useMemo)((function(){return dp(t,n,r)}),[t,n,r]),u=(0,a.useCallback)((function(){return yt(c)}),[c]),s=(0,a.useMemo)((function(){var e={citation:{action:"copy as citation",command:"copyCitation"},citekey:{action:"copy as citekey",command:"copyCitekey"},"page-reference":{action:"copy as page reference",command:"copyPageRef"},tag:{action:"copy as tag",command:"copyTag"}};if(e[n]){var t=e[n],r=t.action,o=t.command;if(""!==l[o])return React.createElement(Id,{action:r,text:l[o]})}return null}),[n,l]);return React.createElement(o.MenuItem,{htmlTitle:c,labelElement:s,onClick:u,text:c})}function mp(e){var t=e.citekey,n=e.item,r=up($d(),1)[0],i=up(Bd(),1)[0],l=(0,a.useMemo)((function(){return po(i)}),[i]),c=(0,a.useMemo)((function(){return tp(n,r)}),[r,n]),u=(0,a.useCallback)((function(){yt(c)}),[c]),s=(0,a.useMemo)((function(){var e=["citation","citekey","page-reference","tag"];return"preset"==r.useAsDefault&&(e=e.filter((function(e){return e!=r.preset}))),React.createElement(React.Fragment,null,React.createElement(o.MenuItem,{htmlTitle:c,labelElement:React.createElement(o.Tag,{intent:"success",minimal:!0},"Default"),onClick:u,text:c}),e.map((function(e){return React.createElement(pp,{key:e,citekey:t,format:e,item:n})})))}),[t,u,r,c,n]),f=(0,a.useMemo)((function(){var e=l.copyDefault||"";return""!==e?React.createElement(Id,{action:"copy as default",text:e}):null}),[l]),d=(0,a.useMemo)((function(){var e={allowInInput:!1,global:!0,preventDefault:!0,stopPropagation:!0},r={copyDefault:{label:"Copy the item in view (default format)",onKeyDown:function(){return u()}},copyCitation:{label:"Copy the item in view (as citation)",onKeyDown:function(){return yt(dp(t,"citation",n))}},copyCitekey:{label:"Copy the item in view (as citekey)",onKeyDown:function(){return yt(dp(t,"citekey",n))}},copyPageRef:{label:"Copy the item in view (as page reference)",onKeyDown:function(){return yt(dp(t,"page-reference",n))}},copyTag:{label:"Copy the item in view (as page reference)",onKeyDown:function(){return yt(dp(t,"tag",n))}}};return Object.keys(r).map((function(t){var n=l[t]||"";return""!==n&&lp(lp(lp({},e),r[t]),{},{combo:n})})).filter(Be)}),[t,u,n,l]);return(0,o.useHotkeys)(d,{showDialogKeyCombo:"shift+Z+R"}),React.createElement(o.MenuItem,{icon:"clipboard",labelElement:f,multiline:!0,onClick:u,popoverProps:fp,text:"Copy reference"},s)}var hp=function(e){var t=e.direction,n=void 0===t?"row":t,r=e.label,o=e.children;return React.createElement("div",{"zr-role":"metadata-"+n},React.createElement("span",{className:de.TEXT_AUXILIARY},r),React.createElement("div",null,o))};const yp=(0,a.memo)((function(e){var t=e.closeDialog,n=e.item,r=n.abstract,i=n.authors,l=n.authorsFull,c=n.authorsRoles,u=n.children,s=n.createdByUser,f=n.inGraph,d=n.key,p=n.publication,m=n.raw,h=n.tags,y=n.title,v=n.weblink,g=n.year,b=n.zotero,w=up(tr(!1),2),E=w[0],S=w[1],O=S.toggle,k=S.on,R=S.off,x=up(tr(!1),2),T=x[0],_=x[1],C=_.on,j=_.off,A=up(Si(),1)[0],P=up(Ni(),1)[0],I=up(Ki(),1)[0],L=up(Bd(),1)[0],N=(0,a.useMemo)((function(){return po(L)}),[L]),D=up(il(),1)[0],M=up(ii(),2)[1],z=(0,a.useCallback)(ap(rp().mark((function e(){var t,r,o,a,i;return rp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.pdfs,r=void 0===t?[]:t,o=u.notes,a=void 0===o?[]:o,e.next=3,Qa({item:n.raw,pdfs:r,notes:a},f,P,D,I,A);case 3:return(i=e.sent).success&&M(),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),[A,u,f,n.raw,P,I,D,M]),F=(0,a.useCallback)(ap(rp().mark((function e(){var t;return rp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$a({item:n.raw,notes:u.notes},f,I,A);case 2:return(t=e.sent).success&&M(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[A,u.notes,f,n,I,M]),U=(0,a.useCallback)((function(){0!=f&&(ei(f),t())}),[t,f]),B=(0,a.useMemo)((function(){var e=N.goToItemPage||"",t=""!==e?React.createElement(Id,{action:"go to the item's page",text:e}):null;return f?React.createElement(o.MenuItem,{icon:"arrow-right",labelElement:t,onClick:U,text:"Go to Roam page"}):null}),[f,U,N]),q=(0,a.useMemo)((function(){var e=N.importMetadata||"",t=""!==e?React.createElement(Id,{action:"import the item's metadata",text:e}):null;return React.createElement(o.MenuItem,{icon:"add",labelElement:t,onClick:z,text:"Import metadata"})}),[z,N]),X=(0,a.useMemo)((function(){if(0==u.pdfs.length)return null;var e=u.pdfs[0],t="group"==e.library.type?"groups/".concat(e.library.id):"library";return u.pdfs.map((function(e){var n=["linked_file","imported_file","imported_url"].includes(e.data.linkMode)?"zotero://open-pdf/".concat(t,"/items/").concat(e.data.key):e.data.url;return React.createElement(o.MenuItem,{key:e.key,href:n,icon:"paperclip",multiline:!0,rel:"noreferrer",target:"_blank",text:e.data.filename||e.data.title})}))}),[u.pdfs]),G=(0,a.useMemo)((function(){if(0==u.notes.length)return null;var e=N.toggleNotes||"",t=""!==e?React.createElement(Id,{action:"toggle the notes panel",text:e}):null;return React.createElement(React.Fragment,null,React.createElement(o.MenuItem,{icon:"highlight",labelElement:t,onClick:k,text:"Highlights & Notes"}),React.createElement(_l,{isOpen:E,notes:u.notes,onClose:R}))}),[u.notes,R,E,N,k]),K=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,React.createElement(o.MenuItem,{icon:"eye-open",onClick:C,text:"View raw metadata"}),React.createElement(vl,{item:n.raw,isOpen:T,onClose:j}))}),[j,n.raw,T,C]),H=(0,a.useMemo)((function(){var e={allowInInput:!1,global:!0,preventDefault:!0,stopPropagation:!0},t={goToItemPage:{disabled:!f,label:"Go to the item's Roam page",onKeyDown:function(){return U()}},importMetadata:{label:"Import the item's metadata to Roam",onKeyDown:function(){return z()}},toggleNotes:{disabled:0==u.notes.length,label:"Show the item's linked notes",onKeyDown:function(){return O()}}};return Object.keys(t).map((function(n){var r=N[n]||"";return""!==r&&lp(lp(lp({},e),t[n]),{},{combo:r})})).filter(Be)}),[u.notes,z,f,U,N,O]);return(0,o.useHotkeys)(H,{showDialogKeyCombo:"shift+Z+R"}),React.createElement("div",{id:"zr-item-details"},React.createElement(Kn,null,React.createElement("div",{"zr-role":"item-metadata"},React.createElement("div",{"zr-role":"item-metadata--header"},React.createElement("h5",null,y),React.createElement("span",{className:de.TEXT_ACCENT_1},i+" ("+g+")"),p?React.createElement("span",{className:de.TEXT_SECONDARY},p):null,v?React.createElement("span",{"zr-role":"item-weblink",className:de.TEXT_SECONDARY},React.createElement("a",{href:v.href,rel:"noreferrer",target:"_blank"},v.title)):null),React.createElement(hp,{direction:"col",label:"Abstract"},React.createElement("p",{"zr-role":"item-abstract",className:[de.TEXT_SMALL,o.Classes.RUNNING_TEXT].join(" ")},r)),React.createElement("div",{"zr-role":"item-metadata--footer"},React.createElement(hp,{label:"Added"},React.createElement("span",{className:de.TEXT_SECONDARY},Ct(m.data.dateAdded)),s?React.createElement("span",null,"by ",React.createElement("b",null,s)):null),l.length>0?React.createElement(hp,{label:"Contributors"},l.map((function(e,t){return React.createElement(o.Tag,{key:t,className:de.TEXT_SMALL,intent:"primary",minimal:!0},e,"author"==c[t]?"":" ("+c[t]+")")}))):null,h.length>0?React.createElement(hp,{label:"Tags"},React.createElement("div",null,h.map((function(e,t){return React.createElement(o.Tag,{key:t,className:de.TEXT_SMALL,minimal:!0},"#",e)})))):null)),React.createElement("div",{"zr-role":"item-actions"},React.createElement(o.Menu,{className:de.TEXT_SMALL,"data-in-graph":f.toString()},navigator.clipboard&&React.createElement(mp,{citekey:d,item:n}),React.createElement(o.MenuDivider,{className:de.DIVIDER_MINIMAL,title:"Actions"}),B,q,u.notes.length>0&&React.createElement(o.MenuItem,{icon:"chat",onClick:F,text:"Import notes"}),React.createElement(o.MenuItem,{href:b.local,icon:"application",rel:"noreferrer",target:"_blank",text:"Open in Zotero"}),React.createElement(o.MenuItem,{href:b.web,icon:"cloud",rel:"noreferrer",target:"_blank",text:"Open in Zotero (web)"}),K,React.createElement(o.MenuDivider,{className:de.DIVIDER_MINIMAL,title:"Linked Content"}),X,G))))}));function vp(e){var t=e.annotation,n=(0,a.useMemo)((function(){return Ft([t])[0]}),[t]),r=n.color,i=n.comment,l=n.text,c=n.type,u=(0,a.useMemo)((function(){return{backgroundImage:"linear-gradient(120deg, ".concat(r,"50 0%, ").concat(r,"50 100%)")}}),[r]);return React.createElement("div",{className:de.TEXT_SMALL,"zr-role":"note-contents"},l&&React.createElement("span",{title:l,className:[de.TEXT_AUXILIARY,o.Classes.TEXT_OVERFLOW_ELLIPSIS].join(" "),style:u},l),"image"==c&&React.createElement("code",{className:o.Classes.CODE},"Images are currently not supported"),i&&React.createElement("div",{title:i,className:[de.TEXT_SECONDARY,o.Classes.TEXT_OVERFLOW_ELLIPSIS].join(" ")},i))}function gp(e){var t=e.note,n=(0,a.useMemo)((function(){return wt([t]).join(" ")}),[t]);return React.createElement("div",{className:[de.TEXT_SMALL,de.TEXT_AUXILIARY].join(" "),"zr-role":"note-contents"},React.createElement("p",{title:n},n))}const bp=function(e){var t=e.note,n=e.isSelected,r=e.isSingleChild,i=e.onToggle,l=(0,a.useCallback)((function(){return i(t.data.key)}),[t.data.key,i]),c=(0,a.useMemo)((function(){return Xe(t)?React.createElement(gp,{note:t}):React.createElement(vp,{annotation:t})}),[t]);return React.createElement(No,{className:"zr-notesimport-item","aria-label":t.data.key,onClick:l},React.createElement("div",{className:"zr-notesimport-item--header"},r?c:React.createElement(o.Checkbox,{checked:n,className:"zr-notesimport-item--title",inline:!1,labelElement:c,onChange:l})),React.createElement("div",{className:["zr-notesimport-item--contents",de.TEXT_SMALL].join(" ")},React.createElement("div",null,t.data.tags.map((function(e,t){return React.createElement(o.Tag,{key:t,minimal:!0},e.tag)})))))},wp=function(e){var t=e.date,n=e.itemSelectProps,r=e.notes,i=e.selectedKeys,l=n.bulkCheck,c=n.bulkUncheck,u=n.toggleNoteSelection,s=(0,a.useMemo)((function(){return r.every((function(e){return i.includes(e.data.key)}))}),[r,i]),f=1==r.length,d=(0,a.useMemo)((function(){return r.sort((function(e,t){return new Date(e.data.dateAdded)>new Date(t.data.dateAdded)?-1:1}))}),[r]),p=(0,a.useCallback)((function(){var e=r.map((function(e){return e.data.key}));s?c(e):l(e)}),[s,l,c,r]);return React.createElement("li",{className:"zr-notesimport-daylist"},React.createElement(o.Checkbox,{checked:s,className:"zr-notesimport-day",inline:!1,labelElement:React.createElement(o.H6,null,t),onChange:p}),React.createElement("div",null,React.createElement("ul",{className:o.Classes.LIST_UNSTYLED},d.map((function(e){return React.createElement(bp,{key:e.data.key,isSelected:i.includes(e.data.key),isSingleChild:f,note:e,onToggle:u})})))))};function Ep(e,t){if(e){if("string"==typeof e)return Sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sp(e,t):void 0}}function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Op=function(e,t){return e===t},kp=function(e){return e},Rp=function(e,t,n,r){return e.find((function(e){return n(e,t)}))?e:[].concat(function(e){if(Array.isArray(e))return Sp(e)}(o=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||Ep(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[r(t)]);var o},xp=function(e,t,n){return e.filter((function(e){return!n(e,t)}))},Tp=function(e){var t,n,r=e.start,o=void 0===r?[]:r,i=e.identify,l=void 0===i?Op:i,c=e.retrieve,u=void 0===c?kp:c,s=(t=(0,a.useState)(o),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||Ep(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1],p=(0,a.useCallback)((function(e){d((function(t){return Rp(t,e,l,u)}))}),[l,u]),m=(0,a.useCallback)((function(e){d((function(t){return xp(t,e,l)}))}),[l]),h=(0,a.useCallback)((function(e){d((function(t){return t.find((function(t){return l(t,e)}))?xp(t,e,l):Rp(t,e,l,u)}))}),[l,u]);return[f,{set:(0,a.useCallback)((function(e){d(e)}),[]),toggle:h,add:p,remove:m}]};function _p(e){return _p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(e)}function Cp(){Cp=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function jp(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ap(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jp(a,r,o,i,l,"next",e)}function l(e){jp(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Lp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ip(e){return function(e){if(Array.isArray(e))return Np(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(e,t){if(e){if("string"==typeof e)return Np(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Np(e,t):void 0}}function Np(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dp(e){var t=e.notes,n=e.selectedKeys,r=e.selectProps,o=r.setSelectedKeys,i=r.toggleNoteSelection,l=(0,a.useMemo)((function(){var e=t.sort((function(e,t){return new Date(e.data.dateAdded)>new Date(t.data.dateAdded)?-1:1})).reduce((function(e,t){var n=new Date(t.data.dateAdded).toLocaleDateString("en-CA");return e[n]?e[n].push(t):e[n]=[t],e}),{});return Object.keys(e).sort((function(e,t){return new Date(e)>new Date(t)?-1:1})).map((function(t){return{date:jt(t,{brackets:!1}),notes:e[t]}}))}),[t]),c=(0,a.useMemo)((function(){return{bulkCheck:function(e){var t=e.filter((function(e){return!n.includes(e)}));o([].concat(Ip(n),Ip(t)))},bulkUncheck:function(e){o(n.filter((function(t){return!e.includes(t)})))},toggleNoteSelection:i}}),[n,o,i]);return React.createElement(Do,null,l.map((function(e){return React.createElement(wp,{key:e.date,date:e.date,notes:e.notes,itemSelectProps:c,selectedKeys:n})})))}const Mp=function(e){var t=e.closeDialog,n=e.item,r=e.notes,i=e.pageUID,l=Pp(Si(),1)[0],c=Pp(Ki(),1)[0],u=Pp(Tp({start:r.map((function(e){return e.data.key}))}),2),s=u[0],f=u[1],d=f.set,p=f.toggle,m=(0,a.useCallback)((function(){0==s.length?d(r.map((function(e){return e.data.key}))):d([])}),[r,s,d]),h=(0,a.useCallback)(Ap(Cp().mark((function e(){var o;return Cp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.filter((function(e){return s.includes(e.data.key)})),e.prev=1,e.next=4,$a({item:n,notes:o},i,c,l);case 4:t(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])}))),[l,t,n,r,c,i,s]),y=(0,a.useMemo)((function(){return{setSelectedKeys:d,toggleNoteSelection:p}}),[d,p]);return React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement(Kn,null,React.createElement(zo,null,React.createElement(o.Button,{className:[de.TEXT_SMALL,de.TEXT_SECONDARY].join(" "),minimal:!0,onClick:m},0==s.length?"Select all":"Unselect all"),React.createElement(o.Button,{active:!0,disabled:0==s.length,intent:"success",minimal:!0,onClick:h,rightIcon:React.createElement(o.Tag,{intent:"success"},s.length),text:"Import notes"})),React.createElement("div",{className:"zr-notesimport--datalist"},React.createElement(Dp,{notes:r,selectedKeys:s,selectProps:y}))))};var zp=n(54);const Fp=(0,a.memo)((function(e){var t=e.doi,n=e.layout,r=void 0===n?"horizontal":n,o=e.showLabels,i=void 0!==o&&o,l=e.showZero,c=void 0===l||l,u=e.small,s=void 0!==u&&u,f=e.tooltipPlacement,d=void 0===f?"auto":f,p=e.tooltipSlide,m=void 0===p?0:p,h=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e;null==h||null===(e=h.current)||void 0===e||e.removeAttribute("data-fetched"),(0,zp.insertBadges)()})),React.createElement("div",{className:"scite-badge","data-doi":t,"data-layout":r,"data-show-labels":i.toString(),"data-show-zero":c.toString(),"data-small":s.toString(),"data-tooltip-placement":d,"data-tooltip-slide":m,ref:h})}));function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Up.apply(this,arguments)}var Bp={canEscapeKeyClose:!1,minimal:!0,placement:"bottom-start",popoverClassName:de.POPOVER},qp={itemRenderer:function(e,t){var n=t.handleClick;return React.createElement(o.MenuItem,{key:e.value,className:de.TEXT_SECONDARY,htmlTitle:e.label,labelElement:e.active?React.createElement(o.Icon,{icon:"small-tick"}):null,onClick:n,"aria-selected":e.active,text:e.label})},itemListRenderer:function(e){var t=e.items,n=e.itemsParentRef,r=e.renderItem,a=t.map(r).filter((function(e){return null!=e}));return React.createElement(o.Menu,{ulRef:n},a)}};const Xp=function(e){var t=e.options,n=e.toggleFilter,r=(0,a.useMemo)((function(){return t.filter((function(e){return e.active})).length}),[t]),i=(0,a.useCallback)((function(e){return n(e.value)}),[n]);return React.createElement(Jn.Select,Up({className:de.TEXT_SMALL,filterable:!1,items:t,matchTargetWidth:!1,onItemSelect:i,popoverProps:Bp},qp),React.createElement(o.Button,{active:t.some((function(e){return e.active})),className:de.TEXT_SECONDARY,intent:"primary",minimal:!0,rightIcon:r>0?React.createElement(o.Tag,{intent:"primary"},r):"caret-down",text:"Filter"}))};function Gp(e){var t=e.children;return React.createElement(o.H6,null,t)}function Kp(e){var t=e.href,n=e.text;return React.createElement("a",{href:t,rel:"noreferrer",target:"_blank"},n)}var Hp=React.createElement(React.Fragment,null,React.createElement("p",null,"Metadata is obtained through the ",React.createElement(Kp,{href:"https://en.wikipedia.org/api/rest_v1/#/Citation/getCitation",text:"Wikimedia API"}),". It should give the same results as the Zotero Connector (note : PDFs are currently not added automatically)."),React.createElement("p",null,"If the API was unable to retrieve metadata for a given URL, the item will not appear below.")),Vp=React.createElement(React.Fragment,null,React.createElement("p",null,"References, citations, and their metadata are obtained through the ",React.createElement(Kp,{href:"https://api.semanticscholar.org/corpus",text:"Semantic Scholar API"}),"."),React.createElement("p",null,"Note that the API does not guarantee the identification of all papers, and that the metadata available is limited (for example, abstracts are currently not available)."));function Qp(e){var t=e.content,n=e.header,r=void 0===n?"":n,i=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,r&&React.createElement(Gp,null,r),t)}),[t,r]);return React.createElement(mi,{className:"zr-guide-popover--target",content:i,interactionKind:"hover-target",popoverClassName:[de.POPOVER,"zr-guide-popover"].join(" ")},React.createElement(o.Icon,{icon:"help",size:14,tabIndex:-1}))}var Wp=function(){return React.createElement(Qp,{header:"About this data",content:Hp})},$p=function(){return React.createElement(Qp,{header:"About this data",content:Vp})},Yp=function(e){return e.ADDED_ON="added_on",e.WITH_ABSTRACT="with_abstract",e.WITH_TAG="with_tag",e}({}),Zp=function(e){return e.CITATIONS="is_citation",e.REFERENCES="is_reference",e}({});const Jp=(0,a.memo)((function(e){var t=e.handleRemove,n=e.handleSelect,r=e.inGraph,i=e.isSelected,l=e.item,c=e.type,u=l.inLibrary,s=(0,a.useCallback)((function(){i?t(l):n(l)}),[i,l,t,n]),f=(0,a.useMemo)((function(){if(u){var e=u.children,t=e.pdfs,n=e.notes,a=u.raw;return React.createElement(hl,{inGraph:r,item:a,notes:n,pdfs:t})}return React.createElement(React.Fragment,null,l.url?React.createElement("a",{"zr-role":"item-url",href:l.url,target:"_blank",rel:"noreferrer",className:de.TEXT_SMALL},l.doi||"Semantic Scholar"):null,l.doi?React.createElement(o.Button,{text:i?"Remove":"Add to Zotero",active:i,className:de.TEXT_SMALL,icon:i?"small-cross":"small-plus",intent:"primary",minimal:!0,onClick:s,small:!0}):null)}),[s,r,u,i,l.doi,l.url]),d=(0,a.useMemo)((function(){return React.createElement("div",{className:"zr-related-item--intents"},l.intent.length>0?l.intent.map((function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);return React.createElement(o.Tag,{key:e,"data-semantic-intent":e,htmlTitle:"This citation was classified as related to "+t+" by Semantic Scholar",minimal:!0},t)})):null)}),[l.intent]),p=(0,a.useMemo)((function(){return React.createElement("div",{className:"zr-related-item--links"},Object.keys(l.links).map((function(e){return React.createElement("span",{key:e,"data-service":e},React.createElement("a",{href:l.links[e],className:[de.TEXT_SMALL,de.TEXT_AUXILIARY].join(" "),target:"_blank",rel:"noreferrer"},e.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")))})))}),[l.links]);return React.createElement("li",{className:"zr-related-item","data-semantic-type":c,"data-in-library":0!=u,"data-in-graph":0!=r},React.createElement("div",{className:o.Classes.MENU_ITEM},React.createElement("span",{className:[o.Classes.MENU_ITEM_LABEL,de.TEXT_SMALL,"zr-related-item--timestamp"].join(" ")},l.year),React.createElement("div",{className:[o.Classes.FILL,"zr-related-item-contents"].join(" ")},React.createElement("div",{className:o.Classes.FILL,style:{display:"flex"}},React.createElement("div",{className:"zr-related-item-contents--metadata"},l.authors&&React.createElement("span",{className:c==Zp.REFERENCES?de.TEXT_ACCENT_1:de.TEXT_ACCENT_2},l.authors),l.meta&&React.createElement("span",{className:de.TEXT_SECONDARY},l.meta),l.isInfluential?React.createElement(o.Icon,{className:"zr-related-item--decorating-icon",color:"#f8c63a",htmlTitle:"This item was classified as influential by Semantic Scholar",icon:"trending-up"}):null,React.createElement("span",{className:"zr-related-item--title"},l.title),p),React.createElement("span",{className:"zr-related-item-contents--actions"},f)),d)))}));function em(e){return em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},em(e)}function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(n),!0).forEach((function(t){rm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rm(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==em(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==em(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===em(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var om=function(e,t){return e.map((function(e){return e.value==t?nm(nm({},e),{},{active:!e.active}):e}))};function am(e){return am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(e)}function im(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||fm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(n),!0).forEach((function(t){um(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function um(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==am(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==am(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===am(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sm(e){return function(e){if(Array.isArray(e))return dm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fm(e,t){if(e){if("string"==typeof e)return dm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dm(e,t):void 0}}function dm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pm=[{active:!1,label:"In Library",value:"library"},{active:!1,label:"Highly Influential",value:"influential"},{active:!1,label:"Has DOI",value:"doi"}];function mm(e){var t=e.item,n=e.selectProps,r=e.type,o=n.handleRemove,a=n.handleSelect,i=n.items.findIndex((function(e){return e.doi==t.doi||e.url==t.url}))>=0;return React.createElement(Jp,{handleRemove:o,handleSelect:a,inGraph:t.inGraph,isSelected:i,item:t,type:r})}const hm=(0,a.memo)((function(e){var t=e.items,n=e.selectProps,r=e.type,i=Ac({itemsPerPage:30}),l=i.currentPage,c=i.pageLimits,u=i.setCurrentPage,s=im(cs(""),2),f=s[0],d=s[1],p=function(e){return(0,a.useReducer)(om,e)}(pm),m=im(p,2),h=m[0],y=m[1],v=(0,a.useCallback)((function(e){y(e),u(1)}),[u,y]),g=(0,a.useMemo)((function(){return function(e,t){var n=sm(e);return t.filter((function(e){return 1==e.active})).forEach((function(e){var t,r;switch(e.value){case"library":n=n.filter(Qe);break;case"influential":n=n.filter((function(e){return e.isInfluential}));break;case"doi":n=n.filter((function(e){return e.doi}));break;default:null===(t=window.zoteroRoam)||void 0===t||null===(r=t.warn)||void 0===r||r.call(t,{origin:"Interface",message:"Filter not recognized: ".concat(e.value),context:cm({},e)})}})),n}(t,h)}),[h,t]),b=(0,a.useMemo)((function(){return f?function(e,t){return t.filter((function(t){return Mt(e,t._multiField,{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"})}))}(f,g):g}),[g,f]);return React.createElement("div",{className:"rendered-div"},React.createElement(zo,null,React.createElement(Xp,{options:h,toggleFilter:v}),React.createElement(o.InputGroup,{"aria-label":"Search by title, authors (last names), or year",autoComplete:"off",id:"semantic-search--"+r,leftIcon:"search",onChange:d,placeholder:"Search items",spellCheck:"false",title:"Search by title, authors (last names), or year",value:f})),React.createElement("div",{className:"zr-semantic--datalist"},0==b.length?React.createElement(o.NonIdealState,{className:de.TEXT_AUXILIARY,description:"No results found"}):React.createElement(Do,null,b.slice.apply(b,sm(c)).map((function(e){return React.createElement(mm,{key:[e.doi,e.url,e.title].filter(Be).join("-"),item:e,selectProps:n,type:r})})))),React.createElement(zo,null,React.createElement(Mo,{arrows:"first",currentPage:l,itemsPerPage:30,nbItems:b.length,setCurrentPage:u}),React.createElement($p,null)))}));var ym=(0,a.memo)((function(e){var t=e.collection,n=e.isChecked,r=e.onSelect,i=t.data.name,l=t.depth,c=t.key,u=(0,a.useCallback)((function(){r(c)}),[c,r]);return React.createElement(o.Checkbox,{checked:n,className:[de.TEXT_SMALL,"depth-".concat(l)].join(" "),inline:!1,label:i,onChange:u})}));const vm=(0,a.memo)((function(e){var t=e.collections,n=e.onSelect,r=e.selectedCollections;return 0==t.length?React.createElement(o.Spinner,{size:12}):React.createElement("div",{className:"options-collections-list"},t.map((function(e){return React.createElement(ym,{key:e.key,collection:e,isChecked:r.includes(e.key),onSelect:n})})))})),gm=(0,a.memo)((function(e){var t=e.libraries,n=e.selectedLib,r=e.onSelect,i=(0,a.useMemo)((function(){return t.map((function(e){return{value:e.path}}))}),[t]);return React.createElement(o.RadioGroup,{className:de.TEXT_SMALL,inline:!1,name:"import-library",onChange:r,options:i,selectedValue:n.path})}));function bm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wm=function(e){return e};function Em(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Om(){return Om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Om.apply(this,arguments)}var km=(0,a.memo)((function(e){var t,n=e.identifiers,r=e.importProps,i=e.isActive,l=e.resetImport,c=_u(n,{enabled:i&&n.length>0,select:function(e){return e.item}}),u=c.every((function(e){return e.data})),s=c.map((function(e){return e.data})).filter(Be),f=(t=V(),ss((function(e){var t=e.collections,n=void 0===t?[]:t,r=e.items,o=e.library,a=e.tags,i=(void 0===a?[]:a).map((function(e){return{tag:e}}));return Un(r.map((function(e){return e.key,e.version,hs(hs({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ps)),{},{collections:n,tags:i})})),o)}),{onSettled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=r.collections,a=r.items,i=r.library.path,l=r.tags,c=e.reduce((function(e,t){return Ue(t)?e.successful.push(t.value.data):e.failed.push(t.reason),e}),{successful:[],failed:[]});!n&&c.successful.length>0&&t.invalidateQueries(["items",i],{refetchType:"all"}),Qt({_type:"write",args:{collections:o,items:a,tags:l},data:c,error:n,library:i})}})),d=f.mutate,p=f.status,m=(0,a.useCallback)((function(){var e=r.collections,t=r.library,n=r.tags;d({collections:e,items:s,library:t,tags:n},{onSuccess:function(){return l()}})}),[s,r,d,l]),h=(0,a.useMemo)((function(){return"loading"==p?{disabled:!0,text:"Loading...",title:"Importing items..."}:"error"==p?{disabled:!0,intent:o.Intent.DANGER,rightIcon:"error",text:"Error",title:"Error while importing items"}:{disabled:!i,intent:o.Intent.PRIMARY,loading:!u,rightIcon:"chevron-right",text:"Send to Zotero",title:u?"Import items to Zotero":"Loading items data..."}}),[i,u,p]);return React.createElement(o.Button,Om({className:[de.TEXT_SMALL,"zr-import--trigger"].join(" "),minimal:!0,onClick:m},h))})),Rm=(0,a.memo)((function(e){var t,n,r,i,l,c,u,s,f,d=e.collections,p=e.identifiers,m=e.isActive,h=e.libraries,y=e.resetImport,v=Em((n=(t={start:h[0],transform:function(e){return h.find((function(t){return t.path==e}))}}).start,i=void 0===(r=t.transform)?wm:r,s=(0,a.useState)(n),f=2,c=(l=function(e){if(Array.isArray(e))return e}(s)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(s,f)||function(e,t){if(e){if("string"==typeof e)return bm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bm(e,t):void 0}}(s,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],u=l[1],[c,(0,a.useCallback)((function(e){u(i(e.currentTarget.value))}),[i])]),2),g=v[0],b=v[1],w=Em(Tp({start:[]}),2),E=w[0],S=w[1],O=S.set,k=S.toggle,R=Em(Tp({start:[]}),2),x=R[0],T=R[1],_=T.add,C=T.remove,j=(0,a.useCallback)((function(e){b(e),O([])}),[b,O]),A=(0,a.useMemo)((function(){return Bt(d.filter((function(e){var t=e.library,n=t.id;return t.type+"s/"+n==g.path})))}),[d,g]),P=(0,a.useMemo)((function(){return{collections:E,library:g,tags:x}}),[E,g,x]);return React.createElement(Kn,null,React.createElement("div",{className:"import-header"},React.createElement(o.ButtonGroup,{fill:!0,minimal:!0},React.createElement(o.Button,{className:[de.TEXT_SMALL,"zr-import--cancel"].join(" "),icon:"chevron-left",intent:"warning",minimal:!0,onClick:y},"Cancel"),React.createElement(km,{identifiers:p,importProps:P,isActive:m,resetImport:y}))),React.createElement("div",{className:"import-options"},React.createElement("div",{className:"options-library-list"},React.createElement(gm,{libraries:h,selectedLib:g,onSelect:j})),React.createElement(vm,{collections:A,onSelect:k,selectedCollections:E}),React.createElement(Xl,{onRemove:C,onSelect:_,selectedTags:x})))}));const xm=(0,a.memo)((function(e){var t=e.identifiers,n=e.isActive,r=e.resetImport,a=Em(Po(),1)[0].libraries,i=Lu(a),l=i.data,c=i.isLoading,u=Cu(a,{enabled:l.length>0,notifyOnChangeProps:["data"],select:function(e){return e.data}}).map((function(e){return(null==e?void 0:e.data)||[]})).flat(1);return c?React.createElement(o.Spinner,null):0==l.length?React.createElement(es,null):React.createElement(Rm,{collections:u,identifiers:t,isActive:n,libraries:l,resetImport:r})}));var Tm=(0,a.memo)((function(e){var t=e.handleRemove,n=e.item,r=(0,a.useCallback)((function(){t(n)}),[t,n]);return React.createElement("li",{className:["import-items_selected",de.TEXT_SMALL].join(" ")},React.createElement("div",{className:"selected_info"},React.createElement("span",{className:[o.Classes.TEXT_MUTED,"selected_title"].join(" ")},n.title),React.createElement("span",{className:[de.TEXT_SECONDARY,"selected_origin"].join(" ")},n.meta)),React.createElement("div",{className:"selected_state"},React.createElement(o.Button,{className:"selected_remove-button",icon:"cross",intent:"danger",minimal:!0,onClick:r,title:"Remove item from import"})))}));const _m=(0,a.memo)((function(e){var t=e.selectProps,n=t.handleRemove,r=t.items,i=t.resetImport,l=r.length>0,c=(0,a.useMemo)((function(){return r.map((function(e){return e.doi?"https://doi.org/"+e.doi:e.url}))}),[r]);return React.createElement("div",{className:"zr-semantic-panel--side",tabIndex:0},React.createElement(xm,{identifiers:c,isActive:l,resetImport:i}),React.createElement("ul",{className:[o.Classes.LIST_UNSTYLED,"import-items"].join(" ")},t.items.map((function(e){return React.createElement(Tm,{key:[e.doi,e.url].join("-"),handleRemove:n,item:e})}))))}));function Cm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Am="zr-semantic-panel-label",Pm=(0,a.memo)((function(e){var t=e.defaultTab,n=e.items,r=e.onClose,i=e.selectProps,l=e.title,c=Cm((0,a.useState)(t),2),u=c[0],s=c[1];(0,a.useEffect)((function(){s(t)}),[t]);var f=(0,a.useCallback)((function(e,t,n){return s(e)}),[]),d=(0,a.useMemo)((function(){return qt(n.references,"year")}),[n.references]),p=(0,a.useMemo)((function(){return qt(n.citations,"year")}),[n.citations]),m=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,React.createElement(o.Icon,{icon:"citation"}),React.createElement("span",null,Nt(d.length,"reference")))}),[d.length]),h=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,React.createElement(o.Icon,{icon:"chat"}),React.createElement("span",null,Nt(p.length,"citing paper")))}),[p.length]);return React.createElement(o.Tabs,{id:"zr-semantic-panel",className:de.TABS,selectedTabId:u,onChange:f,animate:!1},React.createElement(o.Tab,{id:Zp.REFERENCES,panel:React.createElement(hm,{items:d,selectProps:i,type:Zp.REFERENCES}),disabled:0==d.length,title:m}),React.createElement(o.Tab,{id:Zp.CITATIONS,panel:React.createElement(hm,{items:p,selectProps:i,type:Zp.CITATIONS}),disabled:0==p.length,title:h}),React.createElement(o.Tabs.Expander,null),React.createElement("span",{className:de.TEXT_AUXILIARY,id:Am,title:"Works related to "+l},l),React.createElement(o.Button,{icon:"cross",minimal:!0,large:!0,onClick:r,title:"Close dialog"}))}));const Im=(0,a.memo)((function(e){var t=e.isOpen,n=e.items,r=e.onClose,i=e.show,l=Cm(Tp({start:[],identify:function(e,t){return e.doi==t.doi&&e.url==t.url}}),2),c=l[0],u=l[1],s=u.set,f=u.add,d=u.remove,p=c.length>0,m=(0,a.useMemo)((function(){return{handleRemove:d,handleSelect:f,items:c,resetImport:function(){return s([])}}}),[f,c,d,s]),h=(0,a.useCallback)((function(){s([]),r()}),[r,s]);return React.createElement(me,{ariaLabelledBy:Am,className:"citations",extraClasses:p?["has-selected-items"]:[],isOpen:t,onClose:h},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement(Kn,null,React.createElement("div",{className:"zr-semantic-panel--main"},React.createElement(Pm,{defaultTab:i.type,items:n,onClose:h,selectProps:m,title:i.title})),React.createElement(_m,{selectProps:m}))))}));function Lm(e){return Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(e)}function Nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(n),!0).forEach((function(t){Mm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mm(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Lm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Lm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Lm(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fm=new Zn,Um=Fm.Provider,Bm=Fm.useSettings,qm=[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"}],Xm=[{label:"Auto",value:"auto"},{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Bottom",value:"bottom"}],Gm="zr-page-menu--",Km=["citekey","dnp","tag"].reduce((function(e,t){return e[t]=Gm+t,e}),{}),Hm=["references","citations","backlinks"].reduce((function(e,t){return e[t]="zr-page-menu-show--"+t,e}),{}),Vm="zr-webimport-div";function Qm(e){return Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(e)}function Wm(){Wm=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Qm(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function $m(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ym(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$m(a,r,o,i,l,"next",e)}function l(e){$m(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zm.apply(this,arguments)}function Jm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||eh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eh(e,t){if(e){if("string"==typeof e)return th(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?th(e,t):void 0}}function th(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nh(e){var t=e.entry,n=t._type,r=t.inLibrary,o=t.inGraph,i=r.children,l=i.pdfs,c=i.notes,u=r.raw,s=u.key,f=u.data,d=u.meta,p=d.parsedDate?new Date(d.parsedDate).getUTCFullYear():"",m="cited"==n?"reference":"citation",h=(0,a.useMemo)((function(){return React.createElement(hl,{inGraph:o,item:u,notes:c,pdfs:l})}),[o,u,c,l]);return React.createElement("li",{className:"zr-backlink-item","data-backlink-type":m,"data-in-graph":(0!=o).toString(),"data-item-year":p,"data-key":"@"+s},React.createElement("div",{className:"zr-backlink-item--year"},p),React.createElement("div",{className:"zr-backlink-item--info","data-item-type":f.itemType},React.createElement("span",{"zr-role":"item-authors",className:"reference"==m?de.TEXT_ACCENT_1:de.TEXT_ACCENT_2},d.creatorSummary||""),React.createElement("span",{"zr-role":"item-publication",className:de.TEXT_SECONDARY},f.publicationTitle||f.bookTitle||f.university||""),React.createElement("span",{"zr-role":"item-title"},f.title)),React.createElement("div",{className:"zr-backlink-item--state"},h))}var rh=(0,a.memo)((function(e){var t=e.isOpen,n=e.items,r=void 0===n?[]:n,a=e.origin;if(0==r.length)return null;var i,l=(i=r,function(e){if(Array.isArray(e))return th(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||eh(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(e,t){return function(e,t){if(e.meta.parsedDate){if(t.meta.parsedDate){var n=new Date(e.meta.parsedDate).getUTCFullYear()-new Date(t.meta.parsedDate).getUTCFullYear();return n<0||0==n&&e.meta.creatorSummary<t.meta.creatorSummary?-1:1}return-1}return t.meta.parsedDate?1:e.meta.creatorSummary<t.meta.creatorSummary?-1:1}(e.inLibrary.raw,t.inLibrary.raw)})),c=l.filter((function(e){return"cited"==e._type})),u=l.filter((function(e){return"citing"==e._type})),s=React.createElement(o.Tag,{className:"zr-backlinks-divider--tag",fill:!0,minimal:!0,multiline:!0},a);return React.createElement(o.Collapse,{isOpen:t,keepChildrenMounted:!0},React.createElement("div",{className:"zr-citekey-menu--backlinks"},c.length>0?React.createElement("ul",{className:o.Classes.LIST_UNSTYLED,"zr-role":"sublist","list-type":"references"},c.map((function(e){return React.createElement(nh,{key:"".concat(e.doi),entry:e})}))):null,c.length>0&&u.length>0?s:null,u.length>0?React.createElement("ul",{className:o.Classes.LIST_UNSTYLED,"zr-role":"sublist","list-type":"citations"},u.map((function(e){return React.createElement(nh,{key:"".concat(e.doi),entry:e})}))):null))}));function oh(e){var t,n,r=e.doi,i=e.itemList,l=e.origin,c=e.title,u=Jm(ii(),1)[0],s=Pu(r),f=s.isLoading,d=s.isError,p=s.data,m=s.error,h=Jm(tr(!1),2),y=h[0],v=h[1].toggle,g=Jm(tr(!1),2),b=g[0],w=g[1],E=w.on,S=w.off,O=Jm((0,a.useState)({title:c,type:Zp.REFERENCES}),2),k=O[0],R=O[1],x=(0,a.useCallback)((function(){R({title:c,type:Zp.REFERENCES}),E()}),[c,E]),T=(0,a.useCallback)((function(){R({title:c,type:Zp.CITATIONS}),E()}),[c,E]),_=(null===(t=(p||{}).references)||void 0===t?void 0:t.length)||0,C=(null===(n=(p||{}).citations)||void 0===n?void 0:n.length)||0,j=(0,a.useMemo)((function(){if(p){var e=p.citations,t=p.references;return function(e,t,n){var r=e.items,o=void 0===r?[]:r,a=e.pdfs,i=void 0===a?[]:a,l=e.notes,c=void 0===l?[]:l,u=o.filter((function(e){return e.data.DOI})),s=t.citations,f=t.references,d=void 0===f?[]:f,p=(void 0===s?[]:s).map((function(e){return tt(tt({},pt(e,{items:u,pdfs:i,notes:c},n)),{},{_type:Ve.CITING})})),m=d.map((function(e){return tt(tt({},pt(e,{items:u,pdfs:i,notes:c},n)),{},{_type:Ve.CITED})}));return{citations:p,references:m,backlinks:[].concat(rt(m),rt(p)).filter(Qe)}}(i,{citations:e,references:t},u)}return{backlinks:[],citations:[],references:[]}}),[p,i,u]),A=(0,a.useMemo)((function(){return 0==j.backlinks.length?{"aria-disabled":!0,disabled:!0,icon:null,text:"No related library items"}:{icon:y?"caret-down":"caret-right",text:Nt(j.backlinks.length,"related library item")}}),[j.backlinks.length,y]);return React.createElement("div",{className:"zotero-roam-page-menu-citations"},d?React.createElement(he,{error:m}):React.createElement(React.Fragment,null,React.createElement(o.ButtonGroup,{minimal:!0,fill:!0,role:"menubar"},React.createElement(o.Button,{"aria-disabled":0==_,disabled:0==_,className:Hm.references,loading:f,minimal:!0,onClick:x,icon:"citation",intent:"primary",role:"menuitem","aria-haspopup":"dialog",title:"Show references"},Nt(_,"reference")),React.createElement(o.Button,{"aria-disabled":0==C,disabled:0==C,className:Hm.citations,loading:f,minimal:!0,onClick:T,icon:"chat",intent:"warning",role:"menuitem","aria-haspopup":"dialog",title:"Show citations"},Nt(C,"citation")),React.createElement(o.Button,Zm({className:Hm.backlinks,loading:f,minimal:!0,onClick:v},A,{role:"menuitem",title:"Show backlinks"}))),_+C>0?React.createElement(Im,{isOpen:b,items:j,onClose:S,show:k}):null,React.createElement(rh,{isOpen:y,items:j.backlinks,origin:l})))}function ah(e){var t=e.item,n=Jm(tr(!1),2),r=n[0],a=n[1],i=a.on,l=a.off;return React.createElement(React.Fragment,null,React.createElement(o.Button,{icon:"info-sign",onClick:i,role:"menuitem","aria-haspopup":"dialog"},"View item information"),React.createElement(me,{className:"view-item-information",isOpen:r,onClose:l},React.createElement(yp,{closeDialog:l,item:t})))}function ih(e){var t=e.item,n=e.notes,r=e.pageUID,a=Jm(tr(!1),2),i=a[0],l=a[1],c=l.on,u=l.off;return React.createElement(React.Fragment,null,React.createElement(o.Button,{icon:"comment",onClick:c,role:"menuitem","aria-haspopup":"dialog"},"Import notes"),React.createElement(me,{className:"import-item-notes",isOpen:i,label:"Import notes",onClose:u},React.createElement(Mp,{closeDialog:u,item:t,notes:n,pageUID:r})))}const lh=(0,a.memo)((function(e){var t=e.item,n=e.itemList,r=Jm(Si(),1)[0],i=Jm(Ni(),1)[0],l=Jm(Ki(),1)[0],c=Jm(jd(),1)[0].defaults,u=Jm(Bm(),1)[0],s=Jm(il(),1)[0],f=Jm(ii(),1)[0],d=Lt(t.data.DOI),p=Ka("@"+t.key),m=(0,a.useMemo)((function(){return _t(t.data.key,t.library.type+"s/"+t.library.id,{pdfs:n.pdfs,notes:n.notes})}),[n,t]),h=(0,a.useMemo)((function(){return d?React.createElement("span",{className:"zr-citekey-doi","data-doi":d},React.createElement("a",{href:"https://doi.org/"+d,target:"_blank",rel:"noreferrer"},d)):null}),[d]),y=(0,a.useCallback)(Ym(Wm().mark((function e(){var n,o;return Wm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.pdfs,o=m.notes,e.next=3,Qa({item:t,pdfs:n,notes:o},p,i,s,l,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),[r,m,t,i,l,p,s]),v=(0,a.useMemo)((function(){return 0!=m.pdfs.length&&c.includes("pdfLinks")?m.pdfs.map((function(e){return React.createElement(wl,{"zr-role":"pdf-link",key:e.key,alignText:"left",href:Rt(e,"href"),icon:"paperclip",intent:"none",minimal:!0,role:"menuitem",text:e.data.filename||e.data.title})})):null}),[c,m.pdfs]),g=(0,a.useMemo)((function(){return 0!=m.notes.length&&c.includes("importNotes")?React.createElement(ih,{item:t,notes:m.notes,pageUID:p}):null}),[c,m.notes,t,p]),b=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,c.includes("openZoteroLocal")?React.createElement(wl,{icon:"application",intent:"none",text:"Open in Zotero",href:kt(t,{format:"target"}),role:"menuitem"}):null,c.includes("openZoteroWeb")?React.createElement(wl,{icon:"cloud",intent:"none",text:"Open in Zotero [Web library]",href:xt(t,{format:"target"}),role:"menuitem"}):null)}),[c,t]),w=(0,a.useMemo)((function(){return d&&c.includes("sciteBadge")?React.createElement(Fp,Zm({doi:d},u)):null}),[c,d,u]),E=(0,a.useMemo)((function(){var e=c.includes("connectedPapers")?React.createElement(wl,{icon:"layout",intent:"primary",text:"Connected Papers",href:"https://www.connectedpapers.com/"+(d?"api/redirect/doi/"+d:"search?q="+encodeURIComponent(t.data.title)),role:"menuitem"}):null,n=d&&c.includes("semanticScholar")?React.createElement(wl,{icon:"bookmark",intent:"primary",text:"Semantic Scholar",href:"https://api.semanticscholar.org/"+d,role:"menuitem"}):null,r=c.includes("googleScholar")?React.createElement(wl,{icon:"learning",intent:"primary",text:"Google Scholar",href:"https://scholar.google.com/scholar?q="+(d||encodeURIComponent(t.data.title)),role:"menuitem"}):null;return React.createElement(React.Fragment,null,e,n,r)}),[c,d,t.data.title]),S=(0,a.useMemo)((function(){return d&&c.includes("citingPapers")?React.createElement(oh,{doi:d,itemList:n,origin:t.meta.parsedDate?new Date(t.meta.parsedDate).getUTCFullYear().toString():"",title:"@"+t.key}):null}),[c,d,t.key,t.meta.parsedDate,n]),O=(0,a.useMemo)((function(){return ft(t,m.pdfs,m.notes,f)}),[m,t,f]);return React.createElement(Kn,null,h,React.createElement(o.Card,{elevation:0,className:"zr-citekey-menu"},React.createElement("div",{className:"zr-citekey-menu--header"},React.createElement(o.ButtonGroup,{className:"zr-citekey-menu--actions",minimal:!0,role:"menubar"},c.includes("addMetadata")?React.createElement(o.Button,{icon:"add",onClick:y,role:"menuitem"},"Add metadata"):null,g,c.includes("viewItemInfo")?React.createElement(ah,{item:O}):null,b,v,E),w),S))}));function ch(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sh="zr-related-panel-label",fh=(0,a.memo)((function(e){var t=e.abstract,n=e.allAbstractsShown,r=ch(tr(n),2),i=r[0],l=r[1],c=l.set,u=l.toggle;return(0,a.useEffect)((function(){c(n)}),[n,c]),t?React.createElement("div",{className:"zr-related-item--abstract"},React.createElement(o.Button,{className:de.TEXT_SMALL,"zr-role":"abstract-toggle",icon:i?"chevron-down":"chevron-right",onClick:u,minimal:!0,small:!0},"Abstract"),i?React.createElement("span",{"zr-role":"abstract-text",className:[de.TEXT_SMALL,de.TEXT_AUXILIARY].join(" ")},t):null):null})),dh=(0,a.memo)((function(e){var t=e.timestamp;return"added_on"==e.type?React.createElement("span",{className:[o.Classes.MENU_ITEM_LABEL,de.TEXT_SMALL,"zr-related-item--timestamp"].join(" ")},t):null})),ph=(0,a.memo)((function(e){var t=e.allAbstractsShown,n=e.closeDialog,r=e.item,a=e.type,i=r.children,l=i.pdfs,c=i.notes,u=r.raw;return React.createElement("li",{className:"zr-related-item","data-in-graph":(0!=r.inGraph).toString()},React.createElement("div",{className:o.Classes.MENU_ITEM},React.createElement(dh,{timestamp:r.timestamp,type:a}),React.createElement("div",{className:[o.Classes.FILL,"zr-related-item-contents"].join(" ")},React.createElement("div",{className:o.Classes.FILL,style:{display:"flex"}},React.createElement("div",{className:"zr-related-item-contents--metadata"},React.createElement("span",{className:"zr-related-item--title","data-item-type":r.itemType},r.title),React.createElement("span",{className:de.TEXT_ACCENT_1},r.meta)),React.createElement("span",{className:"zr-related-item-contents--actions"},React.createElement(hl,{closeDialog:n,inGraph:r.inGraph,item:u,notes:c,pdfs:l}))),React.createElement(fh,{abstract:r.abstract,allAbstractsShown:t}))))})),mh=(0,a.memo)((function(e){var t=e.allAbstractsShown,n=e.closeDialog,r=e.items,i=e.type,l=(0,a.useMemo)((function(){var e=i==Yp.ADDED_ON?"added":"meta";return qt(r,e)}),[r,i]);return React.createElement("ul",{className:o.Classes.LIST_UNSTYLED},l.map((function(e){return React.createElement(ph,{key:[e.location,e.key].join("-"),allAbstractsShown:t,closeDialog:n,item:e,type:i})})))}));const hh=(0,a.memo)((function(e){var t=e.isOpen,n=e.items,r=e.onClose,i=e.show,l=ch(tr(!1),2),c=l[0],u=l[1].toggle,s=(0,a.useMemo)((function(){var e=i.title;switch(i.type){case Yp.ADDED_ON:return{string:"item",suffix:" added on "+e};case Yp.WITH_ABSTRACT:return{string:"abstract",suffix:" containing "+e};case Yp.WITH_TAG:default:return{string:"item",suffix:" tagged with "+e}}}),[i]),f=(0,a.useMemo)((function(){return React.createElement("h5",{id:sh,className:"panel-tt"},Nt(n.length,s.string,s.suffix))}),[n.length,s]),d=(0,a.useMemo)((function(){return React.createElement("div",{className:["header-right",de.TEXT_AUXILIARY].join(" ")},React.createElement(o.Button,{icon:"cross",minimal:!0,onClick:r,title:"Close dialog"}))}),[r]);return React.createElement(me,{ariaLabelledBy:sh,className:"related",isOpen:t,onClose:r},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement(Kn,null,React.createElement("div",{className:"header-content"},React.createElement("div",{className:"header-left"},f,React.createElement(o.Button,{className:de.TEXT_SMALL,minimal:!0,onClick:u,"zr-role":"toggle-abstracts"},c?"Hide":"Show"," abstracts")),d),React.createElement("div",{className:"rendered-div"},React.createElement(mh,{allAbstractsShown:c,closeDialog:r,items:n,type:i.type})))))}));function yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const vh=function(e){var t,n,r=e.added,i=e.title,l=(t=tr(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return yh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yh(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],s=u.on,f=u.off,d=r.length>0,p=(0,a.useMemo)((function(){return Nt(r.length,"item"," added")}),[r.length]);return React.createElement(React.Fragment,null,d?React.createElement(React.Fragment,null,React.createElement(o.Button,{minimal:!0,icon:"calendar",onClick:s},p),React.createElement(hh,{isOpen:c,items:r,onClose:f,show:{title:i,type:Yp.ADDED_ON}})):null)};function gh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const wh=function(e){var t=e.inAbstract,n=void 0===t?[]:t,r=e.tag,i=e.tagged,l=void 0===i?[]:i,c=gh(tr(!1),2),u=c[0],s=c[1],f=s.on,d=s.off,p=gh((0,a.useState)(),2),m=p[0],h=p[1],y=l.length>0,v=n.length>0,g=(0,a.useMemo)((function(){return{title:r,type:l.length>0?Yp.WITH_TAG:Yp.WITH_ABSTRACT}}),[r,l.length]),b=(0,a.useCallback)((function(){f(),h({title:r,type:Yp.WITH_ABSTRACT})}),[r,f]),w=(0,a.useCallback)((function(){f(),h({title:r,type:Yp.WITH_TAG})}),[r,f]),E=(0,a.useMemo)((function(){return Nt(n.length,"abstract")}),[n.length]),S=(0,a.useMemo)((function(){return Nt(l.length,"tagged item")}),[l.length]);return React.createElement(React.Fragment,null,y&&React.createElement(o.Button,{minimal:!0,icon:"manual",onClick:w},S),v&&React.createElement(o.Button,{minimal:!0,icon:"manually-entered-data",onClick:b},E),(y||v)&&React.createElement(hh,{isOpen:u,items:(m||g).type==Yp.WITH_TAG?l:n,onClose:d,show:m||g}))};function Eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sh=new RegExp(/(.+) ([0-9]+).{2}, ([0-9]{4})/);function Oh(e,t,n){var r=t.pdfs,o=void 0===r?[]:r,a=t.notes,i=void 0===a?[]:a,l=e.meta.creatorSummary||"",c=e.meta.parsedDate?"(".concat(new Date(e.meta.parsedDate).getUTCFullYear(),")"):"",u=e.data.key,s=e.library.type+"s/"+e.library.id,f=_t(u,s,{pdfs:o,notes:i});return{abstract:e.data.abstractNote||"",added:e.data.dateAdded,children:f,inGraph:n.get("@"+e.key)||!1,itemType:e.data.itemType,key:e.key,location:s,meta:[l,c].filter(Be).join(" "),raw:e,timestamp:Pt(e.data.dateAdded),title:e.data.title||""}}function kh(e){return kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(e)}function Rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==kh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==kh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===kh(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Th(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ch(e){var t=e.menus,n=Th(jd(),1)[0].trigger,o=Th(Po(),1)[0].dataRequests,i=ju(o,{select:function(e){return e.data},notifyOnChangeProps:["data"]}),l=(0,a.useMemo)((function(){return i.map((function(e){return e.data||[]})).flat(1)}),[i]),c=(0,a.useMemo)((function(){return st(l)}),[l]),u=(0,a.useMemo)((function(){return c.items.filter((function(e){return e.has_citekey}))}),[c]),s=(0,a.useMemo)((function(){return u?t.filter((function(e){return n.constructor!==Boolean||n})).map((function(e){var t=u.find((function(t){return t.key==e.getAttribute("data-citekey")}));return{div:e,item:t}})).map((function(e,t){if(e.item){var n=e.item,o=e.div;return(0,r.createPortal)(React.createElement(lh,{key:t,item:n,itemList:c}),o)}})):null}),[u,c,t,n]);return React.createElement(React.Fragment,null,s)}function jh(e){var t=e.menus,n=Th(jd(),1)[0].trigger,o=Th(Po(),1)[0].dataRequests,i=Th(ii(),1)[0],l=ju(o,{notifyOnChangeProps:["data"],select:function(e){return e.data}}).map((function(e){return e.data||[]})).flat(1),c=(0,a.useMemo)((function(){return st(l)}),[l]),u=(0,a.useMemo)((function(){var e=c.items,o=c.pdfs,a=c.notes;return e?t.filter((function(e){return"boolean"!=typeof n||n})).map((function(t){var n=t.getAttribute("data-title"),r=new Date(JSON.parse(t.getAttribute("data-dnp-date"))).toDateString();return{div:t,added:e.filter((function(e){return new Date(e.data.dateAdded).toDateString()==r})).map((function(e){return Oh(e,{pdfs:o,notes:a},i)})),title:n}})).filter((function(e){return e.added})).map((function(e,t){var n=e.added,o=e.div,a=e.title;return(0,r.createPortal)(React.createElement(vh,{key:t,added:n,title:a}),o)})):null}),[c,t,i,n]);return React.createElement(React.Fragment,null,u)}function Ah(e){var t=e.menus,n=Th(jd(),1)[0].trigger,o=Th(Po(),1)[0].dataRequests,i=Th(ii(),1)[0],l=ju(o,{notifyOnChangeProps:["data"],select:function(e){return e.data}}).map((function(e){return e.data||[]})).flat(1),c=(0,a.useMemo)((function(){return st(l)}),[l]),u=(0,a.useMemo)((function(){return c.items.filter((function(e){return e.data.abstractNote||e.data.tags.length>0})).map((function(e){return{itemData:e,abstract:e.data.abstractNote||"",tagList:e.data.tags.map((function(e){return e.tag}))}}))}),[c.items]),s=(0,a.useMemo)((function(){var e=c.items,o=c.pdfs,a=c.notes;return e?t.filter((function(e){return"boolean"==typeof n?n:e.getAttribute("data-title").length>5})).map((function(e){var t=e.getAttribute("data-title"),n=u.reduce((function(e,n){return n.abstract.includes(t)&&e.with_abstract.push(Oh(n.itemData,{pdfs:o,notes:a},i)),n.tagList.includes(t)&&e.with_tags.push(Oh(n.itemData,{pdfs:o,notes:a},i)),e}),{with_tags:[],with_abstract:[]});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rh(Object(n),!0).forEach((function(t){xh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({div:e,tag:t},n)})).filter((function(e){return e.with_tags.length>0||e.with_abstract.length>0})).map((function(e,t){var n=e.with_tags,o=e.with_abstract,a=e.div,i=e.tag;return(0,r.createPortal)(React.createElement(wh,{key:t,tag:i,inAbstract:o,tagged:n}),a)})):null}),[c,t,i,n,u]);return React.createElement(React.Fragment,null,s)}function Ph(e){return Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(e)}function Ih(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nh(Object(n),!0).forEach((function(t){Mh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ph(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ph(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ph(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zh=(0,a.memo)((function(e){var t=e.isSelected,n=e.item,r=e.onSelect,i=Ih(il(),1)[0],l=(0,a.useCallback)((function(){r(n.url)}),[n.url,r]);return React.createElement("li",{className:"zr-webimport-item","aria-label":n.url,onClick:l},React.createElement("div",{className:o.Classes.MENU_ITEM},React.createElement("div",{className:"zr-webimport-item--header"},React.createElement(o.Checkbox,{checked:t,className:"zr-webimport-item--title",inline:!1,labelElement:React.createElement(React.Fragment,null,React.createElement("a",{target:"_blank",rel:"noreferrer",href:n.url},n.title),n.creators?React.createElement("span",{className:de.TEXT_SECONDARY,"zr-role":"item-creators"}," (",n.creators,")"):null),onChange:l}),n.itemType?React.createElement(o.Tag,{htmlTitle:n.publication,minimal:!0,"zr-role":"item-type"},React.createElement("span",{"data-item-type":n.itemType},i[n.itemType]||n.itemType)):null),React.createElement("div",{className:"zr-webimport-item--contents"},React.createElement("span",{className:[de.TEXT_SMALL,de.TEXT_AUXILIARY].join(" "),"zr-role":"item-abstract"},n.abstract))))}));const Fh=(0,a.memo)((function(e){var t=e.isOpen,n=e.onClose,r=e.urls,i=Ih(Tp({start:[]}),2),l=i[0],c=i[1],u=c.set,s=c.toggle,f=l.length>0,d=function(e){return _u(e,Dh(Dh({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{select:function(e){var t,n=e.item,r=e.query;return{abstract:n.abstractNote||"",creators:null===(t=n.creators)||void 0===t?void 0:t.map((function(e){return"name"in e?e.name:[e.firstName,e.lastName].filter(Be).join(" ")})).join(", "),itemType:n.itemType,publication:n.publicationTitle||n.bookTitle||n.websiteTitle||"",title:n.title,url:r}},notifyOnChangeProps:["data","isLoading"]}))}(r,{enabled:t}),p=d.every((function(e){return e.isLoading})),m=d.filter((function(e){return e.isSuccess})).map((function(e){return e.data})).filter(Be),h=(0,a.useCallback)((function(){u([]),n()}),[n,u]);return React.createElement(me,{ariaLabelledBy:"zr-webimport-dialog--title",className:"webimport",extraClasses:f?["has-selected-items"]:[],isOpen:t,onClose:h},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement(Kn,null,React.createElement("div",{className:"zr-webimport-panel--main"},React.createElement("div",{className:"header-content"},React.createElement("div",{className:"header-left"},React.createElement("h5",{id:"zr-webimport-dialog--title",className:"panel-tt"},p?"Parsing links...":Nt(m.length,"link"," found")),!p&&React.createElement(Wp,null)),React.createElement("div",{className:["header-right",de.TEXT_AUXILIARY].join(" ")},React.createElement(o.Button,{icon:"cross",large:!0,minimal:!0,onClick:h,title:"Close dialog"}))),React.createElement("div",{className:"rendered-div"},React.createElement("ul",{className:o.Classes.LIST_UNSTYLED},m.map((function(e){return React.createElement(zh,{key:e.url,item:e,isSelected:l.includes(e.url),onSelect:s})}))))),React.createElement("div",{className:"zr-webimport-panel--side",tabIndex:0},React.createElement(xm,{identifiers:l,isActive:f,resetImport:function(){return u([])}})))))}));function Uh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qh=(0,a.memo)((function(e){var t=e.urls,n=Uh(tr(!1),2),r=n[0],a=n[1],i=a.on,l=a.off;return React.createElement(React.Fragment,null,React.createElement(o.Button,{className:"zr-webimport-button",icon:"geosearch",minimal:!0,onClick:i}),React.createElement(Fh,{isOpen:r,onClose:l,urls:t}))}));const Xh=function(e){var t=e.divs,n=(0,a.useRef)(!1),o=Uh((0,a.useState)([]),2),i=o[0],l=o[1],c=(0,a.useCallback)((function(){l((function(e){var n=Array.from(t).filter((function(e){var t;return((null==e||null===(t=e.parentElement)||void 0===t?void 0:t.querySelectorAll(".rm-block a:not(.rm-alias--page):not(.rm-alias--block)"))||[]).length>0}));return Tt(e,n)?n:e}))}),[t]);return(0,a.useEffect)((function(){n.current=!0;var e=setInterval((function(){n.current&&c()}),1e3);return function(){n.current=!1,clearInterval(e)}}),[c]),React.createElement(React.Fragment,null,Array.from(i).map((function(e){var t;return{div:e,links:(null===(t=e.parentElement)||void 0===t?void 0:t.querySelectorAll(".rm-block a:not(.rm-alias--page):not(.rm-alias--block)"))||[]}})).filter((function(e){return e.links.length>0})).map((function(e,t){var n=e.div,o=e.links,a=Array.from(o).map((function(e){return e.href}));return(0,r.createPortal)(React.createElement(qh,{key:t,urls:a}),n)})))};var Gh=function(){return Array.from(document.querySelectorAll('[class="'.concat(Vm,'"]')))};function Kh(e){return Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(e)}function Hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hh(Object(n),!0).forEach((function(t){Qh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Kh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Kh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Kh(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Yh=(0,a.memo)((function(){var e=(0,a.useRef)(!1),t=Wh((0,a.useState)({citekeyMenus:[],dnpMenus:[],tagMenus:[]}),2),n=t[0],r=n.citekeyMenus,o=n.dnpMenus,i=n.tagMenus,l=t[1],c=Wh((0,a.useState)([]),2),u=c[0],s=c[1],f=Wh(Qf(),1)[0].trigger,d=Wh(gd(),1)[0].tags,p=(0,a.useCallback)((function(){l((function(e){for(var t={},n={citekeyMenus:Array.from(document.querySelectorAll("[class=".concat(Km.citekey,"]"))),dnpMenus:Array.from(document.querySelectorAll("[class=".concat(Km.dnp,"]"))),tagMenus:Array.from(document.querySelectorAll("[class=".concat(Km.tag,"]")))},r=0,o=Object.keys(n);r<o.length;r++){var a=o[r];Tt(e[a],n[a])&&(t[a]=n[a])}return"{}"===JSON.stringify(t)?e:Vh(Vh({},e),t)})),s((function(e){var t=Gh();return Tt(e,t)?t:e}))}),[]);return(0,a.useEffect)((function(){e.current=!0;var t=setInterval((function(){!function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Eh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(Array.from(document.querySelectorAll("h1.rm-title-display")).filter((function(e){var t;return!(null!==(t=e.parentElement)&&void 0!==t&&t.querySelector("[class*=".concat(Gm,"]")))})));try{for(t.s();!(e=t.n()).done;){var n,r=e.value,o=(null===(n=r.querySelector("span"))||void 0===n?void 0:n.innerText)||r.innerText,a=Ka(o),i=document.createElement("div");switch(i.setAttribute("data-title",o),a&&i.setAttribute("data-uid",a),!0){case o.startsWith("@"):i.classList.add(Km.citekey),i.setAttribute("data-citekey",o.slice(1));break;case Sh.test(o):i.classList.add(Km.dnp),i.setAttribute("data-dnp-date",JSON.stringify(Dt(o,{as_date:!1})));break;default:i.classList.add(Km.tag)}r.insertAdjacentElement("afterend",i)}}catch(e){t.e(e)}finally{t.f()}}(),function(e){Gh().filter((function(t){var n;return!It(e,JSON.parse((null===(n=t.parentElement)||void 0===n?void 0:n.getAttribute("data-page-links"))||"[]"))})).forEach((function(e){return e.remove()}));var t=Array.from(document.querySelectorAll(".rm-block:not(.rm-block--ghost)")).filter((function(t){return!t.querySelector("[class=".concat(Vm,"]"))&&It(e,JSON.parse(t.getAttribute("data-page-links")||"[]"))})),n=document.createElement("span");n.classList.add(Vm),t.forEach((function(e){return e.insertAdjacentElement("afterbegin",n.cloneNode(!0))}))}(d),e.current&&p()}),1e3);return function(){e.current=!1,clearInterval(t),Array.from(document.querySelectorAll("[class*=".concat(Gm,"]"))).forEach((function(e){return e.remove()})),Array.from(document.querySelectorAll("[class=".concat(Vm,"]"))).forEach((function(e){return e.remove()}))}}),[p,d]),React.createElement(React.Fragment,null,r?React.createElement(Ch,{menus:r}):null,o?React.createElement(jh,{menus:o}):null,i?React.createElement(Ah,{menus:i}):null,f?React.createElement(cd,null):null,React.createElement(Xh,{divs:u}),React.createElement(Sd,null))}));function Zh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Jh=(0,a.memo)((function(e){var t,n,r=e.log,i=(t=tr(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Zh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zh(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1].toggle,u=(0,a.useMemo)((function(){return"{}"!=JSON.stringify(r.context||{})}),[r.context]);return React.createElement(No,{className:"zr-logger--entry","data-log-level":r.level},React.createElement("div",{className:"zr-log--header"},React.createElement("div",{className:["zr-log--metadata",o.Classes.MONOSPACE_TEXT].join(" ")},React.createElement("span",{className:"zr-log--timestamp"},Pt(r.timestamp)),React.createElement(o.Tag,{className:"zr-log--level",intent:r.intent,minimal:!0},r.level),React.createElement(o.Tag,{minimal:!0},r.origin)),React.createElement("div",{className:["zr-log--summary",de.TEXT_SMALL].join(" ")},React.createElement("div",null,React.createElement("span",{className:o.Classes.MONOSPACE_TEXT},r.message),r.detail&&React.createElement("span",{className:[o.Classes.MONOSPACE_TEXT,de.TEXT_SECONDARY,de.TEXT_SMALL].join(" ")},r.detail)),u&&React.createElement(o.Button,{className:de.TEXT_SECONDARY,rightIcon:l?"chevron-up":"chevron-down",minimal:!0,onClick:c,small:!0,text:l?"Hide":"View",title:"Show details"}))),React.createElement("div",{className:"zr-log--details"},u&&React.createElement(o.Collapse,{isOpen:l},React.createElement("pre",{className:[o.Classes.CODE_BLOCK,de.TEXT_AUXILIARY].join(" ")},JSON.stringify(r.context,null,"  ")))))}));function ey(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||ty(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){if(e){if("string"==typeof e)return ny(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ny(e,t):void 0}}function ny(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ry(e){var t,n,r=e.items,i=ey(tr(!1),2),l=i[0],c=i[1].toggle,u=Ac({itemsPerPage:20}),s=u.currentPage,f=u.pageLimits,d=u.setCurrentPage,p=(0,a.useMemo)((function(){return l?r:r.filter((function(e){return"error"==e.level}))}),[r,l]);return(0,a.useEffect)((function(){d(1)}),[r,p,d]),React.createElement("div",{className:"zr-logger--datalist"},0==p.length?React.createElement(o.NonIdealState,{className:de.TEXT_AUXILIARY,description:"No items to display"}):React.createElement(Do,null,(t=p.sort((function(e,t){return e.timestamp>t.timestamp?-1:1}))).slice.apply(t,(n=f,function(e){if(Array.isArray(e))return ny(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||ty(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e,t){return React.createElement(Jh,{key:t,log:e})}))),React.createElement(zo,null,React.createElement(Mo,{arrows:"first",currentPage:s,itemsPerPage:20,nbItems:p.length,setCurrentPage:d}),React.createElement(o.Switch,{"aria-checked":l,checked:l,label:"Show all entries",role:"switch",onChange:c})))}const oy=(0,a.memo)((function(e){var t=e.isOpen,n=e.onClose,r=ey((0,a.useState)(null),2),i=r[0],l=r[1];return(0,a.useEffect)((function(){try{var e=window.zoteroRoam.logs;l(e)}catch(e){console.error(e),l([])}}),[]),React.createElement(me,{className:"logger",isOpen:t,label:"zoteroRoam Logs",onClose:n},React.createElement("div",{className:o.Classes.DIALOG_BODY},null==i?React.createElement(o.Spinner,{size:15}):React.createElement(ry,{items:i})))}));var ay=["ariaLabelledBy","children","className","isOpen","lazy","onClose","onOpening"];function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iy.apply(this,arguments)}const ly=function(e){var t=e.ariaLabelledBy,n=e.children,i=e.className,l=e.isOpen,c=e.lazy,u=void 0===c||c,s=e.onClose,f=e.onOpening,d=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ay),p=Jy().portalId,m=(0,a.useMemo)((function(){return de.PREFIX_DIALOG_OVERLAY+i}),[i]),h=(0,a.useMemo)((function(){return{flex:"1 1 100%"}}),[]);return(0,r.createPortal)(React.createElement(o.Dialog,iy({"aria-labelledby":t,canEscapeKeyClose:!0,canOutsideClickClose:!0,className:m,enforceFocus:!1,isOpen:l,lazy:u,onClose:s,onOpening:f,usePortal:!1},d),React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement("div",{className:"main-panel",style:h},n))),document.getElementById(p))};var cy="zr-library-search-dialogtitle",uy=[o.Classes.TEXT_OVERFLOW_ELLIPSIS,"zr-library-item--contents"].join(" "),sy=[o.Classes.MENU_ITEM_LABEL,"zr-library-item--key"].join(" ");function fy(e){return fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(e)}function dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function py(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dy(Object(n),!0).forEach((function(t){my(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function my(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==fy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==fy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===fy(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const yy=(0,a.memo)((function(e){var t,n,r=e.handleClose,i=e.handleKeyDown,l=e.handleKeyUp,c=e.handleQueryChange,u=e.quickCopyProps,s=u.isActive,f=u.toggle,d=e.searchbar,p=(t=Bd(),n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return hy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hy(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],m=(0,a.useMemo)((function(){return po(p)}),[p]),h=(0,a.useMemo)((function(){return React.createElement(o.Icon,{id:cy,title:"Search in Zotero items",htmlTitle:"Search in Zotero items",intent:"primary",icon:"learning"})}),[]),y=(0,a.useMemo)((function(){return React.createElement(React.Fragment,null,React.createElement(o.Switch,{className:["zr-quick-copy",de.TEXT_AUXILIARY].join(" "),label:"Quick Copy",checked:s,onChange:f,role:"switch","aria-checked":s}),React.createElement(o.Button,{className:o.Classes.MINIMAL,large:!0,icon:"cross",onClick:r,title:"Close searchbar"}))}),[r,s,f]),v=(0,a.useMemo)((function(){var e={allowInInput:!0,global:!0,preventDefault:!0,stopPropagation:!0},t={focusSearchBar:{label:"Focus the searchbar",onKeyDown:function(){var e;return null==d||null===(e=d.current)||void 0===e?void 0:e.focus()}},toggleQuickCopy:{label:"Toggle QuickCopy",onKeyDown:function(){return f()}}};return Object.keys(t).map((function(n){var r=m[n]||"";return""!==r&&py(py(py({},e),t[n]),{},{combo:r})})).filter(Be)}),[d,m,f]);return(0,o.useHotkeys)(v,{showDialogKeyCombo:"shift+Z+R"}),React.createElement(o.InputGroup,{className:[o.Classes.INPUT,o.Classes.FILL,"zr-library-search-input-group"].join(" "),id:"zotero-roam-search-autocomplete",placeholder:"Search in abstract, title, authors (last names), year, tags, or citekey",spellCheck:"false",autoComplete:"off",type:"text",large:!0,onChange:c,onKeyDown:i,onKeyUp:l,inputRef:d,leftElement:h,rightElement:y})}));function vy(e){return vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(e)}var gy=["filteredItems","itemsParentRef"];function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},by.apply(this,arguments)}function wy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ey(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ey(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ey(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oy(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==vy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==vy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===vy(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ky={itemListPredicate:function(e,t){return e.length<0?[]:t.filter((function(t){return Mt(e,[t.key,t._multiField],{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"})}))},itemListRenderer:function(e){var t=e.filteredItems,n=e.itemsParentRef,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,gy),a=t.length,i=(0,Jn.renderFilteredItems)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sy(Object(n),!0).forEach((function(t){Oy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({filteredItems:t.slice(0,50),itemsParentRef:n},r),null,null);return null==i?null:React.createElement(React.Fragment,null,React.createElement(o.Menu,{ulRef:n},i),a>50&&React.createElement("div",{className:"zr-querylist--more-results"},"Showing ",50," out of ",Nt(a,"result")))},itemRenderer:function(e,t){var n=t.handleClick,r=t.modifiers,o=[e.location,e.key].join("-");return React.createElement(Ry,{key:o,handleClick:n,item:e,modifiers:r})},itemsEqual:function(e,t){return e.itemKey==t.itemKey&&e.location==t.location}},Ry=(0,a.memo)((function(e){var t=e.item,n=e.handleClick,r=e.modifiers,a=t.inGraph,i=t.itemType,l=t.key,c=t.meta,u=t.publication,s=t.title;return React.createElement(o.MenuItem,{onClick:n,className:"zotero-roam-search_result",role:"menuitem","data-item-type":i,"data-in-graph":(0!=a).toString(),htmlTitle:s,labelElement:"@"+l,labelClassName:sy,"aria-selected":r.active,tagName:"div",text:React.createElement(React.Fragment,null,React.createElement("span",{className:"zr-library-item--title"},s),React.createElement("span",{className:"zr-details"},React.createElement("span",{className:de.TEXT_ACCENT_1},c),React.createElement("span",{className:de.TEXT_SECONDARY},u))),textClassName:uy})})),xy=(0,a.memo)((function(e){var t=e.handleClose,n=e.itemList,r=e.selectedItem;return r?React.createElement(yp,{item:r,closeDialog:t}):React.createElement("div",{id:"zotero-roam-library-rendered"},n)}));const Ty=(0,a.memo)((function(e){var t,n,r,o=e.handleClose,i=e.isOpen,l=e.items,c=e.quickCopyProps,u=wy($d(),1)[0],s=(0,a.useRef)(null),f=wy((0,a.useState)(null),2),d=f[0],p=f[1],m=wy((0,a.useState)(),2),h=m[0],y=m[1],v=wy((t=function(e){},300,n=(0,a.useRef)(void 0),r=function(){n.current&&(clearTimeout(n.current),n.current=null)},[(0,a.useCallback)((function(e){r(),n.current=setTimeout((function(){n.current=null}),300)}),[t,300]),r]),1)[0],g=(0,a.useCallback)((function(e,t){if(e){var n,r,a=e.key,i=e.location;if(JSON.stringify(d)===JSON.stringify({key:a,location:i}))return;c.isActive?(yt(tp(e,u)),u.overrideKey&&1==(null==t?void 0:t[u.overrideKey])?(null==s||null===(n=s.current)||void 0===n||n.blur(),p({key:a,location:i})):o()):(1==u.always&&yt(tp(e,u)),null==s||null===(r=s.current)||void 0===r||r.blur(),p({key:a,location:i}))}else p(null)}),[u,o,c.isActive,s,d]),b=(0,a.useMemo)((function(){if(null==d)return null;var e=d.key,t=d.location;return l.find((function(n){return n.key==e&&n.location==t}))}),[l,d]),w=(0,a.useCallback)((function(e,t){p(null),y(e),v(e)}),[v]),E=(0,a.useCallback)((function(e){var t=e.handleKeyUp,n=e.handleKeyDown,r=e.handleQueryChange,a=e.itemList;return React.createElement("div",{className:"zr-querylist"},React.createElement(yy,{handleClose:o,handleKeyDown:n,handleKeyUp:t,handleQueryChange:r,quickCopyProps:c,searchbar:s}),React.createElement(xy,{handleClose:o,itemList:a,selectedItem:b}))}),[o,c,s,b]);return(0,a.useEffect)((function(){var e;i?null==s||null===(e=s.current)||void 0===e||e.focus():(y(""),p(null))}),[i,s]),React.createElement(Jn.QueryList,by({items:l,onItemSelect:g,onQueryChange:w,query:h,renderer:E},ky))}));function _y(e){return _y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(e)}function Cy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jy(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Py(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ay(Object(n),!0).forEach((function(t){Iy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Iy(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==_y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ly=(0,a.memo)((function(e){var t=e.isOpen,n=e.onClose,r=e.status,o=Cy($d(),1)[0].useQuickCopy,i=Cy(Po(),1)[0].dataRequests,l=Cy(ii(),1)[0],c=Cy(tr(o),2),u=c[0],s=c[1].toggle,f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,a.useCallback)((function(e){return e.data?function(e,t){var n=st(e);return n.items.map((function(e){var r=_t(e.data.key,e.library.type+"s/"+e.library.id,{pdfs:n.pdfs,notes:n.notes});return ft(e,r.pdfs,r.notes,t)}))}(e.data,t):[]}),[t]),o=ju(e,Py(Py({},n),{},{notifyOnChangeProps:["data"],select:r}));return(0,a.useMemo)((function(){return o.map((function(e){return e.data||[]})).flat(1)}),[o])}(i,l,{enabled:r==Rf.ON});return React.createElement(ly,{ariaLabelledBy:cy,className:"search-library",isOpen:t,lazy:!1,onClose:n},React.createElement(Kn,null,React.createElement(Ty,{handleClose:n,isOpen:t,items:f,quickCopyProps:{isActive:u,toggle:s}})))}));var Ny=[{component:Ao,id:"requests",widget:function(){var e=_o(Po(),2),t=e[0].dataRequests,n=e[1],r=_o(tr(!1),2),i=r[0],l=r[1],c=l.on,u=l.off,s=(0,a.useCallback)((function(e){return n((function(t){return e}))}),[n]);return React.createElement(React.Fragment,null,React.createElement(gr,{title:"Data Requests",description:"Choose which items to sync from Zotero",rightElement:React.createElement(o.Button,{className:de.TEXT_SMALL,icon:0==t.length?"arrow-right":null,intent:"warning",minimal:!0,onClick:c,text:0==t.length?"Add request":"Edit"})},t.map((function(e){return React.createElement(Nr,{key:e.name,request:e})}))),React.createElement(o.Dialog,{className:"zr-data-requests-dialog",isOpen:i,onClose:u},React.createElement(To,{closeDialog:u,dataRequests:t,updateRequests:s})))}},{component:Ei,id:"annotations",widget:function(){var e,t,n=(e=Si(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=r.func,l=r.group_by,c=r.template_comment,u=r.template_highlight,s=r.use,f=r.__with,d=n[1],p=(0,a.useMemo)((function(){function e(e,t){d((function(n){return vi(vi({},n),{},gi({},e,t))}))}return{updateFuncName:function(t){return e("func",t)},updateGroupBy:function(t){return e("group_by",t)},updateTemplateComment:function(t){return e("template_comment",t)},updateTemplateHighlight:function(t){return e("template_highlight",t)},updateUseType:function(t){return e("use",t)},updateWithFormat:function(t){return e("__with",t)}}}),[d]),m=(0,a.useMemo)((function(){return{intent:o.Intent.PRIMARY}}),[]);return React.createElement(React.Fragment,null,React.createElement(gr,{title:"Comment Template",description:xi},React.createElement(_r,{label:"Enter a template for comment blocks",onChange:p.updateTemplateComment,value:c})),React.createElement(gr,{title:"Highlight Template",description:Ti},React.createElement(_r,{label:"Enter a template for highlight blocks",onChange:p.updateTemplateHighlight,value:u})),React.createElement(br,{title:"Formatter",description:"Choose a way to format annotations metadata when importing from Zotero.",onChange:p.updateUseType,options:ki,selected:s},React.createElement(wr,{id:"default"},React.createElement(Tr,{menuTitle:"Select whether annotations should be grouped",onSelect:p.updateGroupBy,options:Oi,value:l})),React.createElement(wr,{id:"function",description:"Enter the inputs and name of your custom function."},React.createElement(Pr,{onSelectChange:p.updateWithFormat,onValueChange:p.updateFuncName,placeholder:"e.g, myFunction",selectButtonProps:m,selectOptions:Ri,selectValue:f,textValue:i,inputLabel:"Enter the name of your custom function for formatting annotations",selectLabel:"Select an input format for your custom function"}))))}},{component:Vf,id:"autocomplete",widget:function(){var e,t,n=(e=Qf(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=r.display_char,i=r.display_use,l=r.display,c=r.format_char,u=r.format_use,s=r.format,f=r.trigger,d=n[1],p=(0,a.useMemo)((function(){function e(e,t){d((function(n){return Xf(Xf({},n),{},Gf({},e,t))}))}return{updateDisplayChar:function(t){return e("display_char",t)},updateDisplayUse:function(t){return e("display_use",t)},updateDisplay:function(t){return e("display",t)},updateFormatChar:function(t){return e("format_char",t)},updateFormatUse:function(t){return e("format_use",t)},updateFormat:function(t){return e("format",t)},updateTrigger:function(t){return e("trigger",t)}}}),[d]);return React.createElement(React.Fragment,null,React.createElement(Ar,{description:"The character(s) that should trigger the autocomplete. If no value is provided, the feature will be disabled.",ifEmpty:!0,label:"Enter a trigger for the 'autocomplete' feature",onChange:p.updateTrigger,placeholder:"e.g, @",title:"Trigger",value:f}),React.createElement(br,{title:"Display",description:"How suggestions should be displayed in the autocomplete menu",onChange:p.updateDisplayUse,options:$f,selected:i},React.createElement(wr,{id:"preset"},React.createElement(Tr,{menuTitle:"Select a display preset",onSelect:p.updateDisplay,options:Wf,value:l})),React.createElement(wr,{alignToBaseline:!0,id:"custom",description:Jf},React.createElement(Ar,{ifEmpty:!0,label:"Enter a custom template",onChange:p.updateDisplayChar,placeholder:"e.g, {{key}}",value:o}))),React.createElement(br,{title:"Format",description:"How references should be inserted into the current Roam block",onChange:p.updateFormatUse,options:Zf,selected:u},React.createElement(wr,{id:"preset"},React.createElement(Tr,{menuTitle:"Select a format preset",onSelect:p.updateFormat,options:Yf,value:s})),React.createElement(wr,{alignToBaseline:!0,id:"custom",description:Jf},React.createElement(Ar,{ifEmpty:!0,label:"Enter a custom template",onChange:p.updateFormatChar,placeholder:"e.g, {{key}}",value:c}))))}},{component:Wd,id:"copy",widget:function(){var e,t,n=(e=$d(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=r.always,i=r.overrideKey,l=r.preset,c=r.template,u=r.useAsDefault,s=r.useQuickCopy,f=n[1],d=(0,a.useMemo)((function(){function e(e){f((function(t){return Kd(Kd({},t),{},Hd({},e,!t[e]))}))}function t(e,t){f((function(n){return Kd(Kd({},n),{},Hd({},e,t))}))}return{toggleAlwaysCopy:function(){return e("always")},updateOverrideKey:function(e){return t("overrideKey",e)},updatePresetFormat:function(e){return t("preset",e)},updateTemplate:function(e){return t("template",e)},updateUseType:function(e){return t("useAsDefault",e)},toggleQuickCopy:function(){return e("useQuickCopy")}}}),[f]);return React.createElement(React.Fragment,null,React.createElement(Ir,{description:"Whether to always copy an item's reference in library search",isChecked:o,label:"Toggle 'always copy' setting",onChange:d.toggleAlwaysCopy,title:"Always copy"}),React.createElement(br,{title:"Format",description:"The default formatting to use when copying an item's reference",onChange:d.updateUseType,options:Zd,selected:u},React.createElement(wr,{id:"preset"},React.createElement(Tr,{menuTitle:"Select a formatting preset",onSelect:d.updatePresetFormat,options:Yd,value:l})),React.createElement(wr,{alignToBaseline:!0,id:"template",description:ep},React.createElement(Ar,{ifEmpty:!0,label:"Enter a custom formatting template",onChange:d.updateTemplate,value:c}))),React.createElement(Tr,{description:"The key to hold to override QuickCopy",menuTitle:"Select an override key for Quick Copy",onSelect:d.updateOverrideKey,options:Jd,title:"Override Key",value:i}),React.createElement(Ir,{description:"Should QuickCopy be enabled by default?",isChecked:s,label:"Toggle 'use quick copy by default' setting",onChange:d.toggleQuickCopy,title:"Use Quick Copy (default)"}))}},{component:Li,id:"metadata",widget:function(){var e,t,n=(e=Ni(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=r.func,l=r.smartblock,c=l.param,u=l.paramValue,s=r.use,f=n[1],d=(0,a.useMemo)((function(){function e(e,t){f((function(n){return ji(ji({},n),{},Ai({},e,t))}))}function t(e,t){var n="param"==e?{param:t,paramValue:""}:{paramValue:t};f((function(e){return ji(ji({},e),{},{smartblock:ji(ji({},e.smartblock),n)})}))}return{updateFuncName:function(t){return e("func",t)},updateSmartblockParam:function(e){return t("param",e)},updateSmartblockParamValue:function(e){return t("paramValue",e)},updateUse:function(t){return e("use",t)}}}),[f]),p=(0,a.useMemo)((function(){return{intent:o.Intent.PRIMARY}}),[]);return React.createElement(br,{title:"Formatter",description:"Choose a way to format item metadata when importing from Zotero.",onChange:d.updateUse,options:Mi,selected:s},React.createElement(wr,{id:"default"}),React.createElement(wr,{id:"function",description:"Enter the name of a custom function to use"},React.createElement(Ar,{ifEmpty:!0,label:"Enter the name of the function to use for formatting metadata",onChange:d.updateFuncName,placeholder:"e.g, myFunction",value:i})),React.createElement(wr,{id:"smartblock",description:"Choose a SmartBlock template"},React.createElement(Pr,{onSelectChange:d.updateSmartblockParam,onValueChange:d.updateSmartblockParamValue,placeholder:"Enter a value",selectButtonProps:p,selectOptions:Di,selectValue:c,textValue:u,inputLabel:"Enter the SmartBlock's"+("srcName"==c?"name":"UID"),selectLabel:"Select the property to use to identify the SmartBlock"})))}},{component:Gi,id:"notes",widget:function(){var e,t,n=(e=Ki(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=r.func,l=r.nest_char,c=r.nest_position,u=r.nest_preset,s=r.nest_use,f=r.split_char,d=r.split_preset,p=r.split_use,m=r.use,h=r.__with,y=n[1],v=(0,a.useMemo)((function(){function e(e,t){y((function(n){return Ui(Ui({},n),{},Bi({},e,t))}))}return{updateFuncName:function(t){return e("func",t)},updateNestChar:function(t){return e("nest_char",t)},updateNestPosition:function(t){return e("nest_position",t)},updateNestPreset:function(t){return e("nest_preset",t)},updateNestUse:function(t){return e("nest_use",t)},updateSplitChar:function(t){return e("split_char",t)},updateSplitPreset:function(t){return e("split_preset",t)},updateSplitUse:function(t){return e("split_use",t)},updateUseType:function(t){return e("use",t)},updateWithFormat:function(t){return e("__with",t)}}}),[y]),g=(0,a.useMemo)((function(){return{intent:o.Intent.PRIMARY}}),[]);return React.createElement(React.Fragment,null,React.createElement(br,{title:"Divider",description:"The character(s) on which to split up notes into blocks",onChange:v.updateSplitUse,options:$i,selected:p},React.createElement(wr,{id:"preset"},React.createElement(Tr,{menuTitle:"Select a separator preset",onSelect:v.updateSplitPreset,options:Wi,value:d})),React.createElement(wr,{id:"custom",description:"Special characters, like \\n, are not allowed."},React.createElement(Ar,{ifEmpty:!0,label:"Enter a custom separator",onChange:v.updateSplitChar,placeholder:"e.g, </p>",value:f}))),React.createElement(br,{title:"Formatter",description:"Choose a way to format notes when importing from Zotero.",onChange:v.updateUseType,options:Yi,selected:m},React.createElement(wr,{id:"default"}),React.createElement(wr,{id:"function",description:"Enter the inputs and name of your custom function."},React.createElement(Pr,{onSelectChange:v.updateWithFormat,onValueChange:v.updateFuncName,placeholder:"e.g, myFunction",selectButtonProps:g,selectOptions:Zi,selectValue:h,textValue:i,inputLabel:"Enter the name of your custom function for formatting notes",selectLabel:"Select an input format for your custom function"}))),React.createElement(br,{title:"Nesting",description:"Pick how to add notes to the Roam page.",onChange:v.updateNestUse,options:Qi,selected:s},React.createElement(wr,{id:"preset"},React.createElement(Tr,{menuTitle:"Select a nesting preset",onSelect:v.updateNestPreset,options:Vi,value:u})),React.createElement(wr,{id:"custom",description:"Enter the contents of the block under which notes should be nested"},React.createElement(Ar,{ifEmpty:!0,label:"Enter the block's contents",onChange:v.updateNestChar,placeholder:"e.g, [[Notes]]",value:l}))),React.createElement(Tr,{description:"The position at which to insert the blocks",menuTitle:"Select a position",onSelect:v.updateNestPosition,options:Hi,title:"Position",value:c}))}},{component:Cd,id:"pageMenu",widget:function(){var e,t,n=(e=jd(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Td(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=r.defaults,i=r.trigger,l=n[1],c=(0,a.useMemo)((function(){function e(e,t){l((function(n){return Rd(Rd({},n),{},xd({},e,t))}))}return{updateMenuElems:function(t){return e("defaults",t)},updateMenuTrigger:function(t){return e("trigger",t)}}}),[l]);return React.createElement(React.Fragment,null,React.createElement(gr,{title:"Elements"},React.createElement(Dl,{fill:!0,openOnKeyDown:!1,options:Ad,setValue:c.updateMenuElems,value:o})),React.createElement(Tr,{description:"Select when contextual menus should be shown. By default, menus are displayed if the page title is longer than 5 characters.",menuTitle:"Select whether to show the page menu",onSelect:c.updateMenuTrigger,options:Pd,title:"Show menus",value:i}))}},{component:Um,id:"sciteBadge",widget:function(){var e,t,n=(e=Bm(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=r.layout,i=r.showLabels,l=r.showZero,c=r.small,u=r.tooltipPlacement,s=r.tooltipSlide,f=n[1],d=(0,a.useMemo)((function(){function e(e){f((function(t){return Dm(Dm({},t),{},Mm({},e,!t[e]))}))}function t(e,t){f((function(n){return Dm(Dm({},n),{},Mm({},e,t))}))}return{selectLayout:function(e){return t("layout",e)},toggleLabels:function(){return e("showLabels")},toggleZero:function(){return e("showZero")},toggleSmall:function(){return e("small")},selectTooltipPlacement:function(e){return t("tooltipPlacement",e)},updateTooltipSlide:function(e){return t("tooltipSlide",e)}}}),[f]);return React.createElement(React.Fragment,null,React.createElement("div",{style:{padding:"10px 0px",textAlign:"center"}},React.createElement(Fp,{doi:"10.1126/science.1179052",layout:o,showLabels:i,showZero:l,small:c,tooltipPlacement:u,tooltipSlide:s})),React.createElement(Tr,{menuTitle:"Select the layout direction for the Scite badge",onSelect:d.selectLayout,options:qm,title:"Layout",value:o}),React.createElement(Ir,{isChecked:i,label:"Toggle if category labels should be shown",onChange:d.toggleLabels,title:"Show labels"}),React.createElement(Ir,{isChecked:l,label:"Toggle if categories with no items should be shown",onChange:d.toggleZero,title:"Show empty categories"}),React.createElement(Ir,{isChecked:c,label:"Toggle if Scite badges should use a smaller styling",onChange:d.toggleSmall,title:"Use small styling"}),React.createElement(Tr,{menuTitle:"Select the placement of the badge tooltip",onSelect:d.selectTooltipPlacement,options:Xm,title:"Tooltip Placement",value:u}),React.createElement(Rr,{label:"Indicate a numeric offset for the placement of the badge tooltip",setValue:d.updateTooltipSlide,title:"Tooltip Offset",value:s}))}},{component:Ud,id:"shortcuts",widget:function(){var e,t,n=(e=Bd(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=n[1],i=(0,a.useCallback)((function(e,t){o((function(n){return Dd(Dd({},n),{},Md({},e,t))}))}),[o]);return React.createElement(React.Fragment,null,Object.keys(r).map((function(e){return React.createElement(Ar,{key:e,ifEmpty:!0,label:"Enter a keyboard shortcut to use to"+ut(e),onChange:function(t){return i(e,t)},title:ut(e),validate:qd,value:r[e]})})))}},{component:al,id:"typemap",widget:function(){var e,t,n=(e=il(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=n[1],i=(0,a.useCallback)((function(e,t){o((function(n){return tl(tl({},n),{},nl({},e,t))}))}),[o]);return React.createElement(React.Fragment,null,Object.keys(r).map((function(e){return React.createElement(Ar,{key:e,ifEmpty:!0,label:"Enter a mapping for"+ut(e),onChange:function(t){return i(e,t)},title:e,value:r[e]})})))}},{component:vd,id:"webimport",widget:function(){var e,t,n=(e=gd(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||md(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0].tags,o=n[1],i=(0,a.useMemo)((function(){return{addTag:function(e){o((function(t){return dd(dd({},t),{},{tags:Array.from(new Set([].concat(sd(t.tags),[e])))})}))},removeTag:function(e){o((function(t){return dd(dd({},t),{},{tags:t.tags.filter((function(t){return t!=e}))})}))}}}),[o]);return React.createElement(React.Fragment,null,React.createElement(gr,{title:"Tags",description:"Select tags for which to show the import button"},React.createElement(Xl,{onRemove:i.removeTag,onSelect:i.addTag,selectedTags:r})))}},{component:Of,id:"other",widget:function(){var e,t,n=(e=kf(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ef(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=r.autoload,i=r.cacheEnabled,l=r.darkTheme,c=r.render_inline,u=n[1],s=(0,a.useMemo)((function(){function e(e){u((function(t){return bf(bf({},t),{},wf({},e,!t[e]))}))}return{toggleAutoload:function(){return e("autoload")},toggleCacheEnabled:function(){return e("cacheEnabled")},toggleDarkTheme:function(){return e("darkTheme")},toggleRenderInline:function(){return e("render_inline")}}}),[u]);return React.createElement(React.Fragment,null,React.createElement(Ir,{description:"Activate the extension on graph load",isChecked:o,label:"Toggle 'autoload' setting",onChange:s.toggleAutoload,title:"Autoload"}),React.createElement(Ir,{description:"Cache API data between sessions, to optimize loading times.",isChecked:i,label:"Toggle 'cache enabled' setting",onChange:s.toggleCacheEnabled,title:"Enable Cache"}),React.createElement(Ir,{isChecked:l,label:"Toggle 'dark theme' setting",onChange:s.toggleDarkTheme,title:"Use Dark Theme by default"}),React.createElement(Ir,{description:"This will display [[@citekey]] references as a formatted citation, like Scott et al. (2003). Block content will not be affected.",isChecked:c,label:"Toggle 'render inline' setting",onChange:s.toggleRenderInline,title:"Display references as citations"}))}}];function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dy.apply(this,arguments)}var My={className:"zr-settings-tab",panelClassName:"zr-settings-panel"};function zy(e){var t=e.isOpen,n=e.onClose;return React.createElement(me,{className:"settings",isOpen:t,label:"zoteroRoam settings",onClose:n},React.createElement("div",{className:o.Classes.DIALOG_BODY},React.createElement("div",{className:"zr-settings--main"},React.createElement(o.Tabs,{animate:!1,className:[de.TABS,"zr-settings-tabs-wrapper"].join(" "),id:"zr-settings--tabs",vertical:!0},Ny.filter((function(e){return e.widget})).map((function(e){var t=e.id,n=e.widget;return React.createElement(o.Tab,Dy({key:t,id:t,panel:React.createElement(Kn,null,React.createElement(n,null)),title:ut(t)},My))})),React.createElement(o.Tabs.Expander,null),React.createElement(wl,{active:!0,fill:!0,href:"https://alix-lahuec.gitbook.io/zotero-roam/customization/user-settings",intent:"primary",rightIcon:"document-open",text:"Docs"})))))}function Fy(e){return Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(e)}function Uy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function By(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hy(r.key),r)}}function qy(e,t){return qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qy(e,t)}function Xy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gy(e){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gy(e)}function Ky(e,t,n){return(t=Hy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hy(e){var t=function(e,t){if("object"!==Fy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Fy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Fy(t)?t:String(t)}function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(this,arguments)}function Qy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wy(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}zy.propTypes={isOpen:Fo.bool,onClose:Fo.func};var $y="zoteroRoam : Open Search Panel",Yy="zoteroRoam : Open Dashboard",Zy=(0,a.createContext)(null),Jy=function(){var e=(0,a.useContext)(Zy);if(!e)throw new Error("No context provided");return e},ev=new class{constructor(e={}){this.queryCache=e.queryCache||new U,this.mutationCache=e.mutationCache||new q,this.logger=e.logger||_,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=A.subscribe((()=>{A.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())})),this.unsubscribeOnline=P.subscribe((()=>{P.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())})))}unmount(){var e,t;this.mountCount--,0===this.mountCount&&(null==(e=this.unsubscribeFocus)||e.call(this),this.unsubscribeFocus=void 0,null==(t=this.unsubscribeOnline)||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[n]=d(e,t);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data}ensureQueryData(e,t,n){const r=f(e,t,n),o=this.getQueryData(r.queryKey);return o?Promise.resolve(o):this.fetchQuery(r)}getQueriesData(e){return this.getQueryCache().findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,n){const r=this.queryCache.find(e),o=function(e,t){return"function"==typeof e?e(t):e}(t,null==r?void 0:r.state.data);if(void 0===o)return;const a=f(e),i=this.defaultQueryOptions(a);return this.queryCache.build(this,i).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return C.batch((()=>this.getQueryCache().findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,n)]))))}getQueryState(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state}removeQueries(e,t){const[n]=d(e,t),r=this.queryCache;C.batch((()=>{r.findAll(n).forEach((e=>{r.remove(e)}))}))}resetQueries(e,t,n){const[r,o]=d(e,t,n),a=this.queryCache,i={type:"active",...r};return C.batch((()=>(a.findAll(r).forEach((e=>{e.reset()})),this.refetchQueries(i,o))))}cancelQueries(e,t,n){const[r,o={}]=d(e,t,n);void 0===o.revert&&(o.revert=!0);const a=C.batch((()=>this.queryCache.findAll(r).map((e=>e.cancel(o)))));return Promise.all(a).then(l).catch(l)}invalidateQueries(e,t,n){const[r,o]=d(e,t,n);return C.batch((()=>{var e,t;if(this.queryCache.findAll(r).forEach((e=>{e.invalidate()})),"none"===r.refetchType)return Promise.resolve();const n={...r,type:null!=(e=null!=(t=r.refetchType)?t:r.type)?e:"active"};return this.refetchQueries(n,o)}))}refetchQueries(e,t,n){const[r,o]=d(e,t,n),a=C.batch((()=>this.queryCache.findAll(r).filter((e=>!e.isDisabled())).map((e=>{var t;return e.fetch(void 0,{...o,cancelRefetch:null==(t=null==o?void 0:o.cancelRefetch)||t,meta:{refetchPage:r.refetchPage}})}))));let i=Promise.all(a).then(l);return null!=o&&o.throwOnError||(i=i.catch(l)),i}fetchQuery(e,t,n){const r=f(e,t,n),o=this.defaultQueryOptions(r);void 0===o.retry&&(o.retry=!1);const a=this.queryCache.build(this,o);return a.isStaleByTime(o.staleTime)?a.fetch(o):Promise.resolve(a.state.data)}prefetchQuery(e,t,n){return this.fetchQuery(e,t,n).then(l).catch(l)}fetchInfiniteQuery(e,t,n){const r=f(e,t,n);return r.behavior={onFetch:e=>{e.fetchFn=()=>{var t,n,r,o,a,i;const l=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,c=null==(r=e.fetchOptions)||null==(o=r.meta)?void 0:o.fetchMore,u=null==c?void 0:c.pageParam,s="forward"===(null==c?void 0:c.direction),f="backward"===(null==c?void 0:c.direction),d=(null==(a=e.state.data)?void 0:a.pages)||[],p=(null==(i=e.state.data)?void 0:i.pageParams)||[];let m=p,h=!1;const y=e.options.queryFn||(()=>Promise.reject("Missing queryFn")),v=(e,t,n,r)=>(m=r?[t,...m]:[...m,t],r?[n,...e]:[...e,n]),g=(t,n,r,o)=>{if(h)return Promise.reject("Cancelled");if(void 0===r&&!n&&t.length)return Promise.resolve(t);const a={queryKey:e.queryKey,pageParam:r,meta:e.options.meta};var i;i=a,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?h=!0:null==(n=e.signal)||n.addEventListener("abort",(()=>{h=!0})),e.signal}});const l=y(a);return Promise.resolve(l).then((e=>v(t,r,e,o)))};let b;if(d.length)if(s){const t=void 0!==u,n=t?u:X(e.options,d);b=g(d,t,n)}else if(f){const t=void 0!==u,n=t?u:(w=e.options,E=d,null==w.getPreviousPageParam?void 0:w.getPreviousPageParam(E[0],E));b=g(d,t,n,!0)}else{m=[];const t=void 0===e.options.getNextPageParam;b=l&&d[0]&&!l(d[0],0,d)?Promise.resolve(v([],p[0],d[0])):g([],t,p[0]);for(let n=1;n<d.length;n++)b=b.then((r=>{if(!l||!d[n]||l(d[n],n,d)){const o=t?p[n]:X(e.options,r);return g(r,t,o)}return Promise.resolve(v(r,p[n],d[n]))}))}else b=g([]);var w,E;return b.then((e=>({pages:e,pageParams:m})))}}},this.fetchQuery(r)}prefetchInfiniteQuery(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(l).catch(l)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const n=this.queryDefaults.find((t=>y(e)===y(t.queryKey)));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find((t=>v(e,t.queryKey)));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){const n=this.mutationDefaults.find((t=>y(e)===y(t.mutationKey)));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find((t=>v(e,t.mutationKey)));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=h(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}({defaultOptions:{queries:{cacheTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchIntervalInBackground:!0,retryOnMount:!1,staleTime:6e4}}}),tv=function(e){var t=e.children,n=e.idbDatabase,r=Qy(kf(),1)[0].cacheEnabled,o=(0,a.useMemo)((function(){return o=se,a=n.selectStore(ue),{persistClient:(r=oo(no().mark((function e(t){var n,r;return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.set(o,t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),null===(n=window.zoteroRoam)||void 0===n||null===(r=n.error)||void 0===r||r.call(n,{origin:"Database",message:"Failed to persist query client",context:{error:wn(e.t0)}}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return r.apply(this,arguments)}),removeClient:(t=oo(no().mark((function e(){var t,n;return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.delete(o);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),null===(t=window.zoteroRoam)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,{origin:"Database",message:"Failed to remove query client",context:{error:wn(e.t0)}}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return t.apply(this,arguments)}),restoreClient:(e=oo(no().mark((function e(){var t,n;return no().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.get(o);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),null===(t=window.zoteroRoam)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,{origin:"Database",message:"Failed to restore query client",context:{error:wn(e.t0)}}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return e.apply(this,arguments)})};var e,t,r,o,a}),[n]),i=(0,a.useMemo)((function(){return{onSuccess:function(){var e,t;null===(e=window.zoteroRoam)||void 0===e||null===(t=e.info)||void 0===t||t.call(e,{origin:"Database",message:"Initialization complete"})},persistOptions:{buster:"v1.0",dehydrateOptions:{shouldDehydrateQuery:uo},maxAge:2592e5,persister:o}}}),[o]),l=(0,a.useMemo)((function(){return r?re:Q}),[r]);return React.createElement(l,Vy({client:ev},i),t)},nv=function(e){var t=Qy(kf(),1)[0].autoload,n=Qy(Po(),1)[0],r=Qy(Bd(),1)[0],o=(0,a.useMemo)((function(){return po(r)}),[r]);return React.createElement(rv,Vy({autoload:t,requests:n,shortcuts:o},e))},rv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qy(e,t)}(l,e);var t,n,r,a,i=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Gy(t);if(n){var o=Gy(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xy(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Ky(Xy(t=i.call(this,e)),"shortcutsConfig",{toggleDashboard:{label:"Show/hide the dashboard",onKeyDown:function(){return t.toggleDashboard()}},toggleSearchPanel:{label:"Show/hide the search panel",onKeyDown:function(){return t.toggleSearchPanel()}},toggleSettingsPanel:{label:"Show/hide the settings panel",onKeyDown:function(){return t.toggleSettings()}}}),Ky(Xy(t),"hotkeysOptions",{showDialogKeyCombo:"shift+Z+R"}),t.state={isDashboardOpen:!1,isLoggerOpen:!1,isSearchPanelOpen:!1,isSettingsPanelOpen:!1,lastCursorLocation:null,status:0==t.props.requests.dataRequests.length?Rf.DISABLED:t.props.autoload?Rf.ON:Rf.OFF},t.toggleExtension=t.toggleExtension.bind(Xy(t)),t.closeSearchPanel=t.closeSearchPanel.bind(Xy(t)),t.openSearchPanel=t.openSearchPanel.bind(Xy(t)),t.toggleSearchPanel=t.toggleSearchPanel.bind(Xy(t)),t.closeDashboard=t.closeDashboard.bind(Xy(t)),t.openDashboard=t.openDashboard.bind(Xy(t)),t.toggleDashboard=t.toggleDashboard.bind(Xy(t)),t.closeSettings=t.closeSettings.bind(Xy(t)),t.openSettings=t.openSettings.bind(Xy(t)),t.toggleSettings=t.toggleSettings.bind(Xy(t)),t.closeLogger=t.closeLogger.bind(Xy(t)),t.openLogger=t.openLogger.bind(Xy(t)),t}return r=l,a=[{key:"componentDidMount",value:function(){qa($y,this.openSearchPanel,this.props.extensionAPI),qa(Yy,this.openDashboard,this.props.extensionAPI)}},{key:"componentDidUpdate",value:function(e){0==this.props.requests.dataRequests.length&&e.requests.dataRequests.length>0?this.setState((function(e){return ev.clear(),{status:Rf.DISABLED}})):0==e.requests.dataRequests.length&&this.props.requests.dataRequests.length>0&&this.setState((function(e){return{status:Rf.ON}}))}},{key:"componentWillUnmount",value:function(){ni($y,this.props.extensionAPI),ni(Yy,this.props.extensionAPI)}},{key:"render",value:function(){var e=this,t=this.state,n=t.status,r=t.isDashboardOpen,a=t.isLoggerOpen,i=t.isSearchPanelOpen,l=t.isSettingsPanelOpen,c=this.props,u=c.extension,s=c.idbDatabase,f=Object.keys(this.shortcutsConfig).map((function(t){var n=e.props.shortcuts[t]||"";return""!==n&&function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uy(Object(n),!0).forEach((function(t){Ky(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allowInInput:!0,combo:n,global:!0},e.shortcutsConfig[t])})).filter(Be);return React.createElement(o.HotkeysTarget2,{hotkeys:f,options:this.hotkeysOptions},React.createElement(Zy.Provider,{value:u},React.createElement(tv,{idbDatabase:s},React.createElement(zf,{openDashboard:this.openDashboard,openLogger:this.openLogger,openSearchPanel:this.openSearchPanel,openSettingsPanel:this.openSettings,status:n,toggleExtension:this.toggleExtension}),React.createElement(ai,null,n==Rf.ON?React.createElement(Yh,null):null,React.createElement(Ly,{isOpen:i,onClose:this.closeSearchPanel,status:n}),React.createElement(yf,{isOpen:r,onClose:this.closeDashboard}))),React.createElement(oy,{isOpen:a,onClose:this.closeLogger}),React.createElement(zy,{isOpen:l,onClose:this.closeSettings})))}},{key:"toggleExtension",value:function(){this.setState((function(e){var t=e.status;return t==Rf.ON&&ev.clear(),{status:t==Rf.OFF?Rf.ON:Rf.OFF}}))}},{key:"closeSearchPanel",value:function(){this.setState((function(e){return function(e){if(e&&e.location){var t=e.id,n=La(e,Ta);document.getElementById(t)&&window.roamAlphaAPI.ui.setBlockFocusAndSelection(n)}}(e.lastCursorLocation),{isSearchPanelOpen:!1,lastCursorLocation:null}}))}},{key:"openSearchPanel",value:function(){this.setState((function(e){return{lastCursorLocation:Va(),isSearchPanelOpen:!0}}))}},{key:"toggleSearchPanel",value:function(){this.state.status==Rf.ON&&this.setState((function(e){return{isSearchPanelOpen:!e.isSearchPanelOpen}}))}},{key:"closeDashboard",value:function(){this.setState((function(e){return{isDashboardOpen:!1}}))}},{key:"openDashboard",value:function(){this.setState((function(e){return{isDashboardOpen:!0}}))}},{key:"toggleDashboard",value:function(){this.state.status==Rf.ON&&this.setState((function(e){return{isDashboardOpen:!e.isDashboardOpen}}))}},{key:"closeSettings",value:function(){this.setState((function(e){return{isSettingsPanelOpen:!1}}))}},{key:"openSettings",value:function(){this.setState((function(e){return{isSettingsPanelOpen:!0}}))}},{key:"toggleSettings",value:function(){this.setState((function(e){return{isSettingsPanelOpen:!e.isSettingsPanelOpen}}))}},{key:"closeLogger",value:function(){this.setState((function(e){return{isLoggerOpen:!1}}))}},{key:"openLogger",value:function(){this.setState((function(e){return{isLoggerOpen:!0}}))}}],a&&By(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),l}(a.Component);function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ov.apply(this,arguments)}function av(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var iv=function(e){var t=e.extensionAPI,n=void 0===t?{}:t,r=e.children,o=e.init,i=(0,a.useCallback)((function(e,t){if(!n.settings)return null;n.settings.set(e,t)}),[n]);return React.createElement(React.Fragment,null,Ny.reduceRight((function(e,t){var n=t.component,r=t.id;return React.createElement(n,{init:o[r],updater:function(e){return i(r,e)}},e)}),r))};const lv=window.idb;function cv(e){return cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(e)}function uv(){uv=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new R(o||[]);return r(i,"_invoke",{value:E(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,a,i,l){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==cv(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function sv(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function fv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sv(a,r,o,i,l,"next",e)}function l(e){sv(a,r,o,i,l,"throw",e)}i(void 0)}))}}function dv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==cv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==cv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===cv(o)?o:String(o)),r)}var o}function pv(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function mv(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,yv(e,t,"get"))}function hv(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,yv(e,t,"set"),n),n}function yv(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var vv=[ue],gv=new WeakMap,bv=new WeakMap;const wv=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pv(this,gv,{writable:!0,value:void 0}),pv(this,bv,{writable:!0,value:void 0});var n="";try{n=window.roamAlphaAPI.graph.name}catch(e){}var r=[ce,n].filter(Be).join("_");hv(this,bv,r),hv(this,gv,(0,lv.openDB)(mv(this,bv),1,{upgrade:function(e,t,n,r){vv.forEach((function(t){return e.createObjectStore(t)}))},blocking:function(){console.log("".concat(mv(t,bv)," - Connection is blocking another, will close")),mv(t,gv).then((function(e){return e.close()})).then((function(){return console.log("".concat(mv(t,bv)," - Connection successfully closed"))}))},blocked:function(){console.log("".concat(mv(t,bv)," - Connection blocked by another"))}}))}var t,n,r;return n=e,r=[{key:"deleteSelf",value:(t=fv(uv().mark((function e(){var t=this;return uv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,lv.deleteDB)(mv(this,bv),{blocked:function(){console.log("".concat(mv(t,bv)," - Database deletion is blocked"))}});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return t.apply(this,arguments)})},{key:"selectStore",value:function(e){return{get:function(t){var n=this;return fv(uv().mark((function r(){return uv().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,mv(n,gv);case 2:return r.abrupt("return",r.sent.get(e,t));case 3:case"end":return r.stop()}}),r)})))()},set:function(t,n){var r=this;return fv(uv().mark((function o(){return uv().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,mv(r,gv);case 2:return o.abrupt("return",o.sent.put(e,n,t));case 3:case"end":return o.stop()}}),o)})))()},delete:function(t){var n=this;return fv(uv().mark((function r(){return uv().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,mv(n,gv);case 2:return r.abrupt("return",r.sent.delete(e,t));case 3:case"end":return r.stop()}}),r)})))()},clear:function(){var t=this;return fv(uv().mark((function n(){return uv().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,mv(t,gv);case 2:return n.abrupt("return",n.sent.clear(e));case 3:case"end":return n.stop()}}),n)})))()}}}}],r&&dv(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function Ev(e){return Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(e)}function Sv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ov(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sv(Object(n),!0).forEach((function(t){kv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ev(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ev(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ev(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rv={tabTitle:"zoteroRoam",settings:[{id:"cache-clear",name:"Clear cache",description:"Remove all data from the extension's local cache.",action:{type:"reactComponent",component:function(){var e,t,n=(e=(0,a.useState)(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return av(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?av(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],l=(0,a.useCallback)((function(){var e,t;null===(e=window.zoteroRoam)||void 0===e||null===(t=e.isDataCached)||void 0===t||t.call(e).then((function(e){return i(e)})).catch((function(e){var t,n;null===(t=window.zoteroRoam)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,{origin:"Cache",message:"Failed to update caching status",context:{error:wn(e)}})}))}),[i]);(0,a.useEffect)((function(){return l()}),[l]);var c=(0,a.useMemo)((function(){return r?{intent:o.Intent.WARNING,text:"Clear cache",title:"Click to clear the extension's data cache"}:{disabled:!0,text:"No cached data",title:"The extension's data cache is empty"}}),[r]),u=(0,a.useCallback)((function(){var e,t;null===(e=window.zoteroRoam)||void 0===e||null===(t=e.clearDataCache)||void 0===t||t.call(e).then((function(){return l()}))}),[l]);return React.createElement(o.Button,ov({loading:null==r,onClick:u},c))}}}]};const xv={onload:function(e){var t=e.extensionAPI;!function(){var e;fo();var t=document.querySelector(".rm-topbar .rm-find-or-create-wrapper"),n=document.createElement("span");n.id=ie,null==t||t.insertAdjacentElement("afterend",n);var r=document.createElement("div");r.id=ae,null===(e=document.getElementById("app"))||void 0===e||e.appendChild(r)}();var n,a,i,l,c=function(e){var t,n,r,o,a="roam/depot"==e.context?function(e){var t=e.extensionAPI,n=so(t.settings.getAll()||{});Object.entries(n).forEach((function(e){var n=ao(e,2),r=n[0],o=n[1];t.settings.set(r,o)}));var r=t.settings.get("requests");return r||(r={dataRequests:[],apiKeys:[],libraries:[]},t.settings.set("requests",r)),{requests:r,settings:n}}(e):(t=e.manualSettings,n=t.dataRequests,r=void 0===n?[]:n,o=so(t),{requests:co(r),settings:o});return{requests:a.requests,settings:a.settings}}({context:"roam/depot",extensionAPI:t}),u=c.requests,s=c.settings,f=new wv;window.zoteroRoam=new da({idbDatabase:f,queryClient:ev,requests:u,settings:s}),t.settings.panel.create(Rv),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.getElementsByTagName("body")[0].setAttribute("zr-dark-theme",(1==e).toString())}({settings:s}.settings.other.darkTheme),document.addEventListener("zotero-roam:metadata-added",Wt),document.addEventListener("zotero-roam:notes-added",$t),document.addEventListener("zotero-roam:write",Jt),document.addEventListener("zotero-roam:tags-deleted",Yt),document.addEventListener("zotero-roam:tags-modified",Zt),i=Kr(),l=function(){var e,t;if(null!==(e=window.roamjs)&&void 0!==e&&null!==(t=e.extension)&&void 0!==t&&t.smartblocks){try{Wr()}catch(e){var n,r;null===(n=window.zoteroRoam)||void 0===n||null===(r=n.error)||void 0===r||r.call(n,{origin:"SmartBlocks",message:"Failed to unregister commands",context:{error:e.message}})}Object.keys(i).forEach((function(e){var t,n,r=i[e],o=r.help,a=r.handler;null===(t=window.roamjs)||void 0===t||null===(n=t.extension.smartblocks)||void 0===n||n.registerCommand({text:e,help:o,handler:a})}))}},null!==(n=window.roamjs)&&void 0!==n&&null!==(a=n.loaded)&&void 0!==a&&a.has("smartblocks")?l():document.body.addEventListener("roamjs:smartblocks:loaded",l),(0,r.render)(React.createElement(o.HotkeysProvider,{dialogProps:{globalGroupName:"zoteroRoam"}},React.createElement(iv,{extensionAPI:t,init:Ov(Ov({},s),{},{requests:u})},React.createElement(nv,{extension:{portalId:ae,version:oe},extensionAPI:t,idbDatabase:f}))),document.getElementById(ie))},onunload:function(){document.removeEventListener("zotero-roam:metadata-added",Wt),document.removeEventListener("zotero-roam:notes-added",$t),document.removeEventListener("zotero-roam:write",Jt),document.removeEventListener("zotero-roam:tags-deleted",Yt),document.removeEventListener("zotero-roam:tags-modified",Zt),Wr(),fo(),window.zoteroRoam.deleteDatabase(),delete window.zoteroRoam}}},184:(e,t)=>{var n;!function(){var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var l in n)r.call(n,l)&&n[l]&&e.push(l);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},367:e=>{const t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},703:(e,t,n)=>{var r=n(414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},54:e=>{var t;self,t=()=>(()=>{var e={184:(e,t)=>{var n;!function(){var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var l in n)r.call(n,l)&&n[l]&&e.push(l);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},180:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&display=swap);"]),o.push([e.id,'@font-face{font-family:scite-icons;font-style:normal;font-weight:400;src:url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.eot?v=5);src:url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.eot?v=5#iefix) format("embedded-opentype"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.woff2?v=5) format("woff2"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.woff?v=5) format("woff"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.ttf?v=5) format("truetype"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.svg?v=5#fontello) format("svg")}.Icon__icon___rkFdu{speak:none;font-family:scite-icons!important;font-style:normal!important;font-variant:normal!important;font-weight:400!important;line-height:1.5!important;text-transform:none!important}.Icon__unclassified___KG7dh:before{color:#828179;content:"\\e80a"}.Icon__contrasting___XemUp:before{color:#0062ff;content:"\\e80a"}.Icon__mentioning___eZSXr:before{color:#393f43;content:"\\e902"}.Icon__supporting___6A01H:before{color:#26a65b;content:"\\e903"}.Icon__retractions___\\+fJ\\+N:before{color:#ff3b30;content:"\\e901"}.Icon__notices___DbL2K:before{color:#82807d;content:"\\e90a"}.Icon__publications___3dd2q:before{color:#82807d;content:"\\e90b"}.Icon__smallIcon___3rDRZ{line-height:1rem!important}.Icon__openingArrow___pSL8O:before{color:#82807d;content:"\\e922"}.Icon__closingCaret___EMT7i:before{color:#82807d;content:"\\e925"}.Count__count___VwSFw{display:flex;font-size:14.5px}.Count__label___UClje{display:inline-block;margin-right:12px;text-transform:capitalize;width:82px}.Count__smallLabel___E3KvK{margin-right:6px;text-transform:capitalize}.Count__iconCountWrapper___CTSi2{box-sizing:border-box;display:inline-block}.Count__sectionTallyIconCountWrapper___lTlUR{box-sizing:border-box;display:flex}.Count__expandedIconCount___c3tc2{align-items:center;display:inline-flex;justify-content:space-between;width:100%}.Count__number___4oBqJ{margin-left:8px}.Count__smallNumber___wi6E7{margin-left:6px}.Count__horizontal___wp4Sz{border-left:1px solid #cfcfcf;padding:4px 8px}.Count__horizontal___wp4Sz:first-child{border-left:none}.Count__horizontal___wp4Sz>.Count__label___UClje{width:auto}.Count__horizontal___wp4Sz>.Count__sectionTallyIconCountWrapper___lTlUR>.Count__label___UClje{vertical-align:middle;width:auto}.Count__small___kecST{font-size:10px;padding:2px 4px}.Tally__tally___wF-n7 *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Tally__tally___wF-n7{background-color:#fff;color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;opacity:0;padding:8px 12px 0 8px;pointer-events:none;transition:all .2s ease-in-out;will-change:opacity,background-color}.Tally__badgeTally___AkCwi{border-radius:8px 0 0 0;padding-bottom:8px}.Tally__horizontal___TYyqc{flex-direction:row;height:100%;padding:0 8px}.Tally__show___EesAt{opacity:1;pointer-events:auto}.Tally__tally___wF-n7:hover{background-color:#f4f4f4}.Tally__logo___k79zv{display:block;margin-bottom:8px;max-width:4em;width:4em}.Tally__logoSmall___JZuyy{max-width:3em;padding-left:4px;width:3em}.Tally__small___lrym1{padding:0 4px}.Tally__forceCollapse___4k5aa{display:none}.HideableTally__tally___TXiqB *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.HideableTally__tally___TXiqB{background-color:#fff;color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;transition:all .2s ease-in-out;will-change:opacity,background-color}.HideableTally__tally___TXiqB:hover{background-color:#f4f4f4}.HideableTally__hideContainer___w5Wlj{align-items:center;color:#82807d;display:flex;font-size:12px;padding-left:8px;z-index:1}.HideableTally__logoSingleLetter___OwmJA{max-width:1em;width:1em}.HideableTally__logoContainer___kXnxF{align-items:center;display:flex;padding-right:8px}.HideableTally__openingArrow___yBpbp{color:#82807d;font-size:16px;font-weight:600;margin-right:4px}.HideableTally__closingArrow___pKIyO{color:#82807d;display:block;font-size:16px;font-weight:600;max-width:1em;width:1em}.SectionIcon__sectionIcon___nqPTw{speak:none;display:inline-block!important;font-style:normal!important;font-variant:normal!important;font-weight:400!important;line-height:1.5!important;margin-right:5px!important}.SectionIcon__sectionIcon___nqPTw:before{border-radius:4px;color:#fff;display:inline-block!important;padding:2px 4px;text-align:center;transform:scale(1);width:12px}.SectionIcon__introduction___uhUFG:before{background:#002ab2;content:"I"}.SectionIcon__methods___RVooU:before{background:#0036e5;content:"M"}.SectionIcon__results___1k9LI:before{background:#0062ff;content:"R"}.SectionIcon__discussion___Qeyb0:before{background:#66a3ff;content:"D"}.SectionIcon__other___uF\\+vV:before{background:#9ec4f0;content:"O"}.SectionIcon__smallSectionIcon___nCjHN{line-height:1!important}.SectionTally__sectionTallyWidget___aaCj5 *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.SectionTally__sectionTallyWidget___aaCj5{padding:8px}.SectionTally__sectionTallyWidget___aaCj5:hover{background-color:#f4f4f4!important}.SectionTally__sectionTallyWrapper___nwj2j{align-items:center;display:flex}.SectionTally__tally___es9p7{color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;opacity:0;padding-bottom:0;padding-right:12px;pointer-events:none;transition:all .2s ease-in-out;will-change:opacity,background-color}.SectionTally__badgeTally___ZYqar{border-radius:8px 0 0 0;padding-bottom:8px}.SectionTally__horizontal___-hgL\\+{flex-direction:row;height:100%;padding:0 8px}.SectionTally__show___wciqp{opacity:1;pointer-events:auto}.SectionTally__logo___pEojg{display:block;margin-bottom:8px;max-width:4em;width:4em}.SectionTally__logoSmall___yzxV\\+{max-width:3em;padding-left:4px;width:3em}.SectionTally__small___QBk26{padding:0 4px}.SectionTally__forceCollapse___MexwG{display:none}.SectionTally__chartSubheading___tm7gz{font-family:IBM Plex Sans,sans-serif;font-size:12px;margin-top:4px;text-align:center;width:140px}.SectionTally__chartLabel___Nm4F\\+{display:block;font-weight:600}',""]);const a=o},717:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,'.AT5rL7aTm8KKajD1LMmpXg\\=\\= {\n    font-family: \'IBM Plex Sans\', sans-serif;\n    font-size: 16px;\n\n    opacity: 0;\n    pointer-events: none;\n    will-change: opacity;\n    transition: opacity 200ms ease-in-out;\n\n    padding: 16px;\n\n    border: 1px solid #ebebeb;\n    border-radius: 8px;\n    background-color: white;\n    box-shadow: 0px 0px 37px 0px rgba(0,0,0,0.05);\n\n    z-index: 9999;\n\n    width: 250px;\n    height: auto;\n\n    cursor: pointer;\n}\n\n._2Xtymibu3VEV-gq1N5m\\+aA\\=\\= {\n    opacity: 1;\n    pointer-events: auto;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:before {\n\ttop: 100%;\n\tleft: 50%;\n\tborder: solid transparent;\n\tcontent: " ";\n\theight: 0;\n\twidth: 0;\n\tposition: absolute;\n\tpointer-events: none;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:after {\n\tborder-color: rgba(255, 255, 255, 0);\n\tborder-top-color: #FFFFFF;\n\tborder-width: 10px;\n\tmargin-left: -10px;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:before {\n\tborder-color: rgba(235, 235, 235, 0);\n\tborder-top-color: #ebebeb;\n\tborder-width: 11px;\n\tmargin-left: -11px;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:before {\n\tleft: 100%;\n\ttop: 50%;\n\tborder: solid transparent;\n\tcontent: " ";\n\theight: 0;\n\twidth: 0;\n\tposition: absolute;\n\tpointer-events: none;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:after {\n\tborder-color: rgba(255, 255, 255, 0);\n\tborder-left-color: #ffffff;\n\tborder-width: 10px;\n\tmargin-top: -10px;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:before {\n\tborder-color: rgba(235, 235, 235, 0);\n\tborder-left-color: #ebebeb;\n\tborder-width: 11px;\n\tmargin-top: -11px;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:before {\n\tright: 100%;\n\ttop: 50%;\n\tborder: solid transparent;\n\tcontent: " ";\n\theight: 0;\n\twidth: 0;\n\tposition: absolute;\n\tpointer-events: none;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:after {\n\tborder-color: rgba(255, 255, 255, 0);\n\tborder-right-color: #ffffff;\n\tborder-width: 10px;\n\tmargin-top: -10px;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:before {\n\tborder-color: rgba(235, 235, 235, 0);\n\tborder-right-color: #ebebeb;\n\tborder-width: 11px;\n\tmargin-top: -11px;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:before {\n\tbottom: 100%;\n\tleft: 50%;\n\tborder: solid transparent;\n\tcontent: " ";\n\theight: 0;\n\twidth: 0;\n\tposition: absolute;\n\tpointer-events: none;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:after {\n\tborder-color: rgba(255, 255, 255, 0);\n\tborder-bottom-color: #FFFFFF;\n\tborder-width: 10px;\n\tmargin-left: -10px;\n}\n\n.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:before {\n\tborder-color: rgba(235, 235, 235, 0);\n\tborder-bottom-color: #ebebeb;\n\tborder-width: 11px;\n\tmargin-left: -11px;\n}\n\n.poEjDAx2EewNn\\+kdnuCNbw\\=\\= {\n    /* So it doesn\'t get wider than the badge itself\n     * based on the width of the container */\n}\n\n.MlC\\+r-CmnNCcLkgYD8Dr3A\\=\\= {\n    font-size: 14px;\n}\n\n\n.JqOPSu81MQ6f4Zf9z\\+kqGA\\=\\= {\n    line-height: 1.5;\n}\n\n.GPqI5vpEM4VpfAAz4n7HHw\\=\\= {\n    display: inline-block;\n    margin-top: 0.5rem;\n}\n\n.-hEUP2QMiuX6a9sr7dC-lw\\=\\= {\n\tmargin: 0.5rem 0;\n\tfont-weight: bold;\n}\n\n.LzVcQqdJWiY7N8-Sq-TVuQ\\=\\= {\n    display: inline-block;\n}\n\n.VbAViV4Slh84iH9X2erp\\+w\\=\\= {\n\tdisplay: inline;\n}\n\n.f3QM6zcZemgDMSOwqIK2TA\\=\\= {\n    display: block;\n\tmargin: 0.5rem 0;\n\tmargin-left: 1rem;\n}\n\n.bcxXMmw49C9aDY85vGYeXQ\\=\\= {\n    color: #828179;\n}\n\n.lrdLQN2-BBgxsMDjSuuRzA\\=\\= {\n    font-weight: bold;\n    color: black;\n}\n\n.sUhEpXXzA4dizL2jxbvHFA\\=\\= {\n    text-decoration: none;\n    color: inherit;\n    font-weight: inherit;\n    transition: 200ms opacity ease-in-out;\n}\n\n.sUhEpXXzA4dizL2jxbvHFA\\=\\=:hover, .sUhEpXXzA4dizL2jxbvHFA\\=\\=:active {\n    opacity: 0.8;\n}\n\n._13xrsxGwhLy89Cqv\\+5JjQw\\=\\= {\n    display: inline-block;\n    background-color: #0062FF;\n\n    border-radius: 6px;\n\n    padding: 6px 12px;\n\tmargin-top: 12px;\n\n    color: white;\n    text-decoration: none;\n\n    transition: background-color 200ms ease-in-out;\n}\n\n._13xrsxGwhLy89Cqv\\+5JjQw\\=\\=:hover {\n    background-color: #4da3ff;\n\n    /* For (a) site(s) that specifies a:hover color to be inherit */\n    color: white;\n\n}\n\n._80i\\+8Z8J94Dfk-D9w-MGTw\\=\\= {\n  display: block;\n  width: 5em;\n}\n\n.WtCeh9Ck5GR\\+4htw\\+R1oCg\\=\\= {\n\tdisplay: block;\n\tmargin: 0.5rem 0;\n}\n\n\n.V5f0vIfUVJ2Syht6KzU80Q\\=\\= {\n\tcolor: #D84215;\n\tfont-weight: bold;\n}\n\n.AvwIr2RDj3wSP30wVV5UDw\\=\\= {\n\tcolor: black;\n\tfont-weight: bold;\n}\n',""]),o.locals={tooltip:"AT5rL7aTm8KKajD1LMmpXg==",tooltipShow:"_2Xtymibu3VEV-gq1N5m+aA==",reference:"poEjDAx2EewNn+kdnuCNbw==",tooltipContent:"MlC+r-CmnNCcLkgYD8Dr3A==",tally:"JqOPSu81MQ6f4Zf9z+kqGA==",tallyCounts:"GPqI5vpEM4VpfAAz4n7HHw==",tallyCount:"-hEUP2QMiuX6a9sr7dC-lw==",labels:"LzVcQqdJWiY7N8-Sq-TVuQ==",noticeLabel:"VbAViV4Slh84iH9X2erp+w==",label:"f3QM6zcZemgDMSOwqIK2TA==",message:"bcxXMmw49C9aDY85vGYeXQ==",bold:"lrdLQN2-BBgxsMDjSuuRzA==",link:"sUhEpXXzA4dizL2jxbvHFA==",button:"_13xrsxGwhLy89Cqv+5JjQw==",logo:"_80i+8Z8J94Dfk-D9w-MGTw==",slogan:"WtCeh9Ck5GR+4htw+R1oCg==",retractionsCopy:"V5f0vIfUVJ2Syht6KzU80Q==",noticeCopy:"AvwIr2RDj3wSP30wVV5UDw=="};const a=o},696:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".scite-badge {\n    display: inline-block;\n}\n\n.scite-badge .scite-tally {\n    border-radius: 8px;\n    border: 1px solid #cfcfcf;\n    min-height: 120px;\n\n    box-sizing: border-box;\n}\n\n.scite-badge[data-show-labels='true'] .scite-tally {\n}\n\n.scite-badge[data-layout='horizontal'] .scite-tally {\n    min-height: 0px;\n    max-height: 32px;\n}\n\n.scite-badge:not([data-chart-type]) .scite-section-tally {\n    border-radius: 8px;\n    height: min-content;\n    width: min-content;\n    padding: 8px 0px 0px 8px;\n    border: 1px solid #cfcfcf;\n    box-sizing: border-box;\n}\n\n.scite-badge[data-section-tally-layout='horizontal'] .scite-section-tally {\n    padding: 0px;\n}\n",""]),o.locals={};const a=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},418:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,i,l=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(t){i=t(a);for(var s=0;s<i.length;s++)r.call(a,i[s])&&(l[i[s]]=a[i[s]])}}return l}},448:(e,t,n)=>{var r=n(294),o=n(418),a=n(840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var l=new Set,c={};function u(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(c[e]=t,e=0;e<t.length;e++)l.add(t[e])}var f=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,m={},h={};function y(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var o=v.hasOwnProperty(t)?v[t]:null;(null!==o?0===o.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!p.call(h,e)||!p.call(m,e)&&(d.test(e)?h[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);v[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);v[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);v[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,O=60106,k=60107,R=60108,x=60114,T=60109,_=60110,C=60112,j=60113,A=60120,P=60115,I=60116,L=60121,N=60128,D=60129,M=60130,z=60131;if("function"==typeof Symbol&&Symbol.for){var F=Symbol.for;S=F("react.element"),O=F("react.portal"),k=F("react.fragment"),R=F("react.strict_mode"),x=F("react.profiler"),T=F("react.provider"),_=F("react.context"),C=F("react.forward_ref"),j=F("react.suspense"),A=F("react.suspense_list"),P=F("react.memo"),I=F("react.lazy"),L=F("react.block"),F("react.scope"),N=F("react.opaque.id"),D=F("react.debug_trace_mode"),M=F("react.offscreen"),z=F("react.legacy_hidden")}var U,B="function"==typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}function X(e){if(void 0===U)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var G=!1;function K(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||o[i]!==a[l])return"\n"+o[i].replace(" at new "," at ")}while(1<=i&&0<=l);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?X(e):""}function H(e){switch(e.tag){case 5:return X(e.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return K(e.type,!1);case 11:return K(e.type.render,!1);case 22:return K(e.type._render,!1);case 1:return K(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case O:return"Portal";case x:return"Profiler";case R:return"StrictMode";case j:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return V(e.type);case L:return V(e._render);case I:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function le(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ue(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,he,ye=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function Ee(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ge).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var Se=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oe(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Re(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Te=null,_e=null;function Ce(e){if(e=Jr(e)){if("function"!=typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=to(t),xe(e.stateNode,e.type,t))}}function je(e,t){return e(t)}function Ae(e,t,n,r,o){return e(t,n,r,o)}function Pe(){}var Ie=je,Le=!1,Ne=!1;function De(){null===Te&&null===_e||(Pe(),function(){if(Te){var e=Te,t=_e;if(_e=Te=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}())}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=to(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var ze=!1;if(f)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(he){ze=!1}function Ue(e,t,n,r,o,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var Be=!1,qe=null,Xe=!1,Ge=null,Ke={onError:function(e){Be=!0,qe=e}};function He(e,t,n,r,o,a,i,l,c){Be=!1,qe=null,Ue.apply(Ke,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(i(188))}function $e(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Ye,Ze,Je,et,tt=!1,nt=[],rt=null,ot=null,at=null,it=new Map,lt=new Map,ct=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function st(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":rt=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":at=null;break;case"pointerover":case"pointerout":it.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function dt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e=st(t,n,r,o,a),null!==t&&null!==(t=Jr(t))&&Ze(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function pt(e){var t=Zr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void et(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){Je(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Jr(n))&&Ze(t),e.blockedOn=n,!1;t.shift()}return!0}function ht(e,t,n){mt(e)&&n.delete(t)}function yt(){for(tt=!1;0<nt.length;){var e=nt[0];if(null!==e.blockedOn){null!==(e=Jr(e.blockedOn))&&Ye(e);break}for(var t=e.targetContainers;0<t.length;){var n=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&nt.shift()}null!==rt&&mt(rt)&&(rt=null),null!==ot&&mt(ot)&&(ot=null),null!==at&&mt(at)&&(at=null),it.forEach(ht),lt.forEach(ht)}function vt(e,t){e.blockedOn===t&&(e.blockedOn=null,tt||(tt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,yt)))}function gt(e){function t(t){return vt(t,e)}if(0<nt.length){vt(nt[0],e);for(var n=1;n<nt.length;n++){var r=nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==rt&&vt(rt,e),null!==ot&&vt(ot,e),null!==at&&vt(at,e),it.forEach(t),lt.forEach(t),n=0;n<ct.length;n++)(r=ct[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ct.length&&null===(n=ct[0]).blockedOn;)pt(n),null===n.blockedOn&&ct.shift()}function bt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wt={animationend:bt("Animation","AnimationEnd"),animationiteration:bt("Animation","AnimationIteration"),animationstart:bt("Animation","AnimationStart"),transitionend:bt("Transition","TransitionEnd")},Et={},St={};function Ot(e){if(Et[e])return Et[e];if(!wt[e])return e;var t,n=wt[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Et[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete wt.animationend.animation,delete wt.animationiteration.animation,delete wt.animationstart.animation),"TransitionEvent"in window||delete wt.transitionend.transition);var kt=Ot("animationend"),Rt=Ot("animationiteration"),xt=Ot("animationstart"),Tt=Ot("transitionend"),_t=new Map,Ct=new Map,jt=["abort","abort",kt,"animationEnd",Rt,"animationIteration",xt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Tt,"transitionEnd","waiting","waiting"];function At(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),Ct.set(r,t),_t.set(r,o),u(o,[r])}}(0,a.unstable_now)();var Pt=8;function It(e){if(0!=(1&e))return Pt=15,1;if(0!=(2&e))return Pt=14,2;if(0!=(4&e))return Pt=13,4;var t=24&e;return 0!==t?(Pt=12,t):0!=(32&e)?(Pt=11,32):0!=(t=192&e)?(Pt=10,t):0!=(256&e)?(Pt=9,256):0!=(t=3584&e)?(Pt=8,t):0!=(4096&e)?(Pt=7,4096):0!=(t=4186112&e)?(Pt=6,t):0!=(t=62914560&e)?(Pt=5,t):67108864&e?(Pt=4,67108864):0!=(134217728&e)?(Pt=3,134217728):0!=(t=805306368&e)?(Pt=2,t):0!=(1073741824&e)?(Pt=1,1073741824):(Pt=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return Pt=0;var r=0,o=0,a=e.expiredLanes,i=e.suspendedLanes,l=e.pingedLanes;if(0!==a)r=a,o=Pt=15;else if(0!=(a=134217727&n)){var c=a&~i;0!==c?(r=It(c),o=Pt):0!=(l&=a)&&(r=It(l),o=Pt)}else 0!=(a=n&~i)?(r=It(a),o=Pt):0!==l&&(r=It(l),o=Pt);if(0===r)return 0;if(r=n&((0>(r=31-Ut(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&i)){if(It(t),o<=Pt)return t;Pt=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-Ut(t)),r|=e[n],t&=~o;return r}function Nt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Dt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Mt(24&~t))?Dt(10,t):e;case 10:return 0===(e=Mt(192&~t))?Dt(8,t):e;case 8:return 0===(e=Mt(3584&~t))&&0===(e=Mt(4186112&~t))&&(e=512),e;case 2:return 0===(t=Mt(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function Mt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ft(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ut(t)]=n}var Ut=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Bt(e)/qt|0)|0},Bt=Math.log,qt=Math.LN2,Xt=a.unstable_UserBlockingPriority,Gt=a.unstable_runWithPriority,Kt=!0;function Ht(e,t,n,r){Le||Pe();var o=Qt,a=Le;Le=!0;try{Ae(o,e,t,n,r)}finally{(Le=a)||De()}}function Vt(e,t,n,r){Gt(Xt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var o;if(Kt)if((o=0==(4&t))&&0<nt.length&&-1<ut.indexOf(e))e=st(null,e,t,n,r),nt.push(e);else{var a=Wt(e,t,n,r);if(null===a)o&&ft(e,r);else{if(o){if(-1<ut.indexOf(e))return e=st(a,e,t,n,r),void nt.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return rt=dt(rt,e,t,n,r,o),!0;case"dragenter":return ot=dt(ot,e,t,n,r,o),!0;case"mouseover":return at=dt(at,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return it.set(a,dt(it.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,lt.set(a,dt(lt.get(a)||null,e,t,n,r,o)),!0}return!1}(a,e,t,n,r))return;ft(e,r)}Ar(e,t,r,null,n)}}}function Wt(e,t,n,r){var o=Re(r);if(null!==(o=Zr(o))){var a=Ve(o);if(null===a)o=null;else{var i=a.tag;if(13===i){if(null!==(o=Qe(a)))return o;o=null}else if(3===i){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null)}}return Ar(e,t,r,o,n),null}var $t=null,Yt=null,Zt=null;function Jt(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,o="value"in $t?$t.value:$t.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(cn),sn=o({},cn,{view:0,detail:0}),fn=rn(sn),dn=o({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=rn(dn),mn=rn(o({},dn,{dataTransfer:0})),hn=rn(o({},sn,{relatedTarget:0})),yn=rn(o({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=o({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gn=rn(vn),bn=rn(o({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function On(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function kn(){return On}var Rn=o({},sn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=rn(Rn),Tn=rn(o({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=rn(o({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Cn=rn(o({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=o({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=rn(jn),Pn=[9,13,27,32],In=f&&"CompositionEvent"in window,Ln=null;f&&"documentMode"in document&&(Ln=document.documentMode);var Nn=f&&"TextEvent"in window&&!Ln,Dn=f&&(!In||Ln&&8<Ln&&11>=Ln),Mn=String.fromCharCode(32),zn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){(function(e){Te?_e?_e.push(e):_e=[e]:Te=e})(r),0<(t=Ir(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Hn=null;function Vn(e){Rr(e,0)}function Qn(e){if(Y(eo(e)))return e}function Wn(e,t){if("change"===e)return t}var $n=!1;if(f){var Yn;if(f){var Zn="oninput"in document;if(!Zn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Zn="function"==typeof Jn.oninput}Yn=Zn}else Yn=!1;$n=Yn&&(!document.documentMode||9<document.documentMode)}function er(){Kn&&(Kn.detachEvent("onpropertychange",tr),Hn=Kn=null)}function tr(e){if("value"===e.propertyName&&Qn(Hn)){var t=[];if(Gn(t,Hn,e,Re(e)),e=Vn,Le)e(t);else{Le=!0;try{je(e,t)}finally{Le=!1,De()}}}}function nr(e,t,n){"focusin"===e?(er(),Hn=n,(Kn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Hn)}function or(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var ir="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},lr=Object.prototype.hasOwnProperty;function cr(e,t){if(ir(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!ir(e[n[r]],t[n[r]]))return!1;return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=f&&"documentMode"in document&&11>=document.documentMode,hr=null,yr=null,vr=null,gr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;gr||null==hr||hr!==Z(r)||(r="selectionStart"in(r=hr)&&pr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Ir(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}At("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),At("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),At(jt,2);for(var wr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<wr.length;Er++)Ct.set(wr[Er],0);s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function kr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,l,c,u){if(He.apply(this,arguments),Be){if(!Be)throw Error(i(198));var s=qe;Be=!1,qe=null,Xe||(Xe=!0,Ge=s)}}(r,t,void 0,e),e.currentTarget=null}function Rr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&o.isPropagationStopped())break e;kr(o,l,u),a=c}else for(i=0;i<r.length;i++){if(c=(l=r[i]).instance,u=l.currentTarget,l=l.listener,c!==a&&o.isPropagationStopped())break e;kr(o,l,u),a=c}}}if(Xe)throw e=Ge,Xe=!1,Ge=null,e}function xr(e,t){var n=no(t),r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}var Tr="_reactListening"+Math.random().toString(36).slice(2);function _r(e){e[Tr]||(e[Tr]=!0,l.forEach((function(t){Or.has(t)||Cr(t,!1,e,null),Cr(t,!0,e,null)})))}function Cr(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Or.has(e)){if("scroll"!==e)return;o|=2,a=r}var i=no(a),l=e+"__"+(t?"capture":"bubble");i.has(l)||(t&&(o|=4),jr(a,e,o,t),i.add(l))}function jr(e,t,n,r){var o=Ct.get(t);switch(void 0===o?2:o){case 0:o=Ht;break;case 1:o=Vt;break;default:o=Qt}n=o.bind(null,t,n,e),o=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ar(e,t,n,r,o){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===o||8===l.nodeType&&l.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&((c=i.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;i=i.return}for(;null!==l;){if(null===(i=Zr(l)))return;if(5===(c=i.tag)||6===c){r=a=i;continue e}l=l.parentNode}}r=r.return}!function(e,t,n){if(Ne)return e();Ne=!0;try{Ie(e,void 0,void 0)}finally{Ne=!1,De()}}((function(){var r=a,o=Re(n),i=[];e:{var l=_t.get(e);if(void 0!==l){var c=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":c=xn;break;case"focusin":u="focus",c=hn;break;case"focusout":u="blur",c=hn;break;case"beforeblur":case"afterblur":c=hn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=_n;break;case kt:case Rt:case xt:c=yn;break;case Tt:c=Cn;break;case"scroll":c=fn;break;case"wheel":c=An;break;case"copy":case"cut":case"paste":c=gn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Tn}var s=0!=(4&t),f=!s&&"scroll"===e,d=s?null!==l?l+"Capture":null:l;s=[];for(var p,m=r;null!==m;){var h=(p=m).stateNode;if(5===p.tag&&null!==h&&(p=h,null!==d&&null!=(h=Me(m,d))&&s.push(Pr(m,h,p))),f)break;m=m.return}0<s.length&&(l=new c(l,u,null,n,o),i.push({event:l,listeners:s}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!Zr(u)&&!u[$r])&&(c||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Zr(u):null)&&(u!==(f=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(s=pn,h="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(s=Tn,h="onPointerLeave",d="onPointerEnter",m="pointer"),f=null==c?l:eo(c),p=null==u?l:eo(u),(l=new s(h,m+"leave",c,n,o)).target=f,l.relatedTarget=p,h=null,Zr(o)===r&&((s=new s(d,m+"enter",u,n,o)).target=p,s.relatedTarget=f,h=s),f=h,c&&u)e:{for(d=u,m=0,p=s=c;p;p=Lr(p))m++;for(p=0,h=d;h;h=Lr(h))p++;for(;0<m-p;)s=Lr(s),m--;for(;0<p-m;)d=Lr(d),p--;for(;m--;){if(s===d||null!==d&&s===d.alternate)break e;s=Lr(s),d=Lr(d)}s=null}else s=null;null!==c&&Nr(i,l,c,s,!1),null!==u&&null!==f&&Nr(i,f,u,s,!0)}if("select"===(c=(l=r?eo(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=Wn;else if(Xn(l))if($n)y=ar;else{y=rr;var v=nr}else(c=l.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(y=or);switch(y&&(y=y(e,r))?Gn(i,y,n,o):(v&&v(e,l,r),"focusout"===e&&(v=l._wrapperState)&&v.controlled&&"number"===l.type&&oe(l,"number",l.value)),v=r?eo(r):window,e){case"focusin":(Xn(v)||"true"===v.contentEditable)&&(hr=v,yr=r,vr=null);break;case"focusout":vr=yr=hr=null;break;case"mousedown":gr=!0;break;case"contextmenu":case"mouseup":case"dragend":gr=!1,br(i,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(i,n,o)}var g;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(g=Jt()):(Yt="value"in($t=o)?$t.value:$t.textContent,Bn=!0)),0<(v=Ir(r,b)).length&&(b=new bn(b,e,null,n,o),i.push({event:b,listeners:v}),(g||null!==(g=Un(n)))&&(b.data=g))),(g=Nn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Mn);case"textInput":return(e=t.data)===Mn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!In&&Fn(e,t)?(e=Jt(),Zt=Yt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Ir(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=g)}Rr(i,t)}))}function Pr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ir(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Me(e,n))&&r.unshift(Pr(e,a,o)),null!=(a=Me(e,t))&&r.push(Pr(e,a,o))),e=e.return}return r}function Lr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Nr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(null!==c&&c===r)break;5===l.tag&&null!==u&&(l=u,o?null!=(c=Me(n,a))&&i.unshift(Pr(n,c,l)):o||null!=(c=Me(n,a))&&i.push(Pr(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function Dr(){}var Mr=null,zr=null;function Fr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Br="function"==typeof setTimeout?setTimeout:void 0,qr="function"==typeof clearTimeout?clearTimeout:void 0;function Xr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Hr=0,Vr=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Vr,Wr="__reactProps$"+Vr,$r="__reactContainer$"+Vr,Yr="__reactEvents$"+Vr;function Zr(e){var t=e[Qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$r]||n[Qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Kr(e);null!==e;){if(n=e[Qr])return n;e=Kr(e)}return t}n=(e=n).parentNode}return null}function Jr(e){return!(e=e[Qr]||e[$r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function eo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function to(e){return e[Wr]||null}function no(e){var t=e[Yr];return void 0===t&&(t=e[Yr]=new Set),t}var ro=[],oo=-1;function ao(e){return{current:e}}function io(e){0>oo||(e.current=ro[oo],ro[oo]=null,oo--)}function lo(e,t){oo++,ro[oo]=e.current,e.current=t}var co={},uo=ao(co),so=ao(!1),fo=co;function po(e,t){var n=e.type.contextTypes;if(!n)return co;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mo(e){return null!=e.childContextTypes}function ho(){io(so),io(uo)}function yo(e,t,n){if(uo.current!==co)throw Error(i(168));lo(uo,t),lo(so,n)}function vo(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(i(108,V(t)||"Unknown",a));return o({},n,r)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||co,fo=uo.current,lo(uo,e),lo(so,so.current),!0}function bo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=vo(e,t,fo),r.__reactInternalMemoizedMergedChildContext=e,io(so),io(uo),lo(uo,e)):io(so),lo(so,n)}var wo=null,Eo=null,So=a.unstable_runWithPriority,Oo=a.unstable_scheduleCallback,ko=a.unstable_cancelCallback,Ro=a.unstable_shouldYield,xo=a.unstable_requestPaint,To=a.unstable_now,_o=a.unstable_getCurrentPriorityLevel,Co=a.unstable_ImmediatePriority,jo=a.unstable_UserBlockingPriority,Ao=a.unstable_NormalPriority,Po=a.unstable_LowPriority,Io=a.unstable_IdlePriority,Lo={},No=void 0!==xo?xo:function(){},Do=null,Mo=null,zo=!1,Fo=To(),Uo=1e4>Fo?To:function(){return To()-Fo};function Bo(){switch(_o()){case Co:return 99;case jo:return 98;case Ao:return 97;case Po:return 96;case Io:return 95;default:throw Error(i(332))}}function qo(e){switch(e){case 99:return Co;case 98:return jo;case 97:return Ao;case 96:return Po;case 95:return Io;default:throw Error(i(332))}}function Xo(e,t){return e=qo(e),So(e,t)}function Go(e,t,n){return e=qo(e),Oo(e,t,n)}function Ko(){if(null!==Mo){var e=Mo;Mo=null,ko(e)}Ho()}function Ho(){if(!zo&&null!==Do){zo=!0;var e=0;try{var t=Do;Xo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Do=null}catch(t){throw null!==Do&&(Do=Do.slice(e+1)),Oo(Co,Ko),t}finally{zo=!1}}}var Vo=E.ReactCurrentBatchConfig;function Qo(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wo=ao(null),$o=null,Yo=null,Zo=null;function Jo(){Zo=Yo=$o=null}function ea(e){var t=Wo.current;io(Wo),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function na(e,t){$o=e,Zo=Yo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ii=!0),e.firstContext=null)}function ra(e,t){if(Zo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Zo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Yo){if(null===$o)throw Error(i(308));Yo=t,$o.dependencies={lanes:0,firstContext:t,responders:null}}else Yo=Yo.next=t;return e._currentValue}var oa=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ca(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var a=e.updateQueue;oa=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(null!==c){a.shared.pending=null;var u=c,s=u.next;u.next=null,null===l?i=s:l.next=s,l=u;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==l&&(null===d?f.firstBaseUpdate=s:d.next=s,f.lastBaseUpdate=u)}}if(null!==i){for(d=a.baseState,l=0,f=s=u=null;;){c=i.lane;var p=i.eventTime;if((r&c)===c){null!==f&&(f=f.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var m=e,h=i;switch(c=t,p=n,h.tag){case 1:if("function"==typeof(m=h.payload)){d=m.call(p,d,c);break e}d=m;break e;case 3:m.flags=-4097&m.flags|64;case 0:if(null==(c="function"==typeof(m=h.payload)?m.call(p,d,c):m))break e;d=o({},d,c);break e;case 2:oa=!0}}null!==i.callback&&(e.flags|=32,null===(c=a.effects)?a.effects=[i]:c.push(i))}else p={eventTime:p,lane:c,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===f?(s=f=p,u=d):f=f.next=p,l|=c;if(null===(i=i.next)){if(null===(c=a.shared.pending))break;i=c.next,c.next=null,a.lastBaseUpdate=c,a.shared.pending=null}}null===f&&(u=d),a.baseState=u,a.firstBaseUpdate=s,a.lastBaseUpdate=f,Nl|=l,e.lanes=l,e.memoizedState=d}}function fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(i(191,o));o.call(r)}}}var da=(new r.Component).refs;function pa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ic(),o=lc(e),a=la(r,o);a.payload=t,null!=n&&(a.callback=n),ca(e,a),cc(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ic(),o=lc(e),a=la(r,o);a.tag=1,a.payload=t,null!=n&&(a.callback=n),ca(e,a),cc(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ic(),r=lc(e),o=la(n,r);o.tag=2,null!=t&&(o.callback=t),ca(e,o),cc(e,r,n)}};function ha(e,t,n,r,o,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!(t.prototype&&t.prototype.isPureReactComponent&&cr(n,r)&&cr(o,a))}function ya(e,t,n){var r=!1,o=co,a=t.contextType;return"object"==typeof a&&null!==a?a=ra(a):(o=mo(t)?fo:uo.current,a=(r=null!=(r=t.contextTypes))?po(e,o):co),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=da,aa(e);var a=t.contextType;"object"==typeof a&&null!==a?o.context=ra(a):(a=mo(t)?fo:uo.current,o.context=po(e,a)),sa(e,n,o,r),o.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(pa(e,t,a,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ma.enqueueReplaceState(o,o.state,null),sa(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function wa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===da&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Fc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function l(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Xc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=wa(e,t,n),r.return=e,r):((r=Uc(n.type,n.key,n.props,null,e.mode,r)).ref=wa(e,t,n),r.return=e,r)}function s(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Bc(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Xc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Uc(t.type,t.key,t.props,null,e.mode,n)).ref=wa(e,null,t),n.return=e,n;case O:return(t=Gc(t,e.mode,n)).return=e,t}if(ba(t)||q(t))return(t=Bc(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===o?n.type===k?f(e,t,n.props.children,r,o):u(e,t,n,r):null;case O:return n.key===o?s(e,t,n,r):null}if(ba(n)||q(n))return null!==o?null:f(e,t,n,r,null);Ea(e,n)}return null}function m(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return e=e.get(null===r.key?n:r.key)||null,r.type===k?f(t,e,r.props.children,o,r.key):u(t,e,r,o);case O:return s(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(ba(r)||q(r))return f(t,e=e.get(n)||null,r,o,null);Ea(t,r)}return null}function h(o,i,l,c){for(var u=null,s=null,f=i,h=i=0,y=null;null!==f&&h<l.length;h++){f.index>h?(y=f,f=null):y=f.sibling;var v=p(o,f,l[h],c);if(null===v){null===f&&(f=y);break}e&&f&&null===v.alternate&&t(o,f),i=a(v,i,h),null===s?u=v:s.sibling=v,s=v,f=y}if(h===l.length)return n(o,f),u;if(null===f){for(;h<l.length;h++)null!==(f=d(o,l[h],c))&&(i=a(f,i,h),null===s?u=f:s.sibling=f,s=f);return u}for(f=r(o,f);h<l.length;h++)null!==(y=m(f,o,h,l[h],c))&&(e&&null!==y.alternate&&f.delete(null===y.key?h:y.key),i=a(y,i,h),null===s?u=y:s.sibling=y,s=y);return e&&f.forEach((function(e){return t(o,e)})),u}function y(o,l,c,u){var s=q(c);if("function"!=typeof s)throw Error(i(150));if(null==(c=s.call(c)))throw Error(i(151));for(var f=s=null,h=l,y=l=0,v=null,g=c.next();null!==h&&!g.done;y++,g=c.next()){h.index>y?(v=h,h=null):v=h.sibling;var b=p(o,h,g.value,u);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&t(o,h),l=a(b,l,y),null===f?s=b:f.sibling=b,f=b,h=v}if(g.done)return n(o,h),s;if(null===h){for(;!g.done;y++,g=c.next())null!==(g=d(o,g.value,u))&&(l=a(g,l,y),null===f?s=g:f.sibling=g,f=g);return s}for(h=r(o,h);!g.done;y++,g=c.next())null!==(g=m(h,o,y,g.value,u))&&(e&&null!==g.alternate&&h.delete(null===g.key?y:g.key),l=a(g,l,y),null===f?s=g:f.sibling=g,f=g);return e&&h.forEach((function(e){return t(o,e)})),s}return function(e,r,a,c){var u="object"==typeof a&&null!==a&&a.type===k&&null===a.key;u&&(a=a.props.children);var s="object"==typeof a&&null!==a;if(s)switch(a.$$typeof){case S:e:{for(s=a.key,u=r;null!==u;){if(u.key===s){if(7===u.tag){if(a.type===k){n(e,u.sibling),(r=o(u,a.props.children)).return=e,e=r;break e}}else if(u.elementType===a.type){n(e,u.sibling),(r=o(u,a.props)).ref=wa(e,u,a),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}a.type===k?((r=Bc(a.props.children,e.mode,c,a.key)).return=e,e=r):((c=Uc(a.type,a.key,a.props,null,e.mode,c)).ref=wa(e,r,a),c.return=e,e=c)}return l(e);case O:e:{for(u=a.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=o(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gc(a,e.mode,c)).return=e,e=r}return l(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,a)).return=e,e=r):(n(e,r),(r=Xc(a,e.mode,c)).return=e,e=r),l(e);if(ba(a))return h(e,r,a,c);if(q(a))return y(e,r,a,c);if(s&&Ea(e,a),void 0===a&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,V(e.type)||"Component"))}return n(e,r)}}var Oa=Sa(!0),ka=Sa(!1),Ra={},xa=ao(Ra),Ta=ao(Ra),_a=ao(Ra);function Ca(e){if(e===Ra)throw Error(i(174));return e}function ja(e,t){switch(lo(_a,t),lo(Ta,e),lo(xa,Ra),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}io(xa),lo(xa,t)}function Aa(){io(xa),io(Ta),io(_a)}function Pa(e){Ca(_a.current);var t=Ca(xa.current),n=pe(t,e.type);t!==n&&(lo(Ta,e),lo(xa,n))}function Ia(e){Ta.current===e&&(io(xa),io(Ta))}var La=ao(0);function Na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Da=null,Ma=null,za=!1;function Fa(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ba(e){if(za){var t=Ma;if(t){var n=t;if(!Ua(e,t)){if(!(t=Gr(n.nextSibling))||!Ua(e,t))return e.flags=-1025&e.flags|2,za=!1,void(Da=e);Fa(Da,n)}Da=e,Ma=Gr(t.firstChild)}else e.flags=-1025&e.flags|2,za=!1,Da=e}}function qa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Da=e}function Xa(e){if(e!==Da)return!1;if(!za)return qa(e),za=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=Ma;t;)Fa(e,t),t=Gr(t.nextSibling);if(qa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ma=Gr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ma=null}}else Ma=Da?Gr(e.stateNode.nextSibling):null;return!0}function Ga(){Ma=Da=null,za=!1}var Ka=[];function Ha(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var Va=E.ReactCurrentDispatcher,Qa=E.ReactCurrentBatchConfig,Wa=0,$a=null,Ya=null,Za=null,Ja=!1,ei=!1;function ti(){throw Error(i(321))}function ni(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function ri(e,t,n,r,o,a){if(Wa=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Va.current=null===e||null===e.memoizedState?Ci:ji,e=n(r,o),ei){a=0;do{if(ei=!1,!(25>a))throw Error(i(301));a+=1,Za=Ya=null,t.updateQueue=null,Va.current=Ai,e=n(r,o)}while(ei)}if(Va.current=_i,t=null!==Ya&&null!==Ya.next,Wa=0,Za=Ya=$a=null,Ja=!1,t)throw Error(i(300));return e}function oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Za?$a.memoizedState=Za=e:Za=Za.next=e,Za}function ai(){if(null===Ya){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=Ya.next;var t=null===Za?$a.memoizedState:Za.next;if(null!==t)Za=t,Ya=e;else{if(null===e)throw Error(i(310));e={memoizedState:(Ya=e).memoizedState,baseState:Ya.baseState,baseQueue:Ya.baseQueue,queue:Ya.queue,next:null},null===Za?$a.memoizedState=Za=e:Za=Za.next=e}return Za}function ii(e,t){return"function"==typeof t?t(e):t}function li(e){var t=ai(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=Ya,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var l=o.next;o.next=a.next,a.next=l}r.baseQueue=o=a,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var c=l=a=null,u=o;do{var s=u.lane;if((Wa&s)===s)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var f={lane:s,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(l=c=f,a=r):c=c.next=f,$a.lanes|=s,Nl|=s}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ir(r,t.memoizedState)||(Ii=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ci(e){var t=ai(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{a=e(a,l.action),l=l.next}while(l!==o);ir(a,t.memoizedState)||(Ii=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ui(e,t,n){var r=t._getVersion;r=r(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Wa&e)===e)&&(t._workInProgressVersionPrimary=r,Ka.push(t))),e)return n(t._source);throw Ka.push(t),Error(i(350))}function si(e,t,n,r){var o=Tl;if(null===o)throw Error(i(349));var a=t._getVersion,l=a(t._source),c=Va.current,u=c.useState((function(){return ui(o,t,n)})),s=u[1],f=u[0];u=Za;var d=e.memoizedState,p=d.refs,m=p.getSnapshot,h=d.source;d=d.subscribe;var y=$a;return e.memoizedState={refs:p,source:t,subscribe:r},c.useEffect((function(){p.getSnapshot=n,p.setSnapshot=s;var e=a(t._source);if(!ir(l,e)){e=n(t._source),ir(f,e)||(s(e),e=lc(y),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var r=o.entanglements,i=e;0<i;){var c=31-Ut(i),u=1<<c;r[c]|=e,i&=~u}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=lc(y);o.mutableReadLanes|=r&o.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ir(m,n)&&ir(h,t)&&ir(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ii,lastRenderedState:f}).dispatch=s=Ti.bind(null,$a,e),u.queue=e,u.baseQueue=null,f=ui(o,t,n),u.memoizedState=u.baseState=f),f}function fi(e,t,n){return si(ai(),e,t,n)}function di(e){var t=oi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ii,lastRenderedState:e}).dispatch=Ti.bind(null,$a,e),[t.memoizedState,e]}function pi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mi(e){return e={current:e},oi().memoizedState=e}function hi(){return ai().memoizedState}function yi(e,t,n,r){var o=oi();$a.flags|=e,o.memoizedState=pi(1|t,n,void 0,void 0===r?null:r)}function vi(e,t,n,r){var o=ai();r=void 0===r?null:r;var a=void 0;if(null!==Ya){var i=Ya.memoizedState;if(a=i.destroy,null!==r&&ni(r,i.deps))return void pi(t,n,a,r)}$a.flags|=e,o.memoizedState=pi(1|t,n,a,r)}function gi(e,t){return yi(516,4,e,t)}function bi(e,t){return vi(516,4,e,t)}function wi(e,t){return vi(4,2,e,t)}function Ei(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Si(e,t,n){return n=null!=n?n.concat([e]):null,vi(4,2,Ei.bind(null,t,e),n)}function Oi(){}function ki(e,t){var n=ai();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ni(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ri(e,t){var n=ai();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ni(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xi(e,t){var n=Bo();Xo(98>n?98:n,(function(){e(!0)})),Xo(97<n?97:n,(function(){var n=Qa.transition;Qa.transition=1;try{e(!1),t()}finally{Qa.transition=n}}))}function Ti(e,t,n){var r=ic(),o=lc(e),a={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?a.next=a:(a.next=i.next,i.next=a),t.pending=a,i=e.alternate,e===$a||null!==i&&i===$a)ei=Ja=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var l=t.lastRenderedState,c=i(l,n);if(a.eagerReducer=i,a.eagerState=c,ir(c,l))return}catch(e){}cc(e,o,r)}}var _i={readContext:ra,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useOpaqueIdentifier:ti,unstable_isNewReconciler:!1},Ci={readContext:ra,useCallback:function(e,t){return oi().memoizedState=[e,void 0===t?null:t],e},useContext:ra,useEffect:gi,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,yi(4,2,Ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yi(4,2,e,t)},useMemo:function(e,t){var n=oi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ti.bind(null,$a,e),[r.memoizedState,e]},useRef:mi,useState:di,useDebugValue:Oi,useDeferredValue:function(e){var t=di(e),n=t[0],r=t[1];return gi((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=di(!1),t=e[0];return mi(e=xi.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oi();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},si(r,e,t,n)},useOpaqueIdentifier:function(){if(za){var e=!1,t=function(e){return{$$typeof:N,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Hr++).toString(36))),Error(i(355))})),n=di(t)[1];return 0==(2&$a.mode)&&($a.flags|=516,pi(5,(function(){n("r:"+(Hr++).toString(36))}),void 0,null)),t}return di(t="r:"+(Hr++).toString(36)),t},unstable_isNewReconciler:!1},ji={readContext:ra,useCallback:ki,useContext:ra,useEffect:bi,useImperativeHandle:Si,useLayoutEffect:wi,useMemo:Ri,useReducer:li,useRef:hi,useState:function(){return li(ii)},useDebugValue:Oi,useDeferredValue:function(e){var t=li(ii),n=t[0],r=t[1];return bi((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=li(ii)[0];return[hi().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return li(ii)[0]},unstable_isNewReconciler:!1},Ai={readContext:ra,useCallback:ki,useContext:ra,useEffect:bi,useImperativeHandle:Si,useLayoutEffect:wi,useMemo:Ri,useReducer:ci,useRef:hi,useState:function(){return ci(ii)},useDebugValue:Oi,useDeferredValue:function(e){var t=ci(ii),n=t[0],r=t[1];return bi((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=ci(ii)[0];return[hi().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return ci(ii)[0]},unstable_isNewReconciler:!1},Pi=E.ReactCurrentOwner,Ii=!1;function Li(e,t,n,r){t.child=null===e?ka(t,null,n,r):Oa(t,e.child,n,r)}function Ni(e,t,n,r,o){n=n.render;var a=t.ref;return na(t,o),r=ri(e,t,n,r,a,o),null===e||Ii?(t.flags|=1,Li(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Ji(e,t,o))}function Di(e,t,n,r,o,a){if(null===e){var i=n.type;return"function"!=typeof i||zc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Uc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Mi(e,t,i,r,o,a))}return i=e.child,0==(o&a)&&(o=i.memoizedProps,(n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)?Ji(e,t,a):(t.flags|=1,(e=Fc(i,r)).ref=t.ref,e.return=t,t.child=e)}function Mi(e,t,n,r,o,a){if(null!==e&&cr(e.memoizedProps,r)&&e.ref===t.ref){if(Ii=!1,0==(a&o))return t.lanes=e.lanes,Ji(e,t,a);0!=(16384&e.flags)&&(Ii=!0)}return Ui(e,t,n,r,a)}function zi(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},hc(0,n);else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},hc(0,e),null;t.memoizedState={baseLanes:0},hc(0,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,hc(0,r);return Li(e,t,o,n),t.child}function Fi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ui(e,t,n,r,o){var a=mo(n)?fo:uo.current;return a=po(t,a),na(t,o),n=ri(e,t,n,r,a,o),null===e||Ii?(t.flags|=1,Li(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Ji(e,t,o))}function Bi(e,t,n,r,o){if(mo(n)){var a=!0;go(t)}else a=!1;if(na(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ya(t,n,r),ga(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;u="object"==typeof u&&null!==u?ra(u):po(t,u=mo(n)?fo:uo.current);var s=n.getDerivedStateFromProps,f="function"==typeof s||"function"==typeof i.getSnapshotBeforeUpdate;f||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==r||c!==u)&&va(t,i,r,u),oa=!1;var d=t.memoizedState;i.state=d,sa(t,r,i,o),c=t.memoizedState,l!==r||d!==c||so.current||oa?("function"==typeof s&&(pa(t,n,s,r),c=t.memoizedState),(l=oa||ha(t,n,l,r,d,c,u))?(f||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4)):("function"==typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):("function"==typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,ia(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Qo(t.type,l),i.props=u,f=t.pendingProps,d=i.context,c="object"==typeof(c=n.contextType)&&null!==c?ra(c):po(t,c=mo(n)?fo:uo.current);var p=n.getDerivedStateFromProps;(s="function"==typeof p||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==f||d!==c)&&va(t,i,r,c),oa=!1,d=t.memoizedState,i.state=d,sa(t,r,i,o);var m=t.memoizedState;l!==f||d!==m||so.current||oa?("function"==typeof p&&(pa(t,n,p,r),m=t.memoizedState),(u=oa||ha(t,n,u,r,d,m,c))?(s||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,c),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,c)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=c,r=u):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return qi(e,t,n,r,a,o)}function qi(e,t,n,r,o,a){Fi(e,t);var i=0!=(64&t.flags);if(!r&&!i)return o&&bo(t,n,!1),Ji(e,t,a);r=t.stateNode,Pi.current=t;var l=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Oa(t,e.child,null,a),t.child=Oa(t,null,l,a)):Li(e,t,l,a),t.memoizedState=r.state,o&&bo(t,n,!0),t.child}function Xi(e){var t=e.stateNode;t.pendingContext?yo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yo(0,t.context,!1),ja(e,t.containerInfo)}var Gi,Ki,Hi,Vi={dehydrated:null,retryLane:0};function Qi(e,t,n){var r,o=t.pendingProps,a=La.current,i=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),lo(La,1&a),null===e?(void 0!==o.fallback&&Ba(t),e=o.children,a=o.fallback,i?(e=Wi(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Vi,e):"number"==typeof o.unstable_expectedLoadTime?(e=Wi(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Vi,t.lanes=33554432,e):((n=qc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(o=function(e,t,n,r,o){var a=t.mode,i=e.child;e=i.sibling;var l={mode:"hidden",children:n};return 0==(2&a)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=l,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Fc(i,l),null!==e?r=Fc(e,r):(r=Bc(r,a,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,o.children,o.fallback,n),i=t.child,a=e.child.memoizedState,i.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=Vi,o):(n=function(e,t,n,r){var o=e.child;return e=o.sibling,n=Fc(o,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,o.children,n),t.memoizedState=null,n))}function Wi(e,t,n,r){var o=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=qc(t,o,0,null),n=Bc(n,o,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function $i(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ta(e.return,t)}function Yi(e,t,n,r,o,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o,i.lastEffect=a)}function Zi(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Li(e,t,r.children,n),0!=(2&(r=La.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$i(e,n);else if(19===e.tag)$i(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lo(La,r),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Na(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Yi(t,!1,o,n,a,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Na(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Yi(t,!0,n,null,a,t.lastEffect);break;case"together":Yi(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ji(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Fc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function el(e,t){if(!za)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mo(t.type)&&ho(),null;case 3:return Aa(),io(so),io(uo),Ha(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Xa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ia(t);var a=Ca(_a.current);if(n=t.type,null!==e&&null!=t.stateNode)Ki(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=Ca(xa.current),Xa(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Qr]=t,r[Wr]=l,n){case"dialog":xr("cancel",r),xr("close",r);break;case"iframe":case"object":case"embed":xr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)xr(Sr[e],r);break;case"source":xr("error",r);break;case"img":case"image":case"link":xr("error",r),xr("load",r);break;case"details":xr("toggle",r);break;case"input":ee(r,l),xr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},xr("invalid",r);break;case"textarea":ce(r,l),xr("invalid",r)}for(var u in Oe(n,l),e=null,l)l.hasOwnProperty(u)&&(a=l[u],"children"===u?"string"==typeof a?r.textContent!==a&&(e=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(e=["children",""+a]):c.hasOwnProperty(u)&&null!=a&&"onScroll"===u&&xr("scroll",r));switch(n){case"input":$(r),re(r,l,!0);break;case"textarea":$(r),se(r);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(r.onclick=Dr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Qr]=t,e[Wr]=r,Gi(e,t),t.stateNode=e,u=ke(n,r),n){case"dialog":xr("cancel",e),xr("close",e),a=r;break;case"iframe":case"object":case"embed":xr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)xr(Sr[a],e);a=r;break;case"source":xr("error",e),a=r;break;case"img":case"image":case"link":xr("error",e),xr("load",e),a=r;break;case"details":xr("toggle",e),a=r;break;case"input":ee(e,r),a=J(e,r),xr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=o({},r,{value:void 0}),xr("invalid",e);break;case"textarea":ce(e,r),a=le(e,r),xr("invalid",e);break;default:a=r}Oe(n,a);var s=a;for(l in s)if(s.hasOwnProperty(l)){var f=s[l];"style"===l?Ee(e,f):"dangerouslySetInnerHTML"===l?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===l?"string"==typeof f?("textarea"!==n||""!==f)&&ve(e,f):"number"==typeof f&&ve(e,""+f):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(c.hasOwnProperty(l)?null!=f&&"onScroll"===l&&xr("scroll",e):null!=f&&w(e,l,f,u))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(l=r.value)?ie(e,!!r.multiple,l,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Dr)}Fr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Hi(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));n=Ca(_a.current),Ca(xa.current),Xa(t)?(r=t.stateNode,n=t.memoizedProps,r[Qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=t,t.stateNode=r)}return null;case 13:return io(La),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Xa(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&La.current)?0===Pl&&(Pl=3):(0!==Pl&&3!==Pl||(Pl=4),null===Tl||0==(134217727&Nl)&&0==(134217727&Dl)||dc(Tl,Cl))),(r||n)&&(t.flags|=4),null);case 4:return Aa(),null===e&&_r(t.stateNode.containerInfo),null;case 10:return ea(t),null;case 19:if(io(La),null===(r=t.memoizedState))return null;if(l=0!=(64&t.flags),null===(u=r.rendering))if(l)el(r,!1);else{if(0!==Pl||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Na(e))){for(t.flags|=64,el(r,!1),null!==(l=u.updateQueue)&&(t.updateQueue=l,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(l=n).flags&=2,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null,null===(u=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,e=u.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lo(La,1&La.current|2),t.child}e=e.sibling}null!==r.tail&&Uo()>Ul&&(t.flags|=64,l=!0,el(r,!1),t.lanes=33554432)}else{if(!l)if(null!==(e=Na(u))){if(t.flags|=64,l=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),el(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!za)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Uo()-r.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=64,l=!0,el(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Uo(),n.sibling=null,t=La.current,lo(La,l?1&t|2:1&t),n):null;case 23:case 24:return yc(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function nl(e){switch(e.tag){case 1:mo(e.type)&&ho();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Aa(),io(so),io(uo),Ha(),0!=(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return Ia(e),null;case 13:return io(La),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return io(La),null;case 4:return Aa(),null;case 10:return ea(e),null;case 23:case 24:return yc(),null;default:return null}}function rl(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function ol(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Gi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ki=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ca(xa.current);var i,l=null;switch(n){case"input":a=J(e,a),r=J(e,r),l=[];break;case"option":a=ae(e,a),r=ae(e,r),l=[];break;case"select":a=o({},a,{value:void 0}),r=o({},r,{value:void 0}),l=[];break;case"textarea":a=le(e,a),r=le(e,r),l=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=Dr)}for(f in Oe(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var u=a[f];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(c.hasOwnProperty(f)?l||(l=[]):(l=l||[]).push(f,null));for(f in r){var s=r[f];if(u=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&s!==u&&(null!=s||null!=u))if("style"===f)if(u){for(i in u)!u.hasOwnProperty(i)||s&&s.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in s)s.hasOwnProperty(i)&&u[i]!==s[i]&&(n||(n={}),n[i]=s[i])}else n||(l||(l=[]),l.push(f,n)),n=s;else"dangerouslySetInnerHTML"===f?(s=s?s.__html:void 0,u=u?u.__html:void 0,null!=s&&u!==s&&(l=l||[]).push(f,s)):"children"===f?"string"!=typeof s&&"number"!=typeof s||(l=l||[]).push(f,""+s):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(c.hasOwnProperty(f)?(null!=s&&"onScroll"===f&&xr("scroll",e),l||u===s||(l=[])):"object"==typeof s&&null!==s&&s.$$typeof===N?s.toString():(l=l||[]).push(f,s))}n&&(l=l||[]).push("style",n);var f=l;(t.updateQueue=f)&&(t.flags|=4)}},Hi=function(e,t,n,r){n!==r&&(t.flags|=4)};var al="function"==typeof WeakMap?WeakMap:Map;function il(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Kl=r),ol(0,t)},n}function ll(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return ol(0,t),r(o)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this),ol(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var cl="function"==typeof WeakSet?WeakSet:Set;function ul(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ic(e,t)}else t.current=null}function sl(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Xr(t.stateNode.containerInfo))}throw Error(i(163))}function fl(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;r=o.next,0!=(4&(o=o.tag))&&0!=(1&o)&&(jc(n,e),Cc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qo(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Fr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&gt(n)))))}throw Error(i(163))}function dl(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,r.style.display=we("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function pl(e,t){if(Eo&&"function"==typeof Eo.onCommitFiberUnmount)try{Eo.onCommitFiberUnmount(wo,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,o=r.destroy;if(r=r.tag,void 0!==o)if(0!=(4&r))jc(t,n);else{r=t;try{o()}catch(e){Ic(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ul(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ic(t,e)}break;case 5:ul(t);break;case 4:bl(e,t)}}function ml(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function hl(e){return 5===e.tag||3===e.tag||4===e.tag}function yl(e){e:{for(var t=e.return;null!==t;){if(hl(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||hl(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?vl(e,n,t):gl(e,n,t)}function vl(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Dr));else if(4!==r&&null!==(e=e.child))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function gl(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function bl(e,t){for(var n,r,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(i(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,u=c;;)if(pl(l,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(l=n,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(pl(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function wl(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Wr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),ke(e,o),t=ke(e,r),o=0;o<a.length;o+=2){var l=a[o],c=a[o+1];"style"===l?Ee(n,c):"dangerouslySetInnerHTML"===l?ye(n,c):"children"===l?ve(n,c):w(n,l,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?ie(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,gt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Fl=Uo(),dl(t.child,!0)),void El(t);case 19:return void El(t);case 23:case 24:return void dl(t,null!==t.memoizedState)}throw Error(i(163))}function El(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new cl),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Sl(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Ol=Math.ceil,kl=E.ReactCurrentDispatcher,Rl=E.ReactCurrentOwner,xl=0,Tl=null,_l=null,Cl=0,jl=0,Al=ao(0),Pl=0,Il=null,Ll=0,Nl=0,Dl=0,Ml=0,zl=null,Fl=0,Ul=1/0;function Bl(){Ul=Uo()+500}var ql,Xl=null,Gl=!1,Kl=null,Hl=null,Vl=!1,Ql=null,Wl=90,$l=[],Yl=[],Zl=null,Jl=0,ec=null,tc=-1,nc=0,rc=0,oc=null,ac=!1;function ic(){return 0!=(48&xl)?Uo():-1!==tc?tc:tc=Uo()}function lc(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Bo()?1:2;if(0===nc&&(nc=Ll),0!==Vo.transition){0!==rc&&(rc=null!==zl?zl.pendingLanes:0),e=nc;var t=4186112&~rc;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Bo(),Dt(0!=(4&xl)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),nc)}function cc(e,t,n){if(50<Jl)throw Jl=0,ec=null,Error(i(185));if(null===(e=uc(e,t)))return null;Ft(e,t,n),e===Tl&&(Dl|=t,4===Pl&&dc(e,Cl));var r=Bo();1===t?0!=(8&xl)&&0==(48&xl)?pc(e):(sc(e,n),0===xl&&(Bl(),Ko())):(0==(4&xl)||98!==r&&99!==r||(null===Zl?Zl=new Set([e]):Zl.add(e)),sc(e,n)),zl=e}function uc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function sc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var c=31-Ut(l),u=1<<c,s=a[c];if(-1===s){if(0==(u&r)||0!=(u&o)){s=t,It(u);var f=Pt;a[c]=10<=f?s+250:6<=f?s+5e3:-1}}else s<=t&&(e.expiredLanes|=u);l&=~u}if(r=Lt(e,e===Tl?Cl:0),t=Pt,0===r)null!==n&&(n!==Lo&&ko(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Lo&&ko(n)}15===t?(n=pc.bind(null,e),null===Do?(Do=[n],Mo=Oo(Co,Ho)):Do.push(n),n=Lo):14===t?n=Go(99,pc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=Go(n,fc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function fc(e){if(tc=-1,rc=nc=0,0!=(48&xl))throw Error(i(327));var t=e.callbackNode;if(_c()&&e.callbackNode!==t)return null;var n=Lt(e,e===Tl?Cl:0);if(0===n)return null;var r=n,o=xl;xl|=16;var a=bc();for(Tl===e&&Cl===r||(Bl(),vc(e,r));;)try{Sc();break}catch(t){gc(e,t)}if(Jo(),kl.current=a,xl=o,null!==_l?r=0:(Tl=null,Cl=0,r=Pl),0!=(Ll&Dl))vc(e,0);else if(0!==r){if(2===r&&(xl|=64,e.hydrate&&(e.hydrate=!1,Xr(e.containerInfo)),0!==(n=Nt(e))&&(r=wc(e,n))),1===r)throw t=Il,vc(e,0),dc(e,n),sc(e,Uo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Rc(e);break;case 3:if(dc(e,n),(62914560&n)===n&&10<(r=Fl+500-Uo())){if(0!==Lt(e,0))break;if(((o=e.suspendedLanes)&n)!==n){ic(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Br(Rc.bind(null,e),r);break}Rc(e);break;case 4:if(dc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,o=-1;0<n;){var l=31-Ut(n);a=1<<l,(l=r[l])>o&&(o=l),n&=~a}if(n=o,10<(n=(120>(n=Uo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ol(n/1960))-n)){e.timeoutHandle=Br(Rc.bind(null,e),n);break}Rc(e);break;default:throw Error(i(329))}}return sc(e,Uo()),e.callbackNode===t?fc.bind(null,e):null}function dc(e,t){for(t&=~Ml,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function pc(e){if(0!=(48&xl))throw Error(i(327));if(_c(),e===Tl&&0!=(e.expiredLanes&Cl)){var t=Cl,n=wc(e,t);0!=(Ll&Dl)&&(n=wc(e,t=Lt(e,t)))}else n=wc(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(xl|=64,e.hydrate&&(e.hydrate=!1,Xr(e.containerInfo)),0!==(t=Nt(e))&&(n=wc(e,t))),1===n)throw n=Il,vc(e,0),dc(e,t),sc(e,Uo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rc(e),sc(e,Uo()),null}function mc(e,t){var n=xl;xl&=-2,xl|=8;try{return e(t)}finally{0===(xl=n)&&(Bl(),Ko())}}function hc(e,t){lo(Al,jl),jl|=t,Ll|=t}function yc(){jl=Al.current,io(Al)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qr(n)),null!==_l)for(n=_l.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&ho();break;case 3:Aa(),io(so),io(uo),Ha();break;case 5:Ia(r);break;case 4:Aa();break;case 13:case 19:io(La);break;case 10:ea(r);break;case 23:case 24:yc()}n=n.return}Tl=e,_l=Fc(e.current,null),Cl=jl=Ll=t,Pl=0,Il=null,Ml=Dl=Nl=0}function gc(e,t){for(;;){var n=_l;try{if(Jo(),Va.current=_i,Ja){for(var r=$a.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}Ja=!1}if(Wa=0,Za=Ya=$a=null,ei=!1,Rl.current=null,null===n||null===n.return){Pl=1,Il=t,_l=null;break}e:{var a=e,i=n.return,l=n,c=t;if(t=Cl,l.flags|=2048,l.firstEffect=l.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c;if(0==(2&l.mode)){var s=l.alternate;s?(l.updateQueue=s.updateQueue,l.memoizedState=s.memoizedState,l.lanes=s.lanes):(l.updateQueue=null,l.memoizedState=null)}var f=0!=(1&La.current),d=i;do{var p;if(p=13===d.tag){var m=d.memoizedState;if(null!==m)p=null!==m.dehydrated;else{var h=d.memoizedProps;p=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!f)}}if(p){var y=d.updateQueue;if(null===y){var v=new Set;v.add(u),d.updateQueue=v}else y.add(u);if(0==(2&d.mode)){if(d.flags|=64,l.flags|=16384,l.flags&=-2981,1===l.tag)if(null===l.alternate)l.tag=17;else{var g=la(-1,1);g.tag=2,ca(l,g)}l.lanes|=1;break e}c=void 0,l=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new al,c=new Set,b.set(u,c)):void 0===(c=b.get(u))&&(c=new Set,b.set(u,c)),!c.has(l)){c.add(l);var w=Lc.bind(null,a,u,l);u.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((V(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Pl&&(Pl=2),c=rl(c,l),d=i;do{switch(d.tag){case 3:a=c,d.flags|=4096,t&=-t,d.lanes|=t,ua(d,il(0,a,t));break e;case 1:a=c;var E=d.type,S=d.stateNode;if(0==(64&d.flags)&&("function"==typeof E.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Hl||!Hl.has(S)))){d.flags|=4096,t&=-t,d.lanes|=t,ua(d,ll(d,a,t));break e}}d=d.return}while(null!==d)}kc(n)}catch(e){t=e,_l===n&&null!==n&&(_l=n=n.return);continue}break}}function bc(){var e=kl.current;return kl.current=_i,null===e?_i:e}function wc(e,t){var n=xl;xl|=16;var r=bc();for(Tl===e&&Cl===t||vc(e,t);;)try{Ec();break}catch(t){gc(e,t)}if(Jo(),xl=n,kl.current=r,null!==_l)throw Error(i(261));return Tl=null,Cl=0,Pl}function Ec(){for(;null!==_l;)Oc(_l)}function Sc(){for(;null!==_l&&!Ro();)Oc(_l)}function Oc(e){var t=ql(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?kc(e):_l=t,Rl.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=tl(n,t,jl)))return void(_l=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&jl)||0==(4&n.mode)){for(var r=0,o=n.child;null!==o;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=nl(t)))return n.flags&=2047,void(_l=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(_l=t);_l=t=e}while(null!==t);0===Pl&&(Pl=5)}function Rc(e){var t=Bo();return Xo(99,xc.bind(null,e,t)),null}function xc(e,t){do{_c()}while(null!==Ql);if(0!=(48&xl))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,a=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var l=e.eventTimes,c=e.expirationTimes;0<a;){var u=31-Ut(a),s=1<<u;o[u]=0,l[u]=-1,c[u]=-1,a&=~s}if(null!==Zl&&0==(24&r)&&Zl.has(e)&&Zl.delete(e),e===Tl&&(_l=Tl=null,Cl=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(o=xl,xl|=32,Rl.current=null,Mr=Kt,pr(l=dr())){if("selectionStart"in l)c={start:l.selectionStart,end:l.selectionEnd};else e:if(c=(c=l.ownerDocument)&&c.defaultView||window,(s=c.getSelection&&c.getSelection())&&0!==s.rangeCount){c=s.anchorNode,a=s.anchorOffset,u=s.focusNode,s=s.focusOffset;try{c.nodeType,u.nodeType}catch(e){c=null;break e}var f=0,d=-1,p=-1,m=0,h=0,y=l,v=null;t:for(;;){for(var g;y!==c||0!==a&&3!==y.nodeType||(d=f+a),y!==u||0!==s&&3!==y.nodeType||(p=f+s),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)v=y,y=g;for(;;){if(y===l)break t;if(v===c&&++m===a&&(d=f),v===u&&++h===s&&(p=f),null!==(g=y.nextSibling))break;v=(y=v).parentNode}y=g}c=-1===d||-1===p?null:{start:d,end:p}}else c=null;c=c||{start:0,end:0}}else c=null;zr={focusedElem:l,selectionRange:c},Kt=!1,oc=null,ac=!1,Xl=r;do{try{Tc()}catch(e){if(null===Xl)throw Error(i(330));Ic(Xl,e),Xl=Xl.nextEffect}}while(null!==Xl);oc=null,Xl=r;do{try{for(l=e;null!==Xl;){var b=Xl.flags;if(16&b&&ve(Xl.stateNode,""),128&b){var w=Xl.alternate;if(null!==w){var E=w.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&b){case 2:yl(Xl),Xl.flags&=-3;break;case 6:yl(Xl),Xl.flags&=-3,wl(Xl.alternate,Xl);break;case 1024:Xl.flags&=-1025;break;case 1028:Xl.flags&=-1025,wl(Xl.alternate,Xl);break;case 4:wl(Xl.alternate,Xl);break;case 8:bl(l,c=Xl);var S=c.alternate;ml(c),null!==S&&ml(S)}Xl=Xl.nextEffect}}catch(e){if(null===Xl)throw Error(i(330));Ic(Xl,e),Xl=Xl.nextEffect}}while(null!==Xl);if(E=zr,w=dr(),b=E.focusedElem,l=E.selectionRange,w!==b&&b&&b.ownerDocument&&fr(b.ownerDocument.documentElement,b)){null!==l&&pr(b)&&(w=l.start,void 0===(E=l.end)&&(E=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(E,b.value.length)):(E=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(E=E.getSelection(),c=b.textContent.length,S=Math.min(l.start,c),l=void 0===l.end?S:Math.min(l.end,c),!E.extend&&S>l&&(c=l,l=S,S=c),c=sr(b,S),a=sr(b,l),c&&a&&(1!==E.rangeCount||E.anchorNode!==c.node||E.anchorOffset!==c.offset||E.focusNode!==a.node||E.focusOffset!==a.offset)&&((w=w.createRange()).setStart(c.node,c.offset),E.removeAllRanges(),S>l?(E.addRange(w),E.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),E.addRange(w))))),w=[];for(E=b;E=E.parentNode;)1===E.nodeType&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(E=w[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Kt=!!Mr,zr=Mr=null,e.current=n,Xl=r;do{try{for(b=e;null!==Xl;){var O=Xl.flags;if(36&O&&fl(b,Xl.alternate,Xl),128&O){w=void 0;var k=Xl.ref;if(null!==k){var R=Xl.stateNode;Xl.tag,w=R,"function"==typeof k?k(w):k.current=w}}Xl=Xl.nextEffect}}catch(e){if(null===Xl)throw Error(i(330));Ic(Xl,e),Xl=Xl.nextEffect}}while(null!==Xl);Xl=null,No(),xl=o}else e.current=n;if(Vl)Vl=!1,Ql=e,Wl=t;else for(Xl=r;null!==Xl;)t=Xl.nextEffect,Xl.nextEffect=null,8&Xl.flags&&((O=Xl).sibling=null,O.stateNode=null),Xl=t;if(0===(r=e.pendingLanes)&&(Hl=null),1===r?e===ec?Jl++:(Jl=0,ec=e):Jl=0,n=n.stateNode,Eo&&"function"==typeof Eo.onCommitFiberRoot)try{Eo.onCommitFiberRoot(wo,n,void 0,64==(64&n.current.flags))}catch(e){}if(sc(e,Uo()),Gl)throw Gl=!1,e=Kl,Kl=null,e;return 0!=(8&xl)||Ko(),null}function Tc(){for(;null!==Xl;){var e=Xl.alternate;ac||null===oc||(0!=(8&Xl.flags)?$e(Xl,oc)&&(ac=!0):13===Xl.tag&&Sl(e,Xl)&&$e(Xl,oc)&&(ac=!0));var t=Xl.flags;0!=(256&t)&&sl(e,Xl),0==(512&t)||Vl||(Vl=!0,Go(97,(function(){return _c(),null}))),Xl=Xl.nextEffect}}function _c(){if(90!==Wl){var e=97<Wl?97:Wl;return Wl=90,Xo(e,Ac)}return!1}function Cc(e,t){$l.push(t,e),Vl||(Vl=!0,Go(97,(function(){return _c(),null})))}function jc(e,t){Yl.push(t,e),Vl||(Vl=!0,Go(97,(function(){return _c(),null})))}function Ac(){if(null===Ql)return!1;var e=Ql;if(Ql=null,0!=(48&xl))throw Error(i(331));var t=xl;xl|=32;var n=Yl;Yl=[];for(var r=0;r<n.length;r+=2){var o=n[r],a=n[r+1],l=o.destroy;if(o.destroy=void 0,"function"==typeof l)try{l()}catch(e){if(null===a)throw Error(i(330));Ic(a,e)}}for(n=$l,$l=[],r=0;r<n.length;r+=2){o=n[r],a=n[r+1];try{var c=o.create;o.destroy=c()}catch(e){if(null===a)throw Error(i(330));Ic(a,e)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return xl=t,Ko(),!0}function Pc(e,t,n){ca(e,t=il(0,t=rl(n,t),1)),t=ic(),null!==(e=uc(e,1))&&(Ft(e,1,t),sc(e,t))}function Ic(e,t){if(3===e.tag)Pc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Pc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){var o=ll(n,e=rl(t,e),1);if(ca(n,o),o=ic(),null!==(n=uc(n,1)))Ft(n,1,o),sc(n,o);else if("function"==typeof r.componentDidCatch&&(null===Hl||!Hl.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Lc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ic(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Cl&n)===n&&(4===Pl||3===Pl&&(62914560&Cl)===Cl&&500>Uo()-Fl?vc(e,0):Ml|=n),sc(e,t)}function Nc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Bo()?1:2:(0===nc&&(nc=Ll),0===(t=Mt(62914560&~nc))&&(t=4194304))),n=ic(),null!==(e=uc(e,t))&&(Ft(e,t,n),sc(e,n))}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Dc(e,t,n,r)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uc(e,t,n,r,o,a){var l=2;if(r=e,"function"==typeof e)zc(e)&&(l=1);else if("string"==typeof e)l=5;else e:switch(e){case k:return Bc(n.children,o,a,t);case D:l=8,o|=16;break;case R:l=8,o|=1;break;case x:return(e=Mc(12,n,t,8|o)).elementType=x,e.type=x,e.lanes=a,e;case j:return(e=Mc(13,n,t,o)).type=j,e.elementType=j,e.lanes=a,e;case A:return(e=Mc(19,n,t,o)).elementType=A,e.lanes=a,e;case M:return qc(n,o,a,t);case z:return(e=Mc(24,n,t,o)).elementType=z,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:l=10;break e;case _:l=9;break e;case C:l=11;break e;case P:l=14;break e;case I:l=16,r=null;break e;case L:l=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Mc(l,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Bc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function qc(e,t,n,r){return(e=Mc(23,e,r,t)).elementType=M,e.lanes=n,e}function Xc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Gc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r){var o=t.current,a=ic(),l=lc(o);e:if(n){t:{if(Ve(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(mo(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(i(171))}if(1===n.tag){var u=n.type;if(mo(u)){n=vo(n,u,c);break e}}n=c}else n=co;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,l)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ca(o,t),cc(o,l,a),l}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}function $c(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Kc(e,t,null!=n&&!0===n.hydrate),t=Mc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,aa(t),e[$r]=n.current,_r(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(t=r[e])._getVersion;o=o(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a._internalRoot;if("function"==typeof o){var l=o;o=function(){var e=Vc(i);l.call(e)}}Hc(t,i,e,o)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new $c(e,0,t?{hydrate:!0}:void 0)}(n,r),i=a._internalRoot,"function"==typeof o){var c=o;o=function(){var e=Vc(i);c.call(e)}}mc((function(){Hc(t,i,e,o)}))}return Vc(i)}ql=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||so.current)Ii=!0;else{if(0==(n&r)){switch(Ii=!1,t.tag){case 3:Xi(t),Ga();break;case 5:Pa(t);break;case 1:mo(t.type)&&go(t);break;case 4:ja(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;lo(Wo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Qi(e,t,n):(lo(La,1&La.current),null!==(t=Ji(e,t,n))?t.sibling:null);lo(La,1&La.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Zi(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),lo(La,La.current),r)break;return null;case 23:case 24:return t.lanes=0,zi(e,t,n)}return Ji(e,t,n)}Ii=0!=(16384&e.flags)}else Ii=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=po(t,uo.current),na(t,n),o=ri(null,t,r,e,o,n),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mo(r)){var a=!0;go(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,aa(t);var l=r.getDerivedStateFromProps;"function"==typeof l&&pa(t,r,l,e),o.updater=ma,t.stateNode=o,o._reactInternals=t,ga(t,r,e,n),t=qi(null,t,r,!0,a,n)}else t.tag=0,Li(null,t,o,n),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(a=o._init)(o._payload),t.type=o,a=t.tag=function(e){if("function"==typeof e)return zc(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(o),e=Qo(o,e),a){case 0:t=Ui(null,t,o,e,n);break e;case 1:t=Bi(null,t,o,e,n);break e;case 11:t=Ni(null,t,o,e,n);break e;case 14:t=Di(null,t,o,Qo(o.type,e),r,n);break e}throw Error(i(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ui(e,t,r,o=t.elementType===r?o:Qo(r,o),n);case 1:return r=t.type,o=t.pendingProps,Bi(e,t,r,o=t.elementType===r?o:Qo(r,o),n);case 3:if(Xi(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,ia(e,t),sa(t,r,null,n),(r=t.memoizedState.element)===o)Ga(),t=Ji(e,t,n);else{if((a=(o=t.stateNode).hydrate)&&(Ma=Gr(t.stateNode.containerInfo.firstChild),Da=t,a=za=!0),a){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(a=e[o])._workInProgressVersionPrimary=e[o+1],Ka.push(a);for(n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Li(e,t,r,n),Ga();t=t.child}return t;case 5:return Pa(t),null===e&&Ba(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,l=o.children,Ur(r,o)?l=null:null!==a&&Ur(r,a)&&(t.flags|=16),Fi(e,t),Li(e,t,l,n),t.child;case 6:return null===e&&Ba(t),null;case 13:return Qi(e,t,n);case 4:return ja(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Oa(t,null,r,n):Li(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Ni(e,t,r,o=t.elementType===r?o:Qo(r,o),n);case 7:return Li(e,t,t.pendingProps,n),t.child;case 8:case 12:return Li(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value;var c=t.type._context;if(lo(Wo,c._currentValue),c._currentValue=a,null!==l)if(c=l.value,0==(a=ir(c,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,a):1073741823))){if(l.children===o.children&&!so.current){t=Ji(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){l=c.child;for(var s=u.firstContext;null!==s;){if(s.context===r&&0!=(s.observedBits&a)){1===c.tag&&((s=la(-1,n&-n)).tag=2,ca(c,s)),c.lanes|=n,null!==(s=c.alternate)&&(s.lanes|=n),ta(c.return,n),u.lanes|=n;break}s=s.next}}else l=10===c.tag&&c.type===t.type?null:c.child;if(null!==l)l.return=c;else for(l=c;null!==l;){if(l===t){l=null;break}if(null!==(c=l.sibling)){c.return=l.return,l=c;break}l=l.return}c=l}Li(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(a=t.pendingProps).children,na(t,n),r=r(o=ra(o,a.unstable_observedBits)),t.flags|=1,Li(e,t,r,n),t.child;case 14:return a=Qo(o=t.type,t.pendingProps),Di(e,t,o,a=Qo(o.type,a),r,n);case 15:return Mi(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Qo(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mo(r)?(e=!0,go(t)):e=!1,na(t,n),ya(t,r,o),ga(t,r,o,n),qi(null,t,r,!0,e,n);case 19:return Zi(e,t,n);case 23:case 24:return zi(e,t,n)}throw Error(i(156,t.tag))},$c.prototype.render=function(e){Hc(e,this._internalRoot,null,null)},$c.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Hc(null,e,null,(function(){t[$r]=null}))},Ye=function(e){13===e.tag&&(cc(e,4,ic()),Wc(e,4))},Ze=function(e){13===e.tag&&(cc(e,67108864,ic()),Wc(e,67108864))},Je=function(e){if(13===e.tag){var t=ic(),n=lc(e);cc(e,n,t),Wc(e,n)}},et=function(e,t){return t()},xe=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=to(r);if(!o)throw Error(i(90));Y(r),ne(r,o)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},je=function(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(Bl(),Ko())}},Ae=function(e,t,n,r,o){var a=xl;xl|=4;try{return Xo(98,e.bind(null,t,n,r,o))}finally{0===(xl=a)&&(Bl(),Ko())}},Pe=function(){0==(49&xl)&&(function(){if(null!==Zl){var e=Zl;Zl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,sc(e,Uo())}))}Ko()}(),_c())},Ie=function(e,t){var n=xl;xl|=2;try{return e(t)}finally{0===(xl=n)&&(Bl(),Ko())}};var Jc={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},eu={bundleType:Jc.bundleType,version:Jc.version,rendererPackageName:Jc.rendererPackageName,rendererConfig:Jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=function(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return We(o),e;if(a===r)return We(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var l=!1,c=o.child;c;){if(c===n){l=!0,n=o,r=a;break}if(c===r){l=!0,r=o,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,r=o;break}if(c===r){l=!0,r=a,n=o;break}c=c.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode},findFiberByHostInstance:Jc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{wo=tu.inject(eu),Eo=tu}catch(he){}}t.render=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(i(40));return!!e._reactRootContainer&&(mc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[$r]=null}))})),!0)}},935:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,r="function"==typeof Set,o="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var l,c,u,s;if(Array.isArray(e)){if((l=e.length)!=i.length)return!1;for(c=l;0!=c--;)if(!a(e[c],i[c]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(s=e.entries();!(c=s.next()).done;)if(!i.has(c.value[0]))return!1;for(s=e.entries();!(c=s.next()).done;)if(!a(c.value[1],i.get(c.value[0])))return!1;return!0}if(r&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(s=e.entries();!(c=s.next()).done;)if(!i.has(c.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((l=e.length)!=i.length)return!1;for(c=l;0!=c--;)if(e[c]!==i[c])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((l=(u=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(c=l;0!=c--;)if(!Object.prototype.hasOwnProperty.call(i,u[c]))return!1;if(t&&e instanceof Element)return!1;for(c=l;0!=c--;)if(("_owner"!==u[c]&&"__v"!==u[c]&&"__o"!==u[c]||!e.$$typeof)&&!a(e[u[c]],i[u[c]]))return!1;return!0}return e!=e&&i!=i}e.exports=function(e,t){try{return a(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},408:(e,t,n)=>{var r=n(418),o=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,l=60110,c=60112;t.Suspense=60113;var u=60115,s=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;o=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),i=f("react.provider"),l=f("react.context"),c=f("react.forward_ref"),t.Suspense=f("react.suspense"),u=f("react.memo"),s=f("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function y(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||m}function v(){}function g(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=g.prototype=new v;b.constructor=g,r(b,y.prototype),b.isPureReactComponent=!0;var w={current:null},E=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,a={},i=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var u=Array(c),s=0;s<c;s++)u[s]=arguments[s+2];a.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===a[r]&&(a[r]=c[r]);return{$$typeof:o,type:e,key:i,ref:l,props:a,_owner:w.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var R=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var c=!1;if(null===e)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case a:c=!0}}if(c)return i=i(c=e),e=""===r?"."+x(c,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(R,"$&/")+"/"),T(i,t,n,"",(function(e){return e}))):null!=i&&(k(i)&&(i=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(R,"$&/")+"/")+e)),t.push(i)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var s=r+x(l=e[u],u);c+=T(l,t,n,s,i)}else if(s=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof s)for(e=s.call(e),u=0;!(l=e.next()).done;)c+=T(l=l.value,t,n,s=r+x(l,u++),i);else if("object"===l)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function _(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function C(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var j={current:null};function A(){var e=j.current;if(null===e)throw Error(p(321));return e}var P={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:_,forEach:function(e,t,n){_(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(p(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var a=r({},e.props),i=e.key,l=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,c=w.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(s in t)E.call(t,s)&&!S.hasOwnProperty(s)&&(a[s]=void 0===t[s]&&void 0!==u?u[s]:t[s])}var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){u=Array(s);for(var f=0;f<s;f++)u[f]=arguments[f+2];a.children=u}return{$$typeof:o,type:e.type,key:i,ref:l,props:a,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:l,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:s,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{e.exports=n(408)},666:e=>{var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),i=new _(r||[]);return a._invoke=function(e,t,n){var r=f;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===m){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=R(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=s(e,t,n);if("normal"===c.type){if(r=n.done?m:d,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=m,n.method="throw",n.arg=c.arg)}}}(e,n,i),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",h={};function y(){}function v(){}function g(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==n&&r.call(E,a)&&(b=E);var S=g.prototype=y.prototype=Object.create(b);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,a,i,l){var c=s(e[o],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=s(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:j}}function j(){return{value:t,done:!0}}return v.prototype=g,c(S,"constructor",g),c(g,"constructor",v),v.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},O(k.prototype),c(k.prototype,i,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new k(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return l.type="throw",l.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},53:(e,t)=>{var n,r,o,a;if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,s=null,f=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(f,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(f,0))},r=function(e,t){s=setTimeout(e,t)},o=function(){clearTimeout(s)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var h=!1,y=null,v=-1,g=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,E=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();b=e+g;try{y(!0,e)?E.postMessage(null):(h=!1,y=null)}catch(e){throw E.postMessage(null),e}}else h=!1},n=function(e){y=e,h||(h=!0,E.postMessage(null))},r=function(e,n){v=d((function(){e(t.unstable_now())}),n)},o=function(){p(v),v=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<R(o,t)))break e;e[r]=t,e[n]=o,n=r}}function O(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var a=2*(r+1)-1,i=e[a],l=a+1,c=e[l];if(void 0!==i&&0>R(i,n))void 0!==c&&0>R(c,i)?(e[r]=c,e[l]=n,r=l):(e[r]=i,e[a]=n,r=a);else{if(!(void 0!==c&&0>R(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}return null}function R(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var x=[],T=[],_=1,C=null,j=3,A=!1,P=!1,I=!1;function L(e){for(var t=O(T);null!==t;){if(null===t.callback)k(T);else{if(!(t.startTime<=e))break;k(T),t.sortIndex=t.expirationTime,S(x,t)}t=O(T)}}function N(e){if(I=!1,L(e),!P)if(null!==O(x))P=!0,n(D);else{var t=O(T);null!==t&&r(N,t.startTime-e)}}function D(e,n){P=!1,I&&(I=!1,o()),A=!0;var a=j;try{for(L(n),C=O(x);null!==C&&(!(C.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=C.callback;if("function"==typeof i){C.callback=null,j=C.priorityLevel;var l=i(C.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?C.callback=l:C===O(x)&&k(x),L(n)}else k(x);C=O(x)}if(null!==C)var c=!0;else{var u=O(T);null!==u&&r(N,u.startTime-n),c=!1}return c}finally{C=null,j=a,A=!1}}var M=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||A||(P=!0,n(D))},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return O(x)},t.unstable_next=function(e){switch(j){case 1:case 2:case 3:var t=3;break;default:t=j}var n=j;j=t;try{return e()}finally{j=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=M,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=j;j=e;try{return t()}finally{j=n}},t.unstable_scheduleCallback=function(e,a,i){var l=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?l+i:l,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:_++,callback:a,priorityLevel:e,startTime:i,expirationTime:c=i+c,sortIndex:-1},i>l?(e.sortIndex=i,S(T,e),null===O(x)&&e===O(T)&&(I?o():I=!0,r(N,i-l))):(e.sortIndex=c,S(x,e),P||A||(P=!0,n(D))),e},t.unstable_wrapCallback=function(e){var t=j;return function(){var n=j;j=t;try{return e.apply(this,arguments)}finally{j=n}}}},840:(e,t,n)=>{e.exports=n(53)},285:(e,t,n)=>{var r;window,e.exports=(r=n(294),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=r},function(e,t,n){var r;!function(){var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var i=o.apply(null,r);i&&e.push(i)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var l in r)n.call(r,l)&&r[l]&&e.push(l);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){e.exports={count:"Count__count___VwSFw",label:"Count__label___UClje",smallLabel:"Count__smallLabel___E3KvK",iconCountWrapper:"Count__iconCountWrapper___CTSi2",sectionTallyIconCountWrapper:"Count__sectionTallyIconCountWrapper___lTlUR",expandedIconCount:"Count__expandedIconCount___c3tc2",number:"Count__number___4oBqJ",smallNumber:"Count__smallNumber___wi6E7",horizontal:"Count__horizontal___wp4Sz",small:"Count__small___kecST"}},function(e,t,n){e.exports={sectionTallyWidget:"SectionTally__sectionTallyWidget___aaCj5",sectionTallyWrapper:"SectionTally__sectionTallyWrapper___nwj2j",tally:"SectionTally__tally___es9p7",badgeTally:"SectionTally__badgeTally___ZYqar",horizontal:"SectionTally__horizontal___-hgL+",show:"SectionTally__show___wciqp",logo:"SectionTally__logo___pEojg",logoSmall:"SectionTally__logoSmall___yzxV+",small:"SectionTally__small___QBk26",forceCollapse:"SectionTally__forceCollapse___MexwG",chartSubheading:"SectionTally__chartSubheading___tm7gz",chartLabel:"SectionTally__chartLabel___Nm4F+"}},function(e,t,n){e.exports={tally:"Tally__tally___wF-n7",badgeTally:"Tally__badgeTally___AkCwi",horizontal:"Tally__horizontal___TYyqc",show:"Tally__show___EesAt",logo:"Tally__logo___k79zv",logoSmall:"Tally__logoSmall___JZuyy",small:"Tally__small___lrym1",forceCollapse:"Tally__forceCollapse___4k5aa"}},function(e,t,n){e.exports={tally:"HideableTally__tally___TXiqB",hideContainer:"HideableTally__hideContainer___w5Wlj",logoSingleLetter:"HideableTally__logoSingleLetter___OwmJA",logoContainer:"HideableTally__logoContainer___kXnxF",openingArrow:"HideableTally__openingArrow___yBpbp",closingArrow:"HideableTally__closingArrow___pKIyO"}},function(e,t,n){const r=n(10),o=n(11),a=n(12),i=n(13);function l(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?o(e):e}function s(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=s(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function d(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!o&&u(n,e).includes(e.arrayFormatSeparator);n=a?u(n,e):n;const i=o||a?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const o of e.split("&")){if(""===o)continue;let[e,i]=a(t.decode?o.replace(/\+/g," "):o,"=");i=void 0===i?null:["comma","separator"].includes(t.arrayFormat)?i:u(i,t),n(u(e,t),i,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=d(n[e],t);else r[e]=d(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort(((e,t)=>Number(e)-Number(t))).map((e=>t[e])):t}(n):e[t]=n,e}),Object.create(null))}t.extract=f,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[c(t,e),"[",o,"]"].join("")]:[...n,[c(t,e),"[",c(o,e),"]=",c(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[c(t,e),"[]"].join("")]:[...n,[c(t,e),"[]=",c(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[c(t,e),"=",c(r,e)].join("")]:[[n,c(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,c(t,e)]:[...n,[c(t,e),"=",c(r,e)].join("")]}}(t),o={};for(const t of Object.keys(e))n(t)||(o[t]=e[t]);const a=Object.keys(o);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const o=e[n];return void 0===o?"":null===o?c(n,t):Array.isArray(o)?o.reduce(r(n),[]).join("&"):c(n,t)+"="+c(o,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=a(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(f(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=s(e.url).split("?")[0]||"",o=t.extract(e.url),a=t.parse(o,{sort:!1}),i=Object.assign(a,e.query);let l=t.stringify(i,n);l&&(l="?"+l);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#"+c(e.fragmentIdentifier,n)),`${r}${l}${u}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:o,query:a,fragmentIdentifier:l}=t.parseUrl(e,r);return t.stringifyUrl({url:o,query:i(a,n),fragmentIdentifier:l},r)},t.exclude=(e,n,r)=>{const o=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,o,r)}},function(e,t,n){e.exports={icon:"Icon__icon___rkFdu",unclassified:"Icon__unclassified___KG7dh",contrasting:"Icon__contrasting___XemUp",mentioning:"Icon__mentioning___eZSXr",supporting:"Icon__supporting___6A01H",retractions:"Icon__retractions___+fJ+N",notices:"Icon__notices___DbL2K",publications:"Icon__publications___3dd2q",smallIcon:"Icon__smallIcon___3rDRZ",openingArrow:"Icon__openingArrow___pSL8O",closingCaret:"Icon__closingCaret___EMT7i"}},function(e,t,n){e.exports={sectionIcon:"SectionIcon__sectionIcon___nqPTw",introduction:"SectionIcon__introduction___uhUFG",methods:"SectionIcon__methods___RVooU",results:"SectionIcon__results___1k9LI",discussion:"SectionIcon__discussion___Qeyb0",other:"SectionIcon__other___uF+vV",smallSectionIcon:"SectionIcon__smallSectionIcon___nCjHN"}},function(e,t,n){n.r(t),n.d(t,"HideableTally",(function(){return O})),n.d(t,"Tally",(function(){return w})),n.d(t,"Count",(function(){return m})),n.d(t,"TallyLoader",(function(){return $})),n.d(t,"SectionTally",(function(){return he})),n.d(t,"SectionTallyCount",(function(){return te}));var r=n(0),o=n.n(r),a=n(6),i=n.n(a),l=n(1),c=n.n(l),u=n(7),s=n.n(u),f=({type:e,small:t=!1})=>o.a.createElement("i",{className:c()(s.a.icon,s.a[e],{[s.a.smallIcon]:t})}),d=n(2),p=n.n(d),m=({className:e,horizontal:t,type:n,count:r,showLabels:a=!1,small:i=!1})=>o.a.createElement("div",{className:c()(p.a.count,e,{[p.a.horizontal]:t,[p.a.small]:i})},a&&o.a.createElement("span",{className:c()(p.a.label,{[p.a.smallLabel]:i})},n),o.a.createElement("div",{className:c()(p.a.iconCountWrapper,{[p.a.expandedIconCount]:!a})},o.a.createElement(f,{type:n,small:!0}),o.a.createElement("span",{className:c()(p.a.number,{[p.a.smallNumber]:i})},r))),h=n(4),y=n.n(h);const v=["retract","withdraw","remove"],g=e=>{for(const t of v)if(e&&e.toLowerCase().includes(t))return!1;return!0},b=e=>{for(const t of v)if(e&&e.toLowerCase().includes(t))return!0;return!1};var w=({source:e,campaign:t,autologin:n,rewardfulID:r,tally:a,forceCollapse:l,showLabels:u,notices:s,small:f=!1,horizontal:d=!1,isBadge:p=!1,showZero:h=!0,showLogo:v=!0})=>{const w={utm_medium:p?"badge":"plugin",utm_source:e||"generic",utm_campaign:t||p?"badge":"plugin"};n&&(w.autologin=n),r&&(w.via=r);const E=i.a.stringify(w),S={tally:c()("scite-tally",y.a.tally,{[y.a.horizontal]:d,[y.a.small]:f&&d,[y.a.show]:h?a:a&&(a.total>0||a.citingPublications>0),[y.a.forceCollapse]:l&&0===a.total&&0===a.citingPublications,[y.a.badgeTally]:p})},O=a&&a.citingPublications&&a.citingPublications.toLocaleString()||0,k=a&&a.supporting&&a.supporting.toLocaleString()||0,R=a&&a.contradicting&&a.contradicting.toLocaleString()||0,x=a&&a.mentioning&&a.mentioning.toLocaleString()||0,T=s&&s.length>0&&s.filter(b)||[],_=s&&s.length>0&&s.filter(g)||[],C=T.length.toLocaleString()||0,j=_.length.toLocaleString()||0;return o.a.createElement("div",{className:S.tally,onClick:()=>{window.open(`https://scite.ai/reports/${a&&a.doi}?${E}`)}},!d&&v&&o.a.createElement("img",{className:c()(y.a.logo,{[y.a.logoSmall]:f}),src:"https://cdn.scite.ai/assets/images/logo.svg"}),o.a.createElement(m,{type:"publications",count:O,horizontal:d,showLabels:u,small:f}),o.a.createElement(m,{type:"supporting",count:k,horizontal:d,showLabels:u,small:f}),o.a.createElement(m,{type:"mentioning",count:x,horizontal:d,showLabels:u,small:f}),o.a.createElement(m,{type:"contrasting",count:R,horizontal:d,showLabels:u,small:f}),C>0&&o.a.createElement(m,{type:"retractions",count:C,horizontal:d,showLabels:u,small:f}),j>0&&o.a.createElement(m,{type:"notices",count:j,horizontal:d,showLabels:u,small:f}))},E=n(5),S=n.n(E),O=({children:e,hide:t=!1,clickFn:n=(()=>{})})=>{const[a,i]=Object(r.useState)(!t),l=()=>{i(!a),n()};return o.a.createElement("div",{className:S.a.tally},a?o.a.createElement(o.a.Fragment,null,e,o.a.createElement("div",{className:S.a.hideContainer,onClick:l},o.a.createElement("div",{className:S.a.openingArrow},o.a.createElement(f,{type:"openingArrow"})),o.a.createElement("div",null,"hide"))):o.a.createElement("div",{className:S.a.logoContainer,onClick:l},o.a.createElement("div",{className:S.a.closingArrow},o.a.createElement(f,{type:"closingCaret"})),o.a.createElement("img",{className:S.a.logoSingleLetter,src:"https://cdn.scite.ai/assets/images/scite_single_letter.svg"})))},k="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==k&&k,R="URLSearchParams"in k,x="Symbol"in k&&"iterator"in Symbol,T="FileReader"in k&&"Blob"in k&&function(){try{return new Blob,!0}catch(e){return!1}}(),_="FormData"in k,C="ArrayBuffer"in k;if(C)var j=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],A=ArrayBuffer.isView||function(e){return e&&j.indexOf(Object.prototype.toString.call(e))>-1};function P(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function I(e){return"string"!=typeof e&&(e=String(e)),e}function L(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return x&&(t[Symbol.iterator]=function(){return t}),t}function N(e){this.map={},e instanceof N?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function D(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function M(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function z(e){var t=new FileReader,n=M(t);return t.readAsArrayBuffer(e),n}function F(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function U(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:T&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:_&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:R&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():C&&T&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=F(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):C&&(ArrayBuffer.prototype.isPrototypeOf(e)||A(e))?this._bodyArrayBuffer=F(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):R&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},T&&(this.blob=function(){var e=D(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?D(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(z)}),this.text=function(){var e,t,n,r=D(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=M(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}N.prototype.append=function(e,t){e=P(e),t=I(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},N.prototype.delete=function(e){delete this.map[P(e)]},N.prototype.get=function(e){return e=P(e),this.has(e)?this.map[e]:null},N.prototype.has=function(e){return this.map.hasOwnProperty(P(e))},N.prototype.set=function(e,t){this.map[P(e)]=I(t)},N.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},N.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),L(e)},N.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),L(e)},N.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),L(e)},x&&(N.prototype[Symbol.iterator]=N.prototype.entries);var B=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function q(e,t){if(!(this instanceof q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof q){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new N(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new N(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),B.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function X(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function G(e,t){if(!(this instanceof G))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new N(t.headers),this.url=t.url||"",this._initBody(e)}q.prototype.clone=function(){return new q(this,{body:this._bodyInit})},U.call(q.prototype),U.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new N(this.headers),url:this.url})},G.error=function(){var e=new G(null,{status:0,statusText:""});return e.type="error",e};var K=[301,302,303,307,308];G.redirect=function(e,t){if(-1===K.indexOf(t))throw new RangeError("Invalid status code");return new G(null,{status:t,headers:{location:e}})};var H=k.DOMException;try{new H}catch(e){(H=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),H.prototype.constructor=H}function V(e,t){return new Promise((function(n,r){var o=new q(e,t);if(o.signal&&o.signal.aborted)return r(new H("Aborted","AbortError"));var a=new XMLHttpRequest;function i(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new N,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){n(new G(o,r))}),0)},a.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){r(new H("Aborted","AbortError"))}),0)},a.open(o.method,function(e){try{return""===e&&k.location.href?k.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&(T?a.responseType="blob":C&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof N?o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,I(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",i),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",i)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}V.polyfill=!0,k.fetch||(k.fetch=V,k.Headers=N,k.Request=q,k.Response=G);const{fetch:Q}=window,W=["retracted","has expression of concern","withdrawn","has erratum","has correction"];var $=({doi:e,children:t})=>{const[n,o]=Object(r.useState)(null),[a,i]=Object(r.useState)(null),[l,c]=Object(r.useState)(null);return Object(r.useEffect)((()=>{!function e({doi:t,setTally:n,setError:r,retry:o=0,maxRetries:a=8}={}){const i=new Error("Failed to get Tally");Q("https://api.scite.ai/tallies/"+t).then((e=>{if(404===e.status)return n({doi:t,total:0,citingPublications:0}),{};if(!e.ok)throw i;return e.json()})).then((e=>{"number"==typeof e.total&&n(e)})).catch((l=>{if(l===i&&o<a)return setTimeout((()=>e({retry:++o,doi:t,setTally:n,setError:r,maxRetries:a})),1200);r(l)}))}({doi:e,setTally:o,setError:c}),function e({doi:t,setNotices:n,setError:r,retry:o=0,maxRetries:a=8}={}){const i=new Error("Failed to get notices");Q("https://api.scite.ai/papers/"+t).then((e=>{if(404===e.status)return n([]),{};if(!e.ok)throw i;return e.json()})).then((({editorialNotices:e})=>{const t=[...new Set(e.filter((({status:e})=>W.includes(e.toLowerCase()))).map((({status:e})=>e)))];n(t)})).catch((l=>{if(l===i&&o<a)return setTimeout((()=>e({retry:++o,doi:t,maxRetries:a,setError:r,setNotices:n})),1200);r(l)}))}({doi:e,setNotices:i,setError:c})}),[e]),t({tally:n,notices:a,error:l})},Y=n(8),Z=n.n(Y),J=({type:e,small:t=!1})=>o.a.createElement("i",{className:c()(Z.a.sectionIcon,Z.a[e],{[Z.a.smallSectionIcon]:t})});const ee={PIE:"pie",BAR:"bar",DONUT:"donut"};var te=({className:e,horizontal:t,type:n,count:r,showLabels:a=!1,small:i=!1})=>o.a.createElement("div",{className:c()(p.a.count,e,{[p.a.horizontal]:t,[p.a.small]:i})},o.a.createElement("div",{className:c()(p.a.sectionTallyIconCountWrapper,{[p.a.expandedIconCount]:!a})},o.a.createElement(J,{type:n,small:!0}),a&&o.a.createElement("span",{className:c()(p.a.label,{[p.a.smallLabel]:i})},(e=>"introduction"===e?"Intro":e)(n)),o.a.createElement("span",{className:c()(p.a.number,{[p.a.smallNumber]:i})},r))),ne=n(3),re=n.n(ne);const oe=({col:e,barWidth:t,chartHeight:n,largestValue:r})=>{const a=(({height:e,chartHeight:t,largestValue:n})=>e/n*t)({height:e.value,chartHeight:n,largestValue:r});return o.a.createElement("g",{transform:`translate(0, ${n-a})`},o.a.createElement("rect",{width:t-2,height:a,fill:e.color}))};var ae=({chartWidth:e,chartHeight:t,data:n})=>{const r=Math.max.apply(Math,n.map((e=>e.value))),a=n.map(((e,n)=>o.a.createElement("g",{key:"bar_"+n,transform:`translate(${30*n},0)`},o.a.createElement(oe,{col:e,barWidth:30,chartHeight:t,largestValue:r})))),i=(e-30*n.length)/2;return o.a.createElement("svg",{width:e,height:t,style:{marginRight:"25px"}},o.a.createElement("g",null,o.a.createElement("g",{transform:`translate(${i}, 0)`},a)))};const ie=({value:e,total:t})=>e/t,le=e=>[Math.cos(2*Math.PI*e),Math.sin(2*Math.PI*e)];var ce=({chartWidth:e,chartHeight:t,data:n})=>{const r=n.reduce(((e,{value:t})=>e+t),0),a=(e=>{let t=0;const n=[];return e.forEach((e=>{const[r,a]=le(t);t+=e.percent;const[i,l]=le(t),c=[`M ${r} ${a}`,`A 1 1 0 ${e.percent>.5?1:0} 1 ${i} ${l}`,"L 0 0"].join(" ");n.push(o.a.createElement("path",{d:c,fill:e.color}))})),n})((({data:e,total:t})=>e.map((e=>({color:e.color,percent:ie({value:e.value,total:t})}))))({data:n,total:r}));return o.a.createElement("svg",{width:e,height:t,viewBox:"-1 -1 2 2",style:{marginRight:"25px"}},a)};function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const se=e=>e/(Math.PI/180),fe=(e,t)=>e/t,de=(e,t,n)=>{const r=e*(Math.PI/180);return[n-Math.cos(r)*t,n-Math.sin(r)*t]},pe=({chartConfig:e,paths:t,subtotal:n},{percent:r,color:a},i)=>{const l=360*n+90,c=l+360*r,u=r>=e.minimumValue,s=u?e.gapAngleOffsetInner:0,f=u?e.gapAngleOffsetOuter:0,d=l+s,p=l+f,m=c-s,h=c-f,[y,v]=de(d,e.radiusInner,e.center),[g,b]=de(p,e.radiusOuter,e.center),[w,E]=de(h,e.radiusOuter,e.center),[S,O]=de(m,e.radiusInner,e.center),k=r>.5?1:0,R=[`M${y} ${v}`,`L${g} ${b}`,`A${e.radiusOuter} ${e.radiusOuter} 0 ${k} 1 ${w} ${E}`,`L${S} ${O}`,`A${e.radiusInner} ${e.radiusInner} 0 ${k} 0 ${y} ${v}`],x=a?{fill:a}:{};return t.push(o.a.createElement("path",ue({key:i},x,{stroke:"none",d:R.join(" ")}))),{chartConfig:e,paths:t,subtotal:n+r}};var me=({data:e,size:t})=>{const n=(({data:e})=>{const t=(e||[]).filter((({value:e})=>e>0)),n=t.reduce(((e,{value:t=0})=>e+t),0);return t.map((e=>({...e,percent:e.value/n})))})({data:e});if(!(n||[]).length)return null;const r=(({size:e})=>{const t=e/2,n=(e-75)/2,r=e/2,o=r-n,a=se(fe(1,o)),i=se(fe(1,r)),l=se(fe(2,o));return{center:t,innerHoleDiameter:75,thickness:n,radiusOuter:r,radiusInner:o,gapSize:1,gapAngleOffsetInner:a,gapAngleOffsetOuter:i,minimumAngleDeg:l,minimumValue:l/360}})({size:t}),a=n.reduce(pe,{chartConfig:r,paths:[],subtotal:0}).paths;return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("svg",{width:t,height:t,style:{marginRight:"25px"}},a)))},he=({source:e,campaign:t,autologin:n,rewardfulID:r,tally:a,forceCollapse:l,showLabels:u,small:s=!1,horizontal:f=!1,isBadge:d=!1,showZero:p=!0,chartType:m=null,showLogo:h=!0})=>{const y={utm_medium:d?"badge":"plugin",utm_source:e||"generic",utm_campaign:t||d?"badge":"plugin"};n&&(y.autologin=n),r&&(y.via=r);const v=i.a.stringify(y),g={sectionTallyContainer:c()("scite-section-tally",re.a.sectionTallyWidget),sectionTally:c()(re.a.tally,{[re.a.horizontal]:f,[re.a.small]:s&&f,[re.a.show]:p?a:a&&a.total>0,[re.a.forceCollapse]:l&&0===a.total,[re.a.badgeTally]:d})},b=a&&a.introduction&&a.introduction.toLocaleString()||0,w=a&&a.methods&&a.methods.toLocaleString()||0,E=a&&a.results&&a.results.toLocaleString()||0,S=a&&a.discussion&&a.discussion.toLocaleString()||0,O=a&&a.other&&a.other.toLocaleString()||0,k=`https://scite.ai/reports/${a&&a.doi}?${v}`,R=((e={})=>[{name:"Intro",color:"#002AB2",value:e.introduction||0},{name:"Methods",color:"#0036E5",value:e.methods||0},{name:"Results",color:"#0062FF",value:e.results||0},{name:"Discussion",color:"#66A3FF",value:e.discussion||0},{name:"Other",color:"#9EC4F0",value:e.other||0}])(a),x=Object.values(ee).includes(m);return m&&!x&&console.warn(`Received unexpected chartType: ${m}. Must be 'pie', 'bar', 'donut', or null.`),o.a.createElement("div",{className:g.sectionTallyContainer},!f&&h&&o.a.createElement("img",{className:c()(re.a.logo,{[re.a.logoSmall]:s}),src:"https://cdn.scite.ai/assets/images/logo.svg"}),o.a.createElement("div",{onClick:()=>{window.open(k)},className:re.a.sectionTallyWrapper},"bar"===m&&o.a.createElement(ae,{chartWidth:140,chartHeight:130,data:R}),"pie"===m&&o.a.createElement(ce,{chartWidth:140,chartHeight:140,data:R}),"donut"===m&&o.a.createElement(me,{data:R,size:140}),o.a.createElement("div",{className:g.sectionTally},o.a.createElement(te,{type:"introduction",count:b,horizontal:f,showLabels:u,small:s}),o.a.createElement(te,{type:"methods",count:w,horizontal:f,showLabels:u,small:s}),o.a.createElement(te,{type:"results",count:E,horizontal:f,showLabels:u,small:s}),o.a.createElement(te,{type:"discussion",count:S,horizontal:f,showLabels:u,small:s}),o.a.createElement(te,{type:"other",count:O,horizontal:f,showLabels:u,small:s}))),x&&o.a.createElement("div",{className:re.a.chartSubheading},o.a.createElement("span",{className:re.a.chartLabel},"Sections"),o.a.createElement("a",{href:k,target:"_blank",rel:"noopener noreferrer"},"See more details")))}},function(e,t,n){e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))},function(e,t,n){var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function a(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function i(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=a(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="";for(var a=Object.keys(t),l=0;l<a.length;l++){var c=a[l];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,n){e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){e.exports=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),a=0;a<r.length;a++){var i=r[a],l=e[i];(o?-1!==t.indexOf(i):t(i,l,e))&&(n[i]=l)}return n}}]))},379:(e,t,n)=>{var r,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function i(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],o=0;o<e.length;o++){var l=e[o],c=t.base?l[0]+t.base:l[0],u=n[c]||0,s="".concat(c," ").concat(u);n[c]=u+1;var f=i(s),d={css:l[1],media:l[2],sourceMap:l[3]};-1!==f?(a[f].references++,a[f].updater(d)):a.push({identifier:s,updater:h(d,t),references:1}),r.push(s)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,s=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=s(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function d(e,t,n){var r=n.css,o=n.media,a=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function h(e,t){var n,r,o;if(t.singleton){var a=m++;n=p||(p=c(t)),r=f.bind(null,n,a,!1),o=f.bind(null,n,a,!0)}else n=c(t),r=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=i(n[r]);a[o].references--}for(var c=l(e,t),u=0;u<n.length;u++){var s=i(n[u]);0===a[s].references&&(a[s].updater(),a.splice(s,1))}n=c}}}},473:e=>{e.exports=function(){}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{getConfig:()=>St,insertBadge:()=>Rt,insertBadgeWrapper:()=>xt,insertBadges:()=>Tt,main:()=>Ct});var e=n(666),t=n.n(e),o=n(294),a=n(935),i=n(285);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f,d=window.fetch,p=["retracted","has expression of concern","withdrawn","has erratum","has correction"],m=(f=u(t().mark((function e(n){var r,o,a,i,l,c=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:0,o=c.length>2&&void 0!==c[2]?c[2]:8,n&&0!==n.length){e.next=3;break}return e.abrupt("return",{tallies:{}});case 3:return a=new Error("Failed to get Tallies"),e.prev=4,e.next=7,d("https://api.scite.ai/tallies",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if(404!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",{tallies:{}});case 10:if(i.ok){e.next=12;break}throw a;case 12:return e.next=14,i.json();case 14:return l=e.sent,e.abrupt("return",l||{});case 18:if(e.prev=18,e.t0=e.catch(4),!(e.t0===a&&r<o)){e.next=26;break}return e.next=23,new Promise((function(e){return setTimeout((function(){return e(m(n,++r))}),600)}));case 23:return e.abrupt("return",e.sent);case 26:console.error(a);case 27:return e.abrupt("return",{tallies:{}});case 28:case"end":return e.stop()}}),e,null,[[4,18]])}))),function(e){return f.apply(this,arguments)}),h=function(){var e=u(t().mark((function e(n){var r,o,a,i,l,c,u,f=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:0,o=f.length>2&&void 0!==f[2]?f[2]:8,n&&0!==n.length){e.next=3;break}return e.abrupt("return",{notices:{}});case 3:return a=new Error("Failed to get notices"),e.prev=4,e.next=7,d("https://api.scite.ai/papers",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if(404!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",{notices:{}});case 10:if(i.ok){e.next=12;break}throw a;case 12:return e.next=14,i.json();case 14:l=e.sent,c={},e.t0=regeneratorRuntime.keys(l.papers);case 17:if((e.t1=e.t0()).done){e.next=25;break}if(u=e.t1.value,l.papers[u].editorialNotices){e.next=22;break}return c[u]=[],e.abrupt("continue",17);case 22:c[u]=s(new Set(l.papers[u].editorialNotices.filter((function(e){var t=e.status;return p.includes(t.toLowerCase())})).map((function(e){return e.status})))),e.next=17;break;case 25:return e.abrupt("return",{notices:c});case 28:if(e.prev=28,e.t2=e.catch(4),!(e.t2===a&&r<o)){e.next=36;break}return e.next=33,new Promise((function(e){return setTimeout((function(){return e(h(n,++r))}),600)}));case 33:return e.abrupt("return",e.sent);case 36:console.error(a);case 37:case"end":return e.stop()}}),e,null,[[4,28]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=u(t().mark((function e(n){var r,o,a,i,l,c=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:0,o=c.length>2&&void 0!==c[2]?c[2]:8,n&&0!==n.length){e.next=3;break}return e.abrupt("return",{tallies:{}});case 3:return a=new Error("Failed to get Section Tallies"),e.prev=4,e.next=7,d("https://api.scite.ai/tallies/cited-by-sections",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if(404!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",{tallies:{}});case 10:if(i.ok){e.next=12;break}throw a;case 12:return e.next=14,i.json();case 14:return l=e.sent,e.abrupt("return",l||{});case 18:if(e.prev=18,e.t0=e.catch(4),!(e.t0===a&&r<o)){e.next=26;break}return e.next=23,new Promise((function(e){return setTimeout((function(){return e(y(n,++r))}),600)}));case 23:return e.abrupt("return",e.sent);case 26:console.error(a);case 27:return e.abrupt("return",{tallies:{}});case 28:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),v=n(184),g=n.n(v),b=o.createContext(),w=o.createContext();function E(e){var t=e.children,n=o.useState(null),r=n[0],a=n[1],i=o.useRef(!1);o.useEffect((function(){return function(){i.current=!0}}),[]);var l=o.useCallback((function(e){i.current||a(e)}),[]);return o.createElement(b.Provider,{value:r},o.createElement(w.Provider,{value:l},t))}var S=function(e){return Array.isArray(e)?e[0]:e},O=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},k=function(e,t){if("function"==typeof e)return O(e,t);null!=e&&(e.current=t)},R=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},x="undefined"!=typeof window&&window.document&&window.document.createElement?o.useLayoutEffect:o.useEffect;function T(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function _(e){return e instanceof T(e).Element||e instanceof Element}function C(e){return e instanceof T(e).HTMLElement||e instanceof HTMLElement}function j(e){return"undefined"!=typeof ShadowRoot&&(e instanceof T(e).ShadowRoot||e instanceof ShadowRoot)}var A=Math.max,P=Math.min,I=Math.round;function L(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,o=1;if(C(e)&&t){var a=e.offsetHeight,i=e.offsetWidth;i>0&&(r=I(n.width)/i||1),a>0&&(o=I(n.height)/a||1)}return{width:n.width/r,height:n.height/o,top:n.top/o,right:n.right/r,bottom:n.bottom/o,left:n.left/r,x:n.left/r,y:n.top/o}}function N(e){var t=T(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function D(e){return e?(e.nodeName||"").toLowerCase():null}function M(e){return((_(e)?e.ownerDocument:e.document)||window.document).documentElement}function z(e){return L(M(e)).left+N(e).scrollLeft}function F(e){return T(e).getComputedStyle(e)}function U(e){var t=F(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function B(e,t,n){void 0===n&&(n=!1);var r,o,a=C(t),i=C(t)&&function(e){var t=e.getBoundingClientRect(),n=I(t.width)/e.offsetWidth||1,r=I(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),l=M(t),c=L(e,i),u={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(a||!a&&!n)&&(("body"!==D(t)||U(l))&&(u=(r=t)!==T(r)&&C(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:N(r)),C(t)?((s=L(t,!0)).x+=t.clientLeft,s.y+=t.clientTop):l&&(s.x=z(l))),{x:c.left+u.scrollLeft-s.x,y:c.top+u.scrollTop-s.y,width:c.width,height:c.height}}function q(e){var t=L(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function X(e){return"html"===D(e)?e:e.assignedSlot||e.parentNode||(j(e)?e.host:null)||M(e)}function G(e){return["html","body","#document"].indexOf(D(e))>=0?e.ownerDocument.body:C(e)&&U(e)?e:G(X(e))}function K(e,t){var n;void 0===t&&(t=[]);var r=G(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),a=T(r),i=o?[a].concat(a.visualViewport||[],U(r)?r:[]):r,l=t.concat(i);return o?l:l.concat(K(X(i)))}function H(e){return["table","td","th"].indexOf(D(e))>=0}function V(e){return C(e)&&"fixed"!==F(e).position?e.offsetParent:null}function Q(e){for(var t=T(e),n=V(e);n&&H(n)&&"static"===F(n).position;)n=V(n);return n&&("html"===D(n)||"body"===D(n)&&"static"===F(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&C(e)&&"fixed"===F(e).position)return null;var n=X(e);for(j(n)&&(n=n.host);C(n)&&["html","body"].indexOf(D(n))<0;){var r=F(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var W="top",$="bottom",Y="right",Z="left",J="auto",ee=[W,$,Y,Z],te="start",ne="end",re="viewport",oe="popper",ae=ee.reduce((function(e,t){return e.concat([t+"-"+te,t+"-"+ne])}),[]),ie=[].concat(ee,[J]).reduce((function(e,t){return e.concat([t,t+"-"+te,t+"-"+ne])}),[]),le=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ce(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}var ue={placement:"bottom",modifiers:[],strategy:"absolute"};function se(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}var fe={passive:!0};const de={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,a=void 0===o||o,i=r.resize,l=void 0===i||i,c=T(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach((function(e){e.addEventListener("scroll",n.update,fe)})),l&&c.addEventListener("resize",n.update,fe),function(){a&&u.forEach((function(e){e.removeEventListener("scroll",n.update,fe)})),l&&c.removeEventListener("resize",n.update,fe)}},data:{}};function pe(e){return e.split("-")[0]}function me(e){return e.split("-")[1]}function he(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ye(e){var t,n=e.reference,r=e.element,o=e.placement,a=o?pe(o):null,i=o?me(o):null,l=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(a){case W:t={x:l,y:n.y-r.height};break;case $:t={x:l,y:n.y+n.height};break;case Y:t={x:n.x+n.width,y:c};break;case Z:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=a?he(a):null;if(null!=u){var s="y"===u?"height":"width";switch(i){case te:t[u]=t[u]-(n[s]/2-r[s]/2);break;case ne:t[u]=t[u]+(n[s]/2-r[s]/2)}}return t}const ve={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ye({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var ge={top:"auto",right:"auto",bottom:"auto",left:"auto"};function be(e){var t,n=e.popper,r=e.popperRect,o=e.placement,a=e.variation,i=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,s=e.roundOffsets,f=e.isFixed,d=i.x,p=void 0===d?0:d,m=i.y,h=void 0===m?0:m,y="function"==typeof s?s({x:p,y:h}):{x:p,y:h};p=y.x,h=y.y;var v=i.hasOwnProperty("x"),g=i.hasOwnProperty("y"),b=Z,w=W,E=window;if(u){var S=Q(n),O="clientHeight",k="clientWidth";S===T(n)&&"static"!==F(S=M(n)).position&&"absolute"===l&&(O="scrollHeight",k="scrollWidth"),(o===W||(o===Z||o===Y)&&a===ne)&&(w=$,h-=(f&&S===E&&E.visualViewport?E.visualViewport.height:S[O])-r.height,h*=c?1:-1),o!==Z&&(o!==W&&o!==$||a!==ne)||(b=Y,p-=(f&&S===E&&E.visualViewport?E.visualViewport.width:S[k])-r.width,p*=c?1:-1)}var R,x=Object.assign({position:l},u&&ge),_=!0===s?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:I(t*r)/r||0,y:I(n*r)/r||0}}({x:p,y:h}):{x:p,y:h};return p=_.x,h=_.y,c?Object.assign({},x,((R={})[w]=g?"0":"",R[b]=v?"0":"",R.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+h+"px)":"translate3d("+p+"px, "+h+"px, 0)",R)):Object.assign({},x,((t={})[w]=g?h+"px":"",t[b]=v?p+"px":"",t.transform="",t))}const we={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,a=n.adaptive,i=void 0===a||a,l=n.roundOffsets,c=void 0===l||l,u={placement:pe(t.placement),variation:me(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,be(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,be(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Ee={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];C(o)&&D(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});C(r)&&D(r)&&(Object.assign(r.style,a),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},Se={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,a=void 0===o?[0,0]:o,i=ie.reduce((function(e,n){return e[n]=function(e,t,n){var r=pe(e),o=[Z,W].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=a[0],l=a[1];return i=i||0,l=(l||0)*o,[Z,Y].indexOf(r)>=0?{x:l,y:i}:{x:i,y:l}}(n,t.rects,a),e}),{}),l=i[t.placement],c=l.x,u=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=i}};var Oe={left:"right",right:"left",bottom:"top",top:"bottom"};function ke(e){return e.replace(/left|right|bottom|top/g,(function(e){return Oe[e]}))}var Re={start:"end",end:"start"};function xe(e){return e.replace(/start|end/g,(function(e){return Re[e]}))}function Te(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&j(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _e(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ce(e,t){return t===re?_e(function(e){var t=T(e),n=M(e),r=t.visualViewport,o=n.clientWidth,a=n.clientHeight,i=0,l=0;return r&&(o=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=r.offsetLeft,l=r.offsetTop)),{width:o,height:a,x:i+z(e),y:l}}(e)):_(t)?function(e){var t=L(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):_e(function(e){var t,n=M(e),r=N(e),o=null==(t=e.ownerDocument)?void 0:t.body,a=A(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=A(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-r.scrollLeft+z(e),c=-r.scrollTop;return"rtl"===F(o||n).direction&&(l+=A(n.clientWidth,o?o.clientWidth:0)-a),{width:a,height:i,x:l,y:c}}(M(e)))}function je(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ae(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Pe(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,a=n.boundary,i=void 0===a?"clippingParents":a,l=n.rootBoundary,c=void 0===l?re:l,u=n.elementContext,s=void 0===u?oe:u,f=n.altBoundary,d=void 0!==f&&f,p=n.padding,m=void 0===p?0:p,h=je("number"!=typeof m?m:Ae(m,ee)),y=s===oe?"reference":oe,v=e.rects.popper,g=e.elements[d?y:s],b=function(e,t,n){var r="clippingParents"===t?function(e){var t=K(X(e)),n=["absolute","fixed"].indexOf(F(e).position)>=0&&C(e)?Q(e):e;return _(n)?t.filter((function(e){return _(e)&&Te(e,n)&&"body"!==D(e)})):[]}(e):[].concat(t),o=[].concat(r,[n]),a=o[0],i=o.reduce((function(t,n){var r=Ce(e,n);return t.top=A(r.top,t.top),t.right=P(r.right,t.right),t.bottom=P(r.bottom,t.bottom),t.left=A(r.left,t.left),t}),Ce(e,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}(_(g)?g:g.contextElement||M(e.elements.popper),i,c),w=L(e.elements.reference),E=ye({reference:w,element:v,strategy:"absolute",placement:o}),S=_e(Object.assign({},v,E)),O=s===oe?S:w,k={top:b.top-O.top+h.top,bottom:O.bottom-b.bottom+h.bottom,left:b.left-O.left+h.left,right:O.right-b.right+h.right},R=e.modifiersData.offset;if(s===oe&&R){var x=R[o];Object.keys(k).forEach((function(e){var t=[Y,$].indexOf(e)>=0?1:-1,n=[W,$].indexOf(e)>=0?"y":"x";k[e]+=x[n]*t}))}return k}const Ie={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,a=void 0===o||o,i=n.altAxis,l=void 0===i||i,c=n.fallbackPlacements,u=n.padding,s=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,m=void 0===p||p,h=n.allowedAutoPlacements,y=t.options.placement,v=pe(y),g=c||(v!==y&&m?function(e){if(pe(e)===J)return[];var t=ke(e);return[xe(e),t,xe(t)]}(y):[ke(y)]),b=[y].concat(g).reduce((function(e,n){return e.concat(pe(n)===J?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,a=n.rootBoundary,i=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?ie:c,s=me(r),f=s?l?ae:ae.filter((function(e){return me(e)===s})):ee,d=f.filter((function(e){return u.indexOf(e)>=0}));0===d.length&&(d=f);var p=d.reduce((function(t,n){return t[n]=Pe(e,{placement:n,boundary:o,rootBoundary:a,padding:i})[pe(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:s,rootBoundary:f,padding:u,flipVariations:m,allowedAutoPlacements:h}):n)}),[]),w=t.rects.reference,E=t.rects.popper,S=new Map,O=!0,k=b[0],R=0;R<b.length;R++){var x=b[R],T=pe(x),_=me(x)===te,C=[W,$].indexOf(T)>=0,j=C?"width":"height",A=Pe(t,{placement:x,boundary:s,rootBoundary:f,altBoundary:d,padding:u}),P=C?_?Y:Z:_?$:W;w[j]>E[j]&&(P=ke(P));var I=ke(P),L=[];if(a&&L.push(A[T]<=0),l&&L.push(A[P]<=0,A[I]<=0),L.every((function(e){return e}))){k=x,O=!1;break}S.set(x,L)}if(O)for(var N=function(e){var t=b.find((function(t){var n=S.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},D=m?3:1;D>0&&"break"!==N(D);D--);t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Le(e,t,n){return A(e,P(t,n))}const Ne={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,a=void 0===o||o,i=n.altAxis,l=void 0!==i&&i,c=n.boundary,u=n.rootBoundary,s=n.altBoundary,f=n.padding,d=n.tether,p=void 0===d||d,m=n.tetherOffset,h=void 0===m?0:m,y=Pe(t,{boundary:c,rootBoundary:u,padding:f,altBoundary:s}),v=pe(t.placement),g=me(t.placement),b=!g,w=he(v),E="x"===w?"y":"x",S=t.modifiersData.popperOffsets,O=t.rects.reference,k=t.rects.popper,R="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,x="number"==typeof R?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,_={x:0,y:0};if(S){if(a){var C,j="y"===w?W:Z,I="y"===w?$:Y,L="y"===w?"height":"width",N=S[w],D=N+y[j],M=N-y[I],z=p?-k[L]/2:0,F=g===te?O[L]:k[L],U=g===te?-k[L]:-O[L],B=t.elements.arrow,X=p&&B?q(B):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},K=G[j],H=G[I],V=Le(0,O[L],X[L]),J=b?O[L]/2-z-V-K-x.mainAxis:F-V-K-x.mainAxis,ee=b?-O[L]/2+z+V+H+x.mainAxis:U+V+H+x.mainAxis,ne=t.elements.arrow&&Q(t.elements.arrow),re=ne?"y"===w?ne.clientTop||0:ne.clientLeft||0:0,oe=null!=(C=null==T?void 0:T[w])?C:0,ae=N+ee-oe,ie=Le(p?P(D,N+J-oe-re):D,N,p?A(M,ae):M);S[w]=ie,_[w]=ie-N}if(l){var le,ce="x"===w?W:Z,ue="x"===w?$:Y,se=S[E],fe="y"===E?"height":"width",de=se+y[ce],ye=se-y[ue],ve=-1!==[W,Z].indexOf(v),ge=null!=(le=null==T?void 0:T[E])?le:0,be=ve?de:se-O[fe]-k[fe]-ge+x.altAxis,we=ve?se+O[fe]+k[fe]-ge-x.altAxis:ye,Ee=p&&ve?function(e,t,n){var r=Le(e,t,n);return r>n?n:r}(be,se,we):Le(p?be:de,se,p?we:ye);S[E]=Ee,_[E]=Ee-se}t.modifiersData[r]=_}},requiresIfExists:["offset"]},De={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=e.options,a=n.elements.arrow,i=n.modifiersData.popperOffsets,l=pe(n.placement),c=he(l),u=[Z,Y].indexOf(l)>=0?"height":"width";if(a&&i){var s=function(e,t){return je("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Ae(e,ee))}(o.padding,n),f=q(a),d="y"===c?W:Z,p="y"===c?$:Y,m=n.rects.reference[u]+n.rects.reference[c]-i[c]-n.rects.popper[u],h=i[c]-n.rects.reference[c],y=Q(a),v=y?"y"===c?y.clientHeight||0:y.clientWidth||0:0,g=m/2-h/2,b=s[d],w=v-f[u]-s[p],E=v/2-f[u]/2+g,S=Le(b,E,w),O=c;n.modifiersData[r]=((t={})[O]=S,t.centerOffset=S-E,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Te(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Me(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ze(e){return[W,Y,$,Z].some((function(t){return e[t]>=0}))}const Fe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,i=Pe(t,{elementContext:"reference"}),l=Pe(t,{altBoundary:!0}),c=Me(i,r),u=Me(l,o,a),s=ze(c),f=ze(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:s,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":s,"data-popper-escaped":f})}};var Ue=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,a=void 0===o?ue:o;return function(e,t,n){void 0===n&&(n=a);var o,i,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},ue,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],u=!1,s={state:l,setOptions:function(n){var o="function"==typeof n?n(l.options):n;f(),l.options=Object.assign({},a,l.options,o),l.scrollParents={reference:_(e)?K(e):e.contextElement?K(e.contextElement):[],popper:K(t)};var i,u,d=function(e){var t=ce(e);return le.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((i=[].concat(r,l.options.modifiers),u=i.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(u).map((function(e){return u[e]}))));return l.orderedModifiers=d.filter((function(e){return e.enabled})),l.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var a=o({state:l,name:t,instance:s,options:r});c.push(a||function(){})}})),s.update()},forceUpdate:function(){if(!u){var e=l.elements,t=e.reference,n=e.popper;if(se(t,n)){l.rects={reference:B(t,Q(n),"fixed"===l.options.strategy),popper:q(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach((function(e){return l.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<l.orderedModifiers.length;r++)if(!0!==l.reset){var o=l.orderedModifiers[r],a=o.fn,i=o.options,c=void 0===i?{}:i,f=o.name;"function"==typeof a&&(l=a({state:l,options:c,name:f,instance:s})||l)}else l.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(e){s.forceUpdate(),e(l)}))},function(){return i||(i=new Promise((function(e){Promise.resolve().then((function(){i=void 0,e(o())}))}))),i}),destroy:function(){f(),u=!0}};if(!se(e,t))return s;function f(){c.forEach((function(e){return e()})),c=[]}return s.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),s}}({defaultModifiers:[de,ve,we,Ee,Se,Ie,Ne,De,Fe]}),Be=n(590),qe=n.n(Be),Xe=[],Ge=function(){},Ke=function(){return Promise.resolve(null)},He=[];function Ve(e){var t=e.placement,n=void 0===t?"bottom":t,r=e.strategy,a=void 0===r?"absolute":r,i=e.modifiers,l=void 0===i?He:i,c=e.referenceElement,u=e.onFirstUpdate,s=e.innerRef,f=e.children,d=o.useContext(b),p=o.useState(null),m=p[0],h=p[1],y=o.useState(null),v=y[0],g=y[1];o.useEffect((function(){k(s,m)}),[s,m]);var w=o.useMemo((function(){return{placement:n,strategy:a,onFirstUpdate:u,modifiers:[].concat(l,[{name:"arrow",enabled:null!=v,options:{element:v}}])}}),[n,a,u,l,v]),E=function(e,t,n){void 0===n&&(n={});var r=o.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Xe},i=o.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=i[0],c=i[1],u=o.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);c({styles:R(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:R(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),s=o.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[u,{name:"applyStyles",enabled:!1}])};return qe()(r.current,e)?r.current||e:(r.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,u]),f=o.useRef();return x((function(){f.current&&f.current.setOptions(s)}),[s]),x((function(){if(null!=e&&null!=t){var r=(n.createPopper||Ue)(e,t,s);return f.current=r,function(){r.destroy(),f.current=null}}}),[e,t,n.createPopper]),{state:f.current?f.current.state:null,styles:l.styles,attributes:l.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}}(c||d,m,w),O=E.state,T=E.styles,_=E.forceUpdate,C=E.update,j=o.useMemo((function(){return{ref:h,style:T.popper,placement:O?O.placement:n,hasPopperEscaped:O&&O.modifiersData.hide?O.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:O&&O.modifiersData.hide?O.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:T.arrow,ref:g},forceUpdate:_||Ge,update:C||Ke}}),[h,g,n,O,T,C,_]);return S(f)(j)}var Qe=n(473),We=n.n(Qe);function $e(e){var t=e.children,n=e.innerRef,r=o.useContext(w),a=o.useCallback((function(e){k(n,e),O(r,e)}),[n,r]);return o.useEffect((function(){return function(){return k(n,null)}})),o.useEffect((function(){We()(Boolean(r),"`Reference` should not be used outside of a `Manager` component.")}),[r]),S(t)({ref:a})}var Ye=n(379),Ze=n.n(Ye),Je=n(717);Ze()(Je.Z,{insert:"head",singleton:!1});const et=Je.Z.locals||{};function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nt=function(e){var t=e.className,n=e.tally;return o.createElement("div",{className:g()(et.tally,t)},o.createElement("div",{className:et.tallyCounts},o.createElement(i.SectionTallyCount,{type:"introduction",count:n&&n.introduction&&n.introduction.toLocaleString()||0,showLabels:!0}),o.createElement(i.SectionTallyCount,{type:"methods",count:n&&n.methods&&n.methods.toLocaleString()||0,showLabels:!0}),o.createElement(i.SectionTallyCount,{type:"results",count:n&&n.results&&n.results.toLocaleString()||0,showLabels:!0}),o.createElement(i.SectionTallyCount,{type:"discussion",count:n&&n.discussion&&n.discussion.toLocaleString()||0,showLabels:!0}),o.createElement(i.SectionTallyCount,{type:"other",count:n&&n.other&&n.other.toLocaleString()||0,showLabels:!0})))},rt=function(e){var t=e.className,n=e.tally,r=e.notices;return o.createElement("div",{className:g()(et.tally,t)},r&&r.length>0&&o.createElement("div",{className:et.notices},r.map((function(e,t){return o.createElement("div",{key:"".concat(t,"-").concat(e),className:et.notice},o.createElement("div",{className:et.tallyCounts},"Retracted"===e||"Withdrawn"===e?o.createElement(i.Count,{type:"retractions"}):o.createElement(i.Count,{type:"notices"})),o.createElement("div",{className:et.noticeLabel},"Retracted"===e||"Withdrawn"===e?o.createElement("span",{className:g()(et.retractionsCopy,et[e])},"This paper has been ",e.toLowerCase()):o.createElement("span",{className:g()(et.noticeCopy,et[e])},"This paper ",e.toLowerCase())))}))),o.createElement("div",{className:et.tallyCounts},o.createElement(i.Count,{type:"publications",count:n&&n.citingPublications?n.citingPublications.toLocaleString():0,className:et.tallyCount}),o.createElement(i.Count,{type:"supporting",count:n&&n.supporting?n.supporting.toLocaleString():0,className:et.tallyCount}),o.createElement(i.Count,{type:"mentioning",count:n&&n.mentioning?n.mentioning.toLocaleString():0,className:et.tallyCount}),o.createElement(i.Count,{type:"contrasting",count:n&&n.contradicting?n.contradicting.toLocaleString():0,className:et.tallyCount})),o.createElement("div",{className:et.labels},o.createElement("span",{className:et.label},"Citing Publications"),o.createElement("span",{className:et.label},"Supporting"),o.createElement("span",{className:et.label},"Mentioning"),o.createElement("span",{className:et.label},"Contrasting")))},ot=function(e){var t=e.className,n=e.href,r=e.children;return o.createElement("a",{className:g()(et.link,t),href:n,target:"_blank",rel:"noopener noreferrer"},r)},at=function(e){var t=e.className;return o.createElement("div",{className:t},o.createElement("p",null,"See how this article has been cited at ",o.createElement(ot,{href:"https://scite.ai"},"scite.ai")),o.createElement("p",{className:et.message},"scite shows how a scientific paper has been cited by providing the context of the citation, a classification describing whether it supports, mentions, or contrasts the cited claim, and a label indicating in which section the citation was made"))},it=function(e){var t=e.tally,n=e.notices;return o.createElement("div",{className:et.tooltipContent},o.createElement("img",{className:et.logo,src:"https://cdn.scite.ai/assets/images/logo.svg"}),o.createElement("span",{className:et.slogan},"Smart Citations"),o.createElement(rt,{tally:t,notices:n}),t&&o.createElement("a",{className:et.button,href:"https://scite.ai/reports/".concat(t.doi),target:"_blank",rel:"noopener noreferrer"},"View Citations"),o.createElement(at,null))},lt=function(e){var t=e.tally;return o.createElement("div",null,o.createElement("img",{className:et.logo,src:"https://cdn.scite.ai/assets/images/logo.svg"}),o.createElement("span",{className:et.slogan},"Cited in Sections"),o.createElement(nt,{tally:t}),t&&o.createElement("a",{className:et.button,href:"https://scite.ai/reports/".concat(t.doi),target:"_blank",rel:"noopener noreferrer"},"View Citations"),o.createElement(at,null))},ct=function(e){var t,n=e.show,r=e.doi,a=e.tally,i=e.notices,l=e.placement,c=e.flip,u=e.slide,s=e.handleMouseEnter,f=e.handleMouseLeave,d=e.tallyType;(0,o.useEffect)((function(){t&&setTimeout(t)}),[a]);var p=function(){window.open("https://scite.ai/reports/".concat(r))};return o.createElement(Ve,{placement:l,strategy:"fixed",modifiers:[{name:"preventOverflow",options:{mainAxis:!1}},{name:"offset",options:{offset:[u||0,12]}},{name:"flip",options:c?{}:{fallbackPlacements:[]}}]},(function(e){var r,l,c,u=e.ref,m=e.style,h=e.placement,y=(e.arrowProps,e.update);return t=y,o.createElement("div",{ref:u,className:g()(et.tooltip,(r={},l=et.tooltipShow,c=n,l in r?Object.defineProperty(r,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[l]=c,r)),style:m,"data-placement":h,onMouseEnter:s,onMouseLeave:f,onClick:p},"smart_citations"===d&&o.createElement(it,{tally:a,notices:i}),"sections"===d&&o.createElement(lt,{tally:a}))}))};const ut=function(e){var t,n,r,a=e.doi,i=e.tally,l=e.notices,c=e.showZero,u=e.placement,s=void 0===u?"top":u,f=e.flip,d=e.slide,p=void 0===d?0:d,m=e.children,h=e.tallyType,y=void 0===h?"smart_citations":h,v=function(e){if(Array.isArray(e))return e}(r=(0,o.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),2!==a.length);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(r)||function(e,t){if(e){if("string"==typeof e)return tt(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,2):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=v[0],b=v[1],w=function(){"none"!==s&&(t&&clearTimeout(t),n=setTimeout((function(){b(!0)}),500))},S=function(){"none"!==s&&(n&&clearTimeout(n),t=setTimeout((function(){b(!1)}),300))};return"none"===s?m:o.createElement(E,null,o.createElement($e,null,(function(e){var t=e.ref;return o.createElement("div",{className:et.reference,ref:t,onMouseEnter:w,onMouseLeave:S},m)})),o.createElement(ct,{show:g&&!(i&&0===i.total&&!c),doi:a,tally:i,notices:l,placement:s,flip:f,slide:p,handleMouseEnter:w,handleMouseLeave:S,tallyType:y}))};var st=n(180);Ze()(st.Z,{insert:"head",singleton:!1}),st.Z.locals;var ft=n(696);function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pt(a,r,o,i,l,"next",e)}function l(e){pt(a,r,o,i,l,"throw",e)}i(void 0)}))}}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ht(e,t,n[t])}))}return e}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||bt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}Ze()(ft.Z,{insert:"head",singleton:!1}),ft.Z.locals;var wt=500,Et=window.location.hostname;function St(e){var t=e.dataset,n={},r=kt(e);return r&&(n.doi=r),t.tallyShow?n.tallyShow="true"===t.tallyShow:n.tallyShow=!0,t.sectionTallyShow&&(n.sectionTallyShow="true"===t.sectionTallyShow),t.showLogo&&(n.showLogo="true"===t.showLogo),t.chartType&&(n.chartType=t.chartType),t.showZero&&(n.showZero="true"===t.showZero),t.forceCollapse&&(n.forceCollapse="true"===t.forceCollapse),t.layout&&(n.horizontal="horizontal"===t.layout),t.sectionTallyLayout&&(n.horizontalSectionTally="horizontal"===t.sectionTallyLayout),t.tooltipPlacement&&(n.placement=t.tooltipPlacement),t.tooltipSlide&&(n.slide=Number(t.tooltipSlide)),t.showLabels&&(n.showLabels="true"===t.showLabels),t.targetEl&&(n.targetEl=t.targetEl),t.insertBefore&&(n.insertBefore="true"===t.insertBefore),t.small&&(n.small="true"===t.small),t.campaign&&(n.campaign=t.campaign),t.autologin&&(n.autologin=t.autologin),t.rewardfulId&&(n.rewardfulID=t.rewardfulId),n}function Ot(e){var t,n=[],r=[],o=!0,a=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,s=kt(u);"tallyShow"in(t=u.dataset)&&null!==t.tallyShow&&"true"!==t.tallyShow||n.push(s),"true"===u.dataset.sectionTallyShow&&r.push(s)}}catch(e){a=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw i}}return{tallyDOIs:gt(new Set(n)),sectionTallyDOIs:gt(new Set(r))}}function kt(e){var t,n=e.dataset;if(n.doi&&/^meta:/.test(n.doi)){var r=n.doi.split("meta:").join(""),o="meta[name='".concat(r,"']"),a=document.querySelector(o);a?t=a.getAttribute("content"):console.warn('Scite badge could not find meta tag with name="'.concat(r,'"'))}else n.doi&&(t=n.doi);return t&&t.toLowerCase().trim()}function Rt(e,t,n,r){var l=St(e),c=l.tallyShow||!1,u=l.sectionTallyShow||!1,s=c&&u,f=l.doi,d=l.showZero||!1,p=l.forceCollapse||!1,m=l.horizontal||!1,h=l.placement||"top",y=l.showLabels||!1,v=l.slide||0,g=l.small||!1,b=l.campaign||void 0,w=l.autologin||void 0,E=l.rewardfulID||void 0,S=l.showLogo||!0,O=l.chartType||null,k=l.horizontalSectionTally,R=!l.placement;try{(0,a.unmountComponentAtNode)(e)}catch(e){console.warn("Scite badge: unmounting component on another react DOM")}s?(0,a.render)(o.createElement(o.Fragment,null,o.createElement("div",{style:{display:"inline-block",marginBottom:"4px"}},o.createElement(ut,{doi:f,tally:t,showZero:d,placement:h,flip:R,slide:v,notices:n},o.createElement(i.Tally,{tally:t,horizontal:m,showZero:d,forceCollapse:p,showLabels:y,notices:n,small:g,source:Et,campaign:b,autologin:w,rewardfulID:E,isBadge:!0,showLogo:S}))),o.createElement("div",null,o.createElement(ut,{doi:f,tally:r,showZero:d,placement:h,flip:R,slide:v,tallyType:"sections"},o.createElement(i.SectionTally,{tally:r,horizontal:k,showZero:d,forceCollapse:p,showLabels:y,small:g,source:Et,campaign:b,autologin:w,rewardfulID:E,isBadge:!0,chartType:O,showLogo:!1})))),e):c?(0,a.render)(o.createElement(ut,{doi:f,tally:t,showZero:d,placement:h,flip:R,slide:v,notices:n},o.createElement(i.Tally,{tally:t,horizontal:m,showZero:d,forceCollapse:p,showLabels:y,notices:n,small:g,source:Et,campaign:b,autologin:w,rewardfulID:E,isBadge:!0,showLogo:S})),e):u&&(0,a.render)(o.createElement(ut,{doi:f,tally:r,showZero:d,placement:h,flip:R,slide:v,tallyType:"sections"},o.createElement(i.SectionTally,{tally:r,horizontal:k,showZero:d,forceCollapse:p,showLabels:y,small:g,source:Et,campaign:b,autologin:w,rewardfulID:E,isBadge:!0,chartType:O,showLogo:S})),e)}function xt(e){var t=St(e),n=t.targetEl,r=t.insertBefore,o=document.querySelector(n),a=document.createElement("div");a.className="scite-badge";var i=Object.keys(e.dataset),l=!0,c=!1,u=void 0;try{for(var s,f=i[Symbol.iterator]();!(l=(s=f.next()).done);l=!0){var d=s.value;a.dataset[d]=e.dataset[d]}}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}return o||console.warn("Scite badge: could not find element to insert badge wrapper into"),r?o.parentNode.insertBefore(a,o):o.appendChild(a),a}function Tt(){return _t.apply(this,arguments)}function _t(){return _t=mt(t().mark((function e(){var n,r,o,a,i,l,c,u,s,f,d,p,v,g,b,w,E,S,O,k,R,x,T,_,C,j,A,P,I,L,N,D,M,z,F,U,B,q,X,G,K,H=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(H.length>0&&void 0!==H[0]?H[0]:{}).forceReload,document.body){e.next=3;break}return e.abrupt("return",[]);case 3:r=document.querySelectorAll(".scite-badge-config"),o=!0,a=!1,i=void 0,e.prev=5,l=r[Symbol.iterator]();case 7:if(o=(c=l.next()).done){e.next=16;break}if("true"!==(u=c.value).dataset.injected){e.next=11;break}return e.abrupt("continue",13);case 11:xt(u),u.dataset.injected="true";case 13:o=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),a=!0,i=e.t0;case 22:e.prev=22,e.prev=23,o||null==l.return||l.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:s=document.querySelectorAll(".scite-badge"),f=[],d=!0,p=!1,v=void 0,e.prev=33,g=s[Symbol.iterator]();case 35:if(d=(b=g.next()).done){e.next=43;break}if("true"!==(w=b.value).dataset.fetched||n){e.next=39;break}return e.abrupt("continue",40);case 39:f.push(w);case 40:d=!0,e.next=35;break;case 43:e.next=49;break;case 45:e.prev=45,e.t1=e.catch(33),p=!0,v=e.t1;case 49:e.prev=49,e.prev=50,d||null==g.return||g.return();case 52:if(e.prev=52,!p){e.next=55;break}throw v;case 55:return e.finish(52);case 56:return e.finish(49);case 57:if(E=Ot(f),S=E.tallyDOIs,O=E.sectionTallyDOIs,0!==S.length||0!==O.length){e.next=60;break}return e.abrupt("return",s);case 60:k=Math.max(Math.ceil(S.length/wt),Math.ceil(O.length/wt)),R={},x={},T={},_=0;case 65:if(!(_<k)){e.next=100;break}return C=S.slice(_*wt,(_+1)*wt),j=O.slice(_*wt,(_+1)*wt),e.t2=vt,e.next=71,Promise.all([m(C),h(C),y(j)]);case 71:for(e.t3=e.sent,A=(0,e.t2)(e.t3,3),P=A[0].tallies,I=A[1].notices,L=A[2],N=L.tallies,R=yt({},R,P),x=yt({},x,I),T=yt({},T,N),D=!0,M=!1,z=void 0,e.prev=81,F=f[Symbol.iterator]();!(D=(U=F.next()).done);D=!0)B=U.value,(q=kt(B))in R||q in T?(X=q in R?R[q]:{total:0,citingPublications:0},G=q in R?I[q]:{},K=q in T?T[q]:{},Rt(B,X,G,K)):Rt(B,{total:0,citingPublications:0},{},{}),B.dataset.fetched="true";e.next=89;break;case 85:e.prev=85,e.t4=e.catch(81),M=!0,z=e.t4;case 89:e.prev=89,e.prev=90,D||null==F.return||F.return();case 92:if(e.prev=92,!M){e.next=95;break}throw z;case 95:return e.finish(92);case 96:return e.finish(89);case 97:_++,e.next=65;break;case 100:return e.abrupt("return",s);case 101:case"end":return e.stop()}}),e,null,[[5,18,22,30],[23,,25,29],[33,45,49,57],[50,,52,56],[81,85,89,97],[90,,92,96]])}))),_t.apply(this,arguments)}function Ct(){return jt.apply(this,arguments)}function jt(){return(jt=mt(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt();case 2:0===e.sent.length&&window.addEventListener("load",Tt);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})(),r})(),e.exports=t()},351:function(e){e.exports=function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}if(Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],a=0;a<r;a++)if(t=n[a],e.call(o,t,a,n))return t}),window&&"function"!=typeof window.CustomEvent){var r=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};void 0!==window.Event&&(r.prototype=window.Event.prototype),window.CustomEvent=r}var o=function(){function t(n){e(this,t),this.tribute=n,this.tribute.events=this}return n(t,[{key:"bind",value:function(e){e.boundKeydown=this.keydown.bind(e,this),e.boundKeyup=this.keyup.bind(e,this),e.boundInput=this.input.bind(e,this),e.addEventListener("keydown",e.boundKeydown,!1),e.addEventListener("keyup",e.boundKeyup,!1),e.addEventListener("input",e.boundInput,!1)}},{key:"unbind",value:function(e){e.removeEventListener("keydown",e.boundKeydown,!1),e.removeEventListener("keyup",e.boundKeyup,!1),e.removeEventListener("input",e.boundInput,!1),delete e.boundKeydown,delete e.boundKeyup,delete e.boundInput}},{key:"keydown",value:function(e,n){e.shouldDeactivate(n)&&(e.tribute.isActive=!1,e.tribute.hideMenu());var r=this;e.commandEvent=!1,t.keys().forEach((function(t){t.key===n.keyCode&&(e.commandEvent=!0,e.callbacks()[t.value.toLowerCase()](n,r))}))}},{key:"input",value:function(e,t){e.inputEvent=!0,e.keyup.call(this,e,t)}},{key:"click",value:function(e,t){var n=e.tribute;if(n.menu&&n.menu.contains(t.target)){var r=t.target;for(t.preventDefault(),t.stopPropagation();"li"!==r.nodeName.toLowerCase();)if(!(r=r.parentNode)||r===n.menu)throw new Error("cannot find the <li> container for the click");n.selectItemAtIndex(r.getAttribute("data-index"),t),n.hideMenu()}else n.current.element&&!n.current.externalTrigger&&(n.current.externalTrigger=!1,setTimeout((function(){return n.hideMenu()})))}},{key:"keyup",value:function(e,t){if(e.inputEvent&&(e.inputEvent=!1),e.updateSelection(this),27!==t.keyCode){if(!e.tribute.allowSpaces&&e.tribute.hasTrailingSpace)return e.tribute.hasTrailingSpace=!1,e.commandEvent=!0,void e.callbacks().space(t,this);if(!e.tribute.isActive)if(e.tribute.autocompleteMode)e.callbacks().triggerChar(t,this,"");else{var n=e.getKeyCode(e,this,t);if(isNaN(n)||!n)return;var r=e.tribute.triggers().find((function(e){return e.charCodeAt(0)===n}));void 0!==r&&e.callbacks().triggerChar(t,this,r)}e.tribute.current.mentionText.length<e.tribute.current.collection.menuShowMinLength||((e.tribute.current.trigger||e.tribute.autocompleteMode)&&!1===e.commandEvent||e.tribute.isActive&&8===t.keyCode)&&e.tribute.showMenuFor(this,!0)}}},{key:"shouldDeactivate",value:function(e){if(!this.tribute.isActive)return!1;if(0===this.tribute.current.mentionText.length){var n=!1;return t.keys().forEach((function(t){e.keyCode===t.key&&(n=!0)})),!n}return!1}},{key:"getKeyCode",value:function(e,t,n){var r=e.tribute,o=r.range.getTriggerInfo(!1,r.hasTrailingSpace,!0,r.allowSpaces,r.autocompleteMode);return!!o&&o.mentionTriggerChar.charCodeAt(0)}},{key:"updateSelection",value:function(e){this.tribute.current.element=e;var t=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);t&&(this.tribute.current.selectedPath=t.mentionSelectedPath,this.tribute.current.mentionText=t.mentionText,this.tribute.current.selectedOffset=t.mentionSelectedOffset)}},{key:"callbacks",value:function(){var e=this;return{triggerChar:function(t,n,r){var o=e.tribute;o.current.trigger=r;var a=o.collection.find((function(e){return e.trigger===r}));o.current.collection=a,o.current.mentionText.length>=o.current.collection.menuShowMinLength&&o.inputEvent&&o.showMenuFor(n,!0)},enter:function(t,n){e.tribute.isActive&&e.tribute.current.filteredItems&&(t.preventDefault(),t.stopPropagation(),setTimeout((function(){e.tribute.selectItemAtIndex(e.tribute.menuSelected,t),e.tribute.hideMenu()}),0))},escape:function(t,n){e.tribute.isActive&&(t.preventDefault(),t.stopPropagation(),e.tribute.isActive=!1,e.tribute.hideMenu())},tab:function(t,n){e.callbacks().enter(t,n)},space:function(t,n){e.tribute.isActive&&(e.tribute.spaceSelectsMatch?e.callbacks().enter(t,n):e.tribute.allowSpaces||(t.stopPropagation(),setTimeout((function(){e.tribute.hideMenu(),e.tribute.isActive=!1}),0)))},up:function(t,n){if(e.tribute.isActive&&e.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();var r=e.tribute.current.filteredItems.length,o=e.tribute.menuSelected;r>o&&o>0?(e.tribute.menuSelected--,e.setActiveLi()):0===o&&(e.tribute.menuSelected=r-1,e.setActiveLi(),e.tribute.menu.scrollTop=e.tribute.menu.scrollHeight)}},down:function(t,n){if(e.tribute.isActive&&e.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();var r=e.tribute.current.filteredItems.length-1,o=e.tribute.menuSelected;r>o?(e.tribute.menuSelected++,e.setActiveLi()):r===o&&(e.tribute.menuSelected=0,e.setActiveLi(),e.tribute.menu.scrollTop=0)}},delete:function(t,n){e.tribute.isActive&&e.tribute.current.mentionText.length<1?e.tribute.hideMenu():e.tribute.isActive&&e.tribute.showMenuFor(n)}}}},{key:"setActiveLi",value:function(e){var t=this.tribute.menu.querySelectorAll("li"),n=t.length>>>0;e&&(this.tribute.menuSelected=parseInt(e));for(var r=0;r<n;r++){var o=t[r];if(r===this.tribute.menuSelected){o.classList.add(this.tribute.current.collection.selectClass);var a=o.getBoundingClientRect(),i=this.tribute.menu.getBoundingClientRect();if(a.bottom>i.bottom){var l=a.bottom-i.bottom;this.tribute.menu.scrollTop+=l}else if(a.top<i.top){var c=i.top-a.top;this.tribute.menu.scrollTop-=c}}else o.classList.remove(this.tribute.current.collection.selectClass)}}},{key:"getFullHeight",value:function(e,t){var n=e.getBoundingClientRect().height;if(t){var r=e.currentStyle||window.getComputedStyle(e);return n+parseFloat(r.marginTop)+parseFloat(r.marginBottom)}return n}}],[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}}]),t}(),a=function(){function t(n){e(this,t),this.tribute=n,this.tribute.menuEvents=this,this.menu=this.tribute.menu}return n(t,[{key:"bind",value:function(e){var t=this;this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce((function(){t.tribute.isActive&&t.tribute.showMenuFor(t.tribute.current.element,!1)}),300,!1),this.windowResizeEvent=this.debounce((function(){t.tribute.isActive&&t.tribute.range.positionMenuAtCaret(!0)}),300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}},{key:"unbind",value:function(e){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}},{key:"debounce",value:function(e,t,n){var r,o=arguments,a=this;return function(){var i=a,l=o,c=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,l)}),t),c&&e.apply(i,l)}}}]),t}(),i=function(){function t(n){e(this,t),this.tribute=n,this.tribute.range=this}return n(t,[{key:"getDocument",value:function(){var e;return this.tribute.current.collection&&(e=this.tribute.current.collection.iframe),e?e.contentWindow.document:document}},{key:"positionMenuAtCaret",value:function(e){var t,n=this,r=this.tribute.current,o=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==o){if(!this.tribute.positionMenu)return void(this.tribute.menu.style.cssText="display: block;");t=this.isContentEditable(r.element)?this.getContentEditableCaretPosition(o.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,o.mentionPosition),this.tribute.menu.style.cssText="top: ".concat(t.top,"px;\n                                     left: ").concat(t.left,"px;\n                                     right: ").concat(t.right,"px;\n                                     bottom: ").concat(t.bottom,"px;\n                                     position: absolute;\n                                     display: block;"),"auto"===t.left&&(this.tribute.menu.style.left="auto"),"auto"===t.top&&(this.tribute.menu.style.top="auto"),e&&this.scrollIntoView(),window.setTimeout((function(){var r={width:n.tribute.menu.offsetWidth,height:n.tribute.menu.offsetHeight},o=n.isMenuOffScreen(t,r),a=window.innerWidth>r.width&&(o.left||o.right),i=window.innerHeight>r.height&&(o.top||o.bottom);(a||i)&&(n.tribute.menu.style.cssText="display: none",n.positionMenuAtCaret(e))}),0)}else this.tribute.menu.style.cssText="display: none"}},{key:"selectElement",value:function(e,t,n){var r,o=e;if(t)for(var a=0;a<t.length;a++){if(void 0===(o=o.childNodes[t[a]]))return;for(;o.length<n;)n-=o.length,o=o.nextSibling;0!==o.childNodes.length||o.length||(o=o.previousSibling)}var i=this.getWindowSelection();(r=this.getDocument().createRange()).setStart(o,n),r.setEnd(o,n),r.collapse(!0);try{i.removeAllRanges()}catch(e){}i.addRange(r),e.focus()}},{key:"replaceTriggerText",value:function(e,t,n,r,o){var a=this.getTriggerInfo(!0,n,t,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==a){var i=this.tribute.current,l=new CustomEvent("tribute-replaced",{detail:{item:o,instance:i,context:a,event:r}});if(this.isContentEditable(i.element)){e+="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:"";var c=a.mentionPosition+a.mentionText.length;this.tribute.autocompleteMode||(c+=a.mentionTriggerChar.length),this.pasteHtml(e,a.mentionPosition,c)}else{var u=this.tribute.current.element,s="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";e+=s;var f=a.mentionPosition,d=a.mentionPosition+a.mentionText.length+s.length;this.tribute.autocompleteMode||(d+=a.mentionTriggerChar.length-1),u.value=u.value.substring(0,f)+e+u.value.substring(d,u.value.length),u.selectionStart=f+e.length,u.selectionEnd=f+e.length}i.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),i.element.dispatchEvent(l)}}},{key:"pasteHtml",value:function(e,t,n){var r,o;o=this.getWindowSelection(),(r=this.getDocument().createRange()).setStart(o.anchorNode,t),r.setEnd(o.anchorNode,n),r.deleteContents();var a=this.getDocument().createElement("div");a.innerHTML=e;for(var i,l,c=this.getDocument().createDocumentFragment();i=a.firstChild;)l=c.appendChild(i);r.insertNode(c),l&&((r=r.cloneRange()).setStartAfter(l),r.collapse(!0),o.removeAllRanges(),o.addRange(r))}},{key:"getWindowSelection",value:function(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}},{key:"getNodePositionInParent",value:function(e){if(null===e.parentNode)return 0;for(var t=0;t<e.parentNode.childNodes.length;t++)if(e.parentNode.childNodes[t]===e)return t}},{key:"getContentEditableSelectedPath",value:function(e){var t=this.getWindowSelection(),n=t.anchorNode,r=[];if(null!=n){for(var o,a=n.contentEditable;null!==n&&"true"!==a;)o=this.getNodePositionInParent(n),r.push(o),null!==(n=n.parentNode)&&(a=n.contentEditable);return r.reverse(),{selected:n,path:r,offset:t.getRangeAt(0).startOffset}}}},{key:"getTextPrecedingCurrentSelection",value:function(){var e=this.tribute.current,t="";if(this.isContentEditable(e.element)){var n=this.getWindowSelection().anchorNode;if(null!=n){var r=n.textContent,o=this.getWindowSelection().getRangeAt(0).startOffset;r&&o>=0&&(t=r.substring(0,o))}}else{var a=this.tribute.current.element;if(a){var i=a.selectionStart;a.value&&i>=0&&(t=a.value.substring(0,i))}}return t}},{key:"getLastWordInText",value:function(e){var t=(e=e.replace(/\u00A0/g," ")).split(/\s+/);return t[t.length-1].trim()}},{key:"getTriggerInfo",value:function(e,t,n,r,o){var a,i,l,c=this,u=this.tribute.current;if(this.isContentEditable(u.element)){var s=this.getContentEditableSelectedPath(u);s&&(a=s.selected,i=s.path,l=s.offset)}else a=this.tribute.current.element;var f=this.getTextPrecedingCurrentSelection(),d=this.getLastWordInText(f);if(o)return{mentionPosition:f.length-d.length,mentionText:d,mentionSelectedElement:a,mentionSelectedPath:i,mentionSelectedOffset:l};if(null!=f){var p,m=-1;if(this.tribute.collection.forEach((function(e){var t=e.trigger,r=e.requireLeadingSpace?c.lastIndexWithLeadingSpace(f,t):f.lastIndexOf(t);r>m&&(m=r,p=t,n=e.requireLeadingSpace)})),m>=0&&(0===m||!n||/[\xA0\s]/g.test(f.substring(m-1,m)))){var h=f.substring(m+p.length,f.length);p=f.substring(m,m+p.length);var y=h.substring(0,1),v=h.length>0&&(" "===y||""===y);t&&(h=h.trim());var g=r?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=g.test(h),!v&&(e||!g.test(h)))return{mentionPosition:m,mentionText:h,mentionSelectedElement:a,mentionSelectedPath:i,mentionSelectedOffset:l,mentionTriggerChar:p}}}}},{key:"lastIndexWithLeadingSpace",value:function(e,t){for(var n=e.split("").reverse().join(""),r=-1,o=0,a=e.length;o<a;o++){for(var i=o===e.length-1,l=/\s/.test(n[o+1]),c=!0,u=t.length-1;u>=0;u--)if(t[u]!==n[o-u]){c=!1;break}if(c&&(i||l)){r=e.length-1-o;break}}return r}},{key:"isContentEditable",value:function(e){return"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName}},{key:"isMenuOffScreen",value:function(e,t){var n=window.innerWidth,r=window.innerHeight,o=document.documentElement,a=(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),i=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),l="number"==typeof e.top?e.top:i+r-e.bottom-t.height,c="number"==typeof e.right?e.right:e.left+t.width,u="number"==typeof e.bottom?e.bottom:e.top+t.height,s="number"==typeof e.left?e.left:a+n-e.right-t.width;return{top:l<Math.floor(i),right:c>Math.ceil(a+n),bottom:u>Math.ceil(i+r),left:s<Math.floor(a)}}},{key:"getMenuDimensions",value:function(){var e={width:null,height:null};return this.tribute.menu.style.cssText="top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;",e.width=this.tribute.menu.offsetWidth,e.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",e}},{key:"getTextAreaOrInputUnderlinePosition",value:function(e,t,n){var r=null!==window.mozInnerScreenX,o=this.getDocument().createElement("div");o.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(o);var a=o.style,i=window.getComputedStyle?getComputedStyle(e):e.currentStyle;a.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(a.wordWrap="break-word"),a.position="absolute",a.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((function(e){a[e]=i[e]})),r?(a.width="".concat(parseInt(i.width)-2,"px"),e.scrollHeight>parseInt(i.height)&&(a.overflowY="scroll")):a.overflow="hidden",o.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(o.textContent=o.textContent.replace(/\s/g,""));var l=this.getDocument().createElement("span");l.textContent=e.value.substring(t)||".",o.appendChild(l);var c=e.getBoundingClientRect(),u=document.documentElement,s=(window.pageXOffset||u.scrollLeft)-(u.clientLeft||0),f=(window.pageYOffset||u.scrollTop)-(u.clientTop||0),d=0,p=0;this.menuContainerIsBody&&(d=c.top,p=c.left);var m={top:d+f+l.offsetTop+parseInt(i.borderTopWidth)+parseInt(i.fontSize)-e.scrollTop,left:p+s+l.offsetLeft+parseInt(i.borderLeftWidth)},h=window.innerWidth,y=window.innerHeight,v=this.getMenuDimensions(),g=this.isMenuOffScreen(m,v);g.right&&(m.right=h-m.left,m.left="auto");var b=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(g.bottom){var w=b-(y-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);m.bottom=w+(y-c.top-l.offsetTop),m.top="auto"}return(g=this.isMenuOffScreen(m,v)).left&&(m.left=h>v.width?s+h-v.width:s,delete m.right),g.top&&(m.top=y>v.height?f+y-v.height:f,delete m.bottom),this.getDocument().body.removeChild(o),m}},{key:"getContentEditableCaretPosition",value:function(e){var t,n=this.getWindowSelection();(t=this.getDocument().createRange()).setStart(n.anchorNode,e),t.setEnd(n.anchorNode,e),t.collapse(!1);var r=t.getBoundingClientRect(),o=document.documentElement,a=(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),i=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),l={left:r.left+a,top:r.top+r.height+i},c=window.innerWidth,u=window.innerHeight,s=this.getMenuDimensions(),f=this.isMenuOffScreen(l,s);f.right&&(l.left="auto",l.right=c-r.left-a);var d=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(f.bottom){var p=d-(u-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);l.top="auto",l.bottom=p+(u-r.top)}return(f=this.isMenuOffScreen(l,s)).left&&(l.left=c>s.width?a+c-s.width:a,delete l.right),f.top&&(l.top=u>s.height?i+u-s.height:i,delete l.bottom),this.menuContainerIsBody||(l.left=l.left?l.left-this.tribute.menuContainer.offsetLeft:l.left,l.top=l.top?l.top-this.tribute.menuContainer.offsetTop:l.top),l}},{key:"scrollIntoView",value:function(e){var t,n=this.menu;if(void 0!==n){for(;void 0===t||0===t.height;)if(0===(t=n.getBoundingClientRect()).height&&(void 0===(n=n.childNodes[0])||!n.getBoundingClientRect))return;var r=t.top,o=r+t.height;if(r<0)window.scrollTo(0,window.pageYOffset+t.top-20);else if(o>window.innerHeight){var a=window.pageYOffset+t.top-20;a-window.pageYOffset>100&&(a=window.pageYOffset+100);var i=window.pageYOffset-(window.innerHeight-o);i>a&&(i=a),window.scrollTo(0,i)}}}},{key:"menuContainerIsBody",get:function(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}}]),t}(),l=function(){function t(n){e(this,t),this.tribute=n,this.tribute.search=this}return n(t,[{key:"simpleFilter",value:function(e,t){var n=this;return t.filter((function(t){return n.test(e,t)}))}},{key:"test",value:function(e,t){return null!==this.match(e,t)}},{key:"match",value:function(e,t,n){n=n||{},t.length;var r=n.pre||"",o=n.post||"",a=n.caseSensitive&&t||t.toLowerCase();if(n.skip)return{rendered:t,score:0};e=n.caseSensitive&&e||e.toLowerCase();var i=this.traverse(a,e,0,0,[]);return i?{rendered:this.render(t,i.cache,r,o),score:i.score}:null}},{key:"traverse",value:function(e,t,n,r,o){if(t.length===r)return{score:this.calculateScore(o),cache:o.slice()};if(!(e.length===n||t.length-r>e.length-n)){for(var a,i,l=t[r],c=e.indexOf(l,n);c>-1;){if(o.push(c),i=this.traverse(e,t,c+1,r+1,o),o.pop(),!i)return a;(!a||a.score<i.score)&&(a=i),c=e.indexOf(l,c+1)}return a}}},{key:"calculateScore",value:function(e){var t=0,n=1;return e.forEach((function(r,o){o>0&&(e[o-1]+1===r?n+=n+1:n=1),t+=n})),t}},{key:"render",value:function(e,t,n,r){var o=e.substring(0,t[0]);return t.forEach((function(a,i){o+=n+e[a]+r+e.substring(a+1,t[i+1]?t[i+1]:e.length)})),o}},{key:"filter",value:function(e,t,n){var r=this;return n=n||{},t.reduce((function(t,o,a,i){var l=o;n.extract&&((l=n.extract(o))||(l=""));var c=r.match(e,l,n);return null!=c&&(t[t.length]={string:c.rendered,score:c.score,index:a,original:o}),t}),[]).sort((function(e,t){return t.score-e.score||e.index-t.index}))}}]),t}();return function(){function t(n){var r,c=this,u=n.values,s=void 0===u?null:u,f=n.iframe,d=void 0===f?null:f,p=n.selectClass,m=void 0===p?"highlight":p,h=n.containerClass,y=void 0===h?"tribute-container":h,v=n.itemClass,g=void 0===v?"":v,b=n.trigger,w=void 0===b?"@":b,E=n.autocompleteMode,S=void 0!==E&&E,O=n.selectTemplate,k=void 0===O?null:O,R=n.menuItemTemplate,x=void 0===R?null:R,T=n.lookup,_=void 0===T?"key":T,C=n.fillAttr,j=void 0===C?"value":C,A=n.collection,P=void 0===A?null:A,I=n.menuContainer,L=void 0===I?null:I,N=n.noMatchTemplate,D=void 0===N?null:N,M=n.requireLeadingSpace,z=void 0===M||M,F=n.allowSpaces,U=void 0!==F&&F,B=n.replaceTextSuffix,q=void 0===B?null:B,X=n.positionMenu,G=void 0===X||X,K=n.spaceSelectsMatch,H=void 0!==K&&K,V=n.searchOpts,Q=void 0===V?{}:V,W=n.menuItemLimit,$=void 0===W?null:W,Y=n.menuShowMinLength,Z=void 0===Y?0:Y;if(e(this,t),this.autocompleteMode=S,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=L,this.allowSpaces=U,this.replaceTextSuffix=q,this.positionMenu=G,this.hasTrailingSpace=!1,this.spaceSelectsMatch=H,this.autocompleteMode&&(w="",U=!1),s)this.collection=[{trigger:w,iframe:d,selectClass:m,containerClass:y,itemClass:g,selectTemplate:(k||t.defaultSelectTemplate).bind(this),menuItemTemplate:(x||t.defaultMenuItemTemplate).bind(this),noMatchTemplate:(r=D,"string"==typeof r?""===r.trim()?null:r:"function"==typeof r?r.bind(c):D||function(){return"<li>No Match Found!</li>"}.bind(c)),lookup:_,fillAttr:j,values:s,requireLeadingSpace:z,searchOpts:Q,menuItemLimit:$,menuShowMinLength:Z}];else{if(!P)throw new Error("[Tribute] No collection specified.");this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=P.map((function(e){return{trigger:e.trigger||w,iframe:e.iframe||d,selectClass:e.selectClass||m,containerClass:e.containerClass||y,itemClass:e.itemClass||g,selectTemplate:(e.selectTemplate||t.defaultSelectTemplate).bind(c),menuItemTemplate:(e.menuItemTemplate||t.defaultMenuItemTemplate).bind(c),noMatchTemplate:function(e){return"string"==typeof e?""===e.trim()?null:e:"function"==typeof e?e.bind(c):D||function(){return"<li>No Match Found!</li>"}.bind(c)}(D),lookup:e.lookup||_,fillAttr:e.fillAttr||j,values:e.values,requireLeadingSpace:e.requireLeadingSpace,searchOpts:e.searchOpts||Q,menuItemLimit:e.menuItemLimit||$,menuShowMinLength:e.menuShowMinLength||Z}}))}new i(this),new o(this),new a(this),new l(this)}return n(t,[{key:"triggers",value:function(){return this.collection.map((function(e){return e.trigger}))}},{key:"attach",value:function(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array)for(var t=e.length,n=0;n<t;++n)this._attach(e[n]);else this._attach(e)}},{key:"_attach",value:function(e){e.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+e.nodeName),this.ensureEditable(e),this.events.bind(e),e.setAttribute("data-tribute",!0)}},{key:"ensureEditable",value:function(e){if(-1===t.inputTypes().indexOf(e.nodeName)){if(!e.contentEditable)throw new Error("[Tribute] Cannot bind to "+e.nodeName);e.contentEditable=!0}}},{key:"createMenu",value:function(e){var t=this.range.getDocument().createElement("div"),n=this.range.getDocument().createElement("ul");return t.className=e,t.appendChild(n),this.menuContainer?this.menuContainer.appendChild(t):this.range.getDocument().body.appendChild(t)}},{key:"showMenuFor",value:function(e,t){var n=this;if(!this.isActive||this.current.element!==e||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),e.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var r=function(e){if(n.isActive){var r=n.search.filter(n.current.mentionText,e,{pre:n.current.collection.searchOpts.pre||"<span>",post:n.current.collection.searchOpts.post||"</span>",skip:n.current.collection.searchOpts.skip,extract:function(e){if("string"==typeof n.current.collection.lookup)return e[n.current.collection.lookup];if("function"==typeof n.current.collection.lookup)return n.current.collection.lookup(e,n.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});n.current.collection.menuItemLimit&&(r=r.slice(0,n.current.collection.menuItemLimit)),n.current.filteredItems=r;var o=n.menu.querySelector("ul");if(n.range.positionMenuAtCaret(t),!r.length){var a=new CustomEvent("tribute-no-match",{detail:n.menu});return n.current.element.dispatchEvent(a),void("function"==typeof n.current.collection.noMatchTemplate&&!n.current.collection.noMatchTemplate()||!n.current.collection.noMatchTemplate?n.hideMenu():"function"==typeof n.current.collection.noMatchTemplate?o.innerHTML=n.current.collection.noMatchTemplate():o.innerHTML=n.current.collection.noMatchTemplate)}o.innerHTML="";var i=n.range.getDocument().createDocumentFragment();r.forEach((function(e,t){var r=n.range.getDocument().createElement("li");r.setAttribute("data-index",t),r.className=n.current.collection.itemClass,r.addEventListener("mousemove",(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(n._findLiTarget(e.target),2),r=(t[0],t[1]);0!==e.movementY&&n.events.setActiveLi(r)})),n.menuSelected===t&&r.classList.add(n.current.collection.selectClass),r.innerHTML=n.current.collection.menuItemTemplate(e),i.appendChild(r)})),o.appendChild(i)}};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,r):r(this.current.collection.values)}}},{key:"_findLiTarget",value:function(e){if(!e)return[];var t=e.getAttribute("data-index");return t?[e,t]:this._findLiTarget(e.parentNode)}},{key:"showMenuForCollection",value:function(e,t){e!==document.activeElement&&this.placeCaretAtEnd(e),this.current.collection=this.collection[t||0],this.current.externalTrigger=!0,this.current.element=e,e.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(e,this.current.collection.trigger),this.showMenuFor(e)}},{key:"placeCaretAtEnd",value:function(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var r=document.body.createTextRange();r.moveToElementText(e),r.collapse(!1),r.select()}}},{key:"insertTextAtCursor",value:function(e){var t,n;(n=(t=window.getSelection()).getRangeAt(0)).deleteContents();var r=document.createTextNode(e);n.insertNode(r),n.selectNodeContents(r),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}},{key:"insertAtCaret",value:function(e,t){var n=e.scrollTop,r=e.selectionStart,o=e.value.substring(0,r),a=e.value.substring(e.selectionEnd,e.value.length);e.value=o+t+a,r+=t.length,e.selectionStart=r,e.selectionEnd=r,e.focus(),e.scrollTop=n}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}},{key:"selectItemAtIndex",value:function(e,t){if("number"==typeof(e=parseInt(e))&&!isNaN(e)){var n=this.current.filteredItems[e],r=this.current.collection.selectTemplate(n);null!==r&&this.replaceText(r,t,n)}}},{key:"replaceText",value:function(e,t,n){this.range.replaceTriggerText(e,!0,!0,t,n)}},{key:"_append",value:function(e,t,n){if("function"==typeof e.values)throw new Error("Unable to append to values, as it is a function.");e.values=n?t:e.values.concat(t)}},{key:"append",value:function(e,t,n){var r=parseInt(e);if("number"!=typeof r)throw new Error("please provide an index for the collection to update.");var o=this.collection[r];this._append(o,t,n)}},{key:"appendCurrent",value:function(e,t){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,e,t)}},{key:"detach",value:function(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array)for(var t=e.length,n=0;n<t;++n)this._detach(e[n]);else this._detach(e)}},{key:"_detach",value:function(e){var t=this;this.events.unbind(e),e.tributeMenu&&this.menuEvents.unbind(e.tributeMenu),setTimeout((function(){e.removeAttribute("data-tribute"),t.isActive=!1,e.tributeMenu&&e.tributeMenu.remove()}))}},{key:"isActive",get:function(){return this._isActive},set:function(e){if(this._isActive!=e&&(this._isActive=e,this.current.element)){var t=new CustomEvent("tribute-active-".concat(e));this.current.element.dispatchEvent(t)}}}],[{key:"defaultSelectTemplate",value:function(e){return void 0===e?"".concat(this.current.collection.trigger).concat(this.current.mentionText):this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+e.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+e.original[this.current.collection.fillAttr]}},{key:"defaultMenuItemTemplate",value:function(e){return e.string}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"]}}]),t}()}()},250:(e,t,n)=>{var r=n(196),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,l=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return l((function(){o.value=n,o.getSnapshot=t,u(o)&&s({inst:o})}),[e,n,t]),i((function(){return u(o)&&s({inst:o}),e((function(){u(o)&&s({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:s},688:(e,t,n)=>{e.exports=n(250)},196:e=>{e.exports=window.React},147:e=>{e.exports={i8:"0.7.18"}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(s=0;s<e.length;s++){for(var[n,o,a]=e[s],l=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(l=!1,a<i&&(i=a));if(l){e.splice(s--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0,532:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,l,c]=n,u=0;if(i.some((t=>0!==e[t]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(c)var s=c(r)}for(t&&t(n);u<i.length;u++)a=i[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(s)},n=self.webpackChunk_alixlahuec_zotero_roam=self.webpackChunk_alixlahuec_zotero_roam||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[532],(()=>r(840))),a=(o=r.O(o)).Z;export{a as default};