var dx=Object.defineProperty;var Im=n=>{throw TypeError(n)};var fx=(n,e,t)=>e in n?dx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ut=(n,e,t)=>fx(n,typeof e!="symbol"?e+"":e,t),Pm=(n,e,t)=>e.has(n)||Im("Cannot "+t);var St=(n,e,t)=>(Pm(n,e,"read from private field"),t?t.call(n):e.get(n)),da=(n,e,t)=>e.has(n)?Im("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),is=(n,e,t,o)=>(Pm(n,e,"write to private field"),o?o.call(n,t):e.set(n,t),t);function Kc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ib={exports:{}},Vi={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Nm=Object.getOwnPropertySymbols,px=Object.prototype.hasOwnProperty,hx=Object.prototype.propertyIsEnumerable;function mx(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function gx(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var o=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(o.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}gx();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=window.React,lb=60103;Vi.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Lm=Symbol.for;lb=Lm("react.element"),Vi.Fragment=Lm("react.fragment")}var bx=yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vx=Object.prototype.hasOwnProperty,wx={key:!0,ref:!0,__self:!0,__source:!0};function cb(n,e,t){var o,s={},i=null,c=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(c=e.ref);for(o in e)vx.call(e,o)&&!wx.hasOwnProperty(o)&&(s[o]=e[o]);if(n&&n.defaultProps)for(o in e=n.defaultProps,e)s[o]===void 0&&(s[o]=e[o]);return{$$typeof:lb,type:n,key:i,ref:c,props:s,_owner:bx.current}}Vi.jsx=cb;Vi.jsxs=cb;ib.exports=Vi;var d=ib.exports;class Sa{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Di=typeof window>"u"||"Deno"in window;function nr(){}function xx(n,e){return typeof n=="function"?n(e):n}function nf(n){return typeof n=="number"&&n>=0&&n!==1/0}function Dm(n,e){return n.filter(t=>!e.includes(t))}function Cx(n,e,t){const o=n.slice(0);return o[e]=t,o}function ub(n,e){return Math.max(n+(e||0)-Date.now(),0)}function _i(n,e,t){return Wi(n)?typeof e=="function"?{...t,queryKey:n,queryFn:e}:{...e,queryKey:n}:n}function Ex(n,e,t){return Wi(n)?typeof e=="function"?{...t,mutationKey:n,mutationFn:e}:{...e,mutationKey:n}:typeof n=="function"?{...e,mutationFn:n}:{...n}}function Lo(n,e,t){return Wi(n)?[{...e,queryKey:n},t]:[n||{},e]}function Mm(n,e){const{type:t="all",exact:o,fetchStatus:s,predicate:i,queryKey:c,stale:u}=n;if(Wi(c)){if(o){if(e.queryHash!==Qf(c,e.options))return!1}else if(!Rc(e.queryKey,c))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||typeof s<"u"&&s!==e.state.fetchStatus||i&&!i(e))}function Bm(n,e){const{exact:t,fetching:o,predicate:s,mutationKey:i}=n;if(Wi(i)){if(!e.options.mutationKey)return!1;if(t){if(ma(e.options.mutationKey)!==ma(i))return!1}else if(!Rc(e.options.mutationKey,i))return!1}return!(typeof o=="boolean"&&e.state.status==="loading"!==o||s&&!s(e))}function Qf(n,e){return(e?.queryKeyHashFn||ma)(n)}function ma(n){return JSON.stringify(n,(e,t)=>rf(t)?Object.keys(t).sort().reduce((o,s)=>(o[s]=t[s],o),{}):t)}function Rc(n,e){return db(n,e)}function db(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!db(n[t],e[t])):!1}function fb(n,e){if(n===e)return n;const t=zm(n)&&zm(e);if(t||rf(n)&&rf(e)){const o=t?n.length:Object.keys(n).length,s=t?e:Object.keys(e),i=s.length,c=t?[]:{};let u=0;for(let f=0;f<i;f++){const m=t?f:s[f];c[m]=fb(n[m],e[m]),c[m]===n[m]&&u++}return o===i&&u===o?n:c}return e}function Oc(n,e){if(n&&!e||e&&!n)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function zm(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function rf(n){if(!Fm(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!Fm(t)||!t.hasOwnProperty("isPrototypeOf"))}function Fm(n){return Object.prototype.toString.call(n)==="[object Object]"}function Wi(n){return Array.isArray(n)}function pb(n){return new Promise(e=>{setTimeout(e,n)})}function $m(n){pb(0).then(n)}function Sx(){if(typeof AbortController=="function")return new AbortController}function of(n,e,t){return t.isDataEqual!=null&&t.isDataEqual(n,e)?n:typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?fb(n,e):e}class Tx extends Sa{constructor(){super(),this.setup=e=>{if(!Di&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const jc=new Tx,Um=["online","offline"];class _x extends Sa{constructor(){super(),this.setup=e=>{if(!Di&&window.addEventListener){const t=()=>e();return Um.forEach(o=>{window.addEventListener(o,t,!1)}),()=>{Um.forEach(o=>{window.removeEventListener(o,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(o=>{typeof o=="boolean"?this.setOnline(o):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Ac=new _x;function kx(n){return Math.min(1e3*2**n,3e4)}function Xc(n){return(n??"online")==="online"?Ac.isOnline():!0}class hb{constructor(e){this.revert=e?.revert,this.silent=e?.silent}}function gc(n){return n instanceof hb}function mb(n){let e=!1,t=0,o=!1,s,i,c;const u=new Promise((_,O)=>{i=_,c=O}),f=_=>{o||(v(new hb(_)),n.abort==null||n.abort())},m=()=>{e=!0},p=()=>{e=!1},g=()=>!jc.isFocused()||n.networkMode!=="always"&&!Ac.isOnline(),b=_=>{o||(o=!0,n.onSuccess==null||n.onSuccess(_),s?.(),i(_))},v=_=>{o||(o=!0,n.onError==null||n.onError(_),s?.(),c(_))},w=()=>new Promise(_=>{s=O=>{const D=o||!g();return D&&_(O),D},n.onPause==null||n.onPause()}).then(()=>{s=void 0,o||n.onContinue==null||n.onContinue()}),S=()=>{if(o)return;let _;try{_=n.fn()}catch(O){_=Promise.reject(O)}Promise.resolve(_).then(b).catch(O=>{var D,M;if(o)return;const W=(D=n.retry)!=null?D:3,X=(M=n.retryDelay)!=null?M:kx,N=typeof X=="function"?X(t,O):X,I=W===!0||typeof W=="number"&&t<W||typeof W=="function"&&W(t,O);if(e||!I){v(O);return}t++,n.onFail==null||n.onFail(t,O),pb(N).then(()=>{if(g())return w()}).then(()=>{e?v(O):S()})})};return Xc(n.networkMode)?S():w().then(S),{promise:u,cancel:f,continue:()=>s?.()?u:Promise.resolve(),cancelRetry:m,continueRetry:p}}const Kf=console;function Rx(){let n=[],e=0,t=p=>{p()},o=p=>{p()};const s=p=>{let g;e++;try{g=p()}finally{e--,e||u()}return g},i=p=>{e?n.push(p):$m(()=>{t(p)})},c=p=>(...g)=>{i(()=>{p(...g)})},u=()=>{const p=n;n=[],p.length&&$m(()=>{o(()=>{p.forEach(g=>{t(g)})})})};return{batch:s,batchCalls:c,schedule:i,setNotifyFunction:p=>{t=p},setBatchNotifyFunction:p=>{o=p}}}const zt=Rx();class gb{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nf(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Di?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Ox extends gb{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Kf,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||jx(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,t){const o=of(this.state.data,e,this.options);return this.dispatch({data:o,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),o}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const o=this.promise;return(t=this.retryer)==null||t.cancel(e),o?o.then(nr).catch(nr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ub(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(o=>o.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const t=this.observers.find(o=>o.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var o,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return(i=this.retryer)==null||i.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(w=>w.options.queryFn);v&&this.setOptions(v.options)}const c=Sx(),u={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},f=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>{if(c)return this.abortSignalConsumed=!0,c.signal}})};f(u);const m=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(u)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),p={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:m};if(f(p),(o=this.options.behavior)==null||o.onFetch(p),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=p.fetchOptions)==null?void 0:s.meta)){var g;this.dispatch({type:"fetch",meta:(g=p.fetchOptions)==null?void 0:g.meta})}const b=v=>{if(gc(v)&&v.silent||this.dispatch({type:"error",error:v}),!gc(v)){var w,S,_,O;(w=(S=this.cache.config).onError)==null||w.call(S,v,this),(_=(O=this.cache.config).onSettled)==null||_.call(O,this.state.data,v,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=mb({fn:p.fetchFn,abort:c?.abort.bind(c),onSuccess:v=>{var w,S,_,O;if(typeof v>"u"){b(new Error(this.queryHash+" data is undefined"));return}this.setData(v),(w=(S=this.cache.config).onSuccess)==null||w.call(S,v,this),(_=(O=this.cache.config).onSettled)==null||_.call(O,v,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:b,onFail:(v,w)=>{this.dispatch({type:"failed",failureCount:v,error:w})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const t=o=>{var s,i;switch(e.type){case"failed":return{...o,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:Xc(this.options.networkMode)?"fetching":"paused",...!o.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...o,data:e.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const c=e.error;return gc(c)&&c.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...o,error:c,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...e.state}}};this.state=t(this.state),zt.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function jx(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=typeof e<"u",o=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"loading",fetchStatus:"idle"}}class Ax extends Sa{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,o){var s;const i=t.queryKey,c=(s=t.queryHash)!=null?s:Qf(i,t);let u=this.get(c);return u||(u=new Ox({cache:this,logger:e.getLogger(),queryKey:i,queryHash:c,options:e.defaultQueryOptions(t),state:o,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(o=>o!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){zt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[o]=Lo(e,t);return typeof o.exact>"u"&&(o.exact=!0),this.queries.find(s=>Mm(o,s))}findAll(e,t){const[o]=Lo(e,t);return Object.keys(o).length>0?this.queries.filter(s=>Mm(o,s)):this.queries}notify(e){zt.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){zt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){zt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class Ix extends gb{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Kf,this.observers=[],this.state=e.state||yb(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return(e=(t=this.retryer)==null?void 0:t.continue())!=null?e:this.execute()}async execute(){const e=()=>{var I;return this.retryer=mb({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(P,$)=>{this.dispatch({type:"failed",failureCount:P,error:$})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(I=this.options.retry)!=null?I:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t=this.state.status==="loading";try{var o,s,i,c,u,f,m,p;if(!t){var g,b,v,w;this.dispatch({type:"loading",variables:this.options.variables}),await((g=(b=this.mutationCache.config).onMutate)==null?void 0:g.call(b,this.state.variables,this));const P=await((v=(w=this.options).onMutate)==null?void 0:v.call(w,this.state.variables));P!==this.state.context&&this.dispatch({type:"loading",context:P,variables:this.state.variables})}const I=await e();return await((o=(s=this.mutationCache.config).onSuccess)==null?void 0:o.call(s,I,this.state.variables,this.state.context,this)),await((i=(c=this.options).onSuccess)==null?void 0:i.call(c,I,this.state.variables,this.state.context)),await((u=(f=this.mutationCache.config).onSettled)==null?void 0:u.call(f,I,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,I,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:I}),I}catch(I){try{var S,_,O,D,M,W,X,N;throw await((S=(_=this.mutationCache.config).onError)==null?void 0:S.call(_,I,this.state.variables,this.state.context,this)),await((O=(D=this.options).onError)==null?void 0:O.call(D,I,this.state.variables,this.state.context)),await((M=(W=this.mutationCache.config).onSettled)==null?void 0:M.call(W,void 0,I,this.state.variables,this.state.context,this)),await((X=(N=this.options).onSettled)==null?void 0:X.call(N,void 0,I,this.state.variables,this.state.context)),I}finally{this.dispatch({type:"error",error:I})}}}dispatch(e){const t=o=>{switch(e.type){case"failed":return{...o,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"loading":return{...o,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Xc(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...o,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:e.error,failureCount:o.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...o,...e.state}}};this.state=t(this.state),zt.batch(()=>{this.observers.forEach(o=>{o.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function yb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Px extends Sa{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,o){const s=new Ix({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:o,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){zt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(t=>Bm(e,t))}findAll(e){return this.mutations.filter(t=>Bm(e,t))}notify(e){zt.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const t=this.mutations.filter(o=>o.state.isPaused);return zt.batch(()=>t.reduce((o,s)=>o.then(()=>s.continue().catch(nr)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function Nx(){return{onFetch:n=>{n.fetchFn=()=>{var e,t,o,s,i,c;const u=(e=n.fetchOptions)==null||(t=e.meta)==null?void 0:t.refetchPage,f=(o=n.fetchOptions)==null||(s=o.meta)==null?void 0:s.fetchMore,m=f?.pageParam,p=f?.direction==="forward",g=f?.direction==="backward",b=((i=n.state.data)==null?void 0:i.pages)||[],v=((c=n.state.data)==null?void 0:c.pageParams)||[];let w=v,S=!1;const _=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>{var I;if((I=n.signal)!=null&&I.aborted)S=!0;else{var P;(P=n.signal)==null||P.addEventListener("abort",()=>{S=!0})}return n.signal}})},O=n.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+n.options.queryHash+"'")),D=(N,I,P,$)=>(w=$?[I,...w]:[...w,I],$?[P,...N]:[...N,P]),M=(N,I,P,$)=>{if(S)return Promise.reject("Cancelled");if(typeof P>"u"&&!I&&N.length)return Promise.resolve(N);const ue={queryKey:n.queryKey,pageParam:P,meta:n.options.meta};_(ue);const he=O(ue);return Promise.resolve(he).then(ye=>D(N,P,ye,$))};let W;if(!b.length)W=M([]);else if(p){const N=typeof m<"u",I=N?m:qm(n.options,b);W=M(b,N,I)}else if(g){const N=typeof m<"u",I=N?m:Lx(n.options,b);W=M(b,N,I,!0)}else{w=[];const N=typeof n.options.getNextPageParam>"u";W=(u&&b[0]?u(b[0],0,b):!0)?M([],N,v[0]):Promise.resolve(D([],v[0],b[0]));for(let P=1;P<b.length;P++)W=W.then($=>{if(u&&b[P]?u(b[P],P,b):!0){const he=N?v[P]:qm(n.options,$);return M($,N,he)}return Promise.resolve(D($,v[P],b[P]))})}return W.then(N=>({pages:N,pageParams:w}))}}}}function qm(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function Lx(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}class Dx{constructor(e={}){this.queryCache=e.queryCache||new Ax,this.mutationCache=e.mutationCache||new Px,this.logger=e.logger||Kf,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=jc.subscribe(()=>{jc.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Ac.subscribe(()=>{Ac.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(t=this.unsubscribeOnline)==null||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[o]=Lo(e,t);return o.fetchStatus="fetching",this.queryCache.findAll(o).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var o;return(o=this.queryCache.find(e,t))==null?void 0:o.state.data}ensureQueryData(e,t,o){const s=_i(e,t,o),i=this.getQueryData(s.queryKey);return i?Promise.resolve(i):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:o})=>{const s=o.data;return[t,s]})}setQueryData(e,t,o){const s=this.queryCache.find(e),i=s?.state.data,c=xx(t,i);if(typeof c>"u")return;const u=_i(e),f=this.defaultQueryOptions(u);return this.queryCache.build(this,f).setData(c,{...o,manual:!0})}setQueriesData(e,t,o){return zt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,o)]))}getQueryState(e,t){var o;return(o=this.queryCache.find(e,t))==null?void 0:o.state}removeQueries(e,t){const[o]=Lo(e,t),s=this.queryCache;zt.batch(()=>{s.findAll(o).forEach(i=>{s.remove(i)})})}resetQueries(e,t,o){const[s,i]=Lo(e,t,o),c=this.queryCache,u={type:"active",...s};return zt.batch(()=>(c.findAll(s).forEach(f=>{f.reset()}),this.refetchQueries(u,i)))}cancelQueries(e,t,o){const[s,i={}]=Lo(e,t,o);typeof i.revert>"u"&&(i.revert=!0);const c=zt.batch(()=>this.queryCache.findAll(s).map(u=>u.cancel(i)));return Promise.all(c).then(nr).catch(nr)}invalidateQueries(e,t,o){const[s,i]=Lo(e,t,o);return zt.batch(()=>{var c,u;if(this.queryCache.findAll(s).forEach(m=>{m.invalidate()}),s.refetchType==="none")return Promise.resolve();const f={...s,type:(c=(u=s.refetchType)!=null?u:s.type)!=null?c:"active"};return this.refetchQueries(f,i)})}refetchQueries(e,t,o){const[s,i]=Lo(e,t,o),c=zt.batch(()=>this.queryCache.findAll(s).filter(f=>!f.isDisabled()).map(f=>{var m;return f.fetch(void 0,{...i,cancelRefetch:(m=i?.cancelRefetch)!=null?m:!0,meta:{refetchPage:s.refetchPage}})}));let u=Promise.all(c).then(nr);return i!=null&&i.throwOnError||(u=u.catch(nr)),u}fetchQuery(e,t,o){const s=_i(e,t,o),i=this.defaultQueryOptions(s);typeof i.retry>"u"&&(i.retry=!1);const c=this.queryCache.build(this,i);return c.isStaleByTime(i.staleTime)?c.fetch(i):Promise.resolve(c.state.data)}prefetchQuery(e,t,o){return this.fetchQuery(e,t,o).then(nr).catch(nr)}fetchInfiniteQuery(e,t,o){const s=_i(e,t,o);return s.behavior=Nx(),this.fetchQuery(s)}prefetchInfiniteQuery(e,t,o){return this.fetchInfiniteQuery(e,t,o).then(nr).catch(nr)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const o=this.queryDefaults.find(s=>ma(e)===ma(s.queryKey));o?o.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(o=>Rc(e,o.queryKey));return t?.defaultOptions}setMutationDefaults(e,t){const o=this.mutationDefaults.find(s=>ma(e)===ma(s.mutationKey));o?o.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(o=>Rc(e,o.mutationKey));return t?.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(e?.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=Qf(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.useErrorBoundary>"u"&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e?.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class bb extends Sa{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Hm(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return af(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return af(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const o=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Oc(o,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();const i=this.hasListeners();i&&Vm(this.currentQuery,s,this.options,o)&&this.executeFetch(),this.updateResult(t),i&&(this.currentQuery!==s||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();const c=this.computeRefetchInterval();i&&(this.currentQuery!==s||this.options.enabled!==o.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),o=this.createResult(t,e);return Bx(this,o,e)&&(this.currentResult=o,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),o}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(o=>{Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(o),e[o])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),o=this.client.getQueryCache().build(this.client,t);return o.isFetchingOptimistic=!0,o.fetch().then(()=>this.createResult(o,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(nr)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),Di||this.currentResult.isStale||!nf(this.options.staleTime))return;const t=ub(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Di||this.options.enabled===!1||!nf(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||jc.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const o=this.currentQuery,s=this.options,i=this.currentResult,c=this.currentResultState,u=this.currentResultOptions,f=e!==o,m=f?e.state:this.currentQueryInitialState,p=f?this.currentResult:this.previousQueryResult,{state:g}=e;let{dataUpdatedAt:b,error:v,errorUpdatedAt:w,fetchStatus:S,status:_}=g,O=!1,D=!1,M;if(t._optimisticResults){const P=this.hasListeners(),$=!P&&Hm(e,t),ue=P&&Vm(e,o,t,s);($||ue)&&(S=Xc(e.options.networkMode)?"fetching":"paused",b||(_="loading")),t._optimisticResults==="isRestoring"&&(S="idle")}if(t.keepPreviousData&&!g.dataUpdatedAt&&p!=null&&p.isSuccess&&_!=="error")M=p.data,b=p.dataUpdatedAt,_=p.status,O=!0;else if(t.select&&typeof g.data<"u")if(i&&g.data===c?.data&&t.select===this.selectFn)M=this.selectResult;else try{this.selectFn=t.select,M=t.select(g.data),M=of(i?.data,M,t),this.selectResult=M,this.selectError=null}catch(P){this.selectError=P}else M=g.data;if(typeof t.placeholderData<"u"&&typeof M>"u"&&_==="loading"){let P;if(i!=null&&i.isPlaceholderData&&t.placeholderData===u?.placeholderData)P=i.data;else if(P=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof P<"u")try{P=t.select(P),this.selectError=null}catch($){this.selectError=$}typeof P<"u"&&(_="success",M=of(i?.data,P,t),D=!0)}this.selectError&&(v=this.selectError,M=this.selectResult,w=Date.now(),_="error");const W=S==="fetching",X=_==="loading",N=_==="error";return{status:_,fetchStatus:S,isLoading:X,isSuccess:_==="success",isError:N,isInitialLoading:X&&W,data:M,dataUpdatedAt:b,error:v,errorUpdatedAt:w,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>m.dataUpdateCount||g.errorUpdateCount>m.errorUpdateCount,isFetching:W,isRefetching:W&&!X,isLoadingError:N&&g.dataUpdatedAt===0,isPaused:S==="paused",isPlaceholderData:D,isPreviousData:O,isRefetchError:N&&g.dataUpdatedAt!==0,isStale:Xf(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,o=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Oc(o,t))return;this.currentResult=o;const s={cache:!0},i=()=>{if(!t)return!0;const{notifyOnChangeProps:c}=this.options,u=typeof c=="function"?c():c;if(u==="all"||!u&&!this.trackedProps.size)return!0;const f=new Set(u??this.trackedProps);return this.options.useErrorBoundary&&f.add("error"),Object.keys(this.currentResult).some(m=>{const p=m;return this.currentResult[p]!==t[p]&&f.has(p)})};e?.listeners!==!1&&i()&&(s.listeners=!0),this.notify({...s,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!gc(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){zt.batch(()=>{if(e.onSuccess){var t,o,s,i;(t=(o=this.options).onSuccess)==null||t.call(o,this.currentResult.data),(s=(i=this.options).onSettled)==null||s.call(i,this.currentResult.data,null)}else if(e.onError){var c,u,f,m;(c=(u=this.options).onError)==null||c.call(u,this.currentResult.error),(f=(m=this.options).onSettled)==null||f.call(m,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Mx(n,e){return e.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Hm(n,e){return Mx(n,e)||n.state.dataUpdatedAt>0&&af(n,e,e.refetchOnMount)}function af(n,e,t){if(e.enabled!==!1){const o=typeof t=="function"?t(n):t;return o==="always"||o!==!1&&Xf(n,e)}return!1}function Vm(n,e,t,o){return t.enabled!==!1&&(n!==e||o.enabled===!1)&&(!t.suspense||n.state.status!=="error")&&Xf(n,t)}function Xf(n,e){return n.isStaleByTime(e.staleTime)}function Bx(n,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:!Oc(n.getCurrentResult(),e)}class zx extends Sa{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,t){this.queries=e,zt.batch(()=>{const o=this.observers,s=this.findMatchingObservers(this.queries);s.forEach(m=>m.observer.setOptions(m.defaultedQueryOptions,t));const i=s.map(m=>m.observer),c=Object.fromEntries(i.map(m=>[m.options.queryHash,m])),u=i.map(m=>m.getCurrentResult()),f=i.some((m,p)=>m!==o[p]);o.length===i.length&&!f||(this.observers=i,this.observersMap=c,this.result=u,this.hasListeners()&&(Dm(o,i).forEach(m=>{m.destroy()}),Dm(i,o).forEach(m=>{m.subscribe(p=>{this.onUpdate(m,p)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions))}findMatchingObservers(e){const t=this.observers,o=new Map(t.map(v=>[v.options.queryHash,v])),s=e.map(v=>this.client.defaultQueryOptions(v)),i=s.flatMap(v=>{const w=o.get(v.queryHash);return w!=null?[{defaultedQueryOptions:v,observer:w}]:[]}),c=new Set(i.map(v=>v.defaultedQueryOptions.queryHash)),u=s.filter(v=>!c.has(v.queryHash)),f=new Set(i.map(v=>v.observer)),m=t.filter(v=>!f.has(v)),p=v=>{const w=this.client.defaultQueryOptions(v),S=this.observersMap[w.queryHash];return S??new bb(this.client,w)},g=u.map((v,w)=>{if(v.keepPreviousData){const S=m[w];if(S!==void 0)return{defaultedQueryOptions:v,observer:S}}return{defaultedQueryOptions:v,observer:p(v)}}),b=(v,w)=>s.indexOf(v.defaultedQueryOptions)-s.indexOf(w.defaultedQueryOptions);return i.concat(g).sort(b)}onUpdate(e,t){const o=this.observers.indexOf(e);o!==-1&&(this.result=Cx(this.result,o,t),this.notify())}notify(){zt.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}let Fx=class extends Sa{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const o=this.options;this.options=this.client.defaultMutationOptions(e),Oc(o,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:yb(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){zt.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,o,s,i;(t=(o=this.mutateOptions).onSuccess)==null||t.call(o,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(i=this.mutateOptions).onSettled)==null||s.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var c,u,f,m;(c=(u=this.mutateOptions).onError)==null||c.call(u,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(f=(m=this.mutateOptions).onSettled)==null||f.call(m,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)})})}};function $x(n){return{mutationKey:n.options.mutationKey,state:n.state}}function Ux(n){return{state:n.state,queryKey:n.queryKey,queryHash:n.queryHash}}function qx(n){return n.state.isPaused}function vb(n){return n.state.status==="success"}function Hx(n,e={}){const t=[],o=[];if(e.dehydrateMutations!==!1){const s=e.shouldDehydrateMutation||qx;n.getMutationCache().getAll().forEach(i=>{s(i)&&t.push($x(i))})}if(e.dehydrateQueries!==!1){const s=e.shouldDehydrateQuery||vb;n.getQueryCache().getAll().forEach(i=>{s(i)&&o.push(Ux(i))})}return{mutations:t,queries:o}}function Vx(n,e,t){if(typeof e!="object"||e===null)return;const o=n.getMutationCache(),s=n.getQueryCache(),i=e.mutations||[],c=e.queries||[];i.forEach(u=>{var f;o.build(n,{...t==null||(f=t.defaultOptions)==null?void 0:f.mutations,mutationKey:u.mutationKey},u.state)}),c.forEach(({queryKey:u,state:f,queryHash:m})=>{var p;const g=s.get(m);if(g){if(g.state.dataUpdatedAt<f.dataUpdatedAt){const{fetchStatus:b,...v}=f;g.setState(v)}return}s.build(n,{...t==null||(p=t.defaultOptions)==null?void 0:p.queries,queryKey:u,queryHash:m},{...f,fetchStatus:"idle"})})}var wb={exports:{}},xb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=window.React;function Wx(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Qx=typeof Object.is=="function"?Object.is:Wx,Kx=bs.useState,Xx=bs.useEffect,Gx=bs.useLayoutEffect,Yx=bs.useDebugValue;function Zx(n,e){var t=e(),o=Kx({inst:{value:t,getSnapshot:e}}),s=o[0].inst,i=o[1];return Gx(function(){s.value=t,s.getSnapshot=e,Sd(s)&&i({inst:s})},[n,t,e]),Xx(function(){return Sd(s)&&i({inst:s}),n(function(){Sd(s)&&i({inst:s})})},[n]),Yx(t),t}function Sd(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Qx(n,t)}catch{return!0}}function Jx(n,e){return e()}var eC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jx:Zx;xb.useSyncExternalStore=bs.useSyncExternalStore!==void 0?bs.useSyncExternalStore:eC;wb.exports=xb;var tC=wb.exports;const Gf=tC.useSyncExternalStore,ga=window.React,Wm=ga.createContext(void 0),Cb=ga.createContext(!1);function Eb(n,e){return n||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Wm),window.ReactQueryClientContext):Wm)}const qo=({context:n}={})=>{const e=ga.useContext(Eb(n,ga.useContext(Cb)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Sb=({client:n,children:e,context:t,contextSharing:o=!1})=>{ga.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]);const s=Eb(t,o);return ga.createElement(Cb.Provider,{value:!t&&o},ga.createElement(s.Provider,{value:n},e))},Tb=window.React,_b=Tb.createContext(!1),kb=()=>Tb.useContext(_b),nC=_b.Provider,Rb=window.React;function rC(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}const oC=Rb.createContext(rC()),Ob=()=>Rb.useContext(oC);function jb(n,e){return typeof n=="function"?n(...e):!!n}const aC=window.React,Ab=(n,e)=>{(n.suspense||n.useErrorBoundary)&&(e.isReset()||(n.retryOnMount=!1))},Ib=n=>{aC.useEffect(()=>{n.clearReset()},[n])},Pb=({result:n,errorResetBoundary:e,useErrorBoundary:t,query:o})=>n.isError&&!e.isReset()&&!n.isFetching&&jb(t,[n.error,o]),Nb=n=>{n.suspense&&typeof n.staleTime!="number"&&(n.staleTime=1e3)},Lb=(n,e)=>n.isLoading&&n.isFetching&&!e,sf=(n,e,t)=>n?.suspense&&Lb(e,t),lf=(n,e,t)=>e.fetchOptimistic(n).then(({data:o})=>{n.onSuccess==null||n.onSuccess(o),n.onSettled==null||n.onSettled(o,null)}).catch(o=>{t.clearReset(),n.onError==null||n.onError(o),n.onSettled==null||n.onSettled(void 0,o)}),Yl=window.React;function Qi({queries:n,context:e}){const t=qo({context:e}),o=kb(),s=Ob(),i=Yl.useMemo(()=>n.map(b=>{const v=t.defaultQueryOptions(b);return v._optimisticResults=o?"isRestoring":"optimistic",v}),[n,t,o]);i.forEach(b=>{Nb(b),Ab(b,s)}),Ib(s);const[c]=Yl.useState(()=>new zx(t,i)),u=c.getOptimisticResult(i);Gf(Yl.useCallback(b=>o?()=>{}:c.subscribe(zt.batchCalls(b)),[c,o]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),Yl.useEffect(()=>{c.setQueries(i,{listeners:!1})},[i,c]);const m=u.some((b,v)=>sf(i[v],b,o))?u.flatMap((b,v)=>{const w=i[v],S=c.getObservers()[v];if(w&&S){if(sf(w,b,o))return lf(w,S,s);Lb(b,o)&&lf(w,S,s)}return[]}):[];if(m.length>0)throw Promise.all(m);const p=c.getQueries(),g=u.find((b,v)=>{var w,S;return Pb({result:b,errorResetBoundary:s,useErrorBoundary:(w=(S=i[v])==null?void 0:S.useErrorBoundary)!=null?w:!1,query:p[v]})});if(g!=null&&g.error)throw g.error;return u}const Td=window.React;function sC(n,e){const t=qo({context:n.context}),o=kb(),s=Ob(),i=t.defaultQueryOptions(n);i._optimisticResults=o?"isRestoring":"optimistic",i.onError&&(i.onError=zt.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=zt.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=zt.batchCalls(i.onSettled)),Nb(i),Ab(i,s),Ib(s);const[c]=Td.useState(()=>new e(t,i)),u=c.getOptimisticResult(i);if(Gf(Td.useCallback(f=>{const m=o?()=>{}:c.subscribe(zt.batchCalls(f));return c.updateResult(),m},[c,o]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),Td.useEffect(()=>{c.setOptions(i,{listeners:!1})},[i,c]),sf(i,u,o))throw lf(i,c,s);if(Pb({result:u,errorResetBoundary:s,useErrorBoundary:i.useErrorBoundary,query:c.getCurrentQuery()}))throw u.error;return i.notifyOnChangeProps?u:c.trackResult(u)}function iC(n,e,t){const o=_i(n,e,t);return sC(o,bb)}const Zl=window.React;function Yf(n,e,t){const o=Ex(n,e,t),s=qo({context:o.context}),[i]=Zl.useState(()=>new Fx(s,o));Zl.useEffect(()=>{i.setOptions(o)},[i,o]);const c=Gf(Zl.useCallback(f=>i.subscribe(zt.batchCalls(f)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=Zl.useCallback((f,m)=>{i.mutate(f,m).catch(lC)},[i]);if(c.error&&jb(i.options.useErrorBoundary,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}function lC(){}const cC=["added","removed","updated"];function Qm(n){return cC.includes(n)}async function uC({queryClient:n,persister:e,maxAge:t=1e3*60*60*24,buster:o="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const c=Date.now()-i.timestamp>t,u=i.buster!==o;c||u?e.removeClient():Vx(n,i.clientState,s)}else e.removeClient()}catch{e.removeClient()}}async function Km({queryClient:n,persister:e,buster:t="",dehydrateOptions:o}){const s={buster:t,timestamp:Date.now(),clientState:Hx(n,o)};await e.persistClient(s)}function dC(n){const e=n.queryClient.getQueryCache().subscribe(o=>{Qm(o.type)&&Km(n)}),t=n.queryClient.getMutationCache().subscribe(o=>{Qm(o.type)&&Km(n)});return()=>{e(),t()}}function cf(){return cf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},cf.apply(this,arguments)}const fa=window.React,fC=({client:n,children:e,persistOptions:t,onSuccess:o,...s})=>{const[i,c]=fa.useState(!0),u=fa.useRef({persistOptions:t,onSuccess:o}),f=fa.useRef(!1);return fa.useEffect(()=>{u.current={persistOptions:t,onSuccess:o}}),fa.useEffect(()=>{const m={...u.current.persistOptions,queryClient:n};return f.current||(f.current=!0,c(!0),uC(m).then(async()=>{try{await(u.current.onSuccess==null?void 0:u.current.onSuccess())}finally{c(!1)}})),i?void 0:dC(m)},[n,i]),fa.createElement(Sb,cf({client:n},s),fa.createElement(nC,{value:i},e))},pC="0.7.21",hC=pC,Zf="zotero-roam-portal",Jf="zotero-roam-slot",Ki=1500,mC="ZOTERO_ROAM",gC=1,ya="REACT_QUERY",uf="REACT_QUERY_CLIENT",yC={artwork:"Illustration",audioRecording:"Recording",bill:"Legislation",blogPost:"Blog post",book:"Book",bookSection:"Chapter",case:"Legal case",computerProgram:"Data",conferencePaper:"Conference paper",dictionaryEntry:"Dictionary entry",document:"Document",email:"Letter",encyclopediaArticle:"Encyclopaedia article",film:"Film",forumPost:"Forum post",hearing:"Hearing",instantMessage:"Instant message",interview:"Interview",journalArticle:"Article",letter:"Letter",magazineArticle:"Magazine article",manuscript:"Manuscript",map:"Image",newspaperArticle:"Newspaper article",patent:"Patent",podcast:"Podcast",preprint:"Preprint",presentation:"Presentation",radioBroadcast:"Radio broadcast",report:"Report",statute:"Legislation",thesis:"Thesis",tvBroadcast:"TV broadcast",videoRecording:"Recording",webpage:"Webpage"},H={DATALIST_ITEM:"zr-datalist--item",DATALIST_PAGINATION:"zr-datalist--pagination",DATALIST_TOOLBAR:"zr-datalist--toolbar",DATALIST_WRAPPER:"zr-datalist--listwrapper",DATE_PICKER:"zr-date-picker",DIVIDER_MINIMAL:"zr-divider-minimal",INPUT_BOX:"zr-input-box",INPUT_DATE_RANGE:"zr-date-range-input",INPUT_TEXT:"zr-text-input",POPOVER:"zr-popover",PREFIX_DIALOG_AUXILIARY:"zr-auxiliary-dialog--",PREFIX_DIALOG_OVERLAY:"zr-dialog-overlay--",PREFIX_DRAWER:"zr-drawer--",TABS:"zr-tabs",TABS_MINIMAL:"zr-tabs-minimal",TEXT_ACCENT_1:"zr-accent-1",TEXT_ACCENT_2:"zr-accent-2",TEXT_AUXILIARY:"zr-auxiliary",TEXT_SECONDARY:"zr-secondary",TEXT_SMALL:"zr-text-small",TRIBUTE:"zr-tribute",TRIBUTE_SELECTED:"zr-tribute--selected",TRIBUTE_DETAILS:"zr-tribute--item-details"},Xm=window.React.useMemo,bC=window.ReactDOM.createPortal,vC=window.Blueprint.Core.Dialog,wC=window.Blueprint.Core.H5,Ho=n=>{const{ariaLabelledBy:e=null,className:t,extraClasses:o=[],isOpen:s,label:i=null,onClose:c,title:u=null}=n,{portalId:f}=fu(),m=Xm(()=>[H.PREFIX_DIALOG_AUXILIARY+t,...o].join(" "),[t,o]),p=Xm(()=>!e&&i?{element:d.jsx(wC,{id:t+"-label",style:{display:"none"},children:i}),id:t+"-label"}:{element:null,id:null},[e,t,i]);return bC(d.jsxs(vC,{"aria-labelledby":e||p.id||void 0,canEscapeKeyClose:!0,canOutsideClickClose:!0,className:m,enforceFocus:!1,isOpen:s,lazy:!0,title:u,usePortal:!1,onClose:c,children:[p.element,n.children]}),document.getElementById(f))},xC=window.Blueprint.Core.Button,CC=window.Blueprint.Core.Callout;function ep({buttonText:n="Go back",error:e,resetErrorBoundary:t=void 0}){return d.jsxs(CC,{intent:"danger",title:e.name,children:[d.jsx("p",{children:e.message}),t!==void 0&&d.jsx(xC,{intent:"danger",onClick:t,outlined:!0,text:n})]})}function Db(n,e){return function(){return n.apply(e,arguments)}}const{toString:EC}=Object.prototype,{getPrototypeOf:tp}=Object,Gc=(n=>e=>{const t=EC.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Cr=n=>(n=n.toLowerCase(),e=>Gc(e)===n),Yc=n=>e=>typeof e===n,{isArray:Es}=Array,Mi=Yc("undefined");function SC(n){return n!==null&&!Mi(n)&&n.constructor!==null&&!Mi(n.constructor)&&rr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Mb=Cr("ArrayBuffer");function TC(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Mb(n.buffer),e}const _C=Yc("string"),rr=Yc("function"),Bb=Yc("number"),Zc=n=>n!==null&&typeof n=="object",kC=n=>n===!0||n===!1,yc=n=>{if(Gc(n)!=="object")return!1;const e=tp(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},RC=Cr("Date"),OC=Cr("File"),jC=Cr("Blob"),AC=Cr("FileList"),IC=n=>Zc(n)&&rr(n.pipe),PC=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||rr(n.append)&&((e=Gc(n))==="formdata"||e==="object"&&rr(n.toString)&&n.toString()==="[object FormData]"))},NC=Cr("URLSearchParams"),[LC,DC,MC,BC]=["ReadableStream","Request","Response","Headers"].map(Cr),zC=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xi(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let o,s;if(typeof n!="object"&&(n=[n]),Es(n))for(o=0,s=n.length;o<s;o++)e.call(null,n[o],o,n);else{const i=t?Object.getOwnPropertyNames(n):Object.keys(n),c=i.length;let u;for(o=0;o<c;o++)u=i[o],e.call(null,n[u],u,n)}}function zb(n,e){e=e.toLowerCase();const t=Object.keys(n);let o=t.length,s;for(;o-- >0;)if(s=t[o],e===s.toLowerCase())return s;return null}const Fb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$b=n=>!Mi(n)&&n!==Fb;function df(){const{caseless:n}=$b(this)&&this||{},e={},t=(o,s)=>{const i=n&&zb(e,s)||s;yc(e[i])&&yc(o)?e[i]=df(e[i],o):yc(o)?e[i]=df({},o):Es(o)?e[i]=o.slice():e[i]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&Xi(arguments[o],t);return e}const FC=(n,e,t,{allOwnKeys:o}={})=>(Xi(e,(s,i)=>{t&&rr(s)?n[i]=Db(s,t):n[i]=s},{allOwnKeys:o}),n),$C=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),UC=(n,e,t,o)=>{n.prototype=Object.create(e.prototype,o),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},qC=(n,e,t,o)=>{let s,i,c;const u={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),i=s.length;i-- >0;)c=s[i],(!o||o(c,n,e))&&!u[c]&&(e[c]=n[c],u[c]=!0);n=t!==!1&&tp(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},HC=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const o=n.indexOf(e,t);return o!==-1&&o===t},VC=n=>{if(!n)return null;if(Es(n))return n;let e=n.length;if(!Bb(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},WC=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&tp(Uint8Array)),QC=(n,e)=>{const o=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=o.next())&&!s.done;){const i=s.value;e.call(n,i[0],i[1])}},KC=(n,e)=>{let t;const o=[];for(;(t=n.exec(e))!==null;)o.push(t);return o},XC=Cr("HTMLFormElement"),GC=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,o,s){return o.toUpperCase()+s}),Gm=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),YC=Cr("RegExp"),Ub=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),o={};Xi(t,(s,i)=>{let c;(c=e(s,i,n))!==!1&&(o[i]=c||s)}),Object.defineProperties(n,o)},ZC=n=>{Ub(n,(e,t)=>{if(rr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const o=n[t];if(rr(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},JC=(n,e)=>{const t={},o=s=>{s.forEach(i=>{t[i]=!0})};return Es(n)?o(n):o(String(n).split(e)),t},eE=()=>{},tE=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,_d="abcdefghijklmnopqrstuvwxyz",Ym="0123456789",qb={DIGIT:Ym,ALPHA:_d,ALPHA_DIGIT:_d+_d.toUpperCase()+Ym},nE=(n=16,e=qb.ALPHA_DIGIT)=>{let t="";const{length:o}=e;for(;n--;)t+=e[Math.random()*o|0];return t};function rE(n){return!!(n&&rr(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const oE=n=>{const e=new Array(10),t=(o,s)=>{if(Zc(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[s]=o;const i=Es(o)?[]:{};return Xi(o,(c,u)=>{const f=t(c,s+1);!Mi(f)&&(i[u]=f)}),e[s]=void 0,i}}return o};return t(n,0)},aE=Cr("AsyncFunction"),sE=n=>n&&(Zc(n)||rr(n))&&rr(n.then)&&rr(n.catch),te={isArray:Es,isArrayBuffer:Mb,isBuffer:SC,isFormData:PC,isArrayBufferView:TC,isString:_C,isNumber:Bb,isBoolean:kC,isObject:Zc,isPlainObject:yc,isReadableStream:LC,isRequest:DC,isResponse:MC,isHeaders:BC,isUndefined:Mi,isDate:RC,isFile:OC,isBlob:jC,isRegExp:YC,isFunction:rr,isStream:IC,isURLSearchParams:NC,isTypedArray:WC,isFileList:AC,forEach:Xi,merge:df,extend:FC,trim:zC,stripBOM:$C,inherits:UC,toFlatObject:qC,kindOf:Gc,kindOfTest:Cr,endsWith:HC,toArray:VC,forEachEntry:QC,matchAll:KC,isHTMLForm:XC,hasOwnProperty:Gm,hasOwnProp:Gm,reduceDescriptors:Ub,freezeMethods:ZC,toObjectSet:JC,toCamelCase:GC,noop:eE,toFiniteNumber:tE,findKey:zb,global:Fb,isContextDefined:$b,ALPHABET:qb,generateString:nE,isSpecCompliantForm:rE,toJSONObject:oE,isAsyncFn:aE,isThenable:sE};function ot(n,e,t,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),o&&(this.request=o),s&&(this.response=s)}te.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Hb=ot.prototype,Vb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Vb[n]={value:n}});Object.defineProperties(ot,Vb);Object.defineProperty(Hb,"isAxiosError",{value:!0});ot.from=(n,e,t,o,s,i)=>{const c=Object.create(Hb);return te.toFlatObject(n,c,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),ot.call(c,n.message,e,t,o,s),c.cause=n,c.name=n.name,i&&Object.assign(c,i),c};const iE=null;function ff(n){return te.isPlainObject(n)||te.isArray(n)}function Wb(n){return te.endsWith(n,"[]")?n.slice(0,-2):n}function Zm(n,e,t){return n?n.concat(e).map(function(s,i){return s=Wb(s),!t&&i?"["+s+"]":s}).join(t?".":""):e}function lE(n){return te.isArray(n)&&!n.some(ff)}const cE=te.toFlatObject(te,{},null,function(e){return/^is[A-Z]/.test(e)});function Jc(n,e,t){if(!te.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=te.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,_){return!te.isUndefined(_[S])});const o=t.metaTokens,s=t.visitor||p,i=t.dots,c=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(e);if(!te.isFunction(s))throw new TypeError("visitor must be a function");function m(w){if(w===null)return"";if(te.isDate(w))return w.toISOString();if(!f&&te.isBlob(w))throw new ot("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(w)||te.isTypedArray(w)?f&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,S,_){let O=w;if(w&&!_&&typeof w=="object"){if(te.endsWith(S,"{}"))S=o?S:S.slice(0,-2),w=JSON.stringify(w);else if(te.isArray(w)&&lE(w)||(te.isFileList(w)||te.endsWith(S,"[]"))&&(O=te.toArray(w)))return S=Wb(S),O.forEach(function(M,W){!(te.isUndefined(M)||M===null)&&e.append(c===!0?Zm([S],W,i):c===null?S:S+"[]",m(M))}),!1}return ff(w)?!0:(e.append(Zm(_,S,i),m(w)),!1)}const g=[],b=Object.assign(cE,{defaultVisitor:p,convertValue:m,isVisitable:ff});function v(w,S){if(!te.isUndefined(w)){if(g.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));g.push(w),te.forEach(w,function(O,D){(!(te.isUndefined(O)||O===null)&&s.call(e,O,te.isString(D)?D.trim():D,S,b))===!0&&v(O,S?S.concat(D):[D])}),g.pop()}}if(!te.isObject(n))throw new TypeError("data must be an object");return v(n),e}function Jm(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function np(n,e){this._pairs=[],n&&Jc(n,this,e)}const Qb=np.prototype;Qb.append=function(e,t){this._pairs.push([e,t])};Qb.toString=function(e){const t=e?function(o){return e.call(this,o,Jm)}:Jm;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function uE(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kb(n,e,t){if(!e)return n;const o=t&&t.encode||uE,s=t&&t.serialize;let i;if(s?i=s(e,t):i=te.isURLSearchParams(e)?e.toString():new np(e,t).toString(o),i){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class eg{constructor(){this.handlers=[]}use(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){te.forEach(this.handlers,function(o){o!==null&&e(o)})}}const Xb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dE=typeof URLSearchParams<"u"?URLSearchParams:np,fE=typeof FormData<"u"?FormData:null,pE=typeof Blob<"u"?Blob:null,hE={isBrowser:!0,classes:{URLSearchParams:dE,FormData:fE,Blob:pE},protocols:["http","https","file","blob","url","data"]},rp=typeof window<"u"&&typeof document<"u",mE=(n=>rp&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),gE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yE=rp&&window.location.href||"http://localhost",bE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rp,hasStandardBrowserEnv:mE,hasStandardBrowserWebWorkerEnv:gE,origin:yE},Symbol.toStringTag,{value:"Module"})),vr={...bE,...hE};function vE(n,e){return Jc(n,new vr.classes.URLSearchParams,Object.assign({visitor:function(t,o,s,i){return vr.isNode&&te.isBuffer(t)?(this.append(o,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function wE(n){return te.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function xE(n){const e={},t=Object.keys(n);let o;const s=t.length;let i;for(o=0;o<s;o++)i=t[o],e[i]=n[i];return e}function Gb(n){function e(t,o,s,i){let c=t[i++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),f=i>=t.length;return c=!c&&te.isArray(s)?s.length:c,f?(te.hasOwnProp(s,c)?s[c]=[s[c],o]:s[c]=o,!u):((!s[c]||!te.isObject(s[c]))&&(s[c]=[]),e(t,o,s[c],i)&&te.isArray(s[c])&&(s[c]=xE(s[c])),!u)}if(te.isFormData(n)&&te.isFunction(n.entries)){const t={};return te.forEachEntry(n,(o,s)=>{e(wE(o),s,t,0)}),t}return null}function CE(n,e,t){if(te.isString(n))try{return(e||JSON.parse)(n),te.trim(n)}catch(o){if(o.name!=="SyntaxError")throw o}return(t||JSON.stringify)(n)}const op={transitional:Xb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const o=t.getContentType()||"",s=o.indexOf("application/json")>-1,i=te.isObject(e);if(i&&te.isHTMLForm(e)&&(e=new FormData(e)),te.isFormData(e))return s?JSON.stringify(Gb(e)):e;if(te.isArrayBuffer(e)||te.isBuffer(e)||te.isStream(e)||te.isFile(e)||te.isBlob(e)||te.isReadableStream(e))return e;if(te.isArrayBufferView(e))return e.buffer;if(te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return vE(e,this.formSerializer).toString();if((u=te.isFileList(e))||o.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Jc(u?{"files[]":e}:e,f&&new f,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),CE(e)):e}],transformResponse:[function(e){const t=this.transitional||op.transitional,o=t&&t.forcedJSONParsing,s=this.responseType==="json";if(te.isResponse(e)||te.isReadableStream(e))return e;if(e&&te.isString(e)&&(o&&!this.responseType||s)){const c=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?ot.from(u,ot.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vr.classes.FormData,Blob:vr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],n=>{op.headers[n]={}});const ap=op,EE=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SE=n=>{const e={};let t,o,s;return n&&n.split(`
`).forEach(function(c){s=c.indexOf(":"),t=c.substring(0,s).trim().toLowerCase(),o=c.substring(s+1).trim(),!(!t||e[t]&&EE[t])&&(t==="set-cookie"?e[t]?e[t].push(o):e[t]=[o]:e[t]=e[t]?e[t]+", "+o:o)}),e},tg=Symbol("internals");function wi(n){return n&&String(n).trim().toLowerCase()}function bc(n){return n===!1||n==null?n:te.isArray(n)?n.map(bc):String(n)}function TE(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=t.exec(n);)e[o[1]]=o[2];return e}const _E=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function kd(n,e,t,o,s){if(te.isFunction(o))return o.call(this,e,t);if(s&&(e=t),!!te.isString(e)){if(te.isString(o))return e.indexOf(o)!==-1;if(te.isRegExp(o))return o.test(e)}}function kE(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,o)=>t.toUpperCase()+o)}function RE(n,e){const t=te.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(n,o+t,{value:function(s,i,c){return this[o].call(this,e,s,i,c)},configurable:!0})})}let eu=class{constructor(e){e&&this.set(e)}set(e,t,o){const s=this;function i(u,f,m){const p=wi(f);if(!p)throw new Error("header name must be a non-empty string");const g=te.findKey(s,p);(!g||s[g]===void 0||m===!0||m===void 0&&s[g]!==!1)&&(s[g||f]=bc(u))}const c=(u,f)=>te.forEach(u,(m,p)=>i(m,p,f));if(te.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(te.isString(e)&&(e=e.trim())&&!_E(e))c(SE(e),t);else if(te.isHeaders(e))for(const[u,f]of e.entries())i(f,u,o);else e!=null&&i(t,e,o);return this}get(e,t){if(e=wi(e),e){const o=te.findKey(this,e);if(o){const s=this[o];if(!t)return s;if(t===!0)return TE(s);if(te.isFunction(t))return t.call(this,s,o);if(te.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wi(e),e){const o=te.findKey(this,e);return!!(o&&this[o]!==void 0&&(!t||kd(this,this[o],o,t)))}return!1}delete(e,t){const o=this;let s=!1;function i(c){if(c=wi(c),c){const u=te.findKey(o,c);u&&(!t||kd(o,o[u],u,t))&&(delete o[u],s=!0)}}return te.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let o=t.length,s=!1;for(;o--;){const i=t[o];(!e||kd(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const t=this,o={};return te.forEach(this,(s,i)=>{const c=te.findKey(o,i);if(c){t[c]=bc(s),delete t[i];return}const u=e?kE(i):String(i).trim();u!==i&&delete t[i],t[u]=bc(s),o[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return te.forEach(this,(o,s)=>{o!=null&&o!==!1&&(t[s]=e&&te.isArray(o)?o.join(", "):o)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const o=new this(e);return t.forEach(s=>o.set(s)),o}static accessor(e){const o=(this[tg]=this[tg]={accessors:{}}).accessors,s=this.prototype;function i(c){const u=wi(c);o[u]||(RE(s,c),o[u]=!0)}return te.isArray(e)?e.forEach(i):i(e),this}};eu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.reduceDescriptors(eu.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(o){this[t]=o}}});te.freezeMethods(eu);const wr=eu;function Rd(n,e){const t=this||ap,o=e||t,s=wr.from(o.headers);let i=o.data;return te.forEach(n,function(u){i=u.call(t,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Yb(n){return!!(n&&n.__CANCEL__)}function Ss(n,e,t){ot.call(this,n??"canceled",ot.ERR_CANCELED,e,t),this.name="CanceledError"}te.inherits(Ss,ot,{__CANCEL__:!0});function Zb(n,e,t){const o=t.config.validateStatus;!t.status||!o||o(t.status)?n(t):e(new ot("Request failed with status code "+t.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function OE(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function jE(n,e){n=n||10;const t=new Array(n),o=new Array(n);let s=0,i=0,c;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),p=o[i];c||(c=m),t[s]=f,o[s]=m;let g=i,b=0;for(;g!==s;)b+=t[g++],g=g%n;if(s=(s+1)%n,s===i&&(i=(i+1)%n),m-c<e)return;const v=p&&m-p;return v?Math.round(b*1e3/v):void 0}}function AE(n,e){let t=0;const o=1e3/e;let s=null;return function(){const c=this===!0,u=Date.now();if(c||u-t>o)return s&&(clearTimeout(s),s=null),t=u,n.apply(null,arguments);s||(s=setTimeout(()=>(s=null,t=Date.now(),n.apply(null,arguments)),o-(u-t)))}}const Ic=(n,e,t=3)=>{let o=0;const s=jE(50,250);return AE(i=>{const c=i.loaded,u=i.lengthComputable?i.total:void 0,f=c-o,m=s(f),p=c<=u;o=c;const g={loaded:c,total:u,progress:u?c/u:void 0,bytes:f,rate:m||void 0,estimated:m&&u&&p?(u-c)/m:void 0,event:i,lengthComputable:u!=null};g[e?"download":"upload"]=!0,n(g)},t)},IE=vr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let o;function s(i){let c=i;return e&&(t.setAttribute("href",c),c=t.href),t.setAttribute("href",c),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return o=s(window.location.href),function(c){const u=te.isString(c)?s(c):c;return u.protocol===o.protocol&&u.host===o.host}}():function(){return function(){return!0}}(),PE=vr.hasStandardBrowserEnv?{write(n,e,t,o,s,i){const c=[n+"="+encodeURIComponent(e)];te.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),te.isString(o)&&c.push("path="+o),te.isString(s)&&c.push("domain="+s),i===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function NE(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function LE(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Jb(n,e){return n&&!NE(e)?LE(n,e):e}const ng=n=>n instanceof wr?{...n}:n;function xa(n,e){e=e||{};const t={};function o(m,p,g){return te.isPlainObject(m)&&te.isPlainObject(p)?te.merge.call({caseless:g},m,p):te.isPlainObject(p)?te.merge({},p):te.isArray(p)?p.slice():p}function s(m,p,g){if(te.isUndefined(p)){if(!te.isUndefined(m))return o(void 0,m,g)}else return o(m,p,g)}function i(m,p){if(!te.isUndefined(p))return o(void 0,p)}function c(m,p){if(te.isUndefined(p)){if(!te.isUndefined(m))return o(void 0,m)}else return o(void 0,p)}function u(m,p,g){if(g in e)return o(m,p);if(g in n)return o(void 0,m)}const f={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(m,p)=>s(ng(m),ng(p),!0)};return te.forEach(Object.keys(Object.assign({},n,e)),function(p){const g=f[p]||s,b=g(n[p],e[p],p);te.isUndefined(b)&&g!==u||(t[p]=b)}),t}const ev=n=>{const e=xa({},n);let{data:t,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:i,headers:c,auth:u}=e;e.headers=c=wr.from(c),e.url=Kb(Jb(e.baseURL,e.url),n.params,n.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(te.isFormData(t)){if(vr.hasStandardBrowserEnv||vr.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[m,...p]=f?f.split(";").map(g=>g.trim()).filter(Boolean):[];c.setContentType([m||"multipart/form-data",...p].join("; "))}}if(vr.hasStandardBrowserEnv&&(o&&te.isFunction(o)&&(o=o(e)),o||o!==!1&&IE(e.url))){const m=s&&i&&PE.read(i);m&&c.set(s,m)}return e},DE=typeof XMLHttpRequest<"u",ME=DE&&function(n){return new Promise(function(t,o){const s=ev(n);let i=s.data;const c=wr.from(s.headers).normalize();let{responseType:u}=s,f;function m(){s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let p=new XMLHttpRequest;p.open(s.method.toUpperCase(),s.url,!0),p.timeout=s.timeout;function g(){if(!p)return;const v=wr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),S={data:!u||u==="text"||u==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:v,config:n,request:p};Zb(function(O){t(O),m()},function(O){o(O),m()},S),p=null}"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(g)},p.onabort=function(){p&&(o(new ot("Request aborted",ot.ECONNABORTED,s,p)),p=null)},p.onerror=function(){o(new ot("Network Error",ot.ERR_NETWORK,s,p)),p=null},p.ontimeout=function(){let w=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||Xb;s.timeoutErrorMessage&&(w=s.timeoutErrorMessage),o(new ot(w,S.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,s,p)),p=null},i===void 0&&c.setContentType(null),"setRequestHeader"in p&&te.forEach(c.toJSON(),function(w,S){p.setRequestHeader(S,w)}),te.isUndefined(s.withCredentials)||(p.withCredentials=!!s.withCredentials),u&&u!=="json"&&(p.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&p.addEventListener("progress",Ic(s.onDownloadProgress,!0)),typeof s.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",Ic(s.onUploadProgress)),(s.cancelToken||s.signal)&&(f=v=>{p&&(o(!v||v.type?new Ss(null,n,p):v),p.abort(),p=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const b=OE(s.url);if(b&&vr.protocols.indexOf(b)===-1){o(new ot("Unsupported protocol "+b+":",ot.ERR_BAD_REQUEST,n));return}p.send(i||null)})},BE=(n,e)=>{let t=new AbortController,o;const s=function(f){if(!o){o=!0,c();const m=f instanceof Error?f:this.reason;t.abort(m instanceof ot?m:new Ss(m instanceof Error?m.message:m))}};let i=e&&setTimeout(()=>{s(new ot(`timeout ${e} of ms exceeded`,ot.ETIMEDOUT))},e);const c=()=>{n&&(i&&clearTimeout(i),i=null,n.forEach(f=>{f&&(f.removeEventListener?f.removeEventListener("abort",s):f.unsubscribe(s))}),n=null)};n.forEach(f=>f&&f.addEventListener&&f.addEventListener("abort",s));const{signal:u}=t;return u.unsubscribe=c,[u,()=>{i&&clearTimeout(i),i=null}]},zE=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let o=0,s;for(;o<t;)s=o+e,yield n.slice(o,s),o=s},FE=async function*(n,e,t){for await(const o of n)yield*zE(ArrayBuffer.isView(o)?o:await t(String(o)),e)},rg=(n,e,t,o,s)=>{const i=FE(n,e,s);let c=0;return new ReadableStream({type:"bytes",async pull(u){const{done:f,value:m}=await i.next();if(f){u.close(),o();return}let p=m.byteLength;t&&t(c+=p),u.enqueue(new Uint8Array(m))},cancel(u){return o(u),i.return()}},{highWaterMark:2})},og=(n,e)=>{const t=n!=null;return o=>setTimeout(()=>e({lengthComputable:t,total:n,loaded:o}))},tu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",tv=tu&&typeof ReadableStream=="function",pf=tu&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),$E=tv&&(()=>{let n=!1;const e=new Request(vr.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e})(),ag=64*1024,hf=tv&&!!(()=>{try{return te.isReadableStream(new Response("").body)}catch{}})(),Pc={stream:hf&&(n=>n.body)};tu&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Pc[e]&&(Pc[e]=te.isFunction(n[e])?t=>t[e]():(t,o)=>{throw new ot(`Response type '${e}' is not supported`,ot.ERR_NOT_SUPPORT,o)})})})(new Response);const UE=async n=>{if(n==null)return 0;if(te.isBlob(n))return n.size;if(te.isSpecCompliantForm(n))return(await new Request(n).arrayBuffer()).byteLength;if(te.isArrayBufferView(n))return n.byteLength;if(te.isURLSearchParams(n)&&(n=n+""),te.isString(n))return(await pf(n)).byteLength},qE=async(n,e)=>{const t=te.toFiniteNumber(n.getContentLength());return t??UE(e)},HE=tu&&(async n=>{let{url:e,method:t,data:o,signal:s,cancelToken:i,timeout:c,onDownloadProgress:u,onUploadProgress:f,responseType:m,headers:p,withCredentials:g="same-origin",fetchOptions:b}=ev(n);m=m?(m+"").toLowerCase():"text";let[v,w]=s||i||c?BE([s,i],c):[],S,_;const O=()=>{!S&&setTimeout(()=>{v&&v.unsubscribe()}),S=!0};let D;try{if(f&&$E&&t!=="get"&&t!=="head"&&(D=await qE(p,o))!==0){let N=new Request(e,{method:"POST",body:o,duplex:"half"}),I;te.isFormData(o)&&(I=N.headers.get("content-type"))&&p.setContentType(I),N.body&&(o=rg(N.body,ag,og(D,Ic(f)),null,pf))}te.isString(g)||(g=g?"cors":"omit"),_=new Request(e,{...b,signal:v,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:o,duplex:"half",withCredentials:g});let M=await fetch(_);const W=hf&&(m==="stream"||m==="response");if(hf&&(u||W)){const N={};["status","statusText","headers"].forEach(P=>{N[P]=M[P]});const I=te.toFiniteNumber(M.headers.get("content-length"));M=new Response(rg(M.body,ag,u&&og(I,Ic(u,!0)),W&&O,pf),N)}m=m||"text";let X=await Pc[te.findKey(Pc,m)||"text"](M,n);return!W&&O(),w&&w(),await new Promise((N,I)=>{Zb(N,I,{data:X,headers:wr.from(M.headers),status:M.status,statusText:M.statusText,config:n,request:_})})}catch(M){throw O(),M&&M.name==="TypeError"&&/fetch/i.test(M.message)?Object.assign(new ot("Network Error",ot.ERR_NETWORK,n,_),{cause:M.cause||M}):ot.from(M,M&&M.code,n,_)}}),mf={http:iE,xhr:ME,fetch:HE};te.forEach(mf,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const sg=n=>`- ${n}`,VE=n=>te.isFunction(n)||n===null||n===!1,nv={getAdapter:n=>{n=te.isArray(n)?n:[n];const{length:e}=n;let t,o;const s={};for(let i=0;i<e;i++){t=n[i];let c;if(o=t,!VE(t)&&(o=mf[(c=String(t)).toLowerCase()],o===void 0))throw new ot(`Unknown adapter '${c}'`);if(o)break;s[c||"#"+i]=o}if(!o){const i=Object.entries(s).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=e?i.length>1?`since :
`+i.map(sg).join(`
`):" "+sg(i[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return o},adapters:mf};function Od(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ss(null,n)}function ig(n){return Od(n),n.headers=wr.from(n.headers),n.data=Rd.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),nv.getAdapter(n.adapter||ap.adapter)(n).then(function(o){return Od(n),o.data=Rd.call(n,n.transformResponse,o),o.headers=wr.from(o.headers),o},function(o){return Yb(o)||(Od(n),o&&o.response&&(o.response.data=Rd.call(n,n.transformResponse,o.response),o.response.headers=wr.from(o.response.headers))),Promise.reject(o)})}const rv="1.7.2",sp={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{sp[n]=function(o){return typeof o===n||"a"+(e<1?"n ":" ")+n}});const lg={};sp.transitional=function(e,t,o){function s(i,c){return"[Axios v"+rv+"] Transitional option '"+i+"'"+c+(o?". "+o:"")}return(i,c,u)=>{if(e===!1)throw new ot(s(c," has been removed"+(t?" in "+t:"")),ot.ERR_DEPRECATED);return t&&!lg[c]&&(lg[c]=!0,console.warn(s(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,c,u):!0}};function WE(n,e,t){if(typeof n!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const o=Object.keys(n);let s=o.length;for(;s-- >0;){const i=o[s],c=e[i];if(c){const u=n[i],f=u===void 0||c(u,i,n);if(f!==!0)throw new ot("option "+i+" must be "+f,ot.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ot("Unknown option "+i,ot.ERR_BAD_OPTION)}}const gf={assertOptions:WE,validators:sp},No=gf.validators;let Nc=class{constructor(e){this.defaults=e,this.interceptors={request:new eg,response:new eg}}async request(e,t){try{return await this._request(e,t)}catch(o){if(o instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=xa(this.defaults,t);const{transitional:o,paramsSerializer:s,headers:i}=t;o!==void 0&&gf.assertOptions(o,{silentJSONParsing:No.transitional(No.boolean),forcedJSONParsing:No.transitional(No.boolean),clarifyTimeoutError:No.transitional(No.boolean)},!1),s!=null&&(te.isFunction(s)?t.paramsSerializer={serialize:s}:gf.assertOptions(s,{encode:No.function,serialize:No.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=i&&te.merge(i.common,i[t.method]);i&&te.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),t.headers=wr.concat(c,i);const u=[];let f=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(f=f&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const m=[];this.interceptors.response.forEach(function(S){m.push(S.fulfilled,S.rejected)});let p,g=0,b;if(!f){const w=[ig.bind(this),void 0];for(w.unshift.apply(w,u),w.push.apply(w,m),b=w.length,p=Promise.resolve(t);g<b;)p=p.then(w[g++],w[g++]);return p}b=u.length;let v=t;for(g=0;g<b;){const w=u[g++],S=u[g++];try{v=w(v)}catch(_){S.call(this,_);break}}try{p=ig.call(this,v)}catch(w){return Promise.reject(w)}for(g=0,b=m.length;g<b;)p=p.then(m[g++],m[g++]);return p}getUri(e){e=xa(this.defaults,e);const t=Jb(e.baseURL,e.url);return Kb(t,e.params,e.paramsSerializer)}};te.forEach(["delete","get","head","options"],function(e){Nc.prototype[e]=function(t,o){return this.request(xa(o||{},{method:e,url:t,data:(o||{}).data}))}});te.forEach(["post","put","patch"],function(e){function t(o){return function(i,c,u){return this.request(xa(u||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:c}))}}Nc.prototype[e]=t(),Nc.prototype[e+"Form"]=t(!0)});const vc=Nc;let QE=class ov{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const o=this;this.promise.then(s=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](s);o._listeners=null}),this.promise.then=s=>{let i;const c=new Promise(u=>{o.subscribe(u),i=u}).then(s);return c.cancel=function(){o.unsubscribe(i)},c},e(function(i,c,u){o.reason||(o.reason=new Ss(i,c,u),t(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new ov(function(s){e=s}),cancel:e}}};const KE=QE;function XE(n){return function(t){return n.apply(null,t)}}function GE(n){return te.isObject(n)&&n.isAxiosError===!0}const yf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yf).forEach(([n,e])=>{yf[e]=n});const YE=yf;function av(n){const e=new vc(n),t=Db(vc.prototype.request,e);return te.extend(t,vc.prototype,e,{allOwnKeys:!0}),te.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return av(xa(n,s))},t}const qt=av(ap);qt.Axios=vc;qt.CanceledError=Ss;qt.CancelToken=KE;qt.isCancel=Yb;qt.VERSION=rv;qt.toFormData=Jc;qt.AxiosError=ot;qt.Cancel=qt.CanceledError;qt.all=function(e){return Promise.all(e)};qt.spread=XE;qt.isAxiosError=GE;qt.mergeConfig=xa;qt.AxiosHeaders=wr;qt.formToJSON=n=>Gb(te.isHTMLForm(n)?new FormData(n):n);qt.getAdapter=nv.getAdapter;qt.HttpStatusCode=YE;qt.default=qt;const{Axios:LM,AxiosError:DM,CanceledError:MM,isCancel:BM,CancelToken:zM,VERSION:FM,all:$M,Cancel:UM,isAxiosError:ZE,spread:qM,toFormData:HM,AxiosHeaders:VM,HttpStatusCode:WM,formToJSON:QM,getAdapter:KM,mergeConfig:XM}=qt,JE=window.Blueprint.Core.Toaster,$o=JE.create({className:"zr-toaster"});function uo(n,e=document){const t=new CustomEvent(`zotero-roam:${n._type}`,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(t)}function sv(n){const{error:e,page:{title:t},success:o}=n.detail;e?window.zoteroRoam?.error?.({origin:"API",message:`Metadata import failed for ${t}`,context:{...n.detail,error:Kt(e)},showToaster:!0}):o?$o.show({intent:"success",message:"Metadata added to "+t,timeout:Ki}):window.zoteroRoam?.warn?.({origin:"API",message:"Metadata import had uncertain outcome",context:n.detail})}function iv(n){const{error:e,page:{title:t},raw:{notes:o},success:s}=n.detail;e?window.zoteroRoam?.error?.({origin:"API",message:`Notes import failed for ${t}`,context:{...n.detail,error:Kt(e)},showToaster:!0}):s?$o.show({intent:"success",message:"Notes added to "+t+` (${o.length})`,timeout:Ki}):window.zoteroRoam?.warn?.({origin:"API",message:"Notes import had uncertain outcome",context:n.detail})}function lv(n){const{args:{tags:e},error:t,library:o}=n.detail;t?window.zoteroRoam?.error?.({origin:"API",message:"Tag deletion failed",context:{...n.detail,error:Kt(t)},showToaster:!0}):$o.show({intent:"success",message:Xt(e.length,"tag",` deleted from ${o}`),timeout:Ki})}function cv(n){let{data:{failed:e,successful:t},error:o,library:s}=n.detail;if(o=Kt(o),o||e.length>0&&t.length==0)window.zoteroRoam?.error?.({origin:"API",message:"Tag modification failed",context:{...n.detail,error:o},showToaster:!0});else{const i=t.reduce((u,f)=>(u.success+=Object.keys(f.successful).length,u.error+=Object.keys(f.failed).length,u),{error:0,success:0});e.length==0&&i.error==0?$o.show({intent:"success",message:Xt(i.success,"item",` successfully modified in ${s}.`),timeout:Ki}):window.zoteroRoam?.warn?.({origin:"API",message:"",detail:`${Xt(i.success,"item","")} modified in ${s}, with some problems. 
 Check the extension's logs for more details.`,context:{...n.detail,error:o},showToaster:!0})}}function uv(n){let{data:e,error:t,library:o}=n.detail;const{failed:s=[],successful:i=[]}=e;if(t=Kt(t),t||s.length>0&&i.length==0)window.zoteroRoam?.error?.({origin:"API",message:"Error sending data to Zotero",context:{...n.detail,error:t},showToaster:!0});else{const c=i.reduce((f,m)=>(f.success+=Object.keys(m.successful).length,f.error+=Object.keys(m.failed).length,f),{error:0,success:0});s.length==0&&c.error==0?$o.show({intent:"success",message:Xt(c.success,"item",` added to ${o}.`),timeout:Ki}):window.zoteroRoam?.warn?.({origin:"API",message:"Unsuccessful when sending data to Zotero",detail:`${Xt(c.success,"item","")} added to ${o}, with some problems. 
 Check the extension's logs for more details.`,context:{...n.detail,error:t},showToaster:!0})}}function eS(){document.addEventListener("zotero-roam:metadata-added",sv),document.addEventListener("zotero-roam:notes-added",iv),document.addEventListener("zotero-roam:write",uv),document.addEventListener("zotero-roam:tags-deleted",lv),document.addEventListener("zotero-roam:tags-modified",cv)}function tS(){document.removeEventListener("zotero-roam:metadata-added",sv),document.removeEventListener("zotero-roam:notes-added",iv),document.removeEventListener("zotero-roam:write",uv),document.removeEventListener("zotero-roam:tags-deleted",lv),document.removeEventListener("zotero-roam:tags-modified",cv)}const dv=n=>n.status==="fulfilled",Tt=n=>!!n;function nS(n,e){let t=!0;for(let o=0;o<n.length&&t==!0;o++)t=fv(n[o],e);return t}function rS(n,e){let t=!1;for(let o=0;o<n.length&&t==!1;o++)t=fv(n[o],e);return t}function fv(n,e){if(n.startsWith("(")&&n.endsWith(")")){const t=n.slice(1,-1);return pv(t,e)}else if(n.startsWith("-")){const t=n.slice(1);return!e.includes(t)}else return e.includes(n)}function pv(n,e){const t=n.split(/([\|\&]?)([^\&\|\(\)]+|\(.+\))([\|\&]?)/).filter(Tt);return t.includes("|")?rS(t.filter(o=>o!="|"),e):nS(t.filter(o=>o!="&"),e)}function bf(n){return n?n.map(e=>{if(typeof e=="string")return{string:e,text:e,children:[]};if(typeof e=="object")return{...e,children:bf(e.children||[])};throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad element received",context:{element:e}}),new Error(`All array items should be of type String or Object, not ${typeof e}`)}):[]}const hv=()=>({ZOTERORANDOMCITEKEY:{help:"Returns one or more Zotero citekeys, with optional tag query",handler:n=>(e="1",t="")=>window.zoteroRoam.getItems("items").filter(o=>pv(t,o.data.tags.map(s=>s.tag))).map(o=>"@"+o.key).sort(()=>.5-Math.random()).slice(0,Number(e)||1)},ZOTEROITEMABSTRACT:{help:"Returns the abstract of a Zotero item.",handler:n=>()=>{const{item:e}=n.variables;return e.data.abstractNote||""}},ZOTEROITEMCITATION:{help:"Returns a formatted citation for a Zotero item. Options: style (default: 'chicago-note-bibliography'), locale (default: en-US), linkwrap (default: 0).",handler:n=>async(e="chicago-note-bibliography",t="en-US",o=0)=>{const{item:s}=n.variables;return await window.zoteroRoam.getItemCitation(s,{style:e,locale:t,linkwrap:o})}},ZOTEROITEMCITEKEY:{help:"Returns the citekey for a Zotero item, with the '@' prefix. If the item doesn't have a citekey, its Zotero key will be used. Options: brackets (`true` (default)|`false`).",handler:n=>(e=!0)=>{const{item:t}=n.variables,o="@"+t.key;return e?`[[${o}]]`:o}},ZOTEROITEMCOLLECTIONS:{help:"Returns the comma-separated list of the collection(s) a Zotero item belongs to.",handler:n=>(e=!0)=>{const{item:t}=n.variables;return window.zoteroRoam.getItemCollections(t,{return_as:"string",brackets:e})}},ZOTEROITEMCREATORS:{help:"Returns the comma-separated list of the creator(s) of a Zotero item. Options: brackets (`true`(default)|`false`|`existing`), use_type(`true`(default)|`false`).",handler:n=>(e=!0,t=!0)=>{const{item:o}=n.variables;return window.zoteroRoam.getItemCreators(o,{return_as:"string",brackets:e,use_type:t})}},ZOTEROITEMDATEADDED:{help:"Returns the date on which an item was added to Zotero. Options: brackets (`true`(default)|`false`).",handler:n=>(e=!0)=>{const{item:t}=n.variables;return Ca(t.data.dateAdded,{brackets:e})}},ZOTEROITEMKEY:{help:"Returns the citekey for a Zotero item, without the '@' prefix. If the item doesn't have a citekey, its Zotero key will be used.",handler:n=>()=>{const{item:e}=n.variables;return e.key}},ZOTEROITEMLINK:{help:"Returns the link to a Zotero item (web or local library). Options: type (`local`(default)|`web`).",handler:n=>(e="local")=>{const{item:t}=n.variables;return e=="local"?_s(t,{format:"target"}):ks(t,{format:"target"})}},ZOTEROITEMMETADATA:{help:"Returns the formatted metadata for a Zotero item and its children (PDFs, notes/annotations), using the extension's default formatter. Use this if you want to use the default metadata template as part of your SmartBlock.",handler:n=>()=>{const{item:e,pdfs:t,notes:o}=n.variables,s=window.zoteroRoam.getItemMetadata(e,t,o);return bf(s)}},ZOTEROITEMPUBLICATION:{help:"Returns the place of publication for a Zotero item. The command will look for the following fields, in order: `publicationTitle`, `bookTitle`, `university`. If no information is found, it will return an empty string.",handler:n=>()=>{const{item:e}=n.variables;return e.data.publicationTitle||e.data.bookTitle||e.data.university||""}},ZOTEROITEMRELATED:{help:"Returns the comma-separated list of the citekeys of a Zotero item's relations, if any. Options: brackets (`true`(default)|`false`).",handler:n=>(e=!0)=>{const{item:t}=n.variables;return window.zoteroRoam.getItemRelated(t,{return_as:"string",brackets:e})}},ZOTEROITEMTAGS:{help:"Returns the space-separated list of the tag(s) of a Zotero item, if any. Options: brackets (`true` (default)|`false`).",handler:n=>(e=!0)=>{const{item:t}=n.variables;return window.zoteroRoam.getItemTags(t,{return_as:"string",brackets:e})}},ZOTEROITEMTITLE:{help:"Returns the title of a Zotero item.",handler:n=>()=>{const{item:e}=n.variables;return e.data.title||""}},ZOTEROITEMTYPE:{help:"Returns the formatted type of a Zotero item, according to current user settings. Options: brackets (`true` (default)|`false`).",handler:n=>(e=!0)=>{const{item:t}=n.variables;return window.zoteroRoam.getItemType(t,{brackets:e})}},ZOTEROITEMURL:{help:"Returns the URL of a Zotero item, if available. If the item has no URL but has a DOI, its DOI URL will be returned.",handler:n=>()=>{const{item:e}=n.variables,t=e.data.url,o=Rs(e.data.DOI);return t||(o?"https://doi/org/"+o:"")}},ZOTEROITEMYEAR:{help:"Returns the year of publication of a Zotero item, if available.",handler:n=>()=>{const{item:e}=n.variables;return e.meta.parsedDate?isNaN(Number(new Date(e.meta.parsedDate)))?"":new Date(e.meta.parsedDate).getUTCFullYear().toString():""}},ZOTERONOTES:{help:"Formats a list of Zotero notes/annotations, with current user settings",handler:n=>()=>{const{notes:e=[]}=n.variables,t=window.zoteroRoam.formatNotes(e);return bf(t)}},ZOTEROPDFS:{help:"Returns the comma-separated links to a list of Zotero PDFs",handler:n=>()=>{const{pdfs:e=[]}=n.variables;return window.zoteroRoam.formatPDFs(e,"string")}}});function oS(){const n=hv(),e=()=>{if(window.roamjs?.extension?.smartblocks){try{mv()}catch(t){window.zoteroRoam?.error?.({origin:"SmartBlocks",message:"Failed to unregister commands",context:{error:t.message}})}Object.keys(n).forEach(t=>{const{help:o,handler:s}=n[t];window.roamjs?.extension.smartblocks?.registerCommand({text:t,help:o,handler:s})})}};window.roamjs?.loaded?.has("smartblocks")?e():document.body.addEventListener("roamjs:smartblocks:loaded",e)}function mv(){const n=hv();window.roamjs?.extension?.smartblocks&&Object.keys(n).forEach(e=>{window.roamjs?.extension?.smartblocks?.unregisterCommand(e)})}async function aS(n,e,t={}){const{param:o,paramValue:s}=e,i={args:{smartblock:e,uid:n},error:null,raw:t,success:null},c={targetUid:n,variables:t,[o]:s};try{return await window.roamjs?.extension?.smartblocks?.triggerSmartblock(c),Promise.resolve({...i,success:!0})}catch(u){return window.zoteroRoam?.error?.({origin:"SmartBlocks",message:"Failed to trigger SmartBlock",context:{...c,error:u.message}}),Promise.resolve({...i,error:u,success:!1})}}var vf=(n=>(n.CITED="cited",n.CITING="citing",n))(vf||{});const gv=n=>n.inLibrary!=!1,Ts=n=>n.data.itemType==="annotation",Gi=n=>n.data.itemType==="note",yv=n=>Ts(n)||Gi(n),ip=n=>n.data.itemType==="attachment",lp=n=>!(ip(n)||yv(n));function sS(n){let e=n;["div"].forEach(c=>{const u=new RegExp(`</?${c}>|<${c} .+?>`,"g");e=e.replaceAll(u,"")}),e=Lc(e).trim();const o=document.createElement("textarea");o.innerHTML=e;let s=o.innerText;s=s.replaceAll(/<\/?i>/g,"__");const i=/<a href="(.+)">(.+)<\/a>/g;return s=s.replaceAll(i,"[$2]($1)"),s}function iS(n,e){return fp(Cf(n),Cf(e))}function bv(n,e,t,{annotationsSettings:o,notesSettings:s,typemap:i}){const c=[];if(n.data.title&&c.push(`Title:: ${n.data.title}`),n.data.creators.length>0&&c.push(`Author(s):: ${wv(n,{return_as:"string",brackets:!0,use_type:!0})}`),n.data.abstractNote&&c.push(`Abstract:: ${n.data.abstractNote}`),n.data.itemType&&c.push(`Type:: ${Sv(n,{brackets:!0},{typemap:i})}`),c.push(`Publication:: ${Ev(n,{brackets:!0})}`),n.data.url&&c.push(`URL : ${n.data.url}`),n.data.dateAdded&&c.push(`Date Added:: ${Cv(n)}`),c.push(`Zotero links:: ${wf(n,"local",{format:"markdown",text:"Local library"})}, ${wf(n,"web",{format:"markdown",text:"Web library"})}`),n.data.tags.length>0&&c.push(`Tags:: ${xv(n,{return_as:"string",brackets:!0})}`),e.length>0&&c.push(`PDF links : ${vv(e,"links").join(", ")}`),t.length>0){const u=cp(t,null,{annotationsSettings:o,notesSettings:s});c.push(...u)}return c}function cp(n,e=null,{annotationsSettings:t,notesSettings:o}){if(!n||n.length==0)return[];{const s=n.filter(Ts).sort((b,v)=>iS(b.data.annotationSortIndex,v.data.annotationSortIndex)),i=n.filter(Gi).sort((b,v)=>b.data.dateAdded<v.data.dateAdded?-1:1),c=[...lS(s,t),...jv(i,o)],{nest_char:u,nest_position:f,nest_preset:m,nest_use:p}=o;if(p=="preset"&&!m)return c;if(e){const b=(p=="custom"?u:m)||"",v=dS(b,e);if(v){const{uid:w,children:S=[]}=v,_=f=="bottom"?S.length:0;return c.map(O=>O.constructor===String?{string:O,text:O,order:_,parentUID:w}:{...O,order:_,parentUID:w})}}const g=(p=="custom"?u:m)||"";return[{string:g,text:g,children:c}]}}function vv(n,e="string"){if(n){const t=n.map(o=>({title:o.data.filename||o.data.title,key:o.key,link:hp(o,"href")}));switch(e){case"identity":return t;case"links":return t.map(o=>`[${o.title}](${o.link})`);case"string":default:return t.map(o=>`[${o.title}](${o.link})`).join(", ")}}else switch(e){case"identity":case"links":return[];case"string":default:return""}}function wv(n,{return_as:e="string",brackets:t=!0,use_type:o=!0}={}){const s=n.data.creators.map(i=>{const c="name"in i?i.name:`${[i.firstName,i.lastName].filter(Tt).join(" ")}`;return{name:c,type:i.creatorType,inGraph:up(c)}});switch(e){case"identity":return s;case"array":return s.map(i=>i.name);case"string":default:return s.map(i=>{const c=t==!0||t=="existing"&&i.inGraph?`[[${i.name}]]`:i.name;return o==!0?c+(i.type=="author"?"":` (${i.type})`):c}).join(", ")}}function xv(n,{return_as:e="string",brackets:t=!0}={}){const o=n.data.tags.map(i=>i.tag),s=t==!0?o.map(i=>`#[[${i}]]`):o;switch(e){case"array":return s;case"string":default:return s.join(" ")}}function lS(n,{func:e="",use:t="default",__with:o="raw",...s}={}){return t=="function"&&e?pp(e,window,o=="raw"?n:ru(n)):CS(n,{...s})}function Cv(n,{brackets:e=!0}={}){return Ca(n.data.dateAdded,{brackets:e})}function wf(n,e="local",t={}){return e=="local"?_s(n,t):ks(n,t)}function Ev(n,{brackets:e=!0}={}){const t=n.data.publicationTitle||n.data.bookTitle||n.data.university;return t?e==!0?`[[${t}]]`:t:""}function Sv(n,{brackets:e=!0}={},{typemap:t}){const o=t[n.data.itemType]||n.data.itemType;return e==!0?`[[${o}]]`:o}function cS(n,{items:e}){return n.reduce((t,o)=>{const s=e.find(i=>i.key==o);if(s){const i=s.library.type+"s/"+s.library.id;Object.keys(t).includes(i)?t[i].push(s.data.key):t[i]=[s.data.key]}return t},{})}async function uS(n,e,t=0){const{string:o,children:s=[],...i}=e;if(typeof o>"u")throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad object received",context:{object:e}}),new Error("All blocks objects must have a `string` property.");{const c=await kv(i.parentUID||n,o,i.order||t,i);if(s.constructor===Array)for(const u of s)await Tv({parentUID:c,block:u,order:"last"});else throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad object received",context:{object:e}}),new Error(`If provided, the 'children' property of a block should be an Array - received ${typeof s}`)}}async function Tv({parentUID:n,block:e,order:t=0}){switch(typeof e){case"object":await uS(n,e,t);break;case"string":await kv(n,e,t);break;default:throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad element received",context:{element:e}}),new Error(`All block items should be of type String or Object - received ${typeof e}`)}}async function _v(n,e){const t={args:{blocks:e,uid:n},error:null,success:null};if(e.length>0)try{for(const o of e.reverse())await Tv({parentUID:n,block:o,order:0});return Promise.resolve({...t,success:!0})}catch(o){return Promise.resolve({...t,error:o,success:!1})}else return window.zoteroRoam?.warn?.({origin:"Metadata",message:"Empty metadata array received"}),Promise.resolve(t)}function cg(n,e,t={}){const o={label:n,callback:e,"disable-hotkey":!0};t.ui?t.ui.commandPalette.addCommand(o):window.roamAlphaAPI.ui.commandPalette.addCommand(o)}async function kv(n,e,t=0,o={}){const s=window.roamAlphaAPI.util.generateUID(),i={string:e,uid:s};if(Object.keys(o).length>0)for(const c of Object.keys(o))["children-view-type","alignment","heading"].includes(c)&&(i[c]=o[c]);return await window.roamAlphaAPI.data.block.create({location:{"parent-uid":n,order:t},block:i}),s}function dS(n,e){const t=window.roamAlphaAPI.data.q(`[
		:find (pull ?b [:block/uid :block/children])
		:in $ ?string ?parentUID
		:where
			[?par :block/uid ?parentUID]
			[?par :block/children ?b]
			[?b :block/uid ?uid]
			[?b :block/string ?string]
	]`,n,e);return t[0]?t[0][0]:!1}function up(n){const e=window.roamAlphaAPI.data.q(`[
		:find ?uid 
		:in $ ?title 
		:where
			[?p :node/title ?title]
			[?p :block/uid ?uid]
		]`,n);return e[0]?e[0][0]:!1}function fS(){return window.roamAlphaAPI.data.q(`[
		:find ?title 
		:where
			[?e :node/title ?title]
		]`).flat(1).sort((n,e)=>n.toLowerCase()<e.toLowerCase()?-1:1)}function ug(){return new Map(window.roamAlphaAPI.data.q(`[
		:find ?title ?uid 
		:where
			[?e :node/title ?title]
			[(clojure.string/starts-with? ?title "@")]
			[?e :block/uid ?uid]
		]`))}function pS(){return new Map(window.roamAlphaAPI.data.q(`[
		:find [(pull ?e [:node/title :edit/time :block/uid {:block/_parents [:edit/time]}])...] 
		:where
			[?e :node/title ?t]
			[(clojure.string/starts-with? ?t "@")]
		]`).filter(n=>n.time).map(n=>{const{title:e,uid:t}=n,o=n._parents?Math.max(...n._parents.map(s=>s.time)):n.time;return[e,{edited:new Date(Math.max(o,n.time)),uid:t}]}))}function hS(){const{"block-uid":n,"window-id":e}=window.roamAlphaAPI.ui.getFocusedBlock()||{};if(!n||!e)return null;const t=["block-input",e,n].join("-"),o=document.getElementById(t),{selectionStart:s=null,selectionEnd:i=null}=o||{},c={id:t,location:{"block-uid":n,"window-id":e}};return s&&i&&(c.selection={start:s,end:i}),c}function mS(){return window.roamAlphaAPI.graph.name}function gS(n){return window.roamAlphaAPI.data.q(`[
		:find (pull ?e [:node/title :block/uid]) 
		:in $ [?k ...] 
		:where
			[?e :node/title ?title]
			[(clojure.string/starts-with? ?title ?k)]
		]`,n).flat(1)}async function nu({item:n,pdfs:e=[],notes:t=[]},o,s,i,c,u){const f="@"+n.key,m=o||window.roamAlphaAPI.util.generateUID(),p={new:!1,title:f,uid:m};m!=o&&(window.roamAlphaAPI.data.page.create({page:{title:f,uid:m}}),p.new=!0);const{use:g="default",func:b="",smartblock:{param:v,paramValue:w}}=s;try{let S;if(g=="smartblock"){const _=await aS(p.uid,{param:v,paramValue:w},{item:n,notes:t,page:p,pdfs:e});S={page:p,..._}}else{const _=g=="function"&&b?await pp(b,window,n,e,t):bv(n,e,t,{annotationsSettings:u,notesSettings:c,typemap:i}),O=await _v(m,_);S={page:p,raw:{item:n,pdfs:e,notes:t},...O}}return uo({...S,_type:"metadata-added"}),S}catch(S){return window.zoteroRoam?.error?.({origin:"Metadata",message:"Failed to import metadata for: "+f,detail:S.message,context:{page:p,settings:{annotations:u,metadata:s,notes:c}},showToaster:1e3}),await Promise.reject(S)}}async function Rv({item:n,notes:e=[]},t,o,s){const i="@"+n.key,c=t||window.roamAlphaAPI.util.generateUID(),u={new:!1,title:i,uid:c};c!=t&&(window.roamAlphaAPI.data.page.create({page:{title:i,uid:c}}),u.new=!0);try{const f=cp(e,c,{annotationsSettings:s,notesSettings:o}),m=await _v(c,f),p={page:u,raw:{item:n,notes:e},...m};return uo({...p,_type:"notes-added"}),p}catch(f){return window.zoteroRoam?.error?.({origin:"Notes",message:"Failed to import notes for: "+i,detail:f.message,context:{page:u,settings:{annotations:s,notes:o}},showToaster:1e3}),await Promise.reject(f)}}function Ca(n,{brackets:e=!0}={}){const t=n.constructor===Date?n:new Date(n),o=window.roamAlphaAPI.util.dateToPageTitle(t);return e?`[[${o}]]`:o}function yS(n){if(n&&n.location){const{id:e,...t}=n;(document.getElementById(e)||!1)&&window.roamAlphaAPI.ui.setBlockFocusAndSelection(t)}}async function dg(n,e="outline"){await window.roamAlphaAPI.ui.rightSidebar.addWindow({window:{type:e,"block-uid":n}})}async function xf(n){await window.roamAlphaAPI.ui.mainWindow.openPage({page:{uid:n}})}function bS(n,{as_date:e=!0}={}){const t=window.roamAlphaAPI.util.pageTitleToDate(n);return e?t:[t.getFullYear(),t.getMonth(),t.getDate()]}function fg(n,e={}){const t={label:n};e.ui?e.ui.commandPalette.removeCommand(t):window.roamAlphaAPI.ui.commandPalette.removeCommand(t)}function vS(n,e){return[...n,e]}function wS(n,e){return[...n.slice(0,e),...n.slice(e+1,n.length)]}function xS(n,e,t){return[...n.slice(0,e),t,...n.slice(e+1,n.length)]}function Ta(n){return n.reduce((e,t)=>(yv(t)?e.notes.push(t):ip(t)?t.data.contentType=="application/pdf"&&e.pdfs.push(t):e.items.push(t),e),{items:[],pdfs:[],notes:[]})}function Kt(n){try{if(ZE(n)){const{code:e,message:t,status:o,config:s}=n;return{code:e,message:t,status:o,config:{url:s?.url}}}return n.message}catch{return n}}function dp(n,e=[],t=[],o){const s=n.data.url,i=Rs(n.data.DOI),c=s?{href:s,title:s}:i?{href:"https://doi/org/"+i,title:i}:!1,u=n.data.creators.map(v=>({full:"name"in v?v.name:[v.firstName,v.lastName].filter(Tt).join(" ")||"",last:("lastName"in v?v.lastName:v.name)||"",role:v.creatorType||""})),f=Array.from(new Set(n.data.tags.map(v=>v.tag))),m=n.meta.creatorSummary||"",p=n.meta.parsedDate?isNaN(Number(new Date(n.meta.parsedDate)))?"":new Date(n.meta.parsedDate).getUTCFullYear().toString():"",g=p?`(${p})`:"",b={abstract:n.data.abstractNote||"",authors:m,authorsFull:u.map(v=>v.full),authorsLastNames:u.map(v=>v.last),authorsRoles:u.map(v=>v.role),children:{pdfs:e,notes:t},createdByUser:n.meta.createdByUser?.username||null,inGraph:o.get("@"+n.key)||!1,itemKey:n.data.key,itemType:n.data.itemType,key:n.key,location:n.library.type+"s/"+n.library.id,meta:[m,g].filter(Tt).join(" "),publication:n.data.publicationTitle||n.data.bookTitle||n.data.university||"",tags:f,title:n.data.title,weblink:c,year:p,zotero:{local:_s(n,{format:"target"}),web:ks(n,{format:"target"})},raw:n,_multiField:""};return b._multiField=[b.abstract,b.authorsFull.join(" "),b.year,b.title,b.tags.map(v=>`#${v}`).join(", "),b.key].filter(Tt).join(" "),b}function Lc(n){let e=n;return e.startsWith(`
`)?(e=e.slice(1),e=Lc(e)):e.endsWith(`
`)&&(e=e.slice(0,-1),e=Lc(e)),e=e.replaceAll(/\n{2}/g,`
`),e}function fp(n,e){const[t=0,o=0,s=0]=n,[i=0,c=0,u=0]=e;return t<i||t==i&&(o<c||o==c&&s<=u)?-1:1}function Cf(n){return n.split("|").map(e=>Number(e))}function Mo(n){navigator.clipboard?navigator.clipboard.writeText(n).then(e=>{$o.show({intent:"success",message:`Successfully copied to clipboard: ${n}`,timeout:800})}).catch(e=>{window.zoteroRoam?.error?.({origin:"Copy",message:`Failed to copy to clipboard: ${n}`,detail:e.message,showToaster:1e3})}):$o.show({message:`Clipboard API is not available. The following could not be copied: ${n}`,timeout:1e3})}function Ef(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pp(n,e,...t){const o=Array.prototype.slice.call(arguments,2),s=n.split("."),i=s.pop();let c=e;for(let u=0;u<s.length;u++)c=c[s[u]];if(!c[i])throw new Error(`Function ${i} doesn't exist`);return c[i](...o)}function pg(n,{template_comment:e="{{comment}}",template_highlight:t="[[>]] {{highlight}} ([p. {{page_label}}]({{link_page}})) {{tags_string}}"}={}){if(n.type=="highlight"){const{comment:o,page_label:s,link_page:i,tags_string:c,text:u}=n;let f=e,m=t;const p={comment:o,highlight:u,page_label:s,link_page:i,tags_string:c};for(const g in p)f=f.replaceAll(`{{${g}}}`,`${p[g]}`),m=m.replaceAll(`{{${g}}}`,`${p[g]}`);return{string:m,text:m,children:o?[f]:[]}}else return n.type=="image",null}function CS(n,{group_by:e=!1,template_comment:t,template_highlight:o}={}){const s=ru(n);if(e=="day_added"){const i=s.sort((c,u)=>c.date_added<u.date_added?-1:1).reduce((c,u)=>{const f=new Date(u.date_added).toLocaleDateString("en-CA");return c[f]?c[f].push(u):c[f]=[u],c},{});return Object.keys(i).sort((c,u)=>new Date(c)<new Date(u)?-1:1).map(c=>{const u=i[c].sort((f,m)=>fp(f.sortIndex,m.sortIndex));return{string:Ca(`${c}T00:00`,{brackets:!0}),text:Ca(`${c}T00:00`,{brackets:!0}),children:u.map(f=>pg(f,{template_comment:t,template_highlight:o})).filter(Tt)}}).filter(c=>c.children.length>0)}else return s.map(i=>pg(i,{template_comment:t,template_highlight:o})).filter(Tt)}function Ov(n,e=`
`){return Av(n,e).flat(1).map(t=>_S(t)).filter(t=>t.trim())}function Sf(n,e,{accent_class:t="zr-accent-1"}={}){const o=n.key,s=n.data.title,i=n.meta.creatorSummary||"",c=n.meta.parsedDate?isNaN(Number(new Date(n.meta.parsedDate)))?"":new Date(n.meta.parsedDate).getUTCFullYear():"",u=[i,c?`(${c})`:""].filter(Tt).join(" "),f="@"+o,m=u||o,p={citation:"[{{summary_or_key}}]([[{{citekey}}]])",citekey:"{{citekey}}",inline:"{{summary}}",key:"{{key}}",pageref:"[[{{citekey}}]]",popover:"{{=: {{summary_or_key}} | {{embed: [[{{citekey}}]]}} }}",tag:"#[[{{citekey}}]]",zettlr:`<span class="${t}">{{summary_or_key}}</span> {{title}}`},g={authors:i,citekey:f,key:o,summary:u,summary_or_key:m,title:s,year:c};let b=p[e]||e||"{{citekey}}";for(const v in g)b=b.replaceAll(`{{${v}}}`,`${g[v]}`);return b}function jv(n,{func:e="",split_char:t="",split_preset:o=`
`,split_use:s="preset",use:i="default",__with:c="raw"}={}){const u=s=="custom"?t:o;return i=="function"&&e?pp(e,window,c=="raw"?n:Av(n,u)):Ov(n,u)}function _s(n,{format:e="markdown",text:t="Local library"}={}){const s=`zotero://select/${n.library.type=="group"?`groups/${n.library.id}`:"library"}/items/${n.data.key}`;switch(e){case"markdown":return`[${t}](${s})`;case"target":default:return s}}function hp(n,e="href"){const t=n.library.type=="group"?`groups/${n.library.id}`:"library";let o="",s="";switch(["linked_file","imported_file","imported_url"].includes(n.data.linkMode)?(o="zotero://open-pdf/"+t+"/items/"+n.data.key,s=n.data.filename||n.data.title):(o=n.data.url,s=n.data.title),e){case"markdown":return`[${s}](${o})`;case"href":default:return o}}function ks(n,{format:e="markdown",text:t="Web library"}={}){const s=`https://www.zotero.org/${n.library.type=="user"?n.library.name:`groups/${n.library.id}/${n.library.name}`}/items/${n.data.key}`;switch(e){case"markdown":return`[${t}](${s})`;case"target":default:return s}}function _a(n,e,{pdfs:t=[],notes:o=[]}={}){const s=t.filter(u=>u.data.parentItem==n&&u.library.type+"s/"+u.library.id==e),i=s.map(u=>u.key),c=o.filter(u=>[n,...i].includes(u.data.parentItem)&&u.library.type+"s/"+u.library.id==e);return{pdfs:s,notes:c}}function ES(n){if(typeof n!="string")throw new Error(`Input is of type ${typeof n}, expected String`);const e=new RegExp(/^<\/?(.+?)>|<(.+?)>$/),t=e.test(n);return{result:t,htmlTag:t&&n.match(e)?.[1]||null}}function SS(n){return n.reduce((e,t)=>{try{const o=t.charAt(0).toLowerCase();e[o]?e[o].push(t):e[o]=[t]}catch{throw new Error(`Could not add ${JSON.stringify(t)} to dictionary`)}return e},{})}function mp(n){const e=n.constructor===Date?n:new Date(n),t=new Date;t.setHours(0,0,0);const o=new Date;if(o.setDate(t.getDate()-1),o.setHours(0,0,0),e>t)return`Today at ${Bi(e)}`;if(e>o)return`Yesterday at ${Bi(e)}`;{const i=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${TS(e.getDate())}`,c=e.getFullYear()!=t.getFullYear()?e.getFullYear():!1;return[i,c].filter(Tt).join(" ")}}function TS(n){const e=n%10;return e==1&&n!=11?n+"st":e==2&&n!=12?n+"nd":e==3&&n!=13?n+"rd":n+"th"}function Bi(n){const e=n.constructor===Date?n:new Date(n);return`${e.getHours()}:${("0"+e.getMinutes()).slice(-2)}`}function Rs(n){if(n){const e=n.match(/10\.([0-9]+?)\/(.+)/g);return e?e[0].toLowerCase():!1}else return!1}function _S(n){let e=n;const t={"<blockquote>":"> ","</blockquote>":"","<strong>":"**","</strong>":"**","<em>":"__","</em>":"__","<b>":"**","</b>":"**","<br />":`
`,"<br/>":`
`,"<br>":`
`,"<u>":"","</u>":"","<ul>":"","</ul>":"","<ol>":"","</ol>":"","</li><li>":" ","<li>":"","</li>":""};for(const i in t)e=e.replaceAll(`${i}`,`${t[i]}`);["p","div","span","h1","h2","h3","h4","h5","h6"].forEach(i=>{const c=new RegExp(`</?${i}>|<${i} .+?>`,"g");e=e.replaceAll(c,i.startsWith("h")?"**":"")});const s=/<a.+?href="(.+?)">(.+?)<\/a>/g;return e=e.replaceAll(s,"[$2]($1)"),e=Lc(e),e}function Xt(n,e,t=""){return`${n==0?"No":n} ${e}${n==1?"":"s"}${t}`}function ar(n,e,{any_case:t=!0,match:o="partial",search_compounds:s=!0,word_order:i="strict"}={}){if(e.constructor===String)return hg(n,e,{any_case:t,match:o,search_compounds:s,word_order:i});if(e.constructor===Array)return e.some(c=>hg(n,c,{any_case:t,match:o,search_compounds:s,word_order:i}));throw new Error(`Unexpected input type ${e.constructor.name} : target should be a String or an Array`)}function hg(n,e,{any_case:t=!0,match:o="partial",search_compounds:s=!0,word_order:i="strict"}={}){let c=n,u=e;t==!0&&(c=n.toLowerCase(),u=e.toLowerCase());const f=c.split(" "),m=f.some(p=>p.includes("-"));if(f.length==1){let p=Ef(c);switch(m&&s==!0&&(p=p.replace("-","(?: |-)?")),o){case"partial":return new RegExp(p).test(u);case"exact":return new RegExp("^"+p+"$").test(u);case"word":return new RegExp("(?:\\W|^)"+p+"(?:\\W|$)").test(u);default:return!1}}else{let p=f.map(g=>Ef(g));return s==!0&&(m?p=p.map(g=>g.includes("-")?g.replace("-","(?: |-)?"):g):!m&&i=="strict"&&(p=[p.join("(?: |-)?")])),i=="loose"?o=="word"?p.map(b=>"(?:\\W|^)"+b+"(?:\\W|$)").every(b=>new RegExp(b).test(u)):p.every(g=>new RegExp(g).test(u)):o=="partial"?new RegExp(p.join(" ")).test(u):o=="exact"?new RegExp("^"+p.join(" ")+"$").test(u):new RegExp("(?:\\W|^)"+p.join(" ")+"(?:\\W|$)").test(u)}}function ru(n){return n.map(e=>{const{annotationColor:t,annotationComment:o,annotationPageLabel:s,annotationPosition:i,annotationSortIndex:c,annotationText:u,annotationType:f,dateAdded:m,dateModified:p,parentItem:g,tags:b}=e.data,v=Ca(m,{brackets:!1}),w=Ca(p,{brackets:!1}),S=e.library.type+"s/"+e.library.id,_=S.startsWith("groups/")?S:"library",O=JSON.parse(i),D=`zotero://open-pdf/${_}/items/${g}`,M=D+`?page=${O.pageIndex+1}`;return{color:t,comment:o,date_added:m,date_modified:p,day_added:v,day_modified:w,key:e.key,library:S,link_pdf:D,link_page:M,page_label:s,parent_item:g,position:O,raw:e,sortIndex:Cf(c),tags:b.map(W=>W.tag),tags_string:b.map(W=>`#[[${W.tag}]]`).join(", "),text:u,type:f}})}function Av(n,e){const{result:t,htmlTag:o}=ES(e);if(t&&o){const s=new RegExp(`</?${o}>|<${o} .+?>`,"g");return n.map(i=>i.data.note.split(s).filter(Tt))}else return n.map(s=>s.data.note.split(e).filter(Tt))}function mg(n){return n.map(e=>{const{doi:t,...o}=e;return{doi:Rs(t),...o}})}const kS=window.React.Component;class Nn extends kS{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),window.zoteroRoam?.error?.({origin:"Interface",message:"Failed to render",context:{error:Kt(e),errorInfo:t}})}render(){return this.state.error?d.jsx(ep,{error:this.state.error}):this.props.children}}const RS=window.Blueprint.Core.Callout,Iv=()=>d.jsxs(RS,{children:["No writeable libraries were found. Please check that your API key(s) have the permission to write to at least one of the Zotero libraries you use. ",d.jsx("a",{href:"https://alix-lahuec.gitbook.io/zotero-roam/getting-started/prereqs#zotero-api-credentials",target:"_blank",rel:"noreferrer",children:"Refer to the extension docs"})," for more details."]}),OS=window.React.useReducer;function jS(n,e){switch(e.type){case"add":return vS(n,e.value);case"remove":return wS(n,e.index);case"update":return xS(n,e.index,e.value);default:return n}}const AS=(n,e)=>OS(jS,n,e),Jl=window.React.useCallback,IS=window.React.useState,Lt=n=>{const[e,t]=IS(n),o=Jl(()=>{t(u=>!u)},[]),s=Jl(u=>{t(u)},[]),i=Jl(()=>t(!0),[]),c=Jl(()=>t(!1),[]);return[e,{set:s,toggle:o,on:i,off:c}]},PS=window.React.useCallback,NS=window.React.useRef;function LS(n,e){const t=NS(void 0),o=function(){t.current&&(clearTimeout(t.current),t.current=null)};return[PS(i=>{o(),t.current=setTimeout(()=>{t.current=null,n(i)},e)},[n,e]),o]}const DS=window.React.useReducer,MS=(n,e)=>n.map(t=>t.value==e?{...t,active:!t.active}:t),BS=n=>DS(MS,n),ec=window.React.useCallback,zS=window.React.useState,FS=(n,e)=>n===e,$S=n=>n,gg=(n,e,t,o)=>n.find(s=>t(s,e))?n:[...n,o(e)],yg=(n,e,t)=>n.filter(o=>!t(o,e)),zi=({start:n=[],identify:e=FS,retrieve:t=$S})=>{const[o,s]=zS(n),i=ec(m=>{s(p=>gg(p,m,e,t))},[e,t]),c=ec(m=>{s(p=>yg(p,m,e))},[e]),u=ec(m=>{s(p=>p.find(g=>e(g,m))?yg(p,m,e):gg(p,m,e,t))},[e,t]),f=ec(m=>{s(m)},[]);return[o,{set:f,toggle:u,add:i,remove:c}]},US=window.React.useCallback,qS=window.React.useMemo,HS=window.React.useState,ou=({itemsPerPage:n=20})=>{const[e,t]=HS(1),o=qS(()=>[n*(e-1),n*e],[e,n]),s=US(i=>{t(i)},[]);return{currentPage:e,pageLimits:o,setCurrentPage:s}},VS=new RegExp(/^(?: *)([^ ]+):([^ "]+|"[^:]+")(?: *)$/),WS=new RegExp(/^[^ ]+:(?:"[^"]*)?$/g),QS=new RegExp(/^("[^"]*)$/g),KS=new RegExp(/([^ ]+:(?:[^ "]+|"[^:]+")(?: *))/g),XS=(n,e)=>{let t=e;for(let o=0;o<n.length;o++){const s=n[o],i=t<s.length,c=t==s.length,u=o==n.length-1;if(i||c&&(u||Pv(s)||Nv(s)))return{position:t,term:s,termIndex:o};t-=s.length}throw new Error("Cursor position could not be determined")},GS=({filters:n,position:e,term:t})=>t.length==0?n:e==0?[]:t.endsWith(":")&&e==t.length&&Pv(t)?n.find(({value:o})=>o==t.slice(0,-1))?.presets||[]:t.includes(":")||Nv(t)?[]:n.filter(({value:o,label:s})=>ar(t,[o,s],{word_order:"loose"})),Pv=n=>n.match(WS)!==null,Nv=n=>n.match(QS)!==null,YS=n=>{const e=n.split(KS).filter(Boolean);return e.length===0||e[e.length-1].endsWith(" ")?[...e,""]:e},ZS=(n,e)=>{let t=[],o=[];return n.forEach(s=>{const i=s.match(VS);if(!i){let m=s;m.startsWith('"')&&(m=m.slice(1)),m.endsWith('"')&&(m=m.slice(0,-1)),t.push(m);return}const[,c,u]=i,f=e.find(({value:m})=>m==c);if(f){let m=u;m.startsWith('"')&&(m=m.slice(1)),m.endsWith('"')&&(m=m.slice(0,-1)),o.push({filter:f,query:m})}}),[...o,t.join("")].filter(Tt)},JS=(n,e,t)=>n.reduce((o,s)=>s?typeof s=="string"?t?o.filter(i=>ar(s,i[t])):o:o.filter(i=>s.filter.evaluate(s.query,i)):o,e),bg=window.React.useCallback,jd=window.React.useMemo,eT=({cursorPosition:n,filters:e,handleQueryChange:t,query:o,search_field:s,setCursorPosition:i})=>{const c=jd(()=>YS(o),[o]),u=jd(()=>XS(c,n),[c,n]),f=jd(()=>{const{term:g,position:b}=u;return GS({filters:e,position:b,term:g})},[u,e]),m=bg(g=>{const{term:b,termIndex:v}=u,S=!b.includes(":")?g.value+":":b.split(":")[0]+":"+g.value,_=c;_[v]=S;const O=_.map(D=>D.length).filter((D,M)=>M<=v).reduce((D,M)=>D+M,0);t(_.join("")),i(O)},[u,t,i]),p=bg(g=>{const b=ZS(c,e);return JS(b,g,s)},[e,s,c]);return{applySuggestion:m,position:u.position,search:p,suggestions:f,term:u.term,termIndex:u.termIndex,terms:c}},tT=window.React.useCallback,nT=window.React.useState,rT=n=>n,oT=({start:n,transform:e=rT})=>{const[t,o]=nT(n),s=tT(i=>{o(e(i.currentTarget.value))},[e]);return[t,s]},aT=window.React.useCallback,sT=window.React.useState,Lv=(n="")=>{const[e,t]=sT(n),o=aT(s=>{t(s.target.value)},[]);return[e,o]},iT=window.React.Children,lT=window.React.cloneElement,zo=window.React.useCallback,au=window.React.useMemo,cT=window.Blueprint.Core.Button,uT=window.Blueprint.Core.Checkbox,Dv=window.Blueprint.Core.Classes,dT=window.Blueprint.Core.Code,fT=window.Blueprint.Core.ControlGroup,pT=window.Blueprint.Core.H4,hT=window.Blueprint.Core.H5,mT=window.Blueprint.Core.Icon,gT=window.Blueprint.Core.InputGroup,yT=window.Blueprint.Core.Menu,bT=window.Blueprint.Core.MenuItem,vT=window.Blueprint.Core.NumericInput,wT=window.Blueprint.Core.Switch,xT=window.Blueprint.Core.TextArea,CT=window.Blueprint.Select.Select,ET={canEscapeKeyClose:!1,minimal:!0,placement:"bottom",popoverClassName:H.POPOVER};function Dc(n){const e=n.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}const Yi=({children:n})=>d.jsx("div",{"zr-role":"settings-row",children:n}),Fi=({children:n,description:e=null,rightElement:t=null,title:o=null})=>d.jsxs("div",{"zr-role":"settings-row-col",children:[d.jsxs("div",{children:[o&&d.jsx(ka,{children:o}),e&&d.jsx(Vo,{children:e})]}),t,d.jsx("div",{"zr-role":"settings-row-col--container",children:n})]}),Fo=({children:n,description:e=null,onChange:t,options:o,selected:s,title:i=null})=>d.jsxs("div",{"zr-role":"settings-row-group",children:[d.jsxs("div",{children:[i&&d.jsx(ka,{children:i}),e&&d.jsx(Vo,{children:e})]}),iT.map(n,c=>lT(c,{handleSelect:t,options:o,selected:s}))]}),ST=({alignToBaseline:n=!1,children:e,description:t=null,handleSelect:o,id:s,options:i,selected:c})=>{const u=au(()=>c==s,[s,c]),f=zo(()=>o(s),[o,s]);return d.jsxs("div",{className:["zr-settings-rowgroup--option",n&&"align-items-baseline"].filter(Tt).join(" "),children:[d.jsx(uT,{checked:c==s,className:["zr-settings-rowgroup--option-label",u&&"selected"].filter(Tt).join(" "),inline:!1,labelElement:d.jsxs("div",{children:[d.jsx(TT,{children:i[s]}),t&&d.jsx(Vo,{children:t})]}),onChange:f}),e]})},ln=ST,ka=({children:n})=>d.jsx(pT,{children:n}),TT=({children:n})=>d.jsx(hT,{children:n}),Vo=({children:n})=>d.jsx("span",{className:[H.TEXT_SECONDARY,H.TEXT_SMALL].join(" "),children:n}),yn=({item:n,text:e=null})=>d.jsxs("div",{className:"zr-definition--wrapper",children:[d.jsx(dT,{className:"zr-definition--item",children:n}),e&&d.jsx("span",{children:e})]}),_T=({description:n=null,label:e,setValue:t,title:o=null,value:s,...i})=>{const c=zo((u,f)=>t(u),[t]);return d.jsxs(Yi,{children:[d.jsxs("div",{children:[o&&d.jsx(ka,{children:o}),n&&d.jsx(Vo,{children:n})]}),d.jsx(vT,{"aria-label":e,min:0,minorStepSize:1,onValueChange:c,selectAllOnFocus:!0,selectAllOnIncrement:!0,...i})]})},Mv=({buttonProps:n={},onSelect:e,options:t,popoverTargetProps:o={},value:s,...i})=>{const c=zo(p=>e(p.value),[e]),u=zo((p,g)=>{const{handleClick:b}=g,v=p.value==s;return d.jsx(bT,{htmlTitle:p.label,labelElement:v?d.jsx(mT,{icon:"small-tick"}):null,onClick:b,"aria-selected":v,text:p.label},p.value.toString())},[s]),f=zo(({items:p,itemsParentRef:g,renderItem:b})=>{const v=p.map(b).filter(w=>w!=null);return d.jsx(yT,{ulRef:g,...o,children:v})},[o]),m=au(()=>({...ET,targetProps:o}),[o]);return d.jsx(CT,{className:["zr-setting--single-input",H.TEXT_SMALL].join(" "),filterable:!1,itemListRenderer:f,itemRenderer:u,itemsEqual:"value",items:t,matchTargetWidth:!1,onItemSelect:c,popoverProps:m,...i,children:d.jsx(cT,{alignText:"right",intent:"primary",minimal:!0,rightIcon:"caret-down",text:t.find(p=>p.value==s).label,...n})})},xr=({buttonProps:n={},description:e=null,menuTitle:t,onSelect:o,options:s,title:i=null,value:c,...u})=>{const f=au(()=>({title:t}),[t]);return d.jsxs(Yi,{children:[d.jsxs("div",{children:[i&&d.jsx(ka,{children:i}),e&&d.jsx(Vo,{children:e})]}),d.jsx(Mv,{buttonProps:n,options:s,onSelect:o,popoverTargetProps:f,value:c,...u})]})},vg=({label:n=void 0,onChange:e,value:t,...o})=>{const s=zo(i=>e(i.target.value),[e]);return d.jsx(xT,{"aria-label":n,autoComplete:"off",className:[H.INPUT_TEXT,H.TEXT_AUXILIARY,H.TEXT_SMALL,Dv.CODE_BLOCK].join(" "),fill:!0,growVertically:!1,onChange:s,spellCheck:"false",title:n,value:t,...o})},kT=({children:n})=>d.jsx("div",{className:[H.INPUT_BOX,H.INPUT_TEXT].join(" "),"zr-role":"input-text",children:n}),RT=n=>!0,co=({description:n=null,ifEmpty:e=null,label:t=void 0,onChange:o,placeholder:s=void 0,title:i=null,validate:c=RT,value:u,...f})=>{const[m,{set:p}]=Lt(c(u)),g=zo(b=>{o(b.target.value),p(c(b.target.value))},[o,p,c]);return d.jsxs(Yi,{children:[d.jsxs("div",{children:[i&&d.jsx(ka,{children:i}),n&&d.jsx(Vo,{children:n})]}),d.jsx(kT,{children:u||e==!0?d.jsx("input",{"aria-invalid":!m,"aria-label":t,autoComplete:"off",className:[H.INPUT_BOX,H.INPUT_TEXT,H.TEXT_SMALL,Dv.INPUT].join(" "),onChange:g,placeholder:s,spellCheck:"false",title:t,type:"text",value:u,...f}):e})]})},gp=({description:n=null,onSelectChange:e,onValueChange:t,placeholder:o=void 0,selectOptions:s,selectValue:i,textValue:c,title:u=null,inputGroupProps:f={},inputLabel:m,selectButtonProps:p={},selectProps:g={},selectLabel:b})=>{const{popoverTargetProps:v,...w}=g,S=au(()=>({title:b,...v}),[b,v]),_=zo(O=>t(O.target.value),[t]);return d.jsxs(Yi,{children:[d.jsxs("div",{children:[u&&d.jsx(ka,{children:u}),n&&d.jsx(Vo,{children:n})]}),d.jsxs(fT,{className:"zr-text-select-group",children:[d.jsx(Mv,{buttonProps:p,onSelect:e,options:s,popoverTargetProps:S,value:i,...w}),d.jsx(gT,{"aria-label":m,autoComplete:"off",className:[H.INPUT_BOX,H.INPUT_TEXT,H.TEXT_SMALL].join(" "),onChange:_,placeholder:o,spellCheck:"false",title:m,type:"text",value:c,...f})]})]})},so=({description:n=null,isChecked:e,label:t,onChange:o=void 0,title:s=null,...i})=>d.jsxs(Yi,{children:[d.jsxs("div",{children:[s&&d.jsx(ka,{children:s}),n&&d.jsx(Vo,{children:n})]}),d.jsx(wT,{"aria-checked":e,checked:e,"aria-label":t,onChange:o,role:"switch",...i})]}),OT=window.React.createContext,jT=window.React.useCallback,AT=window.React.useContext,IT=window.React.useMemo,PT=window.React.useState;class lr{constructor(e={}){Ut(this,"context");Ut(this,"hooks");Ut(this,"Provider",({children:e,init:t,updater:o})=>{const[s,i]=PT(t),c=jT(f=>{i(m=>{const p=f(m);return this.hooks.beforeUpdate?.(m,p),o(p),this.hooks.afterUpdate?.(m,p),p})},[o]),u=IT(()=>[s,c],[s,c]);return d.jsx(this.context.Provider,{value:u,children:e})});Ut(this,"useSettings",()=>{const e=AT(this.context);if(!e)throw new Error("No context provided");return e});this.context=OT(null),this.hooks=e}}const wg=window.React.useMemo,NT=window.Blueprint.Core.Intent,{Provider:LT,useSettings:Os}=new lr({afterUpdate:(n,e)=>{window?.zoteroRoam?.updateSetting?.("annotations",e)}}),DT=[{label:"Group by date added",value:"dateAdded"},{label:"Don't group annotations",value:!1}],MT={default:"Default formatter",function:"Custom function"},BT=[{label:"Use raw metadata",value:"raw"},{label:"Use simplified data",value:"formatted"}],zT=d.jsxs(d.Fragment,{children:["Replacements available:",d.jsx(yn,{item:"{{comment}}",text:"the comment's text"})]}),FT=d.jsxs(d.Fragment,{children:["Replacements available:",d.jsx(yn,{item:"{{highlight}}",text:"the highlighted text"}),d.jsx(yn,{item:"{{page_label}}",text:"the page number"}),d.jsx(yn,{item:"{{link_page}}",text:"the link to the PDF page"}),d.jsx(yn,{item:"{{tags_string}}",text:"the tags associated with the highlight (comma-separated)"})]});function $T(){const[{func:n,group_by:e,template_comment:t,template_highlight:o,use:s,__with:i},c]=Os(),u=wg(()=>{function m(p,g){c(b=>({...b,[p]:g}))}return{updateFuncName:p=>m("func",p),updateGroupBy:p=>m("group_by",p),updateTemplateComment:p=>m("template_comment",p),updateTemplateHighlight:p=>m("template_highlight",p),updateUseType:p=>m("use",p),updateWithFormat:p=>m("__with",p)}},[c]),f=wg(()=>({intent:NT.PRIMARY}),[]);return d.jsxs(d.Fragment,{children:[d.jsx(Fi,{title:"Comment Template",description:zT,children:d.jsx(vg,{label:"Enter a template for comment blocks",onChange:u.updateTemplateComment,value:t})}),d.jsx(Fi,{title:"Highlight Template",description:FT,children:d.jsx(vg,{label:"Enter a template for highlight blocks",onChange:u.updateTemplateHighlight,value:o})}),d.jsxs(Fo,{title:"Formatter",description:"Choose a way to format annotations metadata when importing from Zotero.",onChange:u.updateUseType,options:MT,selected:s,children:[d.jsx(ln,{id:"default",children:d.jsx(xr,{menuTitle:"Select whether annotations should be grouped",onSelect:u.updateGroupBy,options:DT,value:e})}),d.jsx(ln,{id:"function",description:"Enter the inputs and name of your custom function.",children:d.jsx(gp,{onSelectChange:u.updateWithFormat,onValueChange:u.updateFuncName,placeholder:"e.g, myFunction",selectButtonProps:f,selectOptions:BT,selectValue:i,textValue:n,inputLabel:"Enter the name of your custom function for formatting annotations",selectLabel:"Select an input format for your custom function"})})]})]})}const UT=window.React.useMemo,{Provider:qT,useSettings:yp}=new lr,HT=[{label:"Citekey",value:"citekey"},{label:"Zettlr",value:"zettlr"}],VT={preset:"Preset",custom:"Custom template"},WT=[{label:"Citation",value:"citation"},{label:"Citekey",value:"citekey"},{label:"Citekey (raw)",value:"key"},{label:"Page reference",value:"pageref"},{label:"Popover",value:"popover"},{label:"Tag",value:"tag"}],QT={preset:"Preset",custom:"Custom template"},xg=d.jsxs(d.Fragment,{children:["Replacements available:",d.jsx(yn,{item:"{{authors}}",text:"Author et al."}),d.jsx(yn,{item:"{{citekey}}",text:"@someCitekey"}),d.jsx(yn,{item:"{{key}}",text:"someCitekey"}),d.jsx(yn,{item:"{{summary}}",text:"Author et al. (2023)"}),d.jsx(yn,{item:"{{summary_or_key}}"}),d.jsx(yn,{item:"{{title}}"}),d.jsx(yn,{item:"{{year}}"})]});function KT(){const[{display_char:n,display_use:e,display:t,format_char:o,format_use:s,format:i,trigger:c},u]=yp(),f=UT(()=>{function m(p,g){u(b=>({...b,[p]:g}))}return{updateDisplayChar:p=>m("display_char",p),updateDisplayUse:p=>m("display_use",p),updateDisplay:p=>m("display",p),updateFormatChar:p=>m("format_char",p),updateFormatUse:p=>m("format_use",p),updateFormat:p=>m("format",p),updateTrigger:p=>m("trigger",p)}},[u]);return d.jsxs(d.Fragment,{children:[d.jsx(co,{description:"The character(s) that should trigger the autocomplete. If no value is provided, the feature will be disabled.",ifEmpty:!0,label:"Enter a trigger for the 'autocomplete' feature",onChange:f.updateTrigger,placeholder:"e.g, @",title:"Trigger",value:c}),d.jsxs(Fo,{title:"Display",description:"How suggestions should be displayed in the autocomplete menu",onChange:f.updateDisplayUse,options:VT,selected:e,children:[d.jsx(ln,{id:"preset",children:d.jsx(xr,{menuTitle:"Select a display preset",onSelect:f.updateDisplay,options:HT,value:t})}),d.jsx(ln,{alignToBaseline:!0,id:"custom",description:xg,children:d.jsx(co,{ifEmpty:!0,label:"Enter a custom template",onChange:f.updateDisplayChar,placeholder:"e.g, {{key}}",value:n})})]}),d.jsxs(Fo,{title:"Format",description:"How references should be inserted into the current Roam block",onChange:f.updateFormatUse,options:QT,selected:s,children:[d.jsx(ln,{id:"preset",children:d.jsx(xr,{menuTitle:"Select a format preset",onSelect:f.updateFormat,options:WT,value:i})}),d.jsx(ln,{alignToBaseline:!0,id:"custom",description:xg,children:d.jsx(co,{ifEmpty:!0,label:"Enter a custom template",onChange:f.updateFormatChar,placeholder:"e.g, {{key}}",value:o})})]})]})}const XT=window.React.useMemo,{Provider:GT,useSettings:su}=new lr,YT=[{label:"Citation",value:"citation"},{label:"Citekey",value:"citekey"},{label:"Page reference",value:"page-reference"},{label:"Key",value:"raw"},{label:"Tag",value:"tag"}],ZT={preset:"Preset",template:"Custom template"},JT=[{label:"Alt",value:"altKey"},{label:"Ctrl",value:"ctrlKey"},{label:"Shift",value:"shiftKey"},{label:"System key",value:"metaKey"}],e_=d.jsxs(d.Fragment,{children:["Replacements available:",d.jsx(yn,{item:"{{authors}}",text:"Author et al."}),d.jsx(yn,{item:"{{key}}",text:"someCitekey"}),d.jsx(yn,{item:"{{title}}"}),d.jsx(yn,{item:"{{year}}"})]});function t_(){const[{always:n,overrideKey:e,preset:t,template:o,useAsDefault:s,useQuickCopy:i},c]=su(),u=XT(()=>{function f(p){c(g=>({...g,[p]:!g[p]}))}function m(p,g){c(b=>({...b,[p]:g}))}return{toggleAlwaysCopy:()=>f("always"),updateOverrideKey:p=>m("overrideKey",p),updatePresetFormat:p=>m("preset",p),updateTemplate:p=>m("template",p),updateUseType:p=>m("useAsDefault",p),toggleQuickCopy:()=>f("useQuickCopy")}},[c]);return d.jsxs(d.Fragment,{children:[d.jsx(so,{description:"Whether to always copy an item's reference in library search",isChecked:n,label:"Toggle 'always copy' setting",onChange:u.toggleAlwaysCopy,title:"Always copy"}),d.jsxs(Fo,{title:"Format",description:"The default formatting to use when copying an item's reference",onChange:u.updateUseType,options:ZT,selected:s,children:[d.jsx(ln,{id:"preset",children:d.jsx(xr,{menuTitle:"Select a formatting preset",onSelect:u.updatePresetFormat,options:YT,value:t})}),d.jsx(ln,{alignToBaseline:!0,id:"template",description:e_,children:d.jsx(co,{ifEmpty:!0,label:"Enter a custom formatting template",onChange:u.updateTemplate,value:o})})]}),d.jsx(xr,{description:"The key to hold to override QuickCopy",menuTitle:"Select an override key for Quick Copy",onSelect:u.updateOverrideKey,options:JT,title:"Override Key",value:e}),d.jsx(so,{description:"Should QuickCopy be enabled by default?",isChecked:i,label:"Toggle 'use quick copy by default' setting",onChange:u.toggleQuickCopy,title:"Use Quick Copy (default)"})]})}const Cg=window.React.useMemo,n_=window.Blueprint.Core.Intent,{Provider:r_,useSettings:Zi}=new lr,o_=[{label:"By name",value:"srcName"},{label:"By UID",value:"srcUid"}],a_={default:"Default formatter",function:"Custom function",smartblock:"SmartBlock"};function s_(){const[{func:n,smartblock:{param:e,paramValue:t},use:o},s]=Zi(),i=Cg(()=>{function u(m,p){s(g=>({...g,[m]:p}))}function f(m,p){const g=m=="param"?{param:p,paramValue:""}:{paramValue:p};s(b=>({...b,smartblock:{...b.smartblock,...g}}))}return{updateFuncName:m=>u("func",m),updateSmartblockParam:m=>f("param",m),updateSmartblockParamValue:m=>f("paramValue",m),updateUse:m=>u("use",m)}},[s]),c=Cg(()=>({intent:n_.PRIMARY}),[]);return d.jsxs(Fo,{title:"Formatter",description:"Choose a way to format item metadata when importing from Zotero.",onChange:i.updateUse,options:a_,selected:o,children:[d.jsx(ln,{id:"default"}),d.jsx(ln,{id:"function",description:"Enter the name of a custom function to use",children:d.jsx(co,{ifEmpty:!0,label:"Enter the name of the function to use for formatting metadata",onChange:i.updateFuncName,placeholder:"e.g, myFunction",value:n})}),d.jsx(ln,{id:"smartblock",description:"Choose a SmartBlock template",children:d.jsx(gp,{onSelectChange:i.updateSmartblockParam,onValueChange:i.updateSmartblockParamValue,placeholder:"Enter a value",selectButtonProps:c,selectOptions:o_,selectValue:e,textValue:t,inputLabel:"Enter the SmartBlock's"+(e=="srcName"?"name":"UID"),selectLabel:"Select the property to use to identify the SmartBlock"})})]})}const Eg=window.React.useMemo,i_=window.Blueprint.Core.Intent,{Provider:l_,useSettings:Ra}=new lr({afterUpdate:(n,e)=>{window?.zoteroRoam?.updateSetting?.("notes",e)}}),c_=[{label:"At the top",value:"top"},{label:"At the bottom",value:"bottom"}],u_=[{label:"Don't nest",value:!1},{label:"[[Notes]]",value:"[[Notes]]"}],d_={preset:"Preset",custom:"Custom content"},f_=[{label:"Newline",value:`
`},{label:"Paragraph",value:"</p>"}],p_={preset:"Preset",custom:"Custom separator"},h_={default:"Default formatter",function:"Custom function"},m_=[{label:"Use raw metadata",value:"raw"},{label:"Use HTML blocks",value:"text"}];function g_(){const[{func:n,nest_char:e,nest_position:t,nest_preset:o,nest_use:s,split_char:i,split_preset:c,split_use:u,use:f,__with:m},p]=Ra(),g=Eg(()=>{function v(w,S){p(_=>({..._,[w]:S}))}return{updateFuncName:w=>v("func",w),updateNestChar:w=>v("nest_char",w),updateNestPosition:w=>v("nest_position",w),updateNestPreset:w=>v("nest_preset",w),updateNestUse:w=>v("nest_use",w),updateSplitChar:w=>v("split_char",w),updateSplitPreset:w=>v("split_preset",w),updateSplitUse:w=>v("split_use",w),updateUseType:w=>v("use",w),updateWithFormat:w=>v("__with",w)}},[p]),b=Eg(()=>({intent:i_.PRIMARY}),[]);return d.jsxs(d.Fragment,{children:[d.jsxs(Fo,{title:"Divider",description:"The character(s) on which to split up notes into blocks",onChange:g.updateSplitUse,options:p_,selected:u,children:[d.jsx(ln,{id:"preset",children:d.jsx(xr,{menuTitle:"Select a separator preset",onSelect:g.updateSplitPreset,options:f_,value:c})}),d.jsx(ln,{id:"custom",description:"Special characters, like \\n, are not allowed.",children:d.jsx(co,{ifEmpty:!0,label:"Enter a custom separator",onChange:g.updateSplitChar,placeholder:"e.g, </p>",value:i})})]}),d.jsxs(Fo,{title:"Formatter",description:"Choose a way to format notes when importing from Zotero.",onChange:g.updateUseType,options:h_,selected:f,children:[d.jsx(ln,{id:"default"}),d.jsx(ln,{id:"function",description:"Enter the inputs and name of your custom function.",children:d.jsx(gp,{onSelectChange:g.updateWithFormat,onValueChange:g.updateFuncName,placeholder:"e.g, myFunction",selectButtonProps:b,selectOptions:m_,selectValue:m,textValue:n,inputLabel:"Enter the name of your custom function for formatting notes",selectLabel:"Select an input format for your custom function"})})]}),d.jsxs(Fo,{title:"Nesting",description:"Pick how to add notes to the Roam page.",onChange:g.updateNestUse,options:d_,selected:s,children:[d.jsx(ln,{id:"preset",children:d.jsx(xr,{menuTitle:"Select a nesting preset",onSelect:g.updateNestPreset,options:u_,value:o})}),d.jsx(ln,{id:"custom",description:"Enter the contents of the block under which notes should be nested",children:d.jsx(co,{ifEmpty:!0,label:"Enter the block's contents",onChange:g.updateNestChar,placeholder:"e.g, [[Notes]]",value:e})})]}),d.jsx(xr,{description:"The position at which to insert the blocks",menuTitle:"Select a position",onSelect:g.updateNestPosition,options:c_,title:"Position",value:t})]})}const y_=window.React.useMemo,{Provider:b_,useSettings:Ji}=new lr({beforeUpdate:(n,e)=>{n.cacheEnabled===!0&&e.cacheEnabled===!1&&setTimeout(()=>{window.zoteroRoam?.clearDataCache?.()},1e3)}});function v_(){const[{autoload:n,cacheEnabled:e,darkTheme:t,render_inline:o},s]=Ji(),i=y_(()=>{function c(u){s(f=>({...f,[u]:!f[u]}))}return{toggleAutoload:()=>c("autoload"),toggleCacheEnabled:()=>c("cacheEnabled"),toggleDarkTheme:()=>c("darkTheme"),toggleRenderInline:()=>c("render_inline")}},[s]);return d.jsxs(d.Fragment,{children:[d.jsx(so,{description:"Activate the extension on graph load",isChecked:n,label:"Toggle 'autoload' setting",onChange:i.toggleAutoload,title:"Autoload"}),d.jsx(so,{description:"Cache API data between sessions, to optimize loading times.",isChecked:e,label:"Toggle 'cache enabled' setting",onChange:i.toggleCacheEnabled,title:"Enable Cache"}),d.jsx(so,{isChecked:t,label:"Toggle 'dark theme' setting",onChange:i.toggleDarkTheme,title:"Use Dark Theme by default"}),d.jsx(so,{description:"This will display [[@citekey]] references as a formatted citation, like Scott et al. (2003). Block content will not be affected.",isChecked:o,label:"Toggle 'render inline' setting",onChange:i.toggleRenderInline,title:"Display references as citations"})]})}const Ad=window.React.useCallback,w_=window.React.useMemo,x_=window.Blueprint.Core.Icon,C_=window.Blueprint.Core.MenuItem,E_=window.Blueprint.Select.MultiSelect,S_={className:H.TEXT_SMALL,initialContent:null,itemPredicate:(n,e)=>ar(n,e.label,{any_case:!0,match:"partial",search_compounds:!1,word_order:"loose"}),itemsEqual:"value",openOnKeyDown:!0,popoverProps:{canEscapeKeyClose:!1,fill:!0,minimal:!0,popoverClassName:H.POPOVER},resetOnSelect:!0,tagInputProps:{inputProps:{autoComplete:"off",placeholder:"Add...",spellCheck:"false"},placeholder:"Click to add an element"},tagRenderer:n=>n.label};function T_({options:n=[],value:e=[],setValue:t,...o}){const s=w_(()=>n.filter(f=>e.includes(f.value)),[n,e]),i=Ad((f,m)=>t([...e,f.value]),[t,e]),c=Ad((f,m)=>t(e.filter(p=>p!=f.value)),[t,e]),u=Ad((f,m)=>{const{handleClick:p}=m,g=e.includes(f.value);return d.jsx(C_,{"aria-selected":g,labelElement:g?d.jsx(x_,{icon:"small-tick"}):null,onClick:p,text:f.label},f.value)},[e]);return d.jsx(E_,{itemRenderer:u,items:n,onItemSelect:i,onRemove:c,selectedItems:s,...S_,...o})}const __=window.React.memo,Sg=window.React.useCallback,k_=window.React.useState,Tg=window.Blueprint.Core.MenuItem,R_=window.Blueprint.Select.MultiSelect,O_=30,j_={canEscapeKeyClose:!1,className:"zr-input-tags",fill:!0,minimal:!0,popoverClassName:H.POPOVER},A_={inputProps:{"aria-label":"Add tags from Roam",placeholder:"Add tag",title:"Add tags from Roam"},leftIcon:"tag",tagProps:{minimal:!0}},I_={createNewItemFromQuery:n=>n,createNewItemRenderer:(n,e,t)=>d.jsx(Tg,{"aria-selected":e,htmlTitle:`Add tag, '${n}'`,icon:"small-plus",onClick:t,text:n}),itemRenderer:(n,e)=>{const{handleClick:t,modifiers:{active:o}}=e;return d.jsx(Tg,{"aria-selected":o,onClick:t,text:n},n)},itemListPredicate:(n,e)=>e.filter(t=>ar(n,t,{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"})).sort((t,o)=>t.length<o.length?-1:1).slice(0,O_),tagRenderer:n=>n},Bv=__(function(e){const{selectedTags:t,onRemove:o,onSelect:s,...i}=e,[c]=k_(()=>fS()),u=Sg((m,p)=>s(m),[s]),f=Sg((m,p)=>o(m),[o]);return d.jsx(R_,{className:H.TEXT_SMALL,createNewItemPosition:"first",fill:!0,initialContent:null,items:c,onItemSelect:u,onRemove:f,openOnKeyDown:!0,placeholder:"Add tags from Roam",popoverProps:j_,resetOnQuery:!0,resetOnSelect:!0,selectedItems:t,tagInputProps:A_,...I_,...i})}),P_=window.React.useMemo,{Provider:N_,useSettings:el}=new lr,L_=[{label:"Metadata import",value:"addMetadata"},{label:"Notes import",value:"importNotes"},{label:"Item details",value:"viewItemInfo"},{label:"Zotero link (local)",value:"openZoteroLocal"},{label:"Zotero link (web)",value:"openZoteroWeb"},{label:"PDF links",value:"pdfLinks"},{label:"Scite Badge",value:"sciteBadge"},{label:"Connected Papers link",value:"connectedPapers"},{label:"Semantic Scholar link",value:"semanticScholar"},{label:"Google Scholar link",value:"googleScholar"},{label:"Citations & References",value:"citingPapers"}],D_=[{label:"Default",value:"default"},{label:"Always",value:!0},{label:"Never",value:!1}];function M_(){const[{defaults:n,trigger:e},t]=el(),o=P_(()=>{function s(i,c){t(u=>({...u,[i]:c}))}return{updateMenuElems:i=>s("defaults",i),updateMenuTrigger:i=>s("trigger",i)}},[t]);return d.jsxs(d.Fragment,{children:[d.jsx(Fi,{title:"Elements",children:d.jsx(T_,{fill:!0,openOnKeyDown:!1,options:L_,setValue:o.updateMenuElems,value:n})}),d.jsx(xr,{description:"Select when contextual menus should be shown. By default, menus are displayed if the page title is longer than 5 characters.",menuTitle:"Select whether to show the page menu",onSelect:o.updateMenuTrigger,options:D_,title:"Show menus",value:e})]})}const B_=window.React.useMemo,z_=window.Blueprint.Core.Tag,F_=n=>"*".repeat(n.length);function $_({request:n}){const{apikey:e,dataURI:t,library:{path:o,type:s}}=n,i=B_(()=>{const c=s=="users"?{icon:"user",htmlTitle:"User library"}:s=="groups"?{icon:"people",htmlTitle:"Group library"}:{};return d.jsx(z_,{minimal:!0,...c,children:o})},[o,s]);return d.jsxs("div",{className:"zr-settings--card",children:[d.jsxs("div",{"zr-role":"settings-row",children:[d.jsx("span",{className:H.TEXT_AUXILIARY,children:"Library"}),d.jsx("div",{children:i})]}),d.jsxs("div",{"zr-role":"settings-row",children:[d.jsx("span",{className:H.TEXT_AUXILIARY,children:"Data URI"}),d.jsx("div",{children:t&&d.jsx("span",{children:t})})]}),d.jsxs("div",{"zr-role":"settings-row",children:[d.jsx("span",{className:H.TEXT_AUXILIARY,children:"API Key"}),d.jsx("div",{children:e&&d.jsx("span",{children:F_(e)})})]})]})}const U_=window.ReactDOM.unmountComponentAtNode,q_=window.Blueprint.Core.parseKeyCombo;function zv(n){const e=Array.isArray(n)?n:[n];if(e.length==0)return console.warn("At least one data request must be specified for the extension to function. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/zotero-roam/getting-started/api"),{dataRequests:[],apiKeys:[],libraries:[]};{const t=e.find(o=>o.apikey)?.apikey;if(t){const o=e.map(c=>{if("library"in c){const{apikey:u,library:f,name:m=""}=c,{id:p,type:g}=f;if(!p||isNaN(Number(p)))throw new Error("A library ID is missing or invalid. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");if(!g||!["users","groups"].includes(g))throw new Error("A library type is missing or invalid. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");return{apikey:u||t,dataURI:[g,p,"items"].join("/"),library:{id:p,path:[g,p].join("/"),type:g,uri:"items"},name:m}}else{const{apikey:u,dataURI:f,name:m=""}=c;if(!f)throw new Error("Each data request must be assigned a data URI. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");const p=[...f.matchAll(/(users|groups)\/(\d+?)\/(items.*)/g)];if(p.length==0)throw new Error(`An incorrect data URI was provided for a request : ${f}. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/prereqs#zotero-api-credentials`);const[,g,b,v]=p[0];return{apikey:u||t,dataURI:f,library:{id:b,path:[g,b].join("/"),type:g,uri:v},name:m}}}),s=Array.from(new Set(o.map(c=>c.apikey))),i=o.reduce((c,u)=>{const{library:{path:f},apikey:m}=u;if(c.find(g=>g.path==f))throw new Error(`The same library was provided twice: ${f}.`);return c.push({path:f,apikey:m}),c},[]);return{dataRequests:o,apiKeys:s,libraries:i}}else throw new Error("At least one data request must be assigned an API key. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/zotero-roam/getting-started/api")}}function H_(n){const e=uf;return{persistClient:async t=>{try{await(await n.selectStore(ya)).set(e,t)}catch(o){throw window.zoteroRoam?.error?.({origin:"Database",message:"Failed to persist query client",context:{error:Kt(o)}}),o}},removeClient:async()=>{try{return await(await n.selectStore(ya)).delete(e)}catch(t){throw window.zoteroRoam?.error?.({origin:"Database",message:"Failed to remove query client",context:{error:Kt(t)}}),t}},restoreClient:async()=>{try{return await(await n.selectStore(ya)).get(e)}catch(t){throw window.zoteroRoam?.error?.({origin:"Database",message:"Failed to restore query client",context:{error:Kt(t)}}),t}}}}function V_(n){const{queryKey:e}=n;return e.includes("permissions")||e[0]=="permissions"?!1:vb(n)}function Fv(n){const{annotations:e={},autocomplete:t={},copy:o={},metadata:s={},notes:i={},other:c={},pageMenu:u={},sciteBadge:f={},shortcuts:m={},typemap:p={},webimport:g={}}=n;return{annotations:{func:"",group_by:!1,template_comment:"{{comment}}",template_highlight:"[[>]] {{highlight}} ([p. {{page_label}}]({{link_page}})) {{tags_string}}",use:"default",__with:"formatted",...e},autocomplete:{display_char:"",display_use:"preset",display:"citekey",format_char:"",format_use:"preset",format:"citation",trigger:"",...t},copy:{always:!1,overrideKey:"shiftKey",preset:"citekey",template:"@{{key}}",useAsDefault:"preset",useQuickCopy:!1,...o},metadata:{func:"",smartblock:{param:"srcUid",paramValue:""},use:"default",...s},notes:{func:"",nest_char:"",nest_position:"top",nest_preset:"[[Notes]]",nest_use:"preset",split_char:"",split_preset:`
`,split_use:"preset",use:"default",__with:"text",...i},other:{autoload:!1,cacheEnabled:!1,darkTheme:!1,render_inline:!1,...c},pageMenu:{defaults:["addMetadata","importNotes","viewItemInfo","openZoteroLocal","openZoteroWeb","pdfLinks","sciteBadge","connectedPapers","semanticScholar","googleScholar","citingPapers"],trigger:"default",...u},sciteBadge:{layout:"horizontal",showLabels:!1,showZero:!0,small:!1,tooltipPlacement:"auto",tooltipSlide:0,...f},shortcuts:{copyDefault:"",copyCitation:"",copyCitekey:"",copyPageRef:"",copyTag:"",focusSearchBar:"",goToItemPage:"",importMetadata:"",toggleDashboard:"",toggleNotes:"alt+N",toggleSearchPanel:"alt+E",toggleSettingsPanel:"",toggleQuickCopy:"",...js(m)},typemap:{...yC,...p},webimport:{tags:[],...g}}}function W_({extensionAPI:n}){const e=n.settings.getAll(),t=Fv(e||{});Object.entries(t).forEach(([s,i])=>{n.settings.set(s,i)});let o=n.settings.get("requests");return o||(o={dataRequests:[],apiKeys:[],libraries:[]},n.settings.set("requests",o)),{requests:o,settings:t}}function Q_({manualSettings:n}){const{dataRequests:e=[]}=n,t=Fv(n);return{requests:zv(e),settings:t}}function K_(n){const{requests:e,settings:t}=n.context=="roam/depot"?W_(n):Q_(n);return{requests:e,settings:t}}function X_(n=!1){document.getElementsByTagName("body")[0].setAttribute("zr-dark-theme",(n==!0).toString())}function G_(){$v();const n=document.querySelector(".rm-topbar .rm-find-or-create-wrapper"),e=document.createElement("span");e.id=Jf,n?.insertAdjacentElement("afterend",e);const t=document.createElement("div");t.id=Zf,document.getElementById("app")?.appendChild(t)}function Y_({settings:n}){X_(n.other.darkTheme),eS(),oS()}function $v(){const n=document.getElementById(Jf);if(n)try{U_(n),n.remove()}catch(e){console.error(e)}document.getElementById(Zf)?.remove()}function js(n){const e={};return Object.keys(n).forEach(t=>{const o=n[t];if(o=="")e[t]=o;else try{q_(n[t]),e[t]=n[t]}catch{window.zoteroRoam?.warn?.({origin:"Shortcuts",message:"Invalid hotkey: "+n[t]})}}),e}const Tf=window.React.useCallback,_g=window.React.useEffect,Z_=window.React.useMemo,J_=window.React.useRef,Uv=window.React.useState,$i=window.Blueprint.Core.Button,Oi=window.Blueprint.Core.Classes,bp=window.Blueprint.Core.ControlGroup,Id=window.Blueprint.Core.FormGroup,ek=window.Blueprint.Core.H6,Pd=window.Blueprint.Core.InputGroup,tk=window.Blueprint.Core.MenuItem,nk=window.Blueprint.Select.Select,rk={itemRenderer:(n,e)=>{const{handleClick:t}=e;return d.jsx(tk,{onClick:t,text:n.label},n.value)},popoverProps:{canEscapeKeyClose:!1,minimal:!0,placement:"bottom-right",popoverClassName:H.POPOVER,targetProps:{title:"Select the type of library you want to use"}}},ok=[{label:"User library",value:"users"},{label:"Group library",value:"groups"}];function qv({inputRef:n=void 0,pos:e,req:t,updateReq:o}){const{apikey:s,library:{type:i,id:c},name:u}=t,f=Z_(()=>{function m(g,b){o({...t,[g]:b.target.value})}function p(g,b){o({...t,library:{...t.library,[g]:b}})}return{updateAPIKey:g=>m("apikey",g),updateLibraryType:g=>p("type",g.value),updateLibraryID:g=>p("id",g.target.value),updateName:g=>m("name",g)}},[t,o]);return d.jsxs(d.Fragment,{children:[d.jsx(Id,{label:"Library",labelFor:"req-library"+e,children:d.jsxs(bp,{children:[d.jsx(nk,{filterable:!1,items:ok,onItemSelect:f.updateLibraryType,...rk,children:d.jsx($i,{active:!0,className:H.TEXT_SMALL,icon:i=="users"?"user":"people",intent:"primary",minimal:!0,rightIcon:"caret-down",text:i})}),d.jsx(Pd,{className:[H.INPUT_BOX,H.INPUT_TEXT,H.TEXT_SMALL].join(" "),id:"req-library"+e,inputRef:n,onChange:f.updateLibraryID,placeholder:"e.g, 123456",value:c})]})}),d.jsx(Id,{label:"API Key",labelFor:"req-apikey"+e,children:d.jsx(Pd,{className:[H.INPUT_BOX,H.INPUT_TEXT,H.TEXT_SMALL].join(" "),id:"req-apikey"+e,onChange:f.updateAPIKey,placeholder:"Zotero API key",value:s})}),d.jsx(Id,{label:"Name",labelFor:"req-name"+e,children:d.jsx(Pd,{className:[H.INPUT_BOX,H.INPUT_TEXT,H.TEXT_SMALL].join(" "),id:"req-name"+e,onChange:f.updateName,placeholder:"Nickname (optional)",value:u})})]})}const kg={apikey:"",library:{type:"users",id:""},name:""};function ak({dispatch:n,inputRef:e}){const[t,o]=Uv(kg),s=Tf(()=>{n({type:"add",value:t}),o(kg)},[n,t]);return d.jsx("div",{className:"zr-data-request new",children:d.jsxs(bp,{children:[d.jsx(qv,{inputRef:e,pos:"new",req:t,updateReq:o}),d.jsx($i,{className:[H.TEXT_SMALL,Oi.FIXED].join(" "),intent:"success",minimal:!0,onClick:s,text:"Add",title:"Add the request"})]})})}function sk({dispatch:n,pos:e,req:t}){return d.jsx("div",{className:"zr-data-request existing",children:d.jsxs(bp,{children:[d.jsx(qv,{pos:e,req:t,updateReq:o=>n({type:"updateSelf",value:o})}),d.jsx($i,{className:Oi.FIXED,icon:"remove",intent:"danger",minimal:!0,onClick:()=>n({type:"removeSelf"}),title:"Remove the request"})]})})}function ik({closeDialog:n,dataRequests:e=[],updateRequests:t}){const[o,s]=AS(e),[i,c]=Uv(null),u=J_(null);_g(()=>{c(null)},[o]),_g(()=>{u?.current?.focus()},[]);const f=Tf((p,g)=>{switch(g.type){case"removeSelf":return s({type:"remove",index:p});case"updateSelf":return s({type:"update",index:p,value:g.value});default:return}},[s]),m=Tf(()=>{try{const p=zv(o);t(p),n()}catch(p){c(p)}},[n,o,t]);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:Oi.DIALOG_BODY,children:[o.map((p,g)=>d.jsx(sk,{pos:g,req:p,dispatch:b=>f(g,b)},g)),d.jsx(ek,{children:"Add a new request"}),d.jsx(ak,{dispatch:s,inputRef:u}),i&&d.jsx(ep,{error:i})]}),d.jsx("div",{className:Oi.DIALOG_FOOTER,children:d.jsxs("div",{className:Oi.DIALOG_FOOTER_ACTIONS,children:[d.jsx($i,{minimal:!0,onClick:n,text:"Cancel"}),d.jsx($i,{intent:"primary",minimal:!0,onClick:m,text:"OK"})]})})]})}const lk=window.React.useCallback,ck=window.Blueprint.Core.Button,uk=window.Blueprint.Core.Dialog,{Provider:dk,useSettings:Un}=new lr({afterUpdate:(n,e)=>{window?.zoteroRoam?.updateLibraries?.(e.libraries)}});function fk(){const[{dataRequests:n},e]=Un(),[t,{on:o,off:s}]=Lt(!1),i=lk(c=>e(u=>c),[e]);return d.jsxs(d.Fragment,{children:[d.jsx(Fi,{title:"Data Requests",description:"Choose which items to sync from Zotero",rightElement:d.jsx(ck,{className:H.TEXT_SMALL,icon:n.length==0?"arrow-right":null,intent:"warning",minimal:!0,onClick:o,text:n.length==0?"Add request":"Edit"}),children:n.map(c=>d.jsx($_,{request:c},c.name))}),d.jsx(uk,{className:"zr-data-requests-dialog",isOpen:t,onClose:s,children:d.jsx(ik,{closeDialog:s,dataRequests:n,updateRequests:i})})]})}var Hv={exports:{}};/*! For license information please see badge.bundle.js.LICENSE.txt */(function(n,e){(function(t,o){n.exports=o()})(self,()=>(()=>{var t={184:(c,u)=>{var f;(function(){var m={}.hasOwnProperty;function p(){for(var g=[],b=0;b<arguments.length;b++){var v=arguments[b];if(v){var w=typeof v;if(w==="string"||w==="number")g.push(v);else if(Array.isArray(v)){if(v.length){var S=p.apply(null,v);S&&g.push(S)}}else if(w==="object")if(v.toString===Object.prototype.toString)for(var _ in v)m.call(v,_)&&v[_]&&g.push(_);else g.push(v.toString())}}return g.join(" ")}c.exports?(p.default=p,c.exports=p):(f=function(){return p}.apply(u,[]))===void 0||(c.exports=f)})()},180:(c,u,f)=>{f.d(u,{Z:()=>g});var m=f(645),p=f.n(m)()(function(b){return b[1]});p.push([c.id,"@import url(https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&display=swap);"]),p.push([c.id,'@font-face{font-family:scite-icons;font-style:normal;font-weight:400;src:url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.eot?v=5);src:url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.eot?v=5#iefix) format("embedded-opentype"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.woff2?v=5) format("woff2"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.woff?v=5) format("woff"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.ttf?v=5) format("truetype"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.svg?v=5#fontello) format("svg")}.Icon__icon___rkFdu{speak:none;font-family:scite-icons!important;font-style:normal!important;font-variant:normal!important;font-weight:400!important;line-height:1.5!important;text-transform:none!important}.Icon__unclassified___KG7dh:before{color:#828179;content:"\\e80a"}.Icon__contrasting___XemUp:before{color:#0062ff;content:"\\e80a"}.Icon__mentioning___eZSXr:before{color:#393f43;content:"\\e902"}.Icon__supporting___6A01H:before{color:#26a65b;content:"\\e903"}.Icon__retractions___\\+fJ\\+N:before{color:#ff3b30;content:"\\e901"}.Icon__notices___DbL2K:before{color:#82807d;content:"\\e90a"}.Icon__publications___3dd2q:before{color:#82807d;content:"\\e90b"}.Icon__smallIcon___3rDRZ{line-height:1rem!important}.Icon__openingArrow___pSL8O:before{color:#82807d;content:"\\e922"}.Icon__closingCaret___EMT7i:before{color:#82807d;content:"\\e925"}.Count__count___VwSFw{display:flex;font-size:14.5px}.Count__label___UClje{display:inline-block;margin-right:12px;text-transform:capitalize;width:82px}.Count__smallLabel___E3KvK{margin-right:6px;text-transform:capitalize}.Count__iconCountWrapper___CTSi2{box-sizing:border-box;display:inline-block}.Count__sectionTallyIconCountWrapper___lTlUR{box-sizing:border-box;display:flex}.Count__expandedIconCount___c3tc2{align-items:center;display:inline-flex;justify-content:space-between;width:100%}.Count__number___4oBqJ{margin-left:8px}.Count__smallNumber___wi6E7{margin-left:6px}.Count__horizontal___wp4Sz{border-left:1px solid #cfcfcf;padding:4px 8px}.Count__horizontal___wp4Sz:first-child{border-left:none}.Count__horizontal___wp4Sz>.Count__label___UClje{width:auto}.Count__horizontal___wp4Sz>.Count__sectionTallyIconCountWrapper___lTlUR>.Count__label___UClje{vertical-align:middle;width:auto}.Count__small___kecST{font-size:10px;padding:2px 4px}.Tally__tally___wF-n7 *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Tally__tally___wF-n7{background-color:#fff;color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;opacity:0;padding:8px 12px 0 8px;pointer-events:none;transition:all .2s ease-in-out;will-change:opacity,background-color}.Tally__badgeTally___AkCwi{border-radius:8px 0 0 0;padding-bottom:8px}.Tally__horizontal___TYyqc{flex-direction:row;height:100%;padding:0 8px}.Tally__show___EesAt{opacity:1;pointer-events:auto}.Tally__tally___wF-n7:hover{background-color:#f4f4f4}.Tally__logo___k79zv{display:block;margin-bottom:8px;max-width:4em;width:4em}.Tally__logoSmall___JZuyy{max-width:3em;padding-left:4px;width:3em}.Tally__small___lrym1{padding:0 4px}.Tally__forceCollapse___4k5aa{display:none}.HideableTally__tally___TXiqB *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.HideableTally__tally___TXiqB{background-color:#fff;color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;transition:all .2s ease-in-out;will-change:opacity,background-color}.HideableTally__tally___TXiqB:hover{background-color:#f4f4f4}.HideableTally__hideContainer___w5Wlj{align-items:center;color:#82807d;display:flex;font-size:12px;padding-left:8px;z-index:1}.HideableTally__logoSingleLetter___OwmJA{max-width:1em;width:1em}.HideableTally__logoContainer___kXnxF{align-items:center;display:flex;padding-right:8px}.HideableTally__openingArrow___yBpbp{color:#82807d;font-size:16px;font-weight:600;margin-right:4px}.HideableTally__closingArrow___pKIyO{color:#82807d;display:block;font-size:16px;font-weight:600;max-width:1em;width:1em}.SectionIcon__sectionIcon___nqPTw{speak:none;display:inline-block!important;font-style:normal!important;font-variant:normal!important;font-weight:400!important;line-height:1.5!important;margin-right:5px!important}.SectionIcon__sectionIcon___nqPTw:before{border-radius:4px;color:#fff;display:inline-block!important;padding:2px 4px;text-align:center;transform:scale(1);width:12px}.SectionIcon__introduction___uhUFG:before{background:#002ab2;content:"I"}.SectionIcon__methods___RVooU:before{background:#0036e5;content:"M"}.SectionIcon__results___1k9LI:before{background:#0062ff;content:"R"}.SectionIcon__discussion___Qeyb0:before{background:#66a3ff;content:"D"}.SectionIcon__other___uF\\+vV:before{background:#9ec4f0;content:"O"}.SectionIcon__smallSectionIcon___nCjHN{line-height:1!important}.SectionTally__sectionTallyWidget___aaCj5 *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.SectionTally__sectionTallyWidget___aaCj5{padding:8px}.SectionTally__sectionTallyWidget___aaCj5:hover{background-color:#f4f4f4!important}.SectionTally__sectionTallyWrapper___nwj2j{align-items:center;display:flex}.SectionTally__tally___es9p7{color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;opacity:0;padding-bottom:0;padding-right:12px;pointer-events:none;transition:all .2s ease-in-out;will-change:opacity,background-color}.SectionTally__badgeTally___ZYqar{border-radius:8px 0 0 0;padding-bottom:8px}.SectionTally__horizontal___-hgL\\+{flex-direction:row;height:100%;padding:0 8px}.SectionTally__show___wciqp{opacity:1;pointer-events:auto}.SectionTally__logo___pEojg{display:block;margin-bottom:8px;max-width:4em;width:4em}.SectionTally__logoSmall___yzxV\\+{max-width:3em;padding-left:4px;width:3em}.SectionTally__small___QBk26{padding:0 4px}.SectionTally__forceCollapse___MexwG{display:none}.SectionTally__chartSubheading___tm7gz{font-family:IBM Plex Sans,sans-serif;font-size:12px;margin-top:4px;text-align:center;width:140px}.SectionTally__chartLabel___Nm4F\\+{display:block;font-weight:600}',""]);const g=p},717:(c,u,f)=>{f.d(u,{Z:()=>g});var m=f(645),p=f.n(m)()(function(b){return b[1]});p.push([c.id,`.AT5rL7aTm8KKajD1LMmpXg\\=\\= {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 16px;

    opacity: 0;
    pointer-events: none;
    will-change: opacity;
    transition: opacity 200ms ease-in-out;

    padding: 16px;

    border: 1px solid #ebebeb;
    border-radius: 8px;
    background-color: white;
    box-shadow: 0px 0px 37px 0px rgba(0,0,0,0.05);

    z-index: 9999;

    width: 250px;
    height: auto;

    cursor: pointer;
}

._2Xtymibu3VEV-gq1N5m\\+aA\\=\\= {
    opacity: 1;
    pointer-events: auto;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:before {
	top: 100%;
	left: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-top-color: #FFFFFF;
	border-width: 10px;
	margin-left: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-top-color: #ebebeb;
	border-width: 11px;
	margin-left: -11px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:before {
	left: 100%;
	top: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-left-color: #ffffff;
	border-width: 10px;
	margin-top: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-left-color: #ebebeb;
	border-width: 11px;
	margin-top: -11px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:before {
	right: 100%;
	top: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-right-color: #ffffff;
	border-width: 10px;
	margin-top: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-right-color: #ebebeb;
	border-width: 11px;
	margin-top: -11px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:before {
	bottom: 100%;
	left: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-bottom-color: #FFFFFF;
	border-width: 10px;
	margin-left: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-bottom-color: #ebebeb;
	border-width: 11px;
	margin-left: -11px;
}

.poEjDAx2EewNn\\+kdnuCNbw\\=\\= {
    /* So it doesn't get wider than the badge itself
     * based on the width of the container */
}

.MlC\\+r-CmnNCcLkgYD8Dr3A\\=\\= {
    font-size: 14px;
}


.JqOPSu81MQ6f4Zf9z\\+kqGA\\=\\= {
    line-height: 1.5;
}

.GPqI5vpEM4VpfAAz4n7HHw\\=\\= {
    display: inline-block;
    margin-top: 0.5rem;
}

.-hEUP2QMiuX6a9sr7dC-lw\\=\\= {
	margin: 0.5rem 0;
	font-weight: bold;
}

.LzVcQqdJWiY7N8-Sq-TVuQ\\=\\= {
    display: inline-block;
}

.VbAViV4Slh84iH9X2erp\\+w\\=\\= {
	display: inline;
}

.f3QM6zcZemgDMSOwqIK2TA\\=\\= {
    display: block;
	margin: 0.5rem 0;
	margin-left: 1rem;
}

.bcxXMmw49C9aDY85vGYeXQ\\=\\= {
    color: #828179;
}

.lrdLQN2-BBgxsMDjSuuRzA\\=\\= {
    font-weight: bold;
    color: black;
}

.sUhEpXXzA4dizL2jxbvHFA\\=\\= {
    text-decoration: none;
    color: inherit;
    font-weight: inherit;
    transition: 200ms opacity ease-in-out;
}

.sUhEpXXzA4dizL2jxbvHFA\\=\\=:hover, .sUhEpXXzA4dizL2jxbvHFA\\=\\=:active {
    opacity: 0.8;
}

._13xrsxGwhLy89Cqv\\+5JjQw\\=\\= {
    display: inline-block;
    background-color: #0062FF;

    border-radius: 6px;

    padding: 6px 12px;
	margin-top: 12px;

    color: white;
    text-decoration: none;

    transition: background-color 200ms ease-in-out;
}

._13xrsxGwhLy89Cqv\\+5JjQw\\=\\=:hover {
    background-color: #4da3ff;

    /* For (a) site(s) that specifies a:hover color to be inherit */
    color: white;

}

._80i\\+8Z8J94Dfk-D9w-MGTw\\=\\= {
  display: block;
  width: 5em;
}

.WtCeh9Ck5GR\\+4htw\\+R1oCg\\=\\= {
	display: block;
	margin: 0.5rem 0;
}


.V5f0vIfUVJ2Syht6KzU80Q\\=\\= {
	color: #D84215;
	font-weight: bold;
}

.AvwIr2RDj3wSP30wVV5UDw\\=\\= {
	color: black;
	font-weight: bold;
}
`,""]),p.locals={tooltip:"AT5rL7aTm8KKajD1LMmpXg==",tooltipShow:"_2Xtymibu3VEV-gq1N5m+aA==",reference:"poEjDAx2EewNn+kdnuCNbw==",tooltipContent:"MlC+r-CmnNCcLkgYD8Dr3A==",tally:"JqOPSu81MQ6f4Zf9z+kqGA==",tallyCounts:"GPqI5vpEM4VpfAAz4n7HHw==",tallyCount:"-hEUP2QMiuX6a9sr7dC-lw==",labels:"LzVcQqdJWiY7N8-Sq-TVuQ==",noticeLabel:"VbAViV4Slh84iH9X2erp+w==",label:"f3QM6zcZemgDMSOwqIK2TA==",message:"bcxXMmw49C9aDY85vGYeXQ==",bold:"lrdLQN2-BBgxsMDjSuuRzA==",link:"sUhEpXXzA4dizL2jxbvHFA==",button:"_13xrsxGwhLy89Cqv+5JjQw==",logo:"_80i+8Z8J94Dfk-D9w-MGTw==",slogan:"WtCeh9Ck5GR+4htw+R1oCg==",retractionsCopy:"V5f0vIfUVJ2Syht6KzU80Q==",noticeCopy:"AvwIr2RDj3wSP30wVV5UDw=="};const g=p},696:(c,u,f)=>{f.d(u,{Z:()=>g});var m=f(645),p=f.n(m)()(function(b){return b[1]});p.push([c.id,`.scite-badge {
    display: inline-block;
}

.scite-badge .scite-tally {
    border-radius: 8px;
    border: 1px solid #cfcfcf;
    min-height: 120px;

    box-sizing: border-box;
}

.scite-badge[data-show-labels='true'] .scite-tally {
}

.scite-badge[data-layout='horizontal'] .scite-tally {
    min-height: 0px;
    max-height: 32px;
}

.scite-badge:not([data-chart-type]) .scite-section-tally {
    border-radius: 8px;
    height: min-content;
    width: min-content;
    padding: 8px 0px 0px 8px;
    border: 1px solid #cfcfcf;
    box-sizing: border-box;
}

.scite-badge[data-section-tally-layout='horizontal'] .scite-section-tally {
    padding: 0px;
}
`,""]),p.locals={};const g=p},645:c=>{c.exports=function(u){var f=[];return f.toString=function(){return this.map(function(m){var p=u(m);return m[2]?"@media ".concat(m[2]," {").concat(p,"}"):p}).join("")},f.i=function(m,p,g){typeof m=="string"&&(m=[[null,m,""]]);var b={};if(g)for(var v=0;v<this.length;v++){var w=this[v][0];w!=null&&(b[w]=!0)}for(var S=0;S<m.length;S++){var _=[].concat(m[S]);g&&b[_[0]]||(p&&(_[2]?_[2]="".concat(p," and ").concat(_[2]):_[2]=p),f.push(_))}},f}},418:c=>{var u=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function p(g){if(g==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}c.exports=function(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de",Object.getOwnPropertyNames(g)[0]==="5")return!1;for(var b={},v=0;v<10;v++)b["_"+String.fromCharCode(v)]=v;if(Object.getOwnPropertyNames(b).map(function(S){return b[S]}).join("")!=="0123456789")return!1;var w={};return"abcdefghijklmnopqrst".split("").forEach(function(S){w[S]=S}),Object.keys(Object.assign({},w)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(g,b){for(var v,w,S=p(g),_=1;_<arguments.length;_++){for(var O in v=Object(arguments[_]))f.call(v,O)&&(S[O]=v[O]);if(u){w=u(v);for(var D=0;D<w.length;D++)m.call(v,w[D])&&(S[w[D]]=v[w[D]])}}return S}},448:(c,u,f)=>{var m=f(294),p=f(418),g=f(840);function b(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!m)throw Error(b(227));var v=new Set,w={};function S(r,a){_(r,a),_(r+"Capture",a)}function _(r,a){for(w[r]=a,r=0;r<a.length;r++)v.add(a[r])}var O=!(typeof window>"u"||window.document===void 0||window.document.createElement===void 0),D=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M=Object.prototype.hasOwnProperty,W={},X={};function N(r,a,l,h,y,x,E){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=y,this.mustUseProperty=l,this.propertyName=r,this.type=a,this.sanitizeURL=x,this.removeEmptyString=E}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){I[r]=new N(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];I[a]=new N(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){I[r]=new N(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){I[r]=new N(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){I[r]=new N(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){I[r]=new N(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){I[r]=new N(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){I[r]=new N(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){I[r]=new N(r,5,!1,r.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function $(r){return r[1].toUpperCase()}function ue(r,a,l,h){var y=I.hasOwnProperty(a)?I[a]:null;(y!==null?y.type===0:!h&&2<a.length&&(a[0]==="o"||a[0]==="O")&&(a[1]==="n"||a[1]==="N"))||(function(x,E,R,j){if(E==null||function(q,ae,ke,me){if(ke!==null&&ke.type===0)return!1;switch(typeof ae){case"function":case"symbol":return!0;case"boolean":return!me&&(ke!==null?!ke.acceptsBooleans:(q=q.toLowerCase().slice(0,5))!=="data-"&&q!=="aria-");default:return!1}}(x,E,R,j))return!0;if(j)return!1;if(R!==null)switch(R.type){case 3:return!E;case 4:return E===!1;case 5:return isNaN(E);case 6:return isNaN(E)||1>E}return!1}(a,l,y,h)&&(l=null),h||y===null?function(x){return!!M.call(X,x)||!M.call(W,x)&&(D.test(x)?X[x]=!0:(W[x]=!0,!1))}(a)&&(l===null?r.removeAttribute(a):r.setAttribute(a,""+l)):y.mustUseProperty?r[y.propertyName]=l===null?y.type!==3&&"":l:(a=y.attributeName,h=y.attributeNamespace,l===null?r.removeAttribute(a):(l=(y=y.type)===3||y===4&&l===!0?"":""+l,h?r.setAttributeNS(h,a,l):r.setAttribute(a,l))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(P,$);I[a]=new N(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(P,$);I[a]=new N(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(P,$);I[a]=new N(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){I[r]=new N(r,1,!1,r.toLowerCase(),null,!1,!1)}),I.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){I[r]=new N(r,1,!1,r.toLowerCase(),null,!0,!0)});var he=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ge=60103,ye=60106,G=60107,ve=60108,ie=60114,we=60109,ze=60110,Xe=60112,Le=60113,Je=60120,pt=60115,A=60116,B=60121,Z=60128,de=60129,se=60130,Y=60131;if(typeof Symbol=="function"&&Symbol.for){var ne=Symbol.for;ge=ne("react.element"),ye=ne("react.portal"),G=ne("react.fragment"),ve=ne("react.strict_mode"),ie=ne("react.profiler"),we=ne("react.provider"),ze=ne("react.context"),Xe=ne("react.forward_ref"),Le=ne("react.suspense"),Je=ne("react.suspense_list"),pt=ne("react.memo"),A=ne("react.lazy"),B=ne("react.block"),ne("react.scope"),Z=ne("react.opaque.id"),de=ne("react.debug_trace_mode"),se=ne("react.offscreen"),Y=ne("react.legacy_hidden")}var Ce,Oe=typeof Symbol=="function"&&Symbol.iterator;function Ee(r){return r===null||typeof r!="object"?null:typeof(r=Oe&&r[Oe]||r["@@iterator"])=="function"?r:null}function at(r){if(Ce===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ce=a&&a[1]||""}return`
`+Ce+r}var _t=!1;function Gt(r,a){if(!r||_t)return"";_t=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(j){var h=j}Reflect.construct(r,[],a)}else{try{a.call()}catch(j){h=j}r.call(a.prototype)}else{try{throw Error()}catch(j){h=j}r()}}catch(j){if(j&&h&&typeof j.stack=="string"){for(var y=j.stack.split(`
`),x=h.stack.split(`
`),E=y.length-1,R=x.length-1;1<=E&&0<=R&&y[E]!==x[R];)R--;for(;1<=E&&0<=R;E--,R--)if(y[E]!==x[R]){if(E!==1||R!==1)do if(E--,0>--R||y[E]!==x[R])return`
`+y[E].replace(" at new "," at ");while(1<=E&&0<=R);break}}}finally{_t=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?at(r):""}function jt(r){switch(r.tag){case 5:return at(r.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 2:case 15:return Gt(r.type,!1);case 11:return Gt(r.type.render,!1);case 22:return Gt(r.type._render,!1);case 1:return Gt(r.type,!0);default:return""}}function xt(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case G:return"Fragment";case ye:return"Portal";case ie:return"Profiler";case ve:return"StrictMode";case Le:return"Suspense";case Je:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case ze:return(r.displayName||"Context")+".Consumer";case we:return(r._context.displayName||"Context")+".Provider";case Xe:var a=r.render;return a=a.displayName||a.name||"",r.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case pt:return xt(r.type);case B:return xt(r._render);case A:a=r._payload,r=r._init;try{return xt(r(a))}catch{}}return null}function ct(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return""}}function Jt(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function gt(r){r._valueTracker||(r._valueTracker=function(a){var l=Jt(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&h!==void 0&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,E=h.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return x.call(this)},set:function(R){y=""+R,E.call(this,R)}}),Object.defineProperty(a,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(R){y=""+R},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}(r))}function Tn(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return r&&(h=Jt(r)?r.checked?"true":"false":r.value),(r=h)!==l&&(a.setValue(r),!0)}function cn(r){if((r=r||(typeof document<"u"?document:void 0))===void 0)return null;try{return r.activeElement||r.body}catch{return r.body}}function bn(r,a){var l=a.checked;return p({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function _n(r,a){var l=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;l=ct(a.value!=null?a.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Sr(r,a){(a=a.checked)!=null&&ue(r,"checked",a,!1)}function un(r,a){Sr(r,a);var l=ct(a.value),h=a.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset")return void r.removeAttribute("value");a.hasOwnProperty("value")?cr(r,a.type,l):a.hasOwnProperty("defaultValue")&&cr(r,a.type,ct(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Tr(r,a,l){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,l||a===r.value||(r.value=a),r.defaultValue=a}(l=r.name)!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function cr(r,a,l){a==="number"&&cn(r.ownerDocument)===r||(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}function qn(r,a){return r=p({children:void 0},a),(a=function(l){var h="";return m.Children.forEach(l,function(y){y!=null&&(h+=y)}),h}(a.children))&&(r.children=a),r}function _r(r,a,l,h){if(r=r.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<r.length;l++)y=a.hasOwnProperty("$"+r[l].value),r[l].selected!==y&&(r[l].selected=y),y&&h&&(r[l].defaultSelected=!0)}else{for(l=""+ct(l),a=null,y=0;y<r.length;y++){if(r[y].value===l)return r[y].selected=!0,void(h&&(r[y].defaultSelected=!0));a!==null||r[y].disabled||(a=r[y])}a!==null&&(a.selected=!0)}}function en(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(b(91));return p({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Yo(r,a){var l=a.value;if(l==null){if(l=a.children,a=a.defaultValue,l!=null){if(a!=null)throw Error(b(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(b(93));l=l[0]}a=l}a==null&&(a=""),l=a}r._wrapperState={initialValue:ct(l)}}function ja(r,a){var l=ct(a.value),h=ct(a.defaultValue);l!=null&&((l=""+l)!==r.value&&(r.value=l),a.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function Vr(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}var Zo="http://www.w3.org/1999/xhtml";function vn(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ln(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?vn(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ur,kr,Wr=(kr=function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for((ur=ur||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ur.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,l,h){MSApp.execUnsafeLocalFunction(function(){return kr(r,a)})}:kr);function Qr(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3)return void(l.nodeValue=a)}r.textContent=a}var Rr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ns=["Webkit","ms","Moz","O"];function F(r,a,l){return a==null||typeof a=="boolean"||a===""?"":l||typeof a!="number"||a===0||Rr.hasOwnProperty(r)&&Rr[r]?(""+a).trim():a+"px"}function re(r,a){for(var l in r=r.style,a)if(a.hasOwnProperty(l)){var h=l.indexOf("--")===0,y=F(l,a[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,y):r[l]=y}}Object.keys(Rr).forEach(function(r){Ns.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),Rr[a]=Rr[r]})});var Se=p({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function De(r,a){if(a){if(Se[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(b(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(b(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(b(61))}if(a.style!=null&&typeof a.style!="object")throw Error(b(62))}}function be(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(r){return(r=r.target||r.srcElement||window).correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var He=null,Ie=null,Fe=null;function st(r){if(r=xl(r)){if(typeof He!="function")throw Error(b(280));var a=r.stateNode;a&&(a=_u(a),He(r.stateNode,r.type,a))}}function It(r){Ie?Fe?Fe.push(r):Fe=[r]:Ie=r}function ht(){if(Ie){var r=Ie,a=Fe;if(Fe=Ie=null,st(r),a)for(r=0;r<a.length;r++)st(a[r])}}function Dt(r,a){return r(a)}function kt(r,a,l,h,y){return r(a,l,h,y)}function tn(){}var wt=Dt,nn=!1,dn=!1;function Or(){Ie===null&&Fe===null||(tn(),ht())}function Dn(r,a){var l=r.stateNode;if(l===null)return null;var h=_u(l);if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(h=!((r=r.type)==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(b(231,a,typeof l));return l}var dr=!1;if(O)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){dr=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{dr=!1}function Hn(r,a,l,h,y,x,E,R,j){var q=Array.prototype.slice.call(arguments,3);try{a.apply(l,q)}catch(ae){this.onError(ae)}}var fn=!1,Rn=null,ho=!1,Ls=null,pu={onError:function(r){fn=!0,Rn=r}};function hu(r,a,l,h,y,x,E,R,j){fn=!1,Rn=null,Hn.apply(pu,arguments)}function Kr(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do 1026&(a=r).flags&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function al(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate)!==null&&(a=r.memoizedState),a!==null)return a.dehydrated}return null}function Aa(r){if(Kr(r)!==r)throw Error(b(188))}function Ds(r,a){for(var l=r.alternate;a!==null;){if(a===r||a===l)return!0;a=a.return}return!1}var ft,Ia,sl,il,Ms=!1,Mn=[],jr=null,Ar=null,Ir=null,Pr=new Map,mo=new Map,go=[],Pa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Na(r,a,l,h,y){return{blockedOn:r,domEventName:a,eventSystemFlags:16|l,nativeEvent:y,targetContainers:[h]}}function Bs(r,a){switch(r){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Pr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(a.pointerId)}}function Jo(r,a,l,h,y,x){return r===null||r.nativeEvent!==x?(r=Na(a,l,h,y,x),a!==null&&(a=xl(a))!==null&&Ia(a),r):(r.eventSystemFlags|=h,a=r.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),r)}function zs(r){var a=ra(r.target);if(a!==null){var l=Kr(a);if(l!==null){if((a=l.tag)===13){if((a=al(l))!==null)return r.blockedOn=a,void il(r.lanePriority,function(){g.unstable_runWithPriority(r.priority,function(){sl(l)})})}else if(a===3&&l.stateNode.hydrate)return void(r.blockedOn=l.tag===3?l.stateNode.containerInfo:null)}}r.blockedOn=null}function La(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Be(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(l!==null)return(a=xl(l))!==null&&Ia(a),r.blockedOn=l,!1;a.shift()}return!0}function Fs(r,a,l){La(r)&&l.delete(a)}function ll(){for(Ms=!1;0<Mn.length;){var r=Mn[0];if(r.blockedOn!==null){(r=xl(r.blockedOn))!==null&&ft(r);break}for(var a=r.targetContainers;0<a.length;){var l=Be(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(l!==null){r.blockedOn=l;break}a.shift()}r.blockedOn===null&&Mn.shift()}jr!==null&&La(jr)&&(jr=null),Ar!==null&&La(Ar)&&(Ar=null),Ir!==null&&La(Ir)&&(Ir=null),Pr.forEach(Fs),mo.forEach(Fs)}function Vn(r,a){r.blockedOn===a&&(r.blockedOn=null,Ms||(Ms=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,ll)))}function ea(r){function a(y){return Vn(y,r)}if(0<Mn.length){Vn(Mn[0],r);for(var l=1;l<Mn.length;l++){var h=Mn[l];h.blockedOn===r&&(h.blockedOn=null)}}for(jr!==null&&Vn(jr,r),Ar!==null&&Vn(Ar,r),Ir!==null&&Vn(Ir,r),Pr.forEach(a),mo.forEach(a),l=0;l<go.length;l++)(h=go[l]).blockedOn===r&&(h.blockedOn=null);for(;0<go.length&&(l=go[0]).blockedOn===null;)zs(l),l.blockedOn===null&&go.shift()}function yo(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var bo={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},ta={},Da={};function na(r){if(ta[r])return ta[r];if(!bo[r])return r;var a,l=bo[r];for(a in l)if(l.hasOwnProperty(a)&&a in Da)return ta[r]=l[a];return r}O&&(Da=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);var Ma=na("animationend"),Ba=na("animationiteration"),cl=na("animationstart"),$s=na("transitionend"),T=new Map,C=new Map,k=["abort","abort",Ma,"animationEnd",Ba,"animationIteration",cl,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$s,"transitionEnd","waiting","waiting"];function L(r,a){for(var l=0;l<r.length;l+=2){var h=r[l],y=r[l+1];y="on"+(y[0].toUpperCase()+y.slice(1)),C.set(h,a),T.set(h,y),S(y,[h])}}(0,g.unstable_now)();var z=8;function K(r){if(1&r)return z=15,1;if(2&r)return z=14,2;if(4&r)return z=13,4;var a=24&r;return a!==0?(z=12,a):32&r?(z=11,32):(a=192&r)!=0?(z=10,a):256&r?(z=9,256):(a=3584&r)!=0?(z=8,a):4096&r?(z=7,4096):(a=4186112&r)!=0?(z=6,a):(a=62914560&r)!=0?(z=5,a):67108864&r?(z=4,67108864):134217728&r?(z=3,134217728):(a=805306368&r)!=0?(z=2,a):1073741824&r?(z=1,1073741824):(z=8,r)}function J(r,a){var l=r.pendingLanes;if(l===0)return z=0;var h=0,y=0,x=r.expiredLanes,E=r.suspendedLanes,R=r.pingedLanes;if(x!==0)h=x,y=z=15;else if((x=134217727&l)!=0){var j=x&~E;j!==0?(h=K(j),y=z):(R&=x)!=0&&(h=K(R),y=z)}else(x=l&~E)!=0?(h=K(x),y=z):R!==0&&(h=K(R),y=z);if(h===0)return 0;if(h=l&((0>(h=31-$e(h))?0:1<<h)<<1)-1,a!==0&&a!==h&&(a&E)==0){if(K(a),y<=z)return a;z=y}if((a=r.entangledLanes)!==0)for(r=r.entanglements,a&=h;0<a;)y=1<<(l=31-$e(a)),h|=r[l],a&=~y;return h}function le(r){return(r=-1073741825&r.pendingLanes)!=0?r:1073741824&r?1073741824:0}function ee(r,a){switch(r){case 15:return 1;case 14:return 2;case 12:return(r=oe(24&~a))===0?ee(10,a):r;case 10:return(r=oe(192&~a))===0?ee(8,a):r;case 8:return(r=oe(3584&~a))===0&&(r=oe(4186112&~a))===0&&(r=512),r;case 2:return(a=oe(805306368&~a))===0&&(a=268435456),a}throw Error(b(358,r))}function oe(r){return r&-r}function xe(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function fe(r,a,l){r.pendingLanes|=a;var h=a-1;r.suspendedLanes&=h,r.pingedLanes&=h,(r=r.eventTimes)[a=31-$e(a)]=l}var $e=Math.clz32?Math.clz32:function(r){return r===0?32:31-(Pe(r)/Ve|0)|0},Pe=Math.log,Ve=Math.LN2,Ke=g.unstable_UserBlockingPriority,Ue=g.unstable_runWithPriority,nt=!0;function et(r,a,l,h){nn||tn();var y=Qe,x=nn;nn=!0;try{kt(y,r,a,l,h)}finally{(nn=x)||Or()}}function We(r,a,l,h){Ue(Ke,Qe.bind(null,r,a,l,h))}function Qe(r,a,l,h){var y;if(nt)if((y=(4&a)==0)&&0<Mn.length&&-1<Pa.indexOf(r))r=Na(null,r,a,l,h),Mn.push(r);else{var x=Be(r,a,l,h);if(x===null)y&&Bs(r,h);else{if(y){if(-1<Pa.indexOf(r))return r=Na(x,r,a,l,h),void Mn.push(r);if(function(E,R,j,q,ae){switch(R){case"focusin":return jr=Jo(jr,E,R,j,q,ae),!0;case"dragenter":return Ar=Jo(Ar,E,R,j,q,ae),!0;case"mouseover":return Ir=Jo(Ir,E,R,j,q,ae),!0;case"pointerover":var ke=ae.pointerId;return Pr.set(ke,Jo(Pr.get(ke)||null,E,R,j,q,ae)),!0;case"gotpointercapture":return ke=ae.pointerId,mo.set(ke,Jo(mo.get(ke)||null,E,R,j,q,ae)),!0}return!1}(x,r,a,l,h))return;Bs(r,h)}lh(r,a,h,null,l)}}}function Be(r,a,l,h){var y=Te(h);if((y=ra(y))!==null){var x=Kr(y);if(x===null)y=null;else{var E=x.tag;if(E===13){if((y=al(x))!==null)return y;y=null}else if(E===3){if(x.stateNode.hydrate)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null)}}return lh(r,a,h,y,l),null}var _e=null,qe=null,Me=null;function it(){if(Me)return Me;var r,a,l=qe,h=l.length,y="value"in _e?_e.value:_e.textContent,x=y.length;for(r=0;r<h&&l[r]===y[r];r++);var E=h-r;for(a=1;a<=E&&l[h-a]===y[x-a];a++);return Me=y.slice(r,1<a?1-a:void 0)}function yt(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode)===0&&a===13&&(r=13):r=a,r===10&&(r=13),32<=r||r===13?r:0}function lt(){return!0}function At(){return!1}function rt(r){function a(l,h,y,x,E){for(var R in this._reactName=l,this._targetInst=y,this.type=h,this.nativeEvent=x,this.target=E,this.currentTarget=null,r)r.hasOwnProperty(R)&&(l=r[R],this[R]=l?l(x):x[R]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?lt:At,this.isPropagationStopped=At,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=lt)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=lt)},persist:function(){},isPersistent:lt}),a}var Vt,Ft,Rt,bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mt=rt(bt),Ct=p({},bt,{view:0,detail:0}),Ot=rt(Ct),Et=p({},Ct,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Rt&&(Rt&&r.type==="mousemove"?(Vt=r.screenX-Rt.screenX,Ft=r.screenY-Rt.screenY):Ft=Vt=0,Rt=r),Vt)},movementY:function(r){return"movementY"in r?r.movementY:Ft}}),Pt=rt(Et),on=rt(p({},Et,{dataTransfer:0})),wn=rt(p({},Ct,{relatedTarget:0})),pn=rt(p({},bt,{animationName:0,elapsedTime:0,pseudoElement:0})),Nr=p({},bt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Re=rt(Nr),Xr=rt(p({},bt,{data:0})),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hs(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):!!(r=vo[r])&&!!a[r]}function Gr(){return Hs}var za=p({},Ct,{key:function(r){if(r.key){var a=Us[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=yt(r))===13?"Enter":String.fromCharCode(r):r.type==="keydown"||r.type==="keyup"?qs[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(r){return r.type==="keypress"?yt(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?yt(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),wo=rt(za),Yr=rt(p({},Et,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wn=rt(p({},Ct,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr})),Zr=rt(p({},bt,{propertyName:0,elapsedTime:0,pseudoElement:0})),Jr=p({},Et,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Fa=rt(Jr),ul=[9,13,27,32],$a=O&&"CompositionEvent"in window,eo=null;O&&"documentMode"in document&&(eo=document.documentMode);var dl=O&&"TextEvent"in window&&!eo,Vs=O&&(!$a||eo&&8<eo&&11>=eo),Ws=" ",Qs=!1;function fl(r,a){switch(r){case"keyup":return ul.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pl(r){return typeof(r=r.detail)=="object"&&"data"in r?r.data:null}var Lr=!1,hl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!hl[r.type]:a==="textarea"}function Hp(r,a,l,h){It(h),0<(a=yl(a,"onChange")).length&&(l=new mt("onChange","change",null,l,h),r.push({event:l,listeners:a}))}var ml=null,Ks=null;function _0(r){rh(r,0)}function gl(r){if(Tn(Js(r)))return r}function k0(r,a){if(r==="change")return a}var Vp=!1;if(O){var mu;if(O){var gu="oninput"in document;if(!gu){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),gu=typeof Wp.oninput=="function"}mu=gu}else mu=!1;Vp=mu&&(!document.documentMode||9<document.documentMode)}function Qp(){ml&&(ml.detachEvent("onpropertychange",Kp),Ks=ml=null)}function Kp(r){if(r.propertyName==="value"&&gl(Ks)){var a=[];if(Hp(a,Ks,r,Te(r)),r=_0,nn)r(a);else{nn=!0;try{Dt(r,a)}finally{nn=!1,Or()}}}}function R0(r,a,l){r==="focusin"?(Qp(),Ks=l,(ml=a).attachEvent("onpropertychange",Kp)):r==="focusout"&&Qp()}function O0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return gl(Ks)}function j0(r,a){if(r==="click")return gl(a)}function A0(r,a){if(r==="input"||r==="change")return gl(a)}var Qn=typeof Object.is=="function"?Object.is:function(r,a){return r===a&&(r!==0||1/r==1/a)||r!=r&&a!=a},I0=Object.prototype.hasOwnProperty;function Xs(r,a){if(Qn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++)if(!I0.call(a,l[h])||!Qn(r[l[h]],a[l[h]]))return!1;return!0}function Xp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Gp(r,a){var l,h=Xp(r);for(r=0;h;){if(h.nodeType===3){if(l=r+h.textContent.length,r<=a&&l>=a)return{node:h,offset:a-r};r=l}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Xp(h)}}function Yp(r,a){return!(!r||!a)&&(r===a||(!r||r.nodeType!==3)&&(a&&a.nodeType===3?Yp(r,a.parentNode):"contains"in r?r.contains(a):!!r.compareDocumentPosition&&!!(16&r.compareDocumentPosition(a))))}function Zp(){for(var r=window,a=cn();a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(!l)break;a=cn((r=a.contentWindow).document)}return a}function yu(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var P0=O&&"documentMode"in document&&11>=document.documentMode,Ua=null,bu=null,Gs=null,vu=!1;function Jp(r,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vu||Ua==null||Ua!==cn(h)||(h="selectionStart"in(h=Ua)&&yu(h)?{start:h.selectionStart,end:h.selectionEnd}:{anchorNode:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset},Gs&&Xs(Gs,h)||(Gs=h,0<(h=yl(bu,"onSelect")).length&&(a=new mt("onSelect","select",null,a,l),r.push({event:a,listeners:h}),a.target=Ua)))}L("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),L("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),L(k,2);for(var eh="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wu=0;wu<eh.length;wu++)C.set(eh[wu],0);_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),th=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ys));function nh(r,a,l){var h=r.type||"unknown-event";r.currentTarget=l,function(y,x,E,R,j,q,ae,ke,me){if(hu.apply(this,arguments),fn){if(!fn)throw Error(b(198));var Ae=Rn;fn=!1,Rn=null,ho||(ho=!0,Ls=Ae)}}(h,a,void 0,r),r.currentTarget=null}function rh(r,a){a=(4&a)!=0;for(var l=0;l<r.length;l++){var h=r[l],y=h.event;h=h.listeners;e:{var x=void 0;if(a)for(var E=h.length-1;0<=E;E--){var R=h[E],j=R.instance,q=R.currentTarget;if(R=R.listener,j!==x&&y.isPropagationStopped())break e;nh(y,R,q),x=j}else for(E=0;E<h.length;E++){if(j=(R=h[E]).instance,q=R.currentTarget,R=R.listener,j!==x&&y.isPropagationStopped())break e;nh(y,R,q),x=j}}}if(ho)throw r=Ls,ho=!1,Ls=null,r}function Mt(r,a){var l=hh(a),h=r+"__bubble";l.has(h)||(ih(a,r,2,!1),l.add(h))}var oh="_reactListening"+Math.random().toString(36).slice(2);function ah(r){r[oh]||(r[oh]=!0,v.forEach(function(a){th.has(a)||sh(a,!1,r,null),sh(a,!0,r,null)}))}function sh(r,a,l,h){var y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,x=l;if(r==="selectionchange"&&l.nodeType!==9&&(x=l.ownerDocument),h!==null&&!a&&th.has(r)){if(r!=="scroll")return;y|=2,x=h}var E=hh(x),R=r+"__"+(a?"capture":"bubble");E.has(R)||(a&&(y|=4),ih(x,r,y,a),E.add(R))}function ih(r,a,l,h){var y=C.get(a);switch(y===void 0?2:y){case 0:y=et;break;case 1:y=We;break;default:y=Qe}l=y.bind(null,a,l,r),y=void 0,!dr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),h?y!==void 0?r.addEventListener(a,l,{capture:!0,passive:y}):r.addEventListener(a,l,!0):y!==void 0?r.addEventListener(a,l,{passive:y}):r.addEventListener(a,l,!1)}function lh(r,a,l,h,y){var x=h;if(!(1&a)&&!(2&a)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var R=h.stateNode.containerInfo;if(R===y||R.nodeType===8&&R.parentNode===y)break;if(E===4)for(E=h.return;E!==null;){var j=E.tag;if((j===3||j===4)&&((j=E.stateNode.containerInfo)===y||j.nodeType===8&&j.parentNode===y))return;E=E.return}for(;R!==null;){if((E=ra(R))===null)return;if((j=E.tag)===5||j===6){h=x=E;continue e}R=R.parentNode}}h=h.return}(function(q,ae,ke){if(dn)return q();dn=!0;try{wt(q,ae,ke)}finally{dn=!1,Or()}})(function(){var q=x,ae=Te(l),ke=[];e:{var me=T.get(r);if(me!==void 0){var Ae=mt,Ye=r;switch(r){case"keypress":if(yt(l)===0)break e;case"keydown":case"keyup":Ae=wo;break;case"focusin":Ye="focus",Ae=wn;break;case"focusout":Ye="blur",Ae=wn;break;case"beforeblur":case"afterblur":Ae=wn;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Pt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=Wn;break;case Ma:case Ba:case cl:Ae=pn;break;case $s:Ae=Zr;break;case"scroll":Ae=Ot;break;case"wheel":Ae=Fa;break;case"copy":case"cut":case"paste":Ae=Re;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Yr}var Ze=(4&a)!=0,Q=!Ze&&r==="scroll",U=Ze?me!==null?me+"Capture":null:me;Ze=[];for(var V,ce=q;ce!==null;){var pe=(V=ce).stateNode;if(V.tag===5&&pe!==null&&(V=pe,U!==null&&(pe=Dn(ce,U))!=null&&Ze.push(Zs(ce,pe,V))),Q)break;ce=ce.return}0<Ze.length&&(me=new Ae(me,Ye,null,l,ae),ke.push({event:me,listeners:Ze}))}}if(!(7&a)){if(Ae=r==="mouseout"||r==="pointerout",(!(me=r==="mouseover"||r==="pointerover")||(16&a)!=0||!(Ye=l.relatedTarget||l.fromElement)||!ra(Ye)&&!Ye[Va])&&(Ae||me)&&(me=ae.window===ae?ae:(me=ae.ownerDocument)?me.defaultView||me.parentWindow:window,Ae?(Ae=q,(Ye=(Ye=l.relatedTarget||l.toElement)?ra(Ye):null)!==null&&(Ye!==(Q=Kr(Ye))||Ye.tag!==5&&Ye.tag!==6)&&(Ye=null)):(Ae=null,Ye=q),Ae!==Ye)){if(Ze=Pt,pe="onMouseLeave",U="onMouseEnter",ce="mouse",r!=="pointerout"&&r!=="pointerover"||(Ze=Yr,pe="onPointerLeave",U="onPointerEnter",ce="pointer"),Q=Ae==null?me:Js(Ae),V=Ye==null?me:Js(Ye),(me=new Ze(pe,ce+"leave",Ae,l,ae)).target=Q,me.relatedTarget=V,pe=null,ra(ae)===q&&((Ze=new Ze(U,ce+"enter",Ye,l,ae)).target=V,Ze.relatedTarget=Q,pe=Ze),Q=pe,Ae&&Ye)e:{for(U=Ye,ce=0,V=Ze=Ae;V;V=qa(V))ce++;for(V=0,pe=U;pe;pe=qa(pe))V++;for(;0<ce-V;)Ze=qa(Ze),ce--;for(;0<V-ce;)U=qa(U),V--;for(;ce--;){if(Ze===U||U!==null&&Ze===U.alternate)break e;Ze=qa(Ze),U=qa(U)}Ze=null}else Ze=null;Ae!==null&&ch(ke,me,Ae,Ze,!1),Ye!==null&&Q!==null&&ch(ke,Q,Ye,Ze,!0)}if((Ae=(me=q?Js(q):window).nodeName&&me.nodeName.toLowerCase())==="select"||Ae==="input"&&me.type==="file")var tt=k0;else if(qp(me))if(Vp)tt=A0;else{tt=O0;var Ne=R0}else(Ae=me.nodeName)&&Ae.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(tt=j0);switch(tt&&(tt=tt(r,q))?Hp(ke,tt,l,ae):(Ne&&Ne(r,me,q),r==="focusout"&&(Ne=me._wrapperState)&&Ne.controlled&&me.type==="number"&&cr(me,"number",me.value)),Ne=q?Js(q):window,r){case"focusin":(qp(Ne)||Ne.contentEditable==="true")&&(Ua=Ne,bu=q,Gs=null);break;case"focusout":Gs=bu=Ua=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,Jp(ke,l,ae);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":Jp(ke,l,ae)}var ut;if($a)e:{switch(r){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Lr?fl(r,l)&&(vt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(Vs&&l.locale!=="ko"&&(Lr||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Lr&&(ut=it()):(qe="value"in(_e=ae)?_e.value:_e.textContent,Lr=!0)),0<(Ne=yl(q,vt)).length&&(vt=new Xr(vt,r,null,l,ae),ke.push({event:vt,listeners:Ne}),(ut||(ut=pl(l))!==null)&&(vt.data=ut))),(ut=dl?function(Ge,Nt){switch(Ge){case"compositionend":return pl(Nt);case"keypress":return Nt.which!==32?null:(Qs=!0,Ws);case"textInput":return(Ge=Nt.data)===Ws&&Qs?null:Ge;default:return null}}(r,l):function(Ge,Nt){if(Lr)return Ge==="compositionend"||!$a&&fl(Ge,Nt)?(Ge=it(),Me=qe=_e=null,Lr=!1,Ge):null;switch(Ge){case"paste":default:return null;case"keypress":if(!(Nt.ctrlKey||Nt.altKey||Nt.metaKey)||Nt.ctrlKey&&Nt.altKey){if(Nt.char&&1<Nt.char.length)return Nt.char;if(Nt.which)return String.fromCharCode(Nt.which)}return null;case"compositionend":return Vs&&Nt.locale!=="ko"?null:Nt.data}}(r,l))&&0<(q=yl(q,"onBeforeInput")).length&&(ae=new Xr("onBeforeInput","beforeinput",null,l,ae),ke.push({event:ae,listeners:q}),ae.data=ut)}rh(ke,a)})}function Zs(r,a,l){return{instance:r,listener:a,currentTarget:l}}function yl(r,a){for(var l=a+"Capture",h=[];r!==null;){var y=r,x=y.stateNode;y.tag===5&&x!==null&&(y=x,(x=Dn(r,l))!=null&&h.unshift(Zs(r,x,y)),(x=Dn(r,a))!=null&&h.push(Zs(r,x,y))),r=r.return}return h}function qa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function ch(r,a,l,h,y){for(var x=a._reactName,E=[];l!==null&&l!==h;){var R=l,j=R.alternate,q=R.stateNode;if(j!==null&&j===h)break;R.tag===5&&q!==null&&(R=q,y?(j=Dn(l,x))!=null&&E.unshift(Zs(l,j,R)):y||(j=Dn(l,x))!=null&&E.push(Zs(l,j,R))),l=l.return}E.length!==0&&r.push({event:a,listeners:E})}function bl(){}var xu=null,Cu=null;function uh(r,a){switch(r){case"button":case"input":case"select":case"textarea":return!!a.autoFocus}return!1}function Eu(r,a){return r==="textarea"||r==="option"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var dh=typeof setTimeout=="function"?setTimeout:void 0,N0=typeof clearTimeout=="function"?clearTimeout:void 0;function Su(r){(r.nodeType===1||r.nodeType===9&&(r=r.body)!=null)&&(r.textContent="")}function Ha(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break}return r}function fh(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}var Tu=0,vl=Math.random().toString(36).slice(2),xo="__reactFiber$"+vl,wl="__reactProps$"+vl,Va="__reactContainer$"+vl,ph="__reactEvents$"+vl;function ra(r){var a=r[xo];if(a)return a;for(var l=r.parentNode;l;){if(a=l[Va]||l[xo]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=fh(r);r!==null;){if(l=r[xo])return l;r=fh(r)}return a}l=(r=l).parentNode}return null}function xl(r){return!(r=r[xo]||r[Va])||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Js(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(b(33))}function _u(r){return r[wl]||null}function hh(r){var a=r[ph];return a===void 0&&(a=r[ph]=new Set),a}var ku=[],Wa=-1;function Co(r){return{current:r}}function $t(r){0>Wa||(r.current=ku[Wa],ku[Wa]=null,Wa--)}function Ht(r,a){Wa++,ku[Wa]=r.current,r.current=a}var Eo={},hn=Co(Eo),On=Co(!1),oa=Eo;function Qa(r,a){var l=r.type.contextTypes;if(!l)return Eo;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var y,x={};for(y in l)x[y]=a[y];return h&&((r=r.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=x),x}function Bn(r){return r.childContextTypes!=null}function Ru(){$t(On),$t(hn)}function mh(r,a,l){if(hn.current!==Eo)throw Error(b(168));Ht(hn,a),Ht(On,l)}function gh(r,a,l){var h=r.stateNode;if(r=a.childContextTypes,typeof h.getChildContext!="function")return l;for(var y in h=h.getChildContext())if(!(y in r))throw Error(b(108,xt(a)||"Unknown",y));return p({},l,h)}function Cl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Eo,oa=hn.current,Ht(hn,r),Ht(On,On.current),!0}function yh(r,a,l){var h=r.stateNode;if(!h)throw Error(b(169));l?(r=gh(r,a,oa),h.__reactInternalMemoizedMergedChildContext=r,$t(On),$t(hn),Ht(hn,r)):$t(On),Ht(On,l)}var Ou=null,aa=null,L0=g.unstable_runWithPriority,ju=g.unstable_scheduleCallback,Au=g.unstable_cancelCallback,D0=g.unstable_shouldYield,bh=g.unstable_requestPaint,Iu=g.unstable_now,M0=g.unstable_getCurrentPriorityLevel,El=g.unstable_ImmediatePriority,vh=g.unstable_UserBlockingPriority,wh=g.unstable_NormalPriority,xh=g.unstable_LowPriority,Ch=g.unstable_IdlePriority,Pu={},B0=bh!==void 0?bh:function(){},to=null,Sl=null,Nu=!1,Eh=Iu(),mn=1e4>Eh?Iu:function(){return Iu()-Eh};function Ka(){switch(M0()){case El:return 99;case vh:return 98;case wh:return 97;case xh:return 96;case Ch:return 95;default:throw Error(b(332))}}function Sh(r){switch(r){case 99:return El;case 98:return vh;case 97:return wh;case 96:return xh;case 95:return Ch;default:throw Error(b(332))}}function Xa(r,a){return r=Sh(r),L0(r,a)}function ei(r,a,l){return r=Sh(r),ju(r,a,l)}function no(){if(Sl!==null){var r=Sl;Sl=null,Au(r)}Th()}function Th(){if(!Nu&&to!==null){Nu=!0;var r=0;try{var a=to;Xa(99,function(){for(;r<a.length;r++){var l=a[r];do l=l(!0);while(l!==null)}}),to=null}catch(l){throw to!==null&&(to=to.slice(r+1)),ju(El,no),l}finally{Nu=!1}}}var z0=he.ReactCurrentBatchConfig;function fr(r,a){if(r&&r.defaultProps){for(var l in a=p({},a),r=r.defaultProps)a[l]===void 0&&(a[l]=r[l]);return a}return a}var Tl=Co(null),_l=null,Ga=null,kl=null;function Lu(){kl=Ga=_l=null}function Du(r){var a=Tl.current;$t(Tl),r.type._context._currentValue=a}function _h(r,a){for(;r!==null;){var l=r.alternate;if((r.childLanes&a)===a){if(l===null||(l.childLanes&a)===a)break;l.childLanes|=a}else r.childLanes|=a,l!==null&&(l.childLanes|=a);r=r.return}}function Ya(r,a){_l=r,kl=Ga=null,(r=r.dependencies)!==null&&r.firstContext!==null&&(r.lanes&a&&(pr=!0),r.firstContext=null)}function Kn(r,a){if(kl!==r&&a!==!1&&a!==0)if(typeof a=="number"&&a!==1073741823||(kl=r,a=1073741823),a={context:r,observedBits:a,next:null},Ga===null){if(_l===null)throw Error(b(308));Ga=a,_l.dependencies={lanes:0,firstContext:a,responders:null}}else Ga=Ga.next=a;return r._currentValue}var So=!1;function Mu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function kh(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function To(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function _o(r,a){if((r=r.updateQueue)!==null){var l=(r=r.shared).pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}}function Rh(r,a){var l=r.updateQueue,h=r.alternate;if(h!==null&&l===(h=h.updateQueue)){var y=null,x=null;if((l=l.firstBaseUpdate)!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?y=x=E:x=x.next=E,l=l.next}while(l!==null);x===null?y=x=a:x=x.next=a}else y=x=a;return l={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:h.shared,effects:h.effects},void(r.updateQueue=l)}(r=l.lastBaseUpdate)===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}function ti(r,a,l,h){var y=r.updateQueue;So=!1;var x=y.firstBaseUpdate,E=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var j=R,q=j.next;j.next=null,E===null?x=q:E.next=q,E=j;var ae=r.alternate;if(ae!==null){var ke=(ae=ae.updateQueue).lastBaseUpdate;ke!==E&&(ke===null?ae.firstBaseUpdate=q:ke.next=q,ae.lastBaseUpdate=j)}}if(x!==null){for(ke=y.baseState,E=0,ae=q=j=null;;){R=x.lane;var me=x.eventTime;if((h&R)===R){ae!==null&&(ae=ae.next={eventTime:me,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Ae=r,Ye=x;switch(R=a,me=l,Ye.tag){case 1:if(typeof(Ae=Ye.payload)=="function"){ke=Ae.call(me,ke,R);break e}ke=Ae;break e;case 3:Ae.flags=-4097&Ae.flags|64;case 0:if((R=typeof(Ae=Ye.payload)=="function"?Ae.call(me,ke,R):Ae)==null)break e;ke=p({},ke,R);break e;case 2:So=!0}}x.callback!==null&&(r.flags|=32,(R=y.effects)===null?y.effects=[x]:R.push(x))}else me={eventTime:me,lane:R,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ae===null?(q=ae=me,j=ke):ae=ae.next=me,E|=R;if((x=x.next)===null){if((R=y.shared.pending)===null)break;x=R.next,R.next=null,y.lastBaseUpdate=R,y.shared.pending=null}}ae===null&&(j=ke),y.baseState=j,y.firstBaseUpdate=q,y.lastBaseUpdate=ae,pi|=E,r.lanes=E,r.memoizedState=ke}}function Oh(r,a,l){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var h=r[a],y=h.callback;if(y!==null){if(h.callback=null,h=l,typeof y!="function")throw Error(b(191,y));y.call(h)}}}var jh=new m.Component().refs;function Rl(r,a,l,h){l=(l=l(h,a=r.memoizedState))==null?a:p({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Ol={isMounted:function(r){return!!(r=r._reactInternals)&&Kr(r)===r},enqueueSetState:function(r,a,l){r=r._reactInternals;var h=Fn(),y=jo(r),x=To(h,y);x.payload=a,l!=null&&(x.callback=l),_o(r,x),Ao(r,y,h)},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var h=Fn(),y=jo(r),x=To(h,y);x.tag=1,x.payload=a,l!=null&&(x.callback=l),_o(r,x),Ao(r,y,h)},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=Fn(),h=jo(r),y=To(l,h);y.tag=2,a!=null&&(y.callback=a),_o(r,y),Ao(r,h,l)}};function Ah(r,a,l,h,y,x,E){return typeof(r=r.stateNode).shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,x,E):!(a.prototype&&a.prototype.isPureReactComponent&&Xs(l,h)&&Xs(y,x))}function Ih(r,a,l){var h=!1,y=Eo,x=a.contextType;return typeof x=="object"&&x!==null?x=Kn(x):(y=Bn(a)?oa:hn.current,x=(h=(h=a.contextTypes)!=null)?Qa(r,y):Eo),a=new a(l,x),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ol,r.stateNode=a,a._reactInternals=r,h&&((r=r.stateNode).__reactInternalMemoizedUnmaskedChildContext=y,r.__reactInternalMemoizedMaskedChildContext=x),a}function Ph(r,a,l,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==r&&Ol.enqueueReplaceState(a,a.state,null)}function Bu(r,a,l,h){var y=r.stateNode;y.props=l,y.state=r.memoizedState,y.refs=jh,Mu(r);var x=a.contextType;typeof x=="object"&&x!==null?y.context=Kn(x):(x=Bn(a)?oa:hn.current,y.context=Qa(r,x)),ti(r,l,y,h),y.state=r.memoizedState,typeof(x=a.getDerivedStateFromProps)=="function"&&(Rl(r,a,x,l),y.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Ol.enqueueReplaceState(y,y.state,null),ti(r,l,y,h),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4)}var jl=Array.isArray;function ni(r,a,l){if((r=l.ref)!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner){if(l.tag!==1)throw Error(b(309));var h=l.stateNode}if(!h)throw Error(b(147,r));var y=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===y?a.ref:(a=function(x){var E=h.refs;E===jh&&(E=h.refs={}),x===null?delete E[y]:E[y]=x},a._stringRef=y,a)}if(typeof r!="string")throw Error(b(284));if(!l._owner)throw Error(b(290,r))}return r}function Al(r,a){if(r.type!=="textarea")throw Error(b(31,Object.prototype.toString.call(a)==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":a))}function Nh(r){function a(Q,U){if(r){var V=Q.lastEffect;V!==null?(V.nextEffect=U,Q.lastEffect=U):Q.firstEffect=Q.lastEffect=U,U.nextEffect=null,U.flags=8}}function l(Q,U){if(!r)return null;for(;U!==null;)a(Q,U),U=U.sibling;return null}function h(Q,U){for(Q=new Map;U!==null;)U.key!==null?Q.set(U.key,U):Q.set(U.index,U),U=U.sibling;return Q}function y(Q,U){return(Q=Po(Q,U)).index=0,Q.sibling=null,Q}function x(Q,U,V){return Q.index=V,r?(V=Q.alternate)!==null?(V=V.index)<U?(Q.flags=2,U):V:(Q.flags=2,U):U}function E(Q){return r&&Q.alternate===null&&(Q.flags=2),Q}function R(Q,U,V,ce){return U===null||U.tag!==6?((U=vd(V,Q.mode,ce)).return=Q,U):((U=y(U,V)).return=Q,U)}function j(Q,U,V,ce){return U!==null&&U.elementType===V.type?((ce=y(U,V.props)).ref=ni(Q,U,V),ce.return=Q,ce):((ce=Kl(V.type,V.key,V.props,null,Q.mode,ce)).ref=ni(Q,U,V),ce.return=Q,ce)}function q(Q,U,V,ce){return U===null||U.tag!==4||U.stateNode.containerInfo!==V.containerInfo||U.stateNode.implementation!==V.implementation?((U=wd(V,Q.mode,ce)).return=Q,U):((U=y(U,V.children||[])).return=Q,U)}function ae(Q,U,V,ce,pe){return U===null||U.tag!==7?((U=ss(V,Q.mode,ce,pe)).return=Q,U):((U=y(U,V)).return=Q,U)}function ke(Q,U,V){if(typeof U=="string"||typeof U=="number")return(U=vd(""+U,Q.mode,V)).return=Q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ge:return(V=Kl(U.type,U.key,U.props,null,Q.mode,V)).ref=ni(Q,null,U),V.return=Q,V;case ye:return(U=wd(U,Q.mode,V)).return=Q,U}if(jl(U)||Ee(U))return(U=ss(U,Q.mode,V,null)).return=Q,U;Al(Q,U)}return null}function me(Q,U,V,ce){var pe=U!==null?U.key:null;if(typeof V=="string"||typeof V=="number")return pe!==null?null:R(Q,U,""+V,ce);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ge:return V.key===pe?V.type===G?ae(Q,U,V.props.children,ce,pe):j(Q,U,V,ce):null;case ye:return V.key===pe?q(Q,U,V,ce):null}if(jl(V)||Ee(V))return pe!==null?null:ae(Q,U,V,ce,null);Al(Q,V)}return null}function Ae(Q,U,V,ce,pe){if(typeof ce=="string"||typeof ce=="number")return R(U,Q=Q.get(V)||null,""+ce,pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case ge:return Q=Q.get(ce.key===null?V:ce.key)||null,ce.type===G?ae(U,Q,ce.props.children,pe,ce.key):j(U,Q,ce,pe);case ye:return q(U,Q=Q.get(ce.key===null?V:ce.key)||null,ce,pe)}if(jl(ce)||Ee(ce))return ae(U,Q=Q.get(V)||null,ce,pe,null);Al(U,ce)}return null}function Ye(Q,U,V,ce){for(var pe=null,tt=null,Ne=U,ut=U=0,vt=null;Ne!==null&&ut<V.length;ut++){Ne.index>ut?(vt=Ne,Ne=null):vt=Ne.sibling;var Ge=me(Q,Ne,V[ut],ce);if(Ge===null){Ne===null&&(Ne=vt);break}r&&Ne&&Ge.alternate===null&&a(Q,Ne),U=x(Ge,U,ut),tt===null?pe=Ge:tt.sibling=Ge,tt=Ge,Ne=vt}if(ut===V.length)return l(Q,Ne),pe;if(Ne===null){for(;ut<V.length;ut++)(Ne=ke(Q,V[ut],ce))!==null&&(U=x(Ne,U,ut),tt===null?pe=Ne:tt.sibling=Ne,tt=Ne);return pe}for(Ne=h(Q,Ne);ut<V.length;ut++)(vt=Ae(Ne,Q,ut,V[ut],ce))!==null&&(r&&vt.alternate!==null&&Ne.delete(vt.key===null?ut:vt.key),U=x(vt,U,ut),tt===null?pe=vt:tt.sibling=vt,tt=vt);return r&&Ne.forEach(function(Nt){return a(Q,Nt)}),pe}function Ze(Q,U,V,ce){var pe=Ee(V);if(typeof pe!="function")throw Error(b(150));if((V=pe.call(V))==null)throw Error(b(151));for(var tt=pe=null,Ne=U,ut=U=0,vt=null,Ge=V.next();Ne!==null&&!Ge.done;ut++,Ge=V.next()){Ne.index>ut?(vt=Ne,Ne=null):vt=Ne.sibling;var Nt=me(Q,Ne,Ge.value,ce);if(Nt===null){Ne===null&&(Ne=vt);break}r&&Ne&&Nt.alternate===null&&a(Q,Ne),U=x(Nt,U,ut),tt===null?pe=Nt:tt.sibling=Nt,tt=Nt,Ne=vt}if(Ge.done)return l(Q,Ne),pe;if(Ne===null){for(;!Ge.done;ut++,Ge=V.next())(Ge=ke(Q,Ge.value,ce))!==null&&(U=x(Ge,U,ut),tt===null?pe=Ge:tt.sibling=Ge,tt=Ge);return pe}for(Ne=h(Q,Ne);!Ge.done;ut++,Ge=V.next())(Ge=Ae(Ne,Q,ut,Ge.value,ce))!==null&&(r&&Ge.alternate!==null&&Ne.delete(Ge.key===null?ut:Ge.key),U=x(Ge,U,ut),tt===null?pe=Ge:tt.sibling=Ge,tt=Ge);return r&&Ne.forEach(function(ux){return a(Q,ux)}),pe}return function(Q,U,V,ce){var pe=typeof V=="object"&&V!==null&&V.type===G&&V.key===null;pe&&(V=V.props.children);var tt=typeof V=="object"&&V!==null;if(tt)switch(V.$$typeof){case ge:e:{for(tt=V.key,pe=U;pe!==null;){if(pe.key===tt){if(pe.tag===7){if(V.type===G){l(Q,pe.sibling),(U=y(pe,V.props.children)).return=Q,Q=U;break e}}else if(pe.elementType===V.type){l(Q,pe.sibling),(U=y(pe,V.props)).ref=ni(Q,pe,V),U.return=Q,Q=U;break e}l(Q,pe);break}a(Q,pe),pe=pe.sibling}V.type===G?((U=ss(V.props.children,Q.mode,ce,V.key)).return=Q,Q=U):((ce=Kl(V.type,V.key,V.props,null,Q.mode,ce)).ref=ni(Q,U,V),ce.return=Q,Q=ce)}return E(Q);case ye:e:{for(pe=V.key;U!==null;){if(U.key===pe){if(U.tag===4&&U.stateNode.containerInfo===V.containerInfo&&U.stateNode.implementation===V.implementation){l(Q,U.sibling),(U=y(U,V.children||[])).return=Q,Q=U;break e}l(Q,U);break}a(Q,U),U=U.sibling}(U=wd(V,Q.mode,ce)).return=Q,Q=U}return E(Q)}if(typeof V=="string"||typeof V=="number")return V=""+V,U!==null&&U.tag===6?(l(Q,U.sibling),(U=y(U,V)).return=Q,Q=U):(l(Q,U),(U=vd(V,Q.mode,ce)).return=Q,Q=U),E(Q);if(jl(V))return Ye(Q,U,V,ce);if(Ee(V))return Ze(Q,U,V,ce);if(tt&&Al(Q,V),V===void 0&&!pe)switch(Q.tag){case 1:case 22:case 0:case 11:case 15:throw Error(b(152,xt(Q.type)||"Component"))}return l(Q,U)}}var Il=Nh(!0),Lh=Nh(!1),ri={},Dr=Co(ri),oi=Co(ri),ai=Co(ri);function sa(r){if(r===ri)throw Error(b(174));return r}function zu(r,a){switch(Ht(ai,a),Ht(oi,r),Ht(Dr,ri),r=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ln(null,"");break;default:a=Ln(a=(r=r===8?a.parentNode:a).namespaceURI||null,r=r.tagName)}$t(Dr),Ht(Dr,a)}function Za(){$t(Dr),$t(oi),$t(ai)}function Dh(r){sa(ai.current);var a=sa(Dr.current),l=Ln(a,r.type);a!==l&&(Ht(oi,r),Ht(Dr,l))}function Fu(r){oi.current===r&&($t(Dr),$t(oi))}var Wt=Co(0);function Pl(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&((l=l.dehydrated)===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(64&a.flags)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ro=null,ko=null,Mr=!1;function Mh(r,a){var l=Yn(5,null,null,0);l.elementType="DELETED",l.type="DELETED",l.stateNode=a,l.return=r,l.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=l,r.lastEffect=l):r.firstEffect=r.lastEffect=l}function Bh(r,a){switch(r.tag){case 5:var l=r.type;return(a=a.nodeType!==1||l.toLowerCase()!==a.nodeName.toLowerCase()?null:a)!==null&&(r.stateNode=a,!0);case 6:return(a=r.pendingProps===""||a.nodeType!==3?null:a)!==null&&(r.stateNode=a,!0);default:return!1}}function $u(r){if(Mr){var a=ko;if(a){var l=a;if(!Bh(r,a)){if(!(a=Ha(l.nextSibling))||!Bh(r,a))return r.flags=-1025&r.flags|2,Mr=!1,void(ro=r);Mh(ro,l)}ro=r,ko=Ha(a.firstChild)}else r.flags=-1025&r.flags|2,Mr=!1,ro=r}}function zh(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;ro=r}function Nl(r){if(r!==ro)return!1;if(!Mr)return zh(r),Mr=!0,!1;var a=r.type;if(r.tag!==5||a!=="head"&&a!=="body"&&!Eu(a,r.memoizedProps))for(a=ko;a;)Mh(r,a),a=Ha(a.nextSibling);if(zh(r),r.tag===13){if(!(r=(r=r.memoizedState)!==null?r.dehydrated:null))throw Error(b(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(a===0){ko=Ha(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++}r=r.nextSibling}ko=null}}else ko=ro?Ha(r.stateNode.nextSibling):null;return!0}function Uu(){ko=ro=null,Mr=!1}var Ja=[];function qu(){for(var r=0;r<Ja.length;r++)Ja[r]._workInProgressVersionPrimary=null;Ja.length=0}var si=he.ReactCurrentDispatcher,Xn=he.ReactCurrentBatchConfig,ii=0,Qt=null,xn=null,an=null,Ll=!1,li=!1;function jn(){throw Error(b(321))}function Hu(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Qn(r[l],a[l]))return!1;return!0}function Vu(r,a,l,h,y,x){if(ii=x,Qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,si.current=r===null||r.memoizedState===null?$0:U0,r=l(h,y),li){x=0;do{if(li=!1,!(25>x))throw Error(b(301));x+=1,an=xn=null,a.updateQueue=null,si.current=q0,r=l(h,y)}while(li)}if(si.current=zl,a=xn!==null&&xn.next!==null,ii=0,an=xn=Qt=null,Ll=!1,a)throw Error(b(300));return r}function ia(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Qt.memoizedState=an=r:an=an.next=r,an}function la(){if(xn===null){var r=Qt.alternate;r=r!==null?r.memoizedState:null}else r=xn.next;var a=an===null?Qt.memoizedState:an.next;if(a!==null)an=a,xn=r;else{if(r===null)throw Error(b(310));r={memoizedState:(xn=r).memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},an===null?Qt.memoizedState=an=r:an=an.next=r}return an}function Br(r,a){return typeof a=="function"?a(r):a}function ci(r){var a=la(),l=a.queue;if(l===null)throw Error(b(311));l.lastRenderedReducer=r;var h=xn,y=h.baseQueue,x=l.pending;if(x!==null){if(y!==null){var E=y.next;y.next=x.next,x.next=E}h.baseQueue=y=x,l.pending=null}if(y!==null){y=y.next,h=h.baseState;var R=E=x=null,j=y;do{var q=j.lane;if((ii&q)===q)R!==null&&(R=R.next={lane:0,action:j.action,eagerReducer:j.eagerReducer,eagerState:j.eagerState,next:null}),h=j.eagerReducer===r?j.eagerState:r(h,j.action);else{var ae={lane:q,action:j.action,eagerReducer:j.eagerReducer,eagerState:j.eagerState,next:null};R===null?(E=R=ae,x=h):R=R.next=ae,Qt.lanes|=q,pi|=q}j=j.next}while(j!==null&&j!==y);R===null?x=h:R.next=E,Qn(h,a.memoizedState)||(pr=!0),a.memoizedState=h,a.baseState=x,a.baseQueue=R,l.lastRenderedState=h}return[a.memoizedState,l.dispatch]}function ui(r){var a=la(),l=a.queue;if(l===null)throw Error(b(311));l.lastRenderedReducer=r;var h=l.dispatch,y=l.pending,x=a.memoizedState;if(y!==null){l.pending=null;var E=y=y.next;do x=r(x,E.action),E=E.next;while(E!==y);Qn(x,a.memoizedState)||(pr=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),l.lastRenderedState=x}return[x,h]}function Fh(r,a,l){var h=a._getVersion;h=h(a._source);var y=a._workInProgressVersionPrimary;if(y!==null?r=y===h:(r=r.mutableReadLanes,(r=(ii&r)===r)&&(a._workInProgressVersionPrimary=h,Ja.push(a))),r)return l(a._source);throw Ja.push(a),Error(b(350))}function $h(r,a,l,h){var y=Cn;if(y===null)throw Error(b(349));var x=a._getVersion,E=x(a._source),R=si.current,j=R.useState(function(){return Fh(y,a,l)}),q=j[1],ae=j[0];j=an;var ke=r.memoizedState,me=ke.refs,Ae=me.getSnapshot,Ye=ke.source;ke=ke.subscribe;var Ze=Qt;return r.memoizedState={refs:me,source:a,subscribe:h},R.useEffect(function(){me.getSnapshot=l,me.setSnapshot=q;var Q=x(a._source);if(!Qn(E,Q)){Q=l(a._source),Qn(ae,Q)||(q(Q),Q=jo(Ze),y.mutableReadLanes|=Q&y.pendingLanes),Q=y.mutableReadLanes,y.entangledLanes|=Q;for(var U=y.entanglements,V=Q;0<V;){var ce=31-$e(V),pe=1<<ce;U[ce]|=Q,V&=~pe}}},[l,a,h]),R.useEffect(function(){return h(a._source,function(){var Q=me.getSnapshot,U=me.setSnapshot;try{U(Q(a._source));var V=jo(Ze);y.mutableReadLanes|=V&y.pendingLanes}catch(ce){U(function(){throw ce})}})},[a,h]),Qn(Ae,l)&&Qn(Ye,a)&&Qn(ke,h)||((r={pending:null,dispatch:null,lastRenderedReducer:Br,lastRenderedState:ae}).dispatch=q=Xu.bind(null,Qt,r),j.queue=r,j.baseQueue=null,ae=Fh(y,a,l),j.memoizedState=j.baseState=ae),ae}function Uh(r,a,l){return $h(la(),r,a,l)}function di(r){var a=ia();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r=(r=a.queue={pending:null,dispatch:null,lastRenderedReducer:Br,lastRenderedState:r}).dispatch=Xu.bind(null,Qt,r),[a.memoizedState,r]}function Dl(r,a,l,h){return r={tag:r,create:a,destroy:l,deps:h,next:null},(a=Qt.updateQueue)===null?(a={lastEffect:null},Qt.updateQueue=a,a.lastEffect=r.next=r):(l=a.lastEffect)===null?a.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,a.lastEffect=r),r}function qh(r){return r={current:r},ia().memoizedState=r}function Ml(){return la().memoizedState}function Wu(r,a,l,h){var y=ia();Qt.flags|=r,y.memoizedState=Dl(1|a,l,void 0,h===void 0?null:h)}function Qu(r,a,l,h){var y=la();h=h===void 0?null:h;var x=void 0;if(xn!==null){var E=xn.memoizedState;if(x=E.destroy,h!==null&&Hu(h,E.deps))return void Dl(a,l,x,h)}Qt.flags|=r,y.memoizedState=Dl(1|a,l,x,h)}function Hh(r,a){return Wu(516,4,r,a)}function Bl(r,a){return Qu(516,4,r,a)}function Vh(r,a){return Qu(4,2,r,a)}function Wh(r,a){return typeof a=="function"?(r=r(),a(r),function(){a(null)}):a!=null?(r=r(),a.current=r,function(){a.current=null}):void 0}function Qh(r,a,l){return l=l!=null?l.concat([r]):null,Qu(4,2,Wh.bind(null,a,r),l)}function Ku(){}function Kh(r,a){var l=la();a=a===void 0?null:a;var h=l.memoizedState;return h!==null&&a!==null&&Hu(a,h[1])?h[0]:(l.memoizedState=[r,a],r)}function Xh(r,a){var l=la();a=a===void 0?null:a;var h=l.memoizedState;return h!==null&&a!==null&&Hu(a,h[1])?h[0]:(r=r(),l.memoizedState=[r,a],r)}function F0(r,a){var l=Ka();Xa(98>l?98:l,function(){r(!0)}),Xa(97<l?97:l,function(){var h=Xn.transition;Xn.transition=1;try{r(!1),a()}finally{Xn.transition=h}})}function Xu(r,a,l){var h=Fn(),y=jo(r),x={lane:y,action:l,eagerReducer:null,eagerState:null,next:null},E=a.pending;if(E===null?x.next=x:(x.next=E.next,E.next=x),a.pending=x,E=r.alternate,r===Qt||E!==null&&E===Qt)li=Ll=!0;else{if(r.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer)!==null)try{var R=a.lastRenderedState,j=E(R,l);if(x.eagerReducer=E,x.eagerState=j,Qn(j,R))return}catch{}Ao(r,y,h)}}var zl={readContext:Kn,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useOpaqueIdentifier:jn,unstable_isNewReconciler:!1},$0={readContext:Kn,useCallback:function(r,a){return ia().memoizedState=[r,a===void 0?null:a],r},useContext:Kn,useEffect:Hh,useImperativeHandle:function(r,a,l){return l=l!=null?l.concat([r]):null,Wu(4,2,Wh.bind(null,a,r),l)},useLayoutEffect:function(r,a){return Wu(4,2,r,a)},useMemo:function(r,a){var l=ia();return a=a===void 0?null:a,r=r(),l.memoizedState=[r,a],r},useReducer:function(r,a,l){var h=ia();return a=l!==void 0?l(a):a,h.memoizedState=h.baseState=a,r=(r=h.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:a}).dispatch=Xu.bind(null,Qt,r),[h.memoizedState,r]},useRef:qh,useState:di,useDebugValue:Ku,useDeferredValue:function(r){var a=di(r),l=a[0],h=a[1];return Hh(function(){var y=Xn.transition;Xn.transition=1;try{h(r)}finally{Xn.transition=y}},[r]),l},useTransition:function(){var r=di(!1),a=r[0];return qh(r=F0.bind(null,r[1])),[r,a]},useMutableSource:function(r,a,l){var h=ia();return h.memoizedState={refs:{getSnapshot:a,setSnapshot:null},source:r,subscribe:l},$h(h,r,a,l)},useOpaqueIdentifier:function(){if(Mr){var r=!1,a=function(h){return{$$typeof:Z,toString:h,valueOf:h}}(function(){throw r||(r=!0,l("r:"+(Tu++).toString(36))),Error(b(355))}),l=di(a)[1];return!(2&Qt.mode)&&(Qt.flags|=516,Dl(5,function(){l("r:"+(Tu++).toString(36))},void 0,null)),a}return di(a="r:"+(Tu++).toString(36)),a},unstable_isNewReconciler:!1},U0={readContext:Kn,useCallback:Kh,useContext:Kn,useEffect:Bl,useImperativeHandle:Qh,useLayoutEffect:Vh,useMemo:Xh,useReducer:ci,useRef:Ml,useState:function(){return ci(Br)},useDebugValue:Ku,useDeferredValue:function(r){var a=ci(Br),l=a[0],h=a[1];return Bl(function(){var y=Xn.transition;Xn.transition=1;try{h(r)}finally{Xn.transition=y}},[r]),l},useTransition:function(){var r=ci(Br)[0];return[Ml().current,r]},useMutableSource:Uh,useOpaqueIdentifier:function(){return ci(Br)[0]},unstable_isNewReconciler:!1},q0={readContext:Kn,useCallback:Kh,useContext:Kn,useEffect:Bl,useImperativeHandle:Qh,useLayoutEffect:Vh,useMemo:Xh,useReducer:ui,useRef:Ml,useState:function(){return ui(Br)},useDebugValue:Ku,useDeferredValue:function(r){var a=ui(Br),l=a[0],h=a[1];return Bl(function(){var y=Xn.transition;Xn.transition=1;try{h(r)}finally{Xn.transition=y}},[r]),l},useTransition:function(){var r=ui(Br)[0];return[Ml().current,r]},useMutableSource:Uh,useOpaqueIdentifier:function(){return ui(Br)[0]},unstable_isNewReconciler:!1},H0=he.ReactCurrentOwner,pr=!1;function zn(r,a,l,h){a.child=r===null?Lh(a,null,l,h):Il(a,r.child,l,h)}function Gh(r,a,l,h,y){l=l.render;var x=a.ref;return Ya(a,y),h=Vu(r,a,l,h,x,y),r===null||pr?(a.flags|=1,zn(r,a,h,y),a.child):(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~y,oo(r,a,y))}function Yh(r,a,l,h,y,x){if(r===null){var E=l.type;return typeof E!="function"||yd(E)||E.defaultProps!==void 0||l.compare!==null||l.defaultProps!==void 0?((r=Kl(l.type,null,h,a,a.mode,x)).ref=a.ref,r.return=a,a.child=r):(a.tag=15,a.type=E,Zh(r,a,E,h,y,x))}return E=r.child,!(y&x)&&(y=E.memoizedProps,(l=(l=l.compare)!==null?l:Xs)(y,h)&&r.ref===a.ref)?oo(r,a,x):(a.flags|=1,(r=Po(E,h)).ref=a.ref,r.return=a,a.child=r)}function Zh(r,a,l,h,y,x){if(r!==null&&Xs(r.memoizedProps,h)&&r.ref===a.ref){if(pr=!1,(x&y)==0)return a.lanes=r.lanes,oo(r,a,x);16384&r.flags&&(pr=!0)}return Gu(r,a,l,h,x)}function Jh(r,a,l){var h=a.pendingProps,y=h.children,x=r!==null?r.memoizedState:null;if(h.mode==="hidden"||h.mode==="unstable-defer-without-hiding")if(!(4&a.mode))a.memoizedState={baseLanes:0},Ql(0,l);else{if(!(1073741824&l))return r=x!==null?x.baseLanes|l:l,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r},Ql(0,r),null;a.memoizedState={baseLanes:0},Ql(0,x!==null?x.baseLanes:l)}else x!==null?(h=x.baseLanes|l,a.memoizedState=null):h=l,Ql(0,h);return zn(r,a,y,l),a.child}function em(r,a){var l=a.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(a.flags|=128)}function Gu(r,a,l,h,y){var x=Bn(l)?oa:hn.current;return x=Qa(a,x),Ya(a,y),l=Vu(r,a,l,h,x,y),r===null||pr?(a.flags|=1,zn(r,a,l,y),a.child):(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~y,oo(r,a,y))}function tm(r,a,l,h,y){if(Bn(l)){var x=!0;Cl(a)}else x=!1;if(Ya(a,y),a.stateNode===null)r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),Ih(a,l,h),Bu(a,l,h,y),h=!0;else if(r===null){var E=a.stateNode,R=a.memoizedProps;E.props=R;var j=E.context,q=l.contextType;q=typeof q=="object"&&q!==null?Kn(q):Qa(a,q=Bn(l)?oa:hn.current);var ae=l.getDerivedStateFromProps,ke=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function";ke||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==h||j!==q)&&Ph(a,E,h,q),So=!1;var me=a.memoizedState;E.state=me,ti(a,h,E,y),j=a.memoizedState,R!==h||me!==j||On.current||So?(typeof ae=="function"&&(Rl(a,l,ae,h),j=a.memoizedState),(R=So||Ah(a,l,R,h,me,j,q))?(ke||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4)):(typeof E.componentDidMount=="function"&&(a.flags|=4),a.memoizedProps=h,a.memoizedState=j),E.props=h,E.state=j,E.context=q,h=R):(typeof E.componentDidMount=="function"&&(a.flags|=4),h=!1)}else{E=a.stateNode,kh(r,a),R=a.memoizedProps,q=a.type===a.elementType?R:fr(a.type,R),E.props=q,ke=a.pendingProps,me=E.context,j=typeof(j=l.contextType)=="object"&&j!==null?Kn(j):Qa(a,j=Bn(l)?oa:hn.current);var Ae=l.getDerivedStateFromProps;(ae=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==ke||me!==j)&&Ph(a,E,h,j),So=!1,me=a.memoizedState,E.state=me,ti(a,h,E,y);var Ye=a.memoizedState;R!==ke||me!==Ye||On.current||So?(typeof Ae=="function"&&(Rl(a,l,Ae,h),Ye=a.memoizedState),(q=So||Ah(a,l,q,h,me,Ye,j))?(ae||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,Ye,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,Ye,j)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=256)):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&me===r.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&me===r.memoizedState||(a.flags|=256),a.memoizedProps=h,a.memoizedState=Ye),E.props=h,E.state=Ye,E.context=j,h=q):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&me===r.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&me===r.memoizedState||(a.flags|=256),h=!1)}return Yu(r,a,l,h,x,y)}function Yu(r,a,l,h,y,x){em(r,a);var E=(64&a.flags)!=0;if(!h&&!E)return y&&yh(a,l,!1),oo(r,a,x);h=a.stateNode,H0.current=a;var R=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,r!==null&&E?(a.child=Il(a,r.child,null,x),a.child=Il(a,null,R,x)):zn(r,a,R,x),a.memoizedState=h.state,y&&yh(a,l,!0),a.child}function nm(r){var a=r.stateNode;a.pendingContext?mh(0,a.pendingContext,a.pendingContext!==a.context):a.context&&mh(0,a.context,!1),zu(r,a.containerInfo)}var rm,om,am,Zu={dehydrated:null,retryLane:0};function sm(r,a,l){var h,y=a.pendingProps,x=Wt.current,E=!1;return(h=(64&a.flags)!=0)||(h=(r===null||r.memoizedState!==null)&&(2&x)!=0),h?(E=!0,a.flags&=-65):r!==null&&r.memoizedState===null||y.fallback===void 0||y.unstable_avoidThisFallback===!0||(x|=1),Ht(Wt,1&x),r===null?(y.fallback!==void 0&&$u(a),r=y.children,x=y.fallback,E?(r=im(a,r,x,l),a.child.memoizedState={baseLanes:l},a.memoizedState=Zu,r):typeof y.unstable_expectedLoadTime=="number"?(r=im(a,r,x,l),a.child.memoizedState={baseLanes:l},a.memoizedState=Zu,a.lanes=33554432,r):((l=bd({mode:"visible",children:r},a.mode,l,null)).return=a,a.child=l)):(r.memoizedState,E?(y=function(R,j,q,ae,ke){var me=j.mode,Ae=R.child;R=Ae.sibling;var Ye={mode:"hidden",children:q};return!(2&me)&&j.child!==Ae?((q=j.child).childLanes=0,q.pendingProps=Ye,(Ae=q.lastEffect)!==null?(j.firstEffect=q.firstEffect,j.lastEffect=Ae,Ae.nextEffect=null):j.firstEffect=j.lastEffect=null):q=Po(Ae,Ye),R!==null?ae=Po(R,ae):(ae=ss(ae,me,ke,null)).flags|=2,ae.return=j,q.return=j,q.sibling=ae,j.child=q,ae}(r,a,y.children,y.fallback,l),E=a.child,x=r.child.memoizedState,E.memoizedState=x===null?{baseLanes:l}:{baseLanes:x.baseLanes|l},E.childLanes=r.childLanes&~l,a.memoizedState=Zu,y):(l=function(R,j,q,ae){var ke=R.child;return R=ke.sibling,q=Po(ke,{mode:"visible",children:q}),!(2&j.mode)&&(q.lanes=ae),q.return=j,q.sibling=null,R!==null&&(R.nextEffect=null,R.flags=8,j.firstEffect=j.lastEffect=R),j.child=q}(r,a,y.children,l),a.memoizedState=null,l))}function im(r,a,l,h){var y=r.mode,x=r.child;return a={mode:"hidden",children:a},!(2&y)&&x!==null?(x.childLanes=0,x.pendingProps=a):x=bd(a,y,0,null),l=ss(l,y,h,null),x.return=r,l.return=r,x.sibling=l,r.child=x,l}function lm(r,a){r.lanes|=a;var l=r.alternate;l!==null&&(l.lanes|=a),_h(r.return,a)}function Ju(r,a,l,h,y,x){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:y,lastEffect:x}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=y,E.lastEffect=x)}function cm(r,a,l){var h=a.pendingProps,y=h.revealOrder,x=h.tail;if(zn(r,a,h.children,l),(2&(h=Wt.current))!=0)h=1&h|2,a.flags|=64;else{if(r!==null&&64&r.flags)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&lm(r,l);else if(r.tag===19)lm(r,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ht(Wt,h),(2&a.mode)==0)a.memoizedState=null;else switch(y){case"forwards":for(l=a.child,y=null;l!==null;)(r=l.alternate)!==null&&Pl(r)===null&&(y=l),l=l.sibling;(l=y)===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),Ju(a,!1,y,l,x,a.lastEffect);break;case"backwards":for(l=null,y=a.child,a.child=null;y!==null;){if((r=y.alternate)!==null&&Pl(r)===null){a.child=y;break}r=y.sibling,y.sibling=l,l=y,y=r}Ju(a,!0,l,null,x,a.lastEffect);break;case"together":Ju(a,!1,null,null,void 0,a.lastEffect);break;default:a.memoizedState=null}return a.child}function oo(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),pi|=a.lanes,(l&a.childLanes)!=0){if(r!==null&&a.child!==r.child)throw Error(b(153));if(a.child!==null){for(l=Po(r=a.child,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,(l=l.sibling=Po(r,r.pendingProps)).return=a;l.sibling=null}return a.child}return null}function fi(r,a){if(!Mr)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function V0(r,a,l){var h=a.pendingProps;switch(a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Bn(a.type)&&Ru(),null;case 3:return Za(),$t(On),$t(hn),qu(),(h=a.stateNode).pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),r!==null&&r.child!==null||(Nl(a)?a.flags|=4:h.hydrate||(a.flags|=256)),null;case 5:Fu(a);var y=sa(ai.current);if(l=a.type,r!==null&&a.stateNode!=null)om(r,a,l,h),r.ref!==a.ref&&(a.flags|=128);else{if(!h){if(a.stateNode===null)throw Error(b(166));return null}if(r=sa(Dr.current),Nl(a)){h=a.stateNode,l=a.type;var x=a.memoizedProps;switch(h[xo]=a,h[wl]=x,l){case"dialog":Mt("cancel",h),Mt("close",h);break;case"iframe":case"object":case"embed":Mt("load",h);break;case"video":case"audio":for(r=0;r<Ys.length;r++)Mt(Ys[r],h);break;case"source":Mt("error",h);break;case"img":case"image":case"link":Mt("error",h),Mt("load",h);break;case"details":Mt("toggle",h);break;case"input":_n(h,x),Mt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!x.multiple},Mt("invalid",h);break;case"textarea":Yo(h,x),Mt("invalid",h)}for(var E in De(l,x),r=null,x)x.hasOwnProperty(E)&&(y=x[E],E==="children"?typeof y=="string"?h.textContent!==y&&(r=["children",y]):typeof y=="number"&&h.textContent!==""+y&&(r=["children",""+y]):w.hasOwnProperty(E)&&y!=null&&E==="onScroll"&&Mt("scroll",h));switch(l){case"input":gt(h),Tr(h,x,!0);break;case"textarea":gt(h),Vr(h);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(h.onclick=bl)}h=r,a.updateQueue=h,h!==null&&(a.flags|=4)}else{switch(E=y.nodeType===9?y:y.ownerDocument,r===Zo&&(r=vn(l)),r===Zo?l==="script"?((r=E.createElement("div")).innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(l,{is:h.is}):(r=E.createElement(l),l==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,l),r[xo]=a,r[wl]=h,rm(r,a),a.stateNode=r,E=be(l,h),l){case"dialog":Mt("cancel",r),Mt("close",r),y=h;break;case"iframe":case"object":case"embed":Mt("load",r),y=h;break;case"video":case"audio":for(y=0;y<Ys.length;y++)Mt(Ys[y],r);y=h;break;case"source":Mt("error",r),y=h;break;case"img":case"image":case"link":Mt("error",r),Mt("load",r),y=h;break;case"details":Mt("toggle",r),y=h;break;case"input":_n(r,h),y=bn(r,h),Mt("invalid",r);break;case"option":y=qn(r,h);break;case"select":r._wrapperState={wasMultiple:!!h.multiple},y=p({},h,{value:void 0}),Mt("invalid",r);break;case"textarea":Yo(r,h),y=en(r,h),Mt("invalid",r);break;default:y=h}De(l,y);var R=y;for(x in R)if(R.hasOwnProperty(x)){var j=R[x];x==="style"?re(r,j):x==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0)!=null&&Wr(r,j):x==="children"?typeof j=="string"?(l!=="textarea"||j!=="")&&Qr(r,j):typeof j=="number"&&Qr(r,""+j):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(w.hasOwnProperty(x)?j!=null&&x==="onScroll"&&Mt("scroll",r):j!=null&&ue(r,x,j,E))}switch(l){case"input":gt(r),Tr(r,h,!1);break;case"textarea":gt(r),Vr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+ct(h.value));break;case"select":r.multiple=!!h.multiple,(x=h.value)!=null?_r(r,!!h.multiple,x,!1):h.defaultValue!=null&&_r(r,!!h.multiple,h.defaultValue,!0);break;default:typeof y.onClick=="function"&&(r.onclick=bl)}uh(l,h)&&(a.flags|=4)}a.ref!==null&&(a.flags|=128)}return null;case 6:if(r&&a.stateNode!=null)am(0,a,r.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(b(166));l=sa(ai.current),sa(Dr.current),Nl(a)?(h=a.stateNode,l=a.memoizedProps,h[xo]=a,h.nodeValue!==l&&(a.flags|=4)):((h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h))[xo]=a,a.stateNode=h)}return null;case 13:return $t(Wt),h=a.memoizedState,64&a.flags?(a.lanes=l,a):(h=h!==null,l=!1,r===null?a.memoizedProps.fallback!==void 0&&Nl(a):l=r.memoizedState!==null,h&&!l&&2&a.mode&&(r===null&&a.memoizedProps.unstable_avoidThisFallback!==!0||1&Wt.current?sn===0&&(sn=3):(sn!==0&&sn!==3||(sn=4),Cn===null||!(134217727&pi)&&!(134217727&ts)||rs(Cn,gn))),(h||l)&&(a.flags|=4),null);case 4:return Za(),r===null&&ah(a.stateNode.containerInfo),null;case 10:return Du(a),null;case 19:if($t(Wt),(h=a.memoizedState)===null)return null;if(x=(64&a.flags)!=0,(E=h.rendering)===null)if(x)fi(h,!1);else{if(sn!==0||r!==null&&64&r.flags)for(r=a.child;r!==null;){if((E=Pl(r))!==null){for(a.flags|=64,fi(h,!1),(x=E.updateQueue)!==null&&(a.updateQueue=x,a.flags|=4),h.lastEffect===null&&(a.firstEffect=null),a.lastEffect=h.lastEffect,h=l,l=a.child;l!==null;)r=h,(x=l).flags&=2,x.nextEffect=null,x.firstEffect=null,x.lastEffect=null,(E=x.alternate)===null?(x.childLanes=0,x.lanes=r,x.child=null,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=E.childLanes,x.lanes=E.lanes,x.child=E.child,x.memoizedProps=E.memoizedProps,x.memoizedState=E.memoizedState,x.updateQueue=E.updateQueue,x.type=E.type,r=E.dependencies,x.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ht(Wt,1&Wt.current|2),a.child}r=r.sibling}h.tail!==null&&mn()>ud&&(a.flags|=64,x=!0,fi(h,!1),a.lanes=33554432)}else{if(!x)if((r=Pl(E))!==null){if(a.flags|=64,x=!0,(l=r.updateQueue)!==null&&(a.updateQueue=l,a.flags|=4),fi(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!Mr)return(a=a.lastEffect=h.lastEffect)!==null&&(a.nextEffect=null),null}else 2*mn()-h.renderingStartTime>ud&&l!==1073741824&&(a.flags|=64,x=!0,fi(h,!1),a.lanes=33554432);h.isBackwards?(E.sibling=a.child,a.child=E):((l=h.last)!==null?l.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(l=h.tail,h.rendering=l,h.tail=l.sibling,h.lastEffect=a.lastEffect,h.renderingStartTime=mn(),l.sibling=null,a=Wt.current,Ht(Wt,x?1&a|2:1&a),l):null;case 23:case 24:return gd(),r!==null&&r.memoizedState!==null!=(a.memoizedState!==null)&&h.mode!=="unstable-defer-without-hiding"&&(a.flags|=4),null}throw Error(b(156,a.tag))}function W0(r){switch(r.tag){case 1:Bn(r.type)&&Ru();var a=r.flags;return 4096&a?(r.flags=-4097&a|64,r):null;case 3:if(Za(),$t(On),$t(hn),qu(),(64&(a=r.flags))!=0)throw Error(b(285));return r.flags=-4097&a|64,r;case 5:return Fu(r),null;case 13:return $t(Wt),4096&(a=r.flags)?(r.flags=-4097&a|64,r):null;case 19:return $t(Wt),null;case 4:return Za(),null;case 10:return Du(r),null;case 23:case 24:return gd(),null;default:return null}}function ed(r,a){try{var l="",h=a;do l+=jt(h),h=h.return;while(h);var y=l}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:r,source:a,stack:y}}function td(r,a){try{console.error(a.value)}catch(l){setTimeout(function(){throw l})}}rm=function(r,a){for(var l=a.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},om=function(r,a,l,h){var y=r.memoizedProps;if(y!==h){r=a.stateNode,sa(Dr.current);var x,E=null;switch(l){case"input":y=bn(r,y),h=bn(r,h),E=[];break;case"option":y=qn(r,y),h=qn(r,h),E=[];break;case"select":y=p({},y,{value:void 0}),h=p({},h,{value:void 0}),E=[];break;case"textarea":y=en(r,y),h=en(r,h),E=[];break;default:typeof y.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=bl)}for(q in De(l,h),l=null,y)if(!h.hasOwnProperty(q)&&y.hasOwnProperty(q)&&y[q]!=null)if(q==="style"){var R=y[q];for(x in R)R.hasOwnProperty(x)&&(l||(l={}),l[x]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(w.hasOwnProperty(q)?E||(E=[]):(E=E||[]).push(q,null));for(q in h){var j=h[q];if(R=y?.[q],h.hasOwnProperty(q)&&j!==R&&(j!=null||R!=null))if(q==="style")if(R){for(x in R)!R.hasOwnProperty(x)||j&&j.hasOwnProperty(x)||(l||(l={}),l[x]="");for(x in j)j.hasOwnProperty(x)&&R[x]!==j[x]&&(l||(l={}),l[x]=j[x])}else l||(E||(E=[]),E.push(q,l)),l=j;else q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,R=R?R.__html:void 0,j!=null&&R!==j&&(E=E||[]).push(q,j)):q==="children"?typeof j!="string"&&typeof j!="number"||(E=E||[]).push(q,""+j):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(w.hasOwnProperty(q)?(j!=null&&q==="onScroll"&&Mt("scroll",r),E||R===j||(E=[])):typeof j=="object"&&j!==null&&j.$$typeof===Z?j.toString():(E=E||[]).push(q,j))}l&&(E=E||[]).push("style",l);var q=E;(a.updateQueue=q)&&(a.flags|=4)}},am=function(r,a,l,h){l!==h&&(a.flags|=4)};var Q0=typeof WeakMap=="function"?WeakMap:Map;function um(r,a,l){(l=To(-1,l)).tag=3,l.payload={element:null};var h=a.value;return l.callback=function(){Ul||(Ul=!0,dd=h),td(0,a)},l}function dm(r,a,l){(l=To(-1,l)).tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var y=a.value;l.payload=function(){return td(0,a),h(y)}}var x=r.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){typeof h!="function"&&(zr===null?zr=new Set([this]):zr.add(this),td(0,a));var E=a.stack;this.componentDidCatch(a.value,{componentStack:E!==null?E:""})}),l}var K0=typeof WeakSet=="function"?WeakSet:Set;function fm(r){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){Io(r,l)}else a.current=null}function X0(r,a){switch(a.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&a.flags&&r!==null){var l=r.memoizedProps,h=r.memoizedState;a=(r=a.stateNode).getSnapshotBeforeUpdate(a.elementType===a.type?l:fr(a.type,l),h),r.__reactInternalSnapshotBeforeUpdate=a}return;case 3:return void(256&a.flags&&Su(a.stateNode.containerInfo))}throw Error(b(163))}function G0(r,a,l){switch(l.tag){case 0:case 11:case 15:case 22:if((a=(a=l.updateQueue)!==null?a.lastEffect:null)!==null){r=a=a.next;do{if((3&r.tag)==3){var h=r.create;r.destroy=h()}r=r.next}while(r!==a)}if((a=(a=l.updateQueue)!==null?a.lastEffect:null)!==null){r=a=a.next;do{var y=r;h=y.next,4&(y=y.tag)&&1&y&&(km(l,r),rx(l,r)),r=h}while(r!==a)}return;case 1:return r=l.stateNode,4&l.flags&&(a===null?r.componentDidMount():(h=l.elementType===l.type?a.memoizedProps:fr(l.type,a.memoizedProps),r.componentDidUpdate(h,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),void((a=l.updateQueue)!==null&&Oh(l,a,r));case 3:if((a=l.updateQueue)!==null){if(r=null,l.child!==null)switch(l.child.tag){case 5:case 1:r=l.child.stateNode}Oh(l,a,r)}return;case 5:return r=l.stateNode,void(a===null&&4&l.flags&&uh(l.type,l.memoizedProps)&&r.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(l.memoizedState===null&&(l=l.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&ea(l)))))}throw Error(b(163))}function pm(r,a){for(var l=r;;){if(l.tag===5){var h=l.stateNode;if(a)typeof(h=h.style).setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{h=l.stateNode;var y=l.memoizedProps.style;y=y!=null&&y.hasOwnProperty("display")?y.display:null,h.style.display=F("display",y)}}else if(l.tag===6)l.stateNode.nodeValue=a?"":l.memoizedProps;else if((l.tag!==23&&l.tag!==24||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}}function hm(r,a){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(Ou,a)}catch{}switch(a.tag){case 0:case 11:case 14:case 15:case 22:if((r=a.updateQueue)!==null&&(r=r.lastEffect)!==null){var l=r=r.next;do{var h=l,y=h.destroy;if(h=h.tag,y!==void 0)if(4&h)km(a,l);else{h=a;try{y()}catch(x){Io(h,x)}}l=l.next}while(l!==r)}break;case 1:if(fm(a),typeof(r=a.stateNode).componentWillUnmount=="function")try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(x){Io(a,x)}break;case 5:fm(a);break;case 4:bm(r,a)}}function mm(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function gm(r){return r.tag===5||r.tag===3||r.tag===4}function ym(r){e:{for(var a=r.return;a!==null;){if(gm(a))break e;a=a.return}throw Error(b(160))}var l=a;switch(a=l.stateNode,l.tag){case 5:var h=!1;break;case 3:case 4:a=a.containerInfo,h=!0;break;default:throw Error(b(161))}16&l.flags&&(Qr(a,""),l.flags&=-17);e:t:for(l=r;;){for(;l.sibling===null;){if(l.return===null||gm(l.return)){l=null;break e}l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(2&l.flags)){l=l.stateNode;break e}}h?nd(r,l,a):rd(r,l,a)}function nd(r,a,l){var h=r.tag,y=h===5||h===6;if(y)r=y?r.stateNode:r.stateNode.instance,a?l.nodeType===8?l.parentNode.insertBefore(r,a):l.insertBefore(r,a):(l.nodeType===8?(a=l.parentNode).insertBefore(r,l):(a=l).appendChild(r),(l=l._reactRootContainer)!=null||a.onclick!==null||(a.onclick=bl));else if(h!==4&&(r=r.child)!==null)for(nd(r,a,l),r=r.sibling;r!==null;)nd(r,a,l),r=r.sibling}function rd(r,a,l){var h=r.tag,y=h===5||h===6;if(y)r=y?r.stateNode:r.stateNode.instance,a?l.insertBefore(r,a):l.appendChild(r);else if(h!==4&&(r=r.child)!==null)for(rd(r,a,l),r=r.sibling;r!==null;)rd(r,a,l),r=r.sibling}function bm(r,a){for(var l,h,y=a,x=!1;;){if(!x){x=y.return;e:for(;;){if(x===null)throw Error(b(160));switch(l=x.stateNode,x.tag){case 5:h=!1;break e;case 3:case 4:l=l.containerInfo,h=!0;break e}x=x.return}x=!0}if(y.tag===5||y.tag===6){e:for(var E=r,R=y,j=R;;)if(hm(E,j),j.child!==null&&j.tag!==4)j.child.return=j,j=j.child;else{if(j===R)break e;for(;j.sibling===null;){if(j.return===null||j.return===R)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}h?(E=l,R=y.stateNode,E.nodeType===8?E.parentNode.removeChild(R):E.removeChild(R)):l.removeChild(y.stateNode)}else if(y.tag===4){if(y.child!==null){l=y.stateNode.containerInfo,h=!0,y.child.return=y,y=y.child;continue}}else if(hm(r,y),y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break;for(;y.sibling===null;){if(y.return===null||y.return===a)return;(y=y.return).tag===4&&(x=!1)}y.sibling.return=y.return,y=y.sibling}}function od(r,a){switch(a.tag){case 0:case 11:case 14:case 15:case 22:var l=a.updateQueue;if((l=l!==null?l.lastEffect:null)!==null){var h=l=l.next;do(3&h.tag)==3&&(r=h.destroy,h.destroy=void 0,r!==void 0&&r()),h=h.next;while(h!==l)}return;case 1:case 12:case 17:return;case 5:if((l=a.stateNode)!=null){h=a.memoizedProps;var y=r!==null?r.memoizedProps:h;r=a.type;var x=a.updateQueue;if(a.updateQueue=null,x!==null){for(l[wl]=h,r==="input"&&h.type==="radio"&&h.name!=null&&Sr(l,h),be(r,y),a=be(r,h),y=0;y<x.length;y+=2){var E=x[y],R=x[y+1];E==="style"?re(l,R):E==="dangerouslySetInnerHTML"?Wr(l,R):E==="children"?Qr(l,R):ue(l,E,R,a)}switch(r){case"input":un(l,h);break;case"textarea":ja(l,h);break;case"select":r=l._wrapperState.wasMultiple,l._wrapperState.wasMultiple=!!h.multiple,(x=h.value)!=null?_r(l,!!h.multiple,x,!1):r!==!!h.multiple&&(h.defaultValue!=null?_r(l,!!h.multiple,h.defaultValue,!0):_r(l,!!h.multiple,h.multiple?[]:"",!1))}}}return;case 6:if(a.stateNode===null)throw Error(b(162));return void(a.stateNode.nodeValue=a.memoizedProps);case 3:return void((l=a.stateNode).hydrate&&(l.hydrate=!1,ea(l.containerInfo)));case 13:return a.memoizedState!==null&&(cd=mn(),pm(a.child,!0)),void vm(a);case 19:return void vm(a);case 23:case 24:return void pm(a,a.memoizedState!==null)}throw Error(b(163))}function vm(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new K0),a.forEach(function(h){var y=sx.bind(null,r,h);l.has(h)||(l.add(h),h.then(y,y))})}}function Y0(r,a){return r!==null&&((r=r.memoizedState)===null||r.dehydrated!==null)&&(a=a.memoizedState)!==null&&a.dehydrated===null}var Z0=Math.ceil,Fl=he.ReactCurrentDispatcher,ad=he.ReactCurrentOwner,dt=0,Cn=null,rn=null,gn=0,ca=0,sd=Co(0),sn=0,$l=null,es=0,pi=0,ts=0,id=0,ld=null,cd=0,ud=1/0;function ns(){ud=mn()+500}var wm,je=null,Ul=!1,dd=null,zr=null,Ro=!1,hi=null,mi=90,fd=[],pd=[],ao=null,gi=0,hd=null,ql=-1,Oo=0,Hl=0,yi=null,Vl=!1;function Fn(){return 48&dt?mn():ql!==-1?ql:ql=mn()}function jo(r){if(!(2&(r=r.mode)))return 1;if(!(4&r))return Ka()===99?1:2;if(Oo===0&&(Oo=es),z0.transition!==0){Hl!==0&&(Hl=ld!==null?ld.pendingLanes:0),r=Oo;var a=4186112&~Hl;return(a&=-a)==0&&(a=(r=4186112&~r)&-r)==0&&(a=8192),a}return r=Ka(),r=ee(4&dt&&r===98?12:r=function(l){switch(l){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(r),Oo)}function Ao(r,a,l){if(50<gi)throw gi=0,hd=null,Error(b(185));if((r=Wl(r,a))===null)return null;fe(r,a,l),r===Cn&&(ts|=a,sn===4&&rs(r,gn));var h=Ka();a===1?8&dt&&!(48&dt)?md(r):(Gn(r,l),dt===0&&(ns(),no())):(!(4&dt)||h!==98&&h!==99||(ao===null?ao=new Set([r]):ao.add(r)),Gn(r,l)),ld=r}function Wl(r,a){r.lanes|=a;var l=r.alternate;for(l!==null&&(l.lanes|=a),l=r,r=r.return;r!==null;)r.childLanes|=a,(l=r.alternate)!==null&&(l.childLanes|=a),l=r,r=r.return;return l.tag===3?l.stateNode:null}function Gn(r,a){for(var l=r.callbackNode,h=r.suspendedLanes,y=r.pingedLanes,x=r.expirationTimes,E=r.pendingLanes;0<E;){var R=31-$e(E),j=1<<R,q=x[R];if(q===-1){if(!(j&h)||j&y){q=a,K(j);var ae=z;x[R]=10<=ae?q+250:6<=ae?q+5e3:-1}}else q<=a&&(r.expiredLanes|=j);E&=~j}if(h=J(r,r===Cn?gn:0),a=z,h===0)l!==null&&(l!==Pu&&Au(l),r.callbackNode=null,r.callbackPriority=0);else{if(l!==null){if(r.callbackPriority===a)return;l!==Pu&&Au(l)}a===15?(l=md.bind(null,r),to===null?(to=[l],Sl=ju(El,Th)):to.push(l),l=Pu):a===14?l=ei(99,md.bind(null,r)):(l=function(ke){switch(ke){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(b(358,ke))}}(a),l=ei(l,xm.bind(null,r))),r.callbackPriority=a,r.callbackNode=l}}function xm(r){if(ql=-1,Hl=Oo=0,(48&dt)!=0)throw Error(b(327));var a=r.callbackNode;if(ua()&&r.callbackNode!==a)return null;var l=J(r,r===Cn?gn:0);if(l===0)return null;var h=l,y=dt;dt|=16;var x=Sm();for(Cn===r&&gn===h||(ns(),os(r,h));;)try{ex();break}catch(R){Em(r,R)}if(Lu(),Fl.current=x,dt=y,rn!==null?h=0:(Cn=null,gn=0,h=sn),(es&ts)!=0)os(r,0);else if(h!==0){if(h===2&&(dt|=64,r.hydrate&&(r.hydrate=!1,Su(r.containerInfo)),(l=le(r))!==0&&(h=bi(r,l))),h===1)throw a=$l,os(r,0),rs(r,l),Gn(r,mn()),a;switch(r.finishedWork=r.current.alternate,r.finishedLanes=l,h){case 0:case 1:throw Error(b(345));case 2:case 5:as(r);break;case 3:if(rs(r,l),(62914560&l)===l&&10<(h=cd+500-mn())){if(J(r,0)!==0)break;if(((y=r.suspendedLanes)&l)!==l){Fn(),r.pingedLanes|=r.suspendedLanes&y;break}r.timeoutHandle=dh(as.bind(null,r),h);break}as(r);break;case 4:if(rs(r,l),(4186112&l)===l)break;for(h=r.eventTimes,y=-1;0<l;){var E=31-$e(l);x=1<<E,(E=h[E])>y&&(y=E),l&=~x}if(l=y,10<(l=(120>(l=mn()-l)?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Z0(l/1960))-l)){r.timeoutHandle=dh(as.bind(null,r),l);break}as(r);break;default:throw Error(b(329))}}return Gn(r,mn()),r.callbackNode===a?xm.bind(null,r):null}function rs(r,a){for(a&=~id,a&=~ts,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var l=31-$e(a),h=1<<l;r[l]=-1,a&=~h}}function md(r){if(48&dt)throw Error(b(327));if(ua(),r===Cn&&(r.expiredLanes&gn)!=0){var a=gn,l=bi(r,a);es&ts&&(l=bi(r,a=J(r,a)))}else l=bi(r,a=J(r,0));if(r.tag!==0&&l===2&&(dt|=64,r.hydrate&&(r.hydrate=!1,Su(r.containerInfo)),(a=le(r))!==0&&(l=bi(r,a))),l===1)throw l=$l,os(r,0),rs(r,a),Gn(r,mn()),l;return r.finishedWork=r.current.alternate,r.finishedLanes=a,as(r),Gn(r,mn()),null}function Cm(r,a){var l=dt;dt&=-2,dt|=8;try{return r(a)}finally{(dt=l)===0&&(ns(),no())}}function Ql(r,a){Ht(sd,ca),ca|=a,es|=a}function gd(){ca=sd.current,$t(sd)}function os(r,a){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,N0(l)),rn!==null)for(l=rn.return;l!==null;){var h=l;switch(h.tag){case 1:(h=h.type.childContextTypes)!=null&&Ru();break;case 3:Za(),$t(On),$t(hn),qu();break;case 5:Fu(h);break;case 4:Za();break;case 13:case 19:$t(Wt);break;case 10:Du(h);break;case 23:case 24:gd()}l=l.return}Cn=r,rn=Po(r.current,null),gn=ca=es=a,sn=0,$l=null,id=ts=pi=0}function Em(r,a){for(;;){var l=rn;try{if(Lu(),si.current=zl,Ll){for(var h=Qt.memoizedState;h!==null;){var y=h.queue;y!==null&&(y.pending=null),h=h.next}Ll=!1}if(ii=0,an=xn=Qt=null,li=!1,ad.current=null,l===null||l.return===null){sn=1,$l=a,rn=null;break}e:{var x=r,E=l.return,R=l,j=a;if(a=gn,R.flags|=2048,R.firstEffect=R.lastEffect=null,j!==null&&typeof j=="object"&&typeof j.then=="function"){var q=j;if(!(2&R.mode)){var ae=R.alternate;ae?(R.updateQueue=ae.updateQueue,R.memoizedState=ae.memoizedState,R.lanes=ae.lanes):(R.updateQueue=null,R.memoizedState=null)}var ke=(1&Wt.current)!=0,me=E;do{var Ae;if(Ae=me.tag===13){var Ye=me.memoizedState;if(Ye!==null)Ae=Ye.dehydrated!==null;else{var Ze=me.memoizedProps;Ae=Ze.fallback!==void 0&&(Ze.unstable_avoidThisFallback!==!0||!ke)}}if(Ae){var Q=me.updateQueue;if(Q===null){var U=new Set;U.add(q),me.updateQueue=U}else Q.add(q);if(!(2&me.mode)){if(me.flags|=64,R.flags|=16384,R.flags&=-2981,R.tag===1)if(R.alternate===null)R.tag=17;else{var V=To(-1,1);V.tag=2,_o(R,V)}R.lanes|=1;break e}j=void 0,R=a;var ce=x.pingCache;if(ce===null?(ce=x.pingCache=new Q0,j=new Set,ce.set(q,j)):(j=ce.get(q))===void 0&&(j=new Set,ce.set(q,j)),!j.has(R)){j.add(R);var pe=ax.bind(null,x,q,R);q.then(pe,pe)}me.flags|=4096,me.lanes=a;break e}me=me.return}while(me!==null);j=Error((xt(R.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}sn!==5&&(sn=2),j=ed(j,R),me=E;do{switch(me.tag){case 3:x=j,me.flags|=4096,a&=-a,me.lanes|=a,Rh(me,um(0,x,a));break e;case 1:x=j;var tt=me.type,Ne=me.stateNode;if(!(64&me.flags)&&(typeof tt.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(zr===null||!zr.has(Ne)))){me.flags|=4096,a&=-a,me.lanes|=a,Rh(me,dm(me,x,a));break e}}me=me.return}while(me!==null)}_m(l)}catch(ut){a=ut,rn===l&&l!==null&&(rn=l=l.return);continue}break}}function Sm(){var r=Fl.current;return Fl.current=zl,r===null?zl:r}function bi(r,a){var l=dt;dt|=16;var h=Sm();for(Cn===r&&gn===a||os(r,a);;)try{J0();break}catch(y){Em(r,y)}if(Lu(),dt=l,Fl.current=h,rn!==null)throw Error(b(261));return Cn=null,gn=0,sn}function J0(){for(;rn!==null;)Tm(rn)}function ex(){for(;rn!==null&&!D0();)Tm(rn)}function Tm(r){var a=wm(r.alternate,r,ca);r.memoizedProps=r.pendingProps,a===null?_m(r):rn=a,ad.current=null}function _m(r){var a=r;do{var l=a.alternate;if(r=a.return,(2048&a.flags)==0){if((l=V0(l,a,ca))!==null)return void(rn=l);if((l=a).tag!==24&&l.tag!==23||l.memoizedState===null||1073741824&ca||!(4&l.mode)){for(var h=0,y=l.child;y!==null;)h|=y.lanes|y.childLanes,y=y.sibling;l.childLanes=h}r!==null&&!(2048&r.flags)&&(r.firstEffect===null&&(r.firstEffect=a.firstEffect),a.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=a.firstEffect),r.lastEffect=a.lastEffect),1<a.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=a:r.firstEffect=a,r.lastEffect=a))}else{if((l=W0(a))!==null)return l.flags&=2047,void(rn=l);r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}if((a=a.sibling)!==null)return void(rn=a);rn=a=r}while(a!==null);sn===0&&(sn=5)}function as(r){var a=Ka();return Xa(99,tx.bind(null,r,a)),null}function tx(r,a){do ua();while(hi!==null);if(48&dt)throw Error(b(327));var l=r.finishedWork;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(b(177));r.callbackNode=null;var h=l.lanes|l.childLanes,y=h,x=r.pendingLanes&~y;r.pendingLanes=y,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=y,r.mutableReadLanes&=y,r.entangledLanes&=y,y=r.entanglements;for(var E=r.eventTimes,R=r.expirationTimes;0<x;){var j=31-$e(x),q=1<<j;y[j]=0,E[j]=-1,R[j]=-1,x&=~q}if(ao!==null&&!(24&h)&&ao.has(r)&&ao.delete(r),r===Cn&&(rn=Cn=null,gn=0),1<l.flags?l.lastEffect!==null?(l.lastEffect.nextEffect=l,h=l.firstEffect):h=l:h=l.firstEffect,h!==null){if(y=dt,dt|=32,ad.current=null,xu=nt,yu(E=Zp())){if("selectionStart"in E)R={start:E.selectionStart,end:E.selectionEnd};else e:if(R=(R=E.ownerDocument)&&R.defaultView||window,(q=R.getSelection&&R.getSelection())&&q.rangeCount!==0){R=q.anchorNode,x=q.anchorOffset,j=q.focusNode,q=q.focusOffset;try{R.nodeType,j.nodeType}catch{R=null;break e}var ae=0,ke=-1,me=-1,Ae=0,Ye=0,Ze=E,Q=null;t:for(;;){for(var U;Ze!==R||x!==0&&Ze.nodeType!==3||(ke=ae+x),Ze!==j||q!==0&&Ze.nodeType!==3||(me=ae+q),Ze.nodeType===3&&(ae+=Ze.nodeValue.length),(U=Ze.firstChild)!==null;)Q=Ze,Ze=U;for(;;){if(Ze===E)break t;if(Q===R&&++Ae===x&&(ke=ae),Q===j&&++Ye===q&&(me=ae),(U=Ze.nextSibling)!==null)break;Q=(Ze=Q).parentNode}Ze=U}R=ke===-1||me===-1?null:{start:ke,end:me}}else R=null;R=R||{start:0,end:0}}else R=null;Cu={focusedElem:E,selectionRange:R},nt=!1,yi=null,Vl=!1,je=h;do try{nx()}catch(Ge){if(je===null)throw Error(b(330));Io(je,Ge),je=je.nextEffect}while(je!==null);yi=null,je=h;do try{for(E=r;je!==null;){var V=je.flags;if(16&V&&Qr(je.stateNode,""),128&V){var ce=je.alternate;if(ce!==null){var pe=ce.ref;pe!==null&&(typeof pe=="function"?pe(null):pe.current=null)}}switch(1038&V){case 2:ym(je),je.flags&=-3;break;case 6:ym(je),je.flags&=-3,od(je.alternate,je);break;case 1024:je.flags&=-1025;break;case 1028:je.flags&=-1025,od(je.alternate,je);break;case 4:od(je.alternate,je);break;case 8:bm(E,R=je);var tt=R.alternate;mm(R),tt!==null&&mm(tt)}je=je.nextEffect}}catch(Ge){if(je===null)throw Error(b(330));Io(je,Ge),je=je.nextEffect}while(je!==null);if(pe=Cu,ce=Zp(),V=pe.focusedElem,E=pe.selectionRange,ce!==V&&V&&V.ownerDocument&&Yp(V.ownerDocument.documentElement,V)){for(E!==null&&yu(V)&&(ce=E.start,(pe=E.end)===void 0&&(pe=ce),"selectionStart"in V?(V.selectionStart=ce,V.selectionEnd=Math.min(pe,V.value.length)):(pe=(ce=V.ownerDocument||document)&&ce.defaultView||window).getSelection&&(pe=pe.getSelection(),R=V.textContent.length,tt=Math.min(E.start,R),E=E.end===void 0?tt:Math.min(E.end,R),!pe.extend&&tt>E&&(R=E,E=tt,tt=R),R=Gp(V,tt),x=Gp(V,E),R&&x&&(pe.rangeCount!==1||pe.anchorNode!==R.node||pe.anchorOffset!==R.offset||pe.focusNode!==x.node||pe.focusOffset!==x.offset)&&((ce=ce.createRange()).setStart(R.node,R.offset),pe.removeAllRanges(),tt>E?(pe.addRange(ce),pe.extend(x.node,x.offset)):(ce.setEnd(x.node,x.offset),pe.addRange(ce))))),ce=[],pe=V;pe=pe.parentNode;)pe.nodeType===1&&ce.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<ce.length;V++)(pe=ce[V]).element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}nt=!!xu,Cu=xu=null,r.current=l,je=h;do try{for(V=r;je!==null;){var Ne=je.flags;if(36&Ne&&G0(V,je.alternate,je),128&Ne){ce=void 0;var ut=je.ref;if(ut!==null){var vt=je.stateNode;je.tag,ce=vt,typeof ut=="function"?ut(ce):ut.current=ce}}je=je.nextEffect}}catch(Ge){if(je===null)throw Error(b(330));Io(je,Ge),je=je.nextEffect}while(je!==null);je=null,B0(),dt=y}else r.current=l;if(Ro)Ro=!1,hi=r,mi=a;else for(je=h;je!==null;)a=je.nextEffect,je.nextEffect=null,8&je.flags&&((Ne=je).sibling=null,Ne.stateNode=null),je=a;if((h=r.pendingLanes)===0&&(zr=null),h===1?r===hd?gi++:(gi=0,hd=r):gi=0,l=l.stateNode,aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(Ou,l,void 0,(64&l.current.flags)==64)}catch{}if(Gn(r,mn()),Ul)throw Ul=!1,r=dd,dd=null,r;return 8&dt||no(),null}function nx(){for(;je!==null;){var r=je.alternate;Vl||yi===null||(8&je.flags?Ds(je,yi)&&(Vl=!0):je.tag===13&&Y0(r,je)&&Ds(je,yi)&&(Vl=!0));var a=je.flags;256&a&&X0(r,je),!(512&a)||Ro||(Ro=!0,ei(97,function(){return ua(),null})),je=je.nextEffect}}function ua(){if(mi!==90){var r=97<mi?97:mi;return mi=90,Xa(r,ox)}return!1}function rx(r,a){fd.push(a,r),Ro||(Ro=!0,ei(97,function(){return ua(),null}))}function km(r,a){pd.push(a,r),Ro||(Ro=!0,ei(97,function(){return ua(),null}))}function ox(){if(hi===null)return!1;var r=hi;if(hi=null,(48&dt)!=0)throw Error(b(331));var a=dt;dt|=32;var l=pd;pd=[];for(var h=0;h<l.length;h+=2){var y=l[h],x=l[h+1],E=y.destroy;if(y.destroy=void 0,typeof E=="function")try{E()}catch(j){if(x===null)throw Error(b(330));Io(x,j)}}for(l=fd,fd=[],h=0;h<l.length;h+=2){y=l[h],x=l[h+1];try{var R=y.create;y.destroy=R()}catch(j){if(x===null)throw Error(b(330));Io(x,j)}}for(R=r.current.firstEffect;R!==null;)r=R.nextEffect,R.nextEffect=null,8&R.flags&&(R.sibling=null,R.stateNode=null),R=r;return dt=a,no(),!0}function Rm(r,a,l){_o(r,a=um(0,a=ed(l,a),1)),a=Fn(),(r=Wl(r,1))!==null&&(fe(r,1,a),Gn(r,a))}function Io(r,a){if(r.tag===3)Rm(r,r,a);else for(var l=r.return;l!==null;){if(l.tag===3){Rm(l,r,a);break}if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zr===null||!zr.has(h))){var y=dm(l,r=ed(a,r),1);if(_o(l,y),y=Fn(),(l=Wl(l,1))!==null)fe(l,1,y),Gn(l,y);else if(typeof h.componentDidCatch=="function"&&(zr===null||!zr.has(h)))try{h.componentDidCatch(a,r)}catch{}break}}l=l.return}}function ax(r,a,l){var h=r.pingCache;h!==null&&h.delete(a),a=Fn(),r.pingedLanes|=r.suspendedLanes&l,Cn===r&&(gn&l)===l&&(sn===4||sn===3&&(62914560&gn)===gn&&500>mn()-cd?os(r,0):id|=l),Gn(r,a)}function sx(r,a){var l=r.stateNode;l!==null&&l.delete(a),(a=0)==0&&(2&(a=r.mode)?4&a?(Oo===0&&(Oo=es),(a=oe(62914560&~Oo))===0&&(a=4194304)):a=Ka()===99?1:2:a=1),l=Fn(),(r=Wl(r,a))!==null&&(fe(r,a,l),Gn(r,l))}function ix(r,a,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(r,a,l,h){return new ix(r,a,l,h)}function yd(r){return!(!(r=r.prototype)||!r.isReactComponent)}function Po(r,a){var l=r.alternate;return l===null?((l=Yn(r.tag,a,r.key,r.mode)).elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null),l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Kl(r,a,l,h,y,x){var E=2;if(h=r,typeof r=="function")yd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case G:return ss(l.children,y,x,a);case de:E=8,y|=16;break;case ve:E=8,y|=1;break;case ie:return(r=Yn(12,l,a,8|y)).elementType=ie,r.type=ie,r.lanes=x,r;case Le:return(r=Yn(13,l,a,y)).type=Le,r.elementType=Le,r.lanes=x,r;case Je:return(r=Yn(19,l,a,y)).elementType=Je,r.lanes=x,r;case se:return bd(l,y,x,a);case Y:return(r=Yn(24,l,a,y)).elementType=Y,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case we:E=10;break e;case ze:E=9;break e;case Xe:E=11;break e;case pt:E=14;break e;case A:E=16,h=null;break e;case B:E=22;break e}throw Error(b(130,r==null?r:typeof r,""))}return(a=Yn(E,l,a,y)).elementType=r,a.type=h,a.lanes=x,a}function ss(r,a,l,h){return(r=Yn(7,r,h,a)).lanes=l,r}function bd(r,a,l,h){return(r=Yn(23,r,h,a)).elementType=se,r.lanes=l,r}function vd(r,a,l){return(r=Yn(6,r,null,a)).lanes=l,r}function wd(r,a,l){return(a=Yn(4,r.children!==null?r.children:[],r.key,a)).lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function lx(r,a,l){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=l,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=xe(0),this.expirationTimes=xe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.mutableSourceEagerHydrationData=null}function Xl(r,a,l,h){var y=a.current,x=Fn(),E=jo(y);e:if(l){t:{if(Kr(l=l._reactInternals)!==l||l.tag!==1)throw Error(b(170));var R=l;do{switch(R.tag){case 3:R=R.stateNode.context;break t;case 1:if(Bn(R.type)){R=R.stateNode.__reactInternalMemoizedMergedChildContext;break t}}R=R.return}while(R!==null);throw Error(b(171))}if(l.tag===1){var j=l.type;if(Bn(j)){l=gh(l,j,R);break e}}l=R}else l=Eo;return a.context===null?a.context=l:a.pendingContext=l,(a=To(x,E)).payload={element:r},(h=h===void 0?null:h)!==null&&(a.callback=h),_o(y,a),Ao(y,E,x),E}function xd(r){return(r=r.current).child?(r.child.tag,r.child.stateNode):null}function Om(r,a){if((r=r.memoizedState)!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Cd(r,a){Om(r,a),(r=r.alternate)&&Om(r,a)}function Ed(r,a,l){var h=l!=null&&l.hydrationOptions!=null&&l.hydrationOptions.mutableSources||null;if(l=new lx(r,a,l!=null&&l.hydrate===!0),a=Yn(3,null,null,a===2?7:a===1?3:0),l.current=a,a.stateNode=l,Mu(a),r[Va]=l.current,ah(r.nodeType===8?r.parentNode:r),h)for(r=0;r<h.length;r++){var y=(a=h[r])._getVersion;y=y(a._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[a,y]:l.mutableSourceEagerHydrationData.push(a,y)}this._internalRoot=l}function jm(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Am(r,a,l,h,y){var x=l._reactRootContainer;if(x){var E=x._internalRoot;if(typeof y=="function"){var R=y;y=function(){var q=xd(E);R.call(q)}}Xl(a,E,r,y)}else{if(x=l._reactRootContainer=function(q,ae){if(ae||(ae=!(!(ae=q?q.nodeType===9?q.documentElement:q.firstChild:null)||ae.nodeType!==1||!ae.hasAttribute("data-reactroot"))),!ae)for(var ke;ke=q.lastChild;)q.removeChild(ke);return new Ed(q,0,ae?{hydrate:!0}:void 0)}(l,h),E=x._internalRoot,typeof y=="function"){var j=y;y=function(){var q=xd(E);j.call(q)}}Cm(function(){Xl(a,E,r,y)})}return xd(E)}wm=function(r,a,l){var h=a.lanes;if(r!==null)if(r.memoizedProps!==a.pendingProps||On.current)pr=!0;else{if(!(l&h)){switch(pr=!1,a.tag){case 3:nm(a),Uu();break;case 5:Dh(a);break;case 1:Bn(a.type)&&Cl(a);break;case 4:zu(a,a.stateNode.containerInfo);break;case 10:h=a.memoizedProps.value;var y=a.type._context;Ht(Tl,y._currentValue),y._currentValue=h;break;case 13:if(a.memoizedState!==null)return l&a.child.childLanes?sm(r,a,l):(Ht(Wt,1&Wt.current),(a=oo(r,a,l))!==null?a.sibling:null);Ht(Wt,1&Wt.current);break;case 19:if(h=(l&a.childLanes)!=0,(64&r.flags)!=0){if(h)return cm(r,a,l);a.flags|=64}if((y=a.memoizedState)!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ht(Wt,Wt.current),h)break;return null;case 23:case 24:return a.lanes=0,Jh(r,a,l)}return oo(r,a,l)}pr=(16384&r.flags)!=0}else pr=!1;switch(a.lanes=0,a.tag){case 2:if(h=a.type,r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,y=Qa(a,hn.current),Ya(a,l),y=Vu(null,a,h,r,y,l),a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0){if(a.tag=1,a.memoizedState=null,a.updateQueue=null,Bn(h)){var x=!0;Cl(a)}else x=!1;a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Mu(a);var E=h.getDerivedStateFromProps;typeof E=="function"&&Rl(a,h,E,r),y.updater=Ol,a.stateNode=y,y._reactInternals=a,Bu(a,h,r,l),a=Yu(null,a,h,!0,x,l)}else a.tag=0,zn(null,a,y,l),a=a.child;return a;case 16:y=a.elementType;e:{switch(r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,y=(x=y._init)(y._payload),a.type=y,x=a.tag=function(ae){if(typeof ae=="function")return yd(ae)?1:0;if(ae!=null){if((ae=ae.$$typeof)===Xe)return 11;if(ae===pt)return 14}return 2}(y),r=fr(y,r),x){case 0:a=Gu(null,a,y,r,l);break e;case 1:a=tm(null,a,y,r,l);break e;case 11:a=Gh(null,a,y,r,l);break e;case 14:a=Yh(null,a,y,fr(y.type,r),h,l);break e}throw Error(b(306,y,""))}return a;case 0:return h=a.type,y=a.pendingProps,Gu(r,a,h,y=a.elementType===h?y:fr(h,y),l);case 1:return h=a.type,y=a.pendingProps,tm(r,a,h,y=a.elementType===h?y:fr(h,y),l);case 3:if(nm(a),h=a.updateQueue,r===null||h===null)throw Error(b(282));if(h=a.pendingProps,y=(y=a.memoizedState)!==null?y.element:null,kh(r,a),ti(a,h,null,l),(h=a.memoizedState.element)===y)Uu(),a=oo(r,a,l);else{if((x=(y=a.stateNode).hydrate)&&(ko=Ha(a.stateNode.containerInfo.firstChild),ro=a,x=Mr=!0),x){if((r=y.mutableSourceEagerHydrationData)!=null)for(y=0;y<r.length;y+=2)(x=r[y])._workInProgressVersionPrimary=r[y+1],Ja.push(x);for(l=Lh(a,null,h,l),a.child=l;l;)l.flags=-3&l.flags|1024,l=l.sibling}else zn(r,a,h,l),Uu();a=a.child}return a;case 5:return Dh(a),r===null&&$u(a),h=a.type,y=a.pendingProps,x=r!==null?r.memoizedProps:null,E=y.children,Eu(h,y)?E=null:x!==null&&Eu(h,x)&&(a.flags|=16),em(r,a),zn(r,a,E,l),a.child;case 6:return r===null&&$u(a),null;case 13:return sm(r,a,l);case 4:return zu(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=Il(a,null,h,l):zn(r,a,h,l),a.child;case 11:return h=a.type,y=a.pendingProps,Gh(r,a,h,y=a.elementType===h?y:fr(h,y),l);case 7:return zn(r,a,a.pendingProps,l),a.child;case 8:case 12:return zn(r,a,a.pendingProps.children,l),a.child;case 10:e:{h=a.type._context,y=a.pendingProps,E=a.memoizedProps,x=y.value;var R=a.type._context;if(Ht(Tl,R._currentValue),R._currentValue=x,E!==null)if(R=E.value,(x=Qn(R,x)?0:0|(typeof h._calculateChangedBits=="function"?h._calculateChangedBits(R,x):1073741823))==0){if(E.children===y.children&&!On.current){a=oo(r,a,l);break e}}else for((R=a.child)!==null&&(R.return=a);R!==null;){var j=R.dependencies;if(j!==null){E=R.child;for(var q=j.firstContext;q!==null;){if(q.context===h&&q.observedBits&x){R.tag===1&&((q=To(-1,l&-l)).tag=2,_o(R,q)),R.lanes|=l,(q=R.alternate)!==null&&(q.lanes|=l),_h(R.return,l),j.lanes|=l;break}q=q.next}}else E=R.tag===10&&R.type===a.type?null:R.child;if(E!==null)E.return=R;else for(E=R;E!==null;){if(E===a){E=null;break}if((R=E.sibling)!==null){R.return=E.return,E=R;break}E=E.return}R=E}zn(r,a,y.children,l),a=a.child}return a;case 9:return y=a.type,h=(x=a.pendingProps).children,Ya(a,l),h=h(y=Kn(y,x.unstable_observedBits)),a.flags|=1,zn(r,a,h,l),a.child;case 14:return x=fr(y=a.type,a.pendingProps),Yh(r,a,y,x=fr(y.type,x),h,l);case 15:return Zh(r,a,a.type,a.pendingProps,h,l);case 17:return h=a.type,y=a.pendingProps,y=a.elementType===h?y:fr(h,y),r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),a.tag=1,Bn(h)?(r=!0,Cl(a)):r=!1,Ya(a,l),Ih(a,h,y),Bu(a,h,y,l),Yu(null,a,h,!0,r,l);case 19:return cm(r,a,l);case 23:case 24:return Jh(r,a,l)}throw Error(b(156,a.tag))},Ed.prototype.render=function(r){Xl(r,this._internalRoot,null,null)},Ed.prototype.unmount=function(){var r=this._internalRoot,a=r.containerInfo;Xl(null,r,null,function(){a[Va]=null})},ft=function(r){r.tag===13&&(Ao(r,4,Fn()),Cd(r,4))},Ia=function(r){r.tag===13&&(Ao(r,67108864,Fn()),Cd(r,67108864))},sl=function(r){if(r.tag===13){var a=Fn(),l=jo(r);Ao(r,l,a),Cd(r,l)}},il=function(r,a){return a()},He=function(r,a,l){switch(a){case"input":if(un(r,l),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==r&&h.form===r.form){var y=_u(h);if(!y)throw Error(b(90));Tn(h),un(h,y)}}}break;case"textarea":ja(r,l);break;case"select":(a=l.value)!=null&&_r(r,!!l.multiple,a,!1)}},Dt=function(r,a){var l=dt;dt|=1;try{return r(a)}finally{(dt=l)===0&&(ns(),no())}},kt=function(r,a,l,h,y){var x=dt;dt|=4;try{return Xa(98,r.bind(null,a,l,h,y))}finally{(dt=x)===0&&(ns(),no())}},tn=function(){!(49&dt)&&(function(){if(ao!==null){var r=ao;ao=null,r.forEach(function(a){a.expiredLanes|=24&a.pendingLanes,Gn(a,mn())})}no()}(),ua())},wt=function(r,a){var l=dt;dt|=2;try{return r(a)}finally{(dt=l)===0&&(ns(),no())}};var vi={findFiberByHostInstance:ra,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cx={bundleType:vi.bundleType,version:vi.version,rendererPackageName:vi.rendererPackageName,rendererConfig:vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:he.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return(r=function(a){if(a=function(h){var y=h.alternate;if(!y){if((y=Kr(h))===null)throw Error(b(188));return y!==h?null:h}for(var x=h,E=y;;){var R=x.return;if(R===null)break;var j=R.alternate;if(j===null){if((E=R.return)!==null){x=E;continue}break}if(R.child===j.child){for(j=R.child;j;){if(j===x)return Aa(R),h;if(j===E)return Aa(R),y;j=j.sibling}throw Error(b(188))}if(x.return!==E.return)x=R,E=j;else{for(var q=!1,ae=R.child;ae;){if(ae===x){q=!0,x=R,E=j;break}if(ae===E){q=!0,E=R,x=j;break}ae=ae.sibling}if(!q){for(ae=j.child;ae;){if(ae===x){q=!0,x=j,E=R;break}if(ae===E){q=!0,E=j,x=R;break}ae=ae.sibling}if(!q)throw Error(b(189))}}if(x.alternate!==E)throw Error(b(190))}if(x.tag!==3)throw Error(b(188));return x.stateNode.current===x?h:y}(a),!a)return null;for(var l=a;;){if(l.tag===5||l.tag===6)return l;if(l.child)l.child.return=l,l=l.child;else{if(l===a)break;for(;!l.sibling;){if(!l.return||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}}return null}(r))===null?null:r.stateNode},findFiberByHostInstance:vi.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Ou=Gl.inject(cx),aa=Gl}catch{}}u.render=function(r,a,l){if(!jm(a))throw Error(b(200));return Am(null,r,a,!1,l)},u.unmountComponentAtNode=function(r){if(!jm(r))throw Error(b(40));return!!r._reactRootContainer&&(Cm(function(){Am(null,null,r,!1,function(){r._reactRootContainer=null,r[Va]=null})}),!0)}},935:(c,u,f)=>{(function m(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE=="function")try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(p){console.error(p)}})(),c.exports=f(448)},590:c=>{var u=typeof Element<"u",f=typeof Map=="function",m=typeof Set=="function",p=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function g(b,v){if(b===v)return!0;if(b&&v&&typeof b=="object"&&typeof v=="object"){if(b.constructor!==v.constructor)return!1;var w,S,_,O;if(Array.isArray(b)){if((w=b.length)!=v.length)return!1;for(S=w;S--!=0;)if(!g(b[S],v[S]))return!1;return!0}if(f&&b instanceof Map&&v instanceof Map){if(b.size!==v.size)return!1;for(O=b.entries();!(S=O.next()).done;)if(!v.has(S.value[0]))return!1;for(O=b.entries();!(S=O.next()).done;)if(!g(S.value[1],v.get(S.value[0])))return!1;return!0}if(m&&b instanceof Set&&v instanceof Set){if(b.size!==v.size)return!1;for(O=b.entries();!(S=O.next()).done;)if(!v.has(S.value[0]))return!1;return!0}if(p&&ArrayBuffer.isView(b)&&ArrayBuffer.isView(v)){if((w=b.length)!=v.length)return!1;for(S=w;S--!=0;)if(b[S]!==v[S])return!1;return!0}if(b.constructor===RegExp)return b.source===v.source&&b.flags===v.flags;if(b.valueOf!==Object.prototype.valueOf)return b.valueOf()===v.valueOf();if(b.toString!==Object.prototype.toString)return b.toString()===v.toString();if((w=(_=Object.keys(b)).length)!==Object.keys(v).length)return!1;for(S=w;S--!=0;)if(!Object.prototype.hasOwnProperty.call(v,_[S]))return!1;if(u&&b instanceof Element)return!1;for(S=w;S--!=0;)if((_[S]!=="_owner"&&_[S]!=="__v"&&_[S]!=="__o"||!b.$$typeof)&&!g(b[_[S]],v[_[S]]))return!1;return!0}return b!=b&&v!=v}c.exports=function(b,v){try{return g(b,v)}catch(w){if((w.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw w}}},408:(c,u,f)=>{var m=f(418),p=60103,g=60106;u.Fragment=60107,u.StrictMode=60108,u.Profiler=60114;var b=60109,v=60110,w=60112;u.Suspense=60113;var S=60115,_=60116;if(typeof Symbol=="function"&&Symbol.for){var O=Symbol.for;p=O("react.element"),g=O("react.portal"),u.Fragment=O("react.fragment"),u.StrictMode=O("react.strict_mode"),u.Profiler=O("react.profiler"),b=O("react.provider"),v=O("react.context"),w=O("react.forward_ref"),u.Suspense=O("react.suspense"),S=O("react.memo"),_=O("react.lazy")}var D=typeof Symbol=="function"&&Symbol.iterator;function M(A){for(var B="https://reactjs.org/docs/error-decoder.html?invariant="+A,Z=1;Z<arguments.length;Z++)B+="&args[]="+encodeURIComponent(arguments[Z]);return"Minified React error #"+A+"; visit "+B+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X={};function N(A,B,Z){this.props=A,this.context=B,this.refs=X,this.updater=Z||W}function I(){}function P(A,B,Z){this.props=A,this.context=B,this.refs=X,this.updater=Z||W}N.prototype.isReactComponent={},N.prototype.setState=function(A,B){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error(M(85));this.updater.enqueueSetState(this,A,B,"setState")},N.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")},I.prototype=N.prototype;var $=P.prototype=new I;$.constructor=P,m($,N.prototype),$.isPureReactComponent=!0;var ue={current:null},he=Object.prototype.hasOwnProperty,ge={key:!0,ref:!0,__self:!0,__source:!0};function ye(A,B,Z){var de,se={},Y=null,ne=null;if(B!=null)for(de in B.ref!==void 0&&(ne=B.ref),B.key!==void 0&&(Y=""+B.key),B)he.call(B,de)&&!ge.hasOwnProperty(de)&&(se[de]=B[de]);var Ce=arguments.length-2;if(Ce===1)se.children=Z;else if(1<Ce){for(var Oe=Array(Ce),Ee=0;Ee<Ce;Ee++)Oe[Ee]=arguments[Ee+2];se.children=Oe}if(A&&A.defaultProps)for(de in Ce=A.defaultProps)se[de]===void 0&&(se[de]=Ce[de]);return{$$typeof:p,type:A,key:Y,ref:ne,props:se,_owner:ue.current}}function G(A){return typeof A=="object"&&A!==null&&A.$$typeof===p}var ve=/\/+/g;function ie(A,B){return typeof A=="object"&&A!==null&&A.key!=null?function(Z){var de={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(se){return de[se]})}(""+A.key):B.toString(36)}function we(A,B,Z,de,se){var Y=typeof A;Y!=="undefined"&&Y!=="boolean"||(A=null);var ne=!1;if(A===null)ne=!0;else switch(Y){case"string":case"number":ne=!0;break;case"object":switch(A.$$typeof){case p:case g:ne=!0}}if(ne)return se=se(ne=A),A=de===""?"."+ie(ne,0):de,Array.isArray(se)?(Z="",A!=null&&(Z=A.replace(ve,"$&/")+"/"),we(se,B,Z,"",function(Ee){return Ee})):se!=null&&(G(se)&&(se=function(Ee,at){return{$$typeof:p,type:Ee.type,key:at,ref:Ee.ref,props:Ee.props,_owner:Ee._owner}}(se,Z+(!se.key||ne&&ne.key===se.key?"":(""+se.key).replace(ve,"$&/")+"/")+A)),B.push(se)),1;if(ne=0,de=de===""?".":de+":",Array.isArray(A))for(var Ce=0;Ce<A.length;Ce++){var Oe=de+ie(Y=A[Ce],Ce);ne+=we(Y,B,Z,Oe,se)}else if(Oe=function(Ee){return Ee===null||typeof Ee!="object"?null:typeof(Ee=D&&Ee[D]||Ee["@@iterator"])=="function"?Ee:null}(A),typeof Oe=="function")for(A=Oe.call(A),Ce=0;!(Y=A.next()).done;)ne+=we(Y=Y.value,B,Z,Oe=de+ie(Y,Ce++),se);else if(Y==="object")throw B=""+A,Error(M(31,B==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":B));return ne}function ze(A,B,Z){if(A==null)return A;var de=[],se=0;return we(A,de,"","",function(Y){return B.call(Z,Y,se++)}),de}function Xe(A){if(A._status===-1){var B=A._result;B=B(),A._status=0,A._result=B,B.then(function(Z){A._status===0&&(Z=Z.default,A._status=1,A._result=Z)},function(Z){A._status===0&&(A._status=2,A._result=Z)})}if(A._status===1)return A._result;throw A._result}var Le={current:null};function Je(){var A=Le.current;if(A===null)throw Error(M(321));return A}var pt={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:ue,IsSomeRendererActing:{current:!1},assign:m};u.Children={map:ze,forEach:function(A,B,Z){ze(A,function(){B.apply(this,arguments)},Z)},count:function(A){var B=0;return ze(A,function(){B++}),B},toArray:function(A){return ze(A,function(B){return B})||[]},only:function(A){if(!G(A))throw Error(M(143));return A}},u.Component=N,u.PureComponent=P,u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pt,u.cloneElement=function(A,B,Z){if(A==null)throw Error(M(267,A));var de=m({},A.props),se=A.key,Y=A.ref,ne=A._owner;if(B!=null){if(B.ref!==void 0&&(Y=B.ref,ne=ue.current),B.key!==void 0&&(se=""+B.key),A.type&&A.type.defaultProps)var Ce=A.type.defaultProps;for(Oe in B)he.call(B,Oe)&&!ge.hasOwnProperty(Oe)&&(de[Oe]=B[Oe]===void 0&&Ce!==void 0?Ce[Oe]:B[Oe])}var Oe=arguments.length-2;if(Oe===1)de.children=Z;else if(1<Oe){Ce=Array(Oe);for(var Ee=0;Ee<Oe;Ee++)Ce[Ee]=arguments[Ee+2];de.children=Ce}return{$$typeof:p,type:A.type,key:se,ref:Y,props:de,_owner:ne}},u.createContext=function(A,B){return B===void 0&&(B=null),(A={$$typeof:v,_calculateChangedBits:B,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:b,_context:A},A.Consumer=A},u.createElement=ye,u.createFactory=function(A){var B=ye.bind(null,A);return B.type=A,B},u.createRef=function(){return{current:null}},u.forwardRef=function(A){return{$$typeof:w,render:A}},u.isValidElement=G,u.lazy=function(A){return{$$typeof:_,_payload:{_status:-1,_result:A},_init:Xe}},u.memo=function(A,B){return{$$typeof:S,type:A,compare:B===void 0?null:B}},u.useCallback=function(A,B){return Je().useCallback(A,B)},u.useContext=function(A,B){return Je().useContext(A,B)},u.useDebugValue=function(){},u.useEffect=function(A,B){return Je().useEffect(A,B)},u.useImperativeHandle=function(A,B,Z){return Je().useImperativeHandle(A,B,Z)},u.useLayoutEffect=function(A,B){return Je().useLayoutEffect(A,B)},u.useMemo=function(A,B){return Je().useMemo(A,B)},u.useReducer=function(A,B,Z){return Je().useReducer(A,B,Z)},u.useRef=function(A){return Je().useRef(A)},u.useState=function(A){return Je().useState(A)},u.version="17.0.2"},294:(c,u,f)=>{c.exports=f(408)},666:c=>{var u=function(f){var m,p=Object.prototype,g=p.hasOwnProperty,b=typeof Symbol=="function"?Symbol:{},v=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag";function _(A,B,Z){return Object.defineProperty(A,B,{value:Z,enumerable:!0,configurable:!0,writable:!0}),A[B]}try{_({},"")}catch{_=function(B,Z,de){return B[Z]=de}}function O(A,B,Z,de){var se=B&&B.prototype instanceof P?B:P,Y=Object.create(se.prototype),ne=new Le(de||[]);return Y._invoke=function(Ce,Oe,Ee){var at=M;return function(_t,Gt){if(at===X)throw new Error("Generator is already running");if(at===N){if(_t==="throw")throw Gt;return pt()}for(Ee.method=_t,Ee.arg=Gt;;){var jt=Ee.delegate;if(jt){var xt=we(jt,Ee);if(xt){if(xt===I)continue;return xt}}if(Ee.method==="next")Ee.sent=Ee._sent=Ee.arg;else if(Ee.method==="throw"){if(at===M)throw at=N,Ee.arg;Ee.dispatchException(Ee.arg)}else Ee.method==="return"&&Ee.abrupt("return",Ee.arg);at=X;var ct=D(Ce,Oe,Ee);if(ct.type==="normal"){if(at=Ee.done?N:W,ct.arg===I)continue;return{value:ct.arg,done:Ee.done}}ct.type==="throw"&&(at=N,Ee.method="throw",Ee.arg=ct.arg)}}}(A,Z,ne),Y}function D(A,B,Z){try{return{type:"normal",arg:A.call(B,Z)}}catch(de){return{type:"throw",arg:de}}}f.wrap=O;var M="suspendedStart",W="suspendedYield",X="executing",N="completed",I={};function P(){}function $(){}function ue(){}var he={};_(he,v,function(){return this});var ge=Object.getPrototypeOf,ye=ge&&ge(ge(Je([])));ye&&ye!==p&&g.call(ye,v)&&(he=ye);var G=ue.prototype=P.prototype=Object.create(he);function ve(A){["next","throw","return"].forEach(function(B){_(A,B,function(Z){return this._invoke(B,Z)})})}function ie(A,B){function Z(se,Y,ne,Ce){var Oe=D(A[se],A,Y);if(Oe.type!=="throw"){var Ee=Oe.arg,at=Ee.value;return at&&typeof at=="object"&&g.call(at,"__await")?B.resolve(at.__await).then(function(_t){Z("next",_t,ne,Ce)},function(_t){Z("throw",_t,ne,Ce)}):B.resolve(at).then(function(_t){Ee.value=_t,ne(Ee)},function(_t){return Z("throw",_t,ne,Ce)})}Ce(Oe.arg)}var de;this._invoke=function(se,Y){function ne(){return new B(function(Ce,Oe){Z(se,Y,Ce,Oe)})}return de=de?de.then(ne,ne):ne()}}function we(A,B){var Z=A.iterator[B.method];if(Z===m){if(B.delegate=null,B.method==="throw"){if(A.iterator.return&&(B.method="return",B.arg=m,we(A,B),B.method==="throw"))return I;B.method="throw",B.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var de=D(Z,A.iterator,B.arg);if(de.type==="throw")return B.method="throw",B.arg=de.arg,B.delegate=null,I;var se=de.arg;return se?se.done?(B[A.resultName]=se.value,B.next=A.nextLoc,B.method!=="return"&&(B.method="next",B.arg=m),B.delegate=null,I):se:(B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,I)}function ze(A){var B={tryLoc:A[0]};1 in A&&(B.catchLoc=A[1]),2 in A&&(B.finallyLoc=A[2],B.afterLoc=A[3]),this.tryEntries.push(B)}function Xe(A){var B=A.completion||{};B.type="normal",delete B.arg,A.completion=B}function Le(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(ze,this),this.reset(!0)}function Je(A){if(A){var B=A[v];if(B)return B.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var Z=-1,de=function se(){for(;++Z<A.length;)if(g.call(A,Z))return se.value=A[Z],se.done=!1,se;return se.value=m,se.done=!0,se};return de.next=de}}return{next:pt}}function pt(){return{value:m,done:!0}}return $.prototype=ue,_(G,"constructor",ue),_(ue,"constructor",$),$.displayName=_(ue,S,"GeneratorFunction"),f.isGeneratorFunction=function(A){var B=typeof A=="function"&&A.constructor;return!!B&&(B===$||(B.displayName||B.name)==="GeneratorFunction")},f.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,ue):(A.__proto__=ue,_(A,S,"GeneratorFunction")),A.prototype=Object.create(G),A},f.awrap=function(A){return{__await:A}},ve(ie.prototype),_(ie.prototype,w,function(){return this}),f.AsyncIterator=ie,f.async=function(A,B,Z,de,se){se===void 0&&(se=Promise);var Y=new ie(O(A,B,Z,de),se);return f.isGeneratorFunction(B)?Y:Y.next().then(function(ne){return ne.done?ne.value:Y.next()})},ve(G),_(G,S,"Generator"),_(G,v,function(){return this}),_(G,"toString",function(){return"[object Generator]"}),f.keys=function(A){var B=[];for(var Z in A)B.push(Z);return B.reverse(),function de(){for(;B.length;){var se=B.pop();if(se in A)return de.value=se,de.done=!1,de}return de.done=!0,de}},f.values=Je,Le.prototype={constructor:Le,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(Xe),!A)for(var B in this)B.charAt(0)==="t"&&g.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=m)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var B=this;function Z(Oe,Ee){return Y.type="throw",Y.arg=A,B.next=Oe,Ee&&(B.method="next",B.arg=m),!!Ee}for(var de=this.tryEntries.length-1;de>=0;--de){var se=this.tryEntries[de],Y=se.completion;if(se.tryLoc==="root")return Z("end");if(se.tryLoc<=this.prev){var ne=g.call(se,"catchLoc"),Ce=g.call(se,"finallyLoc");if(ne&&Ce){if(this.prev<se.catchLoc)return Z(se.catchLoc,!0);if(this.prev<se.finallyLoc)return Z(se.finallyLoc)}else if(ne){if(this.prev<se.catchLoc)return Z(se.catchLoc,!0)}else{if(!Ce)throw new Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return Z(se.finallyLoc)}}}},abrupt:function(A,B){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var de=this.tryEntries[Z];if(de.tryLoc<=this.prev&&g.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var se=de;break}}se&&(A==="break"||A==="continue")&&se.tryLoc<=B&&B<=se.finallyLoc&&(se=null);var Y=se?se.completion:{};return Y.type=A,Y.arg=B,se?(this.method="next",this.next=se.finallyLoc,I):this.complete(Y)},complete:function(A,B){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&B&&(this.next=B),I},finish:function(A){for(var B=this.tryEntries.length-1;B>=0;--B){var Z=this.tryEntries[B];if(Z.finallyLoc===A)return this.complete(Z.completion,Z.afterLoc),Xe(Z),I}},catch:function(A){for(var B=this.tryEntries.length-1;B>=0;--B){var Z=this.tryEntries[B];if(Z.tryLoc===A){var de=Z.completion;if(de.type==="throw"){var se=de.arg;Xe(Z)}return se}}throw new Error("illegal catch attempt")},delegateYield:function(A,B,Z){return this.delegate={iterator:Je(A),resultName:B,nextLoc:Z},this.method==="next"&&(this.arg=m),I}},f}(c.exports);try{regeneratorRuntime=u}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=u:Function("r","regeneratorRuntime = r")(u)}},53:(c,u)=>{var f,m,p,g;if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;u.unstable_now=function(){return b.now()}}else{var v=Date,w=v.now();u.unstable_now=function(){return v.now()-w}}if(typeof window>"u"||typeof MessageChannel!="function"){var S=null,_=null,O=function(){if(S!==null)try{var Y=u.unstable_now();S(!0,Y),S=null}catch(ne){throw setTimeout(O,0),ne}};f=function(Y){S!==null?setTimeout(f,0,Y):(S=Y,setTimeout(O,0))},m=function(Y,ne){_=setTimeout(Y,ne)},p=function(){clearTimeout(_)},u.unstable_shouldYield=function(){return!1},g=u.unstable_forceFrameRate=function(){}}else{var D=window.setTimeout,M=window.clearTimeout;if(typeof console<"u"){var W=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof W!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var X=!1,N=null,I=-1,P=5,$=0;u.unstable_shouldYield=function(){return u.unstable_now()>=$},g=function(){},u.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Y?Math.floor(1e3/Y):5};var ue=new MessageChannel,he=ue.port2;ue.port1.onmessage=function(){if(N!==null){var Y=u.unstable_now();$=Y+P;try{N(!0,Y)?he.postMessage(null):(X=!1,N=null)}catch(ne){throw he.postMessage(null),ne}}else X=!1},f=function(Y){N=Y,X||(X=!0,he.postMessage(null))},m=function(Y,ne){I=D(function(){Y(u.unstable_now())},ne)},p=function(){M(I),I=-1}}function ge(Y,ne){var Ce=Y.length;Y.push(ne);e:for(;;){var Oe=Ce-1>>>1,Ee=Y[Oe];if(!(Ee!==void 0&&0<ve(Ee,ne)))break e;Y[Oe]=ne,Y[Ce]=Ee,Ce=Oe}}function ye(Y){return(Y=Y[0])===void 0?null:Y}function G(Y){var ne=Y[0];if(ne!==void 0){var Ce=Y.pop();if(Ce!==ne){Y[0]=Ce;e:for(var Oe=0,Ee=Y.length;Oe<Ee;){var at=2*(Oe+1)-1,_t=Y[at],Gt=at+1,jt=Y[Gt];if(_t!==void 0&&0>ve(_t,Ce))jt!==void 0&&0>ve(jt,_t)?(Y[Oe]=jt,Y[Gt]=Ce,Oe=Gt):(Y[Oe]=_t,Y[at]=Ce,Oe=at);else{if(!(jt!==void 0&&0>ve(jt,Ce)))break e;Y[Oe]=jt,Y[Gt]=Ce,Oe=Gt}}}return ne}return null}function ve(Y,ne){var Ce=Y.sortIndex-ne.sortIndex;return Ce!==0?Ce:Y.id-ne.id}var ie=[],we=[],ze=1,Xe=null,Le=3,Je=!1,pt=!1,A=!1;function B(Y){for(var ne=ye(we);ne!==null;){if(ne.callback===null)G(we);else{if(!(ne.startTime<=Y))break;G(we),ne.sortIndex=ne.expirationTime,ge(ie,ne)}ne=ye(we)}}function Z(Y){if(A=!1,B(Y),!pt)if(ye(ie)!==null)pt=!0,f(de);else{var ne=ye(we);ne!==null&&m(Z,ne.startTime-Y)}}function de(Y,ne){pt=!1,A&&(A=!1,p()),Je=!0;var Ce=Le;try{for(B(ne),Xe=ye(ie);Xe!==null&&(!(Xe.expirationTime>ne)||Y&&!u.unstable_shouldYield());){var Oe=Xe.callback;if(typeof Oe=="function"){Xe.callback=null,Le=Xe.priorityLevel;var Ee=Oe(Xe.expirationTime<=ne);ne=u.unstable_now(),typeof Ee=="function"?Xe.callback=Ee:Xe===ye(ie)&&G(ie),B(ne)}else G(ie);Xe=ye(ie)}if(Xe!==null)var at=!0;else{var _t=ye(we);_t!==null&&m(Z,_t.startTime-ne),at=!1}return at}finally{Xe=null,Le=Ce,Je=!1}}var se=g;u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(Y){Y.callback=null},u.unstable_continueExecution=function(){pt||Je||(pt=!0,f(de))},u.unstable_getCurrentPriorityLevel=function(){return Le},u.unstable_getFirstCallbackNode=function(){return ye(ie)},u.unstable_next=function(Y){switch(Le){case 1:case 2:case 3:var ne=3;break;default:ne=Le}var Ce=Le;Le=ne;try{return Y()}finally{Le=Ce}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=se,u.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Ce=Le;Le=Y;try{return ne()}finally{Le=Ce}},u.unstable_scheduleCallback=function(Y,ne,Ce){var Oe=u.unstable_now();switch(Ce=typeof Ce=="object"&&Ce!==null&&typeof(Ce=Ce.delay)=="number"&&0<Ce?Oe+Ce:Oe,Y){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Y={id:ze++,callback:ne,priorityLevel:Y,startTime:Ce,expirationTime:Ee=Ce+Ee,sortIndex:-1},Ce>Oe?(Y.sortIndex=Ce,ge(we,Y),ye(ie)===null&&Y===ye(we)&&(A?p():A=!0,m(Z,Ce-Oe))):(Y.sortIndex=Ee,ge(ie,Y),pt||Je||(pt=!0,f(de))),Y},u.unstable_wrapCallback=function(Y){var ne=Le;return function(){var Ce=Le;Le=ne;try{return Y.apply(this,arguments)}finally{Le=Ce}}}},840:(c,u,f)=>{c.exports=f(53)},285:(c,u,f)=>{var m;c.exports=(m=f(294),function(p){var g={};function b(v){if(g[v])return g[v].exports;var w=g[v]={i:v,l:!1,exports:{}};return p[v].call(w.exports,w,w.exports,b),w.l=!0,w.exports}return b.m=p,b.c=g,b.d=function(v,w,S){b.o(v,w)||Object.defineProperty(v,w,{enumerable:!0,get:S})},b.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},b.t=function(v,w){if(1&w&&(v=b(v)),8&w||4&w&&typeof v=="object"&&v&&v.__esModule)return v;var S=Object.create(null);if(b.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:v}),2&w&&typeof v!="string")for(var _ in v)b.d(S,_,function(O){return v[O]}.bind(null,_));return S},b.n=function(v){var w=v&&v.__esModule?function(){return v.default}:function(){return v};return b.d(w,"a",w),w},b.o=function(v,w){return Object.prototype.hasOwnProperty.call(v,w)},b.p="",b(b.s=9)}([function(p,g){p.exports=m},function(p,g,b){var v;(function(){var w={}.hasOwnProperty;function S(){for(var _=[],O=0;O<arguments.length;O++){var D=arguments[O];if(D){var M=typeof D;if(M==="string"||M==="number")_.push(D);else if(Array.isArray(D)){if(D.length){var W=S.apply(null,D);W&&_.push(W)}}else if(M==="object")if(D.toString===Object.prototype.toString)for(var X in D)w.call(D,X)&&D[X]&&_.push(X);else _.push(D.toString())}}return _.join(" ")}p.exports?(S.default=S,p.exports=S):(v=function(){return S}.apply(g,[]))===void 0||(p.exports=v)})()},function(p,g,b){p.exports={count:"Count__count___VwSFw",label:"Count__label___UClje",smallLabel:"Count__smallLabel___E3KvK",iconCountWrapper:"Count__iconCountWrapper___CTSi2",sectionTallyIconCountWrapper:"Count__sectionTallyIconCountWrapper___lTlUR",expandedIconCount:"Count__expandedIconCount___c3tc2",number:"Count__number___4oBqJ",smallNumber:"Count__smallNumber___wi6E7",horizontal:"Count__horizontal___wp4Sz",small:"Count__small___kecST"}},function(p,g,b){p.exports={sectionTallyWidget:"SectionTally__sectionTallyWidget___aaCj5",sectionTallyWrapper:"SectionTally__sectionTallyWrapper___nwj2j",tally:"SectionTally__tally___es9p7",badgeTally:"SectionTally__badgeTally___ZYqar",horizontal:"SectionTally__horizontal___-hgL+",show:"SectionTally__show___wciqp",logo:"SectionTally__logo___pEojg",logoSmall:"SectionTally__logoSmall___yzxV+",small:"SectionTally__small___QBk26",forceCollapse:"SectionTally__forceCollapse___MexwG",chartSubheading:"SectionTally__chartSubheading___tm7gz",chartLabel:"SectionTally__chartLabel___Nm4F+"}},function(p,g,b){p.exports={tally:"Tally__tally___wF-n7",badgeTally:"Tally__badgeTally___AkCwi",horizontal:"Tally__horizontal___TYyqc",show:"Tally__show___EesAt",logo:"Tally__logo___k79zv",logoSmall:"Tally__logoSmall___JZuyy",small:"Tally__small___lrym1",forceCollapse:"Tally__forceCollapse___4k5aa"}},function(p,g,b){p.exports={tally:"HideableTally__tally___TXiqB",hideContainer:"HideableTally__hideContainer___w5Wlj",logoSingleLetter:"HideableTally__logoSingleLetter___OwmJA",logoContainer:"HideableTally__logoContainer___kXnxF",openingArrow:"HideableTally__openingArrow___yBpbp",closingArrow:"HideableTally__closingArrow___pKIyO"}},function(p,g,b){const v=b(10),w=b(11),S=b(12),_=b(13);function O(P){if(typeof P!="string"||P.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function D(P,$){return $.encode?$.strict?v(P):encodeURIComponent(P):P}function M(P,$){return $.decode?w(P):P}function W(P){const $=P.indexOf("#");return $!==-1&&(P=P.slice(0,$)),P}function X(P){const $=(P=W(P)).indexOf("?");return $===-1?"":P.slice($+1)}function N(P,$){return $.parseNumbers&&!Number.isNaN(Number(P))&&typeof P=="string"&&P.trim()!==""?P=Number(P):!$.parseBooleans||P===null||P.toLowerCase()!=="true"&&P.toLowerCase()!=="false"||(P=P.toLowerCase()==="true"),P}function I(P,$){O(($=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},$)).arrayFormatSeparator);const ue=function(ge){let ye;switch(ge.arrayFormat){case"index":return(G,ve,ie)=>{ye=/\[(\d*)\]$/.exec(G),G=G.replace(/\[\d*\]$/,""),ye?(ie[G]===void 0&&(ie[G]={}),ie[G][ye[1]]=ve):ie[G]=ve};case"bracket":return(G,ve,ie)=>{ye=/(\[\])$/.exec(G),G=G.replace(/\[\]$/,""),ye?ie[G]!==void 0?ie[G]=[].concat(ie[G],ve):ie[G]=[ve]:ie[G]=ve};case"comma":case"separator":return(G,ve,ie)=>{const we=typeof ve=="string"&&ve.includes(ge.arrayFormatSeparator),ze=typeof ve=="string"&&!we&&M(ve,ge).includes(ge.arrayFormatSeparator);ve=ze?M(ve,ge):ve;const Xe=we||ze?ve.split(ge.arrayFormatSeparator).map(Le=>M(Le,ge)):ve===null?ve:M(ve,ge);ie[G]=Xe};default:return(G,ve,ie)=>{ie[G]!==void 0?ie[G]=[].concat(ie[G],ve):ie[G]=ve}}}($),he=Object.create(null);if(typeof P!="string"||!(P=P.trim().replace(/^[?#&]/,"")))return he;for(const ge of P.split("&")){if(ge==="")continue;let[ye,G]=S($.decode?ge.replace(/\+/g," "):ge,"=");G=G===void 0?null:["comma","separator"].includes($.arrayFormat)?G:M(G,$),ue(M(ye,$),G,he)}for(const ge of Object.keys(he)){const ye=he[ge];if(typeof ye=="object"&&ye!==null)for(const G of Object.keys(ye))ye[G]=N(ye[G],$);else he[ge]=N(ye,$)}return $.sort===!1?he:($.sort===!0?Object.keys(he).sort():Object.keys(he).sort($.sort)).reduce((ge,ye)=>{const G=he[ye];return G&&typeof G=="object"&&!Array.isArray(G)?ge[ye]=function ve(ie){return Array.isArray(ie)?ie.sort():typeof ie=="object"?ve(Object.keys(ie)).sort((we,ze)=>Number(we)-Number(ze)).map(we=>ie[we]):ie}(G):ge[ye]=G,ge},Object.create(null))}g.extract=X,g.parse=I,g.stringify=(P,$)=>{if(!P)return"";O(($=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},$)).arrayFormatSeparator);const ue=G=>$.skipNull&&P[G]==null||$.skipEmptyString&&P[G]==="",he=function(G){switch(G.arrayFormat){case"index":return ve=>(ie,we)=>{const ze=ie.length;return we===void 0||G.skipNull&&we===null||G.skipEmptyString&&we===""?ie:we===null?[...ie,[D(ve,G),"[",ze,"]"].join("")]:[...ie,[D(ve,G),"[",D(ze,G),"]=",D(we,G)].join("")]};case"bracket":return ve=>(ie,we)=>we===void 0||G.skipNull&&we===null||G.skipEmptyString&&we===""?ie:we===null?[...ie,[D(ve,G),"[]"].join("")]:[...ie,[D(ve,G),"[]=",D(we,G)].join("")];case"comma":case"separator":return ve=>(ie,we)=>we==null||we.length===0?ie:ie.length===0?[[D(ve,G),"=",D(we,G)].join("")]:[[ie,D(we,G)].join(G.arrayFormatSeparator)];default:return ve=>(ie,we)=>we===void 0||G.skipNull&&we===null||G.skipEmptyString&&we===""?ie:we===null?[...ie,D(ve,G)]:[...ie,[D(ve,G),"=",D(we,G)].join("")]}}($),ge={};for(const G of Object.keys(P))ue(G)||(ge[G]=P[G]);const ye=Object.keys(ge);return $.sort!==!1&&ye.sort($.sort),ye.map(G=>{const ve=P[G];return ve===void 0?"":ve===null?D(G,$):Array.isArray(ve)?ve.reduce(he(G),[]).join("&"):D(G,$)+"="+D(ve,$)}).filter(G=>G.length>0).join("&")},g.parseUrl=(P,$)=>{$=Object.assign({decode:!0},$);const[ue,he]=S(P,"#");return Object.assign({url:ue.split("?")[0]||"",query:I(X(P),$)},$&&$.parseFragmentIdentifier&&he?{fragmentIdentifier:M(he,$)}:{})},g.stringifyUrl=(P,$)=>{$=Object.assign({encode:!0,strict:!0},$);const ue=W(P.url).split("?")[0]||"",he=g.extract(P.url),ge=g.parse(he,{sort:!1}),ye=Object.assign(ge,P.query);let G=g.stringify(ye,$);G&&(G="?"+G);let ve=function(ie){let we="";const ze=ie.indexOf("#");return ze!==-1&&(we=ie.slice(ze)),we}(P.url);return P.fragmentIdentifier&&(ve="#"+D(P.fragmentIdentifier,$)),`${ue}${G}${ve}`},g.pick=(P,$,ue)=>{ue=Object.assign({parseFragmentIdentifier:!0},ue);const{url:he,query:ge,fragmentIdentifier:ye}=g.parseUrl(P,ue);return g.stringifyUrl({url:he,query:_(ge,$),fragmentIdentifier:ye},ue)},g.exclude=(P,$,ue)=>{const he=Array.isArray($)?ge=>!$.includes(ge):(ge,ye)=>!$(ge,ye);return g.pick(P,he,ue)}},function(p,g,b){p.exports={icon:"Icon__icon___rkFdu",unclassified:"Icon__unclassified___KG7dh",contrasting:"Icon__contrasting___XemUp",mentioning:"Icon__mentioning___eZSXr",supporting:"Icon__supporting___6A01H",retractions:"Icon__retractions___+fJ+N",notices:"Icon__notices___DbL2K",publications:"Icon__publications___3dd2q",smallIcon:"Icon__smallIcon___3rDRZ",openingArrow:"Icon__openingArrow___pSL8O",closingCaret:"Icon__closingCaret___EMT7i"}},function(p,g,b){p.exports={sectionIcon:"SectionIcon__sectionIcon___nqPTw",introduction:"SectionIcon__introduction___uhUFG",methods:"SectionIcon__methods___RVooU",results:"SectionIcon__results___1k9LI",discussion:"SectionIcon__discussion___Qeyb0",other:"SectionIcon__other___uF+vV",smallSectionIcon:"SectionIcon__smallSectionIcon___nCjHN"}},function(p,g,b){b.r(g),b.d(g,"HideableTally",function(){return we}),b.d(g,"Tally",function(){return G}),b.d(g,"Count",function(){return P}),b.d(g,"TallyLoader",function(){return _n}),b.d(g,"SectionTally",function(){return Ns}),b.d(g,"SectionTallyCount",function(){return qn});var v=b(0),w=b.n(v),S=b(6),_=b.n(S),O=b(1),D=b.n(O),M=b(7),W=b.n(M),X=({type:F,small:re=!1})=>w.a.createElement("i",{className:D()(W.a.icon,W.a[F],{[W.a.smallIcon]:re})}),N=b(2),I=b.n(N),P=({className:F,horizontal:re,type:Se,count:De,showLabels:be=!1,small:Te=!1})=>w.a.createElement("div",{className:D()(I.a.count,F,{[I.a.horizontal]:re,[I.a.small]:Te})},be&&w.a.createElement("span",{className:D()(I.a.label,{[I.a.smallLabel]:Te})},Se),w.a.createElement("div",{className:D()(I.a.iconCountWrapper,{[I.a.expandedIconCount]:!be})},w.a.createElement(X,{type:Se,small:!0}),w.a.createElement("span",{className:D()(I.a.number,{[I.a.smallNumber]:Te})},De))),$=b(4),ue=b.n($);const he=["retract","withdraw","remove"],ge=F=>{for(const re of he)if(F&&F.toLowerCase().includes(re))return!1;return!0},ye=F=>{for(const re of he)if(F&&F.toLowerCase().includes(re))return!0;return!1};var G=({source:F,campaign:re,autologin:Se,rewardfulID:De,tally:be,forceCollapse:Te,showLabels:He,notices:Ie,small:Fe=!1,horizontal:st=!1,isBadge:It=!1,showZero:ht=!0,showLogo:Dt=!0})=>{const kt={utm_medium:It?"badge":"plugin",utm_source:F||"generic",utm_campaign:re||It?"badge":"plugin"};Se&&(kt.autologin=Se),De&&(kt.via=De);const tn=_.a.stringify(kt),wt={tally:D()("scite-tally",ue.a.tally,{[ue.a.horizontal]:st,[ue.a.small]:Fe&&st,[ue.a.show]:ht?be:be&&(be.total>0||be.citingPublications>0),[ue.a.forceCollapse]:Te&&be.total===0&&be.citingPublications===0,[ue.a.badgeTally]:It})},nn=be&&be.citingPublications&&be.citingPublications.toLocaleString()||0,dn=be&&be.supporting&&be.supporting.toLocaleString()||0,Or=be&&be.contradicting&&be.contradicting.toLocaleString()||0,Dn=be&&be.mentioning&&be.mentioning.toLocaleString()||0,dr=Ie&&Ie.length>0&&Ie.filter(ye)||[],kn=Ie&&Ie.length>0&&Ie.filter(ge)||[],Hn=dr.length.toLocaleString()||0,fn=kn.length.toLocaleString()||0;return w.a.createElement("div",{className:wt.tally,onClick:()=>{window.open(`https://scite.ai/reports/${be&&be.doi}?${tn}`)}},!st&&Dt&&w.a.createElement("img",{className:D()(ue.a.logo,{[ue.a.logoSmall]:Fe}),src:"https://cdn.scite.ai/assets/images/logo.svg"}),w.a.createElement(P,{type:"publications",count:nn,horizontal:st,showLabels:He,small:Fe}),w.a.createElement(P,{type:"supporting",count:dn,horizontal:st,showLabels:He,small:Fe}),w.a.createElement(P,{type:"mentioning",count:Dn,horizontal:st,showLabels:He,small:Fe}),w.a.createElement(P,{type:"contrasting",count:Or,horizontal:st,showLabels:He,small:Fe}),Hn>0&&w.a.createElement(P,{type:"retractions",count:Hn,horizontal:st,showLabels:He,small:Fe}),fn>0&&w.a.createElement(P,{type:"notices",count:fn,horizontal:st,showLabels:He,small:Fe}))},ve=b(5),ie=b.n(ve),we=({children:F,hide:re=!1,clickFn:Se=()=>{}})=>{const[De,be]=Object(v.useState)(!re),Te=()=>{be(!De),Se()};return w.a.createElement("div",{className:ie.a.tally},De?w.a.createElement(w.a.Fragment,null,F,w.a.createElement("div",{className:ie.a.hideContainer,onClick:Te},w.a.createElement("div",{className:ie.a.openingArrow},w.a.createElement(X,{type:"openingArrow"})),w.a.createElement("div",null,"hide"))):w.a.createElement("div",{className:ie.a.logoContainer,onClick:Te},w.a.createElement("div",{className:ie.a.closingArrow},w.a.createElement(X,{type:"closingCaret"})),w.a.createElement("img",{className:ie.a.logoSingleLetter,src:"https://cdn.scite.ai/assets/images/scite_single_letter.svg"})))},ze=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||ze!==void 0&&ze,Xe="URLSearchParams"in ze,Le="Symbol"in ze&&"iterator"in Symbol,Je="FileReader"in ze&&"Blob"in ze&&function(){try{return new Blob,!0}catch{return!1}}(),pt="FormData"in ze,A="ArrayBuffer"in ze;if(A)var B=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Z=ArrayBuffer.isView||function(F){return F&&B.indexOf(Object.prototype.toString.call(F))>-1};function de(F){if(typeof F!="string"&&(F=String(F)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(F)||F==="")throw new TypeError('Invalid character in header field name: "'+F+'"');return F.toLowerCase()}function se(F){return typeof F!="string"&&(F=String(F)),F}function Y(F){var re={next:function(){var Se=F.shift();return{done:Se===void 0,value:Se}}};return Le&&(re[Symbol.iterator]=function(){return re}),re}function ne(F){this.map={},F instanceof ne?F.forEach(function(re,Se){this.append(Se,re)},this):Array.isArray(F)?F.forEach(function(re){this.append(re[0],re[1])},this):F&&Object.getOwnPropertyNames(F).forEach(function(re){this.append(re,F[re])},this)}function Ce(F){if(F.bodyUsed)return Promise.reject(new TypeError("Already read"));F.bodyUsed=!0}function Oe(F){return new Promise(function(re,Se){F.onload=function(){re(F.result)},F.onerror=function(){Se(F.error)}})}function Ee(F){var re=new FileReader,Se=Oe(re);return re.readAsArrayBuffer(F),Se}function at(F){if(F.slice)return F.slice(0);var re=new Uint8Array(F.byteLength);return re.set(new Uint8Array(F)),re.buffer}function _t(){return this.bodyUsed=!1,this._initBody=function(F){var re;this.bodyUsed=this.bodyUsed,this._bodyInit=F,F?typeof F=="string"?this._bodyText=F:Je&&Blob.prototype.isPrototypeOf(F)?this._bodyBlob=F:pt&&FormData.prototype.isPrototypeOf(F)?this._bodyFormData=F:Xe&&URLSearchParams.prototype.isPrototypeOf(F)?this._bodyText=F.toString():A&&Je&&(re=F)&&DataView.prototype.isPrototypeOf(re)?(this._bodyArrayBuffer=at(F.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):A&&(ArrayBuffer.prototype.isPrototypeOf(F)||Z(F))?this._bodyArrayBuffer=at(F):this._bodyText=F=Object.prototype.toString.call(F):this._bodyText="",this.headers.get("content-type")||(typeof F=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Xe&&URLSearchParams.prototype.isPrototypeOf(F)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Je&&(this.blob=function(){var F=Ce(this);if(F)return F;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Ce(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(Ee)}),this.text=function(){var F,re,Se,De=Ce(this);if(De)return De;if(this._bodyBlob)return F=this._bodyBlob,Se=Oe(re=new FileReader),re.readAsText(F),Se;if(this._bodyArrayBuffer)return Promise.resolve(function(be){for(var Te=new Uint8Array(be),He=new Array(Te.length),Ie=0;Ie<Te.length;Ie++)He[Ie]=String.fromCharCode(Te[Ie]);return He.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},pt&&(this.formData=function(){return this.text().then(xt)}),this.json=function(){return this.text().then(JSON.parse)},this}ne.prototype.append=function(F,re){F=de(F),re=se(re);var Se=this.map[F];this.map[F]=Se?Se+", "+re:re},ne.prototype.delete=function(F){delete this.map[de(F)]},ne.prototype.get=function(F){return F=de(F),this.has(F)?this.map[F]:null},ne.prototype.has=function(F){return this.map.hasOwnProperty(de(F))},ne.prototype.set=function(F,re){this.map[de(F)]=se(re)},ne.prototype.forEach=function(F,re){for(var Se in this.map)this.map.hasOwnProperty(Se)&&F.call(re,this.map[Se],Se,this)},ne.prototype.keys=function(){var F=[];return this.forEach(function(re,Se){F.push(Se)}),Y(F)},ne.prototype.values=function(){var F=[];return this.forEach(function(re){F.push(re)}),Y(F)},ne.prototype.entries=function(){var F=[];return this.forEach(function(re,Se){F.push([Se,re])}),Y(F)},Le&&(ne.prototype[Symbol.iterator]=ne.prototype.entries);var Gt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function jt(F,re){if(!(this instanceof jt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Se,De,be=(re=re||{}).body;if(F instanceof jt){if(F.bodyUsed)throw new TypeError("Already read");this.url=F.url,this.credentials=F.credentials,re.headers||(this.headers=new ne(F.headers)),this.method=F.method,this.mode=F.mode,this.signal=F.signal,be||F._bodyInit==null||(be=F._bodyInit,F.bodyUsed=!0)}else this.url=String(F);if(this.credentials=re.credentials||this.credentials||"same-origin",!re.headers&&this.headers||(this.headers=new ne(re.headers)),this.method=(De=(Se=re.method||this.method||"GET").toUpperCase(),Gt.indexOf(De)>-1?De:Se),this.mode=re.mode||this.mode||null,this.signal=re.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&be)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(be),!(this.method!=="GET"&&this.method!=="HEAD"||re.cache!=="no-store"&&re.cache!=="no-cache")){var Te=/([?&])_=[^&]*/;Te.test(this.url)?this.url=this.url.replace(Te,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function xt(F){var re=new FormData;return F.trim().split("&").forEach(function(Se){if(Se){var De=Se.split("="),be=De.shift().replace(/\+/g," "),Te=De.join("=").replace(/\+/g," ");re.append(decodeURIComponent(be),decodeURIComponent(Te))}}),re}function ct(F,re){if(!(this instanceof ct))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');re||(re={}),this.type="default",this.status=re.status===void 0?200:re.status,this.ok=this.status>=200&&this.status<300,this.statusText=re.statusText===void 0?"":""+re.statusText,this.headers=new ne(re.headers),this.url=re.url||"",this._initBody(F)}jt.prototype.clone=function(){return new jt(this,{body:this._bodyInit})},_t.call(jt.prototype),_t.call(ct.prototype),ct.prototype.clone=function(){return new ct(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ne(this.headers),url:this.url})},ct.error=function(){var F=new ct(null,{status:0,statusText:""});return F.type="error",F};var Jt=[301,302,303,307,308];ct.redirect=function(F,re){if(Jt.indexOf(re)===-1)throw new RangeError("Invalid status code");return new ct(null,{status:re,headers:{location:F}})};var gt=ze.DOMException;try{new gt}catch{(gt=function(re,Se){this.message=re,this.name=Se;var De=Error(re);this.stack=De.stack}).prototype=Object.create(Error.prototype),gt.prototype.constructor=gt}function Tn(F,re){return new Promise(function(Se,De){var be=new jt(F,re);if(be.signal&&be.signal.aborted)return De(new gt("Aborted","AbortError"));var Te=new XMLHttpRequest;function He(){Te.abort()}Te.onload=function(){var Ie,Fe,st={status:Te.status,statusText:Te.statusText,headers:(Ie=Te.getAllResponseHeaders()||"",Fe=new ne,Ie.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(ht){return ht.indexOf(`
`)===0?ht.substr(1,ht.length):ht}).forEach(function(ht){var Dt=ht.split(":"),kt=Dt.shift().trim();if(kt){var tn=Dt.join(":").trim();Fe.append(kt,tn)}}),Fe)};st.url="responseURL"in Te?Te.responseURL:st.headers.get("X-Request-URL");var It="response"in Te?Te.response:Te.responseText;setTimeout(function(){Se(new ct(It,st))},0)},Te.onerror=function(){setTimeout(function(){De(new TypeError("Network request failed"))},0)},Te.ontimeout=function(){setTimeout(function(){De(new TypeError("Network request failed"))},0)},Te.onabort=function(){setTimeout(function(){De(new gt("Aborted","AbortError"))},0)},Te.open(be.method,function(Ie){try{return Ie===""&&ze.location.href?ze.location.href:Ie}catch{return Ie}}(be.url),!0),be.credentials==="include"?Te.withCredentials=!0:be.credentials==="omit"&&(Te.withCredentials=!1),"responseType"in Te&&(Je?Te.responseType="blob":A&&be.headers.get("Content-Type")&&be.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(Te.responseType="arraybuffer")),!re||typeof re.headers!="object"||re.headers instanceof ne?be.headers.forEach(function(Ie,Fe){Te.setRequestHeader(Fe,Ie)}):Object.getOwnPropertyNames(re.headers).forEach(function(Ie){Te.setRequestHeader(Ie,se(re.headers[Ie]))}),be.signal&&(be.signal.addEventListener("abort",He),Te.onreadystatechange=function(){Te.readyState===4&&be.signal.removeEventListener("abort",He)}),Te.send(be._bodyInit===void 0?null:be._bodyInit)})}Tn.polyfill=!0,ze.fetch||(ze.fetch=Tn,ze.Headers=ne,ze.Request=jt,ze.Response=ct);const{fetch:cn}=window,bn=["retracted","has expression of concern","withdrawn","has erratum","has correction"];var _n=({doi:F,children:re})=>{const[Se,De]=Object(v.useState)(null),[be,Te]=Object(v.useState)(null),[He,Ie]=Object(v.useState)(null);return Object(v.useEffect)(()=>{(function Fe({doi:st,setTally:It,setError:ht,retry:Dt=0,maxRetries:kt=8}={}){const tn=new Error("Failed to get Tally");cn("https://api.scite.ai/tallies/"+st).then(wt=>{if(wt.status===404)return It({doi:st,total:0,citingPublications:0}),{};if(!wt.ok)throw tn;return wt.json()}).then(wt=>{typeof wt.total=="number"&&It(wt)}).catch(wt=>{if(wt===tn&&Dt<kt)return setTimeout(()=>Fe({retry:++Dt,doi:st,setTally:It,setError:ht,maxRetries:kt}),1200);ht(wt)})})({doi:F,setTally:De,setError:Ie}),function Fe({doi:st,setNotices:It,setError:ht,retry:Dt=0,maxRetries:kt=8}={}){const tn=new Error("Failed to get notices");cn("https://api.scite.ai/papers/"+st).then(wt=>{if(wt.status===404)return It([]),{};if(!wt.ok)throw tn;return wt.json()}).then(({editorialNotices:wt})=>{const nn=[...new Set(wt.filter(({status:dn})=>bn.includes(dn.toLowerCase())).map(({status:dn})=>dn))];It(nn)}).catch(wt=>{if(wt===tn&&Dt<kt)return setTimeout(()=>Fe({retry:++Dt,doi:st,maxRetries:kt,setError:ht,setNotices:It}),1200);ht(wt)})}({doi:F,setNotices:Te,setError:Ie})},[F]),re({tally:Se,notices:be,error:He})},Sr=b(8),un=b.n(Sr),Tr=({type:F,small:re=!1})=>w.a.createElement("i",{className:D()(un.a.sectionIcon,un.a[F],{[un.a.smallSectionIcon]:re})});const cr={PIE:"pie",BAR:"bar",DONUT:"donut"};var qn=({className:F,horizontal:re,type:Se,count:De,showLabels:be=!1,small:Te=!1})=>w.a.createElement("div",{className:D()(I.a.count,F,{[I.a.horizontal]:re,[I.a.small]:Te})},w.a.createElement("div",{className:D()(I.a.sectionTallyIconCountWrapper,{[I.a.expandedIconCount]:!be})},w.a.createElement(Tr,{type:Se,small:!0}),be&&w.a.createElement("span",{className:D()(I.a.label,{[I.a.smallLabel]:Te})},(He=>He==="introduction"?"Intro":He)(Se)),w.a.createElement("span",{className:D()(I.a.number,{[I.a.smallNumber]:Te})},De))),_r=b(3),en=b.n(_r);const Yo=({col:F,barWidth:re,chartHeight:Se,largestValue:De})=>{const be=(({height:Te,chartHeight:He,largestValue:Ie})=>Te/Ie*He)({height:F.value,chartHeight:Se,largestValue:De});return w.a.createElement("g",{transform:`translate(0, ${Se-be})`},w.a.createElement("rect",{width:re-2,height:be,fill:F.color}))};var ja=({chartWidth:F,chartHeight:re,data:Se})=>{const De=Math.max.apply(Math,Se.map(He=>He.value)),be=Se.map((He,Ie)=>w.a.createElement("g",{key:"bar_"+Ie,transform:`translate(${30*Ie},0)`},w.a.createElement(Yo,{col:He,barWidth:30,chartHeight:re,largestValue:De}))),Te=(F-30*Se.length)/2;return w.a.createElement("svg",{width:F,height:re,style:{marginRight:"25px"}},w.a.createElement("g",null,w.a.createElement("g",{transform:`translate(${Te}, 0)`},be)))};const Vr=({value:F,total:re})=>F/re,Zo=F=>[Math.cos(2*Math.PI*F),Math.sin(2*Math.PI*F)];var vn=({chartWidth:F,chartHeight:re,data:Se})=>{const De=Se.reduce((Te,{value:He})=>Te+He,0),be=(Te=>{let He=0;const Ie=[];return Te.forEach(Fe=>{const[st,It]=Zo(He);He+=Fe.percent;const[ht,Dt]=Zo(He),kt=[`M ${st} ${It}`,`A 1 1 0 ${Fe.percent>.5?1:0} 1 ${ht} ${Dt}`,"L 0 0"].join(" ");Ie.push(w.a.createElement("path",{d:kt,fill:Fe.color}))}),Ie})((({data:Te,total:He})=>Te.map(Ie=>({color:Ie.color,percent:Vr({value:Ie.value,total:He})})))({data:Se,total:De}));return w.a.createElement("svg",{width:F,height:re,viewBox:"-1 -1 2 2",style:{marginRight:"25px"}},be)};function Ln(){return(Ln=Object.assign||function(F){for(var re=1;re<arguments.length;re++){var Se=arguments[re];for(var De in Se)Object.prototype.hasOwnProperty.call(Se,De)&&(F[De]=Se[De])}return F}).apply(this,arguments)}const ur=F=>F/(Math.PI/180),kr=(F,re)=>F/re,Wr=(F,re,Se)=>{const De=F*(Math.PI/180);return[Se-Math.cos(De)*re,Se-Math.sin(De)*re]},Qr=({chartConfig:F,paths:re,subtotal:Se},{percent:De,color:be},Te)=>{const He=360*Se+90,Ie=He+360*De,Fe=De>=F.minimumValue,st=Fe?F.gapAngleOffsetInner:0,It=Fe?F.gapAngleOffsetOuter:0,ht=He+st,Dt=He+It,kt=Ie-st,tn=Ie-It,[wt,nn]=Wr(ht,F.radiusInner,F.center),[dn,Or]=Wr(Dt,F.radiusOuter,F.center),[Dn,dr]=Wr(tn,F.radiusOuter,F.center),[kn,Hn]=Wr(kt,F.radiusInner,F.center),fn=De>.5?1:0,Rn=[`M${wt} ${nn}`,`L${dn} ${Or}`,`A${F.radiusOuter} ${F.radiusOuter} 0 ${fn} 1 ${Dn} ${dr}`,`L${kn} ${Hn}`,`A${F.radiusInner} ${F.radiusInner} 0 ${fn} 0 ${wt} ${nn}`],ho=be?{fill:be}:{};return re.push(w.a.createElement("path",Ln({key:Te},ho,{stroke:"none",d:Rn.join(" ")}))),{chartConfig:F,paths:re,subtotal:Se+De}};var Rr=({data:F,size:re})=>{const Se=(({data:Te})=>{const He=(Te||[]).filter(({value:Fe})=>Fe>0),Ie=He.reduce((Fe,{value:st=0})=>Fe+st,0);return He.map(Fe=>({...Fe,percent:Fe.value/Ie}))})({data:F});if(!(Se||[]).length)return null;const De=(({size:Te})=>{const He=Te/2,Ie=(Te-75)/2,Fe=Te/2,st=Fe-Ie,It=ur(kr(1,st)),ht=ur(kr(1,Fe)),Dt=ur(kr(2,st));return{center:He,innerHoleDiameter:75,thickness:Ie,radiusOuter:Fe,radiusInner:st,gapSize:1,gapAngleOffsetInner:It,gapAngleOffsetOuter:ht,minimumAngleDeg:Dt,minimumValue:Dt/360}})({size:re}),be=Se.reduce(Qr,{chartConfig:De,paths:[],subtotal:0}).paths;return w.a.createElement("div",null,w.a.createElement("div",null,w.a.createElement("svg",{width:re,height:re,style:{marginRight:"25px"}},be)))},Ns=({source:F,campaign:re,autologin:Se,rewardfulID:De,tally:be,forceCollapse:Te,showLabels:He,small:Ie=!1,horizontal:Fe=!1,isBadge:st=!1,showZero:It=!0,chartType:ht=null,showLogo:Dt=!0})=>{const kt={utm_medium:st?"badge":"plugin",utm_source:F||"generic",utm_campaign:re||st?"badge":"plugin"};Se&&(kt.autologin=Se),De&&(kt.via=De);const tn=_.a.stringify(kt),wt={sectionTallyContainer:D()("scite-section-tally",en.a.sectionTallyWidget),sectionTally:D()(en.a.tally,{[en.a.horizontal]:Fe,[en.a.small]:Ie&&Fe,[en.a.show]:It?be:be&&be.total>0,[en.a.forceCollapse]:Te&&be.total===0,[en.a.badgeTally]:st})},nn=be&&be.introduction&&be.introduction.toLocaleString()||0,dn=be&&be.methods&&be.methods.toLocaleString()||0,Or=be&&be.results&&be.results.toLocaleString()||0,Dn=be&&be.discussion&&be.discussion.toLocaleString()||0,dr=be&&be.other&&be.other.toLocaleString()||0,kn=`https://scite.ai/reports/${be&&be.doi}?${tn}`,Hn=((Rn={})=>[{name:"Intro",color:"#002AB2",value:Rn.introduction||0},{name:"Methods",color:"#0036E5",value:Rn.methods||0},{name:"Results",color:"#0062FF",value:Rn.results||0},{name:"Discussion",color:"#66A3FF",value:Rn.discussion||0},{name:"Other",color:"#9EC4F0",value:Rn.other||0}])(be),fn=Object.values(cr).includes(ht);return ht&&!fn&&console.warn(`Received unexpected chartType: ${ht}. Must be 'pie', 'bar', 'donut', or null.`),w.a.createElement("div",{className:wt.sectionTallyContainer},!Fe&&Dt&&w.a.createElement("img",{className:D()(en.a.logo,{[en.a.logoSmall]:Ie}),src:"https://cdn.scite.ai/assets/images/logo.svg"}),w.a.createElement("div",{onClick:()=>{window.open(kn)},className:en.a.sectionTallyWrapper},ht==="bar"&&w.a.createElement(ja,{chartWidth:140,chartHeight:130,data:Hn}),ht==="pie"&&w.a.createElement(vn,{chartWidth:140,chartHeight:140,data:Hn}),ht==="donut"&&w.a.createElement(Rr,{data:Hn,size:140}),w.a.createElement("div",{className:wt.sectionTally},w.a.createElement(qn,{type:"introduction",count:nn,horizontal:Fe,showLabels:He,small:Ie}),w.a.createElement(qn,{type:"methods",count:dn,horizontal:Fe,showLabels:He,small:Ie}),w.a.createElement(qn,{type:"results",count:Or,horizontal:Fe,showLabels:He,small:Ie}),w.a.createElement(qn,{type:"discussion",count:Dn,horizontal:Fe,showLabels:He,small:Ie}),w.a.createElement(qn,{type:"other",count:dr,horizontal:Fe,showLabels:He,small:Ie}))),fn&&w.a.createElement("div",{className:en.a.chartSubheading},w.a.createElement("span",{className:en.a.chartLabel},"Sections"),w.a.createElement("a",{href:kn,target:"_blank",rel:"noopener noreferrer"},"See more details")))}},function(p,g,b){p.exports=v=>encodeURIComponent(v).replace(/[!'()*]/g,w=>"%"+w.charCodeAt(0).toString(16).toUpperCase())},function(p,g,b){var v=new RegExp("%[a-f0-9]{2}","gi"),w=new RegExp("(%[a-f0-9]{2})+","gi");function S(O,D){try{return decodeURIComponent(O.join(""))}catch{}if(O.length===1)return O;D=D||1;var M=O.slice(0,D),W=O.slice(D);return Array.prototype.concat.call([],S(M),S(W))}function _(O){try{return decodeURIComponent(O)}catch{for(var D=O.match(v),M=1;M<D.length;M++)D=(O=S(D,M).join("")).match(v);return O}}p.exports=function(O){if(typeof O!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof O+"`");try{return O=O.replace(/\+/g," "),decodeURIComponent(O)}catch{return function(M){for(var W={"%FE%FF":"","%FF%FE":""},X=w.exec(M);X;){try{W[X[0]]=decodeURIComponent(X[0])}catch{var N=_(X[0]);N!==X[0]&&(W[X[0]]=N)}X=w.exec(M)}W["%C2"]="";for(var I=Object.keys(W),P=0;P<I.length;P++){var $=I[P];M=M.replace(new RegExp($,"g"),W[$])}return M}(O)}}},function(p,g,b){p.exports=(v,w)=>{if(typeof v!="string"||typeof w!="string")throw new TypeError("Expected the arguments to be of type `string`");if(w==="")return[v];const S=v.indexOf(w);return S===-1?[v]:[v.slice(0,S),v.slice(S+w.length)]}},function(p,g,b){p.exports=function(v,w){for(var S={},_=Object.keys(v),O=Array.isArray(w),D=0;D<_.length;D++){var M=_[D],W=v[M];(O?w.indexOf(M)!==-1:w(M,W,v))&&(S[M]=W)}return S}}]))},379:(c,u,f)=>{var m,p=function(){var N={};return function(I){if(N[I]===void 0){var P=document.querySelector(I);if(window.HTMLIFrameElement&&P instanceof window.HTMLIFrameElement)try{P=P.contentDocument.head}catch{P=null}N[I]=P}return N[I]}}(),g=[];function b(N){for(var I=-1,P=0;P<g.length;P++)if(g[P].identifier===N){I=P;break}return I}function v(N,I){for(var P={},$=[],ue=0;ue<N.length;ue++){var he=N[ue],ge=I.base?he[0]+I.base:he[0],ye=P[ge]||0,G="".concat(ge," ").concat(ye);P[ge]=ye+1;var ve=b(G),ie={css:he[1],media:he[2],sourceMap:he[3]};ve!==-1?(g[ve].references++,g[ve].updater(ie)):g.push({identifier:G,updater:X(ie,I),references:1}),$.push(G)}return $}function w(N){var I=document.createElement("style"),P=N.attributes||{};if(P.nonce===void 0){var $=f.nc;$&&(P.nonce=$)}if(Object.keys(P).forEach(function(he){I.setAttribute(he,P[he])}),typeof N.insert=="function")N.insert(I);else{var ue=p(N.insert||"head");if(!ue)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");ue.appendChild(I)}return I}var S,_=(S=[],function(N,I){return S[N]=I,S.filter(Boolean).join(`
`)});function O(N,I,P,$){var ue=P?"":$.media?"@media ".concat($.media," {").concat($.css,"}"):$.css;if(N.styleSheet)N.styleSheet.cssText=_(I,ue);else{var he=document.createTextNode(ue),ge=N.childNodes;ge[I]&&N.removeChild(ge[I]),ge.length?N.insertBefore(he,ge[I]):N.appendChild(he)}}function D(N,I,P){var $=P.css,ue=P.media,he=P.sourceMap;if(ue?N.setAttribute("media",ue):N.removeAttribute("media"),he&&typeof btoa<"u"&&($+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(he))))," */")),N.styleSheet)N.styleSheet.cssText=$;else{for(;N.firstChild;)N.removeChild(N.firstChild);N.appendChild(document.createTextNode($))}}var M=null,W=0;function X(N,I){var P,$,ue;if(I.singleton){var he=W++;P=M||(M=w(I)),$=O.bind(null,P,he,!1),ue=O.bind(null,P,he,!0)}else P=w(I),$=D.bind(null,P,I),ue=function(){(function(ge){if(ge.parentNode===null)return!1;ge.parentNode.removeChild(ge)})(P)};return $(N),function(ge){if(ge){if(ge.css===N.css&&ge.media===N.media&&ge.sourceMap===N.sourceMap)return;$(N=ge)}else ue()}}c.exports=function(N,I){(I=I||{}).singleton||typeof I.singleton=="boolean"||(I.singleton=(m===void 0&&(m=!!(window&&document&&document.all&&!window.atob)),m));var P=v(N=N||[],I);return function($){if($=$||[],Object.prototype.toString.call($)==="[object Array]"){for(var ue=0;ue<P.length;ue++){var he=b(P[ue]);g[he].references--}for(var ge=v($,I),ye=0;ye<P.length;ye++){var G=b(P[ye]);g[G].references===0&&(g[G].updater(),g.splice(G,1))}P=ge}}}},473:c=>{c.exports=function(){}}},o={};function s(c){var u=o[c];if(u!==void 0)return u.exports;var f=o[c]={id:c,exports:{}};return t[c](f,f.exports,s),f.exports}s.n=c=>{var u=c&&c.__esModule?()=>c.default:()=>c;return s.d(u,{a:u}),u},s.d=(c,u)=>{for(var f in u)s.o(u,f)&&!s.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:u[f]})},s.o=(c,u)=>Object.prototype.hasOwnProperty.call(c,u),s.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var i={};return(()=>{s.r(i),s.d(i,{getConfig:()=>yo,insertBadge:()=>Da,insertBadgeWrapper:()=>na,insertBadges:()=>Ma,main:()=>cl});var c=s(666),u=s.n(c),f=s(294),m=s(935),p=s(285);function g(T,C){(C==null||C>T.length)&&(C=T.length);for(var k=0,L=new Array(C);k<C;k++)L[k]=T[k];return L}function b(T,C,k,L,z,K,J){try{var le=T[K](J),ee=le.value}catch(oe){return void k(oe)}le.done?C(ee):Promise.resolve(ee).then(L,z)}function v(T){return function(){var C=this,k=arguments;return new Promise(function(L,z){var K=T.apply(C,k);function J(ee){b(K,L,z,J,le,"next",ee)}function le(ee){b(K,L,z,J,le,"throw",ee)}J(void 0)})}}function w(T){return function(C){if(Array.isArray(C))return g(C)}(T)||function(C){if(typeof Symbol<"u"&&C[Symbol.iterator]!=null||C["@@iterator"]!=null)return Array.from(C)}(T)||function(C,k){if(C){if(typeof C=="string")return g(C,k);var L=Object.prototype.toString.call(C).slice(8,-1);return L==="Object"&&C.constructor&&(L=C.constructor.name),L==="Map"||L==="Set"?Array.from(L):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?g(C,k):void 0}}(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S,_=window.fetch,O=["retracted","has expression of concern","withdrawn","has erratum","has correction"],D=(S=v(u().mark(function T(C){var k,L,z,K,J,le=arguments;return u().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(k=le.length>1&&le[1]!==void 0?le[1]:0,L=le.length>2&&le[2]!==void 0?le[2]:8,C&&C.length!==0){ee.next=3;break}return ee.abrupt("return",{tallies:{}});case 3:return z=new Error("Failed to get Tallies"),ee.prev=4,ee.next=7,_("https://api.scite.ai/tallies",{method:"POST",body:JSON.stringify(C),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if((K=ee.sent).status!==404){ee.next=10;break}return ee.abrupt("return",{tallies:{}});case 10:if(K.ok){ee.next=12;break}throw z;case 12:return ee.next=14,K.json();case 14:return J=ee.sent,ee.abrupt("return",J||{});case 18:if(ee.prev=18,ee.t0=ee.catch(4),!(ee.t0===z&&k<L)){ee.next=26;break}return ee.next=23,new Promise(function(oe){return setTimeout(function(){return oe(D(C,++k))},600)});case 23:return ee.abrupt("return",ee.sent);case 26:console.error(z);case 27:return ee.abrupt("return",{tallies:{}});case 28:case"end":return ee.stop()}},T,null,[[4,18]])})),function(T){return S.apply(this,arguments)}),M=function(){var T=v(u().mark(function C(k){var L,z,K,J,le,ee,oe,xe=arguments;return u().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(L=xe.length>1&&xe[1]!==void 0?xe[1]:0,z=xe.length>2&&xe[2]!==void 0?xe[2]:8,k&&k.length!==0){fe.next=3;break}return fe.abrupt("return",{notices:{}});case 3:return K=new Error("Failed to get notices"),fe.prev=4,fe.next=7,_("https://api.scite.ai/papers",{method:"POST",body:JSON.stringify(k),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if((J=fe.sent).status!==404){fe.next=10;break}return fe.abrupt("return",{notices:{}});case 10:if(J.ok){fe.next=12;break}throw K;case 12:return fe.next=14,J.json();case 14:le=fe.sent,ee={},fe.t0=regeneratorRuntime.keys(le.papers);case 17:if((fe.t1=fe.t0()).done){fe.next=25;break}if(oe=fe.t1.value,le.papers[oe].editorialNotices){fe.next=22;break}return ee[oe]=[],fe.abrupt("continue",17);case 22:ee[oe]=w(new Set(le.papers[oe].editorialNotices.filter(function($e){var Pe=$e.status;return O.includes(Pe.toLowerCase())}).map(function($e){return $e.status}))),fe.next=17;break;case 25:return fe.abrupt("return",{notices:ee});case 28:if(fe.prev=28,fe.t2=fe.catch(4),!(fe.t2===K&&L<z)){fe.next=36;break}return fe.next=33,new Promise(function($e){return setTimeout(function(){return $e(M(k,++L))},600)});case 33:return fe.abrupt("return",fe.sent);case 36:console.error(K);case 37:case"end":return fe.stop()}},C,null,[[4,28]])}));return function(C){return T.apply(this,arguments)}}(),W=function(){var T=v(u().mark(function C(k){var L,z,K,J,le,ee=arguments;return u().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(L=ee.length>1&&ee[1]!==void 0?ee[1]:0,z=ee.length>2&&ee[2]!==void 0?ee[2]:8,k&&k.length!==0){oe.next=3;break}return oe.abrupt("return",{tallies:{}});case 3:return K=new Error("Failed to get Section Tallies"),oe.prev=4,oe.next=7,_("https://api.scite.ai/tallies/cited-by-sections",{method:"POST",body:JSON.stringify(k),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if((J=oe.sent).status!==404){oe.next=10;break}return oe.abrupt("return",{tallies:{}});case 10:if(J.ok){oe.next=12;break}throw K;case 12:return oe.next=14,J.json();case 14:return le=oe.sent,oe.abrupt("return",le||{});case 18:if(oe.prev=18,oe.t0=oe.catch(4),!(oe.t0===K&&L<z)){oe.next=26;break}return oe.next=23,new Promise(function(xe){return setTimeout(function(){return xe(W(k,++L))},600)});case 23:return oe.abrupt("return",oe.sent);case 26:console.error(K);case 27:return oe.abrupt("return",{tallies:{}});case 28:case"end":return oe.stop()}},C,null,[[4,18]])}));return function(C){return T.apply(this,arguments)}}(),X=s(184),N=s.n(X),I=f.createContext(),P=f.createContext();function $(T){var C=T.children,k=f.useState(null),L=k[0],z=k[1],K=f.useRef(!1);f.useEffect(function(){return function(){K.current=!0}},[]);var J=f.useCallback(function(le){K.current||z(le)},[]);return f.createElement(I.Provider,{value:L},f.createElement(P.Provider,{value:J},C))}var ue=function(T){return Array.isArray(T)?T[0]:T},he=function(T){if(typeof T=="function"){for(var C=arguments.length,k=new Array(C>1?C-1:0),L=1;L<C;L++)k[L-1]=arguments[L];return T.apply(void 0,k)}},ge=function(T,C){if(typeof T=="function")return he(T,C);T!=null&&(T.current=C)},ye=function(T){return T.reduce(function(C,k){var L=k[0],z=k[1];return C[L]=z,C},{})},G=typeof window<"u"&&window.document&&window.document.createElement?f.useLayoutEffect:f.useEffect;function ve(T){if(T==null)return window;if(T.toString()!=="[object Window]"){var C=T.ownerDocument;return C&&C.defaultView||window}return T}function ie(T){return T instanceof ve(T).Element||T instanceof Element}function we(T){return T instanceof ve(T).HTMLElement||T instanceof HTMLElement}function ze(T){return typeof ShadowRoot<"u"&&(T instanceof ve(T).ShadowRoot||T instanceof ShadowRoot)}var Xe=Math.max,Le=Math.min,Je=Math.round;function pt(T,C){C===void 0&&(C=!1);var k=T.getBoundingClientRect(),L=1,z=1;if(we(T)&&C){var K=T.offsetHeight,J=T.offsetWidth;J>0&&(L=Je(k.width)/J||1),K>0&&(z=Je(k.height)/K||1)}return{width:k.width/L,height:k.height/z,top:k.top/z,right:k.right/L,bottom:k.bottom/z,left:k.left/L,x:k.left/L,y:k.top/z}}function A(T){var C=ve(T);return{scrollLeft:C.pageXOffset,scrollTop:C.pageYOffset}}function B(T){return T?(T.nodeName||"").toLowerCase():null}function Z(T){return((ie(T)?T.ownerDocument:T.document)||window.document).documentElement}function de(T){return pt(Z(T)).left+A(T).scrollLeft}function se(T){return ve(T).getComputedStyle(T)}function Y(T){var C=se(T),k=C.overflow,L=C.overflowX,z=C.overflowY;return/auto|scroll|overlay|hidden/.test(k+z+L)}function ne(T,C,k){k===void 0&&(k=!1);var L,z,K=we(C),J=we(C)&&function(fe){var $e=fe.getBoundingClientRect(),Pe=Je($e.width)/fe.offsetWidth||1,Ve=Je($e.height)/fe.offsetHeight||1;return Pe!==1||Ve!==1}(C),le=Z(C),ee=pt(T,J),oe={scrollLeft:0,scrollTop:0},xe={x:0,y:0};return(K||!K&&!k)&&((B(C)!=="body"||Y(le))&&(oe=(L=C)!==ve(L)&&we(L)?{scrollLeft:(z=L).scrollLeft,scrollTop:z.scrollTop}:A(L)),we(C)?((xe=pt(C,!0)).x+=C.clientLeft,xe.y+=C.clientTop):le&&(xe.x=de(le))),{x:ee.left+oe.scrollLeft-xe.x,y:ee.top+oe.scrollTop-xe.y,width:ee.width,height:ee.height}}function Ce(T){var C=pt(T),k=T.offsetWidth,L=T.offsetHeight;return Math.abs(C.width-k)<=1&&(k=C.width),Math.abs(C.height-L)<=1&&(L=C.height),{x:T.offsetLeft,y:T.offsetTop,width:k,height:L}}function Oe(T){return B(T)==="html"?T:T.assignedSlot||T.parentNode||(ze(T)?T.host:null)||Z(T)}function Ee(T){return["html","body","#document"].indexOf(B(T))>=0?T.ownerDocument.body:we(T)&&Y(T)?T:Ee(Oe(T))}function at(T,C){var k;C===void 0&&(C=[]);var L=Ee(T),z=L===((k=T.ownerDocument)==null?void 0:k.body),K=ve(L),J=z?[K].concat(K.visualViewport||[],Y(L)?L:[]):L,le=C.concat(J);return z?le:le.concat(at(Oe(J)))}function _t(T){return["table","td","th"].indexOf(B(T))>=0}function Gt(T){return we(T)&&se(T).position!=="fixed"?T.offsetParent:null}function jt(T){for(var C=ve(T),k=Gt(T);k&&_t(k)&&se(k).position==="static";)k=Gt(k);return k&&(B(k)==="html"||B(k)==="body"&&se(k).position==="static")?C:k||function(L){var z=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;if(navigator.userAgent.indexOf("Trident")!==-1&&we(L)&&se(L).position==="fixed")return null;var K=Oe(L);for(ze(K)&&(K=K.host);we(K)&&["html","body"].indexOf(B(K))<0;){var J=se(K);if(J.transform!=="none"||J.perspective!=="none"||J.contain==="paint"||["transform","perspective"].indexOf(J.willChange)!==-1||z&&J.willChange==="filter"||z&&J.filter&&J.filter!=="none")return K;K=K.parentNode}return null}(T)||C}var xt="top",ct="bottom",Jt="right",gt="left",Tn="auto",cn=[xt,ct,Jt,gt],bn="start",_n="end",Sr="viewport",un="popper",Tr=cn.reduce(function(T,C){return T.concat([C+"-"+bn,C+"-"+_n])},[]),cr=[].concat(cn,[Tn]).reduce(function(T,C){return T.concat([C,C+"-"+bn,C+"-"+_n])},[]),qn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function _r(T){var C=new Map,k=new Set,L=[];function z(K){k.add(K.name),[].concat(K.requires||[],K.requiresIfExists||[]).forEach(function(J){if(!k.has(J)){var le=C.get(J);le&&z(le)}}),L.push(K)}return T.forEach(function(K){C.set(K.name,K)}),T.forEach(function(K){k.has(K.name)||z(K)}),L}var en={placement:"bottom",modifiers:[],strategy:"absolute"};function Yo(){for(var T=arguments.length,C=new Array(T),k=0;k<T;k++)C[k]=arguments[k];return!C.some(function(L){return!(L&&typeof L.getBoundingClientRect=="function")})}function ja(T){T===void 0&&(T={});var C=T,k=C.defaultModifiers,L=k===void 0?[]:k,z=C.defaultOptions,K=z===void 0?en:z;return function(J,le,ee){ee===void 0&&(ee=K);var oe,xe,fe={placement:"bottom",orderedModifiers:[],options:Object.assign({},en,K),modifiersData:{},elements:{reference:J,popper:le},attributes:{},styles:{}},$e=[],Pe=!1,Ve={state:fe,setOptions:function(Ue){var nt=typeof Ue=="function"?Ue(fe.options):Ue;Ke(),fe.options=Object.assign({},K,fe.options,nt),fe.scrollParents={reference:ie(J)?at(J):J.contextElement?at(J.contextElement):[],popper:at(le)};var et,We,Qe=function(Be){var _e=_r(Be);return qn.reduce(function(qe,Me){return qe.concat(_e.filter(function(it){return it.phase===Me}))},[])}((et=[].concat(L,fe.options.modifiers),We=et.reduce(function(Be,_e){var qe=Be[_e.name];return Be[_e.name]=qe?Object.assign({},qe,_e,{options:Object.assign({},qe.options,_e.options),data:Object.assign({},qe.data,_e.data)}):_e,Be},{}),Object.keys(We).map(function(Be){return We[Be]})));return fe.orderedModifiers=Qe.filter(function(Be){return Be.enabled}),fe.orderedModifiers.forEach(function(Be){var _e=Be.name,qe=Be.options,Me=qe===void 0?{}:qe,it=Be.effect;if(typeof it=="function"){var yt=it({state:fe,name:_e,instance:Ve,options:Me});$e.push(yt||function(){})}}),Ve.update()},forceUpdate:function(){if(!Pe){var Ue=fe.elements,nt=Ue.reference,et=Ue.popper;if(Yo(nt,et)){fe.rects={reference:ne(nt,jt(et),fe.options.strategy==="fixed"),popper:Ce(et)},fe.reset=!1,fe.placement=fe.options.placement,fe.orderedModifiers.forEach(function(it){return fe.modifiersData[it.name]=Object.assign({},it.data)});for(var We=0;We<fe.orderedModifiers.length;We++)if(fe.reset!==!0){var Qe=fe.orderedModifiers[We],Be=Qe.fn,_e=Qe.options,qe=_e===void 0?{}:_e,Me=Qe.name;typeof Be=="function"&&(fe=Be({state:fe,options:qe,name:Me,instance:Ve})||fe)}else fe.reset=!1,We=-1}}},update:(oe=function(){return new Promise(function(Ue){Ve.forceUpdate(),Ue(fe)})},function(){return xe||(xe=new Promise(function(Ue){Promise.resolve().then(function(){xe=void 0,Ue(oe())})})),xe}),destroy:function(){Ke(),Pe=!0}};if(!Yo(J,le))return Ve;function Ke(){$e.forEach(function(Ue){return Ue()}),$e=[]}return Ve.setOptions(ee).then(function(Ue){!Pe&&ee.onFirstUpdate&&ee.onFirstUpdate(Ue)}),Ve}}var Vr={passive:!0};const Zo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(T){var C=T.state,k=T.instance,L=T.options,z=L.scroll,K=z===void 0||z,J=L.resize,le=J===void 0||J,ee=ve(C.elements.popper),oe=[].concat(C.scrollParents.reference,C.scrollParents.popper);return K&&oe.forEach(function(xe){xe.addEventListener("scroll",k.update,Vr)}),le&&ee.addEventListener("resize",k.update,Vr),function(){K&&oe.forEach(function(xe){xe.removeEventListener("scroll",k.update,Vr)}),le&&ee.removeEventListener("resize",k.update,Vr)}},data:{}};function vn(T){return T.split("-")[0]}function Ln(T){return T.split("-")[1]}function ur(T){return["top","bottom"].indexOf(T)>=0?"x":"y"}function kr(T){var C,k=T.reference,L=T.element,z=T.placement,K=z?vn(z):null,J=z?Ln(z):null,le=k.x+k.width/2-L.width/2,ee=k.y+k.height/2-L.height/2;switch(K){case xt:C={x:le,y:k.y-L.height};break;case ct:C={x:le,y:k.y+k.height};break;case Jt:C={x:k.x+k.width,y:ee};break;case gt:C={x:k.x-L.width,y:ee};break;default:C={x:k.x,y:k.y}}var oe=K?ur(K):null;if(oe!=null){var xe=oe==="y"?"height":"width";switch(J){case bn:C[oe]=C[oe]-(k[xe]/2-L[xe]/2);break;case _n:C[oe]=C[oe]+(k[xe]/2-L[xe]/2)}}return C}const Wr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(T){var C=T.state,k=T.name;C.modifiersData[k]=kr({reference:C.rects.reference,element:C.rects.popper,strategy:"absolute",placement:C.placement})},data:{}};var Qr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Rr(T){var C,k=T.popper,L=T.popperRect,z=T.placement,K=T.variation,J=T.offsets,le=T.position,ee=T.gpuAcceleration,oe=T.adaptive,xe=T.roundOffsets,fe=T.isFixed,$e=J.x,Pe=$e===void 0?0:$e,Ve=J.y,Ke=Ve===void 0?0:Ve,Ue=typeof xe=="function"?xe({x:Pe,y:Ke}):{x:Pe,y:Ke};Pe=Ue.x,Ke=Ue.y;var nt=J.hasOwnProperty("x"),et=J.hasOwnProperty("y"),We=gt,Qe=xt,Be=window;if(oe){var _e=jt(k),qe="clientHeight",Me="clientWidth";_e===ve(k)&&se(_e=Z(k)).position!=="static"&&le==="absolute"&&(qe="scrollHeight",Me="scrollWidth"),_e=_e,(z===xt||(z===gt||z===Jt)&&K===_n)&&(Qe=ct,Ke-=(fe&&_e===Be&&Be.visualViewport?Be.visualViewport.height:_e[qe])-L.height,Ke*=ee?1:-1),z!==gt&&(z!==xt&&z!==ct||K!==_n)||(We=Jt,Pe-=(fe&&_e===Be&&Be.visualViewport?Be.visualViewport.width:_e[Me])-L.width,Pe*=ee?1:-1)}var it,yt=Object.assign({position:le},oe&&Qr),lt=xe===!0?function(At){var rt=At.x,Vt=At.y,Ft=window.devicePixelRatio||1;return{x:Je(rt*Ft)/Ft||0,y:Je(Vt*Ft)/Ft||0}}({x:Pe,y:Ke}):{x:Pe,y:Ke};return Pe=lt.x,Ke=lt.y,ee?Object.assign({},yt,((it={})[Qe]=et?"0":"",it[We]=nt?"0":"",it.transform=(Be.devicePixelRatio||1)<=1?"translate("+Pe+"px, "+Ke+"px)":"translate3d("+Pe+"px, "+Ke+"px, 0)",it)):Object.assign({},yt,((C={})[Qe]=et?Ke+"px":"",C[We]=nt?Pe+"px":"",C.transform="",C))}const Ns={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(T){var C=T.state,k=T.options,L=k.gpuAcceleration,z=L===void 0||L,K=k.adaptive,J=K===void 0||K,le=k.roundOffsets,ee=le===void 0||le,oe={placement:vn(C.placement),variation:Ln(C.placement),popper:C.elements.popper,popperRect:C.rects.popper,gpuAcceleration:z,isFixed:C.options.strategy==="fixed"};C.modifiersData.popperOffsets!=null&&(C.styles.popper=Object.assign({},C.styles.popper,Rr(Object.assign({},oe,{offsets:C.modifiersData.popperOffsets,position:C.options.strategy,adaptive:J,roundOffsets:ee})))),C.modifiersData.arrow!=null&&(C.styles.arrow=Object.assign({},C.styles.arrow,Rr(Object.assign({},oe,{offsets:C.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ee})))),C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-placement":C.placement})},data:{}},F={name:"applyStyles",enabled:!0,phase:"write",fn:function(T){var C=T.state;Object.keys(C.elements).forEach(function(k){var L=C.styles[k]||{},z=C.attributes[k]||{},K=C.elements[k];we(K)&&B(K)&&(Object.assign(K.style,L),Object.keys(z).forEach(function(J){var le=z[J];le===!1?K.removeAttribute(J):K.setAttribute(J,le===!0?"":le)}))})},effect:function(T){var C=T.state,k={popper:{position:C.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(C.elements.popper.style,k.popper),C.styles=k,C.elements.arrow&&Object.assign(C.elements.arrow.style,k.arrow),function(){Object.keys(C.elements).forEach(function(L){var z=C.elements[L],K=C.attributes[L]||{},J=Object.keys(C.styles.hasOwnProperty(L)?C.styles[L]:k[L]).reduce(function(le,ee){return le[ee]="",le},{});we(z)&&B(z)&&(Object.assign(z.style,J),Object.keys(K).forEach(function(le){z.removeAttribute(le)}))})}},requires:["computeStyles"]},re={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(T){var C=T.state,k=T.options,L=T.name,z=k.offset,K=z===void 0?[0,0]:z,J=cr.reduce(function(xe,fe){return xe[fe]=function($e,Pe,Ve){var Ke=vn($e),Ue=[gt,xt].indexOf(Ke)>=0?-1:1,nt=typeof Ve=="function"?Ve(Object.assign({},Pe,{placement:$e})):Ve,et=nt[0],We=nt[1];return et=et||0,We=(We||0)*Ue,[gt,Jt].indexOf(Ke)>=0?{x:We,y:et}:{x:et,y:We}}(fe,C.rects,K),xe},{}),le=J[C.placement],ee=le.x,oe=le.y;C.modifiersData.popperOffsets!=null&&(C.modifiersData.popperOffsets.x+=ee,C.modifiersData.popperOffsets.y+=oe),C.modifiersData[L]=J}};var Se={left:"right",right:"left",bottom:"top",top:"bottom"};function De(T){return T.replace(/left|right|bottom|top/g,function(C){return Se[C]})}var be={start:"end",end:"start"};function Te(T){return T.replace(/start|end/g,function(C){return be[C]})}function He(T,C){var k=C.getRootNode&&C.getRootNode();if(T.contains(C))return!0;if(k&&ze(k)){var L=C;do{if(L&&T.isSameNode(L))return!0;L=L.parentNode||L.host}while(L)}return!1}function Ie(T){return Object.assign({},T,{left:T.x,top:T.y,right:T.x+T.width,bottom:T.y+T.height})}function Fe(T,C){return C===Sr?Ie(function(k){var L=ve(k),z=Z(k),K=L.visualViewport,J=z.clientWidth,le=z.clientHeight,ee=0,oe=0;return K&&(J=K.width,le=K.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(ee=K.offsetLeft,oe=K.offsetTop)),{width:J,height:le,x:ee+de(k),y:oe}}(T)):ie(C)?function(k){var L=pt(k);return L.top=L.top+k.clientTop,L.left=L.left+k.clientLeft,L.bottom=L.top+k.clientHeight,L.right=L.left+k.clientWidth,L.width=k.clientWidth,L.height=k.clientHeight,L.x=L.left,L.y=L.top,L}(C):Ie(function(k){var L,z=Z(k),K=A(k),J=(L=k.ownerDocument)==null?void 0:L.body,le=Xe(z.scrollWidth,z.clientWidth,J?J.scrollWidth:0,J?J.clientWidth:0),ee=Xe(z.scrollHeight,z.clientHeight,J?J.scrollHeight:0,J?J.clientHeight:0),oe=-K.scrollLeft+de(k),xe=-K.scrollTop;return se(J||z).direction==="rtl"&&(oe+=Xe(z.clientWidth,J?J.clientWidth:0)-le),{width:le,height:ee,x:oe,y:xe}}(Z(T)))}function st(T){return Object.assign({},{top:0,right:0,bottom:0,left:0},T)}function It(T,C){return C.reduce(function(k,L){return k[L]=T,k},{})}function ht(T,C){C===void 0&&(C={});var k=C,L=k.placement,z=L===void 0?T.placement:L,K=k.boundary,J=K===void 0?"clippingParents":K,le=k.rootBoundary,ee=le===void 0?Sr:le,oe=k.elementContext,xe=oe===void 0?un:oe,fe=k.altBoundary,$e=fe!==void 0&&fe,Pe=k.padding,Ve=Pe===void 0?0:Pe,Ke=st(typeof Ve!="number"?Ve:It(Ve,cn)),Ue=xe===un?"reference":un,nt=T.rects.popper,et=T.elements[$e?Ue:xe],We=function(lt,At,rt){var Vt=At==="clippingParents"?function(mt){var Ct=at(Oe(mt)),Ot=["absolute","fixed"].indexOf(se(mt).position)>=0&&we(mt)?jt(mt):mt;return ie(Ot)?Ct.filter(function(Et){return ie(Et)&&He(Et,Ot)&&B(Et)!=="body"}):[]}(lt):[].concat(At),Ft=[].concat(Vt,[rt]),Rt=Ft[0],bt=Ft.reduce(function(mt,Ct){var Ot=Fe(lt,Ct);return mt.top=Xe(Ot.top,mt.top),mt.right=Le(Ot.right,mt.right),mt.bottom=Le(Ot.bottom,mt.bottom),mt.left=Xe(Ot.left,mt.left),mt},Fe(lt,Rt));return bt.width=bt.right-bt.left,bt.height=bt.bottom-bt.top,bt.x=bt.left,bt.y=bt.top,bt}(ie(et)?et:et.contextElement||Z(T.elements.popper),J,ee),Qe=pt(T.elements.reference),Be=kr({reference:Qe,element:nt,strategy:"absolute",placement:z}),_e=Ie(Object.assign({},nt,Be)),qe=xe===un?_e:Qe,Me={top:We.top-qe.top+Ke.top,bottom:qe.bottom-We.bottom+Ke.bottom,left:We.left-qe.left+Ke.left,right:qe.right-We.right+Ke.right},it=T.modifiersData.offset;if(xe===un&&it){var yt=it[z];Object.keys(Me).forEach(function(lt){var At=[Jt,ct].indexOf(lt)>=0?1:-1,rt=[xt,ct].indexOf(lt)>=0?"y":"x";Me[lt]+=yt[rt]*At})}return Me}const Dt={name:"flip",enabled:!0,phase:"main",fn:function(T){var C=T.state,k=T.options,L=T.name;if(!C.modifiersData[L]._skip){for(var z=k.mainAxis,K=z===void 0||z,J=k.altAxis,le=J===void 0||J,ee=k.fallbackPlacements,oe=k.padding,xe=k.boundary,fe=k.rootBoundary,$e=k.altBoundary,Pe=k.flipVariations,Ve=Pe===void 0||Pe,Ke=k.allowedAutoPlacements,Ue=C.options.placement,nt=vn(Ue),et=ee||(nt!==Ue&&Ve?function(Et){if(vn(Et)===Tn)return[];var Pt=De(Et);return[Te(Et),Pt,Te(Pt)]}(Ue):[De(Ue)]),We=[Ue].concat(et).reduce(function(Et,Pt){return Et.concat(vn(Pt)===Tn?function(on,wn){wn===void 0&&(wn={});var pn=wn,Nr=pn.placement,Re=pn.boundary,Xr=pn.rootBoundary,Us=pn.padding,qs=pn.flipVariations,vo=pn.allowedAutoPlacements,Hs=vo===void 0?cr:vo,Gr=Ln(Nr),za=Gr?qs?Tr:Tr.filter(function(Wn){return Ln(Wn)===Gr}):cn,wo=za.filter(function(Wn){return Hs.indexOf(Wn)>=0});wo.length===0&&(wo=za);var Yr=wo.reduce(function(Wn,Zr){return Wn[Zr]=ht(on,{placement:Zr,boundary:Re,rootBoundary:Xr,padding:Us})[vn(Zr)],Wn},{});return Object.keys(Yr).sort(function(Wn,Zr){return Yr[Wn]-Yr[Zr]})}(C,{placement:Pt,boundary:xe,rootBoundary:fe,padding:oe,flipVariations:Ve,allowedAutoPlacements:Ke}):Pt)},[]),Qe=C.rects.reference,Be=C.rects.popper,_e=new Map,qe=!0,Me=We[0],it=0;it<We.length;it++){var yt=We[it],lt=vn(yt),At=Ln(yt)===bn,rt=[xt,ct].indexOf(lt)>=0,Vt=rt?"width":"height",Ft=ht(C,{placement:yt,boundary:xe,rootBoundary:fe,altBoundary:$e,padding:oe}),Rt=rt?At?Jt:gt:At?ct:xt;Qe[Vt]>Be[Vt]&&(Rt=De(Rt));var bt=De(Rt),mt=[];if(K&&mt.push(Ft[lt]<=0),le&&mt.push(Ft[Rt]<=0,Ft[bt]<=0),mt.every(function(Et){return Et})){Me=yt,qe=!1;break}_e.set(yt,mt)}if(qe)for(var Ct=function(Et){var Pt=We.find(function(on){var wn=_e.get(on);if(wn)return wn.slice(0,Et).every(function(pn){return pn})});if(Pt)return Me=Pt,"break"},Ot=Ve?3:1;Ot>0&&Ct(Ot)!=="break";Ot--);C.placement!==Me&&(C.modifiersData[L]._skip=!0,C.placement=Me,C.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function kt(T,C,k){return Xe(T,Le(C,k))}const tn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(T){var C=T.state,k=T.options,L=T.name,z=k.mainAxis,K=z===void 0||z,J=k.altAxis,le=J!==void 0&&J,ee=k.boundary,oe=k.rootBoundary,xe=k.altBoundary,fe=k.padding,$e=k.tether,Pe=$e===void 0||$e,Ve=k.tetherOffset,Ke=Ve===void 0?0:Ve,Ue=ht(C,{boundary:ee,rootBoundary:oe,padding:fe,altBoundary:xe}),nt=vn(C.placement),et=Ln(C.placement),We=!et,Qe=ur(nt),Be=Qe==="x"?"y":"x",_e=C.modifiersData.popperOffsets,qe=C.rects.reference,Me=C.rects.popper,it=typeof Ke=="function"?Ke(Object.assign({},C.rects,{placement:C.placement})):Ke,yt=typeof it=="number"?{mainAxis:it,altAxis:it}:Object.assign({mainAxis:0,altAxis:0},it),lt=C.modifiersData.offset?C.modifiersData.offset[C.placement]:null,At={x:0,y:0};if(_e){if(K){var rt,Vt=Qe==="y"?xt:gt,Ft=Qe==="y"?ct:Jt,Rt=Qe==="y"?"height":"width",bt=_e[Qe],mt=bt+Ue[Vt],Ct=bt-Ue[Ft],Ot=Pe?-Me[Rt]/2:0,Et=et===bn?qe[Rt]:Me[Rt],Pt=et===bn?-Me[Rt]:-qe[Rt],on=C.elements.arrow,wn=Pe&&on?Ce(on):{width:0,height:0},pn=C.modifiersData["arrow#persistent"]?C.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Nr=pn[Vt],Re=pn[Ft],Xr=kt(0,qe[Rt],wn[Rt]),Us=We?qe[Rt]/2-Ot-Xr-Nr-yt.mainAxis:Et-Xr-Nr-yt.mainAxis,qs=We?-qe[Rt]/2+Ot+Xr+Re+yt.mainAxis:Pt+Xr+Re+yt.mainAxis,vo=C.elements.arrow&&jt(C.elements.arrow),Hs=vo?Qe==="y"?vo.clientTop||0:vo.clientLeft||0:0,Gr=(rt=lt?.[Qe])!=null?rt:0,za=bt+qs-Gr,wo=kt(Pe?Le(mt,bt+Us-Gr-Hs):mt,bt,Pe?Xe(Ct,za):Ct);_e[Qe]=wo,At[Qe]=wo-bt}if(le){var Yr,Wn=Qe==="x"?xt:gt,Zr=Qe==="x"?ct:Jt,Jr=_e[Be],Fa=Be==="y"?"height":"width",ul=Jr+Ue[Wn],$a=Jr-Ue[Zr],eo=[xt,gt].indexOf(nt)!==-1,dl=(Yr=lt?.[Be])!=null?Yr:0,Vs=eo?ul:Jr-qe[Fa]-Me[Fa]-dl+yt.altAxis,Ws=eo?Jr+qe[Fa]+Me[Fa]-dl-yt.altAxis:$a,Qs=Pe&&eo?function(fl,pl,Lr){var hl=kt(fl,pl,Lr);return hl>Lr?Lr:hl}(Vs,Jr,Ws):kt(Pe?Vs:ul,Jr,Pe?Ws:$a);_e[Be]=Qs,At[Be]=Qs-Jr}C.modifiersData[L]=At}},requiresIfExists:["offset"]},wt={name:"arrow",enabled:!0,phase:"main",fn:function(T){var C,k=T.state,L=T.name,z=T.options,K=k.elements.arrow,J=k.modifiersData.popperOffsets,le=vn(k.placement),ee=ur(le),oe=[gt,Jt].indexOf(le)>=0?"height":"width";if(K&&J){var xe=function(Me,it){return st(typeof(Me=typeof Me=="function"?Me(Object.assign({},it.rects,{placement:it.placement})):Me)!="number"?Me:It(Me,cn))}(z.padding,k),fe=Ce(K),$e=ee==="y"?xt:gt,Pe=ee==="y"?ct:Jt,Ve=k.rects.reference[oe]+k.rects.reference[ee]-J[ee]-k.rects.popper[oe],Ke=J[ee]-k.rects.reference[ee],Ue=jt(K),nt=Ue?ee==="y"?Ue.clientHeight||0:Ue.clientWidth||0:0,et=Ve/2-Ke/2,We=xe[$e],Qe=nt-fe[oe]-xe[Pe],Be=nt/2-fe[oe]/2+et,_e=kt(We,Be,Qe),qe=ee;k.modifiersData[L]=((C={})[qe]=_e,C.centerOffset=_e-Be,C)}},effect:function(T){var C=T.state,k=T.options.element,L=k===void 0?"[data-popper-arrow]":k;L!=null&&(typeof L!="string"||(L=C.elements.popper.querySelector(L)))&&He(C.elements.popper,L)&&(C.elements.arrow=L)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nn(T,C,k){return k===void 0&&(k={x:0,y:0}),{top:T.top-C.height-k.y,right:T.right-C.width+k.x,bottom:T.bottom-C.height+k.y,left:T.left-C.width-k.x}}function dn(T){return[xt,Jt,ct,gt].some(function(C){return T[C]>=0})}var Dn=ja({defaultModifiers:[Zo,Wr,Ns,F,re,Dt,tn,wt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(T){var C=T.state,k=T.name,L=C.rects.reference,z=C.rects.popper,K=C.modifiersData.preventOverflow,J=ht(C,{elementContext:"reference"}),le=ht(C,{altBoundary:!0}),ee=nn(J,L),oe=nn(le,z,K),xe=dn(ee),fe=dn(oe);C.modifiersData[k]={referenceClippingOffsets:ee,popperEscapeOffsets:oe,isReferenceHidden:xe,hasPopperEscaped:fe},C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-reference-hidden":xe,"data-popper-escaped":fe})}}]}),dr=s(590),kn=s.n(dr),Hn=[],fn=function(){},Rn=function(){return Promise.resolve(null)},ho=[];function Ls(T){var C=T.placement,k=C===void 0?"bottom":C,L=T.strategy,z=L===void 0?"absolute":L,K=T.modifiers,J=K===void 0?ho:K,le=T.referenceElement,ee=T.onFirstUpdate,oe=T.innerRef,xe=T.children,fe=f.useContext(I),$e=f.useState(null),Pe=$e[0],Ve=$e[1],Ke=f.useState(null),Ue=Ke[0],nt=Ke[1];f.useEffect(function(){ge(oe,Pe)},[oe,Pe]);var et=f.useMemo(function(){return{placement:k,strategy:z,onFirstUpdate:ee,modifiers:[].concat(J,[{name:"arrow",enabled:Ue!=null,options:{element:Ue}}])}},[k,z,ee,J,Ue]),We=function(it,yt,lt){lt===void 0&&(lt={});var At=f.useRef(null),rt={onFirstUpdate:lt.onFirstUpdate,placement:lt.placement||"bottom",strategy:lt.strategy||"absolute",modifiers:lt.modifiers||Hn},Vt=f.useState({styles:{popper:{position:rt.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),Ft=Vt[0],Rt=Vt[1],bt=f.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(Ot){var Et=Ot.state,Pt=Object.keys(Et.elements);Rt({styles:ye(Pt.map(function(on){return[on,Et.styles[on]||{}]})),attributes:ye(Pt.map(function(on){return[on,Et.attributes[on]]}))})},requires:["computeStyles"]}},[]),mt=f.useMemo(function(){var Ot={onFirstUpdate:rt.onFirstUpdate,placement:rt.placement,strategy:rt.strategy,modifiers:[].concat(rt.modifiers,[bt,{name:"applyStyles",enabled:!1}])};return kn()(At.current,Ot)?At.current||Ot:(At.current=Ot,Ot)},[rt.onFirstUpdate,rt.placement,rt.strategy,rt.modifiers,bt]),Ct=f.useRef();return G(function(){Ct.current&&Ct.current.setOptions(mt)},[mt]),G(function(){if(it!=null&&yt!=null){var Ot=(lt.createPopper||Dn)(it,yt,mt);return Ct.current=Ot,function(){Ot.destroy(),Ct.current=null}}},[it,yt,lt.createPopper]),{state:Ct.current?Ct.current.state:null,styles:Ft.styles,attributes:Ft.attributes,update:Ct.current?Ct.current.update:null,forceUpdate:Ct.current?Ct.current.forceUpdate:null}}(le||fe,Pe,et),Qe=We.state,Be=We.styles,_e=We.forceUpdate,qe=We.update,Me=f.useMemo(function(){return{ref:Ve,style:Be.popper,placement:Qe?Qe.placement:k,hasPopperEscaped:Qe&&Qe.modifiersData.hide?Qe.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:Qe&&Qe.modifiersData.hide?Qe.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:Be.arrow,ref:nt},forceUpdate:_e||fn,update:qe||Rn}},[Ve,nt,k,Qe,Be,qe,_e]);return ue(xe)(Me)}var pu=s(473),hu=s.n(pu);function Kr(T){var C=T.children,k=T.innerRef,L=f.useContext(P),z=f.useCallback(function(K){ge(k,K),he(L,K)},[k,L]);return f.useEffect(function(){return function(){return ge(k,null)}}),f.useEffect(function(){hu()(!!L,"`Reference` should not be used outside of a `Manager` component.")},[L]),ue(C)({ref:z})}var al=s(379),Aa=s.n(al),Ds=s(717);Aa()(Ds.Z,{insert:"head",singleton:!1});const ft=Ds.Z.locals||{};function Ia(T,C){(C==null||C>T.length)&&(C=T.length);for(var k=0,L=new Array(C);k<C;k++)L[k]=T[k];return L}var sl=function(T){var C=T.className,k=T.tally;return f.createElement("div",{className:N()(ft.tally,C)},f.createElement("div",{className:ft.tallyCounts},f.createElement(p.SectionTallyCount,{type:"introduction",count:k&&k.introduction&&k.introduction.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"methods",count:k&&k.methods&&k.methods.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"results",count:k&&k.results&&k.results.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"discussion",count:k&&k.discussion&&k.discussion.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"other",count:k&&k.other&&k.other.toLocaleString()||0,showLabels:!0})))},il=function(T){var C=T.className,k=T.tally,L=T.notices;return f.createElement("div",{className:N()(ft.tally,C)},L&&L.length>0&&f.createElement("div",{className:ft.notices},L.map(function(z,K){return f.createElement("div",{key:"".concat(K,"-").concat(z),className:ft.notice},f.createElement("div",{className:ft.tallyCounts},z==="Retracted"||z==="Withdrawn"?f.createElement(p.Count,{type:"retractions"}):f.createElement(p.Count,{type:"notices"})),f.createElement("div",{className:ft.noticeLabel},z==="Retracted"||z==="Withdrawn"?f.createElement("span",{className:N()(ft.retractionsCopy,ft[z])},"This paper has been ",z.toLowerCase()):f.createElement("span",{className:N()(ft.noticeCopy,ft[z])},"This paper ",z.toLowerCase())))})),f.createElement("div",{className:ft.tallyCounts},f.createElement(p.Count,{type:"publications",count:k&&k.citingPublications?k.citingPublications.toLocaleString():0,className:ft.tallyCount}),f.createElement(p.Count,{type:"supporting",count:k&&k.supporting?k.supporting.toLocaleString():0,className:ft.tallyCount}),f.createElement(p.Count,{type:"mentioning",count:k&&k.mentioning?k.mentioning.toLocaleString():0,className:ft.tallyCount}),f.createElement(p.Count,{type:"contrasting",count:k&&k.contradicting?k.contradicting.toLocaleString():0,className:ft.tallyCount})),f.createElement("div",{className:ft.labels},f.createElement("span",{className:ft.label},"Citing Publications"),f.createElement("span",{className:ft.label},"Supporting"),f.createElement("span",{className:ft.label},"Mentioning"),f.createElement("span",{className:ft.label},"Contrasting")))},Ms=function(T){var C=T.className,k=T.href,L=T.children;return f.createElement("a",{className:N()(ft.link,C),href:k,target:"_blank",rel:"noopener noreferrer"},L)},Mn=function(T){var C=T.className;return f.createElement("div",{className:C},f.createElement("p",null,"See how this article has been cited at ",f.createElement(Ms,{href:"https://scite.ai"},"scite.ai")),f.createElement("p",{className:ft.message},"scite shows how a scientific paper has been cited by providing the context of the citation, a classification describing whether it supports, mentions, or contrasts the cited claim, and a label indicating in which section the citation was made"))},jr=function(T){var C=T.tally,k=T.notices;return f.createElement("div",{className:ft.tooltipContent},f.createElement("img",{className:ft.logo,src:"https://cdn.scite.ai/assets/images/logo.svg"}),f.createElement("span",{className:ft.slogan},"Smart Citations"),f.createElement(il,{tally:C,notices:k}),C&&f.createElement("a",{className:ft.button,href:"https://scite.ai/reports/".concat(C.doi),target:"_blank",rel:"noopener noreferrer"},"View Citations"),f.createElement(Mn,null))},Ar=function(T){var C=T.tally;return f.createElement("div",null,f.createElement("img",{className:ft.logo,src:"https://cdn.scite.ai/assets/images/logo.svg"}),f.createElement("span",{className:ft.slogan},"Cited in Sections"),f.createElement(sl,{tally:C}),C&&f.createElement("a",{className:ft.button,href:"https://scite.ai/reports/".concat(C.doi),target:"_blank",rel:"noopener noreferrer"},"View Citations"),f.createElement(Mn,null))},Ir=function(T){var C,k=T.show,L=T.doi,z=T.tally,K=T.notices,J=T.placement,le=T.flip,ee=T.slide,oe=T.handleMouseEnter,xe=T.handleMouseLeave,fe=T.tallyType;(0,f.useEffect)(function(){C&&setTimeout(C)},[z]);var $e=function(){window.open("https://scite.ai/reports/".concat(L))};return f.createElement(Ls,{placement:J,strategy:"fixed",modifiers:[{name:"preventOverflow",options:{mainAxis:!1}},{name:"offset",options:{offset:[ee||0,12]}},{name:"flip",options:le?{}:{fallbackPlacements:[]}}]},function(Pe){var Ve,Ke,Ue,nt=Pe.ref,et=Pe.style,We=Pe.placement,Qe=(Pe.arrowProps,Pe.update);return C=Qe,f.createElement("div",{ref:nt,className:N()(ft.tooltip,(Ve={},Ke=ft.tooltipShow,Ue=k,Ke in Ve?Object.defineProperty(Ve,Ke,{value:Ue,enumerable:!0,configurable:!0,writable:!0}):Ve[Ke]=Ue,Ve)),style:et,"data-placement":We,onMouseEnter:oe,onMouseLeave:xe,onClick:$e},fe==="smart_citations"&&f.createElement(jr,{tally:z,notices:K}),fe==="sections"&&f.createElement(Ar,{tally:z}))})};const Pr=function(T){var C,k,L,z,K=T.doi,J=T.tally,le=T.notices,ee=T.showZero,oe=T.placement,xe=oe===void 0?"top":oe,fe=T.flip,$e=T.slide,Pe=$e===void 0?0:$e,Ve=T.children,Ke=T.tallyType,Ue=Ke===void 0?"smart_citations":Ke,nt=(L=(0,f.useState)(!1),z=2,function(_e){if(Array.isArray(_e))return _e}(L)||function(_e,qe){var Me=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(Me!=null){var it,yt,lt=[],At=!0,rt=!1;try{for(Me=Me.call(_e);!(At=(it=Me.next()).done)&&(lt.push(it.value),!qe||lt.length!==qe);At=!0);}catch(Vt){rt=!0,yt=Vt}finally{try{At||Me.return==null||Me.return()}finally{if(rt)throw yt}}return lt}}(L,z)||function(_e,qe){if(_e){if(typeof _e=="string")return Ia(_e,qe);var Me=Object.prototype.toString.call(_e).slice(8,-1);return Me==="Object"&&_e.constructor&&(Me=_e.constructor.name),Me==="Map"||Me==="Set"?Array.from(Me):Me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Me)?Ia(_e,qe):void 0}}(L,z)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),et=nt[0],We=nt[1],Qe=function(){xe!=="none"&&(C&&clearTimeout(C),k=setTimeout(function(){We(!0)},500))},Be=function(){xe!=="none"&&(k&&clearTimeout(k),C=setTimeout(function(){We(!1)},300))};return xe==="none"?Ve:f.createElement($,null,f.createElement(Kr,null,function(_e){var qe=_e.ref;return f.createElement("div",{className:ft.reference,ref:qe,onMouseEnter:Qe,onMouseLeave:Be},Ve)}),f.createElement(Ir,{show:et&&!(J&&J.total===0&&!ee),doi:K,tally:J,notices:le,placement:xe,flip:fe,slide:Pe,handleMouseEnter:Qe,handleMouseLeave:Be,tallyType:Ue}))};var mo=s(180);Aa()(mo.Z,{insert:"head",singleton:!1}),mo.Z.locals;var go=s(696);function Pa(T,C){(C==null||C>T.length)&&(C=T.length);for(var k=0,L=new Array(C);k<C;k++)L[k]=T[k];return L}function Na(T,C,k,L,z,K,J){try{var le=T[K](J),ee=le.value}catch(oe){return void k(oe)}le.done?C(ee):Promise.resolve(ee).then(L,z)}function Bs(T){return function(){var C=this,k=arguments;return new Promise(function(L,z){var K=T.apply(C,k);function J(ee){Na(K,L,z,J,le,"next",ee)}function le(ee){Na(K,L,z,J,le,"throw",ee)}J(void 0)})}}function Jo(T,C,k){return C in T?Object.defineProperty(T,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):T[C]=k,T}function zs(T){for(var C=1;C<arguments.length;C++){var k=arguments[C]!=null?arguments[C]:{},L=Object.keys(k);typeof Object.getOwnPropertySymbols=="function"&&(L=L.concat(Object.getOwnPropertySymbols(k).filter(function(z){return Object.getOwnPropertyDescriptor(k,z).enumerable}))),L.forEach(function(z){Jo(T,z,k[z])})}return T}function La(T,C){return function(k){if(Array.isArray(k))return k}(T)||function(k,L){var z=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(z!=null){var K,J,le=[],ee=!0,oe=!1;try{for(z=z.call(k);!(ee=(K=z.next()).done)&&(le.push(K.value),!L||le.length!==L);ee=!0);}catch(xe){oe=!0,J=xe}finally{try{ee||z.return==null||z.return()}finally{if(oe)throw J}}return le}}(T,C)||ll(T,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fs(T){return function(C){if(Array.isArray(C))return Pa(C)}(T)||function(C){if(typeof Symbol<"u"&&C[Symbol.iterator]!=null||C["@@iterator"]!=null)return Array.from(C)}(T)||ll(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ll(T,C){if(T){if(typeof T=="string")return Pa(T,C);var k=Object.prototype.toString.call(T).slice(8,-1);return k==="Object"&&T.constructor&&(k=T.constructor.name),k==="Map"||k==="Set"?Array.from(k):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?Pa(T,C):void 0}}Aa()(go.Z,{insert:"head",singleton:!1}),go.Z.locals;var Vn=500,ea=window.location.hostname;function yo(T){var C=T.dataset,k={},L=ta(T);return L&&(k.doi=L),C.tallyShow?k.tallyShow=C.tallyShow==="true":k.tallyShow=!0,C.sectionTallyShow&&(k.sectionTallyShow=C.sectionTallyShow==="true"),C.showLogo&&(k.showLogo=C.showLogo==="true"),C.chartType&&(k.chartType=C.chartType),C.showZero&&(k.showZero=C.showZero==="true"),C.forceCollapse&&(k.forceCollapse=C.forceCollapse==="true"),C.layout&&(k.horizontal=C.layout==="horizontal"),C.sectionTallyLayout&&(k.horizontalSectionTally=C.sectionTallyLayout==="horizontal"),C.tooltipPlacement&&(k.placement=C.tooltipPlacement),C.tooltipSlide&&(k.slide=Number(C.tooltipSlide)),C.showLabels&&(k.showLabels=C.showLabels==="true"),C.targetEl&&(k.targetEl=C.targetEl),C.insertBefore&&(k.insertBefore=C.insertBefore==="true"),C.small&&(k.small=C.small==="true"),C.campaign&&(k.campaign=C.campaign),C.autologin&&(k.autologin=C.autologin),C.rewardfulId&&(k.rewardfulID=C.rewardfulId),k}function bo(T){var C,k=[],L=[],z=!0,K=!1,J=void 0;try{for(var le,ee=T[Symbol.iterator]();!(z=(le=ee.next()).done);z=!0){var oe=le.value,xe=ta(oe);"tallyShow"in(C=oe.dataset)&&C.tallyShow!==null&&C.tallyShow!=="true"||k.push(xe),oe.dataset.sectionTallyShow==="true"&&L.push(xe)}}catch(fe){K=!0,J=fe}finally{try{z||ee.return==null||ee.return()}finally{if(K)throw J}}return{tallyDOIs:Fs(new Set(k)),sectionTallyDOIs:Fs(new Set(L))}}function ta(T){var C,k=T.dataset;if(k.doi&&/^meta:/.test(k.doi)){var L=k.doi.split("meta:").join(""),z="meta[name='".concat(L,"']"),K=document.querySelector(z);K?C=K.getAttribute("content"):console.warn('Scite badge could not find meta tag with name="'.concat(L,'"'))}else k.doi&&(C=k.doi);return C&&C.toLowerCase().trim()}function Da(T,C,k,L){var z=yo(T),K=z.tallyShow||!1,J=z.sectionTallyShow||!1,le=K&&J,ee=z.doi,oe=z.showZero||!1,xe=z.forceCollapse||!1,fe=z.horizontal||!1,$e=z.placement||"top",Pe=z.showLabels||!1,Ve=z.slide||0,Ke=z.small||!1,Ue=z.campaign||void 0,nt=z.autologin||void 0,et=z.rewardfulID||void 0,We=z.showLogo||!0,Qe=z.chartType||null,Be=z.horizontalSectionTally,_e=!z.placement;try{(0,m.unmountComponentAtNode)(T)}catch{console.warn("Scite badge: unmounting component on another react DOM")}le?(0,m.render)(f.createElement(f.Fragment,null,f.createElement("div",{style:{display:"inline-block",marginBottom:"4px"}},f.createElement(Pr,{doi:ee,tally:C,showZero:oe,placement:$e,flip:_e,slide:Ve,notices:k},f.createElement(p.Tally,{tally:C,horizontal:fe,showZero:oe,forceCollapse:xe,showLabels:Pe,notices:k,small:Ke,source:ea,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,showLogo:We}))),f.createElement("div",null,f.createElement(Pr,{doi:ee,tally:L,showZero:oe,placement:$e,flip:_e,slide:Ve,tallyType:"sections"},f.createElement(p.SectionTally,{tally:L,horizontal:Be,showZero:oe,forceCollapse:xe,showLabels:Pe,small:Ke,source:ea,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,chartType:Qe,showLogo:!1})))),T):K?(0,m.render)(f.createElement(Pr,{doi:ee,tally:C,showZero:oe,placement:$e,flip:_e,slide:Ve,notices:k},f.createElement(p.Tally,{tally:C,horizontal:fe,showZero:oe,forceCollapse:xe,showLabels:Pe,notices:k,small:Ke,source:ea,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,showLogo:We})),T):J&&(0,m.render)(f.createElement(Pr,{doi:ee,tally:L,showZero:oe,placement:$e,flip:_e,slide:Ve,tallyType:"sections"},f.createElement(p.SectionTally,{tally:L,horizontal:Be,showZero:oe,forceCollapse:xe,showLabels:Pe,small:Ke,source:ea,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,chartType:Qe,showLogo:We})),T)}function na(T){var C=yo(T),k=C.targetEl,L=C.insertBefore,z=document.querySelector(k),K=document.createElement("div");K.className="scite-badge";var J=Object.keys(T.dataset),le=!0,ee=!1,oe=void 0;try{for(var xe,fe=J[Symbol.iterator]();!(le=(xe=fe.next()).done);le=!0){var $e=xe.value;K.dataset[$e]=T.dataset[$e]}}catch(Pe){ee=!0,oe=Pe}finally{try{le||fe.return==null||fe.return()}finally{if(ee)throw oe}}return z||console.warn("Scite badge: could not find element to insert badge wrapper into"),L?z.parentNode.insertBefore(K,z):z.appendChild(K),K}function Ma(){return Ba.apply(this,arguments)}function Ba(){return Ba=Bs(u().mark(function T(){var C,k,L,z,K,J,le,ee,oe,xe,fe,$e,Pe,Ve,Ke,Ue,nt,et,We,Qe,Be,_e,qe,Me,it,yt,lt,At,rt,Vt,Ft,Rt,bt,mt,Ct,Ot,Et,Pt,on,wn,pn,Nr=arguments;return u().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(C=(Nr.length>0&&Nr[0]!==void 0?Nr[0]:{}).forceReload,document.body){Re.next=3;break}return Re.abrupt("return",[]);case 3:k=document.querySelectorAll(".scite-badge-config"),L=!0,z=!1,K=void 0,Re.prev=5,J=k[Symbol.iterator]();case 7:if(L=(le=J.next()).done){Re.next=16;break}if((ee=le.value).dataset.injected!=="true"){Re.next=11;break}return Re.abrupt("continue",13);case 11:na(ee),ee.dataset.injected="true";case 13:L=!0,Re.next=7;break;case 16:Re.next=22;break;case 18:Re.prev=18,Re.t0=Re.catch(5),z=!0,K=Re.t0;case 22:Re.prev=22,Re.prev=23,L||J.return==null||J.return();case 25:if(Re.prev=25,!z){Re.next=28;break}throw K;case 28:return Re.finish(25);case 29:return Re.finish(22);case 30:oe=document.querySelectorAll(".scite-badge"),xe=[],fe=!0,$e=!1,Pe=void 0,Re.prev=33,Ve=oe[Symbol.iterator]();case 35:if(fe=(Ke=Ve.next()).done){Re.next=43;break}if((Ue=Ke.value).dataset.fetched!=="true"||C){Re.next=39;break}return Re.abrupt("continue",40);case 39:xe.push(Ue);case 40:fe=!0,Re.next=35;break;case 43:Re.next=49;break;case 45:Re.prev=45,Re.t1=Re.catch(33),$e=!0,Pe=Re.t1;case 49:Re.prev=49,Re.prev=50,fe||Ve.return==null||Ve.return();case 52:if(Re.prev=52,!$e){Re.next=55;break}throw Pe;case 55:return Re.finish(52);case 56:return Re.finish(49);case 57:if(nt=bo(xe),et=nt.tallyDOIs,We=nt.sectionTallyDOIs,et.length!==0||We.length!==0){Re.next=60;break}return Re.abrupt("return",oe);case 60:Qe=Math.max(Math.ceil(et.length/Vn),Math.ceil(We.length/Vn)),Be={},_e={},qe={},Me=0;case 65:if(!(Me<Qe)){Re.next=100;break}return it=et.slice(Me*Vn,(Me+1)*Vn),yt=We.slice(Me*Vn,(Me+1)*Vn),Re.t2=La,Re.next=71,Promise.all([D(it),M(it),W(yt)]);case 71:for(Re.t3=Re.sent,lt=(0,Re.t2)(Re.t3,3),At=lt[0].tallies,rt=lt[1].notices,Vt=lt[2],Ft=Vt.tallies,Be=zs({},Be,At),_e=zs({},_e,rt),qe=zs({},qe,Ft),Rt=!0,bt=!1,mt=void 0,Re.prev=81,Ct=xe[Symbol.iterator]();!(Rt=(Ot=Ct.next()).done);Rt=!0)Et=Ot.value,(Pt=ta(Et))in Be||Pt in qe?(on=Pt in Be?Be[Pt]:{total:0,citingPublications:0},wn=Pt in Be?rt[Pt]:{},pn=Pt in qe?qe[Pt]:{},Da(Et,on,wn,pn)):Da(Et,{total:0,citingPublications:0},{},{}),Et.dataset.fetched="true";Re.next=89;break;case 85:Re.prev=85,Re.t4=Re.catch(81),bt=!0,mt=Re.t4;case 89:Re.prev=89,Re.prev=90,Rt||Ct.return==null||Ct.return();case 92:if(Re.prev=92,!bt){Re.next=95;break}throw mt;case 95:return Re.finish(92);case 96:return Re.finish(89);case 97:Me++,Re.next=65;break;case 100:return Re.abrupt("return",oe);case 101:case"end":return Re.stop()}},T,null,[[5,18,22,30],[23,,25,29],[33,45,49,57],[50,,52,56],[81,85,89,97],[90,,92,96]])})),Ba.apply(this,arguments)}function cl(){return $s.apply(this,arguments)}function $s(){return($s=Bs(u().mark(function T(){return u().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Ma();case 2:C.sent.length===0&&window.addEventListener("load",Ma);case 4:case"end":return C.stop()}},T)}))).apply(this,arguments)}})(),i})())})(Hv);var pk=Hv.exports;const hk=window.React.memo,mk=window.React.useEffect,gk=window.React.useRef,Vv=hk(function(e){const{doi:t,layout:o="horizontal",showLabels:s=!1,showZero:i=!0,small:c=!1,tooltipPlacement:u="auto",tooltipSlide:f=0}=e,m=gk(null);return mk(()=>{m?.current?.removeAttribute("data-fetched"),pk.insertBadges()}),d.jsx("div",{className:"scite-badge","data-doi":t,"data-layout":o,"data-show-labels":s.toString(),"data-show-zero":i.toString(),"data-small":c.toString(),"data-tooltip-placement":u,"data-tooltip-slide":f,ref:m})}),yk=window.React.useMemo,{Provider:bk,useSettings:Wv}=new lr,vk="10.1126/science.1179052",wk=[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"}],xk=[{label:"Auto",value:"auto"},{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Bottom",value:"bottom"}];function Ck(){const[{layout:n,showLabels:e,showZero:t,small:o,tooltipPlacement:s,tooltipSlide:i},c]=Wv(),u=yk(()=>{function f(p){c(g=>({...g,[p]:!g[p]}))}function m(p,g){c(b=>({...b,[p]:g}))}return{selectLayout:p=>m("layout",p),toggleLabels:()=>f("showLabels"),toggleZero:()=>f("showZero"),toggleSmall:()=>f("small"),selectTooltipPlacement:p=>m("tooltipPlacement",p),updateTooltipSlide:p=>m("tooltipSlide",p)}},[c]);return d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{padding:"10px 0px",textAlign:"center"},children:d.jsx(Vv,{doi:vk,layout:n,showLabels:e,showZero:t,small:o,tooltipPlacement:s,tooltipSlide:i})}),d.jsx(xr,{menuTitle:"Select the layout direction for the Scite badge",onSelect:u.selectLayout,options:wk,title:"Layout",value:n}),d.jsx(so,{isChecked:e,label:"Toggle if category labels should be shown",onChange:u.toggleLabels,title:"Show labels"}),d.jsx(so,{isChecked:t,label:"Toggle if categories with no items should be shown",onChange:u.toggleZero,title:"Show empty categories"}),d.jsx(so,{isChecked:o,label:"Toggle if Scite badges should use a smaller styling",onChange:u.toggleSmall,title:"Use small styling"}),d.jsx(xr,{menuTitle:"Select the placement of the badge tooltip",onSelect:u.selectTooltipPlacement,options:xk,title:"Tooltip Placement",value:s}),d.jsx(_T,{label:"Indicate a numeric offset for the placement of the badge tooltip",setValue:u.updateTooltipSlide,title:"Tooltip Offset",value:i})]})}const Ek=window.React.useCallback,Sk=window.Blueprint.Core.parseKeyCombo,{Provider:Tk,useSettings:As}=new lr,_k=n=>{if(n=="")return!0;try{return Sk(n),!0}catch{return!1}};function kk(){const[n,e]=As(),t=Ek((o,s)=>{e(i=>({...i,[o]:s}))},[e]);return d.jsx(d.Fragment,{children:Object.keys(n).map(o=>d.jsx(co,{ifEmpty:!0,label:"Enter a keyboard shortcut to use to"+Dc(o),onChange:s=>t(o,s),title:Dc(o),validate:_k,value:n[o]},o))})}const Rk=window.React.useCallback,{Provider:Ok,useSettings:Oa}=new lr({afterUpdate:(n,e)=>{window?.zoteroRoam?.updateSetting?.("typemap",e)}});function jk(){const[n,e]=Oa(),t=Rk((o,s)=>{e(i=>({...i,[o]:s}))},[e]);return d.jsx(d.Fragment,{children:Object.keys(n).map(o=>d.jsx(co,{ifEmpty:!0,label:"Enter a mapping for"+Dc(o),onChange:s=>t(o,s),title:o,value:n[o]},o))})}const Ak=window.React.useMemo,{Provider:Ik,useSettings:Qv}=new lr;function Pk(){const[{tags:n},e]=Qv(),t=Ak(()=>{function o(i){e(c=>({...c,tags:Array.from(new Set([...c.tags,i]))}))}function s(i){e(c=>({...c,tags:c.tags.filter(u=>u!=i)}))}return{addTag:o,removeTag:s}},[e]);return d.jsx(d.Fragment,{children:d.jsx(Fi,{title:"Tags",description:"Select tags for which to show the import button",children:d.jsx(Bv,{onRemove:t.removeTag,onSelect:t.addTag,selectedTags:n})})})}const Nk=window.Blueprint.Core.AnchorButton,yr=n=>{const{children:e=null,href:t,minimal:o=!0,...s}=n;return d.jsx(Nk,{href:t,intent:"primary",minimal:o,rel:"noreferrer",target:"_blank",...s,children:e})},Kv=[{component:dk,id:"requests",widget:fk},{component:LT,id:"annotations",widget:$T},{component:qT,id:"autocomplete",widget:KT},{component:GT,id:"copy",widget:t_},{component:r_,id:"metadata",widget:s_},{component:l_,id:"notes",widget:g_},{component:N_,id:"pageMenu",widget:M_},{component:bk,id:"sciteBadge",widget:Ck},{component:Tk,id:"shortcuts",widget:kk},{component:Ok,id:"typemap",widget:jk},{component:Ik,id:"webimport",widget:Pk},{component:b_,id:"other",widget:v_}],Lk=window.Blueprint.Core.Classes,Dk=window.Blueprint.Core.Tab,Rg=window.Blueprint.Core.Tabs,Mk={className:"zr-settings-tab",panelClassName:"zr-settings-panel"};function Bk({isOpen:n,onClose:e}){return d.jsx(Ho,{className:"settings",isOpen:n,label:"zoteroRoam settings",onClose:e,children:d.jsx("div",{className:Lk.DIALOG_BODY,children:d.jsx("div",{className:"zr-settings--main",children:d.jsxs(Rg,{animate:!1,className:[H.TABS,"zr-settings-tabs-wrapper"].join(" "),id:"zr-settings--tabs",vertical:!0,children:[Kv.filter(t=>t.widget).map(t=>{const{id:o,widget:s}=t;return d.jsx(Dk,{id:o,panel:d.jsx(Nn,{children:d.jsx(s,{})}),title:Dc(o),...Mk},o)}),d.jsx(Rg.Expander,{}),d.jsx(yr,{active:!0,fill:!0,href:"https://alix-lahuec.gitbook.io/zotero-roam/customization/user-settings",intent:"primary",rightIcon:"document-open",text:"Docs"})]})})})})}const zk=window.React.useCallback,Fk=({extensionAPI:n={},children:e,init:t})=>{const o=zk((s,i)=>{if(n.settings)n.settings.set(s,i);else return null},[n]);return d.jsx(d.Fragment,{children:Kv.reduceRight((s,i)=>{const{component:c,id:u}=i;return d.jsx(c,{init:t[u],updater:f=>o(u,f),children:s})},e)})},$k=window.React.createContext,Uk=window.React.useCallback,qk=window.React.useContext,Hk=window.React.useMemo,Vk=window.React.useState,Xv=$k(null),Wk=({children:n})=>{const[e,t]=Vk(()=>ug()),o=Uk(()=>{t(()=>ug())},[]),s=Hk(()=>[e,o],[e,o]);return d.jsx(Xv.Provider,{value:s,children:n})},Wo=()=>{const n=qk(Xv);if(!n)throw new Error("No context provided");return n},Qk=window.Blueprint.Core.Classes;var vp=Qk.getClassNamespace(),iu="".concat(vp,"-context-menu2"),Kk="".concat(iu,"-virtual-target"),Xk="".concat(iu,"-popover2"),Gk="".concat(iu,"-backdrop"),Sn="".concat(vp,"-popover2"),Nd="".concat(Sn,"-arrow"),Yk="".concat(Sn,"-backdrop"),Og="".concat(Sn,"-capturing-dismiss"),Zk="".concat(Sn,"-content"),Jk="".concat(Sn,"-placement"),_f="".concat(Sn,"-dismiss"),eR="".concat(_f,"-override"),tR="".concat(Sn,"-open"),nR="".concat(Sn,"-popper-escaped"),rR="".concat(Sn,"-reference-hidden"),oR="".concat(Sn,"-target"),aR="".concat(Sn,"-transition-container"),sR="".concat(vp,"-tooltip2"),Qo="[Blueprint]",iR="".concat(Qo," <Popover2> requires renderTarget prop or a child element."),lR="".concat(Qo,' <Popover2 hasBackdrop={true}> requires interactionKind="click".'),cR="".concat(Qo," <Popover2> supports only one child which is rendered as its target; additional children are ignored."),uR=Qo+" <Popover2> with children ignores renderTarget prop; use either prop or children.",dR=Qo+" Disabling <Popover2> with empty/whitespace content...",fR=Qo+" <Popover2 usePortal={false}> ignores hasBackdrop",pR=Qo+" <Popover2> supports either placement or position prop, not both.",hR=Qo+" <Popover2> onInteraction is ignored when uncontrolled.";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kf=function(n,e){return kf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])},kf(n,e)};function wp(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");kf(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Bt=function(){return Bt=Object.assign||function(e){for(var t,o=1,s=arguments.length;o<s;o++){t=arguments[o];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bt.apply(this,arguments)};function Gv(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(n);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(n,o[s])&&(t[o[s]]=n[o[s]]);return t}var Yv={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o=[],s=0;s<arguments.length;s++){var i=arguments[s];if(i){var c=typeof i;if(c==="string"||c==="number")o.push(i);else if(Array.isArray(i)){if(i.length){var u=t.apply(null,i);u&&o.push(u)}}else if(c==="object")if(i.toString===Object.prototype.toString)for(var f in i)e.call(i,f)&&i[f]&&o.push(f);else o.push(i.toString())}}return o.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Yv);var mR=Yv.exports;const ds=Kc(mR),Do=window.React;var Zv=Do.createContext(),Jv=Do.createContext();function gR(n){var e=n.children,t=Do.useState(null),o=t[0],s=t[1],i=Do.useRef(!1);Do.useEffect(function(){return function(){i.current=!0}},[]);var c=Do.useCallback(function(u){i.current||s(u)},[]);return Do.createElement(Zv.Provider,{value:o},Do.createElement(Jv.Provider,{value:c},e))}const jg=window.React;var ew=function(e){return Array.isArray(e)?e[0]:e},tw=function(e){if(typeof e=="function"){for(var t=arguments.length,o=new Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];return e.apply(void 0,o)}},Rf=function(e,t){if(typeof e=="function")return tw(e,t);e!=null&&(e.current=t)},Ag=function(e){return e.reduce(function(t,o){var s=o[0],i=o[1];return t[s]=i,t},{})},Ig=typeof window<"u"&&window.document&&window.document.createElement?jg.useLayoutEffect:jg.useEffect,In="top",sr="bottom",ir="right",Pn="left",xp="auto",tl=[In,sr,ir,Pn],vs="start",Ui="end",yR="clippingParents",nw="viewport",xi="popper",bR="reference",Pg=tl.reduce(function(n,e){return n.concat([e+"-"+vs,e+"-"+Ui])},[]),rw=[].concat(tl,[xp]).reduce(function(n,e){return n.concat([e,e+"-"+vs,e+"-"+Ui])},[]),vR="beforeRead",wR="read",xR="afterRead",CR="beforeMain",ER="main",SR="afterMain",TR="beforeWrite",_R="write",kR="afterWrite",RR=[vR,wR,xR,CR,ER,SR,TR,_R,kR];function Hr(n){return n?(n.nodeName||"").toLowerCase():null}function $n(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ea(n){var e=$n(n).Element;return n instanceof e||n instanceof Element}function or(n){var e=$n(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Cp(n){if(typeof ShadowRoot>"u")return!1;var e=$n(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function OR(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var o=e.styles[t]||{},s=e.attributes[t]||{},i=e.elements[t];!or(i)||!Hr(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(c){var u=s[c];u===!1?i.removeAttribute(c):i.setAttribute(c,u===!0?"":u)}))})}function jR(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(o){var s=e.elements[o],i=e.attributes[o]||{},c=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:t[o]),u=c.reduce(function(f,m){return f[m]="",f},{});!or(s)||!Hr(s)||(Object.assign(s.style,u),Object.keys(i).forEach(function(f){s.removeAttribute(f)}))})}}const AR={name:"applyStyles",enabled:!0,phase:"write",fn:OR,effect:jR,requires:["computeStyles"]};function qr(n){return n.split("-")[0]}var ba=Math.max,Mc=Math.min,ws=Math.round;function Of(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ow(){return!/^((?!chrome|android).)*safari/i.test(Of())}function xs(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var o=n.getBoundingClientRect(),s=1,i=1;e&&or(n)&&(s=n.offsetWidth>0&&ws(o.width)/n.offsetWidth||1,i=n.offsetHeight>0&&ws(o.height)/n.offsetHeight||1);var c=Ea(n)?$n(n):window,u=c.visualViewport,f=!ow()&&t,m=(o.left+(f&&u?u.offsetLeft:0))/s,p=(o.top+(f&&u?u.offsetTop:0))/i,g=o.width/s,b=o.height/i;return{width:g,height:b,top:p,right:m+g,bottom:p+b,left:m,x:m,y:p}}function Ep(n){var e=xs(n),t=n.offsetWidth,o=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:o}}function aw(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Cp(t)){var o=e;do{if(o&&n.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function fo(n){return $n(n).getComputedStyle(n)}function IR(n){return["table","td","th"].indexOf(Hr(n))>=0}function Ko(n){return((Ea(n)?n.ownerDocument:n.document)||window.document).documentElement}function lu(n){return Hr(n)==="html"?n:n.assignedSlot||n.parentNode||(Cp(n)?n.host:null)||Ko(n)}function Ng(n){return!or(n)||fo(n).position==="fixed"?null:n.offsetParent}function PR(n){var e=/firefox/i.test(Of()),t=/Trident/i.test(Of());if(t&&or(n)){var o=fo(n);if(o.position==="fixed")return null}var s=lu(n);for(Cp(s)&&(s=s.host);or(s)&&["html","body"].indexOf(Hr(s))<0;){var i=fo(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function nl(n){for(var e=$n(n),t=Ng(n);t&&IR(t)&&fo(t).position==="static";)t=Ng(t);return t&&(Hr(t)==="html"||Hr(t)==="body"&&fo(t).position==="static")?e:t||PR(n)||e}function Sp(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ji(n,e,t){return ba(n,Mc(e,t))}function NR(n,e,t){var o=ji(n,e,t);return o>t?t:o}function sw(){return{top:0,right:0,bottom:0,left:0}}function iw(n){return Object.assign({},sw(),n)}function lw(n,e){return e.reduce(function(t,o){return t[o]=n,t},{})}var LR=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,iw(typeof e!="number"?e:lw(e,tl))};function DR(n){var e,t=n.state,o=n.name,s=n.options,i=t.elements.arrow,c=t.modifiersData.popperOffsets,u=qr(t.placement),f=Sp(u),m=[Pn,ir].indexOf(u)>=0,p=m?"height":"width";if(!(!i||!c)){var g=LR(s.padding,t),b=Ep(i),v=f==="y"?In:Pn,w=f==="y"?sr:ir,S=t.rects.reference[p]+t.rects.reference[f]-c[f]-t.rects.popper[p],_=c[f]-t.rects.reference[f],O=nl(i),D=O?f==="y"?O.clientHeight||0:O.clientWidth||0:0,M=S/2-_/2,W=g[v],X=D-b[p]-g[w],N=D/2-b[p]/2+M,I=ji(W,N,X),P=f;t.modifiersData[o]=(e={},e[P]=I,e.centerOffset=I-N,e)}}function MR(n){var e=n.state,t=n.options,o=t.element,s=o===void 0?"[data-popper-arrow]":o;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||aw(e.elements.popper,s)&&(e.elements.arrow=s))}const BR={name:"arrow",enabled:!0,phase:"main",fn:DR,effect:MR,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cs(n){return n.split("-")[1]}var zR={top:"auto",right:"auto",bottom:"auto",left:"auto"};function FR(n,e){var t=n.x,o=n.y,s=e.devicePixelRatio||1;return{x:ws(t*s)/s||0,y:ws(o*s)/s||0}}function Lg(n){var e,t=n.popper,o=n.popperRect,s=n.placement,i=n.variation,c=n.offsets,u=n.position,f=n.gpuAcceleration,m=n.adaptive,p=n.roundOffsets,g=n.isFixed,b=c.x,v=b===void 0?0:b,w=c.y,S=w===void 0?0:w,_=typeof p=="function"?p({x:v,y:S}):{x:v,y:S};v=_.x,S=_.y;var O=c.hasOwnProperty("x"),D=c.hasOwnProperty("y"),M=Pn,W=In,X=window;if(m){var N=nl(t),I="clientHeight",P="clientWidth";if(N===$n(t)&&(N=Ko(t),fo(N).position!=="static"&&u==="absolute"&&(I="scrollHeight",P="scrollWidth")),N=N,s===In||(s===Pn||s===ir)&&i===Ui){W=sr;var $=g&&N===X&&X.visualViewport?X.visualViewport.height:N[I];S-=$-o.height,S*=f?1:-1}if(s===Pn||(s===In||s===sr)&&i===Ui){M=ir;var ue=g&&N===X&&X.visualViewport?X.visualViewport.width:N[P];v-=ue-o.width,v*=f?1:-1}}var he=Object.assign({position:u},m&&zR),ge=p===!0?FR({x:v,y:S},$n(t)):{x:v,y:S};if(v=ge.x,S=ge.y,f){var ye;return Object.assign({},he,(ye={},ye[W]=D?"0":"",ye[M]=O?"0":"",ye.transform=(X.devicePixelRatio||1)<=1?"translate("+v+"px, "+S+"px)":"translate3d("+v+"px, "+S+"px, 0)",ye))}return Object.assign({},he,(e={},e[W]=D?S+"px":"",e[M]=O?v+"px":"",e.transform="",e))}function $R(n){var e=n.state,t=n.options,o=t.gpuAcceleration,s=o===void 0?!0:o,i=t.adaptive,c=i===void 0?!0:i,u=t.roundOffsets,f=u===void 0?!0:u,m={placement:qr(e.placement),variation:Cs(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Lg(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Lg(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const UR={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$R,data:{}};var tc={passive:!0};function qR(n){var e=n.state,t=n.instance,o=n.options,s=o.scroll,i=s===void 0?!0:s,c=o.resize,u=c===void 0?!0:c,f=$n(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&m.forEach(function(p){p.addEventListener("scroll",t.update,tc)}),u&&f.addEventListener("resize",t.update,tc),function(){i&&m.forEach(function(p){p.removeEventListener("scroll",t.update,tc)}),u&&f.removeEventListener("resize",t.update,tc)}}const HR={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:qR,data:{}};var VR={left:"right",right:"left",bottom:"top",top:"bottom"};function wc(n){return n.replace(/left|right|bottom|top/g,function(e){return VR[e]})}var WR={start:"end",end:"start"};function Dg(n){return n.replace(/start|end/g,function(e){return WR[e]})}function Tp(n){var e=$n(n),t=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:t,scrollTop:o}}function _p(n){return xs(Ko(n)).left+Tp(n).scrollLeft}function QR(n,e){var t=$n(n),o=Ko(n),s=t.visualViewport,i=o.clientWidth,c=o.clientHeight,u=0,f=0;if(s){i=s.width,c=s.height;var m=ow();(m||!m&&e==="fixed")&&(u=s.offsetLeft,f=s.offsetTop)}return{width:i,height:c,x:u+_p(n),y:f}}function KR(n){var e,t=Ko(n),o=Tp(n),s=(e=n.ownerDocument)==null?void 0:e.body,i=ba(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),c=ba(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),u=-o.scrollLeft+_p(n),f=-o.scrollTop;return fo(s||t).direction==="rtl"&&(u+=ba(t.clientWidth,s?s.clientWidth:0)-i),{width:i,height:c,x:u,y:f}}function kp(n){var e=fo(n),t=e.overflow,o=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+o)}function cw(n){return["html","body","#document"].indexOf(Hr(n))>=0?n.ownerDocument.body:or(n)&&kp(n)?n:cw(lu(n))}function Ai(n,e){var t;e===void 0&&(e=[]);var o=cw(n),s=o===((t=n.ownerDocument)==null?void 0:t.body),i=$n(o),c=s?[i].concat(i.visualViewport||[],kp(o)?o:[]):o,u=e.concat(c);return s?u:u.concat(Ai(lu(c)))}function jf(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function XR(n,e){var t=xs(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function Mg(n,e,t){return e===nw?jf(QR(n,t)):Ea(e)?XR(e,t):jf(KR(Ko(n)))}function GR(n){var e=Ai(lu(n)),t=["absolute","fixed"].indexOf(fo(n).position)>=0,o=t&&or(n)?nl(n):n;return Ea(o)?e.filter(function(s){return Ea(s)&&aw(s,o)&&Hr(s)!=="body"}):[]}function YR(n,e,t,o){var s=e==="clippingParents"?GR(n):[].concat(e),i=[].concat(s,[t]),c=i[0],u=i.reduce(function(f,m){var p=Mg(n,m,o);return f.top=ba(p.top,f.top),f.right=Mc(p.right,f.right),f.bottom=Mc(p.bottom,f.bottom),f.left=ba(p.left,f.left),f},Mg(n,c,o));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function uw(n){var e=n.reference,t=n.element,o=n.placement,s=o?qr(o):null,i=o?Cs(o):null,c=e.x+e.width/2-t.width/2,u=e.y+e.height/2-t.height/2,f;switch(s){case In:f={x:c,y:e.y-t.height};break;case sr:f={x:c,y:e.y+e.height};break;case ir:f={x:e.x+e.width,y:u};break;case Pn:f={x:e.x-t.width,y:u};break;default:f={x:e.x,y:e.y}}var m=s?Sp(s):null;if(m!=null){var p=m==="y"?"height":"width";switch(i){case vs:f[m]=f[m]-(e[p]/2-t[p]/2);break;case Ui:f[m]=f[m]+(e[p]/2-t[p]/2);break}}return f}function qi(n,e){e===void 0&&(e={});var t=e,o=t.placement,s=o===void 0?n.placement:o,i=t.strategy,c=i===void 0?n.strategy:i,u=t.boundary,f=u===void 0?yR:u,m=t.rootBoundary,p=m===void 0?nw:m,g=t.elementContext,b=g===void 0?xi:g,v=t.altBoundary,w=v===void 0?!1:v,S=t.padding,_=S===void 0?0:S,O=iw(typeof _!="number"?_:lw(_,tl)),D=b===xi?bR:xi,M=n.rects.popper,W=n.elements[w?D:b],X=YR(Ea(W)?W:W.contextElement||Ko(n.elements.popper),f,p,c),N=xs(n.elements.reference),I=uw({reference:N,element:M,strategy:"absolute",placement:s}),P=jf(Object.assign({},M,I)),$=b===xi?P:N,ue={top:X.top-$.top+O.top,bottom:$.bottom-X.bottom+O.bottom,left:X.left-$.left+O.left,right:$.right-X.right+O.right},he=n.modifiersData.offset;if(b===xi&&he){var ge=he[s];Object.keys(ue).forEach(function(ye){var G=[ir,sr].indexOf(ye)>=0?1:-1,ve=[In,sr].indexOf(ye)>=0?"y":"x";ue[ye]+=ge[ve]*G})}return ue}function ZR(n,e){e===void 0&&(e={});var t=e,o=t.placement,s=t.boundary,i=t.rootBoundary,c=t.padding,u=t.flipVariations,f=t.allowedAutoPlacements,m=f===void 0?rw:f,p=Cs(o),g=p?u?Pg:Pg.filter(function(w){return Cs(w)===p}):tl,b=g.filter(function(w){return m.indexOf(w)>=0});b.length===0&&(b=g);var v=b.reduce(function(w,S){return w[S]=qi(n,{placement:S,boundary:s,rootBoundary:i,padding:c})[qr(S)],w},{});return Object.keys(v).sort(function(w,S){return v[w]-v[S]})}function JR(n){if(qr(n)===xp)return[];var e=wc(n);return[Dg(n),e,Dg(e)]}function eO(n){var e=n.state,t=n.options,o=n.name;if(!e.modifiersData[o]._skip){for(var s=t.mainAxis,i=s===void 0?!0:s,c=t.altAxis,u=c===void 0?!0:c,f=t.fallbackPlacements,m=t.padding,p=t.boundary,g=t.rootBoundary,b=t.altBoundary,v=t.flipVariations,w=v===void 0?!0:v,S=t.allowedAutoPlacements,_=e.options.placement,O=qr(_),D=O===_,M=f||(D||!w?[wc(_)]:JR(_)),W=[_].concat(M).reduce(function(B,Z){return B.concat(qr(Z)===xp?ZR(e,{placement:Z,boundary:p,rootBoundary:g,padding:m,flipVariations:w,allowedAutoPlacements:S}):Z)},[]),X=e.rects.reference,N=e.rects.popper,I=new Map,P=!0,$=W[0],ue=0;ue<W.length;ue++){var he=W[ue],ge=qr(he),ye=Cs(he)===vs,G=[In,sr].indexOf(ge)>=0,ve=G?"width":"height",ie=qi(e,{placement:he,boundary:p,rootBoundary:g,altBoundary:b,padding:m}),we=G?ye?ir:Pn:ye?sr:In;X[ve]>N[ve]&&(we=wc(we));var ze=wc(we),Xe=[];if(i&&Xe.push(ie[ge]<=0),u&&Xe.push(ie[we]<=0,ie[ze]<=0),Xe.every(function(B){return B})){$=he,P=!1;break}I.set(he,Xe)}if(P)for(var Le=w?3:1,Je=function(Z){var de=W.find(function(se){var Y=I.get(se);if(Y)return Y.slice(0,Z).every(function(ne){return ne})});if(de)return $=de,"break"},pt=Le;pt>0;pt--){var A=Je(pt);if(A==="break")break}e.placement!==$&&(e.modifiersData[o]._skip=!0,e.placement=$,e.reset=!0)}}const tO={name:"flip",enabled:!0,phase:"main",fn:eO,requiresIfExists:["offset"],data:{_skip:!1}};function Bg(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function zg(n){return[In,ir,sr,Pn].some(function(e){return n[e]>=0})}function nO(n){var e=n.state,t=n.name,o=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,c=qi(e,{elementContext:"reference"}),u=qi(e,{altBoundary:!0}),f=Bg(c,o),m=Bg(u,s,i),p=zg(f),g=zg(m);e.modifiersData[t]={referenceClippingOffsets:f,popperEscapeOffsets:m,isReferenceHidden:p,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":g})}const rO={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nO};function oO(n,e,t){var o=qr(n),s=[Pn,In].indexOf(o)>=0?-1:1,i=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,c=i[0],u=i[1];return c=c||0,u=(u||0)*s,[Pn,ir].indexOf(o)>=0?{x:u,y:c}:{x:c,y:u}}function aO(n){var e=n.state,t=n.options,o=n.name,s=t.offset,i=s===void 0?[0,0]:s,c=rw.reduce(function(p,g){return p[g]=oO(g,e.rects,i),p},{}),u=c[e.placement],f=u.x,m=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=m),e.modifiersData[o]=c}const sO={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aO};function iO(n){var e=n.state,t=n.name;e.modifiersData[t]=uw({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const lO={name:"popperOffsets",enabled:!0,phase:"read",fn:iO,data:{}};function cO(n){return n==="x"?"y":"x"}function uO(n){var e=n.state,t=n.options,o=n.name,s=t.mainAxis,i=s===void 0?!0:s,c=t.altAxis,u=c===void 0?!1:c,f=t.boundary,m=t.rootBoundary,p=t.altBoundary,g=t.padding,b=t.tether,v=b===void 0?!0:b,w=t.tetherOffset,S=w===void 0?0:w,_=qi(e,{boundary:f,rootBoundary:m,padding:g,altBoundary:p}),O=qr(e.placement),D=Cs(e.placement),M=!D,W=Sp(O),X=cO(W),N=e.modifiersData.popperOffsets,I=e.rects.reference,P=e.rects.popper,$=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,ue=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),he=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ge={x:0,y:0};if(N){if(i){var ye,G=W==="y"?In:Pn,ve=W==="y"?sr:ir,ie=W==="y"?"height":"width",we=N[W],ze=we+_[G],Xe=we-_[ve],Le=v?-P[ie]/2:0,Je=D===vs?I[ie]:P[ie],pt=D===vs?-P[ie]:-I[ie],A=e.elements.arrow,B=v&&A?Ep(A):{width:0,height:0},Z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:sw(),de=Z[G],se=Z[ve],Y=ji(0,I[ie],B[ie]),ne=M?I[ie]/2-Le-Y-de-ue.mainAxis:Je-Y-de-ue.mainAxis,Ce=M?-I[ie]/2+Le+Y+se+ue.mainAxis:pt+Y+se+ue.mainAxis,Oe=e.elements.arrow&&nl(e.elements.arrow),Ee=Oe?W==="y"?Oe.clientTop||0:Oe.clientLeft||0:0,at=(ye=he?.[W])!=null?ye:0,_t=we+ne-at-Ee,Gt=we+Ce-at,jt=ji(v?Mc(ze,_t):ze,we,v?ba(Xe,Gt):Xe);N[W]=jt,ge[W]=jt-we}if(u){var xt,ct=W==="x"?In:Pn,Jt=W==="x"?sr:ir,gt=N[X],Tn=X==="y"?"height":"width",cn=gt+_[ct],bn=gt-_[Jt],_n=[In,Pn].indexOf(O)!==-1,Sr=(xt=he?.[X])!=null?xt:0,un=_n?cn:gt-I[Tn]-P[Tn]-Sr+ue.altAxis,Tr=_n?gt+I[Tn]+P[Tn]-Sr-ue.altAxis:bn,cr=v&&_n?NR(un,gt,Tr):ji(v?un:cn,gt,v?Tr:bn);N[X]=cr,ge[X]=cr-gt}e.modifiersData[o]=ge}}const dO={name:"preventOverflow",enabled:!0,phase:"main",fn:uO,requiresIfExists:["offset"]};function fO(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function pO(n){return n===$n(n)||!or(n)?Tp(n):fO(n)}function hO(n){var e=n.getBoundingClientRect(),t=ws(e.width)/n.offsetWidth||1,o=ws(e.height)/n.offsetHeight||1;return t!==1||o!==1}function mO(n,e,t){t===void 0&&(t=!1);var o=or(e),s=or(e)&&hO(e),i=Ko(e),c=xs(n,s,t),u={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(o||!o&&!t)&&((Hr(e)!=="body"||kp(i))&&(u=pO(e)),or(e)?(f=xs(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):i&&(f.x=_p(i))),{x:c.left+u.scrollLeft-f.x,y:c.top+u.scrollTop-f.y,width:c.width,height:c.height}}function gO(n){var e=new Map,t=new Set,o=[];n.forEach(function(i){e.set(i.name,i)});function s(i){t.add(i.name);var c=[].concat(i.requires||[],i.requiresIfExists||[]);c.forEach(function(u){if(!t.has(u)){var f=e.get(u);f&&s(f)}}),o.push(i)}return n.forEach(function(i){t.has(i.name)||s(i)}),o}function yO(n){var e=gO(n);return RR.reduce(function(t,o){return t.concat(e.filter(function(s){return s.phase===o}))},[])}function bO(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function vO(n){var e=n.reduce(function(t,o){var s=t[o.name];return t[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,t},{});return Object.keys(e).map(function(t){return e[t]})}var Fg={placement:"bottom",modifiers:[],strategy:"absolute"};function $g(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function wO(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,o=t===void 0?[]:t,s=e.defaultOptions,i=s===void 0?Fg:s;return function(u,f,m){m===void 0&&(m=i);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fg,i),modifiersData:{},elements:{reference:u,popper:f},attributes:{},styles:{}},g=[],b=!1,v={state:p,setOptions:function(O){var D=typeof O=="function"?O(p.options):O;S(),p.options=Object.assign({},i,p.options,D),p.scrollParents={reference:Ea(u)?Ai(u):u.contextElement?Ai(u.contextElement):[],popper:Ai(f)};var M=yO(vO([].concat(o,p.options.modifiers)));return p.orderedModifiers=M.filter(function(W){return W.enabled}),w(),v.update()},forceUpdate:function(){if(!b){var O=p.elements,D=O.reference,M=O.popper;if($g(D,M)){p.rects={reference:mO(D,nl(M),p.options.strategy==="fixed"),popper:Ep(M)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(ue){return p.modifiersData[ue.name]=Object.assign({},ue.data)});for(var W=0;W<p.orderedModifiers.length;W++){if(p.reset===!0){p.reset=!1,W=-1;continue}var X=p.orderedModifiers[W],N=X.fn,I=X.options,P=I===void 0?{}:I,$=X.name;typeof N=="function"&&(p=N({state:p,options:P,name:$,instance:v})||p)}}}},update:bO(function(){return new Promise(function(_){v.forceUpdate(),_(p)})}),destroy:function(){S(),b=!0}};if(!$g(u,f))return v;v.setOptions(m).then(function(_){!b&&m.onFirstUpdate&&m.onFirstUpdate(_)});function w(){p.orderedModifiers.forEach(function(_){var O=_.name,D=_.options,M=D===void 0?{}:D,W=_.effect;if(typeof W=="function"){var X=W({state:p,name:O,instance:v,options:M}),N=function(){};g.push(X||N)}})}function S(){g.forEach(function(_){return _()}),g=[]}return v}}var xO=[HR,lO,UR,AR,sO,tO,dO,BR,rO],CO=wO({defaultModifiers:xO}),EO=typeof Element<"u",SO=typeof Map=="function",TO=typeof Set=="function",_O=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function xc(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,o,s;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(o=t;o--!==0;)if(!xc(n[o],e[o]))return!1;return!0}var i;if(SO&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(i=n.entries();!(o=i.next()).done;)if(!e.has(o.value[0]))return!1;for(i=n.entries();!(o=i.next()).done;)if(!xc(o.value[1],e.get(o.value[0])))return!1;return!0}if(TO&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(i=n.entries();!(o=i.next()).done;)if(!e.has(o.value[0]))return!1;return!0}if(_O&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(o=t;o--!==0;)if(n[o]!==e[o])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(o=t;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[o]))return!1;if(EO&&n instanceof Element)return!1;for(o=t;o--!==0;)if(!((s[o]==="_owner"||s[o]==="__v"||s[o]==="__o")&&n.$$typeof)&&!xc(n[s[o]],e[s[o]]))return!1;return!0}return n!==n&&e!==e}var kO=function(e,t){try{return xc(e,t)}catch(o){if((o.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw o}};const RO=Kc(kO),Ci=window.React,OO=window.ReactDOM;var jO=[],AO=function(e,t,o){o===void 0&&(o={});var s=Ci.useRef(null),i={onFirstUpdate:o.onFirstUpdate,placement:o.placement||"bottom",strategy:o.strategy||"absolute",modifiers:o.modifiers||jO},c=Ci.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),u=c[0],f=c[1],m=Ci.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(v){var w=v.state,S=Object.keys(w.elements);OO.flushSync(function(){f({styles:Ag(S.map(function(_){return[_,w.styles[_]||{}]})),attributes:Ag(S.map(function(_){return[_,w.attributes[_]]}))})})},requires:["computeStyles"]}},[]),p=Ci.useMemo(function(){var b={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[m,{name:"applyStyles",enabled:!1}])};return RO(s.current,b)?s.current||b:(s.current=b,b)},[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,m]),g=Ci.useRef();return Ig(function(){g.current&&g.current.setOptions(p)},[p]),Ig(function(){if(!(e==null||t==null)){var b=o.createPopper||CO,v=b(e,t,p);return g.current=v,function(){v.destroy(),g.current=null}}},[e,t,o.createPopper]),{state:g.current?g.current.state:null,styles:u.styles,attributes:u.attributes,update:g.current?g.current.update:null,forceUpdate:g.current?g.current.forceUpdate:null}};const ls=window.React;var IO=function(){},PO=function(){return Promise.resolve(null)},NO=[];function LO(n){var e=n.placement,t=e===void 0?"bottom":e,o=n.strategy,s=o===void 0?"absolute":o,i=n.modifiers,c=i===void 0?NO:i,u=n.referenceElement,f=n.onFirstUpdate,m=n.innerRef,p=n.children,g=ls.useContext(Zv),b=ls.useState(null),v=b[0],w=b[1],S=ls.useState(null),_=S[0],O=S[1];ls.useEffect(function(){Rf(m,v)},[m,v]);var D=ls.useMemo(function(){return{placement:t,strategy:s,onFirstUpdate:f,modifiers:[].concat(c,[{name:"arrow",enabled:_!=null,options:{element:_}}])}},[t,s,f,c,_]),M=AO(u||g,v,D),W=M.state,X=M.styles,N=M.forceUpdate,I=M.update,P=ls.useMemo(function(){return{ref:w,style:X.popper,placement:W?W.placement:t,hasPopperEscaped:W&&W.modifiersData.hide?W.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:W&&W.modifiersData.hide?W.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:X.arrow,ref:O},forceUpdate:N||IO,update:I||PO}},[w,O,t,W,X,I,N]);return ew(p)(P)}var DO=function(){},MO=DO;const BO=Kc(MO),nc=window.React;function zO(n){var e=n.children,t=n.innerRef,o=nc.useContext(Jv),s=nc.useCallback(function(i){Rf(t,i),tw(o,i)},[t,o]);return nc.useEffect(function(){return function(){return Rf(t,null)}},[]),nc.useEffect(function(){BO(!!o,"`Reference` should not be used outside of a `Manager` component.")},[o]),ew(e)({ref:s})}function cu(n){return n.split("-")[0]}function Ug(n){return["left","right"].indexOf(n)!==-1}function rc(n){switch(n){case"top":return"bottom";case"left":return"right";case"bottom":return"top";default:return"left"}}function qg(n){var e=n.split("-")[1];switch(e){case"start":return"left";case"end":return"right";default:return"center"}}function FO(n,e){var t=cu(n);if(e===void 0)return Ug(t)?"".concat(rc(t)," ").concat(qg(t)):"".concat(qg(t)," ").concat(rc(t));var o=15;return Ug(t)?"".concat(rc(t)," ").concat(parseInt(e.top,10)+o,"px"):"".concat(parseInt(e.left,10)+o,"px ").concat(rc(t))}const oc=window.React,$O=window.Blueprint.Core.DISPLAYNAME_PREFIX;var UO="M8.11 6.302c1.015-.936 1.887-2.922 1.887-4.297v26c0-1.378-.868-3.357-1.888-4.297L.925 17.09c-1.237-1.14-1.233-3.034 0-4.17L8.11 6.302z",qO="M8.787 7.036c1.22-1.125 2.21-3.376 2.21-5.03V0v30-2.005c0-1.654-.983-3.9-2.21-5.03l-7.183-6.616c-.81-.746-.802-1.96 0-2.7l7.183-6.614z",HO=4,Bc=30,VO=22;function WO(n){if(n==null)return 0;switch(cu(n)){case"top":return-90;case"left":return 180;case"bottom":return 90;default:return 0}}function QO(n){var e=Bc/2-HO;switch(cu(n)){case"top":return{bottom:-e};case"left":return{right:-e};case"bottom":return{top:-e};default:return{left:-e}}}var dw=function(n){var e=n.arrowProps,t=e.ref,o=e.style,s=n.placement;return oc.createElement("div",{className:Nd,"data-popper-arrow":!0,ref:t,style:Bt(Bt({},o),QO(s))},oc.createElement("svg",{viewBox:"0 0 ".concat(Bc," ").concat(Bc),style:{transform:"rotate(".concat(WO(s),"deg)")}},oc.createElement("path",{className:Nd+"-border",d:UO}),oc.createElement("path",{className:Nd+"-fill",d:qO})))};dw.displayName="".concat($O,".Popover2Arrow");const Zn=window.Blueprint.Core.PopoverPosition;function KO(n){switch(n){case Zn.TOP_LEFT:return"top-start";case Zn.TOP:return"top";case Zn.TOP_RIGHT:return"top-end";case Zn.RIGHT_TOP:return"right-start";case Zn.RIGHT:return"right";case Zn.RIGHT_BOTTOM:return"right-end";case Zn.BOTTOM_RIGHT:return"bottom-end";case Zn.BOTTOM:return"bottom";case Zn.BOTTOM_LEFT:return"bottom-start";case Zn.LEFT_BOTTOM:return"left-end";case Zn.LEFT:return"left";case Zn.LEFT_TOP:return"left-start";case"auto":case"auto-start":case"auto-end":return n;default:return XO(n)}}function XO(n){throw new Error("Unexpected position: "+n)}var va=[],GO=function(){return va.some(function(n){return n.activeTargets.length>0})},YO=function(){return va.some(function(n){return n.skippedTargets.length>0})},Hg="ResizeObserver loop completed with undelivered notifications.",ZO=function(){var n;typeof ErrorEvent=="function"?n=new ErrorEvent("error",{message:Hg}):(n=document.createEvent("Event"),n.initEvent("error",!1,!1),n.message=Hg),window.dispatchEvent(n)},Hi;(function(n){n.BORDER_BOX="border-box",n.CONTENT_BOX="content-box",n.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Hi||(Hi={}));var wa=function(n){return Object.freeze(n)},JO=function(){function n(e,t){this.inlineSize=e,this.blockSize=t,wa(this)}return n}(),fw=function(){function n(e,t,o,s){return this.x=e,this.y=t,this.width=o,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,wa(this)}return n.prototype.toJSON=function(){var e=this,t=e.x,o=e.y,s=e.top,i=e.right,c=e.bottom,u=e.left,f=e.width,m=e.height;return{x:t,y:o,top:s,right:i,bottom:c,left:u,width:f,height:m}},n.fromRect=function(e){return new n(e.x,e.y,e.width,e.height)},n}(),Rp=function(n){return n instanceof SVGElement&&"getBBox"in n},pw=function(n){if(Rp(n)){var e=n.getBBox(),t=e.width,o=e.height;return!t&&!o}var s=n,i=s.offsetWidth,c=s.offsetHeight;return!(i||c||n.getClientRects().length)},Vg=function(n){var e;if(n instanceof Element)return!0;var t=(e=n?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&n instanceof t.Element)},e1=function(n){switch(n.tagName){case"INPUT":if(n.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ii=typeof window<"u"?window:{},ac=new WeakMap,Wg=/auto|scroll/,t1=/^tb|vertical/,n1=/msie|trident/i.test(Ii.navigator&&Ii.navigator.userAgent),Fr=function(n){return parseFloat(n||"0")},fs=function(n,e,t){return n===void 0&&(n=0),e===void 0&&(e=0),t===void 0&&(t=!1),new JO((t?e:n)||0,(t?n:e)||0)},Qg=wa({devicePixelContentBoxSize:fs(),borderBoxSize:fs(),contentBoxSize:fs(),contentRect:new fw(0,0,0,0)}),hw=function(n,e){if(e===void 0&&(e=!1),ac.has(n)&&!e)return ac.get(n);if(pw(n))return ac.set(n,Qg),Qg;var t=getComputedStyle(n),o=Rp(n)&&n.ownerSVGElement&&n.getBBox(),s=!n1&&t.boxSizing==="border-box",i=t1.test(t.writingMode||""),c=!o&&Wg.test(t.overflowY||""),u=!o&&Wg.test(t.overflowX||""),f=o?0:Fr(t.paddingTop),m=o?0:Fr(t.paddingRight),p=o?0:Fr(t.paddingBottom),g=o?0:Fr(t.paddingLeft),b=o?0:Fr(t.borderTopWidth),v=o?0:Fr(t.borderRightWidth),w=o?0:Fr(t.borderBottomWidth),S=o?0:Fr(t.borderLeftWidth),_=g+m,O=f+p,D=S+v,M=b+w,W=u?n.offsetHeight-M-n.clientHeight:0,X=c?n.offsetWidth-D-n.clientWidth:0,N=s?_+D:0,I=s?O+M:0,P=o?o.width:Fr(t.width)-N-X,$=o?o.height:Fr(t.height)-I-W,ue=P+_+X+D,he=$+O+W+M,ge=wa({devicePixelContentBoxSize:fs(Math.round(P*devicePixelRatio),Math.round($*devicePixelRatio),i),borderBoxSize:fs(ue,he,i),contentBoxSize:fs(P,$,i),contentRect:new fw(g,f,P,$)});return ac.set(n,ge),ge},mw=function(n,e,t){var o=hw(n,t),s=o.borderBoxSize,i=o.contentBoxSize,c=o.devicePixelContentBoxSize;switch(e){case Hi.DEVICE_PIXEL_CONTENT_BOX:return c;case Hi.BORDER_BOX:return s;default:return i}},r1=function(){function n(e){var t=hw(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=wa([t.borderBoxSize]),this.contentBoxSize=wa([t.contentBoxSize]),this.devicePixelContentBoxSize=wa([t.devicePixelContentBoxSize])}return n}(),gw=function(n){if(pw(n))return 1/0;for(var e=0,t=n.parentNode;t;)e+=1,t=t.parentNode;return e},o1=function(){var n=1/0,e=[];va.forEach(function(c){if(c.activeTargets.length!==0){var u=[];c.activeTargets.forEach(function(m){var p=new r1(m.target),g=gw(m.target);u.push(p),m.lastReportedSize=mw(m.target,m.observedBox),g<n&&(n=g)}),e.push(function(){c.callback.call(c.observer,u,c.observer)}),c.activeTargets.splice(0,c.activeTargets.length)}});for(var t=0,o=e;t<o.length;t++){var s=o[t];s()}return n},Kg=function(n){va.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(s){s.isActive()&&(gw(s.target)>n?t.activeTargets.push(s):t.skippedTargets.push(s))})})},a1=function(){var n=0;for(Kg(n);GO();)n=o1(),Kg(n);return YO()&&ZO(),n>0},Ld,yw=[],s1=function(){return yw.splice(0).forEach(function(n){return n()})},i1=function(n){if(!Ld){var e=0,t=document.createTextNode(""),o={characterData:!0};new MutationObserver(function(){return s1()}).observe(t,o),Ld=function(){t.textContent="".concat(e?e--:e++)}}yw.push(n),Ld()},l1=function(n){i1(function(){requestAnimationFrame(n)})},Cc=0,c1=function(){return!!Cc},u1=250,d1={attributes:!0,characterData:!0,childList:!0,subtree:!0},Xg=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Gg=function(n){return n===void 0&&(n=0),Date.now()+n},Dd=!1,f1=function(){function n(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return n.prototype.run=function(e){var t=this;if(e===void 0&&(e=u1),!Dd){Dd=!0;var o=Gg(e);l1(function(){var s=!1;try{s=a1()}finally{if(Dd=!1,e=o-Gg(),!c1())return;s?t.run(1e3):e>0?t.run(e):t.start()}})}},n.prototype.schedule=function(){this.stop(),this.run()},n.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,d1)};document.body?t():Ii.addEventListener("DOMContentLoaded",t)},n.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Xg.forEach(function(t){return Ii.addEventListener(t,e.listener,!0)}))},n.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Xg.forEach(function(t){return Ii.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},n}(),Af=new f1,Yg=function(n){!Cc&&n>0&&Af.start(),Cc+=n,!Cc&&Af.stop()},p1=function(n){return!Rp(n)&&!e1(n)&&getComputedStyle(n).display==="inline"},h1=function(){function n(e,t){this.target=e,this.observedBox=t||Hi.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return n.prototype.isActive=function(){var e=mw(this.target,this.observedBox,!0);return p1(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},n}(),m1=function(){function n(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return n}(),sc=new WeakMap,Zg=function(n,e){for(var t=0;t<n.length;t+=1)if(n[t].target===e)return t;return-1},ic=function(){function n(){}return n.connect=function(e,t){var o=new m1(e,t);sc.set(e,o)},n.observe=function(e,t,o){var s=sc.get(e),i=s.observationTargets.length===0;Zg(s.observationTargets,t)<0&&(i&&va.push(s),s.observationTargets.push(new h1(t,o&&o.box)),Yg(1),Af.schedule())},n.unobserve=function(e,t){var o=sc.get(e),s=Zg(o.observationTargets,t),i=o.observationTargets.length===1;s>=0&&(i&&va.splice(va.indexOf(o),1),o.observationTargets.splice(s,1),Yg(-1))},n.disconnect=function(e){var t=this,o=sc.get(e);o.observationTargets.slice().forEach(function(s){return t.unobserve(e,s.target)}),o.activeTargets.splice(0,o.activeTargets.length)},n}(),g1=function(){function n(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ic.connect(this,e)}return n.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Vg(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ic.observe(this,e,t)},n.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Vg(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ic.unobserve(this,e)},n.prototype.disconnect=function(){ic.disconnect(this)},n.toString=function(){return"function ResizeObserver () { [polyfill code] }"},n}();const Md=window.React,y1=window.Blueprint.Core.AbstractPureComponent2,b1=window.Blueprint.Core.DISPLAYNAME_PREFIX;var Jg=function(n){wp(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.targetRef=Md.createRef(),t.prevElement=void 0,t.observer=new g1(function(o){var s,i;return(i=(s=t.props).onResize)===null||i===void 0?void 0:i.call(s,o)}),t}return e.prototype.render=function(){var t=Md.Children.only(this.props.children);return this.props.targetRef!==void 0?t:Md.cloneElement(t,{ref:this.targetRef})},e.prototype.componentDidMount=function(){this.observeElement()},e.prototype.componentDidUpdate=function(t){this.observeElement(this.props.observeParents!==t.observeParents)},e.prototype.componentWillUnmount=function(){this.observer.disconnect()},e.prototype.observeElement=function(t){if(t===void 0&&(t=!1),!(this.targetRef.current instanceof Element)){this.observer.disconnect();return}if(!(this.targetRef.current===this.prevElement&&!t)&&(this.observer.disconnect(),this.prevElement=this.targetRef.current,this.observer.observe(this.targetRef.current),this.props.observeParents))for(var o=this.targetRef.current.parentElement;o!=null;)this.observer.observe(o),o=o.parentElement},e.displayName="".concat(b1,".ResizeSensor2"),e}(y1);const Ec=window.React;var v1=function(){return null},Op=Ec.createContext([{},v1]),w1=function(n,e){switch(e.type){case"FORCE_DISABLED_STATE":return{forceDisabled:!0};case"RESET_DISABLED_STATE":return{};default:return n}},bw=function(n){var e=n.children,t=n.forceDisable,o=Ec.useReducer(w1,{}),s=o[0],i=o[1];return Ec.useEffect(function(){i(t?{type:"FORCE_DISABLED_STATE"}:{type:"RESET_DISABLED_STATE"})},[t]),Ec.createElement(Op.Provider,{value:[s,i]},typeof e=="function"?e(s):e)};const lc=window.React,ey=window.Blueprint.Core.Classes,x1=window.Blueprint.Core.DISPLAYNAME_PREFIX;var vw=function(n){wp(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.popover=null,t.renderPopover=function(o){var s,i,c=t.props,u=c.children,f=c.disabled,m=c.intent,p=c.popoverClassName,g=Gv(c,["children","disabled","intent","popoverClassName"]),b=ds(sR,(s={},s[ey.MINIMAL]=t.props.minimal,s),ey.intentClass(m),p);return lc.createElement(Is,Bt({interactionKind:$r.HOVER_TARGET_ONLY,modifiers:{arrow:{enabled:!t.props.minimal},offset:{options:{offset:[0,VO/2]}}}},g,{autoFocus:!1,canEscapeKeyClose:!1,disabled:(i=o.forceDisabled)!==null&&i!==void 0?i:f,enforceFocus:!1,lazy:!0,popoverClassName:b,portalContainer:t.props.portalContainer,ref:function(v){return t.popover=v}}),u)},t}return e.prototype.render=function(){var t=this;return lc.createElement(Op.Consumer,null,function(o){var s=o[0];return lc.createElement(bw,Bt({},s),t.renderPopover)})},e.prototype.reposition=function(){this.popover!=null&&this.popover.reposition()},e.displayName="".concat(x1,".Tooltip2"),e.defaultProps={hoverCloseDelay:0,hoverOpenDelay:100,minimal:!1,transitionDuration:100},e}(lc.PureComponent);const An=window.React,C1=window.Blueprint.Core.AbstractPureComponent2,Jn=window.Blueprint.Core.Classes,E1=window.Blueprint.Core.DISPLAYNAME_PREFIX,ty=window.Blueprint.Core.Keys,S1=window.Blueprint.Core.refHandler,T1=window.Blueprint.Core.mergeRefs,_1=window.Blueprint.Core.Overlay,cc=window.Blueprint.Core.Utils;var $r={CLICK:"click",CLICK_TARGET_ONLY:"click-target",HOVER:"hover",HOVER_TARGET_ONLY:"hover-target"},Is=function(n){wp(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={hasDarkParent:!1,isOpen:t.getIsOpen(t.props)},t.popoverElement=null,t.targetElement=null,t.popoverRef=S1(t,"popoverElement",t.props.popoverRef),t.targetRef=function(o){return t.targetElement=o},t.isMouseInTargetOrPopover=!1,t.lostFocusOnSamePage=!0,t.isControlled=function(){return t.props.isOpen!==void 0},t.isArrowEnabled=function(){var o,s;return!t.props.minimal&&((s=(o=t.props.modifiers)===null||o===void 0?void 0:o.arrow)===null||s===void 0?void 0:s.enabled)!==!1},t.isHoverInteractionKind=function(){return t.props.interactionKind===$r.HOVER||t.props.interactionKind===$r.HOVER_TARGET_ONLY},t.reposition=function(){var o;return(o=t.popperScheduleUpdate)===null||o===void 0?void 0:o.call(t)},t.renderTarget=function(o){var s,i,c,u=o.ref,f=t.props,m=f.children,p=f.className,g=f.fill,b=f.openOnTargetFocus,v=f.renderTarget,w=t.state.isOpen,S=t.isControlled(),_=t.isHoverInteractionKind(),O=t.props.targetTagName;g&&(O="div");var D=T1(u,t.targetRef),M=_?{onBlur:t.handleTargetBlur,onContextMenu:t.handleTargetContextMenu,onFocus:t.handleTargetFocus,onMouseEnter:t.handleMouseEnter,onMouseLeave:t.handleMouseLeave}:{onClick:t.handleTargetClick,onKeyDown:function(he){return ty.isKeyboardClick(he.keyCode)&&t.handleTargetClick(he)}},W=b&&_?0:void 0,X=Bt({"aria-haspopup":"true",className:ds(p,oR,(s={},s[tR]=w,s[Jn.ACTIVE]=!S&&w&&!_,s)),ref:D},M),N;if(v!==void 0)N=v(Bt(Bt({},X),{isOpen:w,tabIndex:W}));else{var I=cc.ensureElement(An.Children.toArray(m)[0]);if(I===void 0)return null;var P=(i={},i[Jn.ACTIVE]=w&&!S&&!_,i[Jn.FILL]=g,i),$=An.cloneElement(I,{className:ds(I.props.className,P),disabled:w&&cc.isElementOfType(I,vw)?!0:I.props.disabled,tabIndex:(c=I.props.tabIndex)!==null&&c!==void 0?c:W}),ue=An.createElement(O,X,$);N=ue}return An.createElement(Jg,{targetRef:D,onResize:t.reposition},N)},t.renderPopover=function(o){var s,i,c=t.props,u=c.interactionKind,f=c.shouldReturnFocusOnClose,m=c.usePortal,p=t.state.isOpen,g=FO(o.placement,t.isArrowEnabled()?o.arrowProps.style:void 0);t.popperScheduleUpdate=o.update;var b={onClick:t.handlePopoverClick,onKeyDown:function(_){return ty.isKeyboardClick(_.keyCode)&&t.handlePopoverClick(_)}};(u===$r.HOVER||!m&&u===$r.HOVER_TARGET_ONLY)&&(b.onMouseEnter=t.handleMouseEnter,b.onMouseLeave=t.handleMouseLeave);var v=cu(o.placement),w=ds(Sn,(s={},s[Jn.DARK]=t.props.inheritDarkTheme&&t.state.hasDarkParent,s[Jn.MINIMAL]=t.props.minimal,s[Og]=t.props.captureDismiss,s[rR]=o.isReferenceHidden===!0,s[nR]=o.hasPopperEscaped===!0,s),"".concat(Jk,"-").concat(v),t.props.popoverClassName),S=t.isHoverInteractionKind()?!1:void 0;return An.createElement(_1,{autoFocus:(i=t.props.autoFocus)!==null&&i!==void 0?i:S,backdropClassName:Yk,backdropProps:t.props.backdropProps,canEscapeKeyClose:t.props.canEscapeKeyClose,canOutsideClickClose:t.props.interactionKind===$r.CLICK,enforceFocus:t.props.enforceFocus,hasBackdrop:t.props.hasBackdrop,isOpen:p,onClose:t.handleOverlayClose,onClosed:t.props.onClosed,onClosing:t.props.onClosing,onOpened:t.props.onOpened,onOpening:t.props.onOpening,transitionDuration:t.props.transitionDuration,transitionName:Sn,usePortal:t.props.usePortal,portalClassName:t.props.portalClassName,portalContainer:t.props.portalContainer,shouldReturnFocusOnClose:t.isHoverInteractionKind()?!1:f},An.createElement("div",{className:aR,ref:o.ref,style:o.style},An.createElement(Jg,{onResize:t.reposition},An.createElement("div",Bt({className:w,style:{transformOrigin:g},ref:t.popoverRef},b),t.isArrowEnabled()&&An.createElement(dw,{arrowProps:o.arrowProps,placement:o.placement}),An.createElement("div",{className:Zk},t.props.content)))))},t.handleTargetFocus=function(o){if(t.props.openOnTargetFocus&&t.isHoverInteractionKind()){if(o.relatedTarget==null&&!t.lostFocusOnSamePage)return;t.handleMouseEnter(o)}},t.handleTargetBlur=function(o){t.props.openOnTargetFocus&&t.isHoverInteractionKind()&&(o.relatedTarget!=null?o.relatedTarget!==t.popoverElement&&!t.isElementInPopover(o.relatedTarget)&&t.handleMouseLeave(o):t.handleMouseLeave(o)),t.lostFocusOnSamePage=o.relatedTarget!=null},t.handleTargetContextMenu=function(o){o.defaultPrevented&&t.setOpenState(!1,o)},t.handleMouseEnter=function(o){t.isMouseInTargetOrPopover=!0,!t.props.usePortal&&t.isElementInPopover(o.target)&&t.props.interactionKind===$r.HOVER_TARGET_ONLY&&!t.props.openOnTargetFocus?t.handleMouseLeave(o):t.props.disabled||t.setOpenState(!0,o,t.props.hoverOpenDelay)},t.handleMouseLeave=function(o){t.isMouseInTargetOrPopover=!1,t.setTimeout(function(){t.isMouseInTargetOrPopover||t.setOpenState(!1,o,t.props.hoverCloseDelay)})},t.handlePopoverClick=function(o){var s,i,c,u,f=o.target,m=f.closest(".".concat(Sn)),p=f.closest(".".concat(Jn.POPOVER)),g=(m??p)===t.getPopoverElement(),b=(i=(s=m?.classList.contains(Og))!==null&&s!==void 0?s:p?.classList.contains(Jn.POPOVER_CAPTURING_DISMISS))!==null&&i!==void 0?i:!1,v=f.closest(".".concat(_f,", .").concat(eR)),w=f.closest(".".concat(Jn.POPOVER_DISMISS,", .").concat(Jn.POPOVER_DISMISS_OVERRIDE)),S=(u=(c=v?.classList.contains(_f))!==null&&c!==void 0?c:w?.classList.contains(Jn.POPOVER_DISMISS))!==null&&u!==void 0?u:!1,_=f.closest(":disabled, .".concat(Jn.DISABLED))!=null;S&&!_&&(!b||g)&&t.setOpenState(!1,o)},t.handleOverlayClose=function(o){if(!(t.targetElement===null||o===void 0)){var s=o.target;(!cc.elementIsOrContains(t.targetElement,s)||o.nativeEvent instanceof KeyboardEvent)&&t.setOpenState(!1,o)}},t.handleTargetClick=function(o){!t.props.disabled&&!t.isElementInPopover(o.target)&&(t.props.isOpen==null?t.setState(function(s){return{isOpen:!s.isOpen}}):t.setOpenState(!t.props.isOpen,o))},t}return e.prototype.getPopoverElement=function(){var t;return(t=this.popoverElement)===null||t===void 0?void 0:t.querySelector(".".concat(Sn))},e.prototype.getIsOpen=function(t){var o;return t.disabled?!1:(o=t.isOpen)!==null&&o!==void 0?o:t.defaultIsOpen},e.prototype.render=function(){var t=this.props,o=t.disabled,s=t.content,i=t.placement,c=t.position,u=c===void 0?"auto":c,f=t.positioningStrategy,m=this.state.isOpen,p=s==null||typeof s=="string"&&s.trim()==="";return p?(!o&&m!==!1&&!cc.isNodeEnv("production")&&console.warn(dR),this.renderTarget({ref:k1})):An.createElement(gR,null,An.createElement(zO,null,this.renderTarget),An.createElement(LO,{innerRef:this.popoverRef,placement:i??KO(u),strategy:f,modifiers:this.getPopperModifiers()},this.renderPopover))},e.prototype.componentDidMount=function(){this.updateDarkParent()},e.prototype.componentDidUpdate=function(t,o){n.prototype.componentDidUpdate.call(this,t,o),this.updateDarkParent();var s=this.getIsOpen(this.props);this.props.isOpen!=null&&s!==this.state.isOpen?(this.setOpenState(s),this.setState({isOpen:s})):this.props.disabled&&this.state.isOpen&&this.props.isOpen==null&&this.setOpenState(!1)},e.prototype.validateProps=function(t){t.isOpen==null&&t.onInteraction!=null&&console.warn(hR),t.hasBackdrop&&!t.usePortal&&console.warn(fR),t.hasBackdrop&&t.interactionKind!==$r.CLICK&&console.warn(lR),t.placement!==void 0&&t.position!==void 0&&console.warn(pR);var o=An.Children.count(t.children),s=t.renderTarget!==void 0;o===0&&!s&&console.warn(iR),o>1&&console.warn(cR),o>0&&s&&console.warn(uR)},e.prototype.getPopperModifiers=function(){var t,o,s,i,c=this.props.modifiers;return[Bt({enabled:this.isArrowEnabled(),name:"arrow"},c?.arrow),Bt(Bt({name:"computeStyles"},c?.computeStyles),{options:Bt({adaptive:!0,gpuAcceleration:!1},(t=c?.computeStyles)===null||t===void 0?void 0:t.options)}),Bt(Bt({enabled:this.isArrowEnabled(),name:"offset"},c?.offset),{options:Bt({offset:[0,Bc/2]},(o=c?.offset)===null||o===void 0?void 0:o.options)}),Bt(Bt({name:"flip"},c?.flip),{options:Bt({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(s=c?.flip)===null||s===void 0?void 0:s.options)}),Bt(Bt({name:"preventOverflow"},c?.preventOverflow),{options:Bt({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(i=c?.preventOverflow)===null||i===void 0?void 0:i.options)})]},e.prototype.setOpenState=function(t,o,s){var i=this,c,u,f,m,p;(c=this.cancelOpenTimeout)===null||c===void 0||c.call(this),s!==void 0&&s>0?this.cancelOpenTimeout=this.setTimeout(function(){return i.setOpenState(t,o)},s):(this.props.isOpen==null?this.setState({isOpen:t}):(f=(u=this.props).onInteraction)===null||f===void 0||f.call(u,t,o),t||(p=(m=this.props).onClose)===null||p===void 0||p.call(m,o))},e.prototype.updateDarkParent=function(){if(this.props.usePortal&&this.state.isOpen){var t=this.targetElement!=null&&this.targetElement.closest(".".concat(Jn.DARK))!=null;this.setState({hasDarkParent:t})}},e.prototype.isElementInPopover=function(t){var o,s;return(s=(o=this.getPopoverElement())===null||o===void 0?void 0:o.contains(t))!==null&&s!==void 0?s:!1},e.displayName="".concat(E1,".Popover2"),e.defaultProps={boundary:"clippingParents",captureDismiss:!1,defaultIsOpen:!1,disabled:!1,fill:!1,hasBackdrop:!1,hoverCloseDelay:300,hoverOpenDelay:150,inheritDarkTheme:!0,interactionKind:$r.CLICK,minimal:!1,openOnTargetFocus:!0,positioningStrategy:"absolute",renderTarget:void 0,shouldReturnFocusOnClose:!1,targetTagName:"span",transitionDuration:300,usePortal:!0},e}(C1);function k1(){}const Yt=window.React,R1=window.Blueprint.Core.Classes,O1=window.Blueprint.Core.Portal,uc=window.Blueprint.Core.Utils,j1=window.Blueprint.Core.mergeRefs;var ww=Yt.forwardRef(function(n,e){var t,o,s=n.className,i=n.children,c=n.content,u=n.disabled,f=u===void 0?!1:u,m=n.onContextMenu,p=n.popoverProps,g=n.tagName,b=g===void 0?"div":g,v=Gv(n,["className","children","content","disabled","onContextMenu","popoverProps","tagName"]),w=Yt.useContext(Op),S=w[1],_=Yt.useState(void 0),O=_[0],D=_[1],M=Yt.useState(),W=M[0],X=M[1],N=Yt.useState(!1),I=N[0],P=N[1],$=Yt.useRef(null);Yt.useEffect(function(){P(!1),S({type:"RESET_DISABLED_STATE"})},[f]);var ue=Yt.useCallback(function(Le){return Le.preventDefault()},[]),he=Yt.useCallback(function(Le){Le||(P(!1),X(void 0),S({type:"RESET_DISABLED_STATE"}))},[]),ge=Yt.useCallback(function(Le){var Je=Le.ref;return Yt.createElement(O1,null,Yt.createElement("div",{className:Kk,style:O,ref:Je}))},[O]),ye=Yt.useMemo(function(){return uc.isDarkTheme($.current)},[$,I]),G={isOpen:I,mouseEvent:W,targetOffset:O},ve=f?void 0:uc.isFunction(c)?c(G):c,ie=ve===void 0?void 0:Yt.createElement(Is,Bt({},p,{content:Yt.createElement("div",{onContextMenu:ue},ve),enforceFocus:!1,key:A1(O),hasBackdrop:!0,backdropProps:{className:Gk},isOpen:I,minimal:!0,onInteraction:he,popoverClassName:ds(Xk,p?.popoverClassName,(t={},t[R1.DARK]=ye,t)),placement:"right-start",positioningStrategy:"fixed",rootBoundary:"viewport",renderTarget:ge,transitionDuration:(o=p?.transitionDuration)!==null&&o!==void 0?o:100})),we=Yt.useCallback(function(Le){if(!Le.defaultPrevented){var Je=!f&&(uc.isFunction(i)||ie!==void 0);Je&&(Le.preventDefault(),Le.persist(),X(Le),D({left:Le.clientX,top:Le.clientY}),P(!0),S({type:"FORCE_DISABLED_STATE"})),m?.(Le)}},[m,f]),ze=ds(s,iu),Xe=uc.isFunction(i)?i({className:ze,contentProps:G,onContextMenu:we,popover:ie,ref:$}):Yt.createElement(Yt.Fragment,null,ie,Yt.createElement(b,Bt({className:ze,onContextMenu:we,ref:j1($,e)},v),i));return Yt.createElement(bw,{forceDisable:I},Xe)});ww.displayName="Blueprint.ContextMenu2";function A1(n){return n===void 0?"default":"".concat(n.left,"x").concat(n.top)}const I1=window.React.memo,Ei=window.React.useCallback,dc=window.React.useMemo,P1=window.Blueprint.Core.Button,N1=window.Blueprint.Core.Intent,ny=window.Blueprint.Core.Menu,Bd=window.Blueprint.Core.MenuDivider,pa=window.Blueprint.Core.MenuItem,L1={autoFocus:!0,boundary:"window",className:"zr-library-item-popover",interactionKind:$r.HOVER,lazy:!0,placement:"right-start",popoverClassName:H.POPOVER},rl=I1(function(e){const{closeDialog:t,inGraph:o,item:s,notes:i=[],pdfs:c=[]}=e,[u]=Os(),[f]=Zi(),[m]=Ra(),[p]=Oa(),[,g]=Wo(),b=Ei(()=>{t&&t()},[t]),v=dc(()=>o?{className:H.TEXT_SMALL,onClick:()=>xf(o)}:{className:[H.TEXT_SMALL,H.TEXT_AUXILIARY].join(" ")},[o]),w=dc(()=>d.jsxs(d.Fragment,{children:[d.jsx(pa,{icon:"application",text:"Open in Zotero (app)",href:_s(s,{format:"target"}),target:"_blank"}),d.jsx(pa,{icon:"cloud",text:"Open in Zotero (web)",href:ks(s,{format:"target"}),target:"_blank"})]}),[s]),S=Ei(async()=>{const X=await nu({item:s,pdfs:c,notes:i},o,f,p,m,u);return X.success&&X.page.new&&g(),X},[u,o,s,f,c,i,m,p,g]),_=Ei(async()=>{const{success:X,args:{uid:N}}=await S();X&&dg(N)},[S]),O=Ei(()=>{o!=!1&&(xf(o),b())},[b,o]),D=Ei(()=>{o!=!1&&dg(o)},[o]),M=dc(()=>{if(c.length>0){const X=s.library.type=="group"?"groups/"+s.library.id:"library";return d.jsxs(d.Fragment,{children:[d.jsx(Bd,{title:"PDF Attachments"}),c.map((N,I)=>{const P=["linked_file","imported_file","imported_url"].includes(N.data.linkMode)?`zotero://open-pdf/${X}/items/${N.data.key}`:N.data.url;return d.jsx(pa,{href:P,icon:"paperclip",rel:"noreferrer",target:"_blank",text:N.data.filename||N.data.title},I)})]})}else return null},[s.library,c]),W=dc(()=>o?d.jsxs(ny,{className:H.TEXT_SMALL,children:[d.jsx(pa,{icon:"arrow-right",text:"Go to Roam page",onClick:O}),d.jsx(pa,{icon:"inheritance",text:"Open in sidebar",onClick:D}),d.jsx(Bd,{}),w,M]}):d.jsxs(ny,{className:H.TEXT_SMALL,children:[d.jsx(pa,{icon:"add",text:"Import metadata",onClick:S}),d.jsx(pa,{icon:"inheritance",text:"Import & open in sidebar",onClick:_}),d.jsx(Bd,{}),w,M]}),[S,_,o,O,D,M,w]);return d.jsx(Is,{...L1,content:W,children:d.jsx(P1,{intent:o!=!1?N1.SUCCESS:void 0,minimal:!0,rightIcon:"chevron-right",small:!0,text:"@"+s.key,...v})})}),D1=window.Blueprint.Core.Button,M1=window.Blueprint.Core.Classes,B1=window.Blueprint.Core.Drawer,z1=window.Blueprint.Core.Tab,ry=window.Blueprint.Core.Tabs;function F1({item:n}){return d.jsx("pre",{className:[M1.CODE_BLOCK,H.TEXT_AUXILIARY].join(" "),children:JSON.stringify(n,null,"  ")})}function jp({item:n,isOpen:e,onClose:t}){return d.jsx(B1,{canEscapeKeyClose:!1,canOutsideClickClose:!0,className:H.PREFIX_DRAWER+"data",isOpen:e,lazy:!1,onClose:t,size:"40%",children:d.jsx(Nn,{children:d.jsxs(ry,{animate:!1,className:H.TABS_MINIMAL,id:"zr-drawer--data",children:[d.jsx(z1,{id:"item",panel:d.jsx(F1,{item:n}),title:"Item"}),d.jsx(ry.Expander,{}),d.jsx(D1,{icon:"cross",minimal:!0,onClick:t})]})})})}const $1=window.React.memo,oy=window.React.useCallback,U1=window.React.useMemo,ay=window.Blueprint.Core.Button,q1=window.Blueprint.Core.ControlGroup,Xo=({className:n=null,children:e,...t})=>d.jsx("li",{className:[n,H.DATALIST_ITEM].filter(Tt).join(" "),...t,children:e}),Ps=({children:n})=>d.jsx("ul",{className:H.DATALIST_WRAPPER,children:n}),uu=$1(function({arrows:e="last",currentPage:t,itemsPerPage:o=30,nbItems:s,setCurrentPage:i}){const c=U1(()=>s==0?0:Math.ceil(s/o),[o,s]),u=oy(()=>{t<c&&i(t+1)},[t,c,i]),f=oy(()=>{t>1&&i(t-1)},[t,i]),m=d.jsxs("span",{className:H.TEXT_SMALL,"zr-role":"items-count",children:[d.jsxs("strong",{children:[(t-1)*o+1,"-",Math.min(t*o,s)]})," / ",Xt(s,"item")]}),p=d.jsxs(q1,{children:[d.jsx(ay,{"aria-disabled":t==1,disabled:t==1,icon:"chevron-left",minimal:!0,onClick:f,title:"Go to previous page of results"}),d.jsx(ay,{"aria-disabled":t>=c,disabled:t>=c,icon:"chevron-right",minimal:!0,onClick:u,title:"Go to next page of results"})]});return d.jsx("div",{className:H.DATALIST_PAGINATION,children:s>0?d.jsxs(d.Fragment,{children:[e=="first"&&p,m,e=="last"&&p]}):null})}),Uo=({children:n})=>d.jsx("div",{className:H.DATALIST_TOOLBAR,children:n});function H1(n){return n.map(e=>{const{dateAdded:t,dateModified:o,parentItem:s,note:i,tags:c}=e.data,u=e.library.type+"s/"+e.library.id,m=`zotero://select/${u.startsWith("groups/")?u:"library"}/items/${e.key}`;return{date_added:t,date_modified:o,key:e.key,location:u,link_note:m,note:i,parent_item:s,raw:e,tags:c.map(p=>p.tag)}})}const V1=window.React.memo,zc=window.React.useMemo,xw=window.Blueprint.Core.Button,Cw=window.Blueprint.Core.ButtonGroup,If=window.Blueprint.Core.Classes,W1=window.Blueprint.Core.Dialog,Q1=window.Blueprint.Core.Drawer,K1=window.Blueprint.Core.Icon,sy=window.Blueprint.Core.Tab,iy=window.Blueprint.Core.Tabs,Ew=window.Blueprint.Core.Tag;function Sw({item:n}){const[e,{on:t,off:o}]=Lt(!1);return d.jsxs(d.Fragment,{children:[d.jsx(xw,{icon:"eye-open",minimal:!0,onClick:t}),d.jsx(W1,{canEscapeKeyClose:!1,className:"zr-raw-item-dialog",isOpen:e,lazy:!0,onClose:o,children:d.jsx("div",{className:If.DIALOG_BODY,children:d.jsx("pre",{className:[If.CODE_BLOCK,H.TEXT_AUXILIARY].join(" "),children:JSON.stringify(n,null,"  ")})})})]})}function X1({annot:n}){const{color:e,comment:t,date_modified:o,link_page:s,link_pdf:i,page_label:c,raw:u,tags:f,text:m,type:p}=n,g=zc(()=>({backgroundImage:`linear-gradient(120deg, ${e}50 0%, ${e}50 100%)`}),[e]);return d.jsxs("div",{className:[H.PREFIX_DRAWER+"notes-card",H.TEXT_SMALL].join(" "),children:[d.jsxs("div",{"zr-role":"card-header",children:[d.jsx("span",{children:f.map((b,v)=>d.jsx(Ew,{minimal:!0,children:b},v))}),d.jsxs(Cw,{minimal:!0,children:[d.jsx(Sw,{item:u}),d.jsx(yr,{className:H.TEXT_SMALL,href:i,icon:"paperclip",children:"PDF"}),d.jsxs(yr,{className:H.TEXT_SMALL,href:s,children:["Page ",c]})]})]}),d.jsxs("div",{className:"zr-annotation--highlight",children:[m&&d.jsx("span",{style:g,children:m}),p=="image"&&d.jsx("code",{className:If.CODE,children:"Images are currently not supported"})]}),t&&d.jsxs("div",{className:"zr-annotation--comment",children:[d.jsx(K1,{icon:"nest",intent:"primary",size:14}),t]}),d.jsx("div",{"zr-role":"card-footer",children:d.jsx("span",{className:H.TEXT_SECONDARY,children:mp(o)})})]})}function G1({note:n}){const{date_modified:e,link_note:t,raw:o,tags:s}=n,[i]=Ra(),c=zc(()=>jv([o],i),[i,o]);return d.jsxs("div",{className:[H.PREFIX_DRAWER+"notes-card",H.TEXT_SMALL].join(" "),children:[d.jsxs("div",{"zr-role":"card-header",children:[d.jsx("span",{children:s.map((u,f)=>d.jsx(Ew,{minimal:!0,children:u},f))}),d.jsxs(Cw,{minimal:!0,children:[d.jsx(Sw,{item:o}),d.jsx(yr,{className:H.TEXT_SMALL,href:t,icon:"comment",children:"View in Zotero"})]})]}),c.map((u,f)=>d.jsx("div",{className:"zr-note--contents",children:u},f)),d.jsx("div",{"zr-role":"card-footer",children:d.jsx("span",{className:H.TEXT_SECONDARY,children:mp(e)})})]})}function Y1({annots:n}){const e=ru(n).sort((t,o)=>fp(t.sortIndex,o.sortIndex));return d.jsx(d.Fragment,{children:e.map(t=>d.jsx(X1,{annot:t},t.key))})}function Z1({notes:n}){const e=H1(n);return d.jsx(d.Fragment,{children:e.map(t=>d.jsx(G1,{note:t},t.key))})}const du=V1(function(e){const{isOpen:t,notes:o,onClose:s}=e,i=zc(()=>o.filter(Ts),[o]),c=zc(()=>o.filter(Gi),[o]);return d.jsx(Q1,{canEscapeKeyClose:!1,canOutsideClickClose:!0,className:H.PREFIX_DRAWER+"notes",isOpen:t,lazy:!1,onClose:s,size:"40%",children:d.jsx(Nn,{children:d.jsxs(iy,{animate:!1,className:H.TABS_MINIMAL,id:"zr-drawer--notes",children:[i.length>0&&d.jsx(sy,{id:"annotations",panel:d.jsx(Y1,{annots:i}),title:"Annotations"}),c.length>0&&d.jsx(sy,{id:"notes",panel:d.jsx(Z1,{notes:c}),title:"Notes"}),d.jsx(iy.Expander,{}),d.jsx(xw,{icon:"cross",minimal:!0,onClick:s})]})})})}),ly=window.Blueprint.Core.Button;function J1({item:n,onClose:e}){const{children:t,inGraph:o,itemType:s,meta:i,publication:c,raw:u,title:f}=n,[m,{on:p,off:g}]=Lt(!1),[b,{on:v,off:w}]=Lt(!1);return d.jsxs(d.Fragment,{children:[d.jsx(Xo,{className:"zr-query--result",children:d.jsxs("div",{"zr-role":"item-header",children:[d.jsxs("div",{"zr-role":"item-details",children:[d.jsx("span",{className:H.TEXT_AUXILIARY,"data-item-type":s,"zr-role":"item-title",children:f}),d.jsx("span",{className:H.TEXT_ACCENT_1,children:i}),d.jsx("span",{className:H.TEXT_SECONDARY,children:c}),d.jsx(ly,{icon:"eye-open",minimal:!0,onClick:p,title:"Show the item's raw metadata"}),t.notes.length>0?d.jsx(ly,{className:H.TEXT_SMALL,icon:"duplicate",minimal:!0,text:Xt(t.notes.length,"linked note"),onClick:v,title:"Show the item's linked notes"}):null]}),d.jsx(rl,{closeDialog:e,inGraph:o,item:u,notes:t.notes,pdfs:t.pdfs})]})}),d.jsx(jp,{item:u,isOpen:m,onClose:g}),t.notes.length>0&&d.jsx(du,{notes:t.notes,isOpen:b,onClose:w})]})}const ej=window.React.useMemo,Tw=window.ChronoNode.parse,tj=n=>{const e=Tw(n,void 0,{forwardDate:!1});if(!e.length)return null;const t=e[0].refDate,o=e[0].start,s=o.date();return o.isCertain("year")||s.setFullYear(t.getFullYear()),o.isCertain("hour")||s.setHours(0,0,0,0),s},nj=n=>{const e=Tw(n,void 0,{forwardDate:!1});if(!e.length)return null;const t=e[0].refDate,o=e[0].start,s=o.date();o.isCertain("year")||s.setFullYear(t.getFullYear()),o.isCertain("hour")||s.setHours(0,0,0,0);const i=e[0].end;let c=t;return i&&(c=i.date(),i.isCertain("year")||c.setFullYear(t.getFullYear()),i.isCertain("day")||(c.getMonth()===11?c.setFullYear(c.getFullYear()+1,0,0):c.setMonth(c.getMonth()+1,0)),i.isCertain("hour")||(c.setDate(c.getDate()+1),c.setHours(0,0,0,0))),console.log({parsedStart:o,parsedEnd:i,startDate:s,endDate:c}),[s,c]},rj=()=>{const[n]=Oa();return{filters:ej(()=>[{label:"Abstract matches",value:"abstract",presets:[],evaluate:(t,o)=>o.abstract?ar(t,o.abstract,{word_order:"loose"}):!1},{label:"Abstract exists",value:"hasAbstract",presets:[{label:"Yes",value:"true"},{label:"No",value:"false"}],evaluate:(t,o)=>{const s=t=="true";return!!o.abstract===s}},{label:"Citekey exists",value:"hasCitekey",presets:[{label:"Yes",value:"true"},{label:"No",value:"false"}],evaluate:(t,o)=>{const s=t=="true";return!!o.raw.has_citekey===s}},{label:"DOI exists",value:"hasDOI",presets:[{label:"Yes",value:"true"},{label:"No",value:"false"}],evaluate:(t,o)=>{const s=t=="true";return!!o.raw.data.DOI===s}},{label:"Item added before",value:"addedBefore",presets:[{label:"Today",value:"today"},{label:"This week",value:'"this week"'},{label:"This year",value:'"this year"'}],evaluate:(t,o)=>{const s=tj(t);return s===null?!1:new Date(o.raw.data.dateAdded)<s}},{label:"Item added between",value:"addedBetween",presets:[],evaluate:(t,o)=>{const s=nj(t);if(s===null)return!1;const i=new Date(o.raw.data.dateAdded);return s[0]<i&&i<s[1]}},{label:"Item type matches",value:"type",presets:Object.entries(n).map(([t,o])=>({label:o,value:t})),evaluate:(t,o)=>o.itemType===t},{label:"Item has linked notes",value:"hasNotes",presets:[{label:"Yes",value:"true"},{label:"No",value:"false"}],evaluate:(t,o)=>{const s=t=="true";return o.children.notes.length>0===s}},{label:"Item has linked PDFs",value:"hasPDFs",presets:[{label:"Yes",value:"true"},{label:"No",value:"false"}],evaluate:(t,o)=>{const s=t=="true";return o.children.pdfs.length>0===s}},{label:"Roam page exists",value:"inRoam",presets:[{label:"Yes",value:"true"},{label:"No",value:"false"}],evaluate:(t,o)=>{const s=t=="true";return!!o.inGraph===s}},{label:"Tags include",value:"tags",presets:[],evaluate:(t,o)=>ar(t,o.tags,{match:"exact"})}],[n])}},oj=[{label:"Tags include",value:"tags",presets:[],evaluate:(n,e)=>Ts(e)?ar(n,e.data.tags.map(t=>t.tag),{match:"exact"}):!1}],aj=[{label:"Tags include",value:"tags",presets:[],evaluate:(n,e)=>ar(n,e.tags,{match:"exact"})}],cs=window.React.useCallback,cy=window.React.useEffect,sj=window.React.useRef,zd=window.React.useState,Fc=window.Blueprint.Core.Classes,ij=window.Blueprint.Core.Icon,lj=window.Blueprint.Core.InputGroup,cj=window.Blueprint.Core.MenuItem,uj=window.Blueprint.Core.NonIdealState,dj=window.Blueprint.Core.Tag,fj=window.Blueprint.Select.QueryList,uy=20,pj=d.jsx(ij,{icon:"search",intent:"primary",htmlTitle:"Add search filters",size:14,title:"Add search filters"}),hj=(n,e)=>{const{handleClick:t,modifiers:o}=e,s="presets"in n;return d.jsx(cj,{"aria-selected":o.active,className:"zr-explorer-suggestion","data-testid":"explorer-suggestion",labelClassName:Fc.CODE,labelElement:n.value+(s?":":""),onClick:t,role:"menuitem",tagName:"div",text:d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"zr-explorer-suggestion--label",children:n.label}),d.jsx("span",{className:"zr-details zr-auxiliary",children:s?n.presets.map(i=>i.label).join(" / "):null})]}),textClassName:[Fc.TEXT_OVERFLOW_ELLIPSIS,"zr-explorer-suggestion--contents"].join(" ")},n.value)};function Ap({filters:n,items:e,onQueryChange:t,query:o,renderItem:s,search_field:i}){const c=sj(null),[u,f]=zd(()=>c.current?.selectionStart||0),m=cs(()=>{const $=c.current?.selectionStart;$!=null&&f($)},[c,f]),p=cs($=>{c.current?.focus(),c.current?.setSelectionRange($,null,"none"),m()},[c,m]),g=cs($=>{m(),t($)},[t,m]),{applySuggestion:b,search:v,suggestions:w}=eT({cursorPosition:u,filters:n,handleQueryChange:g,query:o,search_field:i,setCursorPosition:p}),[S,_]=zd(()=>v(e)),{currentPage:O,pageLimits:D,setCurrentPage:M}=ou({itemsPerPage:uy}),[W,X]=zd(!1),N=cs(()=>{_(v(e))},[e,v,_]),I=cs(($,ue)=>{b($)},[b]),P=cs($=>{const{handleKeyUp:ue,handleKeyDown:he,handleQueryChange:ge,itemList:ye,query:G}=$,ve=ie=>{ie.relatedTarget?.closest("#zr-explorer-suggestions")||X(!1)};return d.jsxs("div",{className:"zr-explorer-search-wrapper",children:[d.jsx(lj,{autoComplete:"off",className:[Fc.INPUT,Fc.FILL,"zr-explorer-search-input-group"].join(" "),"data-testid":"explorer-searchbar",id:"zr-explorer-searchbar",inputRef:c,leftElement:pj,onBlur:ve,onChange:ge,onFocus:()=>X(!0),onKeyDown:he,onKeyUp:ue,placeholder:"Start typing to see suggestions",rightElement:d.jsx(dj,{intent:"primary",interactive:!0,minimal:!0,onClick:N,children:"Enter"}),spellCheck:"false",type:"text",value:G}),W&&d.jsx("div",{id:"zr-explorer-suggestions",style:{position:"absolute",width:"100%"},children:ye})]})},[N,c,W]);return cy(()=>(document.addEventListener("selectionchange",m),()=>document.removeEventListener("selectionchange",m)),[m]),cy(()=>{M(1)},[S.length,M]),d.jsxs(d.Fragment,{children:[d.jsx(Uo,{children:d.jsx(fj,{itemRenderer:hj,items:w,itemsEqual:"value",onItemSelect:I,onQueryChange:g,query:o,renderer:P})}),d.jsx("div",{className:"zr-queryitems--datalist",children:S.length==0?d.jsx(uj,{className:H.TEXT_AUXILIARY,description:"No items to display"}):d.jsx(Ps,{children:S.slice(...D).map($=>s($))})}),d.jsx(Uo,{children:d.jsx(uu,{arrows:"first",currentPage:O,itemsPerPage:uy,nbItems:S.length,setCurrentPage:M})})]})}const mj=window.React.useCallback,gj=window.React.useEffect,dy=window.React.useState,yj=window.Blueprint.Core.Spinner;function bj(n,e){return new Promise(t=>{setTimeout(()=>{const o=n.items.map(s=>{const i=s.data.key,c=s.library.type+"s/"+s.library.id,{pdfs:u,notes:f}=_a(i,c,{pdfs:n.pdfs,notes:n.notes});return dp(s,u,f,e)});t(o)},0)})}function vj({itemList:n,onClose:e}){const[t]=Wo(),[o,s]=dy(null),{filters:i}=rj(),[c,u]=dy(""),f=mj(m=>d.jsx(J1,{item:m,onClose:e},[m.location,m.key].join("-")),[e]);return gj(()=>{n&&bj(n,t).then(m=>{s(m)})},[n,t]),o==null?d.jsx(yj,{size:15}):d.jsx(Ap,{filters:i,items:o,onQueryChange:u,query:c,renderItem:f})}const wj=window.React.useEffect,fy=window.React.useState,xj=window.Blueprint.Core.Spinner,Cj=n=>d.jsx(Xo,{children:n.key},[n.library.id,n.key].join(" "));function Ej({itemList:n}){const[e,t]=fy(null),[o,s]=fy("");return wj(()=>{n&&t(n.notes)},[n]),e==null?d.jsx(xj,{size:15}):d.jsx(Ap,{filters:oj,items:e,onQueryChange:s,query:o,renderItem:Cj})}const py=window.Blueprint.Core.Button;function Sj({item:n}){const[e,{on:t,off:o}]=Lt(!1),[s,{on:i,off:c}]=Lt(!1);return d.jsxs(d.Fragment,{children:[d.jsx(Xo,{className:"zr-query--result",children:d.jsxs("div",{"zr-role":"item-header",children:[d.jsxs("div",{"zr-role":"item-details",children:[d.jsx("span",{className:H.TEXT_AUXILIARY,"zr-role":"item-title",children:n.title}),n.parent.key&&d.jsxs("span",{className:H.TEXT_ACCENT_1,children:["@",n.parent.key]}),d.jsx(py,{className:H.TEXT_SMALL,icon:"eye-open",minimal:!0,onClick:t,title:"Show the item's raw metadata"}),n.annotations.length>0?d.jsx(py,{className:H.TEXT_SMALL,icon:"duplicate",minimal:!0,text:Xt(n.annotations.length,"linked note"),onClick:i}):null]}),d.jsx(yr,{className:H.TEXT_SMALL,href:n.link,icon:"paperclip",children:"Open PDF"})]})}),d.jsx(jp,{item:n.raw,isOpen:e,onClose:o}),n.annotations.length>0&&d.jsx(du,{notes:n.annotations,isOpen:s,onClose:c})]})}function Tj(n,e={},t=[]){return{annotations:t,key:n.data.key,link:hp(n,"href"),parent:e,title:n.data.filename||n.data.title,raw:n,tags:n.data.tags.map(o=>o.tag)}}function _j(n,e,t,{items:o=[],notes:s=[]}){const i=o.find(u=>u.data.key==e&&u.library.type+"s/"+u.library.id==t),c=s.filter(Ts).filter(u=>u.data.parentItem==n&&u.library.type+"s/"+u.library.id==t);return{parent:i,annotations:c}}const kj=window.React.useEffect,hy=window.React.useState,Rj=window.Blueprint.Core.Spinner;function Oj(n){return new Promise(e=>{setTimeout(()=>{const t=n.pdfs.map(o=>{const s=o.data.key,i=o.data.parentItem,c=o.library.type+"s/"+o.library.id,{parent:u,annotations:f}=_j(s,i,c,{items:n.items,notes:n.notes});return Tj(o,u,f)});e(t)},0)})}const jj=n=>d.jsx(Sj,{item:n},n.key);function Aj({itemList:n}){const[e,t]=hy(null),[o,s]=hy("");return kj(()=>{n&&Oj(n).then(i=>{t(i)})},[n]),e==null?d.jsx(Rj,{size:15}):d.jsx(Ap,{filters:aj,items:e,onQueryChange:s,query:o,renderItem:jj})}const Ij=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var Pj=n=>!Ij.has(n&&n.code);const Nj=Kc(Pj),Ip="axios-retry";function _w(n){const e=["ERR_CANCELED","ECONNABORTED"];return n.response||!n.code||e.includes(n.code)?!1:Nj(n)}const kw=["get","head","options"],Lj=kw.concat(["put","delete"]);function Pp(n){return n.code!=="ECONNABORTED"&&(!n.response||n.response.status===429||n.response.status>=500&&n.response.status<=599)}function Dj(n){return n.config?.method?Pp(n)&&kw.indexOf(n.config.method)!==-1:!1}function Rw(n){return n.config?.method?Pp(n)&&Lj.indexOf(n.config.method)!==-1:!1}function Ow(n){return _w(n)||Rw(n)}function jw(n=void 0){const e=n?.response?.headers["retry-after"];if(!e)return 0;let t=(Number(e)||0)*1e3;return t===0&&(t=(new Date(e).valueOf()||0)-Date.now()),Math.max(0,t)}function Mj(n=0,e=void 0){return Math.max(0,jw(e))}function Bj(n=0,e=void 0,t=100){const o=2**n*t,s=Math.max(o,jw(e)),i=s*.2*Math.random();return s+i}const zj={retries:3,retryCondition:Ow,retryDelay:Mj,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function Fj(n,e){return{...zj,...e,...n[Ip]}}function my(n,e,t=!1){const o=Fj(n,e||{});return o.retryCount=o.retryCount||0,(!o.lastRequestTime||t)&&(o.lastRequestTime=Date.now()),n[Ip]=o,o}function $j(n,e){n.defaults.agent===e.agent&&delete e.agent,n.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,n.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}async function Uj(n,e){const{retries:t,retryCondition:o}=n,s=(n.retryCount||0)<t&&o(e);if(typeof s=="object")try{return await s!==!1}catch{return!1}return s}async function qj(n,e,t,o){e.retryCount+=1;const{retryDelay:s,shouldResetTimeout:i,onRetry:c}=e,u=s(e.retryCount,t);if($j(n,o),!i&&o.timeout&&e.lastRequestTime){const f=Date.now()-e.lastRequestTime,m=o.timeout-f-u;if(m<=0)return Promise.reject(t);o.timeout=m}return o.transformRequest=[f=>f],await c(e.retryCount,t,o),o.signal?.aborted?Promise.resolve(n(o)):new Promise(f=>{const m=()=>{clearTimeout(p),f(n(o))},p=setTimeout(()=>{f(n(o)),o.signal?.removeEventListener&&o.signal.removeEventListener("abort",m)},u);o.signal?.addEventListener&&o.signal.addEventListener("abort",m,{once:!0})})}async function Hj(n,e){n.retryCount>=n.retries&&await n.onMaxRetryTimesExceeded(e,n.retryCount)}const Go=(n,e)=>{const t=n.interceptors.request.use(s=>(my(s,e,!0),s[Ip]?.validateResponse&&(s.validateStatus=()=>!1),s)),o=n.interceptors.response.use(null,async s=>{const{config:i}=s;if(!i)return Promise.reject(s);const c=my(i,e);return s.response&&c.validateResponse?.(s.response)?s.response:await Uj(c,s)?qj(n,c,s,i):(await Hj(c,s),Promise.reject(s))});return{requestInterceptorId:t,responseInterceptorId:o}};Go.isNetworkError=_w;Go.isSafeRequestError=Dj;Go.isIdempotentRequestError=Rw;Go.isNetworkOrIdempotentRequestError=Ow;Go.exponentialDelay=Bj;Go.isRetryableError=Pp;function gy(n,e){return[n,e].forEach(t=>{if(t.constructor!==Object||!t.tag||!t.meta)throw new Error(`Received bad input: ${JSON.stringify(t)}, expected a Zotero tag`);if(t.meta.type===void 0)throw new Error(`Received bad input: ${JSON.stringify(t)}, expected the tag to have a type`)}),n.meta.type==e.meta.type&&n.tag==e.tag}function Vj(n,e){const t=[],o=Array.from(n).sort((s,i)=>s>i?-1:1);for(const s of o)try{const i=t.findIndex(u=>ar(s,u.token,{any_case:!0,match:"exact",search_compounds:!0})),c=e.get(s);i==-1?t.push({token:s.toLowerCase(),roam:[],zotero:Array.isArray(c)?c:[c]}):Array.isArray(c)?t[i].zotero.push(...c):t[i].zotero.push(c)}catch(i){throw new Error(`Failed to categorize ${s}: `+i.message)}return t.sort((s,i)=>s.token<i.token?-1:1)}function Wj(n){return[...n].map(t=>{let{key:o}=t,s=!1;return typeof t.data.extra<"u"&&t.data.extra.includes("Citation Key: ")&&(o=t.data.extra.match("Citation Key: (.+)")?.[1]||o,s=!0),{...t,key:o,has_citekey:s}})}function Qj(n){try{const e=Kj(n),t=SS(Array.from(e.keys())),o=Object.keys(t).sort((i,c)=>i<c?-1:1),s={};return o.forEach(i=>{s[i]=Vj(t[i],e)}),s}catch(e){throw new Error("Could not create tag list : "+e.message)}}function Kj(n){return n.reduce((e,t)=>Xj(e,t),new Map)}function Aw(n,e=[],{with_citekey:t=!1}={}){const{modified:o=[],deleted:s=[]}=n,i=t?Wj([...o]):[...o],c=[...s],u=c.length==0?e:e.filter(f=>!c.includes(f.data.key));if(i.length==0)return u;if(u.length==0)return i;{const[...f]=u;return i.forEach(m=>{const p=f.findIndex(g=>g.data.key==m.data.key);p==-1?f.push(m):f[p]=m}),f}}function Xj(n,e){const{tag:t}=e;if(n.has(t)){const o=n.get(t);if(Array.isArray(o))o.every(s=>!gy(e,s))&&n.set(t,[...o,e]);else if(typeof o=="object")gy(e,o)||n.set(t,[o,e]);else throw new Error(`Map entry is of unexpected type ${typeof o}, expected Array or Object`)}else n.set(t,e);return n}async function Gj(n,e){const{apikey:t,library:{path:o},...s}=n,i=["items",o,{...s}],{data:c=[],lastUpdated:u=0}=e.getQueryData(i)||{};return await tA({...n,since:u},{match:c},e)}const Er=qt.create({baseURL:"https://api.zotero.org/",headers:{"Zotero-API-Version":3}});Go(Er,{retries:2,retryCondition:n=>{if(n.response){const{status:e}=n.response;return e==429||e>=500}else return!0},retryDelay:(n,e)=>{if(e.response){const{headers:t}=e.response;return(Number(t.backoff)||Number(t["retry-after"])||n)*1e3}else return n*3e3}});async function Yj(n,e,t){const{apikey:o,path:s}=e;n.length>50&&window.zoteroRoam?.warn?.({origin:"API",message:"API limits exceeded",detail:"Only 50 Zotero tags can be deleted at once. Any additional tags selected will be ignored."});const i=n.slice(0,50).map(c=>encodeURIComponent(c)).join(" || ");return await Er.delete(`${s}/tags`,{headers:{"Zotero-API-Key":o,"If-Unmodified-Since-Version":t},params:{tag:i}})}async function Np(n,e){const{dataURI:t,apikey:o,since:s=null}=n,i=Math.ceil(e/100-1),c=[];for(let f=1;f<=i;f++){const m=new URLSearchParams("");s&&m.set("since",`${s}`),m.set("start",`${100*f}`),m.set("limit","100"),c.push(Er.get(`${t}?${m.toString()}`,{headers:{"Zotero-API-Key":o}}))}let u=[null];try{const f=await Promise.all(c);return u=f,f.map(m=>m.data).flat(1)}catch(f){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch additional data",context:{dataURI:t,error:Kt(f),responses:u,totalResults:e}}),Promise.reject(f)}}async function Zj(n,e){const{apikey:t,path:o}=e,s=[],i=Math.ceil(n.length/100);for(let u=1;u<=i;u++){const f=n.slice(100*(u-1),100*u);s.push(Er.get(`${o}/items`,{headers:{"Zotero-API-Key":t},params:{include:"biblatex",itemKey:f.join(",")}}))}return(await Promise.all(s)).map(u=>u.data).flat(1).map(u=>u.biblatex).join(`
`)}async function Jj(n,e,t={}){const{apikey:o,path:s}=e,i=`${s}/items/${n}`,{linkwrap:c=0,locale:u="en-US",style:f="chicago-note-bibliography"}=t;let m;try{const{data:p,...g}=await Er.get(i,{headers:{"Zotero-API-Key":o},params:{include:"bib",linkwrap:c,locale:u,style:f}});return m={data:p,...g},p.bib}catch(p){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch bibliography",context:{config:t,dataURI:i,error:Kt(p),response:m}}),Promise.reject(p)}}async function eA(n,e=0,{match:t=[]}){const{apikey:o,path:s}=n,i={data:null,error:null,library:s,since:e,success:!1};let c,u,f;try{const{data:m,headers:p,...g}=await Er.get(`${s}/collections`,{headers:{"Zotero-API-Key":o},params:{since:e}});c={data:m,headers:p,...g},u=m;const{"last-modified-version":b,"total-results":v}=p,w=Number(v);if(w>100){const S=await Np({dataURI:`${s}/collections`,apikey:o,since:e},w);u.push(...S)}if(e>0&&u.length>0){const{collections:S=[]}=await Iw(n,e);f=S,uo({...i,data:u,success:!0,type:"collections",_type:"update"})}return{data:Aw({modified:u,deleted:f},t),lastUpdated:Number(b)}}catch(m){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch collections",context:{data:u,deleted:f,error:Kt(m),response:c}}),uo({...i,error:m,success:!1,type:"collections",_type:"update"}),Promise.reject(m)}}async function Iw(n,e){const{apikey:t,path:o}=n;let s;try{const{data:i}=await Er.get(`${o}/deleted`,{headers:{"Zotero-API-Key":t},params:{since:e}});return s=i,i}catch(i){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch deleted data",context:{error:Kt(i),response:s}}),Promise.reject(i)}}async function tA(n,{match:e=[]},t){const{apikey:o,dataURI:s,library:{path:i},since:c=0}=n,u=new URLSearchParams("");u.set("since",`${c}`),u.set("start","0"),u.set("limit","100");const f={data:null,error:null,library:i,since:c,success:!1};let m,p,g;try{const{data:b,headers:v,...w}=await Er.get(`${s}?${u.toString()}`,{headers:{"Zotero-API-Key":o}});m={data:b,headers:v,...w},p=b;const{"last-modified-version":S,"total-results":_}=v,O=Number(_);if(O>100){const D=await Np({dataURI:s,apikey:o,since:c},O);p.push(...D)}if(c>0){const{items:D=[]}=await Iw({apikey:o,path:i},c);g=D;const M=["tags",{library:i}],{lastUpdated:W}=t.getQueryData(M)||{};(p.length>0||Number(W)<Number(S))&&(t.refetchQueries(M),uo({...f,data:p,success:!0,type:"items",_type:"update"}))}return{data:Aw({modified:p,deleted:g},e,{with_citekey:!0}),lastUpdated:Number(S)}}catch(b){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch items",context:{data:p,deleted:g,error:Kt(b),response:m}}),uo({...f,error:b,success:!1,type:"items",_type:"update"}),Promise.reject(b)}}async function nA(n){try{const{data:e}=await Er.get(`keys/${n}`,{headers:{"Zotero-API-Key":n}});return e}catch(e){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch permissions"}),Promise.reject(e)}}async function rA(n){const{apikey:e,path:t}=n;let o=[];try{const{data:s,headers:i}=await Er.get(`${t}/tags?limit=100`,{headers:{"Zotero-API-Key":e}});o=s;const{"last-modified-version":c,"total-results":u}=i,f=Number(u);if(f>100){const m=await Np({dataURI:`${t}/tags`,apikey:e},f);o.push(...m)}return{data:Qj(o),lastUpdated:Number(c)}}catch(s){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch tags",context:{error:Kt(s),path:t,tags:o}}),Promise.reject(s)}}function Pw(n,e){const{apikey:t,path:o}=e,s=Math.ceil(n.length/50),i=[];for(let c=1;c<=s;c++){const u=n.slice(50*(c-1),50*c);i.push(Er.post(`${o}/items`,JSON.stringify(u),{headers:{"Zotero-API-Key":t}}))}return Promise.allSettled(i)}const Pi=window.React.useMemo,Nw=(n,e={})=>{const{staleTime:t=1e3*60*5,refetchInterval:o=1e3*60*5,...s}=e,i=qo(),c=n.map(u=>{const{path:f}=u,m=["collections",{library:f}],{data:p,lastUpdated:g}=i.getQueryData(m)||{};return{queryKey:m,queryFn:b=>eA(u,g,{match:p}),staleTime:t,refetchInterval:o,...s}});return Qi({queries:c})},po=(n,e={})=>{const t=qo(),o=Pi(()=>{const{staleTime:s=1e3*60,refetchInterval:i=1e3*60,...c}=e;return n.map(u=>{const{apikey:f,library:{path:m},...p}=u;return{queryKey:["items",m,{...p}],queryFn:b=>Gj(u,t),staleTime:s,refetchInterval:i,...c}})},[n,t,e]);return Qi({queries:o})},Lw=(n,e={})=>{const{staleTime:t=1e3*60*60,refetchInterval:o=1e3*60*60,...s}=e,i=n.map(c=>({queryKey:["permissions",{apikey:c}],queryFn:f=>nA(c),staleTime:t,refetchInterval:o,...s}));return Qi({queries:i})},Dw=(n,e={})=>{const t=Pi(()=>{const{staleTime:o=18e4,...s}=e;return n.map(i=>{const{apikey:c,path:u}=i;return{queryKey:["tags",{library:u}],queryFn:m=>rA({apikey:c,path:u}),staleTime:o,...s}})},[n,e]);return Qi({queries:t})},Mw=n=>{const e=Pi(()=>Array.from(new Set(n.map(c=>c.apikey))),[n]),t=Lw(e,{notifyOnChangeProps:["data","isLoading"]}),o=t.some(c=>c.isLoading),s=Pi(()=>t.map(c=>c.data||[]).flat(1),[t]);return{data:Pi(()=>n.filter(c=>{const u=s.find(f=>f.key==c.apikey);if(u){const{access:f}=u,[m,p]=c.path.split("/");return((m=="users"?f.user:f.groups?.[p]||f.groups?.all)||{}).write||!1}else return!1}),[n,s]),isLoading:o}},oA=()=>{const n=qo();return Yf(e=>{const{library:{apikey:t,path:o},tags:s}=e,{lastUpdated:i=0}=n.getQueryData(["tags",{library:o}])||{};return Yj(s,{apikey:t,path:o},i)},{onSettled:(e,t,o,s)=>{const{library:{path:i},tags:c}=o;t||n.invalidateQueries(["items",i],{refetchType:"all"},{throwOnError:!0}),uo({args:{tags:c},error:t,library:i,_type:"tags-deleted"})}})},aA=()=>{const n=qo();return Yf(e=>{const{collections:t=[],items:o,library:s,tags:i=[]}=e,c=i.map(f=>({tag:f})),u=o.map(f=>{const{key:m,version:p,...g}=f;return{...g,collections:t,tags:c}});return Pw(u,s)},{onSettled:(e=[],t,o,s)=>{const{collections:i,items:c,library:{path:u},tags:f}=o,m=e.reduce((p,g)=>(dv(g)?p.successful.push(g.value.data):p.failed.push(g.reason),p),{successful:[],failed:[]});!t&&m.successful.length>0&&n.invalidateQueries(["items",u],{refetchType:"all"}),uo({_type:"write",args:{collections:i,items:c,tags:f},data:m,error:t,library:u})}})},Lp=()=>{const n=qo();return Yf(e=>{const{into:t,library:{apikey:o,path:s},tags:i}=e,c=[];return n.getQueriesData(["items",s]).map(f=>(f[1]||{}).data||[]).flat(1).filter(lp).filter(f=>f.data.tags.length>0).forEach(f=>{const m=f.data.tags,p=m.findIndex(b=>b.tag==t&&(b.type==0||!b.type));p>-1&&m.splice(p,1);const g=m.filter(b=>!i.includes(b.tag));g.length<m.length&&(g.push({tag:t,type:0}),c.push({key:f.data.key,version:f.version,tags:g}))}),Pw(c,{apikey:o,path:s})},{onSettled:(e=[],t,o,s)=>{const{into:i,library:{path:c},tags:u}=o,f=e.reduce((m,p)=>(dv(p)?m.successful.push(p.value.data):m.failed.push(p.reason),m),{successful:[],failed:[]});f.successful.length>0&&n.invalidateQueries(["items",c],{refetchType:"all"}),uo({args:{into:i,tags:u},data:f,error:t,library:c,_type:"tags-modified"})}})},sA=window.React.useCallback,yy=window.React.useMemo,iA=window.React.useState,lA=window.Blueprint.Core.Spinner,cA=window.Blueprint.Core.Tab,uA=window.Blueprint.Core.Tabs,dA=[{show:"items",title:"Items"},{show:"pdfs",title:"PDFs"},{show:"notes",title:"Notes"}];function fA({itemList:n,onClose:e,show:t}){return t=="items"?d.jsx(vj,{itemList:n,onClose:e}):t=="pdfs"?d.jsx(Aj,{itemList:n}):d.jsx(Ej,{itemList:n})}function pA({itemList:n,onClose:e}){const[t,o]=iA("items"),s=sA((i,c,u)=>o(i),[]);return d.jsx(uA,{animate:!1,className:H.TABS_MINIMAL,id:"explorer-lists",onChange:s,renderActiveTabPanelOnly:!1,selectedTabId:t,children:dA.map(i=>d.jsx(cA,{id:i.show,panel:d.jsx(fA,{itemList:n,onClose:e,show:i.show}),panelClassName:"zr-explorer-tabpanel",title:i.title},i.show))})}function hA({onClose:n}){const[{dataRequests:e}]=Un(),t=po(e,{notifyOnChangeProps:["data"],select:c=>c.data}),o=t.some(c=>c.isLoading),s=yy(()=>t.map(c=>c.data||[]).flat(1),[t]),i=yy(()=>Ta(s),[s]);return d.jsx(Nn,{children:d.jsx("div",{children:o?d.jsx(lA,{}):d.jsx(pA,{itemList:i,onClose:n})})})}const mA=window.React.memo,gA=window.React.useEffect,yA=window.Blueprint.Core.Button;function bA({abstract:n,allAbstractsShown:e}){const[t,{set:o,toggle:s}]=Lt(e);return gA(()=>{o(e)},[e,o]),n?d.jsxs("div",{className:"zr-log-item--abstract",children:[d.jsx(yA,{className:H.TEXT_SMALL,"zr-role":"abstract-toggle",icon:t?"chevron-down":"chevron-right",onClick:s,minimal:!0,small:!0,children:"Abstract"}),t?d.jsx("span",{"zr-role":"abstract-text",className:[H.TEXT_SMALL,H.TEXT_AUXILIARY].join(" "),children:n}):null]}):null}const vA=mA(function({allAbstractsShown:e,item:t,onClose:o}){const{abstract:s,children:i,inGraph:c,itemType:u,meta:f,publication:m,raw:p,title:g}=t;return d.jsxs(Xo,{className:"zr-log-entry","data-in-graph":(c!=!1).toString(),children:[d.jsxs("div",{"zr-role":"item-header",children:[d.jsxs("div",{"zr-role":"item-details",children:[d.jsx("span",{className:H.TEXT_AUXILIARY,"data-item-type":u,"zr-role":"item-title",children:g}),d.jsx("span",{className:H.TEXT_ACCENT_1,children:f}),d.jsx("span",{className:H.TEXT_SECONDARY,children:m})]}),d.jsx(rl,{closeDialog:o,inGraph:c,item:p,notes:i.notes,pdfs:i.pdfs})]}),d.jsx(bA,{abstract:s,allAbstractsShown:e})]})}),wA=vA;function xA(n,{edited:e,inGraph:t,notes:o,pdfs:s}){const i=n.key,c=n.library.type+"s/"+n.library.id,u=n.meta.creatorSummary||"",f=n.meta.parsedDate?`(${new Date(n.meta.parsedDate).getUTCFullYear()})`:"",m=_a(i,c,{pdfs:s,notes:o});return{abstract:n.data.abstractNote||"",children:m,edited:e,inGraph:t,itemType:n.data.itemType,key:i,location:c,meta:[u,f].filter(Tt).join(" "),publication:n.data.publicationTitle||n.data.bookTitle||n.data.university||"",raw:n,title:n.data.title||""}}function CA(n,e=7){return new Promise(t=>{setTimeout(()=>{const{items:o=[],pdfs:s=[],notes:i=[]}=n,c=pS(),u=new Date;u.setHours(0,0,0);const f=new Date;f.setDate(u.getDate()-1),f.setHours(0,0,0);const m=new Date;m.setDate(u.getDate()-e),m.setHours(0,0,0);const p=o.reduce((g,b)=>{const v=c.get("@"+b.key),{edited:w=null,uid:S=!1}=v||{},_=new Date(b.data.dateModified),O=new Date(Math.max(...[w,_].filter(Tt).map(D=>Number(D))));if(O<=m)return g;{const D=xA(b,{edited:O,inGraph:S,notes:i,pdfs:s});return O>u?(g.today.push(D),g.numItems+=1):O>f?(g.yesterday.push(D),g.numItems+=1):O>m&&(g.recent.push(D),g.numItems+=1),g}},{today:[],yesterday:[],recent:[],numItems:0});Object.values(p).filter(Array.isArray).forEach(g=>g.sort((b,v)=>b.edited<v.edited?1:-1)),t(p)},0)})}const Dp=window.React.memo,EA=window.React.useEffect,by=window.React.useMemo,vy=window.React.useState,SA=window.Blueprint.Core.NonIdealState,TA=window.Blueprint.Core.Slider,Bw=window.Blueprint.Core.Spinner,_A=window.Blueprint.Core.Switch,Fd=Dp(function({allAbstractsShown:e,items:t,label:o,onClose:s}){return t.length==0?null:d.jsxs(d.Fragment,{children:[d.jsx("h5",{children:o}),t.map(i=>d.jsx(wA,{allAbstractsShown:e,item:i,onClose:s},[i.location,i.key].join("/")))]})}),kA={labelRenderer:(n,e={isHandleTooltip:!1})=>e.isHandleTooltip?`Last ${n} days`:"",min:3,max:30,stepSize:1},RA=Dp(function({itemList:e,onClose:t}){const[o,s]=vy(7),[i,{toggle:c}]=Lt(!1),[u,f]=vy(null);return EA(()=>{e&&CA(e,o).then(m=>f(m))},[o,e]),u==null?d.jsx(Bw,{size:15}):d.jsxs("div",{className:"zr-recentitems--datalist",children:[u.numItems==0?d.jsx(SA,{className:H.TEXT_AUXILIARY,description:"No items to display"}):d.jsxs(Ps,{children:[d.jsx(Fd,{allAbstractsShown:i,items:u.today,label:"Today",onClose:t}),d.jsx(Fd,{allAbstractsShown:i,items:u.yesterday,label:"Yesterday",onClose:t}),d.jsx(Fd,{allAbstractsShown:i,items:u.recent,label:"Recently",onClose:t})]}),d.jsxs(Uo,{children:[d.jsx(TA,{onChange:s,value:o,...kA}),d.jsx(_A,{"aria-checked":i,checked:i,label:"Show all abstracts",role:"switch",onChange:c})]})]})}),OA=Dp(function({onClose:e}){const[{dataRequests:t}]=Un(),o=po(t,{notifyOnChangeProps:["data"],select:u=>u.data}),s=o.some(u=>u.isLoading),i=by(()=>o.map(u=>u.data||[]).flat(1),[o]),c=by(()=>Ta(i),[i]);return d.jsx(Nn,{children:d.jsx("div",{style:{height:"100%"},children:s?d.jsx(Bw,{}):d.jsx(RA,{itemList:c,onClose:e})})})}),jA=OA,AA=window.React.memo,IA=window.Blueprint.Core.Button,PA=window.Blueprint.Core.MenuItem,NA=window.Blueprint.Select.Select,LA={filterable:!1,itemRenderer:(n,e)=>{const{handleClick:t}=e;return d.jsx(PA,{onClick:t,text:n},n)},matchTargetWidth:!0,popoverProps:{minimal:!0,placement:"bottom-right",popoverClassName:H.POPOVER}},DA=AA(function({libProps:e}){const{currentLibrary:{path:t},onSelect:o,options:s}=e;return d.jsx(NA,{items:s,onItemSelect:o,...LA,children:d.jsx(IA,{className:["zr-dashboard--library-select",H.TEXT_AUXILIARY,H.TEXT_SMALL].join(" "),icon:"folder-open",minimal:!0,text:t})})}),MA=DA,BA=window.React.useCallback,zA=window.Blueprint.Core.ButtonGroup,FA=window.Blueprint.Core.Icon;function $A(n){const{icon:e=null,isSelected:t,label:o,name:s,onClick:i,value:c}=n,u=[s,c].join("_"),f=BA(()=>i(c),[i,c]);return d.jsxs("span",{className:"zr-sort-option",onClick:f,children:[d.jsx("input",{type:"radio",checked:t,disabled:t,id:u,name:s,onChange:()=>{},value:c}),d.jsx(FA,{icon:e}),d.jsx("label",{className:H.TEXT_SMALL,htmlFor:u,children:o})]})}function UA(n){const{name:e,onSelect:t,options:o,selectedOption:s}=n;return d.jsx(zA,{minimal:!0,children:o.map(i=>d.jsx($A,{isSelected:i.value==s,name:e,onClick:t,...i},i.value))})}const zw=window.React.useCallback,qA=window.React.useEffect,wy=window.React.useMemo,HA=window.React.useRef,VA=window.Blueprint.Core.Button,$d=window.Blueprint.Core.Classes,WA=window.Blueprint.Core.Dialog,QA=window.Blueprint.Core.InputGroup,KA=window.Blueprint.Core.MenuDivider,Pf=window.Blueprint.Core.MenuItem,XA=window.Blueprint.Core.Tag,GA=window.Blueprint.Core.UL;function YA({handleChange:n,status:e,value:t}){const o=HA(null);return qA(()=>{o?.current?.focus()},[]),d.jsx(QA,{disabled:e=="loading",fill:!0,inputRef:o,onChange:n,placeholder:"Enter a value",value:t})}function ZA({disabled:n,library:e,tags:t}){const[o,{on:s,off:i}]=Lt(!1),[c,u]=Lv(""),{mutate:f,status:m}=Lp(),p=zw(()=>{f({into:c,library:e,tags:t},{onSuccess:()=>i()})},[i,e,f,t,c]);return d.jsxs(d.Fragment,{children:[d.jsx(Pf,{disabled:n,htmlTitle:"Choose custom value...",intent:"primary",multiline:!0,onClick:s,shouldDismissPopover:!1,text:"Choose custom value..."}),d.jsxs(WA,{isOpen:o,lazy:!0,onClose:i,children:[d.jsxs("div",{className:$d.DIALOG_BODY,children:["The following tags will be merged :",d.jsx(GA,{children:t.map(g=>d.jsx("li",{children:g},g))}),d.jsx(YA,{handleChange:u,status:m,value:c})]}),d.jsx("div",{className:$d.DIALOG_FOOTER,children:d.jsx("div",{className:$d.DIALOG_FOOTER_ACTIONS,children:d.jsx(VA,{disabled:c.length==0,loading:m=="loading",minimal:!0,onClick:p,text:"OK",title:"Confirm modification of tag(s)"})})})]})]})}function Fw({library:n,options:e}){const{roam:t=[],zotero:o=[]}=e,s=wy(()=>[...t,...o],[t,o]),{mutate:i,status:c}=Lp(),u=wy(()=>["error","success","loading"].includes(c),[c]),f=zw(m=>{i({into:m,library:n,tags:s})},[n,i,s]);return d.jsxs(d.Fragment,{children:[t.map(m=>d.jsx(Pf,{disabled:u,labelElement:d.jsx(XA,{intent:"success",minimal:!0,children:"In Roam"}),multiline:!0,onClick:()=>f(m),text:m},m)),o.map(m=>d.jsx(Pf,{disabled:u,multiline:!0,onClick:()=>f(m),text:m},m)),d.jsx(KA,{}),d.jsx(ZA,{disabled:["error","success","loading"].includes(c),library:n,tags:s})]})}const JA=window.React.useCallback,eI=window.Blueprint.Core.Menu,xy=window.Blueprint.Core.MenuItem;function $w({deleteTags:n=!0,library:e,mergeAs:t=!0,suggestion:o}){const{mutate:s,status:i}=oA(),c=JA(()=>{s({library:e,tags:[...o.use.roam,...o.use.zotero]})},[o.use,e,s]);return d.jsxs(eI,{className:H.TEXT_SMALL,children:[t&&o.type?d.jsx(xy,{disabled:["loading","success"].includes(i),icon:"group-objects",text:"Merge as",children:d.jsx(Fw,{library:e,options:o.use})}):null,n?d.jsx(xy,{disabled:["loading","success"].includes(i),icon:i=="success"?"tick":"trash",intent:"danger",text:i=="success"?"Deleted":"Delete tag(s)",onClick:c}):null]})}const tI=window.Blueprint.Core.Tag;function nI({text:n,uid:e=null}){return d.jsx(tI,{active:!0,intent:"primary",minimal:!0,multiline:!0,"data-tag-source":"roam","data-tag":n,"data-uid":e,children:n})}const rI=window.Blueprint.Core.Tag;function oI({tagElement:n}){const{tag:e,meta:{numItems:t,type:o=0}}=n;return d.jsx(rI,{active:!0,intent:"warning",minimal:!0,multiline:!1,"data-tag-source":"zotero","data-tag":e,"data-tag-type":o,children:e+" ("+t+")"})}var ps=(n=>(n.ALL="all",n.SUGGESTIONS="suggestions",n))(ps||{}),Nf=(n=>(n.ALL="all-items",n.SUGGESTIONS="suggestions",n))(Nf||{}),hs=(n=>(n.ALPHABETICAL="alphabetical",n.ROAM="roam",n.USAGE="usage",n))(hs||{});function aI(n){return n.map(e=>({nTags:e.zotero.length,nAuto:e.zotero.length==0?0:e.zotero.filter(t=>t.meta.type==1).length,in_roam:e.roam.length>0?1:0})).reduce((e,t)=>(e.nTags+=t.nTags,e.nAuto+=t.nAuto,e.nRoam+=t.in_roam,e),{nTags:0,nAuto:0,nRoam:0,nTotal:n.length})}function Lf(n,{count_roam:e=!1}={}){return n.zotero.reduce((t,o)=>t+o.meta.numItems,0)+(e?n.roam.length:0)}function Uw(n){return n.zotero.length==1&&(n.roam.length==0||n.roam.length==1&&n.zotero[0].tag==n.roam[0].title)}function qw(n){const e=n.roam.map(s=>s.title),t=n.zotero.reduce((s,i)=>(e.includes(i.tag)||s.includes(i.tag)||s.push(i.tag),s),[]),o={roam:e,zotero:t};return e.length==0?n.zotero.length==1?{recommend:t[0],type:null,use:o}:t.length==1?{recommend:t[0],type:"auto",use:o}:{recommend:n.zotero.find(s=>s.meta.type==0)?.tag||null,type:"manual",use:o}:e.length==1?t.length==0?{recommend:e[0],type:n.zotero.length==1?null:"auto",use:o}:{recommend:e[0],type:"auto",use:o}:{recommend:null,type:"manual",use:o}}function sI(n){return new Promise(e=>{setTimeout(()=>{const t=Object.keys(n).map(o=>{const s=gS(Array.from(new Set([o,o.toUpperCase()]))).sort((c,u)=>c.title>u.title?-1:1),i=Array.from(n[o]);for(const c of s){const u=i.findIndex(f=>ar(c.title,f.token,{match:"exact"}));if(u>=0){const{roam:f,...m}=i[u];i[u]={roam:[...f,c],...m}}}return i}).flat(1);e(t)},0)})}function iI(n,e=hs.ALPHABETICAL){const t=[...n];switch(e){case"usage":return t.sort((o,s)=>Lf(o)>Lf(s)?-1:1);case"roam":return t.sort((o,s)=>o.roam.length>s.roam.length?-1:1);case"alphabetical":default:return t}}const lI=window.React.memo,Cy=window.Blueprint.Core.Icon,cI=lI(function({entry:e,library:t}){const o=Uw(e),s=qw(e),i=Lf(e);return d.jsx(Xo,{className:"zr-tag-entry","data-token":e.token,"in-graph":(e.roam.length>0).toString(),children:d.jsxs("div",{"zr-role":"item-header",children:[d.jsxs("div",{"zr-role":"item-info",children:[e.roam.length>0?d.jsx(Cy,{htmlTitle:"This tag exists in Roam ("+e.roam.map(c=>c.title).join(", ")+")",icon:"tick-circle",intent:"success",size:14}):d.jsx(Cy,{icon:"blank"}),d.jsx("span",{className:H.TEXT_AUXILIARY,"zr-role":"title",children:e.token}),!o&&d.jsxs("span",{className:H.TEXT_SMALL,"zr-role":"item-additional",children:[e.roam.map(c=>d.jsx(nI,{text:c.title,uid:c.uid},c.title)),e.zotero.map(c=>{const{tag:u,meta:{type:f}}=c;return d.jsx(oI,{tagElement:c},[u,f].join("_"))})]})]}),d.jsx("span",{className:[H.TEXT_SECONDARY,H.TEXT_SMALL].join(" "),"zr-role":"item-count",children:Xt(i,"item")}),d.jsx("div",{"zr-role":"item-actions",children:d.jsx($w,{deleteTags:!0,library:t,mergeAs:!0,suggestion:s})})]})})}),uI=cI,dI=window.React.useCallback,fI=window.React.useMemo,Mp=window.Blueprint.Core.Button,pI=window.Blueprint.Core.ButtonGroup,Ey=window.Blueprint.Core.Intent,hI=window.Blueprint.Core.Menu;function mI({library:n,suggestion:e}){const{recommend:t,use:o}=e,{mutate:s,status:i}=Lp(),c=dI(()=>{s({into:t,library:n,tags:[...o.roam,...o.zotero]})},[n,s,t,o]),u=fI(()=>i=="error"?{disabled:!0,icon:"warning",intent:Ey.DANGER}:i=="success"?{disabled:!0,icon:"tick",intent:Ey.SUCCESS,text:"Merged"}:{icon:"many-to-one"},[i]);return d.jsx(Mp,{active:!0,className:["zr-tag-suggestion--auto-merge",H.TEXT_SMALL].join(" "),intent:"primary",loading:i=="loading",onClick:c,text:"Auto-merge",title:"Suggestion : "+t,...u})}function gI({library:n,suggestion:e}){return d.jsx(Is,{content:d.jsx(hI,{children:d.jsx(Fw,{library:n,options:e.use})}),interactionKind:"click",popoverClassName:H.POPOVER,children:d.jsx(Mp,{className:["zr-tag-suggestion--merge-as",H.TEXT_SMALL].join(" "),intent:"primary",rightIcon:"caret-down",text:"Merge as ..."})})}function yI({entry:n,library:e}){const t=qw(n);switch(t.type){case"auto":case"manual":return d.jsxs(pI,{minimal:!0,children:[t.type=="auto"&&d.jsx(mI,{library:e,suggestion:t}),t.type=="manual"&&d.jsx(gI,{library:e,suggestion:t}),d.jsx(Is,{content:d.jsx($w,{library:e,mergeAs:t.type=="auto",suggestion:t}),interactionKind:"click",placement:"bottom-start",popoverClassName:H.POPOVER,children:d.jsx(Mp,{icon:"more"})})]});case null:default:return null}}const bI=window.React.memo,Sy=window.Blueprint.Core.Icon,vI=window.Blueprint.Core.Tag,wI=bI(function({entry:e,library:t}){return d.jsx(Xo,{className:"zr-tag-suggestion","data-token":e.token,"in-graph":(e.roam.length>0).toString(),children:d.jsxs("div",{"zr-role":"item-header",children:[d.jsxs("span",{"zr-role":"item-info",children:[e.roam.length>0?d.jsx(Sy,{htmlTitle:"This tag exists in Roam ("+e.roam.map(o=>o.title).join(", ")+")",icon:"tick-circle",intent:"success",size:14}):d.jsx(Sy,{icon:"blank",size:14}),d.jsx("span",{className:H.TEXT_AUXILIARY,"zr-role":"title",children:e.token})]}),d.jsx(vI,{htmlTitle:e.zotero.map(o=>o.tag).join(" - "),intent:"warning",icon:"tag",minimal:!0,"zr-role":"item-count",children:Xt(e.zotero.length,"tag")}),d.jsx("div",{"zr-role":"item-actions",children:d.jsx(yI,{entry:e,library:t})})]})})}),xI=wI,CI=window.React.memo,Ty=window.Blueprint.Core.ProgressBar,EI=CI(function({stats:e}){if(e){const{nTags:t,nRoam:o,nAuto:s,nTotal:i}=e,c=Math.round(s/t*100)/100,u=Math.round(o/i*100)/100;return d.jsxs("div",{className:[H.TEXT_AUXILIARY,H.TEXT_SMALL].join(" "),"zr-role":"list-stats",children:[d.jsxs("span",{"zr-role":"stats-text",children:["Zotero has ",t," tags, matched in ",i," groups"]}),d.jsxs("span",{"zr-role":"stats-figures",children:[d.jsxs("span",{"zr-role":"stats-bar",children:["Automatic : ",c*100,"%",d.jsx(Ty,{animate:!1,intent:"warning",stripes:!1,value:c})]}),d.jsxs("span",{"zr-role":"stats-bar",children:["In Roam : ",u*100,"%",d.jsx(Ty,{animate:!1,intent:"primary",stripes:!1,value:u})]})]})]})}else return null}),SI=EI,TI=window.React.memo,_I=window.React.useCallback,kI=window.React.useEffect,_y=window.React.useMemo,Ud=window.React.useState,RI=window.Blueprint.Core.NonIdealState,OI=window.Blueprint.Core.Spinner,ky=30,jI=[{icon:"sort-desc",label:"Most Used",value:hs.USAGE},{icon:"sort-alphabetical",label:"Name",value:hs.ALPHABETICAL},{icon:"star",label:"In Roam",value:hs.ROAM}],AI=TI(function({filter:e,items:t,library:o}){const{currentPage:s,pageLimits:i,setCurrentPage:c}=ou({itemsPerPage:ky}),[u,f]=Ud(hs.USAGE),[m,p]=Ud(),[g,b]=Ud();kI(()=>{t&&(sI(t).then(_=>{p(_),b(()=>aI(_))}),c(1))},[t,c]);const v=_y(()=>m?e==ps.SUGGESTIONS?m.filter(_=>!Uw(_)):m:[],[e,m]),w=_I(_=>{f(()=>_),c(1)},[c]),S=_y(()=>iI(v,u),[v,u]);return m==null?d.jsx(OI,{size:15}):d.jsxs("div",{className:"zr-tagmanager--datalist",children:[d.jsxs(Uo,{children:[d.jsx(UA,{name:"zr-tagmanager-sort-"+e,onSelect:w,options:jI,selectedOption:u}),d.jsx(uu,{currentPage:s,itemsPerPage:ky,nbItems:v.length,setCurrentPage:c})]}),d.jsx("div",{className:"zr-tagmanager--datalist--contents",children:S.length==0?d.jsx(RI,{className:H.TEXT_AUXILIARY,description:"No items to display"}):d.jsx(Ps,{children:S.slice(...i).map(_=>e==ps.SUGGESTIONS?d.jsx(xI,{entry:_,library:o},_.token):d.jsx(uI,{entry:_,library:o},_.token))})}),e==ps.ALL&&d.jsx(SI,{stats:g})]})}),II=AI,Hw=window.React.useCallback,Ry=window.React.useMemo,Vw=window.React.useState,Ww=window.Blueprint.Core.Spinner,PI=window.Blueprint.Core.Tab,Oy=window.Blueprint.Core.Tabs,NI=[{id:Nf.SUGGESTIONS,filterValue:ps.SUGGESTIONS,title:"Suggestions"},{id:Nf.ALL,filterValue:ps.ALL,title:"All tags"}];function LI({items:n,libProps:e}){const[t,o]=Vw("suggestions"),s=Hw((i,c,u)=>o(i),[]);return d.jsxs(Oy,{animate:!1,className:H.TABS_MINIMAL,id:"tag-lists",onChange:s,renderActiveTabPanelOnly:!1,selectedTabId:t,children:[NI.map(i=>d.jsx(PI,{id:i.id,panel:d.jsx(II,{filter:i.filterValue,items:n,library:e.currentLibrary}),title:i.title},i.id)),d.jsx(Oy.Expander,{}),d.jsx(MA,{libProps:e})]})}function DI({libraries:n}){const[e,t]=Vw(n[0]),{isLoading:o,data:s}=Dw([e],{notifyOnChangeProps:["data"],select:f=>f.data})[0],i=Ry(()=>n.map(f=>f.path),[n]),c=Hw(f=>t(n.find(m=>m.path==f)),[n]),u=Ry(()=>({currentLibrary:e,onSelect:c,options:i}),[c,i,e]);return d.jsx("div",{children:o?d.jsx(Ww,{}):d.jsx(LI,{items:s,libProps:u})})}function MI(){const[{libraries:n}]=Un(),{data:e,isLoading:t}=Mw(n);return d.jsx(Nn,{children:t?d.jsx(Ww,{}):e.length==0?d.jsx(Iv,{}):d.jsx(DI,{libraries:e})})}const Qw=window.React.memo,BI=window.React.useCallback,zI=window.React.useEffect,FI=window.React.useState,$I=window.Blueprint.Core.Classes,qd=window.Blueprint.Core.Icon,Hd=window.Blueprint.Core.Tab,jy=window.Blueprint.Core.Tabs,Vd={className:"zr-dashboard-tab",panelClassName:"zr-dashboard-panel"},UI=Qw(function(e){const{defaultTab:t,onClose:o}=e,[s,i]=FI(t);zI(()=>{i(t)},[t]);const c=BI((u,f,m)=>i(u),[]);return d.jsxs(jy,{animate:!1,className:[H.TABS,"zr-dashboard-tabs-wrapper"].join(" "),id:"zr-dashboard--tabs",onChange:c,selectedTabId:s,vertical:!0,children:[d.jsx(Hd,{id:"recent-items",panel:d.jsx(jA,{onClose:o}),title:d.jsxs(d.Fragment,{children:[d.jsx(qd,{htmlTitle:"Recent Items",icon:"history"}),d.jsx("span",{children:"Recent Items"})]}),...Vd}),d.jsx(Hd,{id:"tag-manager",panel:d.jsx(MI,{}),title:d.jsxs(d.Fragment,{children:[d.jsx(qd,{htmlTitle:"Tag Manager",icon:"tag"}),d.jsx("span",{children:"Tag Manager"})]}),...Vd}),d.jsx(jy.Expander,{}),d.jsx(Hd,{id:"explorer",panel:d.jsx(hA,{onClose:o}),title:d.jsxs(d.Fragment,{children:[d.jsx(qd,{htmlTitle:"Explorer",icon:"code-block"}),d.jsx("span",{children:"Explorer"})]}),...Vd})]})}),qI=Qw(function({isOpen:e,onClose:t}){return d.jsx(Ho,{className:"dashboard",isOpen:e,label:"zoteroRoam Dashboard",onClose:t,children:d.jsx("div",{className:$I.DIALOG_BODY,children:d.jsx("div",{className:"zr-dashboard--main",children:d.jsx(UI,{defaultTab:"recent-items",onClose:t})})})})});var Zt=(n=>(n.DISABLED="disabled",n.OFF="off",n.ON="on",n))(Zt||{});const Kw=window.React.memo,Xw=window.React.useCallback,HI=window.React.useEffect,us=window.React.useMemo,Df=window.Blueprint.Core.Button,VI=window.Blueprint.Core.Classes,Ay=window.Blueprint.Core.Divider,Iy=window.Blueprint.Core.Icon,Wd=window.Blueprint.Core.Intent,WI=window.Blueprint.Core.Menu,Si=window.Blueprint.Core.MenuItem,QI=window.Blueprint.Core.Spinner,KI=window.Blueprint.Core.Switch,Bp=window.Blueprint.Core.Tag,XI=d.jsx(Bp,{intent:"primary",minimal:!0,children:"Beta"}),GI=d.jsx(Bp,{intent:"success",minimal:!0,children:"NEW"}),Py=()=>document.getElementsByTagName("body")[0].getAttribute("zr-dark-theme")=="true";function YI(){const[{darkTheme:n}]=Ji(),[e,{set:t,toggle:o}]=Lt(n),s=Xw(()=>{const i=Py();document.getElementsByTagName("body")[0].setAttribute("zr-dark-theme",(!i).toString()),o()},[o]);return HI(()=>{t(Py())},[t]),d.jsx(KI,{alignIndicator:"right",checked:e,inline:!1,label:"Dark Theme",onChange:s})}const ZI=Kw(function(){const{version:e}=fu();return d.jsxs("div",{className:"zr-icon-tooltip-footer",children:[d.jsx(YI,{}),d.jsxs("span",{className:"zr-icon-tooltip-footer--row",children:[d.jsx("a",{href:"https://alix-lahuec.gitbook.io/zotero-roam/",target:"_blank",rel:"noreferrer",children:"Docs"}),d.jsxs(Bp,{className:"zr-version-tag",children:["v",e]})]})]})});function JI(n){const{queries:e}=n,t=e.map(g=>g.dataUpdatedAt).filter(Tt),o=t.length>0?d.jsx("span",{"zr-role":"timestamp",children:Bi(Math.max(...t))}):null,s=e.some(g=>g.isFetching),i=e.every(g=>g.isSuccess),c=e.some(g=>g.isLoadingError),u=e.some(g=>g.isRefetchError),f=Xw(()=>{e.forEach(g=>{g.refetch()})},[e]);let m="blank",p={};return i?(m="tick",p={intent:Wd.SUCCESS,color:"#00e676",title:"The last update was successful"}):c?(m="delete",p={intent:Wd.DANGER,title:"The extension was unable to retrieve the data"}):u&&(m="error",p={intent:Wd.WARNING,title:"The last update was unsuccessful"}),d.jsxs("span",{"zr-role":"status",children:[o,s?d.jsx(QI,{size:16}):d.jsx(Iy,{size:16,icon:m,...p}),d.jsx(Df,{minimal:!0,onClick:f,disabled:s,title:"Refresh data",children:d.jsx(Iy,{size:16,icon:"refresh"})})]})}function eP(n){const{queries:e}=n;return d.jsx("ul",{className:VI.LIST_UNSTYLED,children:Object.keys(e).map(t=>d.jsxs("li",{className:"zr-queries-status",children:[d.jsx("span",{"zr-role":"entry",children:t}),d.jsx(JI,{queries:e[t]})]},t))})}const tP=Kw(function(e){const{openDashboard:t,openLogger:o,openSearchPanel:s,openSettingsPanel:i,status:c,toggleExtension:u}=e,[{apiKeys:f,dataRequests:m,libraries:p}]=Un(),g=us(()=>({enabled:c==Zt.ON,notifyOnChangeProps:["dataUpdatedAt","status","isFetching"]}),[c]),b=po(m,g),v=Lw(f,g),w=Dw(p,g),S=Nw(p,g),_=[...v,...b,...w,...S].some($=>$.isLoading),O=[...v,...b,...w,...S].some($=>$.fetchStatus=="fetching"),D=[...v,...b,...w,...S].some($=>$.isLoadingError),M=b.some($=>$.data),W=us(()=>D?"error":_&&O?"loading":"ready",[O,_,D]),X=us(()=>c==Zt.DISABLED?"warning-sign":D?"issue":"manual",[D,c]),N=us(()=>({Permissions:v,Collections:S,Tags:w,Items:b}),[S,b,v,w]),I=us(()=>d.jsxs(d.Fragment,{children:[d.jsxs("span",{children:[d.jsx("strong",{children:"Status : "})," ",c]}),c==Zt.DISABLED&&d.jsx(Df,{"aria-haspopup":"dialog",icon:"warning-sign",intent:"warning",minimal:!0,onClick:i,text:"Click to finish setting up zoteroRoam",title:"Click to open zoteroRoam settings"}),d.jsx(Ay,{}),c==Zt.ON?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"zr-icon-tooltip-body",children:d.jsx(eP,{queries:N})}),d.jsx(Ay,{})]}):null,d.jsx(ZI,{})]}),[i,N,c]),P=us(()=>d.jsxs(WI,{children:[d.jsx(Si,{text:"Settings",icon:"settings",onClick:i}),d.jsx(Si,{disabled:!M,text:"Dashboard",icon:"dashboard",labelElement:XI,onClick:t}),d.jsx(Si,{disabled:!M,text:"Search in library",icon:"search",onClick:s}),d.jsx(Si,{text:"View logs",icon:"console",onClick:o}),d.jsx(Si,{text:"Roadmap",icon:"map-create",href:"https://alix.canny.io/zoteroroam",target:"_blank",labelElement:GI})]}),[M,t,o,s,i]);return d.jsx(vw,{popoverClassName:"zr-icon-tooltip",usePortal:!1,content:I,placement:"auto",interactionKind:"hover",hoverOpenDelay:450,hoverCloseDelay:450,children:d.jsx(ww,{content:P,children:d.jsx(Df,{id:"zotero-roam-icon","data-extension-status":c,"data-fetching-status":W,disabled:c==Zt.DISABLED,icon:X,minimal:!0,small:!0,onClick:u,"aria-haspopup":"true",title:c==Zt.DISABLED?"zoteroRoam is disabled":"Click to toggle the zoteroRoam extension"})})})});Array.prototype.find||(Array.prototype.find=function(n){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof n!="function")throw new TypeError("predicate must be a function");for(var e=Object(this),t=e.length>>>0,o=arguments[1],s,i=0;i<t;i++)if(s=e[i],n.call(o,s,i,e))return s});if(window&&typeof window.CustomEvent!="function"){let n=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o};typeof window.Event<"u"&&(n.prototype=window.Event.prototype),window.CustomEvent=n}class $c{constructor(e){this.tribute=e,this.tribute.events=this}static keys(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}bind(e){e.boundKeydown=this.keydown.bind(e,this),e.boundKeyup=this.keyup.bind(e,this),e.boundInput=this.input.bind(e,this),e.addEventListener("keydown",e.boundKeydown,!1),e.addEventListener("keyup",e.boundKeyup,!1),e.addEventListener("input",e.boundInput,!1)}unbind(e){e.removeEventListener("keydown",e.boundKeydown,!1),e.removeEventListener("keyup",e.boundKeyup,!1),e.removeEventListener("input",e.boundInput,!1),delete e.boundKeydown,delete e.boundKeyup,delete e.boundInput}keydown(e,t){e.shouldDeactivate(t)&&(e.tribute.isActive=!1,e.tribute.hideMenu());let o=this;e.commandEvent=!1,$c.keys().forEach(s=>{s.key===t.keyCode&&(e.commandEvent=!0,e.callbacks()[s.value.toLowerCase()](t,o))})}input(e,t){e.inputEvent=!0,e.keyup.call(this,e,t)}click(e,t){let o=e.tribute;if(o.menu&&o.menu.contains(t.target)){let s=t.target;for(t.preventDefault(),t.stopPropagation();s.nodeName.toLowerCase()!=="li";)if(s=s.parentNode,!s||s===o.menu)throw new Error("cannot find the <li> container for the click");o.selectItemAtIndex(s.getAttribute("data-index"),t),o.hideMenu()}else o.current.element&&!o.current.externalTrigger&&(o.current.externalTrigger=!1,setTimeout(()=>o.hideMenu()))}keyup(e,t){if(e.inputEvent&&(e.inputEvent=!1),e.updateSelection(this),t.keyCode!==27){if(!e.tribute.allowSpaces&&e.tribute.hasTrailingSpace){e.tribute.hasTrailingSpace=!1,e.commandEvent=!0,e.callbacks().space(t,this);return}if(!e.tribute.isActive)if(e.tribute.autocompleteMode)e.callbacks().triggerChar(t,this,"");else{let o=e.getKeyCode(e,this,t);if(isNaN(o)||!o)return;let s=e.tribute.triggers().find(i=>i.charCodeAt(0)===o);typeof s<"u"&&e.callbacks().triggerChar(t,this,s)}e.tribute.current.mentionText.length<e.tribute.current.collection.menuShowMinLength||((e.tribute.current.trigger||e.tribute.autocompleteMode)&&e.commandEvent===!1||e.tribute.isActive&&t.keyCode===8)&&e.tribute.showMenuFor(this,!0)}}shouldDeactivate(e){if(!this.tribute.isActive)return!1;if(this.tribute.current.mentionText.length===0){let t=!1;return $c.keys().forEach(o=>{e.keyCode===o.key&&(t=!0)}),!t}return!1}getKeyCode(e,t,o){let s=e.tribute,i=s.range.getTriggerInfo(!1,s.hasTrailingSpace,!0,s.allowSpaces,s.autocompleteMode);return i?i.mentionTriggerChar.charCodeAt(0):!1}updateSelection(e){this.tribute.current.element=e;let t=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);t&&(this.tribute.current.selectedPath=t.mentionSelectedPath,this.tribute.current.mentionText=t.mentionText,this.tribute.current.selectedOffset=t.mentionSelectedOffset)}callbacks(){return{triggerChar:(e,t,o)=>{let s=this.tribute;s.current.trigger=o;let i=s.collection.find(c=>c.trigger===o);s.current.collection=i,s.current.mentionText.length>=s.current.collection.menuShowMinLength&&s.inputEvent&&s.showMenuFor(t,!0)},enter:(e,t)=>{this.tribute.isActive&&this.tribute.current.filteredItems&&(e.preventDefault(),e.stopPropagation(),setTimeout(()=>{this.tribute.selectItemAtIndex(this.tribute.menuSelected,e),this.tribute.hideMenu()},0))},escape:(e,t)=>{this.tribute.isActive&&(e.preventDefault(),e.stopPropagation(),this.tribute.isActive=!1,this.tribute.hideMenu())},tab:(e,t)=>{this.callbacks().enter(e,t)},space:(e,t)=>{this.tribute.isActive&&(this.tribute.spaceSelectsMatch?this.callbacks().enter(e,t):this.tribute.allowSpaces||(e.stopPropagation(),setTimeout(()=>{this.tribute.hideMenu(),this.tribute.isActive=!1},0)))},up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let o=this.tribute.current.filteredItems.length,s=this.tribute.menuSelected;o>s&&s>0?(this.tribute.menuSelected--,this.setActiveLi()):s===0&&(this.tribute.menuSelected=o-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight)}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let o=this.tribute.current.filteredItems.length-1,s=this.tribute.menuSelected;o>s?(this.tribute.menuSelected++,this.setActiveLi()):o===s&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0)}},delete:(e,t)=>{this.tribute.isActive&&this.tribute.current.mentionText.length<1?this.tribute.hideMenu():this.tribute.isActive&&this.tribute.showMenuFor(t)}}}setActiveLi(e){let t=this.tribute.menu.querySelectorAll("li"),o=t.length>>>0;e&&(this.tribute.menuSelected=parseInt(e));for(let s=0;s<o;s++){let i=t[s];if(s===this.tribute.menuSelected){i.classList.add(this.tribute.current.collection.selectClass);let c=i.getBoundingClientRect(),u=this.tribute.menu.getBoundingClientRect();if(c.bottom>u.bottom){let f=c.bottom-u.bottom;this.tribute.menu.scrollTop+=f}else if(c.top<u.top){let f=u.top-c.top;this.tribute.menu.scrollTop-=f}}else i.classList.remove(this.tribute.current.collection.selectClass)}}getFullHeight(e,t){let o=e.getBoundingClientRect().height;if(t){let s=e.currentStyle||window.getComputedStyle(e);return o+parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return o}}class nP{constructor(e){this.tribute=e,this.tribute.menuEvents=this,this.menu=this.tribute.menu}bind(e){this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.showMenuFor(this.tribute.current.element,!1)},300,!1),this.windowResizeEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.range.positionMenuAtCaret(!0)},300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}unbind(e){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}debounce(e,t,o){var s;return()=>{var i=this,c=arguments,u=()=>{s=null,o||e.apply(i,c)},f=o&&!s;clearTimeout(s),s=setTimeout(u,t),f&&e.apply(i,c)}}}class rP{constructor(e){this.tribute=e,this.tribute.range=this}getDocument(){let e;return this.tribute.current.collection&&(e=this.tribute.current.collection.iframe),e?e.contentWindow.document:document}positionMenuAtCaret(e){let t=this.tribute.current,o,s=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(typeof s<"u"){if(!this.tribute.positionMenu){this.tribute.menu.style.cssText="display: block;";return}this.isContentEditable(t.element)?o=this.getContentEditableCaretPosition(s.mentionPosition):o=this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,s.mentionPosition),this.tribute.menu.style.cssText=`top: ${o.top}px;
                                     left: ${o.left}px;
                                     right: ${o.right}px;
                                     bottom: ${o.bottom}px;
                                     position: absolute;
                                     display: block;`,o.left==="auto"&&(this.tribute.menu.style.left="auto"),o.top==="auto"&&(this.tribute.menu.style.top="auto"),e&&this.scrollIntoView(),window.setTimeout(()=>{let i={width:this.tribute.menu.offsetWidth,height:this.tribute.menu.offsetHeight},c=this.isMenuOffScreen(o,i),u=window.innerWidth>i.width&&(c.left||c.right),f=window.innerHeight>i.height&&(c.top||c.bottom);(u||f)&&(this.tribute.menu.style.cssText="display: none",this.positionMenuAtCaret(e))},0)}else this.tribute.menu.style.cssText="display: none"}get menuContainerIsBody(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}selectElement(e,t,o){let s,i=e;if(t)for(var c=0;c<t.length;c++){if(i=i.childNodes[t[c]],i===void 0)return;for(;i.length<o;)o-=i.length,i=i.nextSibling;i.childNodes.length===0&&!i.length&&(i=i.previousSibling)}let u=this.getWindowSelection();s=this.getDocument().createRange(),s.setStart(i,o),s.setEnd(i,o),s.collapse(!0);try{u.removeAllRanges()}catch{}u.addRange(s),e.focus()}replaceTriggerText(e,t,o,s,i){let c=this.getTriggerInfo(!0,o,t,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(c!==void 0){let u=this.tribute.current,f=new CustomEvent("tribute-replaced",{detail:{item:i,instance:u,context:c,event:s}});if(this.isContentEditable(u.element)){let m=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:"";e+=m;let p=c.mentionPosition+c.mentionText.length;this.tribute.autocompleteMode||(p+=c.mentionTriggerChar.length),this.pasteHtml(e,c.mentionPosition,p)}else{let m=this.tribute.current.element,p=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:" ";e+=p;let g=c.mentionPosition,b=c.mentionPosition+c.mentionText.length+p.length;this.tribute.autocompleteMode||(b+=c.mentionTriggerChar.length-1),m.value=m.value.substring(0,g)+e+m.value.substring(b,m.value.length),m.selectionStart=g+e.length,m.selectionEnd=g+e.length}u.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),u.element.dispatchEvent(f)}}pasteHtml(e,t,o){let s,i;i=this.getWindowSelection(),s=this.getDocument().createRange(),s.setStart(i.anchorNode,t),s.setEnd(i.anchorNode,o),s.deleteContents();let c=this.getDocument().createElement("div");c.innerHTML=e;let u=this.getDocument().createDocumentFragment(),f,m;for(;f=c.firstChild;)m=u.appendChild(f);s.insertNode(u),m&&(s=s.cloneRange(),s.setStartAfter(m),s.collapse(!0),i.removeAllRanges(),i.addRange(s))}getWindowSelection(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}getNodePositionInParent(e){if(e.parentNode===null)return 0;for(var t=0;t<e.parentNode.childNodes.length;t++)if(e.parentNode.childNodes[t]===e)return t}getContentEditableSelectedPath(e){let t=this.getWindowSelection(),o=t.anchorNode,s=[],i;if(o!=null){let c,u=o.contentEditable;for(;o!==null&&u!=="true";)c=this.getNodePositionInParent(o),s.push(c),o=o.parentNode,o!==null&&(u=o.contentEditable);return s.reverse(),i=t.getRangeAt(0).startOffset,{selected:o,path:s,offset:i}}}getTextPrecedingCurrentSelection(){let e=this.tribute.current,t="";if(this.isContentEditable(e.element)){let o=this.getWindowSelection().anchorNode;if(o!=null){let s=o.textContent,i=this.getWindowSelection().getRangeAt(0).startOffset;s&&i>=0&&(t=s.substring(0,i))}}else{let o=this.tribute.current.element;if(o){let s=o.selectionStart;o.value&&s>=0&&(t=o.value.substring(0,s))}}return t}getLastWordInText(e){e=e.replace(/\u00A0/g," ");let t=e.split(/\s+/),o=t.length-1;return t[o].trim()}getTriggerInfo(e,t,o,s,i){let c=this.tribute.current,u,f,m;if(!this.isContentEditable(c.element))u=this.tribute.current.element;else{let b=this.getContentEditableSelectedPath(c);b&&(u=b.selected,f=b.path,m=b.offset)}let p=this.getTextPrecedingCurrentSelection(),g=this.getLastWordInText(p);if(i)return{mentionPosition:p.length-g.length,mentionText:g,mentionSelectedElement:u,mentionSelectedPath:f,mentionSelectedOffset:m};if(p!=null){let b=-1,v;if(this.tribute.collection.forEach(w=>{let S=w.trigger,_=w.requireLeadingSpace?this.lastIndexWithLeadingSpace(p,S):p.lastIndexOf(S);_>b&&(b=_,v=S,o=w.requireLeadingSpace)}),b>=0&&(b===0||!o||/[\xA0\s]/g.test(p.substring(b-1,b)))){let w=p.substring(b+v.length,p.length);v=p.substring(b,b+v.length);let S=w.substring(0,1),_=w.length>0&&(S===" "||S==="");t&&(w=w.trim());let O=s?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=O.test(w),!_&&(e||!O.test(w)))return{mentionPosition:b,mentionText:w,mentionSelectedElement:u,mentionSelectedPath:f,mentionSelectedOffset:m,mentionTriggerChar:v}}}}lastIndexWithLeadingSpace(e,t){let o=e.split("").reverse().join(""),s=-1;for(let i=0,c=e.length;i<c;i++){let u=i===e.length-1,f=/\s/.test(o[i+1]),m=!0;for(let p=t.length-1;p>=0;p--)if(t[p]!==o[i-p]){m=!1;break}if(m&&(u||f)){s=e.length-1-i;break}}return s}isContentEditable(e){return e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"}isMenuOffScreen(e,t){let o=window.innerWidth,s=window.innerHeight,i=document.documentElement,c=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),u=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),f=typeof e.top=="number"?e.top:u+s-e.bottom-t.height,m=typeof e.right=="number"?e.right:e.left+t.width,p=typeof e.bottom=="number"?e.bottom:e.top+t.height,g=typeof e.left=="number"?e.left:c+o-e.right-t.width;return{top:f<Math.floor(u),right:m>Math.ceil(c+o),bottom:p>Math.ceil(u+s),left:g<Math.floor(c)}}getMenuDimensions(){let e={width:null,height:null};return this.tribute.menu.style.cssText=`top: 0px;
                                 left: 0px;
                                 position: fixed;
                                 display: block;
                                 visibility; hidden;`,e.width=this.tribute.menu.offsetWidth,e.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",e}getTextAreaOrInputUnderlinePosition(e,t,o){let s=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],i=window.mozInnerScreenX!==null,c=this.getDocument().createElement("div");c.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(c);let u=c.style,f=window.getComputedStyle?getComputedStyle(e):e.currentStyle;u.whiteSpace="pre-wrap",e.nodeName!=="INPUT"&&(u.wordWrap="break-word"),u.position="absolute",u.visibility="hidden",s.forEach(N=>{u[N]=f[N]}),i?(u.width=`${parseInt(f.width)-2}px`,e.scrollHeight>parseInt(f.height)&&(u.overflowY="scroll")):u.overflow="hidden",c.textContent=e.value.substring(0,t),e.nodeName==="INPUT"&&(c.textContent=c.textContent.replace(/\s/g,""));let m=this.getDocument().createElement("span");m.textContent=e.value.substring(t)||".",c.appendChild(m);let p=e.getBoundingClientRect(),g=document.documentElement,b=(window.pageXOffset||g.scrollLeft)-(g.clientLeft||0),v=(window.pageYOffset||g.scrollTop)-(g.clientTop||0),w=0,S=0;this.menuContainerIsBody&&(w=p.top,S=p.left);let _={top:w+v+m.offsetTop+parseInt(f.borderTopWidth)+parseInt(f.fontSize)-e.scrollTop,left:S+b+m.offsetLeft+parseInt(f.borderLeftWidth)},O=window.innerWidth,D=window.innerHeight,M=this.getMenuDimensions(),W=this.isMenuOffScreen(_,M);W.right&&(_.right=O-_.left,_.left="auto");let X=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(W.bottom){let N=this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect(),I=X-(D-N.top);_.bottom=I+(D-p.top-m.offsetTop),_.top="auto"}return W=this.isMenuOffScreen(_,M),W.left&&(_.left=O>M.width?b+O-M.width:b,delete _.right),W.top&&(_.top=D>M.height?v+D-M.height:v,delete _.bottom),this.getDocument().body.removeChild(c),_}getContentEditableCaretPosition(e){let t,o=this.getWindowSelection();t=this.getDocument().createRange(),t.setStart(o.anchorNode,e),t.setEnd(o.anchorNode,e),t.collapse(!1);let s=t.getBoundingClientRect(),i=document.documentElement,c=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),u=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),f=s.left,m=s.top,p={left:f+c,top:m+s.height+u},g=window.innerWidth,b=window.innerHeight,v=this.getMenuDimensions(),w=this.isMenuOffScreen(p,v);w.right&&(p.left="auto",p.right=g-s.left-c);let S=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(w.bottom){let _=this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect(),O=S-(b-_.top);p.top="auto",p.bottom=O+(b-s.top)}return w=this.isMenuOffScreen(p,v),w.left&&(p.left=g>v.width?c+g-v.width:c,delete p.right),w.top&&(p.top=b>v.height?u+b-v.height:u,delete p.bottom),this.menuContainerIsBody||(p.left=p.left?p.left-this.tribute.menuContainer.offsetLeft:p.left,p.top=p.top?p.top-this.tribute.menuContainer.offsetTop:p.top),p}scrollIntoView(e){let t=20,o,s=100,i=this.menu;if(typeof i>"u")return;for(;o===void 0||o.height===0;)if(o=i.getBoundingClientRect(),o.height===0&&(i=i.childNodes[0],i===void 0||!i.getBoundingClientRect))return;let c=o.top,u=c+o.height;if(c<0)window.scrollTo(0,window.pageYOffset+o.top-t);else if(u>window.innerHeight){let f=window.pageYOffset+o.top-t;f-window.pageYOffset>s&&(f=window.pageYOffset+s);let m=window.pageYOffset-(window.innerHeight-u);m>f&&(m=f),window.scrollTo(0,m)}}}class oP{constructor(e){this.tribute=e,this.tribute.search=this}simpleFilter(e,t){return t.filter(o=>this.test(e,o))}test(e,t){return this.match(e,t)!==null}match(e,t,o){o=o||{},t.length;let s=o.pre||"",i=o.post||"",c=o.caseSensitive&&t||t.toLowerCase();if(o.skip)return{rendered:t,score:0};e=o.caseSensitive&&e||e.toLowerCase();let u=this.traverse(c,e,0,0,[]);return u?{rendered:this.render(t,u.cache,s,i),score:u.score}:null}traverse(e,t,o,s,i){if(t.length===s)return{score:this.calculateScore(i),cache:i.slice()};if(e.length===o||t.length-s>e.length-o)return;let c=t[s],u=e.indexOf(c,o),f,m;for(;u>-1;){if(i.push(u),m=this.traverse(e,t,u+1,s+1,i),i.pop(),!m)return f;(!f||f.score<m.score)&&(f=m),u=e.indexOf(c,u+1)}return f}calculateScore(e){let t=0,o=1;return e.forEach((s,i)=>{i>0&&(e[i-1]+1===s?o+=o+1:o=1),t+=o}),t}render(e,t,o,s){var i=e.substring(0,t[0]);return t.forEach((c,u)=>{i+=o+e[c]+s+e.substring(c+1,t[u+1]?t[u+1]:e.length)}),i}filter(e,t,o){return o=o||{},t.reduce((s,i,c,u)=>{let f=i;o.extract&&(f=o.extract(i),f||(f=""));let m=this.match(e,f,o);return m!=null&&(s[s.length]={string:m.rendered,score:m.score,index:c,original:i}),s},[]).sort((s,i)=>{let c=i.score-s.score;return c||s.index-i.index})}}class ha{constructor({values:e=null,iframe:t=null,selectClass:o="highlight",containerClass:s="tribute-container",itemClass:i="",trigger:c="@",autocompleteMode:u=!1,selectTemplate:f=null,menuItemTemplate:m=null,lookup:p="key",fillAttr:g="value",collection:b=null,menuContainer:v=null,noMatchTemplate:w=null,requireLeadingSpace:S=!0,allowSpaces:_=!1,replaceTextSuffix:O=null,positionMenu:D=!0,spaceSelectsMatch:M=!1,searchOpts:W={},menuItemLimit:X=null,menuShowMinLength:N=0}){if(this.autocompleteMode=u,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=v,this.allowSpaces=_,this.replaceTextSuffix=O,this.positionMenu=D,this.hasTrailingSpace=!1,this.spaceSelectsMatch=M,this.autocompleteMode&&(c="",_=!1),e)this.collection=[{trigger:c,iframe:t,selectClass:o,containerClass:s,itemClass:i,selectTemplate:(f||ha.defaultSelectTemplate).bind(this),menuItemTemplate:(m||ha.defaultMenuItemTemplate).bind(this),noMatchTemplate:(I=>typeof I=="string"?I.trim()===""?null:I:typeof I=="function"?I.bind(this):w||function(){return"<li>No Match Found!</li>"}.bind(this))(w),lookup:p,fillAttr:g,values:e,requireLeadingSpace:S,searchOpts:W,menuItemLimit:X,menuShowMinLength:N}];else if(b)this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=b.map(I=>({trigger:I.trigger||c,iframe:I.iframe||t,selectClass:I.selectClass||o,containerClass:I.containerClass||s,itemClass:I.itemClass||i,selectTemplate:(I.selectTemplate||ha.defaultSelectTemplate).bind(this),menuItemTemplate:(I.menuItemTemplate||ha.defaultMenuItemTemplate).bind(this),noMatchTemplate:(P=>typeof P=="string"?P.trim()===""?null:P:typeof P=="function"?P.bind(this):w||function(){return"<li>No Match Found!</li>"}.bind(this))(w),lookup:I.lookup||p,fillAttr:I.fillAttr||g,values:I.values,requireLeadingSpace:I.requireLeadingSpace,searchOpts:I.searchOpts||W,menuItemLimit:I.menuItemLimit||X,menuShowMinLength:I.menuShowMinLength||N}));else throw new Error("[Tribute] No collection specified.");new rP(this),new $c(this),new nP(this),new oP(this)}get isActive(){return this._isActive}set isActive(e){if(this._isActive!=e&&(this._isActive=e,this.current.element)){let t=new CustomEvent(`tribute-active-${e}`);this.current.element.dispatchEvent(t)}}static defaultSelectTemplate(e){return typeof e>"u"?`${this.current.collection.trigger}${this.current.mentionText}`:this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+e.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+e.original[this.current.collection.fillAttr]}static defaultMenuItemTemplate(e){return e.string}static inputTypes(){return["TEXTAREA","INPUT"]}triggers(){return this.collection.map(e=>e.trigger)}attach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let o=e.length;for(var t=0;t<o;++t)this._attach(e[t])}else this._attach(e)}_attach(e){e.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+e.nodeName),this.ensureEditable(e),this.events.bind(e),e.setAttribute("data-tribute",!0)}ensureEditable(e){if(ha.inputTypes().indexOf(e.nodeName)===-1)if(e.contentEditable)e.contentEditable=!0;else throw new Error("[Tribute] Cannot bind to "+e.nodeName)}createMenu(e){let t=this.range.getDocument().createElement("div"),o=this.range.getDocument().createElement("ul");return t.className=e,t.appendChild(o),this.menuContainer?this.menuContainer.appendChild(t):this.range.getDocument().body.appendChild(t)}showMenuFor(e,t){if(this.isActive&&this.current.element===e&&this.current.mentionText===this.currentMentionTextSnapshot)return;this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),e.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");const o=s=>{if(!this.isActive)return;let i=this.search.filter(this.current.mentionText,s,{pre:this.current.collection.searchOpts.pre||"<span>",post:this.current.collection.searchOpts.post||"</span>",skip:this.current.collection.searchOpts.skip,extract:f=>{if(typeof this.current.collection.lookup=="string")return f[this.current.collection.lookup];if(typeof this.current.collection.lookup=="function")return this.current.collection.lookup(f,this.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});this.current.collection.menuItemLimit&&(i=i.slice(0,this.current.collection.menuItemLimit)),this.current.filteredItems=i;let c=this.menu.querySelector("ul");if(this.range.positionMenuAtCaret(t),!i.length){let f=new CustomEvent("tribute-no-match",{detail:this.menu});this.current.element.dispatchEvent(f),typeof this.current.collection.noMatchTemplate=="function"&&!this.current.collection.noMatchTemplate()||!this.current.collection.noMatchTemplate?this.hideMenu():typeof this.current.collection.noMatchTemplate=="function"?c.innerHTML=this.current.collection.noMatchTemplate():c.innerHTML=this.current.collection.noMatchTemplate;return}c.innerHTML="";let u=this.range.getDocument().createDocumentFragment();i.forEach((f,m)=>{let p=this.range.getDocument().createElement("li");p.setAttribute("data-index",m),p.className=this.current.collection.itemClass,p.addEventListener("mousemove",g=>{let[b,v]=this._findLiTarget(g.target);g.movementY!==0&&this.events.setActiveLi(v)}),this.menuSelected===m&&p.classList.add(this.current.collection.selectClass),p.innerHTML=this.current.collection.menuItemTemplate(f),u.appendChild(p)}),c.appendChild(u)};typeof this.current.collection.values=="function"?this.current.collection.values(this.current.mentionText,o):o(this.current.collection.values)}_findLiTarget(e){if(!e)return[];const t=e.getAttribute("data-index");return t?[e,t]:this._findLiTarget(e.parentNode)}showMenuForCollection(e,t){e!==document.activeElement&&this.placeCaretAtEnd(e),this.current.collection=this.collection[t||0],this.current.externalTrigger=!0,this.current.element=e,e.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(e,this.current.collection.trigger),this.showMenuFor(e)}placeCaretAtEnd(e){if(e.focus(),typeof window.getSelection<"u"&&typeof document.createRange<"u"){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(t)}else if(typeof document.body.createTextRange<"u"){var s=document.body.createTextRange();s.moveToElementText(e),s.collapse(!1),s.select()}}insertTextAtCursor(e){var t,o;t=window.getSelection(),o=t.getRangeAt(0),o.deleteContents();var s=document.createTextNode(e);o.insertNode(s),o.selectNodeContents(s),o.collapse(!1),t.removeAllRanges(),t.addRange(o)}insertAtCaret(e,t){var o=e.scrollTop,s=e.selectionStart,i=e.value.substring(0,s),c=e.value.substring(e.selectionEnd,e.value.length);e.value=i+t+c,s=s+t.length,e.selectionStart=s,e.selectionEnd=s,e.focus(),e.scrollTop=o}hideMenu(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}selectItemAtIndex(e,t){if(e=parseInt(e),typeof e!="number"||isNaN(e))return;let o=this.current.filteredItems[e],s=this.current.collection.selectTemplate(o);s!==null&&this.replaceText(s,t,o)}replaceText(e,t,o){this.range.replaceTriggerText(e,!0,!0,t,o)}_append(e,t,o){if(typeof e.values=="function")throw new Error("Unable to append to values, as it is a function.");o?e.values=t:e.values=e.values.concat(t)}append(e,t,o){let s=parseInt(e);if(typeof s!="number")throw new Error("please provide an index for the collection to update.");let i=this.collection[s];this._append(i,t,o)}appendCurrent(e,t){if(this.isActive)this._append(this.current.collection,e,t);else throw new Error("No active state. Please use append instead and pass an index.")}detach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let o=e.length;for(var t=0;t<o;++t)this._detach(e[t])}else this._detach(e)}_detach(e){this.events.unbind(e),e.tributeMenu&&this.menuEvents.unbind(e.tributeMenu),setTimeout(()=>{e.removeAttribute("data-tribute"),this.isActive=!1,e.tributeMenu&&e.tributeMenu.remove()})}}const aP=window.React.memo,Gw=window.React.useCallback,sP=window.React.useEffect,Sc=window.React.useMemo,Yw="display",iP={selectClass:H.TRIBUTE_SELECTED,containerClass:H.TRIBUTE,lookup:Yw,menuShowMinLength:1,menuItemLimit:25,menuItemTemplate:n=>{const{itemType:e,display:t}=n.original;return`
        <span data-item-type="${e}"></span>
        <span class="${H.TRIBUTE_DETAILS}">${t}</span>
        `},noMatchTemplate:function(){return'<span style:"visibility: hidden;"></span>'},requireLeadingSpace:!0,selectTemplate:n=>n.original.value,searchOpts:{pre:"<span>",post:"</span>",skip:!0}},lP=(n,e="citekey",t="citekey")=>{const o=Gw(c=>c.data?c.data.filter(lp).sort((u,f)=>u.data.dateModified>f.data.dateModified?-1:1).map(u=>({key:u.key,itemType:u.data.itemType,source:"zotero",value:Sf(u,e,{accent_class:H.TEXT_ACCENT_1})||u.key,display:Sf(u,t,{accent_class:H.TEXT_ACCENT_1})||u.key})):[],[t,e]),s=po(n,{select:o,notifyOnChangeProps:["data"]});return Sc(()=>s.map(c=>c.data||[]).flat(1),[s])},cP=aP(function(){const[{dataRequests:e}]=Un(),[{trigger:t,display_char:o,display_use:s="preset",display:i="citekey",format_char:c,format_use:u="preset",format:f="citation"}]=yp(),m=Sc(()=>s=="preset"?i:o,[i,o,s]),p=Sc(()=>u=="preset"?f:c,[f,c,u]),g=lP(e,p,m)||[],b=Sc(()=>({trigger:t,...iP,values:(w,S)=>{S(g.filter(_=>_[Yw].toLowerCase().includes(w.toLowerCase())))}}),[g,t]),v=Gw(()=>{const w=document.querySelector("textarea.rm-block-input");if(!w||w.getAttribute("zotero-tribute")!=null)return;document.querySelectorAll(`.${H.TRIBUTE}`).forEach(_=>_.remove()),w.setAttribute("zotero-tribute","active"),new ha(b).attach(w),w.addEventListener("tribute-replaced",_=>{if(_.detail.item.original.source=="zotero"){const D=_.detail.context.mentionTriggerChar+_.detail.context.mentionText,M=_.detail.context.mentionPosition,W=_.detail.item.original.value,X=_.target.defaultValue,N=Ef(D),I=new RegExp(N,"g"),P=X.replaceAll(I,(he,ge)=>ge==M?W:he);Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(w,P);const ue=new Event("input",{bubbles:!0});w.dispatchEvent(ue)}})},[b]);return sP(()=>{const w=new MutationObserver(v);return w.observe(document,{childList:!0,subtree:!0}),()=>{w.disconnect();try{document.querySelector(`.${H.TRIBUTE}`).remove()}catch{}}},[v]),null}),Zw=window.React.memo,Bo=window.React.useCallback,Ny=window.React.useEffect,Tc=window.React.useMemo,Qd=window.React.useState,uP=window.ReactDOM.createPortal,dP=window.Blueprint.Core.Classes,fP=window.Blueprint.Core.Menu,Kd=window.Blueprint.Core.MenuDivider,Ti=window.Blueprint.Core.MenuItem,pP=window.Blueprint.Core.Overlay,hP=1e3,mP=n=>{const e=Bo(s=>{if(s.data){const i=Ta(s.data);return i.items.map(c=>{const u=c.data.url,f=Rs(c.data.DOI),m=u?{href:u,title:u}:f?{href:"https://doi/org/"+f,title:f}:!1,p=c.library.type+"s/"+c.library.id,g=_a(c.data.key,p,{pdfs:i.pdfs,notes:i.notes});return["@"+c.key,{citation:Sf(c,"inline")||"@"+c.key,data:{children:g,location:p,raw:c,weblink:m,zotero:{local:_s(c,{format:"target"}),web:ks(c,{format:"target"})}}}]})}else return[]},[]),t=po(n,{notifyOnChangeProps:["data"],select:e}),o=Tc(()=>t.map(s=>s.data||[]).flat(1),[t]);return new Map(o)},gP=Zw(function(e){const{coords:t,isOpen:o,itemsMap:s,onClose:i,target:c}=e,[u]=Os(),[f]=Zi(),[m]=Ra(),[p]=Oa(),[g,{on:b,off:v}]=Lt(!1),w=c?.parentElement?.dataset.linkTitle,S=c?.parentElement?.dataset.linkUid||!1,_=Tc(()=>w?s.get(w).data:null,[w,s]),O=Bo(()=>{setTimeout(()=>{try{document.querySelector("body > .bp3-context-menu+.bp3-portal").style.display="none"}catch{}},100)},[]),D=Bo(()=>{if(_){const{pdfs:N=[],notes:I=[]}=_.children;nu({item:_.raw,pdfs:N,notes:I},S,f,p,m,u),i()}},[u,_,f,m,i,S,p]),M=Bo(()=>{v(),i()},[i,v]),W=Tc(()=>{if(!_||_.children.pdfs.length==0)return null;{const N=_.location.startsWith("groups/")?_.location:"library";return d.jsxs(d.Fragment,{children:[d.jsx(Kd,{title:"PDF Attachments"}),_.children.pdfs.map((I,P)=>{const $=["linked_file","imported_file","imported_url"].includes(I.data.linkMode)?`zotero://open-pdf/${N}/items/${I.data.key}`:I.data.url;return d.jsx(Ti,{className:"zr-context-menu--option",href:$,icon:"paperclip",rel:"noreferrer",target:"_blank",text:I.data.filename||I.data.title},P)})]})}},[_]),X=Tc(()=>!_||_.children.notes.length==0?null:d.jsxs(d.Fragment,{children:[d.jsx(Kd,{}),d.jsx(Ti,{className:"zr-context-menu--option",icon:"comment",text:"Show notes",onClick:b,shouldDismissPopover:!1}),d.jsx(du,{isOpen:g,notes:_.children.notes,onClose:M})]}),[M,g,_,b]);return d.jsx(pP,{isOpen:o,hasBackdrop:!1,lazy:!1,onClose:i,onOpening:O,usePortal:!1,children:d.jsx("div",{className:["zr-context-menu--wrapper",dP.POPOVER].join(" "),style:t,children:d.jsxs(fP,{className:"zr-context-menu",children:[d.jsx(Ti,{className:"zr-context-menu--option",icon:"add",text:"Import metadata",intent:"primary",onClick:D}),d.jsx(Kd,{}),_&&d.jsx(Ti,{className:"zr-context-menu-option",icon:"application",text:"Open in Zotero",href:_.zotero.local}),_&&d.jsx(Ti,{className:"zr-context-menu-option",icon:"cloud",text:"Open in Zotero (web)",href:_.zotero.web}),W,X]})})})}),yP=Zw(function(){const{portalId:e}=fu(),[{dataRequests:t}]=Un(),[{render_inline:o}]=Ji(),[s,i]=Qd(!1),[c,u]=Qd({left:0,top:0}),[f,m]=Qd(null),p=mP(t),g=Bo(S=>{S.preventDefault();const{pageX:_,pageY:O,target:D}=S;u({left:_,top:O}),m(D),i(!0)},[]),b=Bo(()=>{i(!1),m(null)},[]),v=Bo(()=>{const S=document.querySelectorAll("span[data-link-title^='@']");for(let _=0;_<S.length;_++){const O=S[_],D=O.getElementsByClassName("rm-page-ref")[0],M=O.getAttribute("data-link-title"),W=O.getAttribute("data-in-library"),X=p.has(M).toString();if(!(W!=null&&W==X)){if(O.setAttribute("data-in-library",X),W==null&&X=="false")continue;X=="true"?(o==!0&&(D.textContent=p.get(M).citation),D.addEventListener("contextmenu",g)):(D.textContent=M,D.removeEventListener("contextmenu",g))}}},[p,o,g]),w=Bo(()=>{document.querySelectorAll("span[data-link-title^='@'][data-in-library]").forEach(_=>{_.removeAttribute("data-in-library");const O=_.getElementsByClassName("rm-page-ref")[0];O.textContent=_.getAttribute("data-link-title"),O.removeEventListener("contextmenu",g)})},[g]);return Ny(()=>{const S=setInterval(()=>{v()},hP);return function(){clearInterval(S),w()}},[v,w]),Ny(()=>{document.querySelectorAll("span[data-link-title^='@'][data-in-library]").forEach(_=>{const O=_.getElementsByClassName("rm-page-ref")[0],D=_.getAttribute("data-link-title"),M=_.getAttribute("data-in-library")=="true";O.textContent=M?p.get(D).citation:D})},[o,p]),uP(d.jsx(gP,{coords:c,isOpen:s,itemsMap:p,onClose:b,target:f}),document.getElementById(e))}),bP=yP;function vP(n,e){const t=Ta(n);return t.items.map(o=>{const s=o.data.key,i=o.library.type+"s/"+o.library.id,{pdfs:c,notes:u}=_a(s,i,{pdfs:t.pdfs,notes:t.notes});return dp(o,c,u,e)})}function Mf(n,e){const{authors:t,key:o,title:s,year:i}=n,{preset:c,template:u,useAsDefault:f}=e;switch(f){case"template":{let m=u;const p={authors:t,key:o,title:s,year:i};for(const g in p)m=m.replaceAll(`{{${g}}}`,`${p[g]}`);return m}case"preset":default:return wP(n,c)}}function wP(n,e){const t=n.key,o="[[@"+t+"]]";switch(!0){case e=="page-reference":return o;case e=="raw":return t;case e=="tag":return"#"+o;case e=="citation":return"["+n.authors+" ("+n.year+")]("+o+")";case e=="citekey":default:return"@"+t}}const xP=window.Blueprint.Core.Tag,Ni=({action:n,text:e})=>d.jsx(xP,{className:"zr-shortcut-sequence",htmlTitle:"Press "+e+" to "+n,minimal:!0,children:e}),CP=window.React.memo,Li=window.React.useCallback,En=window.React.useMemo,EP=window.Blueprint.Core.Classes,SP=window.Blueprint.Core.Menu,Ly=window.Blueprint.Core.MenuDivider,hr=window.Blueprint.Core.MenuItem,Bf=window.Blueprint.Core.Tag,Jw=window.Blueprint.Core.useHotkeys,TP={popoverClassName:H.POPOVER},ki=(n,e,t)=>{const o="[[@"+n+"]]";switch(e){case"page-reference":return o;case"tag":return"#"+o;case"citation":return"["+t.authors+" ("+t.year+")]("+o+")";case"citekey":default:return"@"+n}};function _P(n){const{citekey:e,format:t,item:o}=n,[s]=As(),i=En(()=>js(s),[s]),c=En(()=>ki(e,t,o),[e,t,o]),u=Li(()=>Mo(c),[c]),f=En(()=>{const m={citation:{action:"copy as citation",command:"copyCitation"},citekey:{action:"copy as citekey",command:"copyCitekey"},"page-reference":{action:"copy as page reference",command:"copyPageRef"},tag:{action:"copy as tag",command:"copyTag"}};if(m[t]){const{action:p,command:g}=m[t];if(i[g]!=="")return d.jsx(Ni,{action:p,text:i[g]})}return null},[t,i]);return d.jsx(hr,{htmlTitle:c,labelElement:f,onClick:u,text:c})}function kP(n){const{citekey:e,item:t}=n,[o]=su(),[s]=As(),i=En(()=>js(s),[s]),c=En(()=>Mf(t,o),[o,t]),u=Li(()=>{Mo(c)},[c]),f=En(()=>{let g=["citation","citekey","page-reference","tag"];return o.useAsDefault=="preset"&&(g=g.filter(b=>b!=o.preset)),d.jsxs(d.Fragment,{children:[d.jsx(hr,{htmlTitle:c,labelElement:d.jsx(Bf,{intent:"success",minimal:!0,children:"Default"}),onClick:u,text:c}),g.map(b=>d.jsx(_P,{citekey:e,format:b,item:t},b))]})},[e,u,o,c,t]),m=En(()=>{const g=i.copyDefault||"";return g!==""?d.jsx(Ni,{action:"copy as default",text:g}):null},[i]),p=En(()=>{const g={allowInInput:!1,global:!0,preventDefault:!0,stopPropagation:!0},b={copyDefault:{label:"Copy the item in view (default format)",onKeyDown:()=>u()},copyCitation:{label:"Copy the item in view (as citation)",onKeyDown:()=>Mo(ki(e,"citation",t))},copyCitekey:{label:"Copy the item in view (as citekey)",onKeyDown:()=>Mo(ki(e,"citekey",t))},copyPageRef:{label:"Copy the item in view (as page reference)",onKeyDown:()=>Mo(ki(e,"page-reference",t))},copyTag:{label:"Copy the item in view (as page reference)",onKeyDown:()=>Mo(ki(e,"tag",t))}};return Object.keys(b).map(v=>{const w=i[v]||"";return w!==""?{...g,...b[v],combo:w}:!1}).filter(Tt)},[e,u,t,i]);return Jw(p,{showDialogKeyCombo:"shift+Z+R"}),d.jsx(hr,{icon:"clipboard",labelElement:m,multiline:!0,onClick:u,popoverProps:TP,text:"Copy reference",children:f})}const fc=({direction:n="row",label:e,children:t})=>d.jsxs("div",{"zr-role":"metadata-"+n,children:[d.jsx("span",{className:H.TEXT_AUXILIARY,children:e}),d.jsx("div",{children:t})]}),e0=CP(function({closeDialog:e,item:t}){const{abstract:o,authors:s,authorsFull:i,authorsRoles:c,children:u,createdByUser:f,inGraph:m,key:p,publication:g,raw:b,tags:v,title:w,weblink:S,year:_,zotero:O}=t,[D,{toggle:M,on:W,off:X}]=Lt(!1),[N,{on:I,off:P}]=Lt(!1),[$]=Os(),[ue]=Zi(),[he]=Ra(),[ge]=As(),ye=En(()=>js(ge),[ge]),[G]=Oa(),[,ve]=Wo(),ie=Li(async()=>{const{pdfs:Z=[],notes:de=[]}=u,se=await nu({item:t.raw,pdfs:Z,notes:de},m,ue,G,he,$);return se.success&&ve(),se},[$,u,m,t.raw,ue,he,G,ve]),we=Li(async()=>{const Z=await Rv({item:t.raw,notes:u.notes},m,he,$);return Z.success&&ve(),Z},[$,u.notes,m,t,he,ve]),ze=Li(()=>{m!=!1&&(xf(m),e())},[e,m]),Xe=En(()=>{const Z=ye.goToItemPage||"",de=Z!==""?d.jsx(Ni,{action:"go to the item's page",text:Z}):null;return m?d.jsx(hr,{icon:"arrow-right",labelElement:de,onClick:ze,text:"Go to Roam page"}):null},[m,ze,ye]),Le=En(()=>{const Z=ye.importMetadata||"",de=Z!==""?d.jsx(Ni,{action:"import the item's metadata",text:Z}):null;return d.jsx(hr,{icon:"add",labelElement:de,onClick:ie,text:"Import metadata"})},[ie,ye]),Je=En(()=>{if(u.pdfs.length==0)return null;{const Z=u.pdfs[0],de=Z.library.type=="group"?`groups/${Z.library.id}`:"library";return u.pdfs.map(se=>{const Y=["linked_file","imported_file","imported_url"].includes(se.data.linkMode)?`zotero://open-pdf/${de}/items/${se.data.key}`:se.data.url;return d.jsx(hr,{href:Y,icon:"paperclip",multiline:!0,rel:"noreferrer",target:"_blank",text:se.data.filename||se.data.title},se.key)})}},[u.pdfs]),pt=En(()=>{if(u.notes.length==0)return null;{const Z=ye.toggleNotes||"",de=Z!==""?d.jsx(Ni,{action:"toggle the notes panel",text:Z}):null;return d.jsxs(d.Fragment,{children:[d.jsx(hr,{icon:"highlight",labelElement:de,onClick:W,text:"Highlights & Notes"}),d.jsx(du,{isOpen:D,notes:u.notes,onClose:X})]})}},[u.notes,X,D,ye,W]),A=En(()=>d.jsxs(d.Fragment,{children:[d.jsx(hr,{icon:"eye-open",onClick:I,text:"View raw metadata"}),d.jsx(jp,{item:t.raw,isOpen:N,onClose:P})]}),[P,t.raw,N,I]),B=En(()=>{const Z={allowInInput:!1,global:!0,preventDefault:!0,stopPropagation:!0},de={goToItemPage:{disabled:!m,label:"Go to the item's Roam page",onKeyDown:()=>ze()},importMetadata:{label:"Import the item's metadata to Roam",onKeyDown:()=>ie()},toggleNotes:{disabled:u.notes.length==0,label:"Show the item's linked notes",onKeyDown:()=>M()}};return Object.keys(de).map(se=>{const Y=ye[se]||"";return Y!==""?{...Z,...de[se],combo:Y}:!1}).filter(Tt)},[u.notes,ie,m,ze,ye,M]);return Jw(B,{showDialogKeyCombo:"shift+Z+R"}),d.jsx("div",{id:"zr-item-details",children:d.jsxs(Nn,{children:[d.jsxs("div",{"zr-role":"item-metadata",children:[d.jsxs("div",{"zr-role":"item-metadata--header",children:[d.jsx("h5",{children:w}),d.jsx("span",{className:H.TEXT_ACCENT_1,children:s+" ("+_+")"}),g?d.jsx("span",{className:H.TEXT_SECONDARY,children:g}):null,S?d.jsx("span",{"zr-role":"item-weblink",className:H.TEXT_SECONDARY,children:d.jsx("a",{href:S.href,rel:"noreferrer",target:"_blank",children:S.title})}):null]}),d.jsx(fc,{direction:"col",label:"Abstract",children:d.jsx("p",{"zr-role":"item-abstract",className:[H.TEXT_SMALL,EP.RUNNING_TEXT].join(" "),children:o})}),d.jsxs("div",{"zr-role":"item-metadata--footer",children:[d.jsxs(fc,{label:"Added",children:[d.jsx("span",{className:H.TEXT_SECONDARY,children:mp(b.data.dateAdded)}),f?d.jsxs("span",{children:["by ",d.jsx("b",{children:f})]}):null]}),i.length>0?d.jsx(fc,{label:"Contributors",children:i.map((Z,de)=>d.jsxs(Bf,{className:H.TEXT_SMALL,intent:"primary",minimal:!0,children:[Z,c[de]=="author"?"":" ("+c[de]+")"]},de))}):null,v.length>0?d.jsx(fc,{label:"Tags",children:d.jsx("div",{children:v.map((Z,de)=>d.jsxs(Bf,{className:H.TEXT_SMALL,minimal:!0,children:["#",Z]},de))})}):null]})]}),d.jsx("div",{"zr-role":"item-actions",children:d.jsxs(SP,{className:H.TEXT_SMALL,"data-in-graph":m.toString(),children:[navigator.clipboard&&d.jsx(kP,{citekey:p,item:t}),d.jsx(Ly,{className:H.DIVIDER_MINIMAL,title:"Actions"}),Xe,Le,u.notes.length>0&&d.jsx(hr,{icon:"chat",onClick:we,text:"Import notes"}),d.jsx(hr,{href:O.local,icon:"application",rel:"noreferrer",target:"_blank",text:"Open in Zotero"}),d.jsx(hr,{href:O.web,icon:"cloud",rel:"noreferrer",target:"_blank",text:"Open in Zotero (web)"}),A,d.jsx(Ly,{className:H.DIVIDER_MINIMAL,title:"Linked Content"}),Je,pt]})})]})})}),RP=window.React.useCallback,Uc=window.React.useMemo,Xd=window.Blueprint.Core.Classes,OP=window.Blueprint.Core.Checkbox,jP=window.Blueprint.Core.Tag;function AP({annotation:n}){const{color:e,comment:t,text:o,type:s}=Uc(()=>ru([n])[0],[n]),i=Uc(()=>({backgroundImage:`linear-gradient(120deg, ${e}50 0%, ${e}50 100%)`}),[e]);return d.jsxs("div",{className:H.TEXT_SMALL,"zr-role":"note-contents",children:[o&&d.jsx("span",{title:o,className:[H.TEXT_AUXILIARY,Xd.TEXT_OVERFLOW_ELLIPSIS].join(" "),style:i,children:o}),s=="image"&&d.jsx("code",{className:Xd.CODE,children:"Images are currently not supported"}),t&&d.jsx("div",{title:t,className:[H.TEXT_SECONDARY,Xd.TEXT_OVERFLOW_ELLIPSIS].join(" "),children:t})]})}function IP({note:n}){const e=Uc(()=>Ov([n]).join(" "),[n]);return d.jsx("div",{className:[H.TEXT_SMALL,H.TEXT_AUXILIARY].join(" "),"zr-role":"note-contents",children:d.jsx("p",{title:e,children:e})})}function PP({note:n,isSelected:e,isSingleChild:t,onToggle:o}){const s=RP(()=>o(n.data.key),[n.data.key,o]),i=Uc(()=>Gi(n)?d.jsx(IP,{note:n}):d.jsx(AP,{annotation:n}),[n]);return d.jsxs(Xo,{className:"zr-notesimport-item","aria-label":n.data.key,onClick:s,children:[d.jsx("div",{className:"zr-notesimport-item--header",children:t?i:d.jsx(OP,{checked:e,className:"zr-notesimport-item--title",inline:!1,labelElement:i,onChange:s})}),d.jsx("div",{className:["zr-notesimport-item--contents",H.TEXT_SMALL].join(" "),children:d.jsx("div",{children:n.data.tags.map((c,u)=>d.jsx(jP,{minimal:!0,children:c.tag},u))})})]})}const NP=window.React.useCallback,Dy=window.React.useMemo,LP=window.Blueprint.Core.Checkbox,DP=window.Blueprint.Core.Classes,MP=window.Blueprint.Core.H6;function BP({date:n,itemSelectProps:e,notes:t,selectedKeys:o}){const{bulkCheck:s,bulkUncheck:i,toggleNoteSelection:c}=e,u=Dy(()=>t.every(g=>o.includes(g.data.key)),[t,o]),f=t.length==1,m=Dy(()=>t.sort((g,b)=>new Date(g.data.dateAdded)>new Date(b.data.dateAdded)?-1:1),[t]),p=NP(()=>{const g=t.map(b=>b.data.key);u?i(g):s(g)},[u,s,i,t]);return d.jsxs("li",{className:"zr-notesimport-daylist",children:[d.jsx(LP,{checked:u,className:"zr-notesimport-day",inline:!1,labelElement:d.jsx(MP,{children:n}),onChange:p}),d.jsx("div",{children:d.jsx("ul",{className:DP.LIST_UNSTYLED,children:m.map(g=>d.jsx(PP,{isSelected:o.includes(g.data.key),isSingleChild:f,note:g,onToggle:c},g.data.key))})})]})}const My=window.React.useCallback,zf=window.React.useMemo,By=window.Blueprint.Core.Button,zP=window.Blueprint.Core.Classes,FP=window.Blueprint.Core.Tag;function $P({notes:n,selectedKeys:e,selectProps:t}){const{setSelectedKeys:o,toggleNoteSelection:s}=t,i=zf(()=>{const u=n.sort((f,m)=>new Date(f.data.dateAdded)>new Date(m.data.dateAdded)?-1:1).reduce((f,m)=>{const p=new Date(m.data.dateAdded).toLocaleDateString("en-CA");return f[p]?f[p].push(m):f[p]=[m],f},{});return Object.keys(u).sort((f,m)=>new Date(f)>new Date(m)?-1:1).map(f=>({date:Ca(f,{brackets:!1}),notes:u[f]}))},[n]),c=zf(()=>({bulkCheck:u=>{const f=u.filter(m=>!e.includes(m));o([...e,...f])},bulkUncheck:u=>{o(e.filter(f=>!u.includes(f)))},toggleNoteSelection:s}),[e,o,s]);return d.jsx(Ps,{children:i.map(u=>d.jsx(BP,{date:u.date,notes:u.notes,itemSelectProps:c,selectedKeys:e},u.date))})}function UP({closeDialog:n,item:e,notes:t,pageUID:o}){const[s]=Os(),[i]=Ra(),[c,{set:u,toggle:f}]=zi({start:t.map(b=>b.data.key)}),m=My(()=>{c.length==0?u(t.map(b=>b.data.key)):u([])},[t,c,u]),p=My(async()=>{const b=t.filter(v=>c.includes(v.data.key));try{await Rv({item:e,notes:b},o,i,s),n()}catch{}},[s,n,e,t,i,o,c]),g=zf(()=>({setSelectedKeys:u,toggleNoteSelection:f}),[u,f]);return d.jsx("div",{className:zP.DIALOG_BODY,children:d.jsxs(Nn,{children:[d.jsxs(Uo,{children:[d.jsx(By,{className:[H.TEXT_SMALL,H.TEXT_SECONDARY].join(" "),minimal:!0,onClick:m,children:c.length==0?"Select all":"Unselect all"}),d.jsx(By,{active:!0,disabled:c.length==0,intent:"success",minimal:!0,onClick:p,rightIcon:d.jsx(FP,{intent:"success",children:c.length}),text:"Import notes"})]}),d.jsx("div",{className:"zr-notesimport--datalist",children:d.jsx($P,{notes:t,selectedKeys:c,selectProps:g})})]})})}const qP=window.React.useCallback,HP=window.React.useMemo,VP=window.Blueprint.Core.Button,WP=window.Blueprint.Core.Icon,QP=window.Blueprint.Core.Menu,KP=window.Blueprint.Core.MenuItem,XP=window.Blueprint.Core.Tag,GP=window.Blueprint.Select.Select,YP={canEscapeKeyClose:!1,minimal:!0,placement:"bottom-start",popoverClassName:H.POPOVER},ZP={itemRenderer:(n,e)=>{const{handleClick:t}=e;return d.jsx(KP,{className:H.TEXT_SECONDARY,htmlTitle:n.label,labelElement:n.active?d.jsx(WP,{icon:"small-tick"}):null,onClick:t,"aria-selected":n.active,text:n.label},n.value)},itemListRenderer:({items:n,itemsParentRef:e,renderItem:t})=>{const o=n.map(t).filter(s=>s!=null);return d.jsx(QP,{ulRef:e,children:o})}};function JP({options:n,toggleFilter:e}){const t=HP(()=>n.filter(s=>s.active).length,[n]),o=qP(s=>e(s.value),[e]);return d.jsx(GP,{className:H.TEXT_SMALL,filterable:!1,items:n,matchTargetWidth:!1,onItemSelect:o,popoverProps:YP,...ZP,children:d.jsx(VP,{className:H.TEXT_SECONDARY,minimal:!0,outlined:!0,rightIcon:t>0?d.jsx(XP,{minimal:!0,children:t}):"caret-down",text:"Filter"})})}const eN=window.React.useMemo,tN=window.Blueprint.Core.H6,nN=window.Blueprint.Core.Icon;function rN({children:n}){return d.jsx(tN,{children:n})}function t0({href:n,text:e}){return d.jsx("a",{href:n,rel:"noreferrer",target:"_blank",children:e})}const oN=d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Metadata is obtained through the ",d.jsx(t0,{href:"https://en.wikipedia.org/api/rest_v1/#/Citation/getCitation",text:"Wikimedia API"}),". It should give the same results as the Zotero Connector (note : PDFs are currently not added automatically)."]}),d.jsx("p",{children:"If the API was unable to retrieve metadata for a given URL, the item will not appear below."})]}),aN=d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["References, citations, and their metadata are obtained through the ",d.jsx(t0,{href:"https://api.semanticscholar.org/corpus",text:"Semantic Scholar API"}),"."]}),d.jsx("p",{children:"Note that the API does not guarantee the identification of all papers, and that the metadata available is limited (for example, abstracts are currently not available)."})]});function n0({content:n,header:e=""}){const t=eN(()=>d.jsxs(d.Fragment,{children:[e&&d.jsx(rN,{children:e}),n]}),[n,e]);return d.jsx(Is,{className:"zr-guide-popover--target",content:t,interactionKind:"hover-target",popoverClassName:[H.POPOVER,"zr-guide-popover"].join(" "),children:d.jsx(nN,{icon:"help",size:14,tabIndex:-1})})}const sN=()=>d.jsx(n0,{header:"About this data",content:oN}),iN=()=>d.jsx(n0,{header:"About this data",content:aN});var br=(n=>(n.ADDED_ON="added_on",n.WITH_ABSTRACT="with_abstract",n.WITH_TAG="with_tag",n))(br||{}),io=(n=>(n.CITATIONS="is_citation",n.REFERENCES="is_reference",n))(io||{});const lN=window.React.memo,cN=window.React.useCallback,Gd=window.React.useMemo,uN=window.Blueprint.Core.Button,pc=window.Blueprint.Core.Classes,dN=window.Blueprint.Core.Icon,fN=window.Blueprint.Core.Tag,pN=lN(function(e){const{handleRemove:t,handleSelect:o,inGraph:s,isSelected:i,item:c,type:u}=e,{inLibrary:f}=c,m=cN(()=>{i?t(c):o(c)},[i,c,t,o]),p=Gd(()=>{if(f){const{children:{pdfs:v,notes:w},raw:S}=f;return d.jsx(rl,{inGraph:s,item:S,notes:w,pdfs:v})}else return d.jsxs(d.Fragment,{children:[c.url?d.jsx("a",{"zr-role":"item-url",href:c.url,target:"_blank",rel:"noreferrer",className:H.TEXT_SMALL,children:c.doi||"Semantic Scholar"}):null,c.doi?d.jsx(uN,{text:i?"Remove":"Add to Zotero",active:i,className:H.TEXT_SMALL,icon:i?"small-cross":"small-plus",intent:"primary",minimal:!0,onClick:m,small:!0}):null]})},[m,s,f,i,c.doi,c.url]),g=Gd(()=>d.jsx("div",{className:"zr-related-item--intents",children:c.intent.length>0?c.intent.map(v=>{const w=v.charAt(0).toUpperCase()+v.slice(1);return d.jsx(fN,{"data-semantic-intent":v,htmlTitle:"This citation was classified as related to "+w+" by Semantic Scholar",minimal:!0,children:w},v)}):null}),[c.intent]),b=Gd(()=>d.jsx("div",{className:"zr-related-item--links",children:Object.keys(c.links).map(v=>d.jsx("span",{"data-service":v,children:d.jsx("a",{href:c.links[v],className:[H.TEXT_SMALL,H.TEXT_AUXILIARY].join(" "),target:"_blank",rel:"noreferrer",children:v.split("-").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ")})},v))}),[c.links]);return d.jsx("li",{className:"zr-related-item","data-semantic-type":u,"data-in-library":f!=!1,"data-in-graph":s!=!1,children:d.jsxs("div",{className:pc.MENU_ITEM,children:[d.jsx("span",{className:[pc.MENU_ITEM_LABEL,H.TEXT_SMALL,"zr-related-item--timestamp"].join(" "),children:c.year}),d.jsxs("div",{className:[pc.FILL,"zr-related-item-contents"].join(" "),children:[d.jsxs("div",{className:pc.FILL,style:{display:"flex"},children:[d.jsxs("div",{className:"zr-related-item-contents--metadata",children:[c.authors&&d.jsx("span",{className:u==io.REFERENCES?H.TEXT_ACCENT_1:H.TEXT_ACCENT_2,children:c.authors}),c.meta&&d.jsx("span",{className:H.TEXT_SECONDARY,children:c.meta}),c.isInfluential?d.jsx(dN,{className:"zr-related-item--decorating-icon",color:"#f8c63a",htmlTitle:"This item was classified as influential by Semantic Scholar",icon:"trending-up"}):null,d.jsx("span",{className:"zr-related-item--title",children:c.title}),b]}),d.jsx("span",{className:"zr-related-item-contents--actions",children:p})]}),g]})]})})}),hN=pN,mN=window.React.memo,gN=window.React.useCallback,zy=window.React.useMemo,yN=window.Blueprint.Core.InputGroup,bN=window.Blueprint.Core.NonIdealState,Fy=30,vN=[{active:!1,label:"In Library",value:"library"},{active:!1,label:"Highly Influential",value:"influential"},{active:!1,label:"Has DOI",value:"doi"}];function wN(n,e){let t=[...n];return e.filter(s=>s.active==!0).forEach(s=>{switch(s.value){case"library":t=t.filter(gv);break;case"influential":t=t.filter(i=>i.isInfluential);break;case"doi":t=t.filter(i=>i.doi);break;default:window.zoteroRoam?.warn?.({origin:"Interface",message:`Filter not recognized: ${s.value}`,context:{...s}})}}),t}function xN(n,e){return e.filter(t=>ar(n,t._multiField,{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"}))}function CN({item:n,selectProps:e,type:t}){const{handleRemove:o,handleSelect:s,items:i}=e,c=i.findIndex(u=>u.doi==n.doi||u.url==n.url)>=0;return d.jsx(hN,{handleRemove:o,handleSelect:s,inGraph:n.inGraph,isSelected:c,item:n,type:t})}const EN=mN(function(e){const{items:t,selectProps:o,type:s}=e,{currentPage:i,pageLimits:c,setCurrentPage:u}=ou({itemsPerPage:Fy}),[f,m]=Lv(""),[p,g]=BS(vN),b=gN(S=>{g(S),u(1)},[u,g]),v=zy(()=>wN(t,p),[p,t]),w=zy(()=>f?xN(f,v):v,[v,f]);return d.jsxs("div",{className:"rendered-div",children:[d.jsxs(Uo,{children:[d.jsx(JP,{options:p,toggleFilter:b}),d.jsx(yN,{"aria-label":"Search by title, authors (last names), or year",autoComplete:"off",id:"semantic-search--"+s,leftIcon:"search",onChange:m,placeholder:"Search items",spellCheck:"false",title:"Search by title, authors (last names), or year",value:f})]}),d.jsx("div",{className:"zr-semantic--datalist",children:w.length==0?d.jsx(bN,{className:H.TEXT_AUXILIARY,description:"No results found"}):d.jsx(Ps,{children:w.slice(...c).map(S=>d.jsx(CN,{item:S,selectProps:o,type:s},[S.doi,S.url,S.title].filter(Tt).join("-")))})}),d.jsxs(Uo,{children:[d.jsx(uu,{arrows:"first",currentPage:i,itemsPerPage:Fy,nbItems:w.length,setCurrentPage:u}),d.jsx(iN,{})]})]})}),$y=EN,r0=window.React.memo,SN=window.React.useCallback,TN=window.Blueprint.Core.Checkbox,_N=window.Blueprint.Core.Spinner,kN=r0(function(e){const{collection:t,isChecked:o,onSelect:s}=e,{data:{name:i},depth:c,key:u}=t,f=SN(()=>{s(u)},[u,s]);return d.jsx(TN,{checked:o,className:[H.TEXT_SMALL,`depth-${c}`].join(" "),inline:!1,label:i,onChange:f})}),RN=r0(function(e){const{collections:t,onSelect:o,selectedCollections:s}=e;return t.length==0?d.jsx(_N,{size:12}):d.jsx("div",{className:"options-collections-list",children:t.map(i=>d.jsx(kN,{collection:i,isChecked:s.includes(i.key),onSelect:o},i.key))})}),ON=RN,jN=window.React.memo,AN=window.React.useMemo,IN=window.Blueprint.Core.RadioGroup,PN=jN(function({libraries:e,selectedLib:t,onSelect:o}){const s=AN(()=>e.map(i=>({value:i.path})),[e]);return d.jsx(IN,{className:H.TEXT_SMALL,inline:!1,name:"import-library",onChange:o,options:s,selectedValue:t.path})}),NN=PN,LN=qt.create({baseURL:"https://en.wikipedia.org/api/rest_v1/data/citation/zotero"});async function DN(n){let e;try{const{data:t,...o}=await LN.get(encodeURIComponent(n));return e={data:t,...o},{item:t[0],query:n}}catch(t){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch metadata from Wikipedia",context:{error:Kt(t),query:n,response:e}}),Promise.reject(t)}}const o0=(n,e={})=>{const{cacheTime:t=1/0,retry:o=(u,f)=>u<1&&f.toJSON().status!=404,staleTime:s=1e3*60*10,...i}=e,c=n.map(u=>({queryKey:["citoid",{url:u}],queryFn:m=>DN(u),cacheTime:t,retry:o,staleTime:s,...i}));return Qi({queries:c})};function a0(n,e,t=0){const o={...n,depth:t},s=e.filter(i=>i.data.parentCollection==o.key);if(s.length>0){const i=[o];for(let c=0;c<s.length;c++)i.push(...a0(s[c],e,t+1));return i}else return[o]}function MN(n){if(n.length>0){const e=[...n].sort((i,c)=>i.data.name.toLowerCase()<c.data.name.toLowerCase()?-1:1),t=e.filter(i=>i.data.parentCollection),o=e.filter(i=>!i.data.parentCollection).map(i=>({...i,depth:0})),s=[];for(let i=0;i<o.length;i++)t.filter(u=>u.data.parentCollection==o[i].key).length>0?s.push(...a0(o[i],t)):s.push(o[i]);return s}else return[]}const zp=window.React.memo,s0=window.React.useCallback,Ff=window.React.useMemo,i0=window.Blueprint.Core.Button,BN=window.Blueprint.Core.ButtonGroup,Uy=window.Blueprint.Core.Intent,zN=window.Blueprint.Core.Spinner,FN=zp(function(e){const{identifiers:t,importProps:o,isActive:s,resetImport:i}=e,c=o0(t,{enabled:s&&t.length>0,select:v=>v.item}),u=c.every(v=>v.data),f=c.map(v=>v.data).filter(Tt),{mutate:m,status:p}=aA(),g=s0(()=>{const{collections:v,library:w,tags:S}=o;m({collections:v,items:f,library:w,tags:S},{onSuccess:()=>i()})},[f,o,m,i]),b=Ff(()=>p=="loading"?{disabled:!0,text:"Loading...",title:"Importing items..."}:p=="error"?{disabled:!0,intent:Uy.DANGER,rightIcon:"error",text:"Error",title:"Error while importing items"}:{disabled:!s,intent:Uy.PRIMARY,loading:!u,rightIcon:"chevron-right",text:"Send to Zotero",title:u?"Import items to Zotero":"Loading items data..."},[s,u,p]);return d.jsx(i0,{className:[H.TEXT_SMALL,"zr-import--trigger"].join(" "),minimal:!0,onClick:g,...b})}),$N=zp(function(e){const{collections:t,identifiers:o,isActive:s,libraries:i,resetImport:c}=e,[u,f]=oT({start:i[0],transform:D=>i.find(M=>M.path==D)}),[m,{set:p,toggle:g}]=zi({start:[]}),[b,{add:v,remove:w}]=zi({start:[]}),S=s0(D=>{f(D),p([])},[f,p]),_=Ff(()=>{const D=t.filter(M=>{const{id:W,type:X}=M.library;return X+"s/"+W==u.path});return MN(D)},[t,u]),O=Ff(()=>({collections:m,library:u,tags:b}),[m,u,b]);return d.jsxs(Nn,{children:[d.jsx("div",{className:"import-header",children:d.jsxs(BN,{fill:!0,minimal:!0,children:[d.jsx(i0,{className:[H.TEXT_SMALL,"zr-import--cancel"].join(" "),icon:"chevron-left",intent:"warning",minimal:!0,onClick:c,children:"Cancel"}),d.jsx(FN,{identifiers:o,importProps:O,isActive:s,resetImport:c})]})}),d.jsxs("div",{className:"import-options",children:[d.jsx("div",{className:"options-library-list",children:d.jsx(NN,{libraries:i,selectedLib:u,onSelect:S})}),d.jsx(ON,{collections:_,onSelect:g,selectedCollections:m}),d.jsx(Bv,{onRemove:w,onSelect:v,selectedTags:b})]})]})}),l0=zp(function(e){const{identifiers:t,isActive:o,resetImport:s}=e,[{libraries:i}]=Un(),{data:c,isLoading:u}=Mw(i),m=Nw(i,{enabled:c.length>0,notifyOnChangeProps:["data"],select:p=>p.data}).map(p=>p?.data||[]).flat(1);return u?d.jsx(zN,{}):c.length==0?d.jsx(Iv,{}):d.jsx($N,{collections:m,identifiers:t,isActive:o,libraries:c,resetImport:s})}),c0=window.React.memo,UN=window.React.useCallback,qN=window.React.useMemo,HN=window.Blueprint.Core.Button,u0=window.Blueprint.Core.Classes,VN=c0(function(e){const{handleRemove:t,item:o}=e,s=UN(()=>{t(o)},[t,o]);return d.jsxs("li",{className:["import-items_selected",H.TEXT_SMALL].join(" "),children:[d.jsxs("div",{className:"selected_info",children:[d.jsx("span",{className:[u0.TEXT_MUTED,"selected_title"].join(" "),children:o.title}),d.jsx("span",{className:[H.TEXT_SECONDARY,"selected_origin"].join(" "),children:o.meta})]}),d.jsx("div",{className:"selected_state",children:d.jsx(HN,{className:"selected_remove-button",icon:"cross",intent:"danger",minimal:!0,onClick:s,title:"Remove item from import"})})]})}),WN=c0(function({selectProps:e}){const{handleRemove:t,items:o,resetImport:s}=e,i=o.length>0,c=qN(()=>o.map(u=>u.doi?"https://doi.org/"+u.doi:u.url),[o]);return d.jsxs("div",{className:"zr-semantic-panel--side",tabIndex:0,children:[d.jsx(l0,{identifiers:c,isActive:i,resetImport:s}),d.jsx("ul",{className:[u0.LIST_UNSTYLED,"import-items"].join(" "),children:e.items.map(u=>d.jsx(VN,{handleRemove:t,item:u},[u.doi,u.url].join("-")))})]})}),QN=WN;function $f(n,{pdfs:e=[],notes:t=[]},o){const s=n.meta.creatorSummary||"",i=n.meta.parsedDate?`(${new Date(n.meta.parsedDate).getUTCFullYear()})`:"",c=n.data.key,u=n.library.type+"s/"+n.library.id,f=_a(c,u,{pdfs:e,notes:t});return{abstract:n.data.abstractNote||"",added:n.data.dateAdded,children:f,inGraph:o.get("@"+n.key)||!1,itemType:n.data.itemType,key:n.key,location:u,meta:[s,i].filter(Tt).join(" "),raw:n,timestamp:Bi(n.data.dateAdded),title:n.data.title||""}}function Uf(n,e){const t=Array.from(n),o=Array.from(e);return t.length+o.length!=0&&(t.length!==o.length||t.some((s,i)=>s!==o[i]))}function qf(n,e){return n.sort((t,o)=>`${t[e]}`.toLowerCase()<`${o[e]}`.toLowerCase()?-1:1)}const d0=window.React.memo,f0=window.React.useCallback,KN=window.React.useEffect,Ri=window.React.useMemo,XN=window.React.useState,GN=window.Blueprint.Core.Button,YN=window.Blueprint.Core.Classes,qy=window.Blueprint.Core.Icon,Hy=window.Blueprint.Core.Tab,Vy=window.Blueprint.Core.Tabs,p0="zr-semantic-panel-label",ZN=d0(function(e){const{defaultTab:t,items:o,onClose:s,selectProps:i,title:c}=e,[u,f]=XN(t);KN(()=>{f(t)},[t]);const m=f0((w,S,_)=>f(w),[]),p=Ri(()=>qf(o.references,"year"),[o.references]),g=Ri(()=>qf(o.citations,"year"),[o.citations]),b=Ri(()=>d.jsxs(d.Fragment,{children:[d.jsx(qy,{icon:"citation"}),d.jsx("span",{children:Xt(p.length,"reference")})]}),[p.length]),v=Ri(()=>d.jsxs(d.Fragment,{children:[d.jsx(qy,{icon:"chat"}),d.jsx("span",{children:Xt(g.length,"citing paper")})]}),[g.length]);return d.jsxs(Vy,{id:"zr-semantic-panel",className:H.TABS,selectedTabId:u,onChange:m,animate:!1,children:[d.jsx(Hy,{id:io.REFERENCES,panel:d.jsx($y,{items:p,selectProps:i,type:io.REFERENCES}),disabled:p.length==0,title:b}),d.jsx(Hy,{id:io.CITATIONS,panel:d.jsx($y,{items:g,selectProps:i,type:io.CITATIONS}),disabled:g.length==0,title:v}),d.jsx(Vy.Expander,{}),d.jsx("span",{className:H.TEXT_AUXILIARY,id:p0,"aria-label":"Works related to "+c,title:"Works related to "+c,children:c}),d.jsx(GN,{icon:"cross",minimal:!0,large:!0,onClick:s,title:"Close dialog"})]})}),JN=d0(function(e){const{isOpen:t,items:o,onClose:s,show:i}=e,[c,{set:u,add:f,remove:m}]=zi({start:[],identify:(v,w)=>v.doi==w.doi&&v.url==w.url}),p=c.length>0,g=Ri(()=>({handleRemove:m,handleSelect:f,items:c,resetImport:()=>u([])}),[f,c,m,u]),b=f0(()=>{u([]),s()},[s,u]);return d.jsx(Ho,{ariaLabelledBy:p0,className:"citations",extraClasses:p?["has-selected-items"]:[],isOpen:t,onClose:b,children:d.jsx("div",{className:YN.DIALOG_BODY,children:d.jsxs(Nn,{children:[d.jsx("div",{className:"zr-semantic-panel--main",children:d.jsx(ZN,{defaultTab:i.type,items:o,onClose:b,selectProps:g,title:i.title})}),d.jsx(QN,{selectProps:g})]})})})}),eL=JN,h0=qt.create({baseURL:"https://api.semanticscholar.org/v1/paper/",params:{include_unknown_references:"true"}});Go(h0,{retries:3});async function tL(n){let e;try{const t=await h0.get(`${n}`),{data:{citations:o,references:s}}=t;return e=t,{doi:n,citations:mg(o),references:mg(s)}}catch(t){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch data from SemanticScholar",context:{error:Kt(t),response:e}}),Promise.reject(t)}}const nL=(n,e={})=>{const{cacheTime:t=1/0,...o}=e;return iC({queryKey:["semantic",{doi:n}],queryFn:i=>tL(n),cacheTime:t,...o})};function rL(n,e,t){const{items:o=[],pdfs:s=[],notes:i=[]}=n,c=o.filter(g=>g.data.DOI),{citations:u=[],references:f=[]}=e,m=u.map(g=>({...Wy(g,{items:c,pdfs:s,notes:i},t),_type:vf.CITING})),p=f.map(g=>({...Wy(g,{items:c,pdfs:s,notes:i},t),_type:vf.CITED}));return{citations:m,references:p,backlinks:[...p,...m].filter(gv)}}function oL(n){const e={authors:"",authorsLastNames:[],authorsString:"",doi:n.doi,intent:n.intent,isInfluential:n.isInfluential,links:{},meta:n.venue.split(/ ?:/)[0],title:n.title,url:n.url||"",year:n.year?n.year.toString():"",_multiField:""};return e.authorsLastNames=n.authors.map(t=>sL(t.name)),e.authorsString=e.authorsLastNames.join(" "),e.authors=iL(e.authorsLastNames),n.paperId&&(e.links["semantic-scholar"]=`https://www.semanticscholar.org/paper/${n.paperId}`),n.arxivId&&(e.links.arxiv=`https://arxiv.org/abs/${n.arxivId}`),(n.doi||n.title)&&(e.links["connected-papers"]="https://www.connectedpapers.com/"+(n.doi?"api/redirect/doi/"+n.doi:"search?q="+encodeURIComponent(n.title)),e.links["google-scholar"]="https://scholar.google.com/scholar?q="+(n.doi||encodeURIComponent(n.title))),e._multiField=[e.authorsString,e.year,e.title].filter(Tt).join(" "),e}function aL(n,e){if(n.meta.parsedDate)if(e.meta.parsedDate){const t=new Date(n.meta.parsedDate).getUTCFullYear()-new Date(e.meta.parsedDate).getUTCFullYear();return t<0||t==0&&n.meta.creatorSummary<e.meta.creatorSummary?-1:1}else return-1;else return e.meta.parsedDate?1:n.meta.creatorSummary<e.meta.creatorSummary?-1:1}function sL(n){const e=n.replaceAll("."," ").split(" ").filter(Tt);return e.length==1?e[0]:e.slice(1).filter(t=>t.length>1).join(" ")}function iL(n){switch(n.length){case 0:return"";case 1:return n[0];case 2:return n[0]+" & "+n[1];case 3:return n[0]+", "+n[1]+" & "+n[2];default:return n[0]+" et al."}}function Wy(n,e,t){const{items:o=[],pdfs:s=[],notes:i=[]}=e,c=oL(n);if(c.doi){const u=o.find(f=>Rs(f.data.DOI)==c.doi);if(u){const f=u.data.key,m=u.library.type+"s/"+u.library.id,p=_a(f,m,{pdfs:s,notes:i});return{...c,inGraph:t.get("@"+u.key)||!1,inLibrary:{children:p,raw:u}}}else return{...c,inGraph:!1,inLibrary:!1}}else return{...c,inGraph:!1,inLibrary:!1}}const lL=["citekey","dnp","tag"],Fp="zr-page-menu--",ms=lL.reduce((n,e)=>(n[e]=Fp+e,n),{}),cL=["references","citations","backlinks"],uL="zr-page-menu-show--",Yd=cL.reduce((n,e)=>(n[e]=uL+e,n),{}),qc="zr-webimport-div",m0=window.React.memo,Hf=window.React.useCallback,er=window.React.useMemo,dL=window.React.useState,gs=window.Blueprint.Core.Button,g0=window.Blueprint.Core.ButtonGroup,fL=window.Blueprint.Core.Card,Qy=window.Blueprint.Core.Classes,pL=window.Blueprint.Core.Collapse,hL=window.Blueprint.Core.Tag;function Ky({entry:n}){const{_type:e,inLibrary:t,inGraph:o}=n,{children:{pdfs:s,notes:i},raw:c}=t,{key:u,data:f,meta:m}=c,p=m.parsedDate?new Date(m.parsedDate).getUTCFullYear():"",g=e=="cited"?"reference":"citation",b=er(()=>d.jsx(rl,{inGraph:o,item:c,notes:i,pdfs:s}),[o,c,i,s]);return d.jsxs("li",{className:"zr-backlink-item","data-backlink-type":g,"data-in-graph":(o!=!1).toString(),"data-item-year":p,"data-key":"@"+u,children:[d.jsx("div",{className:"zr-backlink-item--year",children:p}),d.jsxs("div",{className:"zr-backlink-item--info","data-item-type":f.itemType,children:[d.jsx("span",{"zr-role":"item-authors",className:g=="reference"?H.TEXT_ACCENT_1:H.TEXT_ACCENT_2,children:m.creatorSummary||""}),d.jsx("span",{"zr-role":"item-publication",className:H.TEXT_SECONDARY,children:f.publicationTitle||f.bookTitle||f.university||""}),d.jsx("span",{"zr-role":"item-title",children:f.title})]}),d.jsx("div",{className:"zr-backlink-item--state",children:b})]})}const mL=m0(function(e){const{isOpen:t,items:o=[],origin:s}=e;if(o.length==0)return null;{const c=[...o].sort((p,g)=>aL(p.inLibrary.raw,g.inLibrary.raw)),u=c.filter(p=>p._type=="cited"),f=c.filter(p=>p._type=="citing"),m=d.jsx(hL,{className:"zr-backlinks-divider--tag",fill:!0,minimal:!0,multiline:!0,children:s});return d.jsx(pL,{isOpen:t,keepChildrenMounted:!0,children:d.jsxs("div",{className:"zr-citekey-menu--backlinks",children:[u.length>0?d.jsx("ul",{className:Qy.LIST_UNSTYLED,"zr-role":"sublist","list-type":"references",children:u.map(p=>d.jsx(Ky,{entry:p},`${p.doi}`))}):null,u.length>0&&f.length>0?m:null,f.length>0?d.jsx("ul",{className:Qy.LIST_UNSTYLED,"zr-role":"sublist","list-type":"citations",children:f.map(p=>d.jsx(Ky,{entry:p},`${p.doi}`))}):null]})})}});function gL(n){const{doi:e,itemList:t,origin:o,title:s}=n,[i]=Wo(),{isLoading:c,isError:u,data:f,error:m}=nL(e),[p,{toggle:g}]=Lt(!1),[b,{on:v,off:w}]=Lt(!1),[S,_]=dL({title:s,type:io.REFERENCES}),O=Hf(()=>{_({title:s,type:io.REFERENCES}),v()},[s,v]),D=Hf(()=>{_({title:s,type:io.CITATIONS}),v()},[s,v]),M=(f||{}).references?.length||0,W=(f||{}).citations?.length||0,X=er(()=>{if(f){const{citations:I,references:P}=f;return rL(t,{citations:I,references:P},i)}else return{backlinks:[],citations:[],references:[]}},[f,t,i]),N=er(()=>X.backlinks.length==0?{"aria-disabled":!0,disabled:!0,icon:null,text:"No related library items"}:{icon:p?"caret-down":"caret-right",text:Xt(X.backlinks.length,"related library item")},[X.backlinks.length,p]);return d.jsx("div",{className:"zotero-roam-page-menu-citations",children:u?d.jsx(ep,{error:m}):d.jsxs(d.Fragment,{children:[d.jsxs(g0,{minimal:!0,fill:!0,role:"menubar",children:[d.jsx(gs,{"aria-disabled":M==0,disabled:M==0,className:Yd.references,loading:c,minimal:!0,onClick:O,icon:"citation",intent:"primary",role:"menuitem","aria-haspopup":"dialog","aria-label":"Show references",title:"Show references",children:Xt(M,"reference")}),d.jsx(gs,{"aria-disabled":W==0,disabled:W==0,className:Yd.citations,loading:c,minimal:!0,onClick:D,icon:"chat",intent:"warning",role:"menuitem","aria-haspopup":"dialog",title:"Show citations",children:Xt(W,"citation")}),d.jsx(gs,{className:Yd.backlinks,loading:c,minimal:!0,onClick:g,...N,role:"menuitem",title:"Show backlinks"})]}),M+W>0?d.jsx(eL,{isOpen:b,items:X,onClose:w,show:S}):null,d.jsx(mL,{isOpen:p,items:X.backlinks,origin:o})]})})}function yL({item:n}){const[e,{on:t,off:o}]=Lt(!1);return d.jsxs(d.Fragment,{children:[d.jsx(gs,{icon:"info-sign",onClick:t,role:"menuitem","aria-haspopup":"dialog",children:"View item information"}),d.jsx(Ho,{className:"view-item-information",isOpen:e,onClose:o,children:d.jsx(e0,{closeDialog:o,item:n})})]})}function bL({item:n,notes:e,pageUID:t}){const[o,{on:s,off:i}]=Lt(!1);return d.jsxs(d.Fragment,{children:[d.jsx(gs,{icon:"comment",onClick:s,role:"menuitem","aria-haspopup":"dialog",children:"Import notes"}),d.jsx(Ho,{className:"import-item-notes",isOpen:o,label:"Import notes",onClose:i,children:d.jsx(UP,{closeDialog:i,item:n,notes:e,pageUID:t})})]})}const vL=m0(function({item:e,itemList:t}){const[o]=Os(),[s]=Zi(),[i]=Ra(),[{defaults:c}]=el(),[u]=Wv(),[f]=Oa(),[m]=Wo(),p=Rs(e.data.DOI),g=up("@"+e.key),b=er(()=>{const N=e.data.key,I=e.library.type+"s/"+e.library.id,{pdfs:P,notes:$}=t;return _a(N,I,{pdfs:P,notes:$})},[t,e]),v=er(()=>p?d.jsx("span",{className:"zr-citekey-doi","data-doi":p,children:d.jsx("a",{href:"https://doi.org/"+p,target:"_blank",rel:"noreferrer",children:p})}):null,[p]),w=Hf(async()=>{const{pdfs:N,notes:I}=b;return await nu({item:e,pdfs:N,notes:I},g,s,f,i,o)},[o,b,e,s,i,g,f]),S=er(()=>b.pdfs.length==0||!c.includes("pdfLinks")?null:b.pdfs.map(N=>d.jsx(yr,{"zr-role":"pdf-link",alignText:"left",href:hp(N,"href"),icon:"paperclip",intent:"none",minimal:!0,role:"menuitem",text:N.data.filename||N.data.title},N.key)),[c,b.pdfs]),_=er(()=>b.notes.length==0||!c.includes("importNotes")?null:d.jsx(bL,{item:e,notes:b.notes,pageUID:g}),[c,b.notes,e,g]),O=er(()=>d.jsxs(d.Fragment,{children:[c.includes("openZoteroLocal")?d.jsx(yr,{icon:"application",intent:"none",text:"Open in Zotero",href:_s(e,{format:"target"}),role:"menuitem"}):null,c.includes("openZoteroWeb")?d.jsx(yr,{icon:"cloud",intent:"none",text:"Open in Zotero [Web library]",href:ks(e,{format:"target"}),role:"menuitem"}):null]}),[c,e]),D=er(()=>p&&c.includes("sciteBadge")?d.jsx(Vv,{doi:p,...u}):null,[c,p,u]),M=er(()=>{const N=c.includes("connectedPapers")?d.jsx(yr,{icon:"layout",intent:"primary",text:"Connected Papers",href:"https://www.connectedpapers.com/"+(p?"api/redirect/doi/"+p:"search?q="+encodeURIComponent(e.data.title)),role:"menuitem"}):null,I=p&&c.includes("semanticScholar")?d.jsx(yr,{icon:"bookmark",intent:"primary",text:"Semantic Scholar",href:"https://api.semanticscholar.org/"+p,role:"menuitem"}):null,P=c.includes("googleScholar")?d.jsx(yr,{icon:"learning",intent:"primary",text:"Google Scholar",href:"https://scholar.google.com/scholar?q="+(p||encodeURIComponent(e.data.title)),role:"menuitem"}):null;return d.jsxs(d.Fragment,{children:[N,I,P]})},[c,p,e.data.title]),W=er(()=>p&&c.includes("citingPapers")?d.jsx(gL,{doi:p,itemList:t,origin:e.meta.parsedDate?new Date(e.meta.parsedDate).getUTCFullYear().toString():"",title:"@"+e.key}):null,[c,p,e.key,e.meta.parsedDate,t]),X=er(()=>dp(e,b.pdfs,b.notes,m),[b,e,m]);return d.jsxs(Nn,{children:[v,d.jsxs(fL,{elevation:0,className:"zr-citekey-menu",children:[d.jsxs("div",{className:"zr-citekey-menu--header",children:[d.jsxs(g0,{className:"zr-citekey-menu--actions",minimal:!0,role:"menubar",children:[c.includes("addMetadata")?d.jsx(gs,{icon:"add",onClick:w,role:"menuitem",children:"Add metadata"}):null,_,c.includes("viewItemInfo")?d.jsx(yL,{item:X}):null,O,S,M]}),D]}),W]})]})}),wL=vL,ol=window.React.memo,xL=window.React.useEffect,_c=window.React.useMemo,Vf=window.Blueprint.Core.Button,ys=window.Blueprint.Core.Classes,Xy="zr-related-panel-label",CL=ol(function({abstract:e,allAbstractsShown:t}){const[o,{set:s,toggle:i}]=Lt(t);return xL(()=>{s(t)},[t,s]),e?d.jsxs("div",{className:"zr-related-item--abstract",children:[d.jsx(Vf,{className:H.TEXT_SMALL,"zr-role":"abstract-toggle",icon:o?"chevron-down":"chevron-right",onClick:i,minimal:!0,small:!0,children:"Abstract"}),o?d.jsx("span",{"zr-role":"abstract-text",className:[H.TEXT_SMALL,H.TEXT_AUXILIARY].join(" "),children:e}):null]}):null}),EL=ol(function({timestamp:e,type:t}){return t=="added_on"?d.jsx("span",{className:[ys.MENU_ITEM_LABEL,H.TEXT_SMALL,"zr-related-item--timestamp"].join(" "),children:e}):null}),SL=ol(function(e){const{allAbstractsShown:t,closeDialog:o,item:s,type:i}=e,{children:{pdfs:c,notes:u},raw:f}=s;return d.jsx("li",{className:"zr-related-item","data-in-graph":(s.inGraph!=!1).toString(),children:d.jsxs("div",{className:ys.MENU_ITEM,children:[d.jsx(EL,{timestamp:s.timestamp,type:i}),d.jsxs("div",{className:[ys.FILL,"zr-related-item-contents"].join(" "),children:[d.jsxs("div",{className:ys.FILL,style:{display:"flex"},children:[d.jsxs("div",{className:"zr-related-item-contents--metadata",children:[d.jsx("span",{className:"zr-related-item--title","data-item-type":s.itemType,children:s.title}),d.jsx("span",{className:H.TEXT_ACCENT_1,children:s.meta})]}),d.jsx("span",{className:"zr-related-item-contents--actions",children:d.jsx(rl,{closeDialog:o,inGraph:s.inGraph,item:f,notes:u,pdfs:c})})]}),d.jsx(CL,{abstract:s.abstract,allAbstractsShown:t})]})]})})}),TL=ol(function(e){const{allAbstractsShown:t,closeDialog:o,items:s,type:i}=e,c=_c(()=>{const u=i==br.ADDED_ON?"added":"meta";return qf(s,u)},[s,i]);return d.jsx("ul",{className:ys.LIST_UNSTYLED,children:c.map(u=>d.jsx(SL,{allAbstractsShown:t,closeDialog:o,item:u,type:i},[u.location,u.key].join("-")))})}),_L=ol(function(e){const{isOpen:t,items:o,onClose:s,show:i}=e,[c,{toggle:u}]=Lt(!1),f=_c(()=>{const{title:g,type:b}=i;switch(b){case br.ADDED_ON:return{string:"item",suffix:" added on "+g};case br.WITH_ABSTRACT:return{string:"abstract",suffix:" containing "+g};case br.WITH_TAG:default:return{string:"item",suffix:" tagged with "+g}}},[i]),m=_c(()=>d.jsx("h5",{id:Xy,className:"panel-tt",children:Xt(o.length,f.string,f.suffix)}),[o.length,f]),p=_c(()=>d.jsx("div",{className:["header-right",H.TEXT_AUXILIARY].join(" "),children:d.jsx(Vf,{icon:"cross",minimal:!0,onClick:s,title:"Close dialog"})}),[s]);return d.jsx(Ho,{ariaLabelledBy:Xy,className:"related",isOpen:t,onClose:s,children:d.jsx("div",{className:ys.DIALOG_BODY,children:d.jsxs(Nn,{children:[d.jsxs("div",{className:"header-content",children:[d.jsxs("div",{className:"header-left",children:[m,d.jsxs(Vf,{className:H.TEXT_SMALL,minimal:!0,onClick:u,"zr-role":"toggle-abstracts",children:[c?"Hide":"Show"," abstracts"]})]}),p]}),d.jsx("div",{className:"rendered-div",children:d.jsx(TL,{allAbstractsShown:c,closeDialog:s,items:o,type:i.type})})]})})})}),y0=_L,kL=window.React.useMemo,RL=window.Blueprint.Core.Button;function OL({added:n,title:e}){const[t,{on:o,off:s}]=Lt(!1),i=n.length>0,c=kL(()=>Xt(n.length,"item"," added"),[n.length]);return d.jsx(d.Fragment,{children:i?d.jsxs(d.Fragment,{children:[d.jsx(RL,{minimal:!0,icon:"calendar",onClick:o,children:c}),d.jsx(y0,{isOpen:t,items:n,onClose:s,show:{title:e,type:br.ADDED_ON}})]}):null})}const Gy=window.React.useCallback,Zd=window.React.useMemo,jL=window.React.useState,Yy=window.Blueprint.Core.Button;function AL(n){const{inAbstract:e=[],tag:t,tagged:o=[]}=n,[s,{on:i,off:c}]=Lt(!1),[u,f]=jL(),m=o.length>0,p=e.length>0,g=Zd(()=>({title:t,type:o.length>0?br.WITH_TAG:br.WITH_ABSTRACT}),[t,o.length]),b=Gy(()=>{i(),f({title:t,type:br.WITH_ABSTRACT})},[t,i]),v=Gy(()=>{i(),f({title:t,type:br.WITH_TAG})},[t,i]),w=Zd(()=>Xt(e.length,"abstract"),[e.length]),S=Zd(()=>Xt(o.length,"tagged item"),[o.length]);return d.jsxs(d.Fragment,{children:[m&&d.jsx(Yy,{minimal:!0,icon:"manual",onClick:v,children:S}),p&&d.jsx(Yy,{minimal:!0,icon:"manually-entered-data",onClick:b,children:w}),(m||p)&&d.jsx(y0,{isOpen:s,items:(u||g).type==br.WITH_TAG?o:e,onClose:c,show:u||g})]})}const $p=window.ReactDOM.createPortal,lo=window.React.useMemo;function IL({menus:n}){const[{trigger:e}]=el(),[{dataRequests:t}]=Un(),o=po(t,{select:f=>f.data,notifyOnChangeProps:["data"]}),s=lo(()=>o.map(f=>f.data||[]).flat(1),[o]),i=lo(()=>Ta(s),[s]),c=lo(()=>i.items.filter(f=>f.has_citekey),[i]),u=lo(()=>c?n.filter(f=>e.constructor===Boolean?e:!0).map(f=>{const m=c.find(p=>p.key==f.getAttribute("data-citekey"));return{div:f,item:m}}).map((f,m)=>{if(f.item){const{item:p,div:g}=f;return $p(d.jsx(wL,{item:p,itemList:i},m),g)}}):null,[c,i,n,e]);return d.jsx(d.Fragment,{children:u})}function PL({menus:n}){const[{trigger:e}]=el(),[{dataRequests:t}]=Un(),[o]=Wo(),i=po(t,{notifyOnChangeProps:["data"],select:f=>f.data}).map(f=>f.data||[]).flat(1),c=lo(()=>Ta(i),[i]),u=lo(()=>{const{items:f,pdfs:m,notes:p}=c;return f?n.filter(g=>typeof e=="boolean"?e:!0).map(g=>{const b=g.getAttribute("data-title"),v=JSON.parse(g.getAttribute("data-dnp-date")),w=new Date(...v).toDateString(),S=f.filter(_=>new Date(_.data.dateAdded).toDateString()==w).map(_=>$f(_,{pdfs:m,notes:p},o));return{div:g,added:S,title:b}}).filter(g=>g.added).map((g,b)=>{const{added:v,div:w,title:S}=g;return $p(d.jsx(OL,{added:v,title:S},b),w)}):null},[c,n,o,e]);return d.jsx(d.Fragment,{children:u})}function NL({menus:n}){const[{trigger:e}]=el(),[{dataRequests:t}]=Un(),[o]=Wo(),i=po(t,{notifyOnChangeProps:["data"],select:m=>m.data}).map(m=>m.data||[]).flat(1),c=lo(()=>Ta(i),[i]),u=lo(()=>c.items.filter(m=>m.data.abstractNote||m.data.tags.length>0).map(m=>({itemData:m,abstract:m.data.abstractNote||"",tagList:m.data.tags.map(p=>p.tag)})),[c.items]),f=lo(()=>{const{items:m,pdfs:p,notes:g}=c;return m?n.filter(b=>typeof e=="boolean"?e:b.getAttribute("data-title").length>5).map(b=>{const v=b.getAttribute("data-title"),w=u.reduce((S,_)=>(_.abstract.includes(v)&&S.with_abstract.push($f(_.itemData,{pdfs:p,notes:g},o)),_.tagList.includes(v)&&S.with_tags.push($f(_.itemData,{pdfs:p,notes:g},o)),S),{with_tags:[],with_abstract:[]});return{div:b,tag:v,...w}}).filter(b=>b.with_tags.length>0||b.with_abstract.length>0).map((b,v)=>{const{with_tags:w,with_abstract:S,div:_,tag:O}=b;return $p(d.jsx(AL,{tag:O,inAbstract:S,tagged:w},v),_)}):null},[c,n,o,e,u]);return d.jsx(d.Fragment,{children:f})}const b0=window.React.memo,v0=window.React.useCallback,LL=window.Blueprint.Core.Button,DL=window.Blueprint.Core.Checkbox,Wf=window.Blueprint.Core.Classes,ML=window.Blueprint.Core.Tag;function BL(n,e={}){return o0(n,{...e,select:t=>{const{item:o,query:s}=t;return{abstract:o.abstractNote||"",creators:o.creators?.map(i=>"name"in i?i.name:[i.firstName,i.lastName].filter(Tt).join(" ")).join(", "),itemType:o.itemType,publication:o.publicationTitle||o.bookTitle||o.websiteTitle||"",title:o.title,url:s}},notifyOnChangeProps:["data","isLoading"]})}const zL=b0(function(e){const{isSelected:t,item:o,onSelect:s}=e,[i]=Oa(),c=v0(()=>{s(o.url)},[o.url,s]);return d.jsx("li",{className:"zr-webimport-item","aria-label":o.url,onClick:c,children:d.jsxs("div",{className:Wf.MENU_ITEM,children:[d.jsxs("div",{className:"zr-webimport-item--header",children:[d.jsx(DL,{checked:t,className:"zr-webimport-item--title",inline:!1,labelElement:d.jsxs(d.Fragment,{children:[d.jsx("a",{target:"_blank",rel:"noreferrer",href:o.url,children:o.title}),o.creators?d.jsxs("span",{className:H.TEXT_SECONDARY,"zr-role":"item-creators",children:[" (",o.creators,")"]}):null]}),onChange:c}),o.itemType?d.jsx(ML,{htmlTitle:o.publication,minimal:!0,"zr-role":"item-type",children:d.jsx("span",{"data-item-type":o.itemType,children:i[o.itemType]||o.itemType})}):null]}),d.jsx("div",{className:"zr-webimport-item--contents",children:d.jsx("span",{className:[H.TEXT_SMALL,H.TEXT_AUXILIARY].join(" "),"zr-role":"item-abstract",children:o.abstract})})]})})}),FL=b0(function(e){const{isOpen:t,onClose:o,urls:s}=e,[i,{set:c,toggle:u}]=zi({start:[]}),f=i.length>0,m=BL(s,{enabled:t}),p=m.every(v=>v.isLoading),g=m.filter(v=>v.isSuccess).map(v=>v.data).filter(Tt),b=v0(()=>{c([]),o()},[o,c]);return d.jsx(Ho,{ariaLabelledBy:"zr-webimport-dialog--title",className:"webimport",extraClasses:f?["has-selected-items"]:[],isOpen:t,onClose:b,children:d.jsx("div",{className:Wf.DIALOG_BODY,children:d.jsxs(Nn,{children:[d.jsxs("div",{className:"zr-webimport-panel--main",children:[d.jsxs("div",{className:"header-content",children:[d.jsxs("div",{className:"header-left",children:[d.jsx("h5",{id:"zr-webimport-dialog--title",className:"panel-tt",children:p?"Parsing links...":Xt(g.length,"link"," found")}),!p&&d.jsx(sN,{})]}),d.jsx("div",{className:["header-right",H.TEXT_AUXILIARY].join(" "),children:d.jsx(LL,{icon:"cross",large:!0,minimal:!0,onClick:b,title:"Close dialog"})})]}),d.jsx("div",{className:"rendered-div",children:d.jsx("ul",{className:Wf.LIST_UNSTYLED,children:g.map(v=>d.jsx(zL,{item:v,isSelected:i.includes(v.url),onSelect:u},v.url))})})]}),d.jsx("div",{className:"zr-webimport-panel--side",tabIndex:0,children:d.jsx(l0,{identifiers:i,isActive:f,resetImport:()=>c([])})})]})})})}),$L=FL,UL=window.React.memo,qL=window.React.useCallback,HL=window.React.useEffect,VL=window.React.useRef,WL=window.React.useState,QL=window.ReactDOM.createPortal,KL=window.Blueprint.Core.Button,XL=UL(function({urls:e}){const[t,{on:o,off:s}]=Lt(!1);return d.jsxs(d.Fragment,{children:[d.jsx(KL,{className:"zr-webimport-button",icon:"geosearch",minimal:!0,onClick:o}),d.jsx($L,{isOpen:t,onClose:s,urls:e})]})});function GL({divs:n}){const e=VL(!1),[t,o]=WL([]),s=qL(()=>{o(i=>{const c=Array.from(n).filter(u=>(u?.parentElement?.querySelectorAll(".rm-block a:not(.rm-alias--page):not(.rm-alias--block)")||[]).length>0);return Uf(i,c)?c:i})},[n]);return HL(()=>{e.current=!0;const i=setInterval(()=>{e.current&&s()},1e3);return()=>{e.current=!1,clearInterval(i)}},[s]),d.jsx(d.Fragment,{children:Array.from(t).map(i=>({div:i,links:i.parentElement?.querySelectorAll(".rm-block a:not(.rm-alias--page):not(.rm-alias--block)")||[]})).filter(i=>i.links.length>0).map((i,c)=>{const{div:u,links:f}=i,m=Array.from(f).map(p=>p.href);return QL(d.jsx(XL,{urls:m},c),u)})})}const YL=new RegExp(/(.+) ([0-9]+).{2}, ([0-9]{4})/),ZL=()=>{const n=Array.from(document.querySelectorAll("h1.rm-title-display")).filter(e=>!e.parentElement?.querySelector(`[class*=${Fp}]`));for(const e of n){const t=e.querySelector("span")?.innerText||e.innerText,o=up(t),s=document.createElement("div");switch(s.setAttribute("data-title",t),o&&s.setAttribute("data-uid",o),!0){case t.startsWith("@"):s.classList.add(ms.citekey),s.setAttribute("data-citekey",t.slice(1));break;case YL.test(t):s.classList.add(ms.dnp),s.setAttribute("data-dnp-date",JSON.stringify(bS(t,{as_date:!1})));break;default:s.classList.add(ms.tag)}e.insertAdjacentElement("afterend",s)}},JL=()=>({citekeyMenus:Array.from(document.querySelectorAll(`[class=${ms.citekey}]`)),dnpMenus:Array.from(document.querySelectorAll(`[class=${ms.dnp}]`)),tagMenus:Array.from(document.querySelectorAll(`[class=${ms.tag}]`))}),w0=()=>Array.from(document.querySelectorAll(`[class="${qc}"]`));function Zy(n,e){return n.some(t=>e.includes(t))}const eD=n=>{w0().filter(o=>!Zy(n,JSON.parse(o.parentElement?.getAttribute("data-page-links")||"[]"))).forEach(o=>o.remove());const e=Array.from(document.querySelectorAll(".rm-block:not(.rm-block--ghost)")).filter(o=>!o.querySelector(`[class=${qc}]`)&&Zy(n,JSON.parse(o.getAttribute("data-page-links")||"[]"))),t=document.createElement("span");t.classList.add(qc),e.forEach(o=>o.insertAdjacentElement("afterbegin",t.cloneNode(!0)))},tD=window.React.memo,nD=window.React.useCallback,rD=window.React.useEffect,oD=window.React.useRef,Jy=window.React.useState,aD=tD(function(){const e=oD(!1),[{citekeyMenus:t,dnpMenus:o,tagMenus:s},i]=Jy({citekeyMenus:[],dnpMenus:[],tagMenus:[]}),[c,u]=Jy([]),[{trigger:f}]=yp(),[{tags:m}]=Qv(),p=nD(()=>{i(g=>{const b={},v=JL();for(const w of Object.keys(v))Uf(g[w],v[w])&&(b[w]=v[w]);return JSON.stringify(b)==="{}"?g:{...g,...b}}),u(g=>{const b=w0();return Uf(g,b)?b:g})},[]);return rD(()=>{e.current=!0;const g=setInterval(()=>{ZL(),eD(m),e.current&&p()},1e3);return()=>{e.current=!1,clearInterval(g),Array.from(document.querySelectorAll(`[class*=${Fp}]`)).forEach(b=>b.remove()),Array.from(document.querySelectorAll(`[class=${qc}]`)).forEach(b=>b.remove())}},[p,m]),d.jsxs(d.Fragment,{children:[t?d.jsx(IL,{menus:t}):null,o?d.jsx(PL,{menus:o}):null,s?d.jsx(NL,{menus:s}):null,f?d.jsx(cP,{}):null,d.jsx(GL,{divs:c}),d.jsx(bP,{})]})}),sD=window.React.memo,iD=window.React.useMemo,lD=window.Blueprint.Core.Button,hc=window.Blueprint.Core.Classes,cD=window.Blueprint.Core.Collapse,eb=window.Blueprint.Core.Tag,uD=sD(function({log:e}){const[t,{toggle:o}]=Lt(!1),s=iD(()=>JSON.stringify(e.context||{})!="{}",[e.context]);return d.jsxs(Xo,{className:"zr-logger--entry","data-log-level":e.level,children:[d.jsxs("div",{className:"zr-log--header",children:[d.jsxs("div",{className:["zr-log--metadata",hc.MONOSPACE_TEXT].join(" "),children:[d.jsx("span",{className:"zr-log--timestamp",children:Bi(e.timestamp)}),d.jsx(eb,{className:"zr-log--level",intent:e.intent,minimal:!0,children:e.level}),d.jsx(eb,{minimal:!0,children:e.origin})]}),d.jsxs("div",{className:["zr-log--summary",H.TEXT_SMALL].join(" "),children:[d.jsxs("div",{children:[d.jsx("span",{className:hc.MONOSPACE_TEXT,children:e.message}),e.detail&&d.jsx("span",{className:[hc.MONOSPACE_TEXT,H.TEXT_SECONDARY,H.TEXT_SMALL].join(" "),children:e.detail})]}),s&&d.jsx(lD,{className:H.TEXT_SECONDARY,rightIcon:t?"chevron-up":"chevron-down",minimal:!0,onClick:o,small:!0,text:t?"Hide":"View",title:"Show details"})]})]}),d.jsx("div",{className:"zr-log--details",children:s&&d.jsx(cD,{isOpen:t,children:d.jsx("pre",{className:[hc.CODE_BLOCK,H.TEXT_AUXILIARY].join(" "),children:JSON.stringify(e.context,null,"  ")})})})]})}),dD=uD,fD=window.React.memo,x0=window.React.useEffect,pD=window.React.useMemo,hD=window.React.useState,mD=window.Blueprint.Core.Classes,gD=window.Blueprint.Core.NonIdealState,yD=window.Blueprint.Core.Spinner,bD=window.Blueprint.Core.Switch,tb=20;function vD({items:n}){const[e,{toggle:t}]=Lt(!1),{currentPage:o,pageLimits:s,setCurrentPage:i}=ou({itemsPerPage:tb}),c=pD(()=>e?n:n.filter(u=>u.level=="error"),[n,e]);return x0(()=>{i(1)},[n,c,i]),d.jsxs("div",{className:"zr-logger--datalist",children:[c.length==0?d.jsx(gD,{className:H.TEXT_AUXILIARY,description:"No items to display"}):d.jsx(Ps,{children:c.sort((u,f)=>u.timestamp>f.timestamp?-1:1).slice(...s).map((u,f)=>d.jsx(dD,{log:u},f))}),d.jsxs(Uo,{children:[d.jsx(uu,{arrows:"first",currentPage:o,itemsPerPage:tb,nbItems:c.length,setCurrentPage:i}),d.jsx(bD,{"aria-checked":e,checked:e,label:"Show all entries",role:"switch",onChange:t})]})]})}const wD=fD(function({isOpen:e,onClose:t}){const[o,s]=hD(null);return x0(()=>{try{const i=window.zoteroRoam.logs;s(i)}catch(i){console.error(i),s([])}},[]),d.jsx(Ho,{className:"logger",isOpen:e,label:"zoteroRoam Logs",onClose:t,children:d.jsx("div",{className:mD.DIALOG_BODY,children:o==null?d.jsx(yD,{size:15}):d.jsx(vD,{items:o})})})}),nb=window.React.useMemo,xD=window.ReactDOM.createPortal,CD=window.Blueprint.Core.Classes,ED=window.Blueprint.Core.Dialog,SD=n=>{const{ariaLabelledBy:e,children:t,className:o,isOpen:s,lazy:i=!0,onClose:c,onOpening:u,...f}=n,{portalId:m}=fu(),p=nb(()=>H.PREFIX_DIALOG_OVERLAY+o,[o]),g=nb(()=>({flex:"1 1 100%"}),[]);return xD(d.jsx(ED,{"aria-labelledby":e,canEscapeKeyClose:!0,canOutsideClickClose:!0,className:p,enforceFocus:!1,isOpen:s,lazy:i,onClose:c,onOpening:u,usePortal:!1,...f,children:d.jsx("div",{className:CD.DIALOG_BODY,children:d.jsx("div",{className:"main-panel",style:g,children:t})})}),document.getElementById(m))},C0=window.Blueprint.Core.Classes,TD="search-library",E0="zr-library-search-dialogtitle",_D=[C0.TEXT_OVERFLOW_ELLIPSIS,"zr-library-item--contents"].join(" "),kD=[C0.MENU_ITEM_LABEL,"zr-library-item--key"].join(" "),RD=window.React.memo,mc=window.React.useMemo,OD=window.Blueprint.Core.Button,Jd=window.Blueprint.Core.Classes,jD=window.Blueprint.Core.Icon,AD=window.Blueprint.Core.InputGroup,ID=window.Blueprint.Core.Switch,PD=window.Blueprint.Core.useHotkeys,ND=RD(function(e){const{handleClose:t,handleKeyDown:o,handleKeyUp:s,handleQueryChange:i,quickCopyProps:{isActive:c,toggle:u},searchbar:f}=e,[m]=As(),p=mc(()=>js(m),[m]),g=mc(()=>d.jsx(jD,{id:E0,title:"Search in Zotero items",htmlTitle:"Search in Zotero items",intent:"primary",icon:"learning"}),[]),b=mc(()=>d.jsxs(d.Fragment,{children:[d.jsx(ID,{className:["zr-quick-copy",H.TEXT_AUXILIARY].join(" "),label:"Quick Copy",checked:c,onChange:u,role:"switch","aria-checked":c}),d.jsx(OD,{className:Jd.MINIMAL,large:!0,icon:"cross",onClick:t,title:"Close searchbar"})]}),[t,c,u]),v=mc(()=>{const w={allowInInput:!0,global:!0,preventDefault:!0,stopPropagation:!0},S={focusSearchBar:{label:"Focus the searchbar",onKeyDown:()=>f?.current?.focus()},toggleQuickCopy:{label:"Toggle QuickCopy",onKeyDown:()=>u()}};return Object.keys(S).map(_=>{const O=p[_]||"";return O!==""?{...w,...S[_],combo:O}:!1}).filter(Tt)},[f,p,u]);return PD(v,{showDialogKeyCombo:"shift+Z+R"}),d.jsx(AD,{className:[Jd.INPUT,Jd.FILL,"zr-library-search-input-group"].join(" "),id:"zotero-roam-search-autocomplete",placeholder:"Search in abstract, title, authors (last names), year, tags, or citekey",spellCheck:"false",autoComplete:"off",type:"text",large:!0,onChange:i,onKeyDown:o,onKeyUp:s,inputRef:f,leftElement:g,rightElement:b})}),LD=ND,Up=window.React.memo,ef=window.React.useCallback,DD=window.React.useEffect,MD=window.React.useMemo,BD=window.React.useRef,rb=window.React.useState,zD=window.Blueprint.Core.Menu,FD=window.Blueprint.Core.MenuItem,$D=window.Blueprint.Select.QueryList,UD=window.Blueprint.Select.renderFilteredItems,qD=300,HD=0,tf=50,VD={itemListPredicate:(n,e)=>n.length<HD?[]:e.filter(t=>ar(n,[t.key,t._multiField],{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"})),itemListRenderer:n=>{const{filteredItems:e,itemsParentRef:t,...o}=n,s=null,i=null,c=e.length,u=UD({filteredItems:e.slice(0,tf),itemsParentRef:t,...o},s,i);return u==null?null:d.jsxs(d.Fragment,{children:[d.jsx(zD,{ulRef:t,children:u}),c>tf&&d.jsxs("div",{className:"zr-querylist--more-results",children:["Showing ",tf," out of ",Xt(c,"result")]})]})},itemRenderer:(n,e)=>{const{handleClick:t,modifiers:o}=e,s=[n.location,n.key].join("-");return d.jsx(WD,{handleClick:t,item:n,modifiers:o},s)},itemsEqual:(n,e)=>n.itemKey==e.itemKey&&n.location==e.location},WD=Up(function(e){const{item:t,handleClick:o,modifiers:s}=e,{inGraph:i,itemType:c,key:u,meta:f,publication:m,title:p}=t;return d.jsx(FD,{onClick:o,className:"zotero-roam-search_result",role:"menuitem","data-item-type":c,"data-in-graph":(i!=!1).toString(),htmlTitle:p,labelElement:"@"+u,labelClassName:kD,"aria-selected":s.active,tagName:"div",text:d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"zr-library-item--title",children:p}),d.jsxs("span",{className:"zr-details",children:[d.jsx("span",{className:H.TEXT_ACCENT_1,children:f}),d.jsx("span",{className:H.TEXT_SECONDARY,children:m})]})]}),textClassName:_D})}),QD=Up(function(e){const{handleClose:t,itemList:o,selectedItem:s}=e;return s?d.jsx(e0,{item:s,closeDialog:t}):d.jsx("div",{id:"zotero-roam-library-rendered",children:o})}),KD=Up(function(e){const{handleClose:t,isOpen:o,items:s,quickCopyProps:i}=e,[c]=su(),u=BD(null),[f,m]=rb(null),[p,g]=rb(),[b]=LS(O=>{},qD),v=ef((O,D)=>{if(!O)m(null);else{const{key:M,location:W}=O;if(JSON.stringify(f)===JSON.stringify({key:M,location:W}))return;i.isActive?(Mo(Mf(O,c)),c.overrideKey&&D?.[c.overrideKey]==!0?(u?.current?.blur(),m({key:M,location:W})):t()):(c.always==!0&&Mo(Mf(O,c)),u?.current?.blur(),m({key:M,location:W}))}},[c,t,i.isActive,u,f]),w=MD(()=>{if(f==null)return null;{const{key:O,location:D}=f;return s.find(M=>M.key==O&&M.location==D)}},[s,f]),S=ef((O,D)=>{m(null),g(O),b(O)},[b]),_=ef(O=>{const{handleKeyUp:D,handleKeyDown:M,handleQueryChange:W,itemList:X}=O;return d.jsxs("div",{className:"zr-querylist",children:[d.jsx(LD,{handleClose:t,handleKeyDown:M,handleKeyUp:D,handleQueryChange:W,quickCopyProps:i,searchbar:u}),d.jsx(QD,{handleClose:t,itemList:X,selectedItem:w})]})},[t,i,u,w]);return DD(()=>{o?u?.current?.focus():(g(""),m(null))},[o,u]),d.jsx($D,{items:s,onItemSelect:v,onQueryChange:S,query:p,renderer:_,...VD})}),XD=KD,GD=window.React.memo,YD=window.React.useCallback,ZD=window.React.useMemo;function JD(n,e,t={}){const o=YD(c=>c.data?vP(c.data,e):[],[e]),s=po(n,{...t,notifyOnChangeProps:["data"],select:o});return ZD(()=>s.map(c=>c.data||[]).flat(1),[s])}const eM=GD(function({isOpen:e,onClose:t,status:o}){const[{useQuickCopy:s}]=su(),[{dataRequests:i}]=Un(),[c]=Wo(),[u,{toggle:f}]=Lt(s),m=JD(i,c,{enabled:o==Zt.ON});return d.jsx(SD,{ariaLabelledBy:E0,className:TD,isOpen:e,lazy:!1,onClose:t,children:d.jsx(Nn,{children:d.jsx(XD,{handleClose:t,isOpen:e,items:m,quickCopyProps:{isActive:u,toggle:f}})})})}),tM=window.React.Component,nM=window.React.createContext,rM=window.React.useContext,kc=window.React.useMemo,oM=window.Blueprint.Core.HotkeysTarget2,ob="zoteroRoam : Open Search Panel",ab="zoteroRoam : Open Dashboard",S0=nM(null),fu=()=>{const n=rM(S0);if(!n)throw new Error("No context provided");return n},Hc=new Dx({defaultOptions:{queries:{cacheTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchIntervalInBackground:!0,retryOnMount:!1,staleTime:1e3*60}}}),aM=({children:n,idbDatabase:e})=>{const[{cacheEnabled:t}]=Ji(),o=kc(()=>H_(e),[e]),s=kc(()=>({onSuccess:()=>{window.zoteroRoam?.info?.({origin:"Database",message:"Initialization complete"})},persistOptions:{buster:"v1.0",dehydrateOptions:{shouldDehydrateQuery:V_},maxAge:1e3*60*60*24*3,persister:o}}),[o]),i=kc(()=>t?fC:Sb,[t]);return d.jsx(i,{client:Hc,...s,children:n})},sM=n=>{const[{autoload:e}]=Ji(),[t]=Un(),[o]=As(),s=kc(()=>js(o),[o]);return d.jsx(iM,{autoload:e,requests:t,shortcuts:s,...n})};class iM extends tM{constructor(t){super(t);Ut(this,"shortcutsConfig",{toggleDashboard:{label:"Show/hide the dashboard",onKeyDown:()=>this.toggleDashboard()},toggleSearchPanel:{label:"Show/hide the search panel",onKeyDown:()=>this.toggleSearchPanel()},toggleSettingsPanel:{label:"Show/hide the settings panel",onKeyDown:()=>this.toggleSettings()}});Ut(this,"hotkeysOptions",{showDialogKeyCombo:"shift+Z+R"});this.state={isDashboardOpen:!1,isLoggerOpen:!1,isSearchPanelOpen:!1,isSettingsPanelOpen:!1,lastCursorLocation:null,status:this.props.requests.dataRequests.length==0?Zt.DISABLED:this.props.autoload?Zt.ON:Zt.OFF},this.toggleExtension=this.toggleExtension.bind(this),this.closeSearchPanel=this.closeSearchPanel.bind(this),this.openSearchPanel=this.openSearchPanel.bind(this),this.toggleSearchPanel=this.toggleSearchPanel.bind(this),this.closeDashboard=this.closeDashboard.bind(this),this.openDashboard=this.openDashboard.bind(this),this.toggleDashboard=this.toggleDashboard.bind(this),this.closeSettings=this.closeSettings.bind(this),this.openSettings=this.openSettings.bind(this),this.toggleSettings=this.toggleSettings.bind(this),this.closeLogger=this.closeLogger.bind(this),this.openLogger=this.openLogger.bind(this)}componentDidMount(){cg(ob,this.openSearchPanel,this.props.extensionAPI),cg(ab,this.openDashboard,this.props.extensionAPI)}componentDidUpdate(t){this.props.requests.dataRequests.length==0&&t.requests.dataRequests.length>0?this.setState(o=>(Hc.clear(),{status:Zt.DISABLED})):t.requests.dataRequests.length==0&&this.props.requests.dataRequests.length>0&&this.setState(o=>({status:Zt.ON}))}componentWillUnmount(){fg(ob,this.props.extensionAPI),fg(ab,this.props.extensionAPI)}render(){const{status:t,isDashboardOpen:o,isLoggerOpen:s,isSearchPanelOpen:i,isSettingsPanelOpen:c}=this.state,{extension:u,idbDatabase:f}=this.props,m=Object.keys(this.shortcutsConfig).map(p=>{const g=this.props.shortcuts[p]||"";return g!==""?{allowInInput:!0,combo:g,global:!0,...this.shortcutsConfig[p]}:!1}).filter(Tt);return d.jsx(oM,{hotkeys:m,options:this.hotkeysOptions,children:d.jsxs(S0.Provider,{value:u,children:[d.jsxs(aM,{idbDatabase:f,children:[d.jsx(tP,{openDashboard:this.openDashboard,openLogger:this.openLogger,openSearchPanel:this.openSearchPanel,openSettingsPanel:this.openSettings,status:t,toggleExtension:this.toggleExtension}),d.jsxs(Wk,{children:[t==Zt.ON?d.jsx(aD,{}):null,d.jsx(eM,{isOpen:i,onClose:this.closeSearchPanel,status:t}),d.jsx(qI,{isOpen:o,onClose:this.closeDashboard})]})]}),d.jsx(wD,{isOpen:s,onClose:this.closeLogger}),d.jsx(Bk,{isOpen:c,onClose:this.closeSettings})]})})}toggleExtension(){this.setState(t=>{const{status:o}=t;return o==Zt.ON&&Hc.clear(),{status:o==Zt.OFF?Zt.ON:Zt.OFF}})}closeSearchPanel(){this.setState(t=>(yS(t.lastCursorLocation),{isSearchPanelOpen:!1,lastCursorLocation:null}))}openSearchPanel(){this.setState(t=>({lastCursorLocation:hS(),isSearchPanelOpen:!0}))}toggleSearchPanel(){this.state.status==Zt.ON&&this.setState(t=>({isSearchPanelOpen:!t.isSearchPanelOpen}))}closeDashboard(){this.setState(t=>({isDashboardOpen:!1}))}openDashboard(){this.setState(t=>({isDashboardOpen:!0}))}toggleDashboard(){this.state.status==Zt.ON&&this.setState(t=>({isDashboardOpen:!t.isDashboardOpen}))}closeSettings(){this.setState(t=>({isSettingsPanelOpen:!1}))}openSettings(){this.setState(t=>({isSettingsPanelOpen:!0}))}toggleSettings(){this.setState(t=>({isSettingsPanelOpen:!t.isSettingsPanelOpen}))}closeLogger(){this.setState(t=>({isLoggerOpen:!1}))}openLogger(){this.setState(t=>({isLoggerOpen:!0}))}}const sb=window.React.useCallback,lM=window.React.useEffect,cM=window.React.useMemo,uM=window.React.useState,dM=window.Blueprint.Core.Button,fM=window.Blueprint.Core.Intent;function pM(){const[n,e]=uM(),t=sb(()=>{window.zoteroRoam?.isDataCached?.().then(i=>e(i)).catch(i=>{window.zoteroRoam?.error?.({origin:"Cache",message:"Failed to update caching status",context:{error:Kt(i)}})})},[e]);lM(()=>t(),[t]);const o=cM(()=>n?{intent:fM.WARNING,text:"Clear cache",title:"Click to clear the extension's data cache"}:{disabled:!0,text:"No cached data",title:"The extension's data cache is empty"},[n]),s=sb(()=>{window.zoteroRoam?.clearDataCache?.().then(()=>t())},[t]);return d.jsx(dM,{loading:n==null,onClick:s,...o})}function T0(n,{queryClient:e}){const{path:t}=n,o=["collections",{library:t}];return e.getQueryData(o)?.data||[]}function Vc(n,e={},{queryClient:t}){const o=t.getQueriesData({queryKey:["items"],...e}).map(s=>{const[,i]=s;return i?.data||[]}).flat(1);switch(n){case"items":return o.filter(lp);case"attachments":return o.filter(ip);case"children":return o.filter(s=>["note","annotation"].includes(s.data.itemType)||s.data.itemType=="attachment"&&s.data.contentType=="application/pdf");case"annotations":return o.filter(Ts);case"notes":return o.filter(Gi);case"pdfs":return o.filter(s=>s.data.itemType=="attachment"&&s.data.contentType=="application/pdf");case"all":default:return o}}function hM(n,{queryClient:e}){const t=n.library.type+"s/"+n.library.id;return Vc("children",{predicate:o=>{const{queryKey:s}=o;return s[2].dataURI.startsWith(t)}},{queryClient:e}).filter(o=>o.data.parentItem==n.data.key)}function mM(n,e,{libraries:t,queryClient:o}){const{return_as:s,brackets:i}=e,c=n.library.type+"s/"+n.library.id,u=t.find(m=>m.path==c),f=T0(u,{queryClient:o});if(n.data.collections.length>0){const m=[];n.data.collections.forEach(g=>{const b=f.find(v=>v.key==g);b&&m.push(b.data.name)});const p=i==!0?m.map(g=>`[[${g}]]`):m;switch(s){case"array":return p;case"string":default:return p.join(", ")}}else return[]}function gM(n,e,{queryClient:t}){const{type:o,id:s}=n.library,i=Vc("items",{},{queryClient:t}).filter(f=>f.library.id==s&&f.library.type==o),{return_as:c,brackets:u}=e;if(n.data.relations&&n.data.relations["dc:relation"]){let f=n.data.relations["dc:relation"];typeof f=="string"&&(f=[f]);const m=[],p=/(users|groups)\/([^/]+)\/items\/(.+)/g;switch(f.forEach(g=>{const[,,,b]=Array.from(g.matchAll(p))[0],v=i.find(w=>w.data.key==b);v&&m.push(v)}),c){case"raw":return m;case"array":return u==!0?m.map(g=>`[[@${g.key}]]`):m.map(g=>g.key);case"string":default:return(u==!0?m.map(g=>`[[@${g.key}]]`):m.map(g=>g.key)).join(", ")}}else switch(c){case"raw":case"array":return[];case"string":default:return""}}function yM(n,{libraries:e,queryClient:t}){const{path:o}=e.find(c=>c.path==n),s=["tags",{library:o}];return t.getQueryData(s).data}const bM=window.Blueprint.Core.H5;var Wc,Qc;class vM{constructor(e={},t="info"){Ut(this,"level");Ut(this,"origin");Ut(this,"message");Ut(this,"detail");Ut(this,"context");Ut(this,"intent");Ut(this,"timestamp");da(this,Wc,{error:"danger",info:"primary",warning:"warning"});da(this,Qc,{error:"warning-sign",info:"info-sign",warning:"warning-sign"});const{origin:o="",message:s="",detail:i="",context:c={},showToaster:u=!1}=e;this.level=t,this.origin=o,this.message=s,this.detail=i,this.context=c,this.intent=St(this,Wc)[t]||void 0,this.timestamp=new Date,u&&$o.show({icon:St(this,Qc)[t]||null,intent:this.intent,message:this.detail?d.jsxs(d.Fragment,{children:[d.jsx(bM,{children:this.message}),d.jsx("p",{children:this.detail})]}):this.message,timeout:u.constructor===Number?u:1e3})}}Wc=new WeakMap,Qc=new WeakMap;class wM{constructor(){Ut(this,"logs",[])}send(e,t="info"){this.logs.push(new vM(e,t))}error(e){this.send(e,"error")}info(e){this.send(e,"info")}warn(e){this.send(e,"warning")}}var tr,Ur,mr,gr;class xM extends wM{constructor({idbDatabase:t=null,queryClient:o,requests:s,settings:i}){super();da(this,tr);da(this,Ur);da(this,mr);da(this,gr);Ut(this,"formatPDFs",vv);Ut(this,"getItemCreators",wv);Ut(this,"getItemDateAdded",Cv);Ut(this,"getItemLink",wf);Ut(this,"getItemPublication",Ev);Ut(this,"getItemTags",xv);const{libraries:c}=s,{annotations:u,notes:f,typemap:m}=i;is(this,tr,t),is(this,Ur,c),is(this,mr,o),is(this,gr,{annotations:u,notes:f,typemap:m})}async clearDataCache(){if(St(this,tr)!==null)try{await(await St(this,tr).selectStore(ya)).clear(),this.info({origin:"Database",message:"Successfully cleared data from cache",showToaster:1e3})}catch(t){this.error({origin:"Database",message:"Failed to clear data from cache",context:{error:Kt(t)}})}}async deleteDatabase(){St(this,tr)&&await St(this,tr).deleteSelf()}async isDataCached(){if(St(this,tr)!==null)try{return await(await St(this,tr).selectStore(ya)).get(uf)!==void 0}catch(t){return this.error({origin:"Database",message:"Failed to obtain caching status",context:{error:Kt(t)}}),!1}return!1}async getDataCacheUpdatedAt(){if(St(this,tr))try{const t=await St(this,tr).selectStore(ya),{timestamp:o}=await t.get(uf)||{};return o}catch(t){this.error({origin:"Database",message:"Failed to retrieve cache age",context:{error:Kt(t)}})}return null}updateLibraries(t){is(this,Ur,t)}updateSetting(t,o){St(this,gr)[t]=o}formatNotes(t){return cp(t,null,{annotationsSettings:St(this,gr).annotations,notesSettings:St(this,gr).notes})}async getBibEntries(t){const o=Vc("items",{},{queryClient:St(this,mr)}),s=cS(t,{items:o}),i=[];return Object.keys(s).forEach(u=>{const f=St(this,Ur).find(m=>m.path==u);f&&i.push(Zj(s[u],f))}),(await Promise.all(i)).join(`
`)}async getItemCitation(t,o={}){const s=t.library.type+"s/"+t.library.id,i=St(this,Ur).find(u=>u.path==s),c=await Jj(t.data.key,i,o);return sS(c)}getCollections(t){const o=St(this,Ur).find(s=>s.path==t);return T0(o,{queryClient:St(this,mr)})}getItemChildren(t){return hM(t,{queryClient:St(this,mr)})}getItemCollections(t,{return_as:o="string",brackets:s=!0}={}){return mM(t,{return_as:o,brackets:s},{libraries:St(this,Ur),queryClient:St(this,mr)})}getItemMetadata(t,o,s){return bv(t,o,s,{annotationsSettings:St(this,gr).annotations,notesSettings:St(this,gr).notes,typemap:St(this,gr).typemap})}getItemRelated(t,{return_as:o="string",brackets:s=!0}={}){return gM(t,{return_as:o,brackets:s},{queryClient:St(this,mr)})}getItemType(t,{brackets:o=!0}={}){return Sv(t,{brackets:o},{typemap:St(this,gr).typemap})}getItems(t="all"){return Vc(t,{},{queryClient:St(this,mr)})}getTags(t){return yM(t,{libraries:St(this,Ur),queryClient:St(this,mr)})}}tr=new WeakMap,Ur=new WeakMap,mr=new WeakMap,gr=new WeakMap;const CM=window.idb.deleteDB,EM=window.idb.openDB,SM=[ya];class TM{constructor(){Ut(this,"connection");Ut(this,"dbName");let e="";try{e=mS()}catch{}const t=[mC,e].filter(Tt).join("_");this.dbName=t,this.connection=EM(this.dbName,gC,{upgrade:(o,s,i,c)=>{SM.forEach(u=>o.createObjectStore(u))},blocking:()=>{console.log(`${this.dbName} - Connection is blocking another, will close`),this.connection.then(o=>o.close()).then(()=>console.log(`${this.dbName} - Connection successfully closed`))},blocked:()=>{console.log(`${this.dbName} - Connection blocked by another`)}})}async close(){(await this.connection).close()}async deleteSelf(){try{return await CM(this.dbName,{blocked:()=>{console.log(`${this.dbName} - Database deletion is blocked`)}})}catch(e){console.error(e)}}async selectStore(e){const t=await this.connection;return{async get(o){return await t.get(e,o)},async set(o,s){return await t.put(e,s,o)},async delete(o){return await t.delete(e,o)},async clear(){return await t.clear(e)}}}}const _M=window.ReactDOM.render,kM=window.Blueprint.Core.HotkeysProvider,RM={tabTitle:"zoteroRoam",settings:[{id:"cache-clear",name:"Clear cache",description:"Remove all data from the extension's local cache.",action:{type:"reactComponent",component:pM}}]};function OM({extensionAPI:n}){const e="roam/depot";G_();const{requests:t,settings:o}=K_({context:e,extensionAPI:n}),s=new TM;window.zoteroRoam=new xM({idbDatabase:s,queryClient:Hc,requests:t,settings:o}),n.settings.panel.create(RM),Y_({settings:o}),_M(d.jsx(kM,{dialogProps:{globalGroupName:"zoteroRoam"},children:d.jsx(Fk,{extensionAPI:n,init:{...o,requests:t},children:d.jsx(sM,{extension:{portalId:Zf,version:hC},extensionAPI:n,idbDatabase:s})})}),document.getElementById(Jf))}function jM(){tS(),mv(),$v(),window.zoteroRoam.deleteDatabase(),delete window.zoteroRoam}const GM={onload:OM,onunload:jM};export{GM as default};
//# sourceMappingURL=extension.js.map
