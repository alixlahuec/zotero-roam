var bx=Object.defineProperty;var vx=(t,e,n)=>e in t?bx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ut=(t,e,n)=>(vx(t,typeof e!="symbol"?e+"":e,n),n),Nm=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Pt=(t,e,n)=>(Nm(t,e,"read from private field"),n?n.call(t):e.get(t)),ma=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},us=(t,e,n,o)=>(Nm(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n);function Zc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ib={exports:{}},Ki={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Lm=Object.getOwnPropertySymbols,wx=Object.prototype.hasOwnProperty,xx=Object.prototype.propertyIsEnumerable;function Cx(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Ex(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(o.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Ex();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx=window.React,lb=60103;Ki.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Dm=Symbol.for;lb=Dm("react.element"),Ki.Fragment=Dm("react.fragment")}var Tx=Sx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_x=Object.prototype.hasOwnProperty,kx={key:!0,ref:!0,__self:!0,__source:!0};function cb(t,e,n){var o,s={},i=null,c=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(c=e.ref);for(o in e)_x.call(e,o)&&!kx.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)s[o]===void 0&&(s[o]=e[o]);return{$$typeof:lb,type:t,key:i,ref:c,props:s,_owner:Tx.current}}Ki.jsx=cb;Ki.jsxs=cb;ib.exports=Ki;var u=ib.exports;class ka{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const zi=typeof window>"u"||"Deno"in window;function or(){}function Ox(t,e){return typeof t=="function"?t(e):t}function nf(t){return typeof t=="number"&&t>=0&&t!==1/0}function Mm(t,e){return t.filter(n=>!e.includes(n))}function Rx(t,e,n){const o=t.slice(0);return o[e]=n,o}function ub(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ri(t,e,n){return Wi(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function jx(t,e,n){return Wi(t)?typeof e=="function"?{...n,mutationKey:t,mutationFn:e}:{...e,mutationKey:t}:typeof t=="function"?{...e,mutationFn:t}:{...t}}function zo(t,e,n){return Wi(t)?[{...e,queryKey:t},n]:[t||{},e]}function Bm(t,e){const{type:n="all",exact:o,fetchStatus:s,predicate:i,queryKey:c,stale:d}=t;if(Wi(c)){if(o){if(e.queryHash!==Vf(c,e.options))return!1}else if(!Dc(e.queryKey,c))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||typeof s<"u"&&s!==e.state.fetchStatus||i&&!i(e))}function zm(t,e){const{exact:n,fetching:o,predicate:s,mutationKey:i}=t;if(Wi(i)){if(!e.options.mutationKey)return!1;if(n){if(wa(e.options.mutationKey)!==wa(i))return!1}else if(!Dc(e.options.mutationKey,i))return!1}return!(typeof o=="boolean"&&e.state.status==="loading"!==o||s&&!s(e))}function Vf(t,e){return(e?.queryKeyHashFn||wa)(t)}function wa(t){return JSON.stringify(t,(e,n)=>rf(n)?Object.keys(n).sort().reduce((o,s)=>(o[s]=n[s],o),{}):n)}function Dc(t,e){return db(t,e)}function db(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!db(t[n],e[n])):!1}function fb(t,e){if(t===e)return t;const n=$m(t)&&$m(e);if(n||rf(t)&&rf(e)){const o=n?t.length:Object.keys(t).length,s=n?e:Object.keys(e),i=s.length,c=n?[]:{};let d=0;for(let f=0;f<i;f++){const m=n?f:s[f];c[m]=fb(t[m],e[m]),c[m]===t[m]&&d++}return o===i&&d===o?t:c}return e}function Mc(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $m(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rf(t){if(!Fm(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Fm(n)||!n.hasOwnProperty("isPrototypeOf"))}function Fm(t){return Object.prototype.toString.call(t)==="[object Object]"}function Wi(t){return Array.isArray(t)}function pb(t){return new Promise(e=>{setTimeout(e,t)})}function Um(t){pb(0).then(t)}function Ix(){if(typeof AbortController=="function")return new AbortController}function of(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?fb(t,e):e}class Ax extends ka{constructor(){super(),this.setup=e=>{if(!zi&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Bc=new Ax,qm=["online","offline"];class Px extends ka{constructor(){super(),this.setup=e=>{if(!zi&&window.addEventListener){const n=()=>e();return qm.forEach(o=>{window.addEventListener(o,n,!1)}),()=>{qm.forEach(o=>{window.removeEventListener(o,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(o=>{typeof o=="boolean"?this.setOnline(o):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const zc=new Px;function Nx(t){return Math.min(1e3*2**t,3e4)}function Jc(t){return(t??"online")==="online"?zc.isOnline():!0}class hb{constructor(e){this.revert=e?.revert,this.silent=e?.silent}}function Sc(t){return t instanceof hb}function mb(t){let e=!1,n=0,o=!1,s,i,c;const d=new Promise((T,R)=>{i=T,c=R}),f=T=>{o||(v(new hb(T)),t.abort==null||t.abort())},m=()=>{e=!0},p=()=>{e=!1},g=()=>!Bc.isFocused()||t.networkMode!=="always"&&!zc.isOnline(),b=T=>{o||(o=!0,t.onSuccess==null||t.onSuccess(T),s?.(),i(T))},v=T=>{o||(o=!0,t.onError==null||t.onError(T),s?.(),c(T))},w=()=>new Promise(T=>{s=R=>{const L=o||!g();return L&&T(R),L},t.onPause==null||t.onPause()}).then(()=>{s=void 0,o||t.onContinue==null||t.onContinue()}),S=()=>{if(o)return;let T;try{T=t.fn()}catch(R){T=Promise.reject(R)}Promise.resolve(T).then(b).catch(R=>{var L,q;if(o)return;const Q=(L=t.retry)!=null?L:3,ee=(q=t.retryDelay)!=null?q:Nx,D=typeof ee=="function"?ee(n,R):ee,A=Q===!0||typeof Q=="number"&&n<Q||typeof Q=="function"&&Q(n,R);if(e||!A){v(R);return}n++,t.onFail==null||t.onFail(n,R),pb(D).then(()=>{if(g())return w()}).then(()=>{e?v(R):S()})})};return Jc(t.networkMode)?S():w().then(S),{promise:d,cancel:f,continue:()=>s?.()?d:Promise.resolve(),cancelRetry:m,continueRetry:p}}const Xf=console;function Lx(){let t=[],e=0,n=p=>{p()},o=p=>{p()};const s=p=>{let g;e++;try{g=p()}finally{e--,e||d()}return g},i=p=>{e?t.push(p):Um(()=>{n(p)})},c=p=>(...g)=>{i(()=>{p(...g)})},d=()=>{const p=t;t=[],p.length&&Um(()=>{o(()=>{p.forEach(g=>{n(g)})})})};return{batch:s,batchCalls:c,schedule:i,setNotifyFunction:p=>{n=p},setBatchNotifyFunction:p=>{o=p}}}const zt=Lx();class gb{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nf(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(zi?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Dx extends gb{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Xf,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||Mx(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const o=of(this.state.data,e,this.options);return this.dispatch({data:o,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),o}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const o=this.promise;return(n=this.retryer)==null||n.cancel(e),o?o.then(or).catch(or):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ub(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(o=>o.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(o=>o.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var o,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return(i=this.retryer)==null||i.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(w=>w.options.queryFn);v&&this.setOptions(v.options)}const c=Ix(),d={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},f=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>{if(c)return this.abortSignalConsumed=!0,c.signal}})};f(d);const m=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(d)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),p={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:m};if(f(p),(o=this.options.behavior)==null||o.onFetch(p),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=p.fetchOptions)==null?void 0:s.meta)){var g;this.dispatch({type:"fetch",meta:(g=p.fetchOptions)==null?void 0:g.meta})}const b=v=>{if(Sc(v)&&v.silent||this.dispatch({type:"error",error:v}),!Sc(v)){var w,S,T,R;(w=(S=this.cache.config).onError)==null||w.call(S,v,this),(T=(R=this.cache.config).onSettled)==null||T.call(R,this.state.data,v,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=mb({fn:p.fetchFn,abort:c?.abort.bind(c),onSuccess:v=>{var w,S,T,R;if(typeof v>"u"){b(new Error(this.queryHash+" data is undefined"));return}this.setData(v),(w=(S=this.cache.config).onSuccess)==null||w.call(S,v,this),(T=(R=this.cache.config).onSettled)==null||T.call(R,v,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:b,onFail:(v,w)=>{this.dispatch({type:"failed",failureCount:v,error:w})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=o=>{var s,i;switch(e.type){case"failed":return{...o,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:Jc(this.options.networkMode)?"fetching":"paused",...!o.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...o,data:e.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const c=e.error;return Sc(c)&&c.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...o,error:c,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...e.state}}};this.state=n(this.state),zt.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function Mx(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",o=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class Bx extends ka{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,o){var s;const i=n.queryKey,c=(s=n.queryHash)!=null?s:Vf(i,n);let d=this.get(c);return d||(d=new Dx({cache:this,logger:e.getLogger(),queryKey:i,queryHash:c,options:e.defaultQueryOptions(n),state:o,defaultOptions:e.getQueryDefaults(i)}),this.add(d)),d}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(o=>o!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){zt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[o]=zo(e,n);return typeof o.exact>"u"&&(o.exact=!0),this.queries.find(s=>Bm(o,s))}findAll(e,n){const[o]=zo(e,n);return Object.keys(o).length>0?this.queries.filter(s=>Bm(o,s)):this.queries}notify(e){zt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){zt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){zt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class zx extends gb{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Xf,this.observers=[],this.state=e.state||yb(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var A;return this.retryer=mb({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(P,H)=>{this.dispatch({type:"failed",failureCount:P,error:H})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(A=this.options.retry)!=null?A:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var o,s,i,c,d,f,m,p;if(!n){var g,b,v,w;this.dispatch({type:"loading",variables:this.options.variables}),await((g=(b=this.mutationCache.config).onMutate)==null?void 0:g.call(b,this.state.variables,this));const P=await((v=(w=this.options).onMutate)==null?void 0:v.call(w,this.state.variables));P!==this.state.context&&this.dispatch({type:"loading",context:P,variables:this.state.variables})}const A=await e();return await((o=(s=this.mutationCache.config).onSuccess)==null?void 0:o.call(s,A,this.state.variables,this.state.context,this)),await((i=(c=this.options).onSuccess)==null?void 0:i.call(c,A,this.state.variables,this.state.context)),await((d=(f=this.mutationCache.config).onSettled)==null?void 0:d.call(f,A,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,A,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:A}),A}catch(A){try{var S,T,R,L,q,Q,ee,D;throw await((S=(T=this.mutationCache.config).onError)==null?void 0:S.call(T,A,this.state.variables,this.state.context,this)),await((R=(L=this.options).onError)==null?void 0:R.call(L,A,this.state.variables,this.state.context)),await((q=(Q=this.mutationCache.config).onSettled)==null?void 0:q.call(Q,void 0,A,this.state.variables,this.state.context,this)),await((ee=(D=this.options).onSettled)==null?void 0:ee.call(D,void 0,A,this.state.variables,this.state.context)),A}finally{this.dispatch({type:"error",error:A})}}}dispatch(e){const n=o=>{switch(e.type){case"failed":return{...o,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"loading":return{...o,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Jc(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...o,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:e.error,failureCount:o.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...o,...e.state}}};this.state=n(this.state),zt.batch(()=>{this.observers.forEach(o=>{o.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function yb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class $x extends ka{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,o){const s=new zx({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:o,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){zt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>zm(e,n))}findAll(e){return this.mutations.filter(n=>zm(e,n))}notify(e){zt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(o=>o.state.isPaused);return zt.batch(()=>n.reduce((o,s)=>o.then(()=>s.continue().catch(or)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function Fx(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,o,s,i,c;const d=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,f=(o=t.fetchOptions)==null||(s=o.meta)==null?void 0:s.fetchMore,m=f?.pageParam,p=f?.direction==="forward",g=f?.direction==="backward",b=((i=t.state.data)==null?void 0:i.pages)||[],v=((c=t.state.data)==null?void 0:c.pageParams)||[];let w=v,S=!1;const T=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>{var A;if((A=t.signal)!=null&&A.aborted)S=!0;else{var P;(P=t.signal)==null||P.addEventListener("abort",()=>{S=!0})}return t.signal}})},R=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),L=(D,A,P,H)=>(w=H?[A,...w]:[...w,A],H?[P,...D]:[...D,P]),q=(D,A,P,H)=>{if(S)return Promise.reject("Cancelled");if(typeof P>"u"&&!A&&D.length)return Promise.resolve(D);const fe={queryKey:t.queryKey,pageParam:P,meta:t.options.meta};T(fe);const me=R(fe);return Promise.resolve(me).then(ye=>L(D,P,ye,H))};let Q;if(!b.length)Q=q([]);else if(p){const D=typeof m<"u",A=D?m:Hm(t.options,b);Q=q(b,D,A)}else if(g){const D=typeof m<"u",A=D?m:Ux(t.options,b);Q=q(b,D,A,!0)}else{w=[];const D=typeof t.options.getNextPageParam>"u";Q=(d&&b[0]?d(b[0],0,b):!0)?q([],D,v[0]):Promise.resolve(L([],v[0],b[0]));for(let P=1;P<b.length;P++)Q=Q.then(H=>{if(d&&b[P]?d(b[P],P,b):!0){const me=D?v[P]:Hm(t.options,H);return q(H,D,me)}return Promise.resolve(L(H,v[P],b[P]))})}return Q.then(D=>({pages:D,pageParams:w}))}}}}function Hm(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function Ux(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class qx{constructor(e={}){this.queryCache=e.queryCache||new Bx,this.mutationCache=e.mutationCache||new $x,this.logger=e.logger||Xf,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Bc.subscribe(()=>{Bc.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=zc.subscribe(()=>{zc.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[o]=zo(e,n);return o.fetchStatus="fetching",this.queryCache.findAll(o).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var o;return(o=this.queryCache.find(e,n))==null?void 0:o.state.data}ensureQueryData(e,n,o){const s=Ri(e,n,o),i=this.getQueryData(s.queryKey);return i?Promise.resolve(i):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:o})=>{const s=o.data;return[n,s]})}setQueryData(e,n,o){const s=this.queryCache.find(e),i=s?.state.data,c=Ox(n,i);if(typeof c>"u")return;const d=Ri(e),f=this.defaultQueryOptions(d);return this.queryCache.build(this,f).setData(c,{...o,manual:!0})}setQueriesData(e,n,o){return zt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,n,o)]))}getQueryState(e,n){var o;return(o=this.queryCache.find(e,n))==null?void 0:o.state}removeQueries(e,n){const[o]=zo(e,n),s=this.queryCache;zt.batch(()=>{s.findAll(o).forEach(i=>{s.remove(i)})})}resetQueries(e,n,o){const[s,i]=zo(e,n,o),c=this.queryCache,d={type:"active",...s};return zt.batch(()=>(c.findAll(s).forEach(f=>{f.reset()}),this.refetchQueries(d,i)))}cancelQueries(e,n,o){const[s,i={}]=zo(e,n,o);typeof i.revert>"u"&&(i.revert=!0);const c=zt.batch(()=>this.queryCache.findAll(s).map(d=>d.cancel(i)));return Promise.all(c).then(or).catch(or)}invalidateQueries(e,n,o){const[s,i]=zo(e,n,o);return zt.batch(()=>{var c,d;if(this.queryCache.findAll(s).forEach(m=>{m.invalidate()}),s.refetchType==="none")return Promise.resolve();const f={...s,type:(c=(d=s.refetchType)!=null?d:s.type)!=null?c:"active"};return this.refetchQueries(f,i)})}refetchQueries(e,n,o){const[s,i]=zo(e,n,o),c=zt.batch(()=>this.queryCache.findAll(s).filter(f=>!f.isDisabled()).map(f=>{var m;return f.fetch(void 0,{...i,cancelRefetch:(m=i?.cancelRefetch)!=null?m:!0,meta:{refetchPage:s.refetchPage}})}));let d=Promise.all(c).then(or);return i!=null&&i.throwOnError||(d=d.catch(or)),d}fetchQuery(e,n,o){const s=Ri(e,n,o),i=this.defaultQueryOptions(s);typeof i.retry>"u"&&(i.retry=!1);const c=this.queryCache.build(this,i);return c.isStaleByTime(i.staleTime)?c.fetch(i):Promise.resolve(c.state.data)}prefetchQuery(e,n,o){return this.fetchQuery(e,n,o).then(or).catch(or)}fetchInfiniteQuery(e,n,o){const s=Ri(e,n,o);return s.behavior=Fx(),this.fetchQuery(s)}prefetchInfiniteQuery(e,n,o){return this.fetchInfiniteQuery(e,n,o).then(or).catch(or)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const o=this.queryDefaults.find(s=>wa(e)===wa(s.queryKey));o?o.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(o=>Dc(e,o.queryKey));return n?.defaultOptions}setMutationDefaults(e,n){const o=this.mutationDefaults.find(s=>wa(e)===wa(s.mutationKey));o?o.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(o=>Dc(e,o.mutationKey));return n?.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e?.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=Vf(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e?.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class bb extends ka{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Vm(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return af(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return af(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const o=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Mc(o,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();const i=this.hasListeners();i&&Xm(this.currentQuery,s,this.options,o)&&this.executeFetch(),this.updateResult(n),i&&(this.currentQuery!==s||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();const c=this.computeRefetchInterval();i&&(this.currentQuery!==s||this.options.enabled!==o.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),o=this.createResult(n,e);return Vx(this,o,e)&&(this.currentResult=o,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),o}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(o=>{Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(o),e[o])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),o=this.client.getQueryCache().build(this.client,n);return o.isFetchingOptimistic=!0,o.fetch().then(()=>this.createResult(o,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(or)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),zi||this.currentResult.isStale||!nf(this.options.staleTime))return;const n=ub(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(zi||this.options.enabled===!1||!nf(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Bc.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const o=this.currentQuery,s=this.options,i=this.currentResult,c=this.currentResultState,d=this.currentResultOptions,f=e!==o,m=f?e.state:this.currentQueryInitialState,p=f?this.currentResult:this.previousQueryResult,{state:g}=e;let{dataUpdatedAt:b,error:v,errorUpdatedAt:w,fetchStatus:S,status:T}=g,R=!1,L=!1,q;if(n._optimisticResults){const P=this.hasListeners(),H=!P&&Vm(e,n),fe=P&&Xm(e,o,n,s);(H||fe)&&(S=Jc(e.options.networkMode)?"fetching":"paused",b||(T="loading")),n._optimisticResults==="isRestoring"&&(S="idle")}if(n.keepPreviousData&&!g.dataUpdatedAt&&p!=null&&p.isSuccess&&T!=="error")q=p.data,b=p.dataUpdatedAt,T=p.status,R=!0;else if(n.select&&typeof g.data<"u")if(i&&g.data===c?.data&&n.select===this.selectFn)q=this.selectResult;else try{this.selectFn=n.select,q=n.select(g.data),q=of(i?.data,q,n),this.selectResult=q,this.selectError=null}catch(P){this.selectError=P}else q=g.data;if(typeof n.placeholderData<"u"&&typeof q>"u"&&T==="loading"){let P;if(i!=null&&i.isPlaceholderData&&n.placeholderData===d?.placeholderData)P=i.data;else if(P=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof P<"u")try{P=n.select(P),this.selectError=null}catch(H){this.selectError=H}typeof P<"u"&&(T="success",q=of(i?.data,P,n),L=!0)}this.selectError&&(v=this.selectError,q=this.selectResult,w=Date.now(),T="error");const Q=S==="fetching",ee=T==="loading",D=T==="error";return{status:T,fetchStatus:S,isLoading:ee,isSuccess:T==="success",isError:D,isInitialLoading:ee&&Q,data:q,dataUpdatedAt:b,error:v,errorUpdatedAt:w,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>m.dataUpdateCount||g.errorUpdateCount>m.errorUpdateCount,isFetching:Q,isRefetching:Q&&!ee,isLoadingError:D&&g.dataUpdatedAt===0,isPaused:S==="paused",isPlaceholderData:L,isPreviousData:R,isRefetchError:D&&g.dataUpdatedAt!==0,isStale:Qf(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,o=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Mc(o,n))return;this.currentResult=o;const s={cache:!0},i=()=>{if(!n)return!0;const{notifyOnChangeProps:c}=this.options,d=typeof c=="function"?c():c;if(d==="all"||!d&&!this.trackedProps.size)return!0;const f=new Set(d??this.trackedProps);return this.options.useErrorBoundary&&f.add("error"),Object.keys(this.currentResult).some(m=>{const p=m;return this.currentResult[p]!==n[p]&&f.has(p)})};e?.listeners!==!1&&i()&&(s.listeners=!0),this.notify({...s,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!Sc(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){zt.batch(()=>{if(e.onSuccess){var n,o,s,i;(n=(o=this.options).onSuccess)==null||n.call(o,this.currentResult.data),(s=(i=this.options).onSettled)==null||s.call(i,this.currentResult.data,null)}else if(e.onError){var c,d,f,m;(c=(d=this.options).onError)==null||c.call(d,this.currentResult.error),(f=(m=this.options).onSettled)==null||f.call(m,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Hx(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Vm(t,e){return Hx(t,e)||t.state.dataUpdatedAt>0&&af(t,e,e.refetchOnMount)}function af(t,e,n){if(e.enabled!==!1){const o=typeof n=="function"?n(t):n;return o==="always"||o!==!1&&Qf(t,e)}return!1}function Xm(t,e,n,o){return n.enabled!==!1&&(t!==e||o.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Qf(t,n)}function Qf(t,e){return t.isStaleByTime(e.staleTime)}function Vx(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:!Mc(t.getCurrentResult(),e)}class Xx extends ka{constructor(e,n){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},n&&this.setQueries(n)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(n=>{this.onUpdate(e,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,n){this.queries=e,zt.batch(()=>{const o=this.observers,s=this.findMatchingObservers(this.queries);s.forEach(m=>m.observer.setOptions(m.defaultedQueryOptions,n));const i=s.map(m=>m.observer),c=Object.fromEntries(i.map(m=>[m.options.queryHash,m])),d=i.map(m=>m.getCurrentResult()),f=i.some((m,p)=>m!==o[p]);o.length===i.length&&!f||(this.observers=i,this.observersMap=c,this.result=d,this.hasListeners()&&(Mm(o,i).forEach(m=>{m.destroy()}),Mm(i,o).forEach(m=>{m.subscribe(p=>{this.onUpdate(m,p)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(n=>n.observer.getOptimisticResult(n.defaultedQueryOptions))}findMatchingObservers(e){const n=this.observers,o=new Map(n.map(v=>[v.options.queryHash,v])),s=e.map(v=>this.client.defaultQueryOptions(v)),i=s.flatMap(v=>{const w=o.get(v.queryHash);return w!=null?[{defaultedQueryOptions:v,observer:w}]:[]}),c=new Set(i.map(v=>v.defaultedQueryOptions.queryHash)),d=s.filter(v=>!c.has(v.queryHash)),f=new Set(i.map(v=>v.observer)),m=n.filter(v=>!f.has(v)),p=v=>{const w=this.client.defaultQueryOptions(v),S=this.observersMap[w.queryHash];return S??new bb(this.client,w)},g=d.map((v,w)=>{if(v.keepPreviousData){const S=m[w];if(S!==void 0)return{defaultedQueryOptions:v,observer:S}}return{defaultedQueryOptions:v,observer:p(v)}}),b=(v,w)=>s.indexOf(v.defaultedQueryOptions)-s.indexOf(w.defaultedQueryOptions);return i.concat(g).sort(b)}onUpdate(e,n){const o=this.observers.indexOf(e);o!==-1&&(this.result=Rx(this.result,o,n),this.notify())}notify(){zt.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}let Qx=class extends ka{constructor(e,n){super(),this.client=e,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const o=this.options;this.options=this.client.defaultMutationOptions(e),Mc(o,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const n={listeners:!0};e.type==="success"?n.onSuccess=!0:e.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:yb(),n={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(e){zt.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var n,o,s,i;(n=(o=this.mutateOptions).onSuccess)==null||n.call(o,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(i=this.mutateOptions).onSettled)==null||s.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var c,d,f,m;(c=(d=this.mutateOptions).onError)==null||c.call(d,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(f=(m=this.mutateOptions).onSettled)==null||f.call(m,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)})})}};function Kx(t){return{mutationKey:t.options.mutationKey,state:t.state}}function Wx(t){return{state:t.state,queryKey:t.queryKey,queryHash:t.queryHash}}function Gx(t){return t.state.isPaused}function vb(t){return t.state.status==="success"}function Yx(t,e={}){const n=[],o=[];if(e.dehydrateMutations!==!1){const s=e.shouldDehydrateMutation||Gx;t.getMutationCache().getAll().forEach(i=>{s(i)&&n.push(Kx(i))})}if(e.dehydrateQueries!==!1){const s=e.shouldDehydrateQuery||vb;t.getQueryCache().getAll().forEach(i=>{s(i)&&o.push(Wx(i))})}return{mutations:n,queries:o}}function Zx(t,e,n){if(typeof e!="object"||e===null)return;const o=t.getMutationCache(),s=t.getQueryCache(),i=e.mutations||[],c=e.queries||[];i.forEach(d=>{var f;o.build(t,{...n==null||(f=n.defaultOptions)==null?void 0:f.mutations,mutationKey:d.mutationKey},d.state)}),c.forEach(({queryKey:d,state:f,queryHash:m})=>{var p;const g=s.get(m);if(g){if(g.state.dataUpdatedAt<f.dataUpdatedAt){const{fetchStatus:b,...v}=f;g.setState(v)}return}s.build(t,{...n==null||(p=n.defaultOptions)==null?void 0:p.queries,queryKey:d,queryHash:m},{...f,fetchStatus:"idle"})})}var wb={exports:{}},xb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Es=window.React;function Jx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eC=typeof Object.is=="function"?Object.is:Jx,tC=Es.useState,nC=Es.useEffect,rC=Es.useLayoutEffect,oC=Es.useDebugValue;function aC(t,e){var n=e(),o=tC({inst:{value:n,getSnapshot:e}}),s=o[0].inst,i=o[1];return rC(function(){s.value=n,s.getSnapshot=e,Td(s)&&i({inst:s})},[t,n,e]),nC(function(){return Td(s)&&i({inst:s}),t(function(){Td(s)&&i({inst:s})})},[t]),oC(n),n}function Td(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!eC(t,n)}catch{return!0}}function sC(t,e){return e()}var iC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sC:aC;xb.useSyncExternalStore=Es.useSyncExternalStore!==void 0?Es.useSyncExternalStore:iC;wb.exports=xb;var lC=wb.exports;const Kf=lC.useSyncExternalStore,xa=window.React,Qm=xa.createContext(void 0),Cb=xa.createContext(!1);function Eb(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Qm),window.ReactQueryClientContext):Qm)}const Xo=({context:t}={})=>{const e=xa.useContext(Eb(t,xa.useContext(Cb)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Sb=({client:t,children:e,context:n,contextSharing:o=!1})=>{xa.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const s=Eb(n,o);return xa.createElement(Cb.Provider,{value:!n&&o},xa.createElement(s.Provider,{value:t},e))},Tb=window.React,_b=Tb.createContext(!1),kb=()=>Tb.useContext(_b),cC=_b.Provider,Ob=window.React;function uC(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const dC=Ob.createContext(uC()),Rb=()=>Ob.useContext(dC);function jb(t,e){return typeof t=="function"?t(...e):!!t}const fC=window.React,Ib=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},Ab=t=>{fC.useEffect(()=>{t.clearReset()},[t])},Pb=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:o})=>t.isError&&!e.isReset()&&!t.isFetching&&jb(n,[t.error,o]),Nb=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Lb=(t,e)=>t.isLoading&&t.isFetching&&!e,sf=(t,e,n)=>t?.suspense&&Lb(e,n),lf=(t,e,n)=>e.fetchOptimistic(t).then(({data:o})=>{t.onSuccess==null||t.onSuccess(o),t.onSettled==null||t.onSettled(o,null)}).catch(o=>{n.clearReset(),t.onError==null||t.onError(o),t.onSettled==null||t.onSettled(void 0,o)}),oc=window.React;function Gi({queries:t,context:e}){const n=Xo({context:e}),o=kb(),s=Rb(),i=oc.useMemo(()=>t.map(b=>{const v=n.defaultQueryOptions(b);return v._optimisticResults=o?"isRestoring":"optimistic",v}),[t,n,o]);i.forEach(b=>{Nb(b),Ib(b,s)}),Ab(s);const[c]=oc.useState(()=>new Xx(n,i)),d=c.getOptimisticResult(i);Kf(oc.useCallback(b=>o?()=>{}:c.subscribe(zt.batchCalls(b)),[c,o]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),oc.useEffect(()=>{c.setQueries(i,{listeners:!1})},[i,c]);const m=d.some((b,v)=>sf(i[v],b,o))?d.flatMap((b,v)=>{const w=i[v],S=c.getObservers()[v];if(w&&S){if(sf(w,b,o))return lf(w,S,s);Lb(b,o)&&lf(w,S,s)}return[]}):[];if(m.length>0)throw Promise.all(m);const p=c.getQueries(),g=d.find((b,v)=>{var w,S;return Pb({result:b,errorResetBoundary:s,useErrorBoundary:(w=(S=i[v])==null?void 0:S.useErrorBoundary)!=null?w:!1,query:p[v]})});if(g!=null&&g.error)throw g.error;return d}const _d=window.React;function pC(t,e){const n=Xo({context:t.context}),o=kb(),s=Rb(),i=n.defaultQueryOptions(t);i._optimisticResults=o?"isRestoring":"optimistic",i.onError&&(i.onError=zt.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=zt.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=zt.batchCalls(i.onSettled)),Nb(i),Ib(i,s),Ab(s);const[c]=_d.useState(()=>new e(n,i)),d=c.getOptimisticResult(i);if(Kf(_d.useCallback(f=>{const m=o?()=>{}:c.subscribe(zt.batchCalls(f));return c.updateResult(),m},[c,o]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),_d.useEffect(()=>{c.setOptions(i,{listeners:!1})},[i,c]),sf(i,d,o))throw lf(i,c,s);if(Pb({result:d,errorResetBoundary:s,useErrorBoundary:i.useErrorBoundary,query:c.getCurrentQuery()}))throw d.error;return i.notifyOnChangeProps?d:c.trackResult(d)}function hC(t,e,n){const o=Ri(t,e,n);return pC(o,bb)}const ac=window.React;function Wf(t,e,n){const o=jx(t,e,n),s=Xo({context:o.context}),[i]=ac.useState(()=>new Qx(s,o));ac.useEffect(()=>{i.setOptions(o)},[i,o]);const c=Kf(ac.useCallback(f=>i.subscribe(zt.batchCalls(f)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),d=ac.useCallback((f,m)=>{i.mutate(f,m).catch(mC)},[i]);if(c.error&&jb(i.options.useErrorBoundary,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}function mC(){}const gC=["added","removed","updated"];function Km(t){return gC.includes(t)}async function yC({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:o="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const c=Date.now()-i.timestamp>n,d=i.buster!==o;c||d?e.removeClient():Zx(t,i.clientState,s)}else e.removeClient()}catch{e.removeClient()}}async function Wm({queryClient:t,persister:e,buster:n="",dehydrateOptions:o}){const s={buster:n,timestamp:Date.now(),clientState:Yx(t,o)};await e.persistClient(s)}function bC(t){const e=t.queryClient.getQueryCache().subscribe(o=>{Km(o.type)&&Wm(t)}),n=t.queryClient.getMutationCache().subscribe(o=>{Km(o.type)&&Wm(t)});return()=>{e(),n()}}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},cf.apply(this,arguments)}const ga=window.React,vC=({client:t,children:e,persistOptions:n,onSuccess:o,...s})=>{const[i,c]=ga.useState(!0),d=ga.useRef({persistOptions:n,onSuccess:o}),f=ga.useRef(!1);return ga.useEffect(()=>{d.current={persistOptions:n,onSuccess:o}}),ga.useEffect(()=>{const m={...d.current.persistOptions,queryClient:t};return f.current||(f.current=!0,c(!0),yC(m).then(async()=>{try{await(d.current.onSuccess==null?void 0:d.current.onSuccess())}finally{c(!1)}})),i?void 0:bC(m)},[t,i]),ga.createElement(Sb,cf({client:t},s),ga.createElement(cC,{value:i},e))},wC="0.7.21",xC=wC,Gf="zotero-roam-portal",Yf="zotero-roam-slot",Yi=1500,CC="ZOTERO_ROAM",EC=1,Ca="REACT_QUERY",uf="REACT_QUERY_CLIENT",SC={artwork:"Illustration",audioRecording:"Recording",bill:"Legislation",blogPost:"Blog post",book:"Book",bookSection:"Chapter",case:"Legal case",computerProgram:"Data",conferencePaper:"Conference paper",dictionaryEntry:"Dictionary entry",document:"Document",email:"Letter",encyclopediaArticle:"Encyclopaedia article",film:"Film",forumPost:"Forum post",hearing:"Hearing",instantMessage:"Instant message",interview:"Interview",journalArticle:"Article",letter:"Letter",magazineArticle:"Magazine article",manuscript:"Manuscript",map:"Image",newspaperArticle:"Newspaper article",patent:"Patent",podcast:"Podcast",preprint:"Preprint",presentation:"Presentation",radioBroadcast:"Radio broadcast",report:"Report",statute:"Legislation",thesis:"Thesis",tvBroadcast:"TV broadcast",videoRecording:"Recording",webpage:"Webpage"},$={DATALIST_ITEM:"zr-datalist--item",DATALIST_PAGINATION:"zr-datalist--pagination",DATALIST_TOOLBAR:"zr-datalist--toolbar",DATALIST_WRAPPER:"zr-datalist--listwrapper",DATE_PICKER:"zr-date-picker",DIVIDER_MINIMAL:"zr-divider-minimal",INPUT_BOX:"zr-input-box",INPUT_DATE_RANGE:"zr-date-range-input",INPUT_TEXT:"zr-text-input",POPOVER:"zr-popover",PREFIX_DIALOG_AUXILIARY:"zr-auxiliary-dialog--",PREFIX_DIALOG_OVERLAY:"zr-dialog-overlay--",PREFIX_DRAWER:"zr-drawer--",TABS:"zr-tabs",TABS_MINIMAL:"zr-tabs-minimal",TEXT_ACCENT_1:"zr-accent-1",TEXT_ACCENT_2:"zr-accent-2",TEXT_AUXILIARY:"zr-auxiliary",TEXT_SECONDARY:"zr-secondary",TEXT_SMALL:"zr-text-small",TRIBUTE:"zr-tribute",TRIBUTE_SELECTED:"zr-tribute--selected",TRIBUTE_DETAILS:"zr-tribute--item-details"},Gm=window.React.useMemo,TC=window.ReactDOM.createPortal,_C=window.Blueprint.Core.Dialog,kC=window.Blueprint.Core.H5,Qo=t=>{const{ariaLabelledBy:e=null,className:n,extraClasses:o=[],isOpen:s,label:i=null,onClose:c,title:d=null}=t,{portalId:f}=pu(),m=Gm(()=>[$.PREFIX_DIALOG_AUXILIARY+n,...o].join(" "),[n,o]),p=Gm(()=>!e&&i?{element:u.jsx(kC,{id:n+"-label",style:{display:"none"},children:i}),id:n+"-label"}:{element:null,id:null},[e,n,i]);return TC(u.jsxs(_C,{"aria-labelledby":e||p.id||void 0,canEscapeKeyClose:!0,canOutsideClickClose:!0,className:m,enforceFocus:!1,isOpen:s,lazy:!0,title:d,usePortal:!1,onClose:c,children:[p.element,t.children]}),document.getElementById(f))},OC=window.Blueprint.Core.Button,RC=window.Blueprint.Core.Callout;function Zf({buttonText:t="Go back",error:e,resetErrorBoundary:n=void 0}){return u.jsxs(RC,{intent:"danger",title:e.name,children:[u.jsx("p",{children:e.message}),n!==void 0&&u.jsx(OC,{intent:"danger",onClick:n,outlined:!0,text:t})]})}function Db(t,e){return function(){return t.apply(e,arguments)}}const{toString:jC}=Object.prototype,{getPrototypeOf:Jf}=Object,eu=(t=>e=>{const n=jC.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Hr=t=>(t=t.toLowerCase(),e=>eu(e)===t),tu=t=>e=>typeof e===t,{isArray:Rs}=Array,$i=tu("undefined");function IC(t){return t!==null&&!$i(t)&&t.constructor!==null&&!$i(t.constructor)&&ar(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mb=Hr("ArrayBuffer");function AC(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Mb(t.buffer),e}const PC=tu("string"),ar=tu("function"),Bb=tu("number"),nu=t=>t!==null&&typeof t=="object",NC=t=>t===!0||t===!1,Tc=t=>{if(eu(t)!=="object")return!1;const e=Jf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},LC=Hr("Date"),DC=Hr("File"),MC=Hr("Blob"),BC=Hr("FileList"),zC=t=>nu(t)&&ar(t.pipe),$C=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ar(t.append)&&((e=eu(t))==="formdata"||e==="object"&&ar(t.toString)&&t.toString()==="[object FormData]"))},FC=Hr("URLSearchParams"),UC=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zi(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,s;if(typeof t!="object"&&(t=[t]),Rs(t))for(o=0,s=t.length;o<s;o++)e.call(null,t[o],o,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),c=i.length;let d;for(o=0;o<c;o++)d=i[o],e.call(null,t[d],d,t)}}function zb(t,e){e=e.toLowerCase();const n=Object.keys(t);let o=n.length,s;for(;o-- >0;)if(s=n[o],e===s.toLowerCase())return s;return null}const $b=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Fb=t=>!$i(t)&&t!==$b;function df(){const{caseless:t}=Fb(this)&&this||{},e={},n=(o,s)=>{const i=t&&zb(e,s)||s;Tc(e[i])&&Tc(o)?e[i]=df(e[i],o):Tc(o)?e[i]=df({},o):Rs(o)?e[i]=o.slice():e[i]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&Zi(arguments[o],n);return e}const qC=(t,e,n,{allOwnKeys:o}={})=>(Zi(e,(s,i)=>{n&&ar(s)?t[i]=Db(s,n):t[i]=s},{allOwnKeys:o}),t),HC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),VC=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},XC=(t,e,n,o)=>{let s,i,c;const d={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)c=s[i],(!o||o(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=n!==!1&&Jf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},QC=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},KC=t=>{if(!t)return null;if(Rs(t))return t;let e=t.length;if(!Bb(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},WC=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Jf(Uint8Array)),GC=(t,e)=>{const o=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=o.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},YC=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},ZC=Hr("HTMLFormElement"),JC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),Ym=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),eE=Hr("RegExp"),Ub=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};Zi(n,(s,i)=>{let c;(c=e(s,i,t))!==!1&&(o[i]=c||s)}),Object.defineProperties(t,o)},tE=t=>{Ub(t,(e,n)=>{if(ar(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(ar(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},nE=(t,e)=>{const n={},o=s=>{s.forEach(i=>{n[i]=!0})};return Rs(t)?o(t):o(String(t).split(e)),n},rE=()=>{},oE=(t,e)=>(t=+t,Number.isFinite(t)?t:e),kd="abcdefghijklmnopqrstuvwxyz",Zm="0123456789",qb={DIGIT:Zm,ALPHA:kd,ALPHA_DIGIT:kd+kd.toUpperCase()+Zm},aE=(t=16,e=qb.ALPHA_DIGIT)=>{let n="";const{length:o}=e;for(;t--;)n+=e[Math.random()*o|0];return n};function sE(t){return!!(t&&ar(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const iE=t=>{const e=new Array(10),n=(o,s)=>{if(nu(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[s]=o;const i=Rs(o)?[]:{};return Zi(o,(c,d)=>{const f=n(c,s+1);!$i(f)&&(i[d]=f)}),e[s]=void 0,i}}return o};return n(t,0)},lE=Hr("AsyncFunction"),cE=t=>t&&(nu(t)||ar(t))&&ar(t.then)&&ar(t.catch),se={isArray:Rs,isArrayBuffer:Mb,isBuffer:IC,isFormData:$C,isArrayBufferView:AC,isString:PC,isNumber:Bb,isBoolean:NC,isObject:nu,isPlainObject:Tc,isUndefined:$i,isDate:LC,isFile:DC,isBlob:MC,isRegExp:eE,isFunction:ar,isStream:zC,isURLSearchParams:FC,isTypedArray:WC,isFileList:BC,forEach:Zi,merge:df,extend:qC,trim:UC,stripBOM:HC,inherits:VC,toFlatObject:XC,kindOf:eu,kindOfTest:Hr,endsWith:QC,toArray:KC,forEachEntry:GC,matchAll:YC,isHTMLForm:ZC,hasOwnProperty:Ym,hasOwnProp:Ym,reduceDescriptors:Ub,freezeMethods:tE,toObjectSet:nE,toCamelCase:JC,noop:rE,toFiniteNumber:oE,findKey:zb,global:$b,isContextDefined:Fb,ALPHABET:qb,generateString:aE,isSpecCompliantForm:sE,toJSONObject:iE,isAsyncFn:lE,isThenable:cE};function bt(t,e,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s)}se.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Hb=bt.prototype,Vb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Vb[t]={value:t}});Object.defineProperties(bt,Vb);Object.defineProperty(Hb,"isAxiosError",{value:!0});bt.from=(t,e,n,o,s,i)=>{const c=Object.create(Hb);return se.toFlatObject(t,c,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),bt.call(c,t.message,e,n,o,s),c.cause=t,c.name=t.name,i&&Object.assign(c,i),c};const uE=null;function ff(t){return se.isPlainObject(t)||se.isArray(t)}function Xb(t){return se.endsWith(t,"[]")?t.slice(0,-2):t}function Jm(t,e,n){return t?t.concat(e).map(function(s,i){return s=Xb(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function dE(t){return se.isArray(t)&&!t.some(ff)}const fE=se.toFlatObject(se,{},null,function(e){return/^is[A-Z]/.test(e)});function ru(t,e,n){if(!se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!se.isUndefined(T[S])});const o=n.metaTokens,s=n.visitor||p,i=n.dots,c=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&se.isSpecCompliantForm(e);if(!se.isFunction(s))throw new TypeError("visitor must be a function");function m(w){if(w===null)return"";if(se.isDate(w))return w.toISOString();if(!f&&se.isBlob(w))throw new bt("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(w)||se.isTypedArray(w)?f&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,S,T){let R=w;if(w&&!T&&typeof w=="object"){if(se.endsWith(S,"{}"))S=o?S:S.slice(0,-2),w=JSON.stringify(w);else if(se.isArray(w)&&dE(w)||(se.isFileList(w)||se.endsWith(S,"[]"))&&(R=se.toArray(w)))return S=Xb(S),R.forEach(function(q,Q){!(se.isUndefined(q)||q===null)&&e.append(c===!0?Jm([S],Q,i):c===null?S:S+"[]",m(q))}),!1}return ff(w)?!0:(e.append(Jm(T,S,i),m(w)),!1)}const g=[],b=Object.assign(fE,{defaultVisitor:p,convertValue:m,isVisitable:ff});function v(w,S){if(!se.isUndefined(w)){if(g.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));g.push(w),se.forEach(w,function(R,L){(!(se.isUndefined(R)||R===null)&&s.call(e,R,se.isString(L)?L.trim():L,S,b))===!0&&v(R,S?S.concat(L):[L])}),g.pop()}}if(!se.isObject(t))throw new TypeError("data must be an object");return v(t),e}function eg(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function ep(t,e){this._pairs=[],t&&ru(t,this,e)}const Qb=ep.prototype;Qb.append=function(e,n){this._pairs.push([e,n])};Qb.toString=function(e){const n=e?function(o){return e.call(this,o,eg)}:eg;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function pE(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kb(t,e,n){if(!e)return t;const o=n&&n.encode||pE,s=n&&n.serialize;let i;if(s?i=s(e,n):i=se.isURLSearchParams(e)?e.toString():new ep(e,n).toString(o),i){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class tg{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){se.forEach(this.handlers,function(o){o!==null&&e(o)})}}const Wb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hE=typeof URLSearchParams<"u"?URLSearchParams:ep,mE=typeof FormData<"u"?FormData:null,gE=typeof Blob<"u"?Blob:null,yE={isBrowser:!0,classes:{URLSearchParams:hE,FormData:mE,Blob:gE},protocols:["http","https","file","blob","url","data"]},Gb=typeof window<"u"&&typeof document<"u",bE=(t=>Gb&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),vE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gb,hasStandardBrowserEnv:bE,hasStandardBrowserWebWorkerEnv:vE},Symbol.toStringTag,{value:"Module"})),$r={...wE,...yE};function xE(t,e){return ru(t,new $r.classes.URLSearchParams,Object.assign({visitor:function(n,o,s,i){return $r.isNode&&se.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function CE(t){return se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function EE(t){const e={},n=Object.keys(t);let o;const s=n.length;let i;for(o=0;o<s;o++)i=n[o],e[i]=t[i];return e}function Yb(t){function e(n,o,s,i){let c=n[i++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),f=i>=n.length;return c=!c&&se.isArray(s)?s.length:c,f?(se.hasOwnProp(s,c)?s[c]=[s[c],o]:s[c]=o,!d):((!s[c]||!se.isObject(s[c]))&&(s[c]=[]),e(n,o,s[c],i)&&se.isArray(s[c])&&(s[c]=EE(s[c])),!d)}if(se.isFormData(t)&&se.isFunction(t.entries)){const n={};return se.forEachEntry(t,(o,s)=>{e(CE(o),s,n,0)}),n}return null}function SE(t,e,n){if(se.isString(t))try{return(e||JSON.parse)(t),se.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const tp={transitional:Wb,adapter:["xhr","http"],transformRequest:[function(e,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,i=se.isObject(e);if(i&&se.isHTMLForm(e)&&(e=new FormData(e)),se.isFormData(e))return s?JSON.stringify(Yb(e)):e;if(se.isArrayBuffer(e)||se.isBuffer(e)||se.isStream(e)||se.isFile(e)||se.isBlob(e))return e;if(se.isArrayBufferView(e))return e.buffer;if(se.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return xE(e,this.formSerializer).toString();if((d=se.isFileList(e))||o.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return ru(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),SE(e)):e}],transformResponse:[function(e){const n=this.transitional||tp.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&se.isString(e)&&(o&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?bt.from(d,bt.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$r.classes.FormData,Blob:$r.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],t=>{tp.headers[t]={}});const np=tp,TE=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_E=t=>{const e={};let n,o,s;return t&&t.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),o=c.substring(s+1).trim(),!(!n||e[n]&&TE[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},ng=Symbol("internals");function Ei(t){return t&&String(t).trim().toLowerCase()}function _c(t){return t===!1||t==null?t:se.isArray(t)?t.map(_c):String(t)}function kE(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const OE=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Od(t,e,n,o,s){if(se.isFunction(o))return o.call(this,e,n);if(s&&(e=n),!!se.isString(e)){if(se.isString(o))return e.indexOf(o)!==-1;if(se.isRegExp(o))return o.test(e)}}function RE(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function jE(t,e){const n=se.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(s,i,c){return this[o].call(this,e,s,i,c)},configurable:!0})})}let ou=class{constructor(e){e&&this.set(e)}set(e,n,o){const s=this;function i(d,f,m){const p=Ei(f);if(!p)throw new Error("header name must be a non-empty string");const g=se.findKey(s,p);(!g||s[g]===void 0||m===!0||m===void 0&&s[g]!==!1)&&(s[g||f]=_c(d))}const c=(d,f)=>se.forEach(d,(m,p)=>i(m,p,f));return se.isPlainObject(e)||e instanceof this.constructor?c(e,n):se.isString(e)&&(e=e.trim())&&!OE(e)?c(_E(e),n):e!=null&&i(n,e,o),this}get(e,n){if(e=Ei(e),e){const o=se.findKey(this,e);if(o){const s=this[o];if(!n)return s;if(n===!0)return kE(s);if(se.isFunction(n))return n.call(this,s,o);if(se.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ei(e),e){const o=se.findKey(this,e);return!!(o&&this[o]!==void 0&&(!n||Od(this,this[o],o,n)))}return!1}delete(e,n){const o=this;let s=!1;function i(c){if(c=Ei(c),c){const d=se.findKey(o,c);d&&(!n||Od(o,o[d],d,n))&&(delete o[d],s=!0)}}return se.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const i=n[o];(!e||Od(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,o={};return se.forEach(this,(s,i)=>{const c=se.findKey(o,i);if(c){n[c]=_c(s),delete n[i];return}const d=e?RE(i):String(i).trim();d!==i&&delete n[i],n[d]=_c(s),o[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return se.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=e&&se.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const o=new this(e);return n.forEach(s=>o.set(s)),o}static accessor(e){const o=(this[ng]=this[ng]={accessors:{}}).accessors,s=this.prototype;function i(c){const d=Ei(c);o[d]||(jE(s,c),o[d]=!0)}return se.isArray(e)?e.forEach(i):i(e),this}};ou.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);se.reduceDescriptors(ou.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}});se.freezeMethods(ou);const fo=ou;function Rd(t,e){const n=this||np,o=e||n,s=fo.from(o.headers);let i=o.data;return se.forEach(t,function(d){i=d.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Zb(t){return!!(t&&t.__CANCEL__)}function Ji(t,e,n){bt.call(this,t??"canceled",bt.ERR_CANCELED,e,n),this.name="CanceledError"}se.inherits(Ji,bt,{__CANCEL__:!0});function IE(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new bt("Request failed with status code "+n.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const AE=$r.hasStandardBrowserEnv?{write(t,e,n,o,s,i){const c=[t+"="+encodeURIComponent(e)];se.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),se.isString(o)&&c.push("path="+o),se.isString(s)&&c.push("domain="+s),i===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function PE(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function NE(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Jb(t,e){return t&&!PE(e)?NE(t,e):e}const LE=$r.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let o;function s(i){let c=i;return e&&(n.setAttribute("href",c),c=n.href),n.setAttribute("href",c),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=s(window.location.href),function(c){const d=se.isString(c)?s(c):c;return d.protocol===o.protocol&&d.host===o.host}}():function(){return function(){return!0}}();function DE(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ME(t,e){t=t||10;const n=new Array(t),o=new Array(t);let s=0,i=0,c;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),p=o[i];c||(c=m),n[s]=f,o[s]=m;let g=i,b=0;for(;g!==s;)b+=n[g++],g=g%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),m-c<e)return;const v=p&&m-p;return v?Math.round(b*1e3/v):void 0}}function rg(t,e){let n=0;const o=ME(50,250);return s=>{const i=s.loaded,c=s.lengthComputable?s.total:void 0,d=i-n,f=o(d),m=i<=c;n=i;const p={loaded:i,total:c,progress:c?i/c:void 0,bytes:d,rate:f||void 0,estimated:f&&c&&m?(c-i)/f:void 0,event:s};p[e?"download":"upload"]=!0,t(p)}}const BE=typeof XMLHttpRequest<"u",zE=BE&&function(t){return new Promise(function(n,o){let s=t.data;const i=fo.from(t.headers).normalize();let{responseType:c,withXSRFToken:d}=t,f;function m(){t.cancelToken&&t.cancelToken.unsubscribe(f),t.signal&&t.signal.removeEventListener("abort",f)}let p;if(se.isFormData(s)){if($r.hasStandardBrowserEnv||$r.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((p=i.getContentType())!==!1){const[S,...T]=p?p.split(";").map(R=>R.trim()).filter(Boolean):[];i.setContentType([S||"multipart/form-data",...T].join("; "))}}let g=new XMLHttpRequest;if(t.auth){const S=t.auth.username||"",T=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(S+":"+T))}const b=Jb(t.baseURL,t.url);g.open(t.method.toUpperCase(),Kb(b,t.params,t.paramsSerializer),!0),g.timeout=t.timeout;function v(){if(!g)return;const S=fo.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),R={data:!c||c==="text"||c==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:t,request:g};IE(function(q){n(q),m()},function(q){o(q),m()},R),g=null}if("onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(v)},g.onabort=function(){g&&(o(new bt("Request aborted",bt.ECONNABORTED,t,g)),g=null)},g.onerror=function(){o(new bt("Network Error",bt.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let T=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const R=t.transitional||Wb;t.timeoutErrorMessage&&(T=t.timeoutErrorMessage),o(new bt(T,R.clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,t,g)),g=null},$r.hasStandardBrowserEnv&&(d&&se.isFunction(d)&&(d=d(t)),d||d!==!1&&LE(b))){const S=t.xsrfHeaderName&&t.xsrfCookieName&&AE.read(t.xsrfCookieName);S&&i.set(t.xsrfHeaderName,S)}s===void 0&&i.setContentType(null),"setRequestHeader"in g&&se.forEach(i.toJSON(),function(T,R){g.setRequestHeader(R,T)}),se.isUndefined(t.withCredentials)||(g.withCredentials=!!t.withCredentials),c&&c!=="json"&&(g.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&g.addEventListener("progress",rg(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",rg(t.onUploadProgress)),(t.cancelToken||t.signal)&&(f=S=>{g&&(o(!S||S.type?new Ji(null,t,g):S),g.abort(),g=null)},t.cancelToken&&t.cancelToken.subscribe(f),t.signal&&(t.signal.aborted?f():t.signal.addEventListener("abort",f)));const w=DE(b);if(w&&$r.protocols.indexOf(w)===-1){o(new bt("Unsupported protocol "+w+":",bt.ERR_BAD_REQUEST,t));return}g.send(s||null)})},pf={http:uE,xhr:zE};se.forEach(pf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const og=t=>`- ${t}`,$E=t=>se.isFunction(t)||t===null||t===!1,ev={getAdapter:t=>{t=se.isArray(t)?t:[t];const{length:e}=t;let n,o;const s={};for(let i=0;i<e;i++){n=t[i];let c;if(o=n,!$E(n)&&(o=pf[(c=String(n)).toLowerCase()],o===void 0))throw new bt(`Unknown adapter '${c}'`);if(o)break;s[c||"#"+i]=o}if(!o){const i=Object.entries(s).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=e?i.length>1?`since :
`+i.map(og).join(`
`):" "+og(i[0]):"as no adapter specified";throw new bt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return o},adapters:pf};function jd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ji(null,t)}function ag(t){return jd(t),t.headers=fo.from(t.headers),t.data=Rd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ev.getAdapter(t.adapter||np.adapter)(t).then(function(o){return jd(t),o.data=Rd.call(t,t.transformResponse,o),o.headers=fo.from(o.headers),o},function(o){return Zb(o)||(jd(t),o&&o.response&&(o.response.data=Rd.call(t,t.transformResponse,o.response),o.response.headers=fo.from(o.response.headers))),Promise.reject(o)})}const sg=t=>t instanceof fo?t.toJSON():t;function Ss(t,e){e=e||{};const n={};function o(m,p,g){return se.isPlainObject(m)&&se.isPlainObject(p)?se.merge.call({caseless:g},m,p):se.isPlainObject(p)?se.merge({},p):se.isArray(p)?p.slice():p}function s(m,p,g){if(se.isUndefined(p)){if(!se.isUndefined(m))return o(void 0,m,g)}else return o(m,p,g)}function i(m,p){if(!se.isUndefined(p))return o(void 0,p)}function c(m,p){if(se.isUndefined(p)){if(!se.isUndefined(m))return o(void 0,m)}else return o(void 0,p)}function d(m,p,g){if(g in e)return o(m,p);if(g in t)return o(void 0,m)}const f={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(m,p)=>s(sg(m),sg(p),!0)};return se.forEach(Object.keys(Object.assign({},t,e)),function(p){const g=f[p]||s,b=g(t[p],e[p],p);se.isUndefined(b)&&g!==d||(n[p]=b)}),n}const tv="1.6.7",rp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{rp[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const ig={};rp.transitional=function(e,n,o){function s(i,c){return"[Axios v"+tv+"] Transitional option '"+i+"'"+c+(o?". "+o:"")}return(i,c,d)=>{if(e===!1)throw new bt(s(c," has been removed"+(n?" in "+n:"")),bt.ERR_DEPRECATED);return n&&!ig[c]&&(ig[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,c,d):!0}};function FE(t,e,n){if(typeof t!="object")throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let s=o.length;for(;s-- >0;){const i=o[s],c=e[i];if(c){const d=t[i],f=d===void 0||c(d,i,t);if(f!==!0)throw new bt("option "+i+" must be "+f,bt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bt("Unknown option "+i,bt.ERR_BAD_OPTION)}}const hf={assertOptions:FE,validators:rp},Bo=hf.validators;let $c=class{constructor(e){this.defaults=e,this.interceptors={request:new tg,response:new tg}}async request(e,n){try{return await this._request(e,n)}catch(o){if(o instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}throw o}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ss(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:i}=n;o!==void 0&&hf.assertOptions(o,{silentJSONParsing:Bo.transitional(Bo.boolean),forcedJSONParsing:Bo.transitional(Bo.boolean),clarifyTimeoutError:Bo.transitional(Bo.boolean)},!1),s!=null&&(se.isFunction(s)?n.paramsSerializer={serialize:s}:hf.assertOptions(s,{encode:Bo.function,serialize:Bo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=i&&se.merge(i.common,i[n.method]);i&&se.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),n.headers=fo.concat(c,i);const d=[];let f=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(f=f&&S.synchronous,d.unshift(S.fulfilled,S.rejected))});const m=[];this.interceptors.response.forEach(function(S){m.push(S.fulfilled,S.rejected)});let p,g=0,b;if(!f){const w=[ag.bind(this),void 0];for(w.unshift.apply(w,d),w.push.apply(w,m),b=w.length,p=Promise.resolve(n);g<b;)p=p.then(w[g++],w[g++]);return p}b=d.length;let v=n;for(g=0;g<b;){const w=d[g++],S=d[g++];try{v=w(v)}catch(T){S.call(this,T);break}}try{p=ag.call(this,v)}catch(w){return Promise.reject(w)}for(g=0,b=m.length;g<b;)p=p.then(m[g++],m[g++]);return p}getUri(e){e=Ss(this.defaults,e);const n=Jb(e.baseURL,e.url);return Kb(n,e.params,e.paramsSerializer)}};se.forEach(["delete","get","head","options"],function(e){$c.prototype[e]=function(n,o){return this.request(Ss(o||{},{method:e,url:n,data:(o||{}).data}))}});se.forEach(["post","put","patch"],function(e){function n(o){return function(i,c,d){return this.request(Ss(d||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:c}))}}$c.prototype[e]=n(),$c.prototype[e+"Form"]=n(!0)});const kc=$c;let UE=class nv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const o=this;this.promise.then(s=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](s);o._listeners=null}),this.promise.then=s=>{let i;const c=new Promise(d=>{o.subscribe(d),i=d}).then(s);return c.cancel=function(){o.unsubscribe(i)},c},e(function(i,c,d){o.reason||(o.reason=new Ji(i,c,d),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new nv(function(s){e=s}),cancel:e}}};const qE=UE;function HE(t){return function(n){return t.apply(null,n)}}function VE(t){return se.isObject(t)&&t.isAxiosError===!0}const mf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mf).forEach(([t,e])=>{mf[e]=t});const XE=mf;function rv(t){const e=new kc(t),n=Db(kc.prototype.request,e);return se.extend(n,kc.prototype,e,{allOwnKeys:!0}),se.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return rv(Ss(t,s))},n}const qt=rv(np);qt.Axios=kc;qt.CanceledError=Ji;qt.CancelToken=qE;qt.isCancel=Zb;qt.VERSION=tv;qt.toFormData=ru;qt.AxiosError=bt;qt.Cancel=qt.CanceledError;qt.all=function(e){return Promise.all(e)};qt.spread=HE;qt.isAxiosError=VE;qt.mergeConfig=Ss;qt.AxiosHeaders=fo;qt.formToJSON=t=>Yb(se.isHTMLForm(t)?new FormData(t):t);qt.getAdapter=ev.getAdapter;qt.HttpStatusCode=XE;qt.default=qt;const{Axios:_M,AxiosError:kM,CanceledError:OM,isCancel:RM,CancelToken:jM,VERSION:IM,all:AM,Cancel:PM,isAxiosError:QE,spread:NM,toFormData:LM,AxiosHeaders:DM,HttpStatusCode:MM,formToJSON:BM,getAdapter:zM,mergeConfig:$M}=qt,KE=window.Blueprint.Core.Toaster,Vo=KE.create({className:"zr-toaster"}),ov=t=>t.status==="fulfilled",St=t=>!!t;var gf=(t=>(t.CITED="cited",t.CITING="citing",t))(gf||{});const av=t=>t.inLibrary!=!1,el=t=>t.data.itemType==="annotation",tl=t=>t.data.itemType==="note",sv=t=>el(t)||tl(t),op=t=>t.data.itemType==="attachment",ap=t=>!(op(t)||sv(t));function iv(t,e){return[...t,e]}function sp(t,e){return[...t.slice(0,e),...t.slice(e+1,t.length)]}function ip(t,e,n){return[...t.slice(0,e),n,...t.slice(e+1,t.length)]}function Oa(t){return t.reduce((e,n)=>(sv(n)?e.notes.push(n):op(n)?n.data.contentType=="application/pdf"&&e.pdfs.push(n):e.items.push(n),e),{items:[],pdfs:[],notes:[]})}function Kt(t){try{if(QE(t)){const{code:e,message:n,status:o,config:s}=t;return{code:e,message:n,status:o,config:{url:s?.url}}}return t.message}catch{return t}}function lp(t,e=[],n=[],o){const s=t.data.url,i=As(t.data.DOI),c=s?{href:s,title:s}:i?{href:"https://doi/org/"+i,title:i}:!1,d=t.data.creators.map(v=>({full:"name"in v?v.name:[v.firstName,v.lastName].filter(St).join(" ")||"",last:("lastName"in v?v.lastName:v.name)||"",role:v.creatorType||""})),f=Array.from(new Set(t.data.tags.map(v=>v.tag))),m=t.meta.creatorSummary||"",p=t.meta.parsedDate?isNaN(Number(new Date(t.meta.parsedDate)))?"":new Date(t.meta.parsedDate).getUTCFullYear().toString():"",g=p?`(${p})`:"",b={abstract:t.data.abstractNote||"",authors:m,authorsFull:d.map(v=>v.full),authorsLastNames:d.map(v=>v.last),authorsRoles:d.map(v=>v.role),children:{pdfs:e,notes:n},createdByUser:t.meta.createdByUser?.username||null,inGraph:o.get("@"+t.key)||!1,itemKey:t.data.key,itemType:t.data.itemType,key:t.key,location:t.library.type+"s/"+t.library.id,meta:[m,g].filter(St).join(" "),publication:t.data.publicationTitle||t.data.bookTitle||t.data.university||"",tags:f,title:t.data.title,weblink:c,year:p,zotero:{local:js(t,{format:"target"}),web:Is(t,{format:"target"})},raw:t,_multiField:""};return b._multiField=[b.abstract,b.authorsFull.join(" "),b.year,b.title,b.tags.map(v=>`#${v}`).join(", "),b.key].filter(St).join(" "),b}function Fc(t){let e=t;return e.startsWith(`
`)?(e=e.slice(1),e=Fc(e)):e.endsWith(`
`)&&(e=e.slice(0,-1),e=Fc(e)),e=e.replaceAll(/\n{2}/g,`
`),e}function cp(t,e){const[n=0,o=0,s=0]=t,[i=0,c=0,d=0]=e;return n<i||n==i&&(o<c||o==c&&s<=d)?-1:1}function yf(t){return t.split("|").map(e=>Number(e))}function Fo(t){navigator.clipboard?navigator.clipboard.writeText(t).then(e=>{Vo.show({intent:"success",message:`Successfully copied to clipboard: ${t}`,timeout:800})}).catch(e=>{window.zoteroRoam?.error?.({origin:"Copy",message:`Failed to copy to clipboard: ${t}`,detail:e.message,showToaster:1e3})}):Vo.show({message:`Clipboard API is not available. The following could not be copied: ${t}`,timeout:1e3})}function bf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function up(t,e,...n){const o=Array.prototype.slice.call(arguments,2),s=t.split("."),i=s.pop();let c=e;for(let d=0;d<s.length;d++)c=c[s[d]];if(!c[i])throw new Error(`Function ${i} doesn't exist`);return c[i](...o)}function lg(t,{template_comment:e="{{comment}}",template_highlight:n="[[>]] {{highlight}} ([p. {{page_label}}]({{link_page}})) {{tags_string}}"}={}){if(t.type=="highlight"){const{comment:o,page_label:s,link_page:i,tags_string:c,text:d}=t;let f=e,m=n;const p={comment:o,highlight:d,page_label:s,link_page:i,tags_string:c};for(const g in p)f=f.replaceAll(`{{${g}}}`,`${p[g]}`),m=m.replaceAll(`{{${g}}}`,`${p[g]}`);return{string:m,text:m,children:o?[f]:[]}}else return t.type=="image",null}function WE(t,{group_by:e=!1,template_comment:n,template_highlight:o}={}){const s=au(t);if(e=="day_added"){const i=s.sort((c,d)=>c.date_added<d.date_added?-1:1).reduce((c,d)=>{const f=new Date(d.date_added).toLocaleDateString("en-CA");return c[f]?c[f].push(d):c[f]=[d],c},{});return Object.keys(i).sort((c,d)=>new Date(c)<new Date(d)?-1:1).map(c=>{const d=i[c].sort((f,m)=>cp(f.sortIndex,m.sortIndex));return{string:vr(`${c}T00:00`,{brackets:!0}),text:vr(`${c}T00:00`,{brackets:!0}),children:d.map(f=>lg(f,{template_comment:n,template_highlight:o})).filter(St)}}).filter(c=>c.children.length>0)}else return s.map(i=>lg(i,{template_comment:n,template_highlight:o})).filter(St)}function lv(t,e=`
`){return dv(t,e).flat(1).map(n=>ZE(n)).filter(n=>n.trim())}function vf(t,e,{accent_class:n="zr-accent-1"}={}){const o=t.key,s=t.data.title,i=t.meta.creatorSummary||"",c=t.meta.parsedDate?isNaN(Number(new Date(t.meta.parsedDate)))?"":new Date(t.meta.parsedDate).getUTCFullYear():"",d=[i,c?`(${c})`:""].filter(St).join(" "),f="@"+o,m=d||o,p={citation:"[{{summary_or_key}}]([[{{citekey}}]])",citekey:"{{citekey}}",inline:"{{summary}}",key:"{{key}}",pageref:"[[{{citekey}}]]",popover:"{{=: {{summary_or_key}} | {{embed: [[{{citekey}}]]}} }}",tag:"#[[{{citekey}}]]",zettlr:`<span class="${n}">{{summary_or_key}}</span> {{title}}`},g={authors:i,citekey:f,key:o,summary:d,summary_or_key:m,title:s,year:c};let b=p[e]||e||"{{citekey}}";for(const v in g)b=b.replaceAll(`{{${v}}}`,`${g[v]}`);return b}function cv(t,{func:e="",split_char:n="",split_preset:o=`
`,split_use:s="preset",use:i="default",__with:c="raw"}={}){const d=s=="custom"?n:o;return i=="function"&&e?up(e,window,c=="raw"?t:dv(t,d)):lv(t,d)}function js(t,{format:e="markdown",text:n="Local library"}={}){const s=`zotero://select/${t.library.type=="group"?`groups/${t.library.id}`:"library"}/items/${t.data.key}`;switch(e){case"markdown":return`[${n}](${s})`;case"target":default:return s}}function dp(t,e="href"){const n=t.library.type=="group"?`groups/${t.library.id}`:"library";let o="",s="";switch(["linked_file","imported_file","imported_url"].includes(t.data.linkMode)?(o="zotero://open-pdf/"+n+"/items/"+t.data.key,s=t.data.filename||t.data.title):(o=t.data.url,s=t.data.title),e){case"markdown":return`[${s}](${o})`;case"href":default:return o}}function Is(t,{format:e="markdown",text:n="Web library"}={}){const s=`https://www.zotero.org/${(t.library.type=="user"?"users":"groups")+`/${t.library.id}`}/items/${t.data.key}`;switch(e){case"markdown":return`[${n}](${s})`;case"target":default:return s}}function Ra(t,e,{pdfs:n=[],notes:o=[]}={}){const s=n.filter(d=>d.data.parentItem==t&&d.library.type+"s/"+d.library.id==e),i=s.map(d=>d.key),c=o.filter(d=>[t,...i].includes(d.data.parentItem)&&d.library.type+"s/"+d.library.id==e);return{pdfs:s,notes:c}}function GE(t){if(typeof t!="string")throw new Error(`Input is of type ${typeof t}, expected String`);const e=new RegExp(/^<\/?(.+?)>|<(.+?)>$/),n=e.test(t);return{result:n,htmlTag:n&&t.match(e)?.[1]||null}}function YE(t){return t.reduce((e,n)=>{try{const o=n.charAt(0).toLowerCase();e[o]?e[o].push(n):e[o]=[n]}catch{throw new Error(`Could not add ${JSON.stringify(n)} to dictionary`)}return e},{})}function fp(t){const e=t.constructor===Date?t:new Date(t),n=new Date;n.setHours(0,0,0);const o=new Date;if(o.setDate(n.getDate()-1),o.setHours(0,0,0),e>n)return`Today at ${Fi(e)}`;if(e>o)return`Yesterday at ${Fi(e)}`;{const i=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${uv(e.getDate())}`,c=e.getFullYear()!=n.getFullYear()?e.getFullYear():!1;return[i,c].filter(St).join(" ")}}function vr(t,{brackets:e=!0}={}){const n=t.constructor===Date?t:new Date(t),s=`${["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]} ${uv(n.getDate())}, ${n.getFullYear()}`;return e?`[[${s}]]`:s}function uv(t){const e=t%10;return e==1&&t!=11?t+"st":e==2&&t!=12?t+"nd":e==3&&t!=13?t+"rd":t+"th"}function Fi(t){const e=t.constructor===Date?t:new Date(t);return`${e.getHours()}:${("0"+e.getMinutes()).slice(-2)}`}function As(t){if(t){const e=t.match(/10\.([0-9]+?)\/(.+)/g);return e?e[0].toLowerCase():!1}else return!1}function ZE(t){let e=t;const n={"<blockquote>":"> ","</blockquote>":"","<strong>":"**","</strong>":"**","<em>":"__","</em>":"__","<b>":"**","</b>":"**","<br />":`
`,"<br/>":`
`,"<br>":`
`,"<u>":"","</u>":"","<ul>":"","</ul>":"","<ol>":"","</ol>":"","</li><li>":" ","<li>":"","</li>":""};for(const i in n)e=e.replaceAll(`${i}`,`${n[i]}`);["p","div","span","h1","h2","h3","h4","h5","h6"].forEach(i=>{const c=new RegExp(`</?${i}>|<${i} .+?>`,"g");e=e.replaceAll(c,i.startsWith("h")?"**":"")});const s=/<a.+?href="(.+?)">(.+?)<\/a>/g;return e=e.replaceAll(s,"[$2]($1)"),e=Fc(e),e}function Wt(t,e,n=""){return`${t==0?"No":t} ${e}${t==1?"":"s"}${n}`}function JE(t,{as_date:e=!0}={}){const[n,o,s,i]=Array.from(t.matchAll(/(.+) ([0-9]+).{2}, ([0-9]{4})/g))[0],c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=[parseInt(i),c.findIndex(f=>f==o),parseInt(s)];return e?new Date(...d):d}function Un(t,e,{any_case:n=!0,match:o="partial",search_compounds:s=!0,word_order:i="strict"}={}){if(e.constructor===String)return cg(t,e,{any_case:n,match:o,search_compounds:s,word_order:i});if(e.constructor===Array)return e.some(c=>cg(t,c,{any_case:n,match:o,search_compounds:s,word_order:i}));throw new Error(`Unexpected input type ${e.constructor.name} : target should be a String or an Array`)}function cg(t,e,{any_case:n=!0,match:o="partial",search_compounds:s=!0,word_order:i="strict"}={}){let c=t,d=e;n==!0&&(c=t.toLowerCase(),d=e.toLowerCase());const f=c.split(" "),m=f.some(p=>p.includes("-"));if(f.length==1){let p=bf(c);switch(m&&s==!0&&(p=p.replace("-","(?: |-)?")),o){case"partial":return new RegExp(p).test(d);case"exact":return new RegExp("^"+p+"$").test(d);case"word":return new RegExp("(?:\\W|^)"+p+"(?:\\W|$)").test(d);default:return!1}}else{let p=f.map(g=>bf(g));return s==!0&&(m?p=p.map(g=>g.includes("-")?g.replace("-","(?: |-)?"):g):!m&&i=="strict"&&(p=[p.join("(?: |-)?")])),i=="loose"?o=="word"?p.map(b=>"(?:\\W|^)"+b+"(?:\\W|$)").every(b=>new RegExp(b).test(d)):p.every(g=>new RegExp(g).test(d)):o=="partial"?new RegExp(p.join(" ")).test(d):o=="exact"?new RegExp("^"+p.join(" ")+"$").test(d):new RegExp("(?:\\W|^)"+p.join(" ")+"(?:\\W|$)").test(d)}}function au(t){return t.map(e=>{const{annotationColor:n,annotationComment:o,annotationPageLabel:s,annotationPosition:i,annotationSortIndex:c,annotationText:d,annotationType:f,dateAdded:m,dateModified:p,parentItem:g,tags:b}=e.data,v=vr(m,{brackets:!1}),w=vr(p,{brackets:!1}),S=e.library.type+"s/"+e.library.id,T=S.startsWith("groups/")?S:"library",R=JSON.parse(i),L=`zotero://open-pdf/${T}/items/${g}`,q=L+`?page=${R.pageIndex+1}`;return{color:n,comment:o,date_added:m,date_modified:p,day_added:v,day_modified:w,key:e.key,library:S,link_pdf:L,link_page:q,page_label:s,parent_item:g,position:R,raw:e,sortIndex:yf(c),tags:b.map(Q=>Q.tag),tags_string:b.map(Q=>`#[[${Q.tag}]]`).join(", "),text:d,type:f}})}function dv(t,e){const{result:n,htmlTag:o}=GE(e);if(n&&o){const s=new RegExp(`</?${o}>|<${o} .+?>`,"g");return t.map(i=>i.data.note.split(s).filter(St))}else return t.map(s=>s.data.note.split(e).filter(St))}function ug(t){return t.map(e=>{const{doi:n,...o}=e;return{doi:As(n),...o}})}const eS=window.React.Component;class Ln extends eS{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n}),window.zoteroRoam?.error?.({origin:"Interface",message:"Failed to render",context:{error:Kt(e),errorInfo:n}})}render(){return this.state.error?u.jsx(Zf,{error:this.state.error}):this.props.children}}const tS=window.Blueprint.Core.Callout,fv=()=>u.jsxs(tS,{children:["No writeable libraries were found. Please check that your API key(s) have the permission to write to at least one of the Zotero libraries you use. ",u.jsx("a",{href:"https://alix-lahuec.gitbook.io/zotero-roam/getting-started/prereqs#zotero-api-credentials",target:"_blank",rel:"noreferrer",children:"Refer to the extension docs"})," for more details."]}),nS=window.React.useReducer;function rS(t,e){switch(e.type){case"add":return iv(t,e.value);case"remove":return sp(t,e.index);case"update":return ip(t,e.index,e.value);default:return t}}const pv=(t,e)=>nS(rS,t,e),sc=window.React.useCallback,oS=window.React.useState,It=t=>{const[e,n]=oS(t),o=sc(()=>{n(d=>!d)},[]),s=sc(d=>{n(d)},[]),i=sc(()=>n(!0),[]),c=sc(()=>n(!1),[]);return[e,{set:s,toggle:o,on:i,off:c}]},aS=window.React.useCallback,sS=window.React.useRef;function iS(t,e){const n=sS(void 0),o=function(){n.current&&(clearTimeout(n.current),n.current=null)};return[aS(i=>{o(),n.current=setTimeout(()=>{n.current=null,t(i)},e)},[t,e]),o]}const lS=window.React.useReducer,cS=(t,e)=>t.map(n=>n.value==e?{...n,active:!n.active}:n),uS=t=>lS(cS,t),ic=window.React.useCallback,dS=window.React.useState,fS=(t,e)=>t===e,pS=t=>t,dg=(t,e,n,o)=>t.find(s=>n(s,e))?t:[...t,o(e)],fg=(t,e,n)=>t.filter(o=>!n(o,e)),Ui=({start:t=[],identify:e=fS,retrieve:n=pS})=>{const[o,s]=dS(t),i=ic(m=>{s(p=>dg(p,m,e,n))},[e,n]),c=ic(m=>{s(p=>fg(p,m,e))},[e]),d=ic(m=>{s(p=>p.find(g=>e(g,m))?fg(p,m,e):dg(p,m,e,n))},[e,n]),f=ic(m=>{s(m)},[]);return[o,{set:f,toggle:d,add:i,remove:c}]},hS=window.React.useCallback,mS=window.React.useMemo,gS=window.React.useState,nl=({itemsPerPage:t=20})=>{const[e,n]=gS(1),o=mS(()=>[t*(e-1),t*e],[e,t]),s=hS(i=>{n(i)},[]);return{currentPage:e,pageLimits:o,setCurrentPage:s}},yS=window.React.useCallback,bS=window.React.useState,vS=t=>t,wS=({start:t,transform:e=vS})=>{const[n,o]=bS(t),s=yS(i=>{o(e(i.currentTarget.value))},[e]);return[n,s]},xS=window.React.useCallback,CS=window.React.useState,hv=(t="")=>{const[e,n]=CS(t),o=xS(s=>{n(s.target.value)},[]);return[e,o]},ES=window.React.Children,SS=window.React.cloneElement,qo=window.React.useCallback,su=window.React.useMemo,TS=window.Blueprint.Core.Button,_S=window.Blueprint.Core.Checkbox,mv=window.Blueprint.Core.Classes,kS=window.Blueprint.Core.Code,OS=window.Blueprint.Core.ControlGroup,RS=window.Blueprint.Core.H4,jS=window.Blueprint.Core.H5,IS=window.Blueprint.Core.Icon,AS=window.Blueprint.Core.InputGroup,PS=window.Blueprint.Core.Menu,NS=window.Blueprint.Core.MenuItem,LS=window.Blueprint.Core.NumericInput,DS=window.Blueprint.Core.Switch,MS=window.Blueprint.Core.TextArea,BS=window.Blueprint.Select.Select,zS={canEscapeKeyClose:!1,minimal:!0,placement:"bottom",popoverClassName:$.POPOVER};function Uc(t){const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}const rl=({children:t})=>u.jsx("div",{"zr-role":"settings-row",children:t}),qi=({children:t,description:e=null,rightElement:n=null,title:o=null})=>u.jsxs("div",{"zr-role":"settings-row-col",children:[u.jsxs("div",{children:[o&&u.jsx(ja,{children:o}),e&&u.jsx(Ko,{children:e})]}),n,u.jsx("div",{"zr-role":"settings-row-col--container",children:t})]}),Ho=({children:t,description:e=null,onChange:n,options:o,selected:s,title:i=null})=>u.jsxs("div",{"zr-role":"settings-row-group",children:[u.jsxs("div",{children:[i&&u.jsx(ja,{children:i}),e&&u.jsx(Ko,{children:e})]}),ES.map(t,c=>SS(c,{handleSelect:n,options:o,selected:s}))]}),$S=({alignToBaseline:t=!1,children:e,description:n=null,handleSelect:o,id:s,options:i,selected:c})=>{const d=su(()=>c==s,[s,c]),f=qo(()=>o(s),[o,s]);return u.jsxs("div",{className:["zr-settings-rowgroup--option",t&&"align-items-baseline"].filter(St).join(" "),children:[u.jsx(_S,{checked:c==s,className:["zr-settings-rowgroup--option-label",d&&"selected"].filter(St).join(" "),inline:!1,labelElement:u.jsxs("div",{children:[u.jsx(FS,{children:i[s]}),n&&u.jsx(Ko,{children:n})]}),onChange:f}),e]})},cn=$S,ja=({children:t})=>u.jsx(RS,{children:t}),FS=({children:t})=>u.jsx(jS,{children:t}),Ko=({children:t})=>u.jsx("span",{className:[$.TEXT_SECONDARY,$.TEXT_SMALL].join(" "),children:t}),bn=({item:t,text:e=null})=>u.jsxs("div",{className:"zr-definition--wrapper",children:[u.jsx(kS,{className:"zr-definition--item",children:t}),e&&u.jsx("span",{children:e})]}),US=({description:t=null,label:e,setValue:n,title:o=null,value:s,...i})=>{const c=qo((d,f)=>n(d),[n]);return u.jsxs(rl,{children:[u.jsxs("div",{children:[o&&u.jsx(ja,{children:o}),t&&u.jsx(Ko,{children:t})]}),u.jsx(LS,{"aria-label":e,min:0,minorStepSize:1,onValueChange:c,selectAllOnFocus:!0,selectAllOnIncrement:!0,...i})]})},gv=({buttonProps:t={},onSelect:e,options:n,popoverTargetProps:o={},value:s,...i})=>{const c=qo(p=>e(p.value),[e]),d=qo((p,g)=>{const{handleClick:b}=g,v=p.value==s;return u.jsx(NS,{htmlTitle:p.label,labelElement:v?u.jsx(IS,{icon:"small-tick"}):null,onClick:b,"aria-selected":v,text:p.label},p.value.toString())},[s]),f=qo(({items:p,itemsParentRef:g,renderItem:b})=>{const v=p.map(b).filter(w=>w!=null);return u.jsx(PS,{ulRef:g,...o,children:v})},[o]),m=su(()=>({...zS,targetProps:o}),[o]);return u.jsx(BS,{className:["zr-setting--single-input",$.TEXT_SMALL].join(" "),filterable:!1,itemListRenderer:f,itemRenderer:d,itemsEqual:"value",items:n,matchTargetWidth:!1,onItemSelect:c,popoverProps:m,...i,children:u.jsx(TS,{alignText:"right",intent:"primary",minimal:!0,rightIcon:"caret-down",text:n.find(p=>p.value==s).label,...t})})},wr=({buttonProps:t={},description:e=null,menuTitle:n,onSelect:o,options:s,title:i=null,value:c,...d})=>{const f=su(()=>({title:n}),[n]);return u.jsxs(rl,{children:[u.jsxs("div",{children:[i&&u.jsx(ja,{children:i}),e&&u.jsx(Ko,{children:e})]}),u.jsx(gv,{buttonProps:t,options:s,onSelect:o,popoverTargetProps:f,value:c,...d})]})},pg=({label:t=void 0,onChange:e,value:n,...o})=>{const s=qo(i=>e(i.target.value),[e]);return u.jsx(MS,{"aria-label":t,autoComplete:"off",className:[$.INPUT_TEXT,$.TEXT_AUXILIARY,$.TEXT_SMALL,mv.CODE_BLOCK].join(" "),fill:!0,growVertically:!1,onChange:s,spellCheck:"false",title:t,value:n,...o})},qS=({children:t})=>u.jsx("div",{className:[$.INPUT_BOX,$.INPUT_TEXT].join(" "),"zr-role":"input-text",children:t}),HS=t=>!0,po=({description:t=null,ifEmpty:e=null,label:n=void 0,onChange:o,placeholder:s=void 0,title:i=null,validate:c=HS,value:d,...f})=>{const[m,{set:p}]=It(c(d)),g=qo(b=>{o(b.target.value),p(c(b.target.value))},[o,p,c]);return u.jsxs(rl,{children:[u.jsxs("div",{children:[i&&u.jsx(ja,{children:i}),t&&u.jsx(Ko,{children:t})]}),u.jsx(qS,{children:d||e==!0?u.jsx("input",{"aria-invalid":!m,"aria-label":n,autoComplete:"off",className:[$.INPUT_BOX,$.INPUT_TEXT,$.TEXT_SMALL,mv.INPUT].join(" "),onChange:g,placeholder:s,spellCheck:"false",title:n,type:"text",value:d,...f}):e})]})},pp=({description:t=null,onSelectChange:e,onValueChange:n,placeholder:o=void 0,selectOptions:s,selectValue:i,textValue:c,title:d=null,inputGroupProps:f={},inputLabel:m,selectButtonProps:p={},selectProps:g={},selectLabel:b})=>{const{popoverTargetProps:v,...w}=g,S=su(()=>({title:b,...v}),[b,v]),T=qo(R=>n(R.target.value),[n]);return u.jsxs(rl,{children:[u.jsxs("div",{children:[d&&u.jsx(ja,{children:d}),t&&u.jsx(Ko,{children:t})]}),u.jsxs(OS,{className:"zr-text-select-group",children:[u.jsx(gv,{buttonProps:p,onSelect:e,options:s,popoverTargetProps:S,value:i,...w}),u.jsx(AS,{"aria-label":m,autoComplete:"off",className:[$.INPUT_BOX,$.INPUT_TEXT,$.TEXT_SMALL].join(" "),onChange:T,placeholder:o,spellCheck:"false",title:m,type:"text",value:c,...f})]})]})},lo=({description:t=null,isChecked:e,label:n,onChange:o=void 0,title:s=null,...i})=>u.jsxs(rl,{children:[u.jsxs("div",{children:[s&&u.jsx(ja,{children:s}),t&&u.jsx(Ko,{children:t})]}),u.jsx(DS,{"aria-checked":e,checked:e,"aria-label":n,onChange:o,role:"switch",...i})]}),VS=window.React.createContext,XS=window.React.useCallback,QS=window.React.useContext,KS=window.React.useMemo,WS=window.React.useState;class cr{constructor(e={}){Ut(this,"context");Ut(this,"hooks");Ut(this,"Provider",({children:e,init:n,updater:o})=>{const[s,i]=WS(n),c=XS(f=>{i(m=>{const p=f(m);return this.hooks.beforeUpdate?.(m,p),o(p),this.hooks.afterUpdate?.(m,p),p})},[o]),d=KS(()=>[s,c],[s,c]);return u.jsx(this.context.Provider,{value:d,children:e})});Ut(this,"useSettings",()=>{const e=QS(this.context);if(!e)throw new Error("No context provided");return e});this.context=VS(null),this.hooks=e}}const hg=window.React.useMemo,GS=window.Blueprint.Core.Intent,{Provider:YS,useSettings:Ps}=new cr({afterUpdate:(t,e)=>{window?.zoteroRoam?.updateSetting?.("annotations",e)}}),ZS=[{label:"Group by date added",value:"dateAdded"},{label:"Don't group annotations",value:!1}],JS={default:"Default formatter",function:"Custom function"},eT=[{label:"Use raw metadata",value:"raw"},{label:"Use simplified data",value:"formatted"}],tT=u.jsxs(u.Fragment,{children:["Replacements available:",u.jsx(bn,{item:"{{comment}}",text:"the comment's text"})]}),nT=u.jsxs(u.Fragment,{children:["Replacements available:",u.jsx(bn,{item:"{{highlight}}",text:"the highlighted text"}),u.jsx(bn,{item:"{{page_label}}",text:"the page number"}),u.jsx(bn,{item:"{{link_page}}",text:"the link to the PDF page"}),u.jsx(bn,{item:"{{tags_string}}",text:"the tags associated with the highlight (comma-separated)"})]});function rT(){const[{func:t,group_by:e,template_comment:n,template_highlight:o,use:s,__with:i},c]=Ps(),d=hg(()=>{function m(p,g){c(b=>({...b,[p]:g}))}return{updateFuncName:p=>m("func",p),updateGroupBy:p=>m("group_by",p),updateTemplateComment:p=>m("template_comment",p),updateTemplateHighlight:p=>m("template_highlight",p),updateUseType:p=>m("use",p),updateWithFormat:p=>m("__with",p)}},[c]),f=hg(()=>({intent:GS.PRIMARY}),[]);return u.jsxs(u.Fragment,{children:[u.jsx(qi,{title:"Comment Template",description:tT,children:u.jsx(pg,{label:"Enter a template for comment blocks",onChange:d.updateTemplateComment,value:n})}),u.jsx(qi,{title:"Highlight Template",description:nT,children:u.jsx(pg,{label:"Enter a template for highlight blocks",onChange:d.updateTemplateHighlight,value:o})}),u.jsxs(Ho,{title:"Formatter",description:"Choose a way to format annotations metadata when importing from Zotero.",onChange:d.updateUseType,options:JS,selected:s,children:[u.jsx(cn,{id:"default",children:u.jsx(wr,{menuTitle:"Select whether annotations should be grouped",onSelect:d.updateGroupBy,options:ZS,value:e})}),u.jsx(cn,{id:"function",description:"Enter the inputs and name of your custom function.",children:u.jsx(pp,{onSelectChange:d.updateWithFormat,onValueChange:d.updateFuncName,placeholder:"e.g, myFunction",selectButtonProps:f,selectOptions:eT,selectValue:i,textValue:t,inputLabel:"Enter the name of your custom function for formatting annotations",selectLabel:"Select an input format for your custom function"})})]})]})}const oT=window.React.useMemo,{Provider:aT,useSettings:hp}=new cr,sT=[{label:"Citekey",value:"citekey"},{label:"Zettlr",value:"zettlr"}],iT={preset:"Preset",custom:"Custom template"},lT=[{label:"Citation",value:"citation"},{label:"Citekey",value:"citekey"},{label:"Citekey (raw)",value:"key"},{label:"Page reference",value:"pageref"},{label:"Popover",value:"popover"},{label:"Tag",value:"tag"}],cT={preset:"Preset",custom:"Custom template"},mg=u.jsxs(u.Fragment,{children:["Replacements available:",u.jsx(bn,{item:"{{authors}}",text:"Author et al."}),u.jsx(bn,{item:"{{citekey}}",text:"@someCitekey"}),u.jsx(bn,{item:"{{key}}",text:"someCitekey"}),u.jsx(bn,{item:"{{summary}}",text:"Author et al. (2023)"}),u.jsx(bn,{item:"{{summary_or_key}}"}),u.jsx(bn,{item:"{{title}}"}),u.jsx(bn,{item:"{{year}}"})]});function uT(){const[{display_char:t,display_use:e,display:n,format_char:o,format_use:s,format:i,trigger:c},d]=hp(),f=oT(()=>{function m(p,g){d(b=>({...b,[p]:g}))}return{updateDisplayChar:p=>m("display_char",p),updateDisplayUse:p=>m("display_use",p),updateDisplay:p=>m("display",p),updateFormatChar:p=>m("format_char",p),updateFormatUse:p=>m("format_use",p),updateFormat:p=>m("format",p),updateTrigger:p=>m("trigger",p)}},[d]);return u.jsxs(u.Fragment,{children:[u.jsx(po,{description:"The character(s) that should trigger the autocomplete. If no value is provided, the feature will be disabled.",ifEmpty:!0,label:"Enter a trigger for the 'autocomplete' feature",onChange:f.updateTrigger,placeholder:"e.g, @",title:"Trigger",value:c}),u.jsxs(Ho,{title:"Display",description:"How suggestions should be displayed in the autocomplete menu",onChange:f.updateDisplayUse,options:iT,selected:e,children:[u.jsx(cn,{id:"preset",children:u.jsx(wr,{menuTitle:"Select a display preset",onSelect:f.updateDisplay,options:sT,value:n})}),u.jsx(cn,{alignToBaseline:!0,id:"custom",description:mg,children:u.jsx(po,{ifEmpty:!0,label:"Enter a custom template",onChange:f.updateDisplayChar,placeholder:"e.g, {{key}}",value:t})})]}),u.jsxs(Ho,{title:"Format",description:"How references should be inserted into the current Roam block",onChange:f.updateFormatUse,options:cT,selected:s,children:[u.jsx(cn,{id:"preset",children:u.jsx(wr,{menuTitle:"Select a format preset",onSelect:f.updateFormat,options:lT,value:i})}),u.jsx(cn,{alignToBaseline:!0,id:"custom",description:mg,children:u.jsx(po,{ifEmpty:!0,label:"Enter a custom template",onChange:f.updateFormatChar,placeholder:"e.g, {{key}}",value:o})})]})]})}const dT=window.React.useMemo,{Provider:fT,useSettings:iu}=new cr,pT=[{label:"Citation",value:"citation"},{label:"Citekey",value:"citekey"},{label:"Page reference",value:"page-reference"},{label:"Key",value:"raw"},{label:"Tag",value:"tag"}],hT={preset:"Preset",template:"Custom template"},mT=[{label:"Alt",value:"altKey"},{label:"Ctrl",value:"ctrlKey"},{label:"Shift",value:"shiftKey"},{label:"System key",value:"metaKey"}],gT=u.jsxs(u.Fragment,{children:["Replacements available:",u.jsx(bn,{item:"{{authors}}",text:"Author et al."}),u.jsx(bn,{item:"{{key}}",text:"someCitekey"}),u.jsx(bn,{item:"{{title}}"}),u.jsx(bn,{item:"{{year}}"})]});function yT(){const[{always:t,overrideKey:e,preset:n,template:o,useAsDefault:s,useQuickCopy:i},c]=iu(),d=dT(()=>{function f(p){c(g=>({...g,[p]:!g[p]}))}function m(p,g){c(b=>({...b,[p]:g}))}return{toggleAlwaysCopy:()=>f("always"),updateOverrideKey:p=>m("overrideKey",p),updatePresetFormat:p=>m("preset",p),updateTemplate:p=>m("template",p),updateUseType:p=>m("useAsDefault",p),toggleQuickCopy:()=>f("useQuickCopy")}},[c]);return u.jsxs(u.Fragment,{children:[u.jsx(lo,{description:"Whether to always copy an item's reference in library search",isChecked:t,label:"Toggle 'always copy' setting",onChange:d.toggleAlwaysCopy,title:"Always copy"}),u.jsxs(Ho,{title:"Format",description:"The default formatting to use when copying an item's reference",onChange:d.updateUseType,options:hT,selected:s,children:[u.jsx(cn,{id:"preset",children:u.jsx(wr,{menuTitle:"Select a formatting preset",onSelect:d.updatePresetFormat,options:pT,value:n})}),u.jsx(cn,{alignToBaseline:!0,id:"template",description:gT,children:u.jsx(po,{ifEmpty:!0,label:"Enter a custom formatting template",onChange:d.updateTemplate,value:o})})]}),u.jsx(wr,{description:"The key to hold to override QuickCopy",menuTitle:"Select an override key for Quick Copy",onSelect:d.updateOverrideKey,options:mT,title:"Override Key",value:e}),u.jsx(lo,{description:"Should QuickCopy be enabled by default?",isChecked:i,label:"Toggle 'use quick copy by default' setting",onChange:d.toggleQuickCopy,title:"Use Quick Copy (default)"})]})}const gg=window.React.useMemo,bT=window.Blueprint.Core.Intent,{Provider:vT,useSettings:ol}=new cr,wT=[{label:"By name",value:"srcName"},{label:"By UID",value:"srcUid"}],xT={default:"Default formatter",function:"Custom function",smartblock:"SmartBlock"};function CT(){const[{func:t,smartblock:{param:e,paramValue:n},use:o},s]=ol(),i=gg(()=>{function d(m,p){s(g=>({...g,[m]:p}))}function f(m,p){const g=m=="param"?{param:p,paramValue:""}:{paramValue:p};s(b=>({...b,smartblock:{...b.smartblock,...g}}))}return{updateFuncName:m=>d("func",m),updateSmartblockParam:m=>f("param",m),updateSmartblockParamValue:m=>f("paramValue",m),updateUse:m=>d("use",m)}},[s]),c=gg(()=>({intent:bT.PRIMARY}),[]);return u.jsxs(Ho,{title:"Formatter",description:"Choose a way to format item metadata when importing from Zotero.",onChange:i.updateUse,options:xT,selected:o,children:[u.jsx(cn,{id:"default"}),u.jsx(cn,{id:"function",description:"Enter the name of a custom function to use",children:u.jsx(po,{ifEmpty:!0,label:"Enter the name of the function to use for formatting metadata",onChange:i.updateFuncName,placeholder:"e.g, myFunction",value:t})}),u.jsx(cn,{id:"smartblock",description:"Choose a SmartBlock template",children:u.jsx(pp,{onSelectChange:i.updateSmartblockParam,onValueChange:i.updateSmartblockParamValue,placeholder:"Enter a value",selectButtonProps:c,selectOptions:wT,selectValue:e,textValue:n,inputLabel:"Enter the SmartBlock's"+(e=="srcName"?"name":"UID"),selectLabel:"Select the property to use to identify the SmartBlock"})})]})}const yg=window.React.useMemo,ET=window.Blueprint.Core.Intent,{Provider:ST,useSettings:Ia}=new cr({afterUpdate:(t,e)=>{window?.zoteroRoam?.updateSetting?.("notes",e)}}),TT=[{label:"At the top",value:"top"},{label:"At the bottom",value:"bottom"}],_T=[{label:"Don't nest",value:!1},{label:"[[Notes]]",value:"[[Notes]]"}],kT={preset:"Preset",custom:"Custom content"},OT=[{label:"Newline",value:`
`},{label:"Paragraph",value:"</p>"}],RT={preset:"Preset",custom:"Custom separator"},jT={default:"Default formatter",function:"Custom function"},IT=[{label:"Use raw metadata",value:"raw"},{label:"Use HTML blocks",value:"text"}];function AT(){const[{func:t,nest_char:e,nest_position:n,nest_preset:o,nest_use:s,split_char:i,split_preset:c,split_use:d,use:f,__with:m},p]=Ia(),g=yg(()=>{function v(w,S){p(T=>({...T,[w]:S}))}return{updateFuncName:w=>v("func",w),updateNestChar:w=>v("nest_char",w),updateNestPosition:w=>v("nest_position",w),updateNestPreset:w=>v("nest_preset",w),updateNestUse:w=>v("nest_use",w),updateSplitChar:w=>v("split_char",w),updateSplitPreset:w=>v("split_preset",w),updateSplitUse:w=>v("split_use",w),updateUseType:w=>v("use",w),updateWithFormat:w=>v("__with",w)}},[p]),b=yg(()=>({intent:ET.PRIMARY}),[]);return u.jsxs(u.Fragment,{children:[u.jsxs(Ho,{title:"Divider",description:"The character(s) on which to split up notes into blocks",onChange:g.updateSplitUse,options:RT,selected:d,children:[u.jsx(cn,{id:"preset",children:u.jsx(wr,{menuTitle:"Select a separator preset",onSelect:g.updateSplitPreset,options:OT,value:c})}),u.jsx(cn,{id:"custom",description:"Special characters, like \\n, are not allowed.",children:u.jsx(po,{ifEmpty:!0,label:"Enter a custom separator",onChange:g.updateSplitChar,placeholder:"e.g, </p>",value:i})})]}),u.jsxs(Ho,{title:"Formatter",description:"Choose a way to format notes when importing from Zotero.",onChange:g.updateUseType,options:jT,selected:f,children:[u.jsx(cn,{id:"default"}),u.jsx(cn,{id:"function",description:"Enter the inputs and name of your custom function.",children:u.jsx(pp,{onSelectChange:g.updateWithFormat,onValueChange:g.updateFuncName,placeholder:"e.g, myFunction",selectButtonProps:b,selectOptions:IT,selectValue:m,textValue:t,inputLabel:"Enter the name of your custom function for formatting notes",selectLabel:"Select an input format for your custom function"})})]}),u.jsxs(Ho,{title:"Nesting",description:"Pick how to add notes to the Roam page.",onChange:g.updateNestUse,options:kT,selected:s,children:[u.jsx(cn,{id:"preset",children:u.jsx(wr,{menuTitle:"Select a nesting preset",onSelect:g.updateNestPreset,options:_T,value:o})}),u.jsx(cn,{id:"custom",description:"Enter the contents of the block under which notes should be nested",children:u.jsx(po,{ifEmpty:!0,label:"Enter the block's contents",onChange:g.updateNestChar,placeholder:"e.g, [[Notes]]",value:e})})]}),u.jsx(wr,{description:"The position at which to insert the blocks",menuTitle:"Select a position",onSelect:g.updateNestPosition,options:TT,title:"Position",value:n})]})}const PT=window.React.useMemo,{Provider:NT,useSettings:al}=new cr({beforeUpdate:(t,e)=>{t.cacheEnabled===!0&&e.cacheEnabled===!1&&setTimeout(()=>{window.zoteroRoam?.clearDataCache?.()},1e3)}});function LT(){const[{autoload:t,cacheEnabled:e,darkTheme:n,render_inline:o},s]=al(),i=PT(()=>{function c(d){s(f=>({...f,[d]:!f[d]}))}return{toggleAutoload:()=>c("autoload"),toggleCacheEnabled:()=>c("cacheEnabled"),toggleDarkTheme:()=>c("darkTheme"),toggleRenderInline:()=>c("render_inline")}},[s]);return u.jsxs(u.Fragment,{children:[u.jsx(lo,{description:"Activate the extension on graph load",isChecked:t,label:"Toggle 'autoload' setting",onChange:i.toggleAutoload,title:"Autoload"}),u.jsx(lo,{description:"Cache API data between sessions, to optimize loading times.",isChecked:e,label:"Toggle 'cache enabled' setting",onChange:i.toggleCacheEnabled,title:"Enable Cache"}),u.jsx(lo,{isChecked:n,label:"Toggle 'dark theme' setting",onChange:i.toggleDarkTheme,title:"Use Dark Theme by default"}),u.jsx(lo,{description:"This will display [[@citekey]] references as a formatted citation, like Scott et al. (2003). Block content will not be affected.",isChecked:o,label:"Toggle 'render inline' setting",onChange:i.toggleRenderInline,title:"Display references as citations"})]})}const DT=window.Blueprint.Core.Icon,MT=window.Blueprint.DateTime.DateInput,BT=window.Blueprint.DateTime.DateRangeInput,yv={canEscapeKeyClose:!1,fill:!0,minimal:!0,placement:"bottom",popoverClassName:[$.POPOVER,$.DATE_PICKER].join(" ")},bv={formatDate:t=>vr(t,{brackets:!1}),parseDate:t=>new Date(t)};function zT({value:t,setValue:e}){return u.jsx(MT,{className:$.INPUT_BOX,closeOnSelection:!0,highlightCurrentDay:!0,onChange:e,placeholder:"Date",popoverProps:yv,rightElement:u.jsx(DT,{icon:"timeline-events"}),shortcuts:!1,value:t,...bv})}function $T({value:t,setValue:e}){return u.jsx(BT,{className:$.INPUT_DATE_RANGE,closeOnSelection:!0,highlightCurrentDay:!0,onChange:e,popoverProps:yv,shortcuts:!1,value:t,...bv})}const Id=window.React.useCallback,FT=window.React.useMemo,UT=window.Blueprint.Core.Icon,qT=window.Blueprint.Core.MenuItem,HT=window.Blueprint.Select.MultiSelect,VT={className:$.TEXT_SMALL,initialContent:null,itemPredicate:(t,e)=>Un(t,e.label,{any_case:!0,match:"partial",search_compounds:!1,word_order:"loose"}),itemsEqual:"value",openOnKeyDown:!0,popoverProps:{canEscapeKeyClose:!1,fill:!0,minimal:!0,popoverClassName:$.POPOVER},resetOnSelect:!0,tagInputProps:{inputProps:{autoComplete:"off",placeholder:"Add...",spellCheck:"false"},placeholder:"Click to add an element"},tagRenderer:t=>t.label};function vv({options:t=[],value:e=[],setValue:n,...o}){const s=FT(()=>t.filter(f=>e.includes(f.value)),[t,e]),i=Id((f,m)=>n([...e,f.value]),[n,e]),c=Id((f,m)=>n(e.filter(p=>p!=f.value)),[n,e]),d=Id((f,m)=>{const{handleClick:p}=m,g=e.includes(f.value);return u.jsx(qT,{"aria-selected":g,labelElement:g?u.jsx(UT,{icon:"small-tick"}):null,onClick:p,text:f.label},f.value)},[e]);return u.jsx(HT,{itemRenderer:d,items:t,onItemSelect:i,onRemove:c,selectedItems:s,...VT,...o})}const XT=window.React.useCallback,QT=window.Blueprint.Core.InputGroup;function KT({value:t,setValue:e}){const n=XT(o=>e(o.target.value),[e]);return u.jsx(QT,{className:[$.INPUT_BOX,$.INPUT_TEXT].join(" "),onChange:n,placeholder:"Enter text",value:t})}const WT=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var GT=t=>!WT.has(t&&t.code);const YT=Zc(GT),wv="axios-retry";function xv(t){const e=["ERR_CANCELED","ECONNABORTED"];return t.response||!t.code||e.includes(t.code)?!1:YT(t)}const Cv=["get","head","options"],ZT=Cv.concat(["put","delete"]);function mp(t){return t.code!=="ECONNABORTED"&&(!t.response||t.response.status>=500&&t.response.status<=599)}function JT(t){return t.config?.method?mp(t)&&Cv.indexOf(t.config.method)!==-1:!1}function Ev(t){return t.config?.method?mp(t)&&ZT.indexOf(t.config.method)!==-1:!1}function Sv(t){return xv(t)||Ev(t)}function e_(){return 0}function t_(t=0,e=void 0,n=100){const o=2**t*n,s=o*.2*Math.random();return o+s}const n_={retries:3,retryCondition:Sv,retryDelay:e_,shouldResetTimeout:!1,onRetry:()=>{}};function r_(t,e){return{...n_,...e,...t[wv]}}function bg(t,e){const n=r_(t,e||{});return n.retryCount=n.retryCount||0,n.lastRequestTime=n.lastRequestTime||Date.now(),t[wv]=n,n}function o_(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}async function a_(t,e){const{retries:n,retryCondition:o}=t,s=(t.retryCount||0)<n&&o(e);if(typeof s=="object")try{return await s!==!1}catch{return!1}return s}const Wo=(t,e)=>{const n=t.interceptors.request.use(s=>(bg(s,e),s)),o=t.interceptors.response.use(null,async s=>{const{config:i}=s;if(!i)return Promise.reject(s);const c=bg(i,e);if(await a_(c,s)){c.retryCount+=1;const{retryDelay:d,shouldResetTimeout:f,onRetry:m}=c,p=d(c.retryCount,s);if(o_(t,i),!f&&i.timeout&&c.lastRequestTime){const g=Date.now()-c.lastRequestTime,b=i.timeout-g-p;if(b<=0)return Promise.reject(s);i.timeout=b}return i.transformRequest=[g=>g],await m(c.retryCount,s,i),new Promise(g=>{setTimeout(()=>g(t(i)),p)})}return Promise.reject(s)});return{requestInterceptorId:n,responseInterceptorId:o}};Wo.isNetworkError=xv;Wo.isSafeRequestError=JT;Wo.isIdempotentRequestError=Ev;Wo.isNetworkOrIdempotentRequestError=Sv;Wo.exponentialDelay=t_;Wo.isRetryableError=mp;function Ur(t,e=document){const n=new CustomEvent(`zotero-roam:${t._type}`,{bubbles:!0,cancelable:!0,detail:t});e.dispatchEvent(n)}function Tv(t){const{error:e,page:{title:n},success:o}=t.detail;e?window.zoteroRoam?.error?.({origin:"API",message:`Metadata import failed for ${n}`,context:{...t.detail,error:Kt(e)},showToaster:!0}):o?Vo.show({intent:"success",message:"Metadata added to "+n,timeout:Yi}):window.zoteroRoam?.warn?.({origin:"API",message:"Metadata import had uncertain outcome",context:t.detail})}function _v(t){const{error:e,page:{title:n},raw:{notes:o},success:s}=t.detail;e?window.zoteroRoam?.error?.({origin:"API",message:`Notes import failed for ${n}`,context:{...t.detail,error:Kt(e)},showToaster:!0}):s?Vo.show({intent:"success",message:"Notes added to "+n+` (${o.length})`,timeout:Yi}):window.zoteroRoam?.warn?.({origin:"API",message:"Notes import had uncertain outcome",context:t.detail})}function kv(t){const{args:{tags:e},error:n,library:o}=t.detail;n?window.zoteroRoam?.error?.({origin:"API",message:"Tag deletion failed",context:{...t.detail,error:Kt(n)},showToaster:!0}):Vo.show({intent:"success",message:Wt(e.length,"tag",` deleted from ${o}`),timeout:Yi})}function Ov(t){let{data:{failed:e,successful:n},error:o,library:s}=t.detail;if(o=Kt(o),o||e.length>0&&n.length==0)window.zoteroRoam?.error?.({origin:"API",message:"Tag modification failed",context:{...t.detail,error:o},showToaster:!0});else{const i=n.reduce((d,f)=>(d.success+=Object.keys(f.successful).length,d.error+=Object.keys(f.failed).length,d),{error:0,success:0});e.length==0&&i.error==0?Vo.show({intent:"success",message:Wt(i.success,"item",` successfully modified in ${s}.`),timeout:Yi}):window.zoteroRoam?.warn?.({origin:"API",message:"",detail:`${Wt(i.success,"item","")} modified in ${s}, with some problems. 
 Check the extension's logs for more details.`,context:{...t.detail,error:o},showToaster:!0})}}function Rv(t){let{data:e,error:n,library:o}=t.detail;const{failed:s=[],successful:i=[]}=e;if(n=Kt(n),n||s.length>0&&i.length==0)window.zoteroRoam?.error?.({origin:"API",message:"Error sending data to Zotero",context:{...t.detail,error:n},showToaster:!0});else{const c=i.reduce((f,m)=>(f.success+=Object.keys(m.successful).length,f.error+=Object.keys(m.failed).length,f),{error:0,success:0});s.length==0&&c.error==0?Vo.show({intent:"success",message:Wt(c.success,"item",` added to ${o}.`),timeout:Yi}):window.zoteroRoam?.warn?.({origin:"API",message:"Unsuccessful when sending data to Zotero",detail:`${Wt(c.success,"item","")} added to ${o}, with some problems. 
 Check the extension's logs for more details.`,context:{...t.detail,error:n},showToaster:!0})}}function s_(){document.addEventListener("zotero-roam:metadata-added",Tv),document.addEventListener("zotero-roam:notes-added",_v),document.addEventListener("zotero-roam:write",Rv),document.addEventListener("zotero-roam:tags-deleted",kv),document.addEventListener("zotero-roam:tags-modified",Ov)}function i_(){document.removeEventListener("zotero-roam:metadata-added",Tv),document.removeEventListener("zotero-roam:notes-added",_v),document.removeEventListener("zotero-roam:write",Rv),document.removeEventListener("zotero-roam:tags-deleted",kv),document.removeEventListener("zotero-roam:tags-modified",Ov)}const xr=qt.create({baseURL:"https://api.zotero.org/",headers:{"Zotero-API-Version":3}});Wo(xr,{retries:2,retryCondition:t=>{if(t.response){const{status:e}=t.response;return e==429||e>=500}else return!0},retryDelay:(t,e)=>{if(e.response){const{headers:n}=e.response;return(Number(n.backoff)||Number(n["retry-after"])||t)*1e3}else return t*3e3}});async function l_(t,e,n){const{apikey:o,path:s}=e;t.length>50&&window.zoteroRoam?.warn?.({origin:"API",message:"API limits exceeded",detail:"Only 50 Zotero tags can be deleted at once. Any additional tags selected will be ignored."});const i=t.slice(0,50).map(c=>encodeURIComponent(c)).join(" || ");return await xr.delete(`${s}/tags`,{headers:{"Zotero-API-Key":o,"If-Unmodified-Since-Version":n},params:{tag:i}})}async function gp(t,e){const{dataURI:n,apikey:o,since:s=null}=t,i=Math.ceil(e/100-1),c=[];for(let f=1;f<=i;f++){const m=new URLSearchParams("");s&&m.set("since",`${s}`),m.set("start",`${100*f}`),m.set("limit","100"),c.push(xr.get(`${n}?${m.toString()}`,{headers:{"Zotero-API-Key":o}}))}let d=[null];try{const f=await Promise.all(c);return d=f,f.map(m=>m.data).flat(1)}catch(f){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch additional data",context:{dataURI:n,error:Kt(f),responses:d,totalResults:e}}),Promise.reject(f)}}async function c_(t,e){const{apikey:n,path:o}=e,s=[],i=Math.ceil(t.length/100);for(let d=1;d<=i;d++){const f=t.slice(100*(d-1),100*d);s.push(xr.get(`${o}/items`,{headers:{"Zotero-API-Key":n},params:{include:"biblatex",itemKey:f.join(",")}}))}return(await Promise.all(s)).map(d=>d.data).flat(1).map(d=>d.biblatex).join(`
`)}async function u_(t,e,n={}){const{apikey:o,path:s}=e,i=`${s}/items/${t}`,{linkwrap:c=0,locale:d="en-US",style:f="chicago-note-bibliography"}=n;let m;try{const{data:p,...g}=await xr.get(i,{headers:{"Zotero-API-Key":o},params:{include:"bib",linkwrap:c,locale:d,style:f}});return m={data:p,...g},p.bib}catch(p){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch bibliography",context:{config:n,dataURI:i,error:Kt(p),response:m}}),Promise.reject(p)}}async function d_(t,e=0,{match:n=[]}){const{apikey:o,path:s}=t,i={data:null,error:null,library:s,since:e,success:!1};let c,d,f;try{const{data:m,headers:p,...g}=await xr.get(`${s}/collections`,{headers:{"Zotero-API-Key":o},params:{since:e}});c={data:m,headers:p,...g},d=m;const{"last-modified-version":b,"total-results":v}=p,w=Number(v);if(w>100){const S=await gp({dataURI:`${s}/collections`,apikey:o,since:e},w);d.push(...S)}if(e>0&&d.length>0){const{collections:S=[]}=await jv(t,e);f=S,Ur({...i,data:d,success:!0,type:"collections",_type:"update"})}return{data:Av({modified:d,deleted:f},n),lastUpdated:Number(b)}}catch(m){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch collections",context:{data:d,deleted:f,error:Kt(m),response:c}}),Ur({...i,error:m,success:!1,type:"collections",_type:"update"}),Promise.reject(m)}}async function jv(t,e){const{apikey:n,path:o}=t;let s;try{const{data:i}=await xr.get(`${o}/deleted`,{headers:{"Zotero-API-Key":n},params:{since:e}});return s=i,i}catch(i){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch deleted data",context:{error:Kt(i),response:s}}),Promise.reject(i)}}async function f_(t,{match:e=[]},n){const{apikey:o,dataURI:s,library:{path:i},since:c=0}=t,d=new URLSearchParams("");d.set("since",`${c}`),d.set("start","0"),d.set("limit","100");const f={data:null,error:null,library:i,since:c,success:!1};let m,p,g;try{const{data:b,headers:v,...w}=await xr.get(`${s}?${d.toString()}`,{headers:{"Zotero-API-Key":o}});m={data:b,headers:v,...w},p=b;const{"last-modified-version":S,"total-results":T}=v,R=Number(T);if(R>100){const L=await gp({dataURI:s,apikey:o,since:c},R);p.push(...L)}if(c>0){const{items:L=[]}=await jv({apikey:o,path:i},c);g=L;const q=["tags",{library:i}],{lastUpdated:Q}=n.getQueryData(q)||{};(p.length>0||Number(Q)<Number(S))&&(n.refetchQueries(q),Ur({...f,data:p,success:!0,type:"items",_type:"update"}))}return{data:Av({modified:p,deleted:g},e,{with_citekey:!0}),lastUpdated:Number(S)}}catch(b){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch items",context:{data:p,deleted:g,error:Kt(b),response:m}}),Ur({...f,error:b,success:!1,type:"items",_type:"update"}),Promise.reject(b)}}async function p_(t){try{const{data:e}=await xr.get(`keys/${t}`,{headers:{"Zotero-API-Key":t}});return e}catch(e){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch permissions"}),Promise.reject(e)}}async function h_(t){const{apikey:e,path:n}=t;let o=[];try{const{data:s,headers:i}=await xr.get(`${n}/tags?limit=100`,{headers:{"Zotero-API-Key":e}});o=s;const{"last-modified-version":c,"total-results":d}=i,f=Number(d);if(f>100){const m=await gp({dataURI:`${n}/tags`,apikey:e},f);o.push(...m)}return{data:b_(o),lastUpdated:Number(c)}}catch(s){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch tags",context:{error:Kt(s),path:n,tags:o}}),Promise.reject(s)}}function Iv(t,e){const{apikey:n,path:o}=e,s=Math.ceil(t.length/50),i=[];for(let c=1;c<=s;c++){const d=t.slice(50*(c-1),50*c);i.push(xr.post(`${o}/items`,JSON.stringify(d),{headers:{"Zotero-API-Key":n}}))}return Promise.allSettled(i)}function vg(t,e){return[t,e].forEach(n=>{if(n.constructor!==Object||!n.tag||!n.meta)throw new Error(`Received bad input: ${JSON.stringify(n)}, expected a Zotero tag`);if(n.meta.type===void 0)throw new Error(`Received bad input: ${JSON.stringify(n)}, expected the tag to have a type`)}),t.meta.type==e.meta.type&&t.tag==e.tag}function m_(t,e){const n=[],o=Array.from(t).sort((s,i)=>s>i?-1:1);for(const s of o)try{const i=n.findIndex(d=>Un(s,d.token,{any_case:!0,match:"exact",search_compounds:!0})),c=e.get(s);i==-1?n.push({token:s.toLowerCase(),roam:[],zotero:Array.isArray(c)?c:[c]}):Array.isArray(c)?n[i].zotero.push(...c):n[i].zotero.push(c)}catch(i){throw new Error(`Failed to categorize ${s}: `+i.message)}return n.sort((s,i)=>s.token<i.token?-1:1)}function g_(t){let e=t;["div"].forEach(c=>{const d=new RegExp(`</?${c}>|<${c} .+?>`,"g");e=e.replaceAll(d,"")}),e=Fc(e).trim();const o=document.createElement("textarea");o.innerHTML=e;let s=o.innerText;s=s.replaceAll(/<\/?i>/g,"__");const i=/<a href="(.+)">(.+)<\/a>/g;return s=s.replaceAll(i,"[$2]($1)"),s}function y_(t){return[...t].map(n=>{let{key:o}=n,s=!1;return typeof n.data.extra<"u"&&n.data.extra.includes("Citation Key: ")&&(o=n.data.extra.match("Citation Key: (.+)")?.[1]||o,s=!0),{...n,key:o,has_citekey:s}})}function b_(t){try{const e=v_(t),n=YE(Array.from(e.keys())),o=Object.keys(n).sort((i,c)=>i<c?-1:1),s={};return o.forEach(i=>{s[i]=m_(n[i],e)}),s}catch(e){throw new Error("Could not create tag list : "+e.message)}}function v_(t){return t.reduce((e,n)=>w_(e,n),new Map)}function Av(t,e=[],{with_citekey:n=!1}={}){const{modified:o=[],deleted:s=[]}=t,i=n?y_([...o]):[...o],c=[...s],d=c.length==0?e:e.filter(f=>!c.includes(f.data.key));if(i.length==0)return d;if(d.length==0)return i;{const[...f]=d;return i.forEach(m=>{const p=f.findIndex(g=>g.data.key==m.data.key);p==-1?f.push(m):f[p]=m}),f}}function w_(t,e){const{tag:n}=e;if(t.has(n)){const o=t.get(n);if(Array.isArray(o))o.every(s=>!vg(e,s))&&t.set(n,[...o,e]);else if(typeof o=="object")vg(e,o)||t.set(n,[o,e]);else throw new Error(`Map entry is of unexpected type ${typeof o}, expected Array or Object`)}else t.set(n,e);return t}async function x_(t,e){const{apikey:n,library:{path:o},...s}=t,i=["items",o,{...s}],{data:c=[],lastUpdated:d=0}=e.getQueryData(i)||{};return await f_({...t,since:d},{match:c},e)}function C_(t,e){return cp(yf(t),yf(e))}function E_(t,{func:e="",use:n="default",__with:o="raw",...s}={}){return n=="function"&&e?up(e,window,o=="raw"?t:au(t)):WE(t,{...s})}function S_(t,e,{return_as:n="string",brackets:o=!0}={}){if(t.data.relations&&t.data.relations["dc:relation"]){let s=t.data.relations["dc:relation"];typeof s=="string"&&(s=[s]);const i=[],c=/(users|groups)\/([^/]+)\/items\/(.+)/g;switch(s.forEach(d=>{const[,,,f]=Array.from(d.matchAll(c))[0],m=e.find(p=>p.data.key==f);m&&i.push(m)}),n){case"raw":return i;case"array":return o==!0?i.map(d=>`[[@${d.key}]]`):i.map(d=>d.key);case"string":default:return(o==!0?i.map(d=>`[[@${d.key}]]`):i.map(d=>d.key)).join(", ")}}else switch(n){case"raw":case"array":return[];case"string":default:return""}}const T_=window.Blueprint.Core.H5;var Gc,Yc;class __{constructor(e={},n="info"){Ut(this,"level");Ut(this,"origin");Ut(this,"message");Ut(this,"detail");Ut(this,"context");Ut(this,"intent");Ut(this,"timestamp");ma(this,Gc,{error:"danger",info:"primary",warning:"warning"});ma(this,Yc,{error:"warning-sign",info:"info-sign",warning:"warning-sign"});const{origin:o="",message:s="",detail:i="",context:c={},showToaster:d=!1}=e;this.level=n,this.origin=o,this.message=s,this.detail=i,this.context=c,this.intent=Pt(this,Gc)[n]||void 0,this.timestamp=new Date,d&&Vo.show({icon:Pt(this,Yc)[n]||null,intent:this.intent,message:this.detail?u.jsxs(u.Fragment,{children:[u.jsx(T_,{children:this.message}),u.jsx("p",{children:this.detail})]}):this.message,timeout:d.constructor===Number?d:1e3})}}Gc=new WeakMap,Yc=new WeakMap;function Pv(t,e="string"){if(t){const n=t.map(o=>({title:o.data.filename||o.data.title,key:o.key,link:dp(o,"href")}));switch(e){case"identity":return n;case"links":return n.map(o=>`[${o.title}](${o.link})`);case"string":default:return n.map(o=>`[${o.title}](${o.link})`).join(", ")}}else switch(e){case"identity":case"links":return[];case"string":default:return""}}function Nv(t,{return_as:e="string",brackets:n=!0,use_type:o=!0}={}){const s=t.data.creators.map(i=>{const c="name"in i?i.name:`${[i.firstName,i.lastName].filter(St).join(" ")}`;return{name:c,type:i.creatorType,inGraph:vp(c)}});switch(e){case"identity":return s;case"array":return s.map(i=>i.name);case"string":default:return s.map(i=>{const c=n==!0||n=="existing"&&i.inGraph?`[[${i.name}]]`:i.name;return o==!0?c+(i.type=="author"?"":` (${i.type})`):c}).join(", ")}}function Lv(t,{return_as:e="string",brackets:n=!0}={}){const o=t.data.tags.map(i=>i.tag),s=n==!0?o.map(i=>`#[[${i}]]`):o;switch(e){case"array":return s;case"string":default:return s.join(" ")}}var rr,so,io,gr;class k_{constructor({idbDatabase:e=null,queryClient:n,requests:o,settings:s}){ma(this,rr,void 0);ma(this,so,void 0);ma(this,io,void 0);ma(this,gr,void 0);Ut(this,"logs",[]);Ut(this,"formatPDFs",Pv);Ut(this,"getItemCreators",Nv);Ut(this,"getItemDateAdded",Dv);Ut(this,"getItemLink",wf);Ut(this,"getItemPublication",Bv);Ut(this,"getItemTags",Lv);const{libraries:i}=o,{annotations:c,notes:d,typemap:f}=s;us(this,rr,e),us(this,so,i),us(this,io,n),us(this,gr,{annotations:c,notes:d,typemap:f})}async clearDataCache(){if(Pt(this,rr)!==null)try{await(await Pt(this,rr).selectStore(Ca)).clear(),this.info({origin:"Database",message:"Successfully cleared data from cache",showToaster:1e3})}catch(e){this.error({origin:"Database",message:"Failed to clear data from cache",context:{error:Kt(e)}})}}async deleteDatabase(){Pt(this,rr)&&await Pt(this,rr).deleteSelf()}async isDataCached(){if(Pt(this,rr)!==null)try{return await(await Pt(this,rr).selectStore(Ca)).get(uf)!==void 0}catch(e){return this.error({origin:"Database",message:"Failed to obtain caching status",context:{error:Kt(e)}}),!1}return!1}async getDataCacheUpdatedAt(){if(Pt(this,rr))try{const e=await Pt(this,rr).selectStore(Ca),{timestamp:n}=await e.get(uf)||{};return n}catch(e){this.error({origin:"Database",message:"Failed to retrieve cache age",context:{error:Kt(e)}})}return null}updateLibraries(e){us(this,so,e)}updateSetting(e,n){Pt(this,gr)[e]=n}send(e,n="info"){this.logs.push(new __(e,n))}error(e){this.send(e,"error")}info(e){this.send(e,"info")}warn(e){this.send(e,"warning")}formatNotes(e){return yp(e,null,{annotationsSettings:Pt(this,gr).annotations,notesSettings:Pt(this,gr).notes})}async getBibEntries(e){return await O_(e,{libraries:Pt(this,so),queryClient:Pt(this,io)})}async getItemCitation(e,n={}){return await R_(e,n,{libraries:Pt(this,so)})}getCollections(e){const n=Pt(this,so).find(o=>o.path==e);return j_(n,{queryClient:Pt(this,io)})}getItemChildren(e){return I_(e,{queryClient:Pt(this,io)})}getItemCollections(e,{return_as:n="string",brackets:o=!0}={}){const s=e.library.type+"s/"+e.library.id,i=this.getCollections(s);return A_(e,i,{return_as:n,brackets:o})}getItemMetadata(e,n,o){return Mv(e,n,o,{annotationsSettings:Pt(this,gr).annotations,notesSettings:Pt(this,gr).notes,typemap:Pt(this,gr).typemap})}getItemRelated(e,{return_as:n="string",brackets:o=!0}={}){const{type:s,id:i}=e.library,c=this.getItems("items").filter(d=>d.library.id==i&&d.library.type==s);return S_(e,c,{return_as:n,brackets:o})}getItemType(e,{brackets:n=!0}={}){return zv(e,{brackets:n},{typemap:Pt(this,gr).typemap})}getItems(e="all"){return bp(e,{},{queryClient:Pt(this,io)})}getTags(e){return P_(e,{libraries:Pt(this,so),queryClient:Pt(this,io)})}}rr=new WeakMap,so=new WeakMap,io=new WeakMap,gr=new WeakMap;function yp(t,e=null,{annotationsSettings:n,notesSettings:o}){if(!t||t.length==0)return[];{const s=t.filter(el).sort((b,v)=>C_(b.data.annotationSortIndex,v.data.annotationSortIndex)),i=t.filter(tl).sort((b,v)=>b.data.dateAdded<v.data.dateAdded?-1:1),c=[...E_(s,n),...cv(i,o)],{nest_char:d,nest_position:f,nest_preset:m,nest_use:p}=o;if(p=="preset"&&!m)return c;if(e){const b=(p=="custom"?d:m)||"",v=z_(b,e);if(v){const{uid:w,children:S=[]}=v,T=f=="bottom"?S.length:0;return c.map(R=>R.constructor===String?{string:R,text:R,order:T,parentUID:w}:{...R,order:T,parentUID:w})}}const g=(p=="custom"?d:m)||"";return[{string:g,text:g,children:c}]}}async function O_(t,{libraries:e,queryClient:n}){const o=bp("items",{},{queryClient:n}),s=t.reduce((d,f)=>{const m=o.find(p=>p.key==f);if(m){const p=m.library.type+"s/"+m.library.id;Object.keys(d).includes(p)?d[p].push(m.data.key):d[p]=[m.data.key]}return d},{}),i=[];return Object.keys(s).forEach(d=>{const f=e.find(m=>m.path==d);f&&i.push(c_(s[d],f))}),(await Promise.all(i)).join(`
`)}async function R_(t,e={},{libraries:n}){const o=t.library.type+"s/"+t.library.id,s=n.find(c=>c.path==o),i=await u_(t.data.key,s,e);return g_(i)}function j_(t,{queryClient:e}){const{path:n}=t,o=["collections",{library:n}];return e.getQueryData(o)?.data||[]}function I_(t,{queryClient:e}){const n=t.library.type+"s/"+t.library.id;return bp("children",{predicate:o=>{const{queryKey:s}=o;return s[2].dataURI.startsWith(n)}},{queryClient:e}).filter(o=>o.data.parentItem==t.data.key)}function A_(t,e,{return_as:n="string",brackets:o=!0}={}){if(t.data.collections.length>0){const s=[];t.data.collections.forEach(c=>{const d=e.find(f=>f.key==c);d&&s.push(d.data.name)});const i=o==!0?s.map(c=>`[[${c}]]`):s;switch(n){case"array":return i;case"string":default:return i.join(", ")}}else return[]}function Dv(t,{brackets:e=!0}={}){return vr(t.data.dateAdded,{brackets:e})}function wf(t,e="local",n={}){return e=="local"?js(t,n):Is(t,n)}function Mv(t,e,n,{annotationsSettings:o,notesSettings:s,typemap:i}){const c=[];if(t.data.title&&c.push(`Title:: ${t.data.title}`),t.data.creators.length>0&&c.push(`Author(s):: ${Nv(t,{return_as:"string",brackets:!0,use_type:!0})}`),t.data.abstractNote&&c.push(`Abstract:: ${t.data.abstractNote}`),t.data.itemType&&c.push(`Type:: ${zv(t,{brackets:!0},{typemap:i})}`),c.push(`Publication:: ${Bv(t,{brackets:!0})}`),t.data.url&&c.push(`URL : ${t.data.url}`),t.data.dateAdded&&c.push(`Date Added:: ${Dv(t)}`),c.push(`Zotero links:: ${wf(t,"local",{format:"markdown",text:"Local library"})}, ${wf(t,"web",{format:"markdown",text:"Web library"})}`),t.data.tags.length>0&&c.push(`Tags:: ${Lv(t,{return_as:"string",brackets:!0})}`),e.length>0&&c.push(`PDF links : ${Pv(e,"links").join(", ")}`),n.length>0){const d=yp(n,null,{annotationsSettings:o,notesSettings:s});c.push(...d)}return c}function Bv(t,{brackets:e=!0}={}){const n=t.data.publicationTitle||t.data.bookTitle||t.data.university;return n?e==!0?`[[${n}]]`:n:""}function zv(t,{brackets:e=!0}={},{typemap:n}){const o=n[t.data.itemType]||t.data.itemType;return e==!0?`[[${o}]]`:o}function bp(t,e={},{queryClient:n}){const o=n.getQueriesData({queryKey:["items"],...e}).map(s=>{const[,i]=s;return i?.data||[]}).flat(1);switch(t){case"items":return o.filter(ap);case"attachments":return o.filter(op);case"children":return o.filter(s=>["note","annotation"].includes(s.data.itemType)||s.data.itemType=="attachment"&&s.data.contentType=="application/pdf");case"annotations":return o.filter(el);case"notes":return o.filter(tl);case"pdfs":return o.filter(s=>s.data.itemType=="attachment"&&s.data.contentType=="application/pdf");case"all":default:return o}}function P_(t,{libraries:e,queryClient:n}){const{path:o}=e.find(c=>c.path==t),s=["tags",{library:o}];return n.getQueryData(s).data}const $v=()=>({ZOTERORANDOMCITEKEY:{help:"Returns one or more Zotero citekeys, with optional tag query",handler:t=>(e="1",n="")=>window.zoteroRoam.getItems("items").filter(o=>Fv(n,o.data.tags.map(s=>s.tag))).map(o=>"@"+o.key).sort(()=>.5-Math.random()).slice(0,Number(e)||1)},ZOTEROITEMABSTRACT:{help:"Returns the abstract of a Zotero item.",handler:t=>()=>{const{item:e}=t.variables;return e.data.abstractNote||""}},ZOTEROITEMCITATION:{help:"Returns a formatted citation for a Zotero item. Options: style (default: 'chicago-note-bibliography'), locale (default: en-US), linkwrap (default: 0).",handler:t=>async(e="chicago-note-bibliography",n="en-US",o=0)=>{const{item:s}=t.variables;return await window.zoteroRoam.getItemCitation(s,{style:e,locale:n,linkwrap:o})}},ZOTEROITEMCITEKEY:{help:"Returns the citekey for a Zotero item, with the '@' prefix. If the item doesn't have a citekey, its Zotero key will be used. Options: brackets (`true` (default)|`false`).",handler:t=>(e=!0)=>{const{item:n}=t.variables,o="@"+n.key;return e?`[[${o}]]`:o}},ZOTEROITEMCOLLECTIONS:{help:"Returns the comma-separated list of the collection(s) a Zotero item belongs to.",handler:t=>(e=!0)=>{const{item:n}=t.variables;return window.zoteroRoam.getItemCollections(n,{return_as:"string",brackets:e})}},ZOTEROITEMCREATORS:{help:"Returns the comma-separated list of the creator(s) of a Zotero item. Options: brackets (`true`(default)|`false`|`existing`), use_type(`true`(default)|`false`).",handler:t=>(e=!0,n=!0)=>{const{item:o}=t.variables;return window.zoteroRoam.getItemCreators(o,{return_as:"string",brackets:e,use_type:n})}},ZOTEROITEMDATEADDED:{help:"Returns the date on which an item was added to Zotero. Options: brackets (`true`(default)|`false`).",handler:t=>(e=!0)=>{const{item:n}=t.variables;return vr(n.data.dateAdded,{brackets:e})}},ZOTEROITEMKEY:{help:"Returns the citekey for a Zotero item, without the '@' prefix. If the item doesn't have a citekey, its Zotero key will be used.",handler:t=>()=>{const{item:e}=t.variables;return e.key}},ZOTEROITEMLINK:{help:"Returns the link to a Zotero item (web or local library). Options: type (`local`(default)|`web`).",handler:t=>(e="local")=>{const{item:n}=t.variables;return e=="local"?js(n,{format:"target"}):Is(n,{format:"target"})}},ZOTEROITEMMETADATA:{help:"Returns the formatted metadata for a Zotero item and its children (PDFs, notes/annotations), using the extension's default formatter. Use this if you want to use the default metadata template as part of your SmartBlock.",handler:t=>()=>{const{item:e,pdfs:n,notes:o}=t.variables,s=window.zoteroRoam.getItemMetadata(e,n,o);return xf(s)}},ZOTEROITEMPUBLICATION:{help:"Returns the place of publication for a Zotero item. The command will look for the following fields, in order: `publicationTitle`, `bookTitle`, `university`. If no information is found, it will return an empty string.",handler:t=>()=>{const{item:e}=t.variables;return e.data.publicationTitle||e.data.bookTitle||e.data.university||""}},ZOTEROITEMRELATED:{help:"Returns the comma-separated list of the citekeys of a Zotero item's relations, if any. Options: brackets (`true`(default)|`false`).",handler:t=>(e=!0)=>{const{item:n}=t.variables;return window.zoteroRoam.getItemRelated(n,{return_as:"string",brackets:e})}},ZOTEROITEMTAGS:{help:"Returns the space-separated list of the tag(s) of a Zotero item, if any. Options: brackets (`true` (default)|`false`).",handler:t=>(e=!0)=>{const{item:n}=t.variables;return window.zoteroRoam.getItemTags(n,{return_as:"string",brackets:e})}},ZOTEROITEMTITLE:{help:"Returns the title of a Zotero item.",handler:t=>()=>{const{item:e}=t.variables;return e.data.title||""}},ZOTEROITEMTYPE:{help:"Returns the formatted type of a Zotero item, according to current user settings. Options: brackets (`true` (default)|`false`).",handler:t=>(e=!0)=>{const{item:n}=t.variables;return window.zoteroRoam.getItemType(n,{brackets:e})}},ZOTEROITEMURL:{help:"Returns the URL of a Zotero item, if available. If the item has no URL but has a DOI, its DOI URL will be returned.",handler:t=>()=>{const{item:e}=t.variables,n=e.data.url,o=As(e.data.DOI);return n||(o?"https://doi/org/"+o:"")}},ZOTEROITEMYEAR:{help:"Returns the year of publication of a Zotero item, if available.",handler:t=>()=>{const{item:e}=t.variables;return e.meta.parsedDate?isNaN(Number(new Date(e.meta.parsedDate)))?"":new Date(e.meta.parsedDate).getUTCFullYear().toString():""}},ZOTERONOTES:{help:"Formats a list of Zotero notes/annotations, with current user settings",handler:t=>()=>{const{notes:e=[]}=t.variables,n=window.zoteroRoam.formatNotes(e);return xf(n)}},ZOTEROPDFS:{help:"Returns the comma-separated links to a list of Zotero PDFs",handler:t=>()=>{const{pdfs:e=[]}=t.variables;return window.zoteroRoam.formatPDFs(e,"string")}}});function Fv(t,e){const n=t.split(/([\|\&]?)([^\&\|\(\)]+|\(.+\))([\|\&]?)/).filter(St);return n.includes("|")?L_(n.filter(o=>o!="|"),e):N_(n.filter(o=>o!="&"),e)}function N_(t,e){let n=!0;for(let o=0;o<t.length&&n==!0;o++)n=Uv(t[o],e);return n}function L_(t,e){let n=!1;for(let o=0;o<t.length&&n==!1;o++)n=Uv(t[o],e);return n}function Uv(t,e){if(t.startsWith("(")&&t.endsWith(")")){const n=t.slice(1,-1);return Fv(n,e)}else if(t.startsWith("-")){const n=t.slice(1);return!e.includes(n)}else return e.includes(t)}function xf(t){return t?t.map(e=>{if(typeof e=="string")return{string:e,text:e,children:[]};if(typeof e=="object")return{...e,children:xf(e.children||[])};throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad element received",context:{element:e}}),new Error(`All array items should be of type String or Object, not ${typeof e}`)}):[]}function D_(){const t=$v(),e=()=>{if(window.roamjs?.extension?.smartblocks){try{qv()}catch(n){window.zoteroRoam?.error?.({origin:"SmartBlocks",message:"Failed to unregister commands",context:{error:n.message}})}Object.keys(t).forEach(n=>{const{help:o,handler:s}=t[n];window.roamjs?.extension.smartblocks?.registerCommand({text:n,help:o,handler:s})})}};window.roamjs?.loaded?.has("smartblocks")?e():document.body.addEventListener("roamjs:smartblocks:loaded",e)}function qv(){const t=$v();window.roamjs?.extension?.smartblocks&&Object.keys(t).forEach(e=>{window.roamjs?.extension?.smartblocks?.unregisterCommand(e)})}async function M_(t,e){const{param:n,paramValue:o}=t,{item:s,notes:i,page:c,pdfs:d}=e,f={args:{smartblock:t,uid:c.uid},error:null,page:c,raw:{item:s,notes:i,pdfs:d},success:null},m={targetUid:c.uid,variables:{},[n]:o};Object.keys(e).forEach(p=>{m.variables[p]=e[p]});try{return await window.roamjs?.extension?.smartblocks?.triggerSmartblock(m),Promise.resolve({...f,success:!0})}catch(p){return window.zoteroRoam?.error?.({origin:"SmartBlocks",message:"Failed to trigger SmartBlock",context:{...m,error:p.message}}),Promise.resolve({...f,error:p,success:!1})}}async function B_(t,e,n=0){const{string:o,children:s=[],...i}=e;if(typeof o>"u")throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad object received",context:{object:e}}),new Error("All blocks objects must have a `string` property.");{const c=await Xv(i.parentUID||t,o,i.order||n,i);if(s.constructor===Array)for(const d of s)await Hv({parentUID:c,block:d,order:"last"});else throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad object received",context:{object:e}}),new Error(`If provided, the 'children' property of a block should be an Array - received ${typeof s}`)}}async function Hv({parentUID:t,block:e,order:n=0}){switch(typeof e){case"object":await B_(t,e,n);break;case"string":await Xv(t,e,n);break;default:throw window.zoteroRoam?.error?.({origin:"Metadata",message:"Bad element received",context:{element:e}}),new Error(`All block items should be of type String or Object - received ${typeof e}`)}}async function Vv(t,e){const n={args:{blocks:e,uid:t},error:null,success:null};if(e.length>0)try{for(const o of e.reverse())await Hv({parentUID:t,block:o,order:0});return Promise.resolve({...n,success:!0})}catch(o){return Promise.resolve({...n,error:o,success:!1})}else return window.zoteroRoam?.warn?.({origin:"Metadata",message:"Empty metadata array received"}),Promise.resolve(n)}function wg(t,e,n={}){const o={label:t,callback:e,"disable-hotkey":!0};n.ui?n.ui.commandPalette.addCommand(o):window.roamAlphaAPI.ui.commandPalette.addCommand(o)}async function Xv(t,e,n=0,o={}){const s=window.roamAlphaAPI.util.generateUID(),i={string:e,uid:s};if(Object.keys(o).length>0)for(const c of Object.keys(o))["children-view-type","alignment","heading"].includes(c)&&(i[c]=o[c]);return await window.roamAlphaAPI.data.block.create({location:{"parent-uid":t,order:n},block:i}),s}function z_(t,e){const n=window.roamAlphaAPI.data.q(`[
		:find (pull ?b [:block/uid :block/children])
		:in $ ?string ?parentUID
		:where
			[?par :block/uid ?parentUID]
			[?par :block/children ?b]
			[?b :block/uid ?uid]
			[?b :block/string ?string]
	]`,t,e);return n[0]?n[0][0]:!1}function vp(t){const e=window.roamAlphaAPI.data.q(`[
		:find ?uid 
		:in $ ?title 
		:where
			[?p :node/title ?title]
			[?p :block/uid ?uid]
		]`,t);return e[0]?e[0][0]:!1}function $_(){return window.roamAlphaAPI.data.q(`[
		:find ?title 
		:where
			[?e :node/title ?title]
		]`).flat(1).sort((t,e)=>t.toLowerCase()<e.toLowerCase()?-1:1)}function xg(){return new Map(window.roamAlphaAPI.data.q(`[
		:find ?title ?uid 
		:where
			[?e :node/title ?title]
			[(clojure.string/starts-with? ?title "@")]
			[?e :block/uid ?uid]
		]`))}function F_(){return new Map(window.roamAlphaAPI.data.q(`[
		:find [(pull ?e [:node/title :edit/time :block/uid {:block/_parents [:edit/time]}])...] 
		:where
			[?e :node/title ?t]
			[(clojure.string/starts-with? ?t "@")]
		]`).filter(t=>t.time).map(t=>{const{title:e,uid:n}=t,o=t._parents?Math.max(...t._parents.map(s=>s.time)):t.time;return[e,{edited:new Date(Math.max(o,t.time)),uid:n}]}))}function U_(){const{"block-uid":t,"window-id":e}=window.roamAlphaAPI.ui.getFocusedBlock()||{};if(!t||!e)return null;const n=["block-input",e,t].join("-"),o=document.getElementById(n),{selectionStart:s=null,selectionEnd:i=null}=o||{},c={id:n,location:{"block-uid":t,"window-id":e}};return s&&i&&(c.selection={start:s,end:i}),c}function q_(){return window.roamAlphaAPI.graph.name}function H_(t){return window.roamAlphaAPI.data.q(`[
		:find (pull ?e [:node/title :block/uid]) 
		:in $ [?k ...] 
		:where
			[?e :node/title ?title]
			[(clojure.string/starts-with? ?title ?k)]
		]`,t).flat(1)}async function lu({item:t,pdfs:e=[],notes:n=[]},o,s,i,c,d){const f="@"+t.key,m=o||window.roamAlphaAPI.util.generateUID(),p={new:!1,title:f,uid:m};m!=o&&(window.roamAlphaAPI.data.page.create({page:{title:f,uid:m}}),p.new=!0);const{use:g="default",func:b="",smartblock:{param:v,paramValue:w}}=s;if(g=="smartblock"){const S={item:t,notes:n,page:p,pdfs:e};try{const T=await M_({param:v,paramValue:w},S);return Ur({...T,_type:"metadata-added"}),T}catch(T){return window.zoteroRoam?.error?.({origin:"Metadata",message:"Failed to import metadata via SmartBlock for: "+f,detail:T.message,context:{page:p,settings:{annotations:d,metadata:s,notes:c}},showToaster:1e3}),await Promise.reject(T)}}else try{const S=g=="function"&&b?await up(b,window,t,e,n):Mv(t,e,n,{annotationsSettings:d,notesSettings:c,typemap:i}),T=await Vv(m,S),R={page:p,raw:{item:t,pdfs:e,notes:n},...T};return Ur({...R,_type:"metadata-added"}),R}catch(S){return window.zoteroRoam?.error?.({origin:"Metadata",message:"Failed to import metadata for: "+f,detail:S.message,context:{page:p,settings:{annotations:d,metadata:s,notes:c}},showToaster:1e3}),await Promise.reject(S)}}async function Qv({item:t,notes:e=[]},n,o,s){const i="@"+t.key,c=n||window.roamAlphaAPI.util.generateUID(),d={new:!1,title:i,uid:c};c!=n&&(window.roamAlphaAPI.data.page.create({page:{title:i,uid:c}}),d.new=!0);try{const f=yp(e,c,{annotationsSettings:s,notesSettings:o}),m=await Vv(c,f),p={page:d,raw:{item:t,notes:e},...m};return Ur({...p,_type:"notes-added"}),p}catch(f){return window.zoteroRoam?.error?.({origin:"Notes",message:"Failed to import notes for: "+i,detail:f.message,context:{page:d,settings:{annotations:s,notes:o}},showToaster:1e3}),await Promise.reject(f)}}function V_(t){if(t&&t.location){const{id:e,...n}=t;(document.getElementById(e)||!1)&&window.roamAlphaAPI.ui.setBlockFocusAndSelection(n)}}async function Cg(t,e="outline"){await window.roamAlphaAPI.ui.rightSidebar.addWindow({window:{type:e,"block-uid":t}})}async function Cf(t){await window.roamAlphaAPI.ui.mainWindow.openPage({page:{uid:t}})}function Eg(t,e={}){const n={label:t};e.ui?e.ui.commandPalette.removeCommand(n):window.roamAlphaAPI.ui.commandPalette.removeCommand(n)}const X_=window.React.memo,Sg=window.React.useCallback,Q_=window.React.useState,Tg=window.Blueprint.Core.MenuItem,K_=window.Blueprint.Select.MultiSelect,W_=30,G_={canEscapeKeyClose:!1,className:"zr-input-tags",fill:!0,minimal:!0,popoverClassName:$.POPOVER},Y_={inputProps:{"aria-label":"Add tags from Roam",placeholder:"Add tag",title:"Add tags from Roam"},leftIcon:"tag",tagProps:{minimal:!0}},Z_={createNewItemFromQuery:t=>t,createNewItemRenderer:(t,e,n)=>u.jsx(Tg,{"aria-selected":e,htmlTitle:`Add tag, '${t}'`,icon:"small-plus",onClick:n,text:t}),itemRenderer:(t,e)=>{const{handleClick:n,modifiers:{active:o}}=e;return u.jsx(Tg,{"aria-selected":o,onClick:n,text:t},t)},itemListPredicate:(t,e)=>e.filter(n=>Un(t,n,{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"})).sort((n,o)=>n.length<o.length?-1:1).slice(0,W_),tagRenderer:t=>t},wp=X_(function(e){const{selectedTags:n,onRemove:o,onSelect:s,...i}=e,[c]=Q_(()=>$_()),d=Sg((m,p)=>s(m),[s]),f=Sg((m,p)=>o(m),[o]);return u.jsx(K_,{className:$.TEXT_SMALL,createNewItemPosition:"first",fill:!0,initialContent:null,items:c,onItemSelect:d,onRemove:f,openOnKeyDown:!0,placeholder:"Add tags from Roam",popoverProps:G_,resetOnQuery:!0,resetOnSelect:!0,selectedItems:n,tagInputProps:Y_,...Z_,...i})}),J_=window.React.useMemo,{Provider:ek,useSettings:sl}=new cr,tk=[{label:"Metadata import",value:"addMetadata"},{label:"Notes import",value:"importNotes"},{label:"Item details",value:"viewItemInfo"},{label:"Zotero link (local)",value:"openZoteroLocal"},{label:"Zotero link (web)",value:"openZoteroWeb"},{label:"PDF links",value:"pdfLinks"},{label:"Scite Badge",value:"sciteBadge"},{label:"Connected Papers link",value:"connectedPapers"},{label:"Semantic Scholar link",value:"semanticScholar"},{label:"Google Scholar link",value:"googleScholar"},{label:"Citations & References",value:"citingPapers"}],nk=[{label:"Default",value:"default"},{label:"Always",value:!0},{label:"Never",value:!1}];function rk(){const[{defaults:t,trigger:e},n]=sl(),o=J_(()=>{function s(i,c){n(d=>({...d,[i]:c}))}return{updateMenuElems:i=>s("defaults",i),updateMenuTrigger:i=>s("trigger",i)}},[n]);return u.jsxs(u.Fragment,{children:[u.jsx(qi,{title:"Elements",children:u.jsx(vv,{fill:!0,openOnKeyDown:!1,options:tk,setValue:o.updateMenuElems,value:t})}),u.jsx(wr,{description:"Select when contextual menus should be shown. By default, menus are displayed if the page title is longer than 5 characters.",menuTitle:"Select whether to show the page menu",onSelect:o.updateMenuTrigger,options:nk,title:"Show menus",value:e})]})}const ok=window.React.useMemo,ak=window.Blueprint.Core.Tag,sk=t=>"*".repeat(t.length);function ik({request:t}){const{apikey:e,dataURI:n,library:{path:o,type:s}}=t,i=ok(()=>{const c=s=="users"?{icon:"user",htmlTitle:"User library"}:s=="groups"?{icon:"people",htmlTitle:"Group library"}:{};return u.jsx(ak,{minimal:!0,...c,children:o})},[o,s]);return u.jsxs("div",{className:"zr-settings--card",children:[u.jsxs("div",{"zr-role":"settings-row",children:[u.jsx("span",{className:$.TEXT_AUXILIARY,children:"Library"}),u.jsx("div",{children:i})]}),u.jsxs("div",{"zr-role":"settings-row",children:[u.jsx("span",{className:$.TEXT_AUXILIARY,children:"Data URI"}),u.jsx("div",{children:n&&u.jsx("span",{children:n})})]}),u.jsxs("div",{"zr-role":"settings-row",children:[u.jsx("span",{className:$.TEXT_AUXILIARY,children:"API Key"}),u.jsx("div",{children:e&&u.jsx("span",{children:sk(e)})})]})]})}const lk=window.ReactDOM.unmountComponentAtNode,ck=window.Blueprint.Core.parseKeyCombo;function Kv(t){const e=Array.isArray(t)?t:[t];if(e.length==0)return console.warn("At least one data request must be specified for the extension to function. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/zotero-roam/getting-started/api"),{dataRequests:[],apiKeys:[],libraries:[]};{const n=e.find(o=>o.apikey)?.apikey;if(n){const o=e.map(c=>{if("library"in c){const{apikey:d,library:f,name:m=""}=c,{id:p,type:g}=f;if(!p||isNaN(Number(p)))throw new Error("A library ID is missing or invalid. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");if(!g||!["users","groups"].includes(g))throw new Error("A library type is missing or invalid. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");return{apikey:d||n,dataURI:[g,p,"items"].join("/"),library:{id:p,path:[g,p].join("/"),type:g,uri:"items"},name:m}}else{const{apikey:d,dataURI:f,name:m=""}=c;if(!f)throw new Error("Each data request must be assigned a data URI. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/api");const p=[...f.matchAll(/(users|groups)\/(\d+?)\/(items.*)/g)];if(p.length==0)throw new Error(`An incorrect data URI was provided for a request : ${f}. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/getting-started/prereqs#zotero-api-credentials`);const[,g,b,v]=p[0];return{apikey:d||n,dataURI:f,library:{id:b,path:[g,b].join("/"),type:g,uri:v},name:m}}}),s=Array.from(new Set(o.map(c=>c.apikey))),i=o.reduce((c,d)=>{const{library:{path:f},apikey:m}=d;if(c.find(g=>g.path==f))throw new Error(`The same library was provided twice: ${f}.`);return c.push({path:f,apikey:m}),c},[]);return{dataRequests:o,apiKeys:s,libraries:i}}else throw new Error("At least one data request must be assigned an API key. See the documentation here : https://alix-lahuec.gitbook.io/zotero-roam/zotero-roam/getting-started/api")}}function uk(t){const e=uf;return{persistClient:async n=>{try{await(await t.selectStore(Ca)).set(e,n)}catch(o){throw window.zoteroRoam?.error?.({origin:"Database",message:"Failed to persist query client",context:{error:Kt(o)}}),o}},removeClient:async()=>{try{return await(await t.selectStore(Ca)).delete(e)}catch(n){throw window.zoteroRoam?.error?.({origin:"Database",message:"Failed to remove query client",context:{error:Kt(n)}}),n}},restoreClient:async()=>{try{return await(await t.selectStore(Ca)).get(e)}catch(n){throw window.zoteroRoam?.error?.({origin:"Database",message:"Failed to restore query client",context:{error:Kt(n)}}),n}}}}function dk(t){const{queryKey:e}=t;return e.includes("permissions")||e[0]=="permissions"?!1:vb(t)}function Wv(t){const{annotations:e={},autocomplete:n={},copy:o={},metadata:s={},notes:i={},other:c={},pageMenu:d={},sciteBadge:f={},shortcuts:m={},typemap:p={},webimport:g={}}=t;return{annotations:{func:"",group_by:!1,template_comment:"{{comment}}",template_highlight:"[[>]] {{highlight}} ([p. {{page_label}}]({{link_page}})) {{tags_string}}",use:"default",__with:"formatted",...e},autocomplete:{display_char:"",display_use:"preset",display:"citekey",format_char:"",format_use:"preset",format:"citation",trigger:"",...n},copy:{always:!1,overrideKey:"shiftKey",preset:"citekey",template:"@{{key}}",useAsDefault:"preset",useQuickCopy:!1,...o},metadata:{func:"",smartblock:{param:"srcUid",paramValue:""},use:"default",...s},notes:{func:"",nest_char:"",nest_position:"top",nest_preset:"[[Notes]]",nest_use:"preset",split_char:"",split_preset:`
`,split_use:"preset",use:"default",__with:"text",...i},other:{autoload:!1,cacheEnabled:!1,darkTheme:!1,render_inline:!1,...c},pageMenu:{defaults:["addMetadata","importNotes","viewItemInfo","openZoteroLocal","openZoteroWeb","pdfLinks","sciteBadge","connectedPapers","semanticScholar","googleScholar","citingPapers"],trigger:"default",...d},sciteBadge:{layout:"horizontal",showLabels:!1,showZero:!0,small:!1,tooltipPlacement:"auto",tooltipSlide:0,...f},shortcuts:{copyDefault:"",copyCitation:"",copyCitekey:"",copyPageRef:"",copyTag:"",focusSearchBar:"",goToItemPage:"",importMetadata:"",toggleDashboard:"",toggleNotes:"alt+N",toggleSearchPanel:"alt+E",toggleSettingsPanel:"",toggleQuickCopy:"",...Ns(m)},typemap:{...SC,...p},webimport:{tags:[],...g}}}function fk({extensionAPI:t}){const e=t.settings.getAll(),n=Wv(e||{});Object.entries(n).forEach(([s,i])=>{t.settings.set(s,i)});let o=t.settings.get("requests");return o||(o={dataRequests:[],apiKeys:[],libraries:[]},t.settings.set("requests",o)),{requests:o,settings:n}}function pk({manualSettings:t}){const{dataRequests:e=[]}=t,n=Wv(t);return{requests:Kv(e),settings:n}}function hk(t){const{requests:e,settings:n}=t.context=="roam/depot"?fk(t):pk(t);return{requests:e,settings:n}}function mk(t=!1){document.getElementsByTagName("body")[0].setAttribute("zr-dark-theme",(t==!0).toString())}function gk(){Gv();const t=document.querySelector(".rm-topbar .rm-find-or-create-wrapper"),e=document.createElement("span");e.id=Yf,t?.insertAdjacentElement("afterend",e);const n=document.createElement("div");n.id=Gf,document.getElementById("app")?.appendChild(n)}function yk({settings:t}){mk(t.other.darkTheme),s_(),D_()}function Gv(){const t=document.getElementById(Yf);if(t)try{lk(t),t.remove()}catch(e){console.error(e)}document.getElementById(Gf)?.remove()}function Ns(t){const e={};return Object.keys(t).forEach(n=>{const o=t[n];if(o=="")e[n]=o;else try{ck(t[n]),e[n]=t[n]}catch{window.zoteroRoam?.warn?.({origin:"Shortcuts",message:"Invalid hotkey: "+t[n]})}}),e}const Ef=window.React.useCallback,_g=window.React.useEffect,bk=window.React.useMemo,vk=window.React.useRef,Yv=window.React.useState,Hi=window.Blueprint.Core.Button,Ai=window.Blueprint.Core.Classes,xp=window.Blueprint.Core.ControlGroup,Ad=window.Blueprint.Core.FormGroup,wk=window.Blueprint.Core.H6,Pd=window.Blueprint.Core.InputGroup,xk=window.Blueprint.Core.MenuItem,Ck=window.Blueprint.Select.Select,Ek={itemRenderer:(t,e)=>{const{handleClick:n}=e;return u.jsx(xk,{onClick:n,text:t.label},t.value)},popoverProps:{canEscapeKeyClose:!1,minimal:!0,placement:"bottom-right",popoverClassName:$.POPOVER,targetProps:{title:"Select the type of library you want to use"}}},Sk=[{label:"User library",value:"users"},{label:"Group library",value:"groups"}];function Zv({inputRef:t=void 0,pos:e,req:n,updateReq:o}){const{apikey:s,library:{type:i,id:c},name:d}=n,f=bk(()=>{function m(g,b){o({...n,[g]:b.target.value})}function p(g,b){o({...n,library:{...n.library,[g]:b}})}return{updateAPIKey:g=>m("apikey",g),updateLibraryType:g=>p("type",g.value),updateLibraryID:g=>p("id",g.target.value),updateName:g=>m("name",g)}},[n,o]);return u.jsxs(u.Fragment,{children:[u.jsx(Ad,{label:"Library",labelFor:"req-library"+e,children:u.jsxs(xp,{children:[u.jsx(Ck,{filterable:!1,items:Sk,onItemSelect:f.updateLibraryType,...Ek,children:u.jsx(Hi,{active:!0,className:$.TEXT_SMALL,icon:i=="users"?"user":"people",intent:"primary",minimal:!0,rightIcon:"caret-down",text:i})}),u.jsx(Pd,{className:[$.INPUT_BOX,$.INPUT_TEXT,$.TEXT_SMALL].join(" "),id:"req-library"+e,inputRef:t,onChange:f.updateLibraryID,placeholder:"e.g, 123456",value:c})]})}),u.jsx(Ad,{label:"API Key",labelFor:"req-apikey"+e,children:u.jsx(Pd,{className:[$.INPUT_BOX,$.INPUT_TEXT,$.TEXT_SMALL].join(" "),id:"req-apikey"+e,onChange:f.updateAPIKey,placeholder:"Zotero API key",value:s})}),u.jsx(Ad,{label:"Name",labelFor:"req-name"+e,children:u.jsx(Pd,{className:[$.INPUT_BOX,$.INPUT_TEXT,$.TEXT_SMALL].join(" "),id:"req-name"+e,onChange:f.updateName,placeholder:"Nickname (optional)",value:d})})]})}const kg={apikey:"",library:{type:"users",id:""},name:""};function Tk({dispatch:t,inputRef:e}){const[n,o]=Yv(kg),s=Ef(()=>{t({type:"add",value:n}),o(kg)},[t,n]);return u.jsx("div",{className:"zr-data-request new",children:u.jsxs(xp,{children:[u.jsx(Zv,{inputRef:e,pos:"new",req:n,updateReq:o}),u.jsx(Hi,{className:[$.TEXT_SMALL,Ai.FIXED].join(" "),intent:"success",minimal:!0,onClick:s,text:"Add",title:"Add the request"})]})})}function _k({dispatch:t,pos:e,req:n}){return u.jsx("div",{className:"zr-data-request existing",children:u.jsxs(xp,{children:[u.jsx(Zv,{pos:e,req:n,updateReq:o=>t({type:"updateSelf",value:o})}),u.jsx(Hi,{className:Ai.FIXED,icon:"remove",intent:"danger",minimal:!0,onClick:()=>t({type:"removeSelf"}),title:"Remove the request"})]})})}function kk({closeDialog:t,dataRequests:e=[],updateRequests:n}){const[o,s]=pv(e),[i,c]=Yv(null),d=vk(null);_g(()=>{c(null)},[o]),_g(()=>{d?.current?.focus()},[]);const f=Ef((p,g)=>{switch(g.type){case"removeSelf":return s({type:"remove",index:p});case"updateSelf":return s({type:"update",index:p,value:g.value});default:return}},[s]),m=Ef(()=>{try{const p=Kv(o);n(p),t()}catch(p){c(p)}},[t,o,n]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:Ai.DIALOG_BODY,children:[o.map((p,g)=>u.jsx(_k,{pos:g,req:p,dispatch:b=>f(g,b)},g)),u.jsx(wk,{children:"Add a new request"}),u.jsx(Tk,{dispatch:s,inputRef:d}),i&&u.jsx(Zf,{error:i})]}),u.jsx("div",{className:Ai.DIALOG_FOOTER,children:u.jsxs("div",{className:Ai.DIALOG_FOOTER_ACTIONS,children:[u.jsx(Hi,{minimal:!0,onClick:t,text:"Cancel"}),u.jsx(Hi,{intent:"primary",minimal:!0,onClick:m,text:"OK"})]})})]})}const Ok=window.React.useCallback,Rk=window.Blueprint.Core.Button,jk=window.Blueprint.Core.Dialog,{Provider:Ik,useSettings:Hn}=new cr({afterUpdate:(t,e)=>{window?.zoteroRoam?.updateLibraries?.(e.libraries)}});function Ak(){const[{dataRequests:t},e]=Hn(),[n,{on:o,off:s}]=It(!1),i=Ok(c=>e(d=>c),[e]);return u.jsxs(u.Fragment,{children:[u.jsx(qi,{title:"Data Requests",description:"Choose which items to sync from Zotero",rightElement:u.jsx(Rk,{className:$.TEXT_SMALL,icon:t.length==0?"arrow-right":null,intent:"warning",minimal:!0,onClick:o,text:t.length==0?"Add request":"Edit"}),children:t.map(c=>u.jsx(ik,{request:c},c.name))}),u.jsx(jk,{className:"zr-data-requests-dialog",isOpen:n,onClose:s,children:u.jsx(kk,{closeDialog:s,dataRequests:t,updateRequests:i})})]})}var Jv={exports:{}};/*! For license information please see badge.bundle.js.LICENSE.txt */(function(t,e){(function(n,o){t.exports=o()})(self,()=>(()=>{var n={184:(c,d)=>{var f;(function(){var m={}.hasOwnProperty;function p(){for(var g=[],b=0;b<arguments.length;b++){var v=arguments[b];if(v){var w=typeof v;if(w==="string"||w==="number")g.push(v);else if(Array.isArray(v)){if(v.length){var S=p.apply(null,v);S&&g.push(S)}}else if(w==="object")if(v.toString===Object.prototype.toString)for(var T in v)m.call(v,T)&&v[T]&&g.push(T);else g.push(v.toString())}}return g.join(" ")}c.exports?(p.default=p,c.exports=p):(f=function(){return p}.apply(d,[]))===void 0||(c.exports=f)})()},180:(c,d,f)=>{f.d(d,{Z:()=>g});var m=f(645),p=f.n(m)()(function(b){return b[1]});p.push([c.id,"@import url(https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&display=swap);"]),p.push([c.id,'@font-face{font-family:scite-icons;font-style:normal;font-weight:400;src:url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.eot?v=5);src:url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.eot?v=5#iefix) format("embedded-opentype"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.woff2?v=5) format("woff2"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.woff?v=5) format("woff"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.ttf?v=5) format("truetype"),url(https://cdn.scite.ai/assets/fonts/scite-icons/scite-icons.svg?v=5#fontello) format("svg")}.Icon__icon___rkFdu{speak:none;font-family:scite-icons!important;font-style:normal!important;font-variant:normal!important;font-weight:400!important;line-height:1.5!important;text-transform:none!important}.Icon__unclassified___KG7dh:before{color:#828179;content:"\\e80a"}.Icon__contrasting___XemUp:before{color:#0062ff;content:"\\e80a"}.Icon__mentioning___eZSXr:before{color:#393f43;content:"\\e902"}.Icon__supporting___6A01H:before{color:#26a65b;content:"\\e903"}.Icon__retractions___\\+fJ\\+N:before{color:#ff3b30;content:"\\e901"}.Icon__notices___DbL2K:before{color:#82807d;content:"\\e90a"}.Icon__publications___3dd2q:before{color:#82807d;content:"\\e90b"}.Icon__smallIcon___3rDRZ{line-height:1rem!important}.Icon__openingArrow___pSL8O:before{color:#82807d;content:"\\e922"}.Icon__closingCaret___EMT7i:before{color:#82807d;content:"\\e925"}.Count__count___VwSFw{display:flex;font-size:14.5px}.Count__label___UClje{display:inline-block;margin-right:12px;text-transform:capitalize;width:82px}.Count__smallLabel___E3KvK{margin-right:6px;text-transform:capitalize}.Count__iconCountWrapper___CTSi2{box-sizing:border-box;display:inline-block}.Count__sectionTallyIconCountWrapper___lTlUR{box-sizing:border-box;display:flex}.Count__expandedIconCount___c3tc2{align-items:center;display:inline-flex;justify-content:space-between;width:100%}.Count__number___4oBqJ{margin-left:8px}.Count__smallNumber___wi6E7{margin-left:6px}.Count__horizontal___wp4Sz{border-left:1px solid #cfcfcf;padding:4px 8px}.Count__horizontal___wp4Sz:first-child{border-left:none}.Count__horizontal___wp4Sz>.Count__label___UClje{width:auto}.Count__horizontal___wp4Sz>.Count__sectionTallyIconCountWrapper___lTlUR>.Count__label___UClje{vertical-align:middle;width:auto}.Count__small___kecST{font-size:10px;padding:2px 4px}.Tally__tally___wF-n7 *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Tally__tally___wF-n7{background-color:#fff;color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;opacity:0;padding:8px 12px 0 8px;pointer-events:none;transition:all .2s ease-in-out;will-change:opacity,background-color}.Tally__badgeTally___AkCwi{border-radius:8px 0 0 0;padding-bottom:8px}.Tally__horizontal___TYyqc{flex-direction:row;height:100%;padding:0 8px}.Tally__show___EesAt{opacity:1;pointer-events:auto}.Tally__tally___wF-n7:hover{background-color:#f4f4f4}.Tally__logo___k79zv{display:block;margin-bottom:8px;max-width:4em;width:4em}.Tally__logoSmall___JZuyy{max-width:3em;padding-left:4px;width:3em}.Tally__small___lrym1{padding:0 4px}.Tally__forceCollapse___4k5aa{display:none}.HideableTally__tally___TXiqB *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.HideableTally__tally___TXiqB{background-color:#fff;color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;transition:all .2s ease-in-out;will-change:opacity,background-color}.HideableTally__tally___TXiqB:hover{background-color:#f4f4f4}.HideableTally__hideContainer___w5Wlj{align-items:center;color:#82807d;display:flex;font-size:12px;padding-left:8px;z-index:1}.HideableTally__logoSingleLetter___OwmJA{max-width:1em;width:1em}.HideableTally__logoContainer___kXnxF{align-items:center;display:flex;padding-right:8px}.HideableTally__openingArrow___yBpbp{color:#82807d;font-size:16px;font-weight:600;margin-right:4px}.HideableTally__closingArrow___pKIyO{color:#82807d;display:block;font-size:16px;font-weight:600;max-width:1em;width:1em}.SectionIcon__sectionIcon___nqPTw{speak:none;display:inline-block!important;font-style:normal!important;font-variant:normal!important;font-weight:400!important;line-height:1.5!important;margin-right:5px!important}.SectionIcon__sectionIcon___nqPTw:before{border-radius:4px;color:#fff;display:inline-block!important;padding:2px 4px;text-align:center;transform:scale(1);width:12px}.SectionIcon__introduction___uhUFG:before{background:#002ab2;content:"I"}.SectionIcon__methods___RVooU:before{background:#0036e5;content:"M"}.SectionIcon__results___1k9LI:before{background:#0062ff;content:"R"}.SectionIcon__discussion___Qeyb0:before{background:#66a3ff;content:"D"}.SectionIcon__other___uF\\+vV:before{background:#9ec4f0;content:"O"}.SectionIcon__smallSectionIcon___nCjHN{line-height:1!important}.SectionTally__sectionTallyWidget___aaCj5 *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.SectionTally__sectionTallyWidget___aaCj5{padding:8px}.SectionTally__sectionTallyWidget___aaCj5:hover{background-color:#f4f4f4!important}.SectionTally__sectionTallyWrapper___nwj2j{align-items:center;display:flex}.SectionTally__tally___es9p7{color:#0e1d1a;cursor:pointer;display:flex;flex-direction:column;font-family:IBM Plex Sans,sans-serif;font-size:16px;line-height:1.5;opacity:0;padding-bottom:0;padding-right:12px;pointer-events:none;transition:all .2s ease-in-out;will-change:opacity,background-color}.SectionTally__badgeTally___ZYqar{border-radius:8px 0 0 0;padding-bottom:8px}.SectionTally__horizontal___-hgL\\+{flex-direction:row;height:100%;padding:0 8px}.SectionTally__show___wciqp{opacity:1;pointer-events:auto}.SectionTally__logo___pEojg{display:block;margin-bottom:8px;max-width:4em;width:4em}.SectionTally__logoSmall___yzxV\\+{max-width:3em;padding-left:4px;width:3em}.SectionTally__small___QBk26{padding:0 4px}.SectionTally__forceCollapse___MexwG{display:none}.SectionTally__chartSubheading___tm7gz{font-family:IBM Plex Sans,sans-serif;font-size:12px;margin-top:4px;text-align:center;width:140px}.SectionTally__chartLabel___Nm4F\\+{display:block;font-weight:600}',""]);const g=p},717:(c,d,f)=>{f.d(d,{Z:()=>g});var m=f(645),p=f.n(m)()(function(b){return b[1]});p.push([c.id,`.AT5rL7aTm8KKajD1LMmpXg\\=\\= {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 16px;

    opacity: 0;
    pointer-events: none;
    will-change: opacity;
    transition: opacity 200ms ease-in-out;

    padding: 16px;

    border: 1px solid #ebebeb;
    border-radius: 8px;
    background-color: white;
    box-shadow: 0px 0px 37px 0px rgba(0,0,0,0.05);

    z-index: 9999;

    width: 250px;
    height: auto;

    cursor: pointer;
}

._2Xtymibu3VEV-gq1N5m\\+aA\\=\\= {
    opacity: 1;
    pointer-events: auto;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:before {
	top: 100%;
	left: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-top-color: #FFFFFF;
	border-width: 10px;
	margin-left: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="top"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-top-color: #ebebeb;
	border-width: 11px;
	margin-left: -11px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:before {
	left: 100%;
	top: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-left-color: #ffffff;
	border-width: 10px;
	margin-top: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="left"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-left-color: #ebebeb;
	border-width: 11px;
	margin-top: -11px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:before {
	right: 100%;
	top: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-right-color: #ffffff;
	border-width: 10px;
	margin-top: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="right"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-right-color: #ebebeb;
	border-width: 11px;
	margin-top: -11px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:after, .AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:before {
	bottom: 100%;
	left: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:after {
	border-color: rgba(255, 255, 255, 0);
	border-bottom-color: #FFFFFF;
	border-width: 10px;
	margin-left: -10px;
}

.AT5rL7aTm8KKajD1LMmpXg\\=\\=[data-placement="bottom"]:before {
	border-color: rgba(235, 235, 235, 0);
	border-bottom-color: #ebebeb;
	border-width: 11px;
	margin-left: -11px;
}

.poEjDAx2EewNn\\+kdnuCNbw\\=\\= {
    /* So it doesn't get wider than the badge itself
     * based on the width of the container */
}

.MlC\\+r-CmnNCcLkgYD8Dr3A\\=\\= {
    font-size: 14px;
}


.JqOPSu81MQ6f4Zf9z\\+kqGA\\=\\= {
    line-height: 1.5;
}

.GPqI5vpEM4VpfAAz4n7HHw\\=\\= {
    display: inline-block;
    margin-top: 0.5rem;
}

.-hEUP2QMiuX6a9sr7dC-lw\\=\\= {
	margin: 0.5rem 0;
	font-weight: bold;
}

.LzVcQqdJWiY7N8-Sq-TVuQ\\=\\= {
    display: inline-block;
}

.VbAViV4Slh84iH9X2erp\\+w\\=\\= {
	display: inline;
}

.f3QM6zcZemgDMSOwqIK2TA\\=\\= {
    display: block;
	margin: 0.5rem 0;
	margin-left: 1rem;
}

.bcxXMmw49C9aDY85vGYeXQ\\=\\= {
    color: #828179;
}

.lrdLQN2-BBgxsMDjSuuRzA\\=\\= {
    font-weight: bold;
    color: black;
}

.sUhEpXXzA4dizL2jxbvHFA\\=\\= {
    text-decoration: none;
    color: inherit;
    font-weight: inherit;
    transition: 200ms opacity ease-in-out;
}

.sUhEpXXzA4dizL2jxbvHFA\\=\\=:hover, .sUhEpXXzA4dizL2jxbvHFA\\=\\=:active {
    opacity: 0.8;
}

._13xrsxGwhLy89Cqv\\+5JjQw\\=\\= {
    display: inline-block;
    background-color: #0062FF;

    border-radius: 6px;

    padding: 6px 12px;
	margin-top: 12px;

    color: white;
    text-decoration: none;

    transition: background-color 200ms ease-in-out;
}

._13xrsxGwhLy89Cqv\\+5JjQw\\=\\=:hover {
    background-color: #4da3ff;

    /* For (a) site(s) that specifies a:hover color to be inherit */
    color: white;

}

._80i\\+8Z8J94Dfk-D9w-MGTw\\=\\= {
  display: block;
  width: 5em;
}

.WtCeh9Ck5GR\\+4htw\\+R1oCg\\=\\= {
	display: block;
	margin: 0.5rem 0;
}


.V5f0vIfUVJ2Syht6KzU80Q\\=\\= {
	color: #D84215;
	font-weight: bold;
}

.AvwIr2RDj3wSP30wVV5UDw\\=\\= {
	color: black;
	font-weight: bold;
}
`,""]),p.locals={tooltip:"AT5rL7aTm8KKajD1LMmpXg==",tooltipShow:"_2Xtymibu3VEV-gq1N5m+aA==",reference:"poEjDAx2EewNn+kdnuCNbw==",tooltipContent:"MlC+r-CmnNCcLkgYD8Dr3A==",tally:"JqOPSu81MQ6f4Zf9z+kqGA==",tallyCounts:"GPqI5vpEM4VpfAAz4n7HHw==",tallyCount:"-hEUP2QMiuX6a9sr7dC-lw==",labels:"LzVcQqdJWiY7N8-Sq-TVuQ==",noticeLabel:"VbAViV4Slh84iH9X2erp+w==",label:"f3QM6zcZemgDMSOwqIK2TA==",message:"bcxXMmw49C9aDY85vGYeXQ==",bold:"lrdLQN2-BBgxsMDjSuuRzA==",link:"sUhEpXXzA4dizL2jxbvHFA==",button:"_13xrsxGwhLy89Cqv+5JjQw==",logo:"_80i+8Z8J94Dfk-D9w-MGTw==",slogan:"WtCeh9Ck5GR+4htw+R1oCg==",retractionsCopy:"V5f0vIfUVJ2Syht6KzU80Q==",noticeCopy:"AvwIr2RDj3wSP30wVV5UDw=="};const g=p},696:(c,d,f)=>{f.d(d,{Z:()=>g});var m=f(645),p=f.n(m)()(function(b){return b[1]});p.push([c.id,`.scite-badge {
    display: inline-block;
}

.scite-badge .scite-tally {
    border-radius: 8px;
    border: 1px solid #cfcfcf;
    min-height: 120px;

    box-sizing: border-box;
}

.scite-badge[data-show-labels='true'] .scite-tally {
}

.scite-badge[data-layout='horizontal'] .scite-tally {
    min-height: 0px;
    max-height: 32px;
}

.scite-badge:not([data-chart-type]) .scite-section-tally {
    border-radius: 8px;
    height: min-content;
    width: min-content;
    padding: 8px 0px 0px 8px;
    border: 1px solid #cfcfcf;
    box-sizing: border-box;
}

.scite-badge[data-section-tally-layout='horizontal'] .scite-section-tally {
    padding: 0px;
}
`,""]),p.locals={};const g=p},645:c=>{c.exports=function(d){var f=[];return f.toString=function(){return this.map(function(m){var p=d(m);return m[2]?"@media ".concat(m[2]," {").concat(p,"}"):p}).join("")},f.i=function(m,p,g){typeof m=="string"&&(m=[[null,m,""]]);var b={};if(g)for(var v=0;v<this.length;v++){var w=this[v][0];w!=null&&(b[w]=!0)}for(var S=0;S<m.length;S++){var T=[].concat(m[S]);g&&b[T[0]]||(p&&(T[2]?T[2]="".concat(p," and ").concat(T[2]):T[2]=p),f.push(T))}},f}},418:c=>{var d=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function p(g){if(g==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}c.exports=function(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de",Object.getOwnPropertyNames(g)[0]==="5")return!1;for(var b={},v=0;v<10;v++)b["_"+String.fromCharCode(v)]=v;if(Object.getOwnPropertyNames(b).map(function(S){return b[S]}).join("")!=="0123456789")return!1;var w={};return"abcdefghijklmnopqrst".split("").forEach(function(S){w[S]=S}),Object.keys(Object.assign({},w)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(g,b){for(var v,w,S=p(g),T=1;T<arguments.length;T++){for(var R in v=Object(arguments[T]))f.call(v,R)&&(S[R]=v[R]);if(d){w=d(v);for(var L=0;L<w.length;L++)m.call(v,w[L])&&(S[w[L]]=v[w[L]])}}return S}},448:(c,d,f)=>{var m=f(294),p=f(418),g=f(840);function b(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!m)throw Error(b(227));var v=new Set,w={};function S(r,a){T(r,a),T(r+"Capture",a)}function T(r,a){for(w[r]=a,r=0;r<a.length;r++)v.add(a[r])}var R=!(typeof window>"u"||window.document===void 0||window.document.createElement===void 0),L=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,Q={},ee={};function D(r,a,l,h,y,x,E){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=y,this.mustUseProperty=l,this.propertyName=r,this.type=a,this.sanitizeURL=x,this.removeEmptyString=E}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){A[r]=new D(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];A[a]=new D(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){A[r]=new D(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){A[r]=new D(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){A[r]=new D(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){A[r]=new D(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){A[r]=new D(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){A[r]=new D(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){A[r]=new D(r,5,!1,r.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function H(r){return r[1].toUpperCase()}function fe(r,a,l,h){var y=A.hasOwnProperty(a)?A[a]:null;(y!==null?y.type===0:!h&&2<a.length&&(a[0]==="o"||a[0]==="O")&&(a[1]==="n"||a[1]==="N"))||(function(x,E,O,j){if(E==null||function(U,oe,ke,he){if(ke!==null&&ke.type===0)return!1;switch(typeof oe){case"function":case"symbol":return!0;case"boolean":return!he&&(ke!==null?!ke.acceptsBooleans:(U=U.toLowerCase().slice(0,5))!=="data-"&&U!=="aria-");default:return!1}}(x,E,O,j))return!0;if(j)return!1;if(O!==null)switch(O.type){case 3:return!E;case 4:return E===!1;case 5:return isNaN(E);case 6:return isNaN(E)||1>E}return!1}(a,l,y,h)&&(l=null),h||y===null?function(x){return!!q.call(ee,x)||!q.call(Q,x)&&(L.test(x)?ee[x]=!0:(Q[x]=!0,!1))}(a)&&(l===null?r.removeAttribute(a):r.setAttribute(a,""+l)):y.mustUseProperty?r[y.propertyName]=l===null?y.type!==3&&"":l:(a=y.attributeName,h=y.attributeNamespace,l===null?r.removeAttribute(a):(l=(y=y.type)===3||y===4&&l===!0?"":""+l,h?r.setAttributeNS(h,a,l):r.setAttribute(a,l))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(P,H);A[a]=new D(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(P,H);A[a]=new D(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(P,H);A[a]=new D(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){A[r]=new D(r,1,!1,r.toLowerCase(),null,!1,!1)}),A.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){A[r]=new D(r,1,!1,r.toLowerCase(),null,!0,!0)});var me=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ge=60103,ye=60106,Y=60107,ve=60108,ie=60114,we=60109,ze=60110,We=60112,Le=60113,Je=60120,ft=60115,I=60116,M=60121,G=60128,ue=60129,ae=60130,W=60131;if(typeof Symbol=="function"&&Symbol.for){var te=Symbol.for;ge=te("react.element"),ye=te("react.portal"),Y=te("react.fragment"),ve=te("react.strict_mode"),ie=te("react.profiler"),we=te("react.provider"),ze=te("react.context"),We=te("react.forward_ref"),Le=te("react.suspense"),Je=te("react.suspense_list"),ft=te("react.memo"),I=te("react.lazy"),M=te("react.block"),te("react.scope"),G=te("react.opaque.id"),ue=te("react.debug_trace_mode"),ae=te("react.offscreen"),W=te("react.legacy_hidden")}var Ce,Re=typeof Symbol=="function"&&Symbol.iterator;function Ee(r){return r===null||typeof r!="object"?null:typeof(r=Re&&r[Re]||r["@@iterator"])=="function"?r:null}function ot(r){if(Ce===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ce=a&&a[1]||""}return`
`+Ce+r}var Tt=!1;function Gt(r,a){if(!r||Tt)return"";Tt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(j){var h=j}Reflect.construct(r,[],a)}else{try{a.call()}catch(j){h=j}r.call(a.prototype)}else{try{throw Error()}catch(j){h=j}r()}}catch(j){if(j&&h&&typeof j.stack=="string"){for(var y=j.stack.split(`
`),x=h.stack.split(`
`),E=y.length-1,O=x.length-1;1<=E&&0<=O&&y[E]!==x[O];)O--;for(;1<=E&&0<=O;E--,O--)if(y[E]!==x[O]){if(E!==1||O!==1)do if(E--,0>--O||y[E]!==x[O])return`
`+y[E].replace(" at new "," at ");while(1<=E&&0<=O);break}}}finally{Tt=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?ot(r):""}function Rt(r){switch(r.tag){case 5:return ot(r.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 2:case 15:return Gt(r.type,!1);case 11:return Gt(r.type.render,!1);case 22:return Gt(r.type._render,!1);case 1:return Gt(r.type,!0);default:return""}}function xt(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Y:return"Fragment";case ye:return"Portal";case ie:return"Profiler";case ve:return"StrictMode";case Le:return"Suspense";case Je:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case ze:return(r.displayName||"Context")+".Consumer";case we:return(r._context.displayName||"Context")+".Provider";case We:var a=r.render;return a=a.displayName||a.name||"",r.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case ft:return xt(r.type);case M:return xt(r._render);case I:a=r._payload,r=r._init;try{return xt(r(a))}catch{}}return null}function lt(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return""}}function Jt(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function mt(r){r._valueTracker||(r._valueTracker=function(a){var l=Jt(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&h!==void 0&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,E=h.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return x.call(this)},set:function(O){y=""+O,E.call(this,O)}}),Object.defineProperty(a,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}(r))}function _n(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return r&&(h=Jt(r)?r.checked?"true":"false":r.value),(r=h)!==l&&(a.setValue(r),!0)}function un(r){if((r=r||(typeof document<"u"?document:void 0))===void 0)return null;try{return r.activeElement||r.body}catch{return r.body}}function vn(r,a){var l=a.checked;return p({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function kn(r,a){var l=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;l=lt(a.value!=null?a.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Cr(r,a){(a=a.checked)!=null&&fe(r,"checked",a,!1)}function dn(r,a){Cr(r,a);var l=lt(a.value),h=a.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset")return void r.removeAttribute("value");a.hasOwnProperty("value")?ur(r,a.type,l):a.hasOwnProperty("defaultValue")&&ur(r,a.type,lt(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Er(r,a,l){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,l||a===r.value||(r.value=a),r.defaultValue=a}(l=r.name)!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function ur(r,a,l){a==="number"&&un(r.ownerDocument)===r||(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}function Vn(r,a){return r=p({children:void 0},a),(a=function(l){var h="";return m.Children.forEach(l,function(y){y!=null&&(h+=y)}),h}(a.children))&&(r.children=a),r}function Sr(r,a,l,h){if(r=r.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<r.length;l++)y=a.hasOwnProperty("$"+r[l].value),r[l].selected!==y&&(r[l].selected=y),y&&h&&(r[l].defaultSelected=!0)}else{for(l=""+lt(l),a=null,y=0;y<r.length;y++){if(r[y].value===l)return r[y].selected=!0,void(h&&(r[y].defaultSelected=!0));a!==null||r[y].disabled||(a=r[y])}a!==null&&(a.selected=!0)}}function en(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(b(91));return p({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ta(r,a){var l=a.value;if(l==null){if(l=a.children,a=a.defaultValue,l!=null){if(a!=null)throw Error(b(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(b(93));l=l[0]}a=l}a==null&&(a=""),l=a}r._wrapperState={initialValue:lt(l)}}function Pa(r,a){var l=lt(a.value),h=lt(a.defaultValue);l!=null&&((l=""+l)!==r.value&&(r.value=l),a.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function Vr(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}var na="http://www.w3.org/1999/xhtml";function wn(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dn(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?wn(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var dr,Tr,Xr=(Tr=function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for((dr=dr||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=dr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,l,h){MSApp.execUnsafeLocalFunction(function(){return Tr(r,a)})}:Tr);function Qr(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3)return void(l.nodeValue=a)}r.textContent=a}var _r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ms=["Webkit","ms","Moz","O"];function z(r,a,l){return a==null||typeof a=="boolean"||a===""?"":l||typeof a!="number"||a===0||_r.hasOwnProperty(r)&&_r[r]?(""+a).trim():a+"px"}function ne(r,a){for(var l in r=r.style,a)if(a.hasOwnProperty(l)){var h=l.indexOf("--")===0,y=z(l,a[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,y):r[l]=y}}Object.keys(_r).forEach(function(r){Ms.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),_r[a]=_r[r]})});var Se=p({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function De(r,a){if(a){if(Se[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(b(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(b(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(b(61))}if(a.style!=null&&typeof a.style!="object")throw Error(b(62))}}function be(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(r){return(r=r.target||r.srcElement||window).correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var He=null,Ae=null,$e=null;function at(r){if(r=Ol(r)){if(typeof He!="function")throw Error(b(280));var a=r.stateNode;a&&(a=ku(a),He(r.stateNode,r.type,a))}}function At(r){Ae?$e?$e.push(r):$e=[r]:Ae=r}function pt(){if(Ae){var r=Ae,a=$e;if($e=Ae=null,at(r),a)for(r=0;r<a.length;r++)at(a[r])}}function Dt(r,a){return r(a)}function _t(r,a,l,h,y){return r(a,l,h,y)}function tn(){}var wt=Dt,nn=!1,fn=!1;function kr(){Ae===null&&$e===null||(tn(),pt())}function Mn(r,a){var l=r.stateNode;if(l===null)return null;var h=ku(l);if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(h=!((r=r.type)==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(b(231,a,typeof l));return l}var fr=!1;if(R)try{var On={};Object.defineProperty(On,"passive",{get:function(){fr=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{fr=!1}function Xn(r,a,l,h,y,x,E,O,j){var U=Array.prototype.slice.call(arguments,3);try{a.apply(l,U)}catch(oe){this.onError(oe)}}var pn=!1,Rn=null,bo=!1,Bs=null,hu={onError:function(r){pn=!0,Rn=r}};function mu(r,a,l,h,y,x,E,O,j){pn=!1,Rn=null,Xn.apply(hu,arguments)}function Kr(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do 1026&(a=r).flags&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function fl(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate)!==null&&(a=r.memoizedState),a!==null)return a.dehydrated}return null}function Na(r){if(Kr(r)!==r)throw Error(b(188))}function zs(r,a){for(var l=r.alternate;a!==null;){if(a===r||a===l)return!0;a=a.return}return!1}var dt,La,pl,hl,$s=!1,Bn=[],Or=null,Rr=null,jr=null,Ir=new Map,vo=new Map,wo=[],Da="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ma(r,a,l,h,y){return{blockedOn:r,domEventName:a,eventSystemFlags:16|l,nativeEvent:y,targetContainers:[h]}}function Fs(r,a){switch(r){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Ir.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(a.pointerId)}}function ra(r,a,l,h,y,x){return r===null||r.nativeEvent!==x?(r=Ma(a,l,h,y,x),a!==null&&(a=Ol(a))!==null&&La(a),r):(r.eventSystemFlags|=h,a=r.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),r)}function Us(r){var a=ia(r.target);if(a!==null){var l=Kr(a);if(l!==null){if((a=l.tag)===13){if((a=fl(l))!==null)return r.blockedOn=a,void hl(r.lanePriority,function(){g.unstable_runWithPriority(r.priority,function(){pl(l)})})}else if(a===3&&l.stateNode.hydrate)return void(r.blockedOn=l.tag===3?l.stateNode.containerInfo:null)}}r.blockedOn=null}function Ba(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Be(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(l!==null)return(a=Ol(l))!==null&&La(a),r.blockedOn=l,!1;a.shift()}return!0}function qs(r,a,l){Ba(r)&&l.delete(a)}function ml(){for($s=!1;0<Bn.length;){var r=Bn[0];if(r.blockedOn!==null){(r=Ol(r.blockedOn))!==null&&dt(r);break}for(var a=r.targetContainers;0<a.length;){var l=Be(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(l!==null){r.blockedOn=l;break}a.shift()}r.blockedOn===null&&Bn.shift()}Or!==null&&Ba(Or)&&(Or=null),Rr!==null&&Ba(Rr)&&(Rr=null),jr!==null&&Ba(jr)&&(jr=null),Ir.forEach(qs),vo.forEach(qs)}function Qn(r,a){r.blockedOn===a&&(r.blockedOn=null,$s||($s=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,ml)))}function oa(r){function a(y){return Qn(y,r)}if(0<Bn.length){Qn(Bn[0],r);for(var l=1;l<Bn.length;l++){var h=Bn[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Or!==null&&Qn(Or,r),Rr!==null&&Qn(Rr,r),jr!==null&&Qn(jr,r),Ir.forEach(a),vo.forEach(a),l=0;l<wo.length;l++)(h=wo[l]).blockedOn===r&&(h.blockedOn=null);for(;0<wo.length&&(l=wo[0]).blockedOn===null;)Us(l),l.blockedOn===null&&wo.shift()}function xo(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var Co={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionend:xo("Transition","TransitionEnd")},aa={},za={};function sa(r){if(aa[r])return aa[r];if(!Co[r])return r;var a,l=Co[r];for(a in l)if(l.hasOwnProperty(a)&&a in za)return aa[r]=l[a];return r}R&&(za=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);var $a=sa("animationend"),Fa=sa("animationiteration"),gl=sa("animationstart"),Hs=sa("transitionend"),_=new Map,C=new Map,k=["abort","abort",$a,"animationEnd",Fa,"animationIteration",gl,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Hs,"transitionEnd","waiting","waiting"];function N(r,a){for(var l=0;l<r.length;l+=2){var h=r[l],y=r[l+1];y="on"+(y[0].toUpperCase()+y.slice(1)),C.set(h,a),_.set(h,y),S(y,[h])}}(0,g.unstable_now)();var B=8;function K(r){if(1&r)return B=15,1;if(2&r)return B=14,2;if(4&r)return B=13,4;var a=24&r;return a!==0?(B=12,a):32&r?(B=11,32):(a=192&r)!=0?(B=10,a):256&r?(B=9,256):(a=3584&r)!=0?(B=8,a):4096&r?(B=7,4096):(a=4186112&r)!=0?(B=6,a):(a=62914560&r)!=0?(B=5,a):67108864&r?(B=4,67108864):134217728&r?(B=3,134217728):(a=805306368&r)!=0?(B=2,a):1073741824&r?(B=1,1073741824):(B=8,r)}function Z(r,a){var l=r.pendingLanes;if(l===0)return B=0;var h=0,y=0,x=r.expiredLanes,E=r.suspendedLanes,O=r.pingedLanes;if(x!==0)h=x,y=B=15;else if((x=134217727&l)!=0){var j=x&~E;j!==0?(h=K(j),y=B):(O&=x)!=0&&(h=K(O),y=B)}else(x=l&~E)!=0?(h=K(x),y=B):O!==0&&(h=K(O),y=B);if(h===0)return 0;if(h=l&((0>(h=31-Fe(h))?0:1<<h)<<1)-1,a!==0&&a!==h&&(a&E)==0){if(K(a),y<=B)return a;B=y}if((a=r.entangledLanes)!==0)for(r=r.entanglements,a&=h;0<a;)y=1<<(l=31-Fe(a)),h|=r[l],a&=~y;return h}function le(r){return(r=-1073741825&r.pendingLanes)!=0?r:1073741824&r?1073741824:0}function J(r,a){switch(r){case 15:return 1;case 14:return 2;case 12:return(r=re(24&~a))===0?J(10,a):r;case 10:return(r=re(192&~a))===0?J(8,a):r;case 8:return(r=re(3584&~a))===0&&(r=re(4186112&~a))===0&&(r=512),r;case 2:return(a=re(805306368&~a))===0&&(a=268435456),a}throw Error(b(358,r))}function re(r){return r&-r}function xe(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function de(r,a,l){r.pendingLanes|=a;var h=a-1;r.suspendedLanes&=h,r.pingedLanes&=h,(r=r.eventTimes)[a=31-Fe(a)]=l}var Fe=Math.clz32?Math.clz32:function(r){return r===0?32:31-(Pe(r)/Ve|0)|0},Pe=Math.log,Ve=Math.LN2,Ke=g.unstable_UserBlockingPriority,Ue=g.unstable_runWithPriority,nt=!0;function et(r,a,l,h){nn||tn();var y=Qe,x=nn;nn=!0;try{_t(y,r,a,l,h)}finally{(nn=x)||kr()}}function Xe(r,a,l,h){Ue(Ke,Qe.bind(null,r,a,l,h))}function Qe(r,a,l,h){var y;if(nt)if((y=(4&a)==0)&&0<Bn.length&&-1<Da.indexOf(r))r=Ma(null,r,a,l,h),Bn.push(r);else{var x=Be(r,a,l,h);if(x===null)y&&Fs(r,h);else{if(y){if(-1<Da.indexOf(r))return r=Ma(x,r,a,l,h),void Bn.push(r);if(function(E,O,j,U,oe){switch(O){case"focusin":return Or=ra(Or,E,O,j,U,oe),!0;case"dragenter":return Rr=ra(Rr,E,O,j,U,oe),!0;case"mouseover":return jr=ra(jr,E,O,j,U,oe),!0;case"pointerover":var ke=oe.pointerId;return Ir.set(ke,ra(Ir.get(ke)||null,E,O,j,U,oe)),!0;case"gotpointercapture":return ke=oe.pointerId,vo.set(ke,ra(vo.get(ke)||null,E,O,j,U,oe)),!0}return!1}(x,r,a,l,h))return;Fs(r,h)}uh(r,a,h,null,l)}}}function Be(r,a,l,h){var y=Te(h);if((y=ia(y))!==null){var x=Kr(y);if(x===null)y=null;else{var E=x.tag;if(E===13){if((y=fl(x))!==null)return y;y=null}else if(E===3){if(x.stateNode.hydrate)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null)}}return uh(r,a,h,y,l),null}var _e=null,qe=null,Me=null;function st(){if(Me)return Me;var r,a,l=qe,h=l.length,y="value"in _e?_e.value:_e.textContent,x=y.length;for(r=0;r<h&&l[r]===y[r];r++);var E=h-r;for(a=1;a<=E&&l[h-a]===y[x-a];a++);return Me=y.slice(r,1<a?1-a:void 0)}function gt(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode)===0&&a===13&&(r=13):r=a,r===10&&(r=13),32<=r||r===13?r:0}function it(){return!0}function jt(){return!1}function rt(r){function a(l,h,y,x,E){for(var O in this._reactName=l,this._targetInst=y,this.type=h,this.nativeEvent=x,this.target=E,this.currentTarget=null,r)r.hasOwnProperty(O)&&(l=r[O],this[O]=l?l(x):x[O]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?it:jt,this.isPropagationStopped=jt,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=it)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=it)},persist:function(){},isPersistent:it}),a}var Vt,$t,kt,yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ht=rt(yt),Ct=p({},yt,{view:0,detail:0}),Ot=rt(Ct),Et=p({},Ct,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==kt&&(kt&&r.type==="mousemove"?(Vt=r.screenX-kt.screenX,$t=r.screenY-kt.screenY):$t=Vt=0,kt=r),Vt)},movementY:function(r){return"movementY"in r?r.movementY:$t}}),Nt=rt(Et),an=rt(p({},Et,{dataTransfer:0})),xn=rt(p({},Ct,{relatedTarget:0})),hn=rt(p({},yt,{animationName:0,elapsedTime:0,pseudoElement:0})),Ar=p({},yt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Oe=rt(Ar),Wr=rt(p({},yt,{data:0})),Vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qs(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):!!(r=Eo[r])&&!!a[r]}function Gr(){return Qs}var Ua=p({},Ct,{key:function(r){if(r.key){var a=Vs[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=gt(r))===13?"Enter":String.fromCharCode(r):r.type==="keydown"||r.type==="keyup"?Xs[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(r){return r.type==="keypress"?gt(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gt(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),So=rt(Ua),Yr=rt(p({},Et,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Kn=rt(p({},Ct,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr})),Zr=rt(p({},yt,{propertyName:0,elapsedTime:0,pseudoElement:0})),Jr=p({},Et,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=rt(Jr),yl=[9,13,27,32],Ha=R&&"CompositionEvent"in window,eo=null;R&&"documentMode"in document&&(eo=document.documentMode);var bl=R&&"TextEvent"in window&&!eo,Ks=R&&(!Ha||eo&&8<eo&&11>=eo),Ws=" ",Gs=!1;function vl(r,a){switch(r){case"keyup":return yl.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(r){return typeof(r=r.detail)=="object"&&"data"in r?r.data:null}var Pr=!1,xl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!xl[r.type]:a==="textarea"}function Xp(r,a,l,h){At(h),0<(a=Sl(a,"onChange")).length&&(l=new ht("onChange","change",null,l,h),r.push({event:l,listeners:a}))}var Cl=null,Ys=null;function P0(r){ah(r,0)}function El(r){if(_n(ni(r)))return r}function N0(r,a){if(r==="change")return a}var Qp=!1;if(R){var gu;if(R){var yu="oninput"in document;if(!yu){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),yu=typeof Kp.oninput=="function"}gu=yu}else gu=!1;Qp=gu&&(!document.documentMode||9<document.documentMode)}function Wp(){Cl&&(Cl.detachEvent("onpropertychange",Gp),Ys=Cl=null)}function Gp(r){if(r.propertyName==="value"&&El(Ys)){var a=[];if(Xp(a,Ys,r,Te(r)),r=P0,nn)r(a);else{nn=!0;try{Dt(r,a)}finally{nn=!1,kr()}}}}function L0(r,a,l){r==="focusin"?(Wp(),Ys=l,(Cl=a).attachEvent("onpropertychange",Gp)):r==="focusout"&&Wp()}function D0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return El(Ys)}function M0(r,a){if(r==="click")return El(a)}function B0(r,a){if(r==="input"||r==="change")return El(a)}var Wn=typeof Object.is=="function"?Object.is:function(r,a){return r===a&&(r!==0||1/r==1/a)||r!=r&&a!=a},z0=Object.prototype.hasOwnProperty;function Zs(r,a){if(Wn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++)if(!z0.call(a,l[h])||!Wn(r[l[h]],a[l[h]]))return!1;return!0}function Yp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Zp(r,a){var l,h=Yp(r);for(r=0;h;){if(h.nodeType===3){if(l=r+h.textContent.length,r<=a&&l>=a)return{node:h,offset:a-r};r=l}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Yp(h)}}function Jp(r,a){return!(!r||!a)&&(r===a||(!r||r.nodeType!==3)&&(a&&a.nodeType===3?Jp(r,a.parentNode):"contains"in r?r.contains(a):!!r.compareDocumentPosition&&!!(16&r.compareDocumentPosition(a))))}function eh(){for(var r=window,a=un();a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(!l)break;a=un((r=a.contentWindow).document)}return a}function bu(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var $0=R&&"documentMode"in document&&11>=document.documentMode,Va=null,vu=null,Js=null,wu=!1;function th(r,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wu||Va==null||Va!==un(h)||(h="selectionStart"in(h=Va)&&bu(h)?{start:h.selectionStart,end:h.selectionEnd}:{anchorNode:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset},Js&&Zs(Js,h)||(Js=h,0<(h=Sl(vu,"onSelect")).length&&(a=new ht("onSelect","select",null,a,l),r.push({event:a,listeners:h}),a.target=Va)))}N("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),N("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),N(k,2);for(var nh="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xu=0;xu<nh.length;xu++)C.set(nh[xu],0);T("onMouseEnter",["mouseout","mouseover"]),T("onMouseLeave",["mouseout","mouseover"]),T("onPointerEnter",["pointerout","pointerover"]),T("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ei));function oh(r,a,l){var h=r.type||"unknown-event";r.currentTarget=l,function(y,x,E,O,j,U,oe,ke,he){if(mu.apply(this,arguments),pn){if(!pn)throw Error(b(198));var Ie=Rn;pn=!1,Rn=null,bo||(bo=!0,Bs=Ie)}}(h,a,void 0,r),r.currentTarget=null}function ah(r,a){a=(4&a)!=0;for(var l=0;l<r.length;l++){var h=r[l],y=h.event;h=h.listeners;e:{var x=void 0;if(a)for(var E=h.length-1;0<=E;E--){var O=h[E],j=O.instance,U=O.currentTarget;if(O=O.listener,j!==x&&y.isPropagationStopped())break e;oh(y,O,U),x=j}else for(E=0;E<h.length;E++){if(j=(O=h[E]).instance,U=O.currentTarget,O=O.listener,j!==x&&y.isPropagationStopped())break e;oh(y,O,U),x=j}}}if(bo)throw r=Bs,bo=!1,Bs=null,r}function Mt(r,a){var l=gh(a),h=r+"__bubble";l.has(h)||(ch(a,r,2,!1),l.add(h))}var sh="_reactListening"+Math.random().toString(36).slice(2);function ih(r){r[sh]||(r[sh]=!0,v.forEach(function(a){rh.has(a)||lh(a,!1,r,null),lh(a,!0,r,null)}))}function lh(r,a,l,h){var y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,x=l;if(r==="selectionchange"&&l.nodeType!==9&&(x=l.ownerDocument),h!==null&&!a&&rh.has(r)){if(r!=="scroll")return;y|=2,x=h}var E=gh(x),O=r+"__"+(a?"capture":"bubble");E.has(O)||(a&&(y|=4),ch(x,r,y,a),E.add(O))}function ch(r,a,l,h){var y=C.get(a);switch(y===void 0?2:y){case 0:y=et;break;case 1:y=Xe;break;default:y=Qe}l=y.bind(null,a,l,r),y=void 0,!fr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),h?y!==void 0?r.addEventListener(a,l,{capture:!0,passive:y}):r.addEventListener(a,l,!0):y!==void 0?r.addEventListener(a,l,{passive:y}):r.addEventListener(a,l,!1)}function uh(r,a,l,h,y){var x=h;if(!(1&a)&&!(2&a)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var O=h.stateNode.containerInfo;if(O===y||O.nodeType===8&&O.parentNode===y)break;if(E===4)for(E=h.return;E!==null;){var j=E.tag;if((j===3||j===4)&&((j=E.stateNode.containerInfo)===y||j.nodeType===8&&j.parentNode===y))return;E=E.return}for(;O!==null;){if((E=ia(O))===null)return;if((j=E.tag)===5||j===6){h=x=E;continue e}O=O.parentNode}}h=h.return}(function(U,oe,ke){if(fn)return U();fn=!0;try{wt(U,oe,ke)}finally{fn=!1,kr()}})(function(){var U=x,oe=Te(l),ke=[];e:{var he=_.get(r);if(he!==void 0){var Ie=ht,Ye=r;switch(r){case"keypress":if(gt(l)===0)break e;case"keydown":case"keyup":Ie=So;break;case"focusin":Ye="focus",Ie=xn;break;case"focusout":Ye="blur",Ie=xn;break;case"beforeblur":case"afterblur":Ie=xn;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Nt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Kn;break;case $a:case Fa:case gl:Ie=hn;break;case Hs:Ie=Zr;break;case"scroll":Ie=Ot;break;case"wheel":Ie=qa;break;case"copy":case"cut":case"paste":Ie=Oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Yr}var Ze=(4&a)!=0,X=!Ze&&r==="scroll",F=Ze?he!==null?he+"Capture":null:he;Ze=[];for(var V,ce=U;ce!==null;){var pe=(V=ce).stateNode;if(V.tag===5&&pe!==null&&(V=pe,F!==null&&(pe=Mn(ce,F))!=null&&Ze.push(ti(ce,pe,V))),X)break;ce=ce.return}0<Ze.length&&(he=new Ie(he,Ye,null,l,oe),ke.push({event:he,listeners:Ze}))}}if(!(7&a)){if(Ie=r==="mouseout"||r==="pointerout",(!(he=r==="mouseover"||r==="pointerover")||(16&a)!=0||!(Ye=l.relatedTarget||l.fromElement)||!ia(Ye)&&!Ye[Ka])&&(Ie||he)&&(he=oe.window===oe?oe:(he=oe.ownerDocument)?he.defaultView||he.parentWindow:window,Ie?(Ie=U,(Ye=(Ye=l.relatedTarget||l.toElement)?ia(Ye):null)!==null&&(Ye!==(X=Kr(Ye))||Ye.tag!==5&&Ye.tag!==6)&&(Ye=null)):(Ie=null,Ye=U),Ie!==Ye)){if(Ze=Nt,pe="onMouseLeave",F="onMouseEnter",ce="mouse",r!=="pointerout"&&r!=="pointerover"||(Ze=Yr,pe="onPointerLeave",F="onPointerEnter",ce="pointer"),X=Ie==null?he:ni(Ie),V=Ye==null?he:ni(Ye),(he=new Ze(pe,ce+"leave",Ie,l,oe)).target=X,he.relatedTarget=V,pe=null,ia(oe)===U&&((Ze=new Ze(F,ce+"enter",Ye,l,oe)).target=V,Ze.relatedTarget=X,pe=Ze),X=pe,Ie&&Ye)e:{for(F=Ye,ce=0,V=Ze=Ie;V;V=Xa(V))ce++;for(V=0,pe=F;pe;pe=Xa(pe))V++;for(;0<ce-V;)Ze=Xa(Ze),ce--;for(;0<V-ce;)F=Xa(F),V--;for(;ce--;){if(Ze===F||F!==null&&Ze===F.alternate)break e;Ze=Xa(Ze),F=Xa(F)}Ze=null}else Ze=null;Ie!==null&&dh(ke,he,Ie,Ze,!1),Ye!==null&&X!==null&&dh(ke,X,Ye,Ze,!0)}if((Ie=(he=U?ni(U):window).nodeName&&he.nodeName.toLowerCase())==="select"||Ie==="input"&&he.type==="file")var tt=N0;else if(Vp(he))if(Qp)tt=B0;else{tt=D0;var Ne=L0}else(Ie=he.nodeName)&&Ie.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&(tt=M0);switch(tt&&(tt=tt(r,U))?Xp(ke,tt,l,oe):(Ne&&Ne(r,he,U),r==="focusout"&&(Ne=he._wrapperState)&&Ne.controlled&&he.type==="number"&&ur(he,"number",he.value)),Ne=U?ni(U):window,r){case"focusin":(Vp(Ne)||Ne.contentEditable==="true")&&(Va=Ne,vu=U,Js=null);break;case"focusout":Js=vu=Va=null;break;case"mousedown":wu=!0;break;case"contextmenu":case"mouseup":case"dragend":wu=!1,th(ke,l,oe);break;case"selectionchange":if($0)break;case"keydown":case"keyup":th(ke,l,oe)}var ct;if(Ha)e:{switch(r){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Pr?vl(r,l)&&(vt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(Ks&&l.locale!=="ko"&&(Pr||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Pr&&(ct=st()):(qe="value"in(_e=oe)?_e.value:_e.textContent,Pr=!0)),0<(Ne=Sl(U,vt)).length&&(vt=new Wr(vt,r,null,l,oe),ke.push({event:vt,listeners:Ne}),(ct||(ct=wl(l))!==null)&&(vt.data=ct))),(ct=bl?function(Ge,Lt){switch(Ge){case"compositionend":return wl(Lt);case"keypress":return Lt.which!==32?null:(Gs=!0,Ws);case"textInput":return(Ge=Lt.data)===Ws&&Gs?null:Ge;default:return null}}(r,l):function(Ge,Lt){if(Pr)return Ge==="compositionend"||!Ha&&vl(Ge,Lt)?(Ge=st(),Me=qe=_e=null,Pr=!1,Ge):null;switch(Ge){case"paste":default:return null;case"keypress":if(!(Lt.ctrlKey||Lt.altKey||Lt.metaKey)||Lt.ctrlKey&&Lt.altKey){if(Lt.char&&1<Lt.char.length)return Lt.char;if(Lt.which)return String.fromCharCode(Lt.which)}return null;case"compositionend":return Ks&&Lt.locale!=="ko"?null:Lt.data}}(r,l))&&0<(U=Sl(U,"onBeforeInput")).length&&(oe=new Wr("onBeforeInput","beforeinput",null,l,oe),ke.push({event:oe,listeners:U}),oe.data=ct)}ah(ke,a)})}function ti(r,a,l){return{instance:r,listener:a,currentTarget:l}}function Sl(r,a){for(var l=a+"Capture",h=[];r!==null;){var y=r,x=y.stateNode;y.tag===5&&x!==null&&(y=x,(x=Mn(r,l))!=null&&h.unshift(ti(r,x,y)),(x=Mn(r,a))!=null&&h.push(ti(r,x,y))),r=r.return}return h}function Xa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function dh(r,a,l,h,y){for(var x=a._reactName,E=[];l!==null&&l!==h;){var O=l,j=O.alternate,U=O.stateNode;if(j!==null&&j===h)break;O.tag===5&&U!==null&&(O=U,y?(j=Mn(l,x))!=null&&E.unshift(ti(l,j,O)):y||(j=Mn(l,x))!=null&&E.push(ti(l,j,O))),l=l.return}E.length!==0&&r.push({event:a,listeners:E})}function Tl(){}var Cu=null,Eu=null;function fh(r,a){switch(r){case"button":case"input":case"select":case"textarea":return!!a.autoFocus}return!1}function Su(r,a){return r==="textarea"||r==="option"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ph=typeof setTimeout=="function"?setTimeout:void 0,F0=typeof clearTimeout=="function"?clearTimeout:void 0;function Tu(r){(r.nodeType===1||r.nodeType===9&&(r=r.body)!=null)&&(r.textContent="")}function Qa(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break}return r}function hh(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}var _u=0,_l=Math.random().toString(36).slice(2),To="__reactFiber$"+_l,kl="__reactProps$"+_l,Ka="__reactContainer$"+_l,mh="__reactEvents$"+_l;function ia(r){var a=r[To];if(a)return a;for(var l=r.parentNode;l;){if(a=l[Ka]||l[To]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=hh(r);r!==null;){if(l=r[To])return l;r=hh(r)}return a}l=(r=l).parentNode}return null}function Ol(r){return!(r=r[To]||r[Ka])||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ni(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(b(33))}function ku(r){return r[kl]||null}function gh(r){var a=r[mh];return a===void 0&&(a=r[mh]=new Set),a}var Ou=[],Wa=-1;function _o(r){return{current:r}}function Ft(r){0>Wa||(r.current=Ou[Wa],Ou[Wa]=null,Wa--)}function Ht(r,a){Wa++,Ou[Wa]=r.current,r.current=a}var ko={},mn=_o(ko),jn=_o(!1),la=ko;function Ga(r,a){var l=r.type.contextTypes;if(!l)return ko;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var y,x={};for(y in l)x[y]=a[y];return h&&((r=r.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=x),x}function zn(r){return r.childContextTypes!=null}function Ru(){Ft(jn),Ft(mn)}function yh(r,a,l){if(mn.current!==ko)throw Error(b(168));Ht(mn,a),Ht(jn,l)}function bh(r,a,l){var h=r.stateNode;if(r=a.childContextTypes,typeof h.getChildContext!="function")return l;for(var y in h=h.getChildContext())if(!(y in r))throw Error(b(108,xt(a)||"Unknown",y));return p({},l,h)}function Rl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ko,la=mn.current,Ht(mn,r),Ht(jn,jn.current),!0}function vh(r,a,l){var h=r.stateNode;if(!h)throw Error(b(169));l?(r=bh(r,a,la),h.__reactInternalMemoizedMergedChildContext=r,Ft(jn),Ft(mn),Ht(mn,r)):Ft(jn),Ht(jn,l)}var ju=null,ca=null,U0=g.unstable_runWithPriority,Iu=g.unstable_scheduleCallback,Au=g.unstable_cancelCallback,q0=g.unstable_shouldYield,wh=g.unstable_requestPaint,Pu=g.unstable_now,H0=g.unstable_getCurrentPriorityLevel,jl=g.unstable_ImmediatePriority,xh=g.unstable_UserBlockingPriority,Ch=g.unstable_NormalPriority,Eh=g.unstable_LowPriority,Sh=g.unstable_IdlePriority,Nu={},V0=wh!==void 0?wh:function(){},to=null,Il=null,Lu=!1,Th=Pu(),gn=1e4>Th?Pu:function(){return Pu()-Th};function Ya(){switch(H0()){case jl:return 99;case xh:return 98;case Ch:return 97;case Eh:return 96;case Sh:return 95;default:throw Error(b(332))}}function _h(r){switch(r){case 99:return jl;case 98:return xh;case 97:return Ch;case 96:return Eh;case 95:return Sh;default:throw Error(b(332))}}function Za(r,a){return r=_h(r),U0(r,a)}function ri(r,a,l){return r=_h(r),Iu(r,a,l)}function no(){if(Il!==null){var r=Il;Il=null,Au(r)}kh()}function kh(){if(!Lu&&to!==null){Lu=!0;var r=0;try{var a=to;Za(99,function(){for(;r<a.length;r++){var l=a[r];do l=l(!0);while(l!==null)}}),to=null}catch(l){throw to!==null&&(to=to.slice(r+1)),Iu(jl,no),l}finally{Lu=!1}}}var X0=me.ReactCurrentBatchConfig;function pr(r,a){if(r&&r.defaultProps){for(var l in a=p({},a),r=r.defaultProps)a[l]===void 0&&(a[l]=r[l]);return a}return a}var Al=_o(null),Pl=null,Ja=null,Nl=null;function Du(){Nl=Ja=Pl=null}function Mu(r){var a=Al.current;Ft(Al),r.type._context._currentValue=a}function Oh(r,a){for(;r!==null;){var l=r.alternate;if((r.childLanes&a)===a){if(l===null||(l.childLanes&a)===a)break;l.childLanes|=a}else r.childLanes|=a,l!==null&&(l.childLanes|=a);r=r.return}}function es(r,a){Pl=r,Nl=Ja=null,(r=r.dependencies)!==null&&r.firstContext!==null&&(r.lanes&a&&(hr=!0),r.firstContext=null)}function Gn(r,a){if(Nl!==r&&a!==!1&&a!==0)if(typeof a=="number"&&a!==1073741823||(Nl=r,a=1073741823),a={context:r,observedBits:a,next:null},Ja===null){if(Pl===null)throw Error(b(308));Ja=a,Pl.dependencies={lanes:0,firstContext:a,responders:null}}else Ja=Ja.next=a;return r._currentValue}var Oo=!1;function Bu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Rh(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ro(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function jo(r,a){if((r=r.updateQueue)!==null){var l=(r=r.shared).pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}}function jh(r,a){var l=r.updateQueue,h=r.alternate;if(h!==null&&l===(h=h.updateQueue)){var y=null,x=null;if((l=l.firstBaseUpdate)!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?y=x=E:x=x.next=E,l=l.next}while(l!==null);x===null?y=x=a:x=x.next=a}else y=x=a;return l={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:h.shared,effects:h.effects},void(r.updateQueue=l)}(r=l.lastBaseUpdate)===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}function oi(r,a,l,h){var y=r.updateQueue;Oo=!1;var x=y.firstBaseUpdate,E=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var j=O,U=j.next;j.next=null,E===null?x=U:E.next=U,E=j;var oe=r.alternate;if(oe!==null){var ke=(oe=oe.updateQueue).lastBaseUpdate;ke!==E&&(ke===null?oe.firstBaseUpdate=U:ke.next=U,oe.lastBaseUpdate=j)}}if(x!==null){for(ke=y.baseState,E=0,oe=U=j=null;;){O=x.lane;var he=x.eventTime;if((h&O)===O){oe!==null&&(oe=oe.next={eventTime:he,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Ie=r,Ye=x;switch(O=a,he=l,Ye.tag){case 1:if(typeof(Ie=Ye.payload)=="function"){ke=Ie.call(he,ke,O);break e}ke=Ie;break e;case 3:Ie.flags=-4097&Ie.flags|64;case 0:if((O=typeof(Ie=Ye.payload)=="function"?Ie.call(he,ke,O):Ie)==null)break e;ke=p({},ke,O);break e;case 2:Oo=!0}}x.callback!==null&&(r.flags|=32,(O=y.effects)===null?y.effects=[x]:O.push(x))}else he={eventTime:he,lane:O,tag:x.tag,payload:x.payload,callback:x.callback,next:null},oe===null?(U=oe=he,j=ke):oe=oe.next=he,E|=O;if((x=x.next)===null){if((O=y.shared.pending)===null)break;x=O.next,O.next=null,y.lastBaseUpdate=O,y.shared.pending=null}}oe===null&&(j=ke),y.baseState=j,y.firstBaseUpdate=U,y.lastBaseUpdate=oe,gi|=E,r.lanes=E,r.memoizedState=ke}}function Ih(r,a,l){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var h=r[a],y=h.callback;if(y!==null){if(h.callback=null,h=l,typeof y!="function")throw Error(b(191,y));y.call(h)}}}var Ah=new m.Component().refs;function Ll(r,a,l,h){l=(l=l(h,a=r.memoizedState))==null?a:p({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Dl={isMounted:function(r){return!!(r=r._reactInternals)&&Kr(r)===r},enqueueSetState:function(r,a,l){r=r._reactInternals;var h=Fn(),y=No(r),x=Ro(h,y);x.payload=a,l!=null&&(x.callback=l),jo(r,x),Lo(r,y,h)},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var h=Fn(),y=No(r),x=Ro(h,y);x.tag=1,x.payload=a,l!=null&&(x.callback=l),jo(r,x),Lo(r,y,h)},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=Fn(),h=No(r),y=Ro(l,h);y.tag=2,a!=null&&(y.callback=a),jo(r,y),Lo(r,h,l)}};function Ph(r,a,l,h,y,x,E){return typeof(r=r.stateNode).shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,x,E):!(a.prototype&&a.prototype.isPureReactComponent&&Zs(l,h)&&Zs(y,x))}function Nh(r,a,l){var h=!1,y=ko,x=a.contextType;return typeof x=="object"&&x!==null?x=Gn(x):(y=zn(a)?la:mn.current,x=(h=(h=a.contextTypes)!=null)?Ga(r,y):ko),a=new a(l,x),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Dl,r.stateNode=a,a._reactInternals=r,h&&((r=r.stateNode).__reactInternalMemoizedUnmaskedChildContext=y,r.__reactInternalMemoizedMaskedChildContext=x),a}function Lh(r,a,l,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==r&&Dl.enqueueReplaceState(a,a.state,null)}function zu(r,a,l,h){var y=r.stateNode;y.props=l,y.state=r.memoizedState,y.refs=Ah,Bu(r);var x=a.contextType;typeof x=="object"&&x!==null?y.context=Gn(x):(x=zn(a)?la:mn.current,y.context=Ga(r,x)),oi(r,l,y,h),y.state=r.memoizedState,typeof(x=a.getDerivedStateFromProps)=="function"&&(Ll(r,a,x,l),y.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Dl.enqueueReplaceState(y,y.state,null),oi(r,l,y,h),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4)}var Ml=Array.isArray;function ai(r,a,l){if((r=l.ref)!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner){if(l.tag!==1)throw Error(b(309));var h=l.stateNode}if(!h)throw Error(b(147,r));var y=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===y?a.ref:(a=function(x){var E=h.refs;E===Ah&&(E=h.refs={}),x===null?delete E[y]:E[y]=x},a._stringRef=y,a)}if(typeof r!="string")throw Error(b(284));if(!l._owner)throw Error(b(290,r))}return r}function Bl(r,a){if(r.type!=="textarea")throw Error(b(31,Object.prototype.toString.call(a)==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":a))}function Dh(r){function a(X,F){if(r){var V=X.lastEffect;V!==null?(V.nextEffect=F,X.lastEffect=F):X.firstEffect=X.lastEffect=F,F.nextEffect=null,F.flags=8}}function l(X,F){if(!r)return null;for(;F!==null;)a(X,F),F=F.sibling;return null}function h(X,F){for(X=new Map;F!==null;)F.key!==null?X.set(F.key,F):X.set(F.index,F),F=F.sibling;return X}function y(X,F){return(X=Mo(X,F)).index=0,X.sibling=null,X}function x(X,F,V){return X.index=V,r?(V=X.alternate)!==null?(V=V.index)<F?(X.flags=2,F):V:(X.flags=2,F):F}function E(X){return r&&X.alternate===null&&(X.flags=2),X}function O(X,F,V,ce){return F===null||F.tag!==6?((F=wd(V,X.mode,ce)).return=X,F):((F=y(F,V)).return=X,F)}function j(X,F,V,ce){return F!==null&&F.elementType===V.type?((ce=y(F,V.props)).ref=ai(X,F,V),ce.return=X,ce):((ce=tc(V.type,V.key,V.props,null,X.mode,ce)).ref=ai(X,F,V),ce.return=X,ce)}function U(X,F,V,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?((F=xd(V,X.mode,ce)).return=X,F):((F=y(F,V.children||[])).return=X,F)}function oe(X,F,V,ce,pe){return F===null||F.tag!==7?((F=cs(V,X.mode,ce,pe)).return=X,F):((F=y(F,V)).return=X,F)}function ke(X,F,V){if(typeof F=="string"||typeof F=="number")return(F=wd(""+F,X.mode,V)).return=X,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ge:return(V=tc(F.type,F.key,F.props,null,X.mode,V)).ref=ai(X,null,F),V.return=X,V;case ye:return(F=xd(F,X.mode,V)).return=X,F}if(Ml(F)||Ee(F))return(F=cs(F,X.mode,V,null)).return=X,F;Bl(X,F)}return null}function he(X,F,V,ce){var pe=F!==null?F.key:null;if(typeof V=="string"||typeof V=="number")return pe!==null?null:O(X,F,""+V,ce);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ge:return V.key===pe?V.type===Y?oe(X,F,V.props.children,ce,pe):j(X,F,V,ce):null;case ye:return V.key===pe?U(X,F,V,ce):null}if(Ml(V)||Ee(V))return pe!==null?null:oe(X,F,V,ce,null);Bl(X,V)}return null}function Ie(X,F,V,ce,pe){if(typeof ce=="string"||typeof ce=="number")return O(F,X=X.get(V)||null,""+ce,pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case ge:return X=X.get(ce.key===null?V:ce.key)||null,ce.type===Y?oe(F,X,ce.props.children,pe,ce.key):j(F,X,ce,pe);case ye:return U(F,X=X.get(ce.key===null?V:ce.key)||null,ce,pe)}if(Ml(ce)||Ee(ce))return oe(F,X=X.get(V)||null,ce,pe,null);Bl(F,ce)}return null}function Ye(X,F,V,ce){for(var pe=null,tt=null,Ne=F,ct=F=0,vt=null;Ne!==null&&ct<V.length;ct++){Ne.index>ct?(vt=Ne,Ne=null):vt=Ne.sibling;var Ge=he(X,Ne,V[ct],ce);if(Ge===null){Ne===null&&(Ne=vt);break}r&&Ne&&Ge.alternate===null&&a(X,Ne),F=x(Ge,F,ct),tt===null?pe=Ge:tt.sibling=Ge,tt=Ge,Ne=vt}if(ct===V.length)return l(X,Ne),pe;if(Ne===null){for(;ct<V.length;ct++)(Ne=ke(X,V[ct],ce))!==null&&(F=x(Ne,F,ct),tt===null?pe=Ne:tt.sibling=Ne,tt=Ne);return pe}for(Ne=h(X,Ne);ct<V.length;ct++)(vt=Ie(Ne,X,ct,V[ct],ce))!==null&&(r&&vt.alternate!==null&&Ne.delete(vt.key===null?ct:vt.key),F=x(vt,F,ct),tt===null?pe=vt:tt.sibling=vt,tt=vt);return r&&Ne.forEach(function(Lt){return a(X,Lt)}),pe}function Ze(X,F,V,ce){var pe=Ee(V);if(typeof pe!="function")throw Error(b(150));if((V=pe.call(V))==null)throw Error(b(151));for(var tt=pe=null,Ne=F,ct=F=0,vt=null,Ge=V.next();Ne!==null&&!Ge.done;ct++,Ge=V.next()){Ne.index>ct?(vt=Ne,Ne=null):vt=Ne.sibling;var Lt=he(X,Ne,Ge.value,ce);if(Lt===null){Ne===null&&(Ne=vt);break}r&&Ne&&Lt.alternate===null&&a(X,Ne),F=x(Lt,F,ct),tt===null?pe=Lt:tt.sibling=Lt,tt=Lt,Ne=vt}if(Ge.done)return l(X,Ne),pe;if(Ne===null){for(;!Ge.done;ct++,Ge=V.next())(Ge=ke(X,Ge.value,ce))!==null&&(F=x(Ge,F,ct),tt===null?pe=Ge:tt.sibling=Ge,tt=Ge);return pe}for(Ne=h(X,Ne);!Ge.done;ct++,Ge=V.next())(Ge=Ie(Ne,X,ct,Ge.value,ce))!==null&&(r&&Ge.alternate!==null&&Ne.delete(Ge.key===null?ct:Ge.key),F=x(Ge,F,ct),tt===null?pe=Ge:tt.sibling=Ge,tt=Ge);return r&&Ne.forEach(function(yx){return a(X,yx)}),pe}return function(X,F,V,ce){var pe=typeof V=="object"&&V!==null&&V.type===Y&&V.key===null;pe&&(V=V.props.children);var tt=typeof V=="object"&&V!==null;if(tt)switch(V.$$typeof){case ge:e:{for(tt=V.key,pe=F;pe!==null;){if(pe.key===tt){if(pe.tag===7){if(V.type===Y){l(X,pe.sibling),(F=y(pe,V.props.children)).return=X,X=F;break e}}else if(pe.elementType===V.type){l(X,pe.sibling),(F=y(pe,V.props)).ref=ai(X,pe,V),F.return=X,X=F;break e}l(X,pe);break}a(X,pe),pe=pe.sibling}V.type===Y?((F=cs(V.props.children,X.mode,ce,V.key)).return=X,X=F):((ce=tc(V.type,V.key,V.props,null,X.mode,ce)).ref=ai(X,F,V),ce.return=X,X=ce)}return E(X);case ye:e:{for(pe=V.key;F!==null;){if(F.key===pe){if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){l(X,F.sibling),(F=y(F,V.children||[])).return=X,X=F;break e}l(X,F);break}a(X,F),F=F.sibling}(F=xd(V,X.mode,ce)).return=X,X=F}return E(X)}if(typeof V=="string"||typeof V=="number")return V=""+V,F!==null&&F.tag===6?(l(X,F.sibling),(F=y(F,V)).return=X,X=F):(l(X,F),(F=wd(V,X.mode,ce)).return=X,X=F),E(X);if(Ml(V))return Ye(X,F,V,ce);if(Ee(V))return Ze(X,F,V,ce);if(tt&&Bl(X,V),V===void 0&&!pe)switch(X.tag){case 1:case 22:case 0:case 11:case 15:throw Error(b(152,xt(X.type)||"Component"))}return l(X,F)}}var zl=Dh(!0),Mh=Dh(!1),si={},Nr=_o(si),ii=_o(si),li=_o(si);function ua(r){if(r===si)throw Error(b(174));return r}function $u(r,a){switch(Ht(li,a),Ht(ii,r),Ht(Nr,si),r=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Dn(null,"");break;default:a=Dn(a=(r=r===8?a.parentNode:a).namespaceURI||null,r=r.tagName)}Ft(Nr),Ht(Nr,a)}function ts(){Ft(Nr),Ft(ii),Ft(li)}function Bh(r){ua(li.current);var a=ua(Nr.current),l=Dn(a,r.type);a!==l&&(Ht(ii,r),Ht(Nr,l))}function Fu(r){ii.current===r&&(Ft(Nr),Ft(ii))}var Xt=_o(0);function $l(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&((l=l.dehydrated)===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(64&a.flags)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ro=null,Io=null,Lr=!1;function zh(r,a){var l=Jn(5,null,null,0);l.elementType="DELETED",l.type="DELETED",l.stateNode=a,l.return=r,l.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=l,r.lastEffect=l):r.firstEffect=r.lastEffect=l}function $h(r,a){switch(r.tag){case 5:var l=r.type;return(a=a.nodeType!==1||l.toLowerCase()!==a.nodeName.toLowerCase()?null:a)!==null&&(r.stateNode=a,!0);case 6:return(a=r.pendingProps===""||a.nodeType!==3?null:a)!==null&&(r.stateNode=a,!0);default:return!1}}function Uu(r){if(Lr){var a=Io;if(a){var l=a;if(!$h(r,a)){if(!(a=Qa(l.nextSibling))||!$h(r,a))return r.flags=-1025&r.flags|2,Lr=!1,void(ro=r);zh(ro,l)}ro=r,Io=Qa(a.firstChild)}else r.flags=-1025&r.flags|2,Lr=!1,ro=r}}function Fh(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;ro=r}function Fl(r){if(r!==ro)return!1;if(!Lr)return Fh(r),Lr=!0,!1;var a=r.type;if(r.tag!==5||a!=="head"&&a!=="body"&&!Su(a,r.memoizedProps))for(a=Io;a;)zh(r,a),a=Qa(a.nextSibling);if(Fh(r),r.tag===13){if(!(r=(r=r.memoizedState)!==null?r.dehydrated:null))throw Error(b(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(a===0){Io=Qa(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++}r=r.nextSibling}Io=null}}else Io=ro?Qa(r.stateNode.nextSibling):null;return!0}function qu(){Io=ro=null,Lr=!1}var ns=[];function Hu(){for(var r=0;r<ns.length;r++)ns[r]._workInProgressVersionPrimary=null;ns.length=0}var ci=me.ReactCurrentDispatcher,Yn=me.ReactCurrentBatchConfig,ui=0,Qt=null,Cn=null,sn=null,Ul=!1,di=!1;function In(){throw Error(b(321))}function Vu(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Wn(r[l],a[l]))return!1;return!0}function Xu(r,a,l,h,y,x){if(ui=x,Qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ci.current=r===null||r.memoizedState===null?K0:W0,r=l(h,y),di){x=0;do{if(di=!1,!(25>x))throw Error(b(301));x+=1,sn=Cn=null,a.updateQueue=null,ci.current=G0,r=l(h,y)}while(di)}if(ci.current=Xl,a=Cn!==null&&Cn.next!==null,ui=0,sn=Cn=Qt=null,Ul=!1,a)throw Error(b(300));return r}function da(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Qt.memoizedState=sn=r:sn=sn.next=r,sn}function fa(){if(Cn===null){var r=Qt.alternate;r=r!==null?r.memoizedState:null}else r=Cn.next;var a=sn===null?Qt.memoizedState:sn.next;if(a!==null)sn=a,Cn=r;else{if(r===null)throw Error(b(310));r={memoizedState:(Cn=r).memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},sn===null?Qt.memoizedState=sn=r:sn=sn.next=r}return sn}function Dr(r,a){return typeof a=="function"?a(r):a}function fi(r){var a=fa(),l=a.queue;if(l===null)throw Error(b(311));l.lastRenderedReducer=r;var h=Cn,y=h.baseQueue,x=l.pending;if(x!==null){if(y!==null){var E=y.next;y.next=x.next,x.next=E}h.baseQueue=y=x,l.pending=null}if(y!==null){y=y.next,h=h.baseState;var O=E=x=null,j=y;do{var U=j.lane;if((ui&U)===U)O!==null&&(O=O.next={lane:0,action:j.action,eagerReducer:j.eagerReducer,eagerState:j.eagerState,next:null}),h=j.eagerReducer===r?j.eagerState:r(h,j.action);else{var oe={lane:U,action:j.action,eagerReducer:j.eagerReducer,eagerState:j.eagerState,next:null};O===null?(E=O=oe,x=h):O=O.next=oe,Qt.lanes|=U,gi|=U}j=j.next}while(j!==null&&j!==y);O===null?x=h:O.next=E,Wn(h,a.memoizedState)||(hr=!0),a.memoizedState=h,a.baseState=x,a.baseQueue=O,l.lastRenderedState=h}return[a.memoizedState,l.dispatch]}function pi(r){var a=fa(),l=a.queue;if(l===null)throw Error(b(311));l.lastRenderedReducer=r;var h=l.dispatch,y=l.pending,x=a.memoizedState;if(y!==null){l.pending=null;var E=y=y.next;do x=r(x,E.action),E=E.next;while(E!==y);Wn(x,a.memoizedState)||(hr=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),l.lastRenderedState=x}return[x,h]}function Uh(r,a,l){var h=a._getVersion;h=h(a._source);var y=a._workInProgressVersionPrimary;if(y!==null?r=y===h:(r=r.mutableReadLanes,(r=(ui&r)===r)&&(a._workInProgressVersionPrimary=h,ns.push(a))),r)return l(a._source);throw ns.push(a),Error(b(350))}function qh(r,a,l,h){var y=En;if(y===null)throw Error(b(349));var x=a._getVersion,E=x(a._source),O=ci.current,j=O.useState(function(){return Uh(y,a,l)}),U=j[1],oe=j[0];j=sn;var ke=r.memoizedState,he=ke.refs,Ie=he.getSnapshot,Ye=ke.source;ke=ke.subscribe;var Ze=Qt;return r.memoizedState={refs:he,source:a,subscribe:h},O.useEffect(function(){he.getSnapshot=l,he.setSnapshot=U;var X=x(a._source);if(!Wn(E,X)){X=l(a._source),Wn(oe,X)||(U(X),X=No(Ze),y.mutableReadLanes|=X&y.pendingLanes),X=y.mutableReadLanes,y.entangledLanes|=X;for(var F=y.entanglements,V=X;0<V;){var ce=31-Fe(V),pe=1<<ce;F[ce]|=X,V&=~pe}}},[l,a,h]),O.useEffect(function(){return h(a._source,function(){var X=he.getSnapshot,F=he.setSnapshot;try{F(X(a._source));var V=No(Ze);y.mutableReadLanes|=V&y.pendingLanes}catch(ce){F(function(){throw ce})}})},[a,h]),Wn(Ie,l)&&Wn(Ye,a)&&Wn(ke,h)||((r={pending:null,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:oe}).dispatch=U=Gu.bind(null,Qt,r),j.queue=r,j.baseQueue=null,oe=Uh(y,a,l),j.memoizedState=j.baseState=oe),oe}function Hh(r,a,l){return qh(fa(),r,a,l)}function hi(r){var a=da();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r=(r=a.queue={pending:null,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:r}).dispatch=Gu.bind(null,Qt,r),[a.memoizedState,r]}function ql(r,a,l,h){return r={tag:r,create:a,destroy:l,deps:h,next:null},(a=Qt.updateQueue)===null?(a={lastEffect:null},Qt.updateQueue=a,a.lastEffect=r.next=r):(l=a.lastEffect)===null?a.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,a.lastEffect=r),r}function Vh(r){return r={current:r},da().memoizedState=r}function Hl(){return fa().memoizedState}function Qu(r,a,l,h){var y=da();Qt.flags|=r,y.memoizedState=ql(1|a,l,void 0,h===void 0?null:h)}function Ku(r,a,l,h){var y=fa();h=h===void 0?null:h;var x=void 0;if(Cn!==null){var E=Cn.memoizedState;if(x=E.destroy,h!==null&&Vu(h,E.deps))return void ql(a,l,x,h)}Qt.flags|=r,y.memoizedState=ql(1|a,l,x,h)}function Xh(r,a){return Qu(516,4,r,a)}function Vl(r,a){return Ku(516,4,r,a)}function Qh(r,a){return Ku(4,2,r,a)}function Kh(r,a){return typeof a=="function"?(r=r(),a(r),function(){a(null)}):a!=null?(r=r(),a.current=r,function(){a.current=null}):void 0}function Wh(r,a,l){return l=l!=null?l.concat([r]):null,Ku(4,2,Kh.bind(null,a,r),l)}function Wu(){}function Gh(r,a){var l=fa();a=a===void 0?null:a;var h=l.memoizedState;return h!==null&&a!==null&&Vu(a,h[1])?h[0]:(l.memoizedState=[r,a],r)}function Yh(r,a){var l=fa();a=a===void 0?null:a;var h=l.memoizedState;return h!==null&&a!==null&&Vu(a,h[1])?h[0]:(r=r(),l.memoizedState=[r,a],r)}function Q0(r,a){var l=Ya();Za(98>l?98:l,function(){r(!0)}),Za(97<l?97:l,function(){var h=Yn.transition;Yn.transition=1;try{r(!1),a()}finally{Yn.transition=h}})}function Gu(r,a,l){var h=Fn(),y=No(r),x={lane:y,action:l,eagerReducer:null,eagerState:null,next:null},E=a.pending;if(E===null?x.next=x:(x.next=E.next,E.next=x),a.pending=x,E=r.alternate,r===Qt||E!==null&&E===Qt)di=Ul=!0;else{if(r.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer)!==null)try{var O=a.lastRenderedState,j=E(O,l);if(x.eagerReducer=E,x.eagerState=j,Wn(j,O))return}catch{}Lo(r,y,h)}}var Xl={readContext:Gn,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useOpaqueIdentifier:In,unstable_isNewReconciler:!1},K0={readContext:Gn,useCallback:function(r,a){return da().memoizedState=[r,a===void 0?null:a],r},useContext:Gn,useEffect:Xh,useImperativeHandle:function(r,a,l){return l=l!=null?l.concat([r]):null,Qu(4,2,Kh.bind(null,a,r),l)},useLayoutEffect:function(r,a){return Qu(4,2,r,a)},useMemo:function(r,a){var l=da();return a=a===void 0?null:a,r=r(),l.memoizedState=[r,a],r},useReducer:function(r,a,l){var h=da();return a=l!==void 0?l(a):a,h.memoizedState=h.baseState=a,r=(r=h.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:a}).dispatch=Gu.bind(null,Qt,r),[h.memoizedState,r]},useRef:Vh,useState:hi,useDebugValue:Wu,useDeferredValue:function(r){var a=hi(r),l=a[0],h=a[1];return Xh(function(){var y=Yn.transition;Yn.transition=1;try{h(r)}finally{Yn.transition=y}},[r]),l},useTransition:function(){var r=hi(!1),a=r[0];return Vh(r=Q0.bind(null,r[1])),[r,a]},useMutableSource:function(r,a,l){var h=da();return h.memoizedState={refs:{getSnapshot:a,setSnapshot:null},source:r,subscribe:l},qh(h,r,a,l)},useOpaqueIdentifier:function(){if(Lr){var r=!1,a=function(h){return{$$typeof:G,toString:h,valueOf:h}}(function(){throw r||(r=!0,l("r:"+(_u++).toString(36))),Error(b(355))}),l=hi(a)[1];return!(2&Qt.mode)&&(Qt.flags|=516,ql(5,function(){l("r:"+(_u++).toString(36))},void 0,null)),a}return hi(a="r:"+(_u++).toString(36)),a},unstable_isNewReconciler:!1},W0={readContext:Gn,useCallback:Gh,useContext:Gn,useEffect:Vl,useImperativeHandle:Wh,useLayoutEffect:Qh,useMemo:Yh,useReducer:fi,useRef:Hl,useState:function(){return fi(Dr)},useDebugValue:Wu,useDeferredValue:function(r){var a=fi(Dr),l=a[0],h=a[1];return Vl(function(){var y=Yn.transition;Yn.transition=1;try{h(r)}finally{Yn.transition=y}},[r]),l},useTransition:function(){var r=fi(Dr)[0];return[Hl().current,r]},useMutableSource:Hh,useOpaqueIdentifier:function(){return fi(Dr)[0]},unstable_isNewReconciler:!1},G0={readContext:Gn,useCallback:Gh,useContext:Gn,useEffect:Vl,useImperativeHandle:Wh,useLayoutEffect:Qh,useMemo:Yh,useReducer:pi,useRef:Hl,useState:function(){return pi(Dr)},useDebugValue:Wu,useDeferredValue:function(r){var a=pi(Dr),l=a[0],h=a[1];return Vl(function(){var y=Yn.transition;Yn.transition=1;try{h(r)}finally{Yn.transition=y}},[r]),l},useTransition:function(){var r=pi(Dr)[0];return[Hl().current,r]},useMutableSource:Hh,useOpaqueIdentifier:function(){return pi(Dr)[0]},unstable_isNewReconciler:!1},Y0=me.ReactCurrentOwner,hr=!1;function $n(r,a,l,h){a.child=r===null?Mh(a,null,l,h):zl(a,r.child,l,h)}function Zh(r,a,l,h,y){l=l.render;var x=a.ref;return es(a,y),h=Xu(r,a,l,h,x,y),r===null||hr?(a.flags|=1,$n(r,a,h,y),a.child):(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~y,oo(r,a,y))}function Jh(r,a,l,h,y,x){if(r===null){var E=l.type;return typeof E!="function"||bd(E)||E.defaultProps!==void 0||l.compare!==null||l.defaultProps!==void 0?((r=tc(l.type,null,h,a,a.mode,x)).ref=a.ref,r.return=a,a.child=r):(a.tag=15,a.type=E,em(r,a,E,h,y,x))}return E=r.child,!(y&x)&&(y=E.memoizedProps,(l=(l=l.compare)!==null?l:Zs)(y,h)&&r.ref===a.ref)?oo(r,a,x):(a.flags|=1,(r=Mo(E,h)).ref=a.ref,r.return=a,a.child=r)}function em(r,a,l,h,y,x){if(r!==null&&Zs(r.memoizedProps,h)&&r.ref===a.ref){if(hr=!1,(x&y)==0)return a.lanes=r.lanes,oo(r,a,x);16384&r.flags&&(hr=!0)}return Yu(r,a,l,h,x)}function tm(r,a,l){var h=a.pendingProps,y=h.children,x=r!==null?r.memoizedState:null;if(h.mode==="hidden"||h.mode==="unstable-defer-without-hiding")if(!(4&a.mode))a.memoizedState={baseLanes:0},ec(0,l);else{if(!(1073741824&l))return r=x!==null?x.baseLanes|l:l,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r},ec(0,r),null;a.memoizedState={baseLanes:0},ec(0,x!==null?x.baseLanes:l)}else x!==null?(h=x.baseLanes|l,a.memoizedState=null):h=l,ec(0,h);return $n(r,a,y,l),a.child}function nm(r,a){var l=a.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(a.flags|=128)}function Yu(r,a,l,h,y){var x=zn(l)?la:mn.current;return x=Ga(a,x),es(a,y),l=Xu(r,a,l,h,x,y),r===null||hr?(a.flags|=1,$n(r,a,l,y),a.child):(a.updateQueue=r.updateQueue,a.flags&=-517,r.lanes&=~y,oo(r,a,y))}function rm(r,a,l,h,y){if(zn(l)){var x=!0;Rl(a)}else x=!1;if(es(a,y),a.stateNode===null)r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),Nh(a,l,h),zu(a,l,h,y),h=!0;else if(r===null){var E=a.stateNode,O=a.memoizedProps;E.props=O;var j=E.context,U=l.contextType;U=typeof U=="object"&&U!==null?Gn(U):Ga(a,U=zn(l)?la:mn.current);var oe=l.getDerivedStateFromProps,ke=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function";ke||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O!==h||j!==U)&&Lh(a,E,h,U),Oo=!1;var he=a.memoizedState;E.state=he,oi(a,h,E,y),j=a.memoizedState,O!==h||he!==j||jn.current||Oo?(typeof oe=="function"&&(Ll(a,l,oe,h),j=a.memoizedState),(O=Oo||Ph(a,l,O,h,he,j,U))?(ke||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4)):(typeof E.componentDidMount=="function"&&(a.flags|=4),a.memoizedProps=h,a.memoizedState=j),E.props=h,E.state=j,E.context=U,h=O):(typeof E.componentDidMount=="function"&&(a.flags|=4),h=!1)}else{E=a.stateNode,Rh(r,a),O=a.memoizedProps,U=a.type===a.elementType?O:pr(a.type,O),E.props=U,ke=a.pendingProps,he=E.context,j=typeof(j=l.contextType)=="object"&&j!==null?Gn(j):Ga(a,j=zn(l)?la:mn.current);var Ie=l.getDerivedStateFromProps;(oe=typeof Ie=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O!==ke||he!==j)&&Lh(a,E,h,j),Oo=!1,he=a.memoizedState,E.state=he,oi(a,h,E,y);var Ye=a.memoizedState;O!==ke||he!==Ye||jn.current||Oo?(typeof Ie=="function"&&(Ll(a,l,Ie,h),Ye=a.memoizedState),(U=Oo||Ph(a,l,U,h,he,Ye,j))?(oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,Ye,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,Ye,j)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=256)):(typeof E.componentDidUpdate!="function"||O===r.memoizedProps&&he===r.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&he===r.memoizedState||(a.flags|=256),a.memoizedProps=h,a.memoizedState=Ye),E.props=h,E.state=Ye,E.context=j,h=U):(typeof E.componentDidUpdate!="function"||O===r.memoizedProps&&he===r.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&he===r.memoizedState||(a.flags|=256),h=!1)}return Zu(r,a,l,h,x,y)}function Zu(r,a,l,h,y,x){nm(r,a);var E=(64&a.flags)!=0;if(!h&&!E)return y&&vh(a,l,!1),oo(r,a,x);h=a.stateNode,Y0.current=a;var O=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,r!==null&&E?(a.child=zl(a,r.child,null,x),a.child=zl(a,null,O,x)):$n(r,a,O,x),a.memoizedState=h.state,y&&vh(a,l,!0),a.child}function om(r){var a=r.stateNode;a.pendingContext?yh(0,a.pendingContext,a.pendingContext!==a.context):a.context&&yh(0,a.context,!1),$u(r,a.containerInfo)}var am,sm,im,Ju={dehydrated:null,retryLane:0};function lm(r,a,l){var h,y=a.pendingProps,x=Xt.current,E=!1;return(h=(64&a.flags)!=0)||(h=(r===null||r.memoizedState!==null)&&(2&x)!=0),h?(E=!0,a.flags&=-65):r!==null&&r.memoizedState===null||y.fallback===void 0||y.unstable_avoidThisFallback===!0||(x|=1),Ht(Xt,1&x),r===null?(y.fallback!==void 0&&Uu(a),r=y.children,x=y.fallback,E?(r=cm(a,r,x,l),a.child.memoizedState={baseLanes:l},a.memoizedState=Ju,r):typeof y.unstable_expectedLoadTime=="number"?(r=cm(a,r,x,l),a.child.memoizedState={baseLanes:l},a.memoizedState=Ju,a.lanes=33554432,r):((l=vd({mode:"visible",children:r},a.mode,l,null)).return=a,a.child=l)):(r.memoizedState,E?(y=function(O,j,U,oe,ke){var he=j.mode,Ie=O.child;O=Ie.sibling;var Ye={mode:"hidden",children:U};return!(2&he)&&j.child!==Ie?((U=j.child).childLanes=0,U.pendingProps=Ye,(Ie=U.lastEffect)!==null?(j.firstEffect=U.firstEffect,j.lastEffect=Ie,Ie.nextEffect=null):j.firstEffect=j.lastEffect=null):U=Mo(Ie,Ye),O!==null?oe=Mo(O,oe):(oe=cs(oe,he,ke,null)).flags|=2,oe.return=j,U.return=j,U.sibling=oe,j.child=U,oe}(r,a,y.children,y.fallback,l),E=a.child,x=r.child.memoizedState,E.memoizedState=x===null?{baseLanes:l}:{baseLanes:x.baseLanes|l},E.childLanes=r.childLanes&~l,a.memoizedState=Ju,y):(l=function(O,j,U,oe){var ke=O.child;return O=ke.sibling,U=Mo(ke,{mode:"visible",children:U}),!(2&j.mode)&&(U.lanes=oe),U.return=j,U.sibling=null,O!==null&&(O.nextEffect=null,O.flags=8,j.firstEffect=j.lastEffect=O),j.child=U}(r,a,y.children,l),a.memoizedState=null,l))}function cm(r,a,l,h){var y=r.mode,x=r.child;return a={mode:"hidden",children:a},!(2&y)&&x!==null?(x.childLanes=0,x.pendingProps=a):x=vd(a,y,0,null),l=cs(l,y,h,null),x.return=r,l.return=r,x.sibling=l,r.child=x,l}function um(r,a){r.lanes|=a;var l=r.alternate;l!==null&&(l.lanes|=a),Oh(r.return,a)}function ed(r,a,l,h,y,x){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:y,lastEffect:x}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=y,E.lastEffect=x)}function dm(r,a,l){var h=a.pendingProps,y=h.revealOrder,x=h.tail;if($n(r,a,h.children,l),(2&(h=Xt.current))!=0)h=1&h|2,a.flags|=64;else{if(r!==null&&64&r.flags)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&um(r,l);else if(r.tag===19)um(r,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ht(Xt,h),(2&a.mode)==0)a.memoizedState=null;else switch(y){case"forwards":for(l=a.child,y=null;l!==null;)(r=l.alternate)!==null&&$l(r)===null&&(y=l),l=l.sibling;(l=y)===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),ed(a,!1,y,l,x,a.lastEffect);break;case"backwards":for(l=null,y=a.child,a.child=null;y!==null;){if((r=y.alternate)!==null&&$l(r)===null){a.child=y;break}r=y.sibling,y.sibling=l,l=y,y=r}ed(a,!0,l,null,x,a.lastEffect);break;case"together":ed(a,!1,null,null,void 0,a.lastEffect);break;default:a.memoizedState=null}return a.child}function oo(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),gi|=a.lanes,(l&a.childLanes)!=0){if(r!==null&&a.child!==r.child)throw Error(b(153));if(a.child!==null){for(l=Mo(r=a.child,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,(l=l.sibling=Mo(r,r.pendingProps)).return=a;l.sibling=null}return a.child}return null}function mi(r,a){if(!Lr)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Z0(r,a,l){var h=a.pendingProps;switch(a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return zn(a.type)&&Ru(),null;case 3:return ts(),Ft(jn),Ft(mn),Hu(),(h=a.stateNode).pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),r!==null&&r.child!==null||(Fl(a)?a.flags|=4:h.hydrate||(a.flags|=256)),null;case 5:Fu(a);var y=ua(li.current);if(l=a.type,r!==null&&a.stateNode!=null)sm(r,a,l,h),r.ref!==a.ref&&(a.flags|=128);else{if(!h){if(a.stateNode===null)throw Error(b(166));return null}if(r=ua(Nr.current),Fl(a)){h=a.stateNode,l=a.type;var x=a.memoizedProps;switch(h[To]=a,h[kl]=x,l){case"dialog":Mt("cancel",h),Mt("close",h);break;case"iframe":case"object":case"embed":Mt("load",h);break;case"video":case"audio":for(r=0;r<ei.length;r++)Mt(ei[r],h);break;case"source":Mt("error",h);break;case"img":case"image":case"link":Mt("error",h),Mt("load",h);break;case"details":Mt("toggle",h);break;case"input":kn(h,x),Mt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!x.multiple},Mt("invalid",h);break;case"textarea":ta(h,x),Mt("invalid",h)}for(var E in De(l,x),r=null,x)x.hasOwnProperty(E)&&(y=x[E],E==="children"?typeof y=="string"?h.textContent!==y&&(r=["children",y]):typeof y=="number"&&h.textContent!==""+y&&(r=["children",""+y]):w.hasOwnProperty(E)&&y!=null&&E==="onScroll"&&Mt("scroll",h));switch(l){case"input":mt(h),Er(h,x,!0);break;case"textarea":mt(h),Vr(h);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(h.onclick=Tl)}h=r,a.updateQueue=h,h!==null&&(a.flags|=4)}else{switch(E=y.nodeType===9?y:y.ownerDocument,r===na&&(r=wn(l)),r===na?l==="script"?((r=E.createElement("div")).innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(l,{is:h.is}):(r=E.createElement(l),l==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,l),r[To]=a,r[kl]=h,am(r,a),a.stateNode=r,E=be(l,h),l){case"dialog":Mt("cancel",r),Mt("close",r),y=h;break;case"iframe":case"object":case"embed":Mt("load",r),y=h;break;case"video":case"audio":for(y=0;y<ei.length;y++)Mt(ei[y],r);y=h;break;case"source":Mt("error",r),y=h;break;case"img":case"image":case"link":Mt("error",r),Mt("load",r),y=h;break;case"details":Mt("toggle",r),y=h;break;case"input":kn(r,h),y=vn(r,h),Mt("invalid",r);break;case"option":y=Vn(r,h);break;case"select":r._wrapperState={wasMultiple:!!h.multiple},y=p({},h,{value:void 0}),Mt("invalid",r);break;case"textarea":ta(r,h),y=en(r,h),Mt("invalid",r);break;default:y=h}De(l,y);var O=y;for(x in O)if(O.hasOwnProperty(x)){var j=O[x];x==="style"?ne(r,j):x==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0)!=null&&Xr(r,j):x==="children"?typeof j=="string"?(l!=="textarea"||j!=="")&&Qr(r,j):typeof j=="number"&&Qr(r,""+j):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(w.hasOwnProperty(x)?j!=null&&x==="onScroll"&&Mt("scroll",r):j!=null&&fe(r,x,j,E))}switch(l){case"input":mt(r),Er(r,h,!1);break;case"textarea":mt(r),Vr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+lt(h.value));break;case"select":r.multiple=!!h.multiple,(x=h.value)!=null?Sr(r,!!h.multiple,x,!1):h.defaultValue!=null&&Sr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof y.onClick=="function"&&(r.onclick=Tl)}fh(l,h)&&(a.flags|=4)}a.ref!==null&&(a.flags|=128)}return null;case 6:if(r&&a.stateNode!=null)im(0,a,r.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(b(166));l=ua(li.current),ua(Nr.current),Fl(a)?(h=a.stateNode,l=a.memoizedProps,h[To]=a,h.nodeValue!==l&&(a.flags|=4)):((h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h))[To]=a,a.stateNode=h)}return null;case 13:return Ft(Xt),h=a.memoizedState,64&a.flags?(a.lanes=l,a):(h=h!==null,l=!1,r===null?a.memoizedProps.fallback!==void 0&&Fl(a):l=r.memoizedState!==null,h&&!l&&2&a.mode&&(r===null&&a.memoizedProps.unstable_avoidThisFallback!==!0||1&Xt.current?ln===0&&(ln=3):(ln!==0&&ln!==3||(ln=4),En===null||!(134217727&gi)&&!(134217727&os)||ss(En,yn))),(h||l)&&(a.flags|=4),null);case 4:return ts(),r===null&&ih(a.stateNode.containerInfo),null;case 10:return Mu(a),null;case 19:if(Ft(Xt),(h=a.memoizedState)===null)return null;if(x=(64&a.flags)!=0,(E=h.rendering)===null)if(x)mi(h,!1);else{if(ln!==0||r!==null&&64&r.flags)for(r=a.child;r!==null;){if((E=$l(r))!==null){for(a.flags|=64,mi(h,!1),(x=E.updateQueue)!==null&&(a.updateQueue=x,a.flags|=4),h.lastEffect===null&&(a.firstEffect=null),a.lastEffect=h.lastEffect,h=l,l=a.child;l!==null;)r=h,(x=l).flags&=2,x.nextEffect=null,x.firstEffect=null,x.lastEffect=null,(E=x.alternate)===null?(x.childLanes=0,x.lanes=r,x.child=null,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=E.childLanes,x.lanes=E.lanes,x.child=E.child,x.memoizedProps=E.memoizedProps,x.memoizedState=E.memoizedState,x.updateQueue=E.updateQueue,x.type=E.type,r=E.dependencies,x.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ht(Xt,1&Xt.current|2),a.child}r=r.sibling}h.tail!==null&&gn()>dd&&(a.flags|=64,x=!0,mi(h,!1),a.lanes=33554432)}else{if(!x)if((r=$l(E))!==null){if(a.flags|=64,x=!0,(l=r.updateQueue)!==null&&(a.updateQueue=l,a.flags|=4),mi(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!Lr)return(a=a.lastEffect=h.lastEffect)!==null&&(a.nextEffect=null),null}else 2*gn()-h.renderingStartTime>dd&&l!==1073741824&&(a.flags|=64,x=!0,mi(h,!1),a.lanes=33554432);h.isBackwards?(E.sibling=a.child,a.child=E):((l=h.last)!==null?l.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(l=h.tail,h.rendering=l,h.tail=l.sibling,h.lastEffect=a.lastEffect,h.renderingStartTime=gn(),l.sibling=null,a=Xt.current,Ht(Xt,x?1&a|2:1&a),l):null;case 23:case 24:return yd(),r!==null&&r.memoizedState!==null!=(a.memoizedState!==null)&&h.mode!=="unstable-defer-without-hiding"&&(a.flags|=4),null}throw Error(b(156,a.tag))}function J0(r){switch(r.tag){case 1:zn(r.type)&&Ru();var a=r.flags;return 4096&a?(r.flags=-4097&a|64,r):null;case 3:if(ts(),Ft(jn),Ft(mn),Hu(),(64&(a=r.flags))!=0)throw Error(b(285));return r.flags=-4097&a|64,r;case 5:return Fu(r),null;case 13:return Ft(Xt),4096&(a=r.flags)?(r.flags=-4097&a|64,r):null;case 19:return Ft(Xt),null;case 4:return ts(),null;case 10:return Mu(r),null;case 23:case 24:return yd(),null;default:return null}}function td(r,a){try{var l="",h=a;do l+=Rt(h),h=h.return;while(h);var y=l}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:r,source:a,stack:y}}function nd(r,a){try{console.error(a.value)}catch(l){setTimeout(function(){throw l})}}am=function(r,a){for(var l=a.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},sm=function(r,a,l,h){var y=r.memoizedProps;if(y!==h){r=a.stateNode,ua(Nr.current);var x,E=null;switch(l){case"input":y=vn(r,y),h=vn(r,h),E=[];break;case"option":y=Vn(r,y),h=Vn(r,h),E=[];break;case"select":y=p({},y,{value:void 0}),h=p({},h,{value:void 0}),E=[];break;case"textarea":y=en(r,y),h=en(r,h),E=[];break;default:typeof y.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Tl)}for(U in De(l,h),l=null,y)if(!h.hasOwnProperty(U)&&y.hasOwnProperty(U)&&y[U]!=null)if(U==="style"){var O=y[U];for(x in O)O.hasOwnProperty(x)&&(l||(l={}),l[x]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(w.hasOwnProperty(U)?E||(E=[]):(E=E||[]).push(U,null));for(U in h){var j=h[U];if(O=y?.[U],h.hasOwnProperty(U)&&j!==O&&(j!=null||O!=null))if(U==="style")if(O){for(x in O)!O.hasOwnProperty(x)||j&&j.hasOwnProperty(x)||(l||(l={}),l[x]="");for(x in j)j.hasOwnProperty(x)&&O[x]!==j[x]&&(l||(l={}),l[x]=j[x])}else l||(E||(E=[]),E.push(U,l)),l=j;else U==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,O=O?O.__html:void 0,j!=null&&O!==j&&(E=E||[]).push(U,j)):U==="children"?typeof j!="string"&&typeof j!="number"||(E=E||[]).push(U,""+j):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(w.hasOwnProperty(U)?(j!=null&&U==="onScroll"&&Mt("scroll",r),E||O===j||(E=[])):typeof j=="object"&&j!==null&&j.$$typeof===G?j.toString():(E=E||[]).push(U,j))}l&&(E=E||[]).push("style",l);var U=E;(a.updateQueue=U)&&(a.flags|=4)}},im=function(r,a,l,h){l!==h&&(a.flags|=4)};var ex=typeof WeakMap=="function"?WeakMap:Map;function fm(r,a,l){(l=Ro(-1,l)).tag=3,l.payload={element:null};var h=a.value;return l.callback=function(){Wl||(Wl=!0,fd=h),nd(0,a)},l}function pm(r,a,l){(l=Ro(-1,l)).tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var y=a.value;l.payload=function(){return nd(0,a),h(y)}}var x=r.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){typeof h!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this),nd(0,a));var E=a.stack;this.componentDidCatch(a.value,{componentStack:E!==null?E:""})}),l}var tx=typeof WeakSet=="function"?WeakSet:Set;function hm(r){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){Do(r,l)}else a.current=null}function nx(r,a){switch(a.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&a.flags&&r!==null){var l=r.memoizedProps,h=r.memoizedState;a=(r=a.stateNode).getSnapshotBeforeUpdate(a.elementType===a.type?l:pr(a.type,l),h),r.__reactInternalSnapshotBeforeUpdate=a}return;case 3:return void(256&a.flags&&Tu(a.stateNode.containerInfo))}throw Error(b(163))}function rx(r,a,l){switch(l.tag){case 0:case 11:case 15:case 22:if((a=(a=l.updateQueue)!==null?a.lastEffect:null)!==null){r=a=a.next;do{if((3&r.tag)==3){var h=r.create;r.destroy=h()}r=r.next}while(r!==a)}if((a=(a=l.updateQueue)!==null?a.lastEffect:null)!==null){r=a=a.next;do{var y=r;h=y.next,4&(y=y.tag)&&1&y&&(Rm(l,r),ux(l,r)),r=h}while(r!==a)}return;case 1:return r=l.stateNode,4&l.flags&&(a===null?r.componentDidMount():(h=l.elementType===l.type?a.memoizedProps:pr(l.type,a.memoizedProps),r.componentDidUpdate(h,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),void((a=l.updateQueue)!==null&&Ih(l,a,r));case 3:if((a=l.updateQueue)!==null){if(r=null,l.child!==null)switch(l.child.tag){case 5:case 1:r=l.child.stateNode}Ih(l,a,r)}return;case 5:return r=l.stateNode,void(a===null&&4&l.flags&&fh(l.type,l.memoizedProps)&&r.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(l.memoizedState===null&&(l=l.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&oa(l)))))}throw Error(b(163))}function mm(r,a){for(var l=r;;){if(l.tag===5){var h=l.stateNode;if(a)typeof(h=h.style).setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{h=l.stateNode;var y=l.memoizedProps.style;y=y!=null&&y.hasOwnProperty("display")?y.display:null,h.style.display=z("display",y)}}else if(l.tag===6)l.stateNode.nodeValue=a?"":l.memoizedProps;else if((l.tag!==23&&l.tag!==24||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}}function gm(r,a){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(ju,a)}catch{}switch(a.tag){case 0:case 11:case 14:case 15:case 22:if((r=a.updateQueue)!==null&&(r=r.lastEffect)!==null){var l=r=r.next;do{var h=l,y=h.destroy;if(h=h.tag,y!==void 0)if(4&h)Rm(a,l);else{h=a;try{y()}catch(x){Do(h,x)}}l=l.next}while(l!==r)}break;case 1:if(hm(a),typeof(r=a.stateNode).componentWillUnmount=="function")try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(x){Do(a,x)}break;case 5:hm(a);break;case 4:wm(r,a)}}function ym(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function bm(r){return r.tag===5||r.tag===3||r.tag===4}function vm(r){e:{for(var a=r.return;a!==null;){if(bm(a))break e;a=a.return}throw Error(b(160))}var l=a;switch(a=l.stateNode,l.tag){case 5:var h=!1;break;case 3:case 4:a=a.containerInfo,h=!0;break;default:throw Error(b(161))}16&l.flags&&(Qr(a,""),l.flags&=-17);e:t:for(l=r;;){for(;l.sibling===null;){if(l.return===null||bm(l.return)){l=null;break e}l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(2&l.flags)){l=l.stateNode;break e}}h?rd(r,l,a):od(r,l,a)}function rd(r,a,l){var h=r.tag,y=h===5||h===6;if(y)r=y?r.stateNode:r.stateNode.instance,a?l.nodeType===8?l.parentNode.insertBefore(r,a):l.insertBefore(r,a):(l.nodeType===8?(a=l.parentNode).insertBefore(r,l):(a=l).appendChild(r),(l=l._reactRootContainer)!=null||a.onclick!==null||(a.onclick=Tl));else if(h!==4&&(r=r.child)!==null)for(rd(r,a,l),r=r.sibling;r!==null;)rd(r,a,l),r=r.sibling}function od(r,a,l){var h=r.tag,y=h===5||h===6;if(y)r=y?r.stateNode:r.stateNode.instance,a?l.insertBefore(r,a):l.appendChild(r);else if(h!==4&&(r=r.child)!==null)for(od(r,a,l),r=r.sibling;r!==null;)od(r,a,l),r=r.sibling}function wm(r,a){for(var l,h,y=a,x=!1;;){if(!x){x=y.return;e:for(;;){if(x===null)throw Error(b(160));switch(l=x.stateNode,x.tag){case 5:h=!1;break e;case 3:case 4:l=l.containerInfo,h=!0;break e}x=x.return}x=!0}if(y.tag===5||y.tag===6){e:for(var E=r,O=y,j=O;;)if(gm(E,j),j.child!==null&&j.tag!==4)j.child.return=j,j=j.child;else{if(j===O)break e;for(;j.sibling===null;){if(j.return===null||j.return===O)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}h?(E=l,O=y.stateNode,E.nodeType===8?E.parentNode.removeChild(O):E.removeChild(O)):l.removeChild(y.stateNode)}else if(y.tag===4){if(y.child!==null){l=y.stateNode.containerInfo,h=!0,y.child.return=y,y=y.child;continue}}else if(gm(r,y),y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break;for(;y.sibling===null;){if(y.return===null||y.return===a)return;(y=y.return).tag===4&&(x=!1)}y.sibling.return=y.return,y=y.sibling}}function ad(r,a){switch(a.tag){case 0:case 11:case 14:case 15:case 22:var l=a.updateQueue;if((l=l!==null?l.lastEffect:null)!==null){var h=l=l.next;do(3&h.tag)==3&&(r=h.destroy,h.destroy=void 0,r!==void 0&&r()),h=h.next;while(h!==l)}return;case 1:case 12:case 17:return;case 5:if((l=a.stateNode)!=null){h=a.memoizedProps;var y=r!==null?r.memoizedProps:h;r=a.type;var x=a.updateQueue;if(a.updateQueue=null,x!==null){for(l[kl]=h,r==="input"&&h.type==="radio"&&h.name!=null&&Cr(l,h),be(r,y),a=be(r,h),y=0;y<x.length;y+=2){var E=x[y],O=x[y+1];E==="style"?ne(l,O):E==="dangerouslySetInnerHTML"?Xr(l,O):E==="children"?Qr(l,O):fe(l,E,O,a)}switch(r){case"input":dn(l,h);break;case"textarea":Pa(l,h);break;case"select":r=l._wrapperState.wasMultiple,l._wrapperState.wasMultiple=!!h.multiple,(x=h.value)!=null?Sr(l,!!h.multiple,x,!1):r!==!!h.multiple&&(h.defaultValue!=null?Sr(l,!!h.multiple,h.defaultValue,!0):Sr(l,!!h.multiple,h.multiple?[]:"",!1))}}}return;case 6:if(a.stateNode===null)throw Error(b(162));return void(a.stateNode.nodeValue=a.memoizedProps);case 3:return void((l=a.stateNode).hydrate&&(l.hydrate=!1,oa(l.containerInfo)));case 13:return a.memoizedState!==null&&(ud=gn(),mm(a.child,!0)),void xm(a);case 19:return void xm(a);case 23:case 24:return void mm(a,a.memoizedState!==null)}throw Error(b(163))}function xm(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new tx),a.forEach(function(h){var y=px.bind(null,r,h);l.has(h)||(l.add(h),h.then(y,y))})}}function ox(r,a){return r!==null&&((r=r.memoizedState)===null||r.dehydrated!==null)&&(a=a.memoizedState)!==null&&a.dehydrated===null}var ax=Math.ceil,Ql=me.ReactCurrentDispatcher,sd=me.ReactCurrentOwner,ut=0,En=null,rn=null,yn=0,pa=0,id=_o(0),ln=0,Kl=null,rs=0,gi=0,os=0,ld=0,cd=null,ud=0,dd=1/0;function as(){dd=gn()+500}var Cm,je=null,Wl=!1,fd=null,Mr=null,Ao=!1,yi=null,bi=90,pd=[],hd=[],ao=null,vi=0,md=null,Gl=-1,Po=0,Yl=0,wi=null,Zl=!1;function Fn(){return 48&ut?gn():Gl!==-1?Gl:Gl=gn()}function No(r){if(!(2&(r=r.mode)))return 1;if(!(4&r))return Ya()===99?1:2;if(Po===0&&(Po=rs),X0.transition!==0){Yl!==0&&(Yl=cd!==null?cd.pendingLanes:0),r=Po;var a=4186112&~Yl;return(a&=-a)==0&&(a=(r=4186112&~r)&-r)==0&&(a=8192),a}return r=Ya(),r=J(4&ut&&r===98?12:r=function(l){switch(l){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(r),Po)}function Lo(r,a,l){if(50<vi)throw vi=0,md=null,Error(b(185));if((r=Jl(r,a))===null)return null;de(r,a,l),r===En&&(os|=a,ln===4&&ss(r,yn));var h=Ya();a===1?8&ut&&!(48&ut)?gd(r):(Zn(r,l),ut===0&&(as(),no())):(!(4&ut)||h!==98&&h!==99||(ao===null?ao=new Set([r]):ao.add(r)),Zn(r,l)),cd=r}function Jl(r,a){r.lanes|=a;var l=r.alternate;for(l!==null&&(l.lanes|=a),l=r,r=r.return;r!==null;)r.childLanes|=a,(l=r.alternate)!==null&&(l.childLanes|=a),l=r,r=r.return;return l.tag===3?l.stateNode:null}function Zn(r,a){for(var l=r.callbackNode,h=r.suspendedLanes,y=r.pingedLanes,x=r.expirationTimes,E=r.pendingLanes;0<E;){var O=31-Fe(E),j=1<<O,U=x[O];if(U===-1){if(!(j&h)||j&y){U=a,K(j);var oe=B;x[O]=10<=oe?U+250:6<=oe?U+5e3:-1}}else U<=a&&(r.expiredLanes|=j);E&=~j}if(h=Z(r,r===En?yn:0),a=B,h===0)l!==null&&(l!==Nu&&Au(l),r.callbackNode=null,r.callbackPriority=0);else{if(l!==null){if(r.callbackPriority===a)return;l!==Nu&&Au(l)}a===15?(l=gd.bind(null,r),to===null?(to=[l],Il=Iu(jl,kh)):to.push(l),l=Nu):a===14?l=ri(99,gd.bind(null,r)):(l=function(ke){switch(ke){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(b(358,ke))}}(a),l=ri(l,Em.bind(null,r))),r.callbackPriority=a,r.callbackNode=l}}function Em(r){if(Gl=-1,Yl=Po=0,(48&ut)!=0)throw Error(b(327));var a=r.callbackNode;if(ha()&&r.callbackNode!==a)return null;var l=Z(r,r===En?yn:0);if(l===0)return null;var h=l,y=ut;ut|=16;var x=_m();for(En===r&&yn===h||(as(),is(r,h));;)try{ix();break}catch(O){Tm(r,O)}if(Du(),Ql.current=x,ut=y,rn!==null?h=0:(En=null,yn=0,h=ln),(rs&os)!=0)is(r,0);else if(h!==0){if(h===2&&(ut|=64,r.hydrate&&(r.hydrate=!1,Tu(r.containerInfo)),(l=le(r))!==0&&(h=xi(r,l))),h===1)throw a=Kl,is(r,0),ss(r,l),Zn(r,gn()),a;switch(r.finishedWork=r.current.alternate,r.finishedLanes=l,h){case 0:case 1:throw Error(b(345));case 2:case 5:ls(r);break;case 3:if(ss(r,l),(62914560&l)===l&&10<(h=ud+500-gn())){if(Z(r,0)!==0)break;if(((y=r.suspendedLanes)&l)!==l){Fn(),r.pingedLanes|=r.suspendedLanes&y;break}r.timeoutHandle=ph(ls.bind(null,r),h);break}ls(r);break;case 4:if(ss(r,l),(4186112&l)===l)break;for(h=r.eventTimes,y=-1;0<l;){var E=31-Fe(l);x=1<<E,(E=h[E])>y&&(y=E),l&=~x}if(l=y,10<(l=(120>(l=gn()-l)?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*ax(l/1960))-l)){r.timeoutHandle=ph(ls.bind(null,r),l);break}ls(r);break;default:throw Error(b(329))}}return Zn(r,gn()),r.callbackNode===a?Em.bind(null,r):null}function ss(r,a){for(a&=~ld,a&=~os,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var l=31-Fe(a),h=1<<l;r[l]=-1,a&=~h}}function gd(r){if(48&ut)throw Error(b(327));if(ha(),r===En&&(r.expiredLanes&yn)!=0){var a=yn,l=xi(r,a);rs&os&&(l=xi(r,a=Z(r,a)))}else l=xi(r,a=Z(r,0));if(r.tag!==0&&l===2&&(ut|=64,r.hydrate&&(r.hydrate=!1,Tu(r.containerInfo)),(a=le(r))!==0&&(l=xi(r,a))),l===1)throw l=Kl,is(r,0),ss(r,a),Zn(r,gn()),l;return r.finishedWork=r.current.alternate,r.finishedLanes=a,ls(r),Zn(r,gn()),null}function Sm(r,a){var l=ut;ut&=-2,ut|=8;try{return r(a)}finally{(ut=l)===0&&(as(),no())}}function ec(r,a){Ht(id,pa),pa|=a,rs|=a}function yd(){pa=id.current,Ft(id)}function is(r,a){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,F0(l)),rn!==null)for(l=rn.return;l!==null;){var h=l;switch(h.tag){case 1:(h=h.type.childContextTypes)!=null&&Ru();break;case 3:ts(),Ft(jn),Ft(mn),Hu();break;case 5:Fu(h);break;case 4:ts();break;case 13:case 19:Ft(Xt);break;case 10:Mu(h);break;case 23:case 24:yd()}l=l.return}En=r,rn=Mo(r.current,null),yn=pa=rs=a,ln=0,Kl=null,ld=os=gi=0}function Tm(r,a){for(;;){var l=rn;try{if(Du(),ci.current=Xl,Ul){for(var h=Qt.memoizedState;h!==null;){var y=h.queue;y!==null&&(y.pending=null),h=h.next}Ul=!1}if(ui=0,sn=Cn=Qt=null,di=!1,sd.current=null,l===null||l.return===null){ln=1,Kl=a,rn=null;break}e:{var x=r,E=l.return,O=l,j=a;if(a=yn,O.flags|=2048,O.firstEffect=O.lastEffect=null,j!==null&&typeof j=="object"&&typeof j.then=="function"){var U=j;if(!(2&O.mode)){var oe=O.alternate;oe?(O.updateQueue=oe.updateQueue,O.memoizedState=oe.memoizedState,O.lanes=oe.lanes):(O.updateQueue=null,O.memoizedState=null)}var ke=(1&Xt.current)!=0,he=E;do{var Ie;if(Ie=he.tag===13){var Ye=he.memoizedState;if(Ye!==null)Ie=Ye.dehydrated!==null;else{var Ze=he.memoizedProps;Ie=Ze.fallback!==void 0&&(Ze.unstable_avoidThisFallback!==!0||!ke)}}if(Ie){var X=he.updateQueue;if(X===null){var F=new Set;F.add(U),he.updateQueue=F}else X.add(U);if(!(2&he.mode)){if(he.flags|=64,O.flags|=16384,O.flags&=-2981,O.tag===1)if(O.alternate===null)O.tag=17;else{var V=Ro(-1,1);V.tag=2,jo(O,V)}O.lanes|=1;break e}j=void 0,O=a;var ce=x.pingCache;if(ce===null?(ce=x.pingCache=new ex,j=new Set,ce.set(U,j)):(j=ce.get(U))===void 0&&(j=new Set,ce.set(U,j)),!j.has(O)){j.add(O);var pe=fx.bind(null,x,U,O);U.then(pe,pe)}he.flags|=4096,he.lanes=a;break e}he=he.return}while(he!==null);j=Error((xt(O.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}ln!==5&&(ln=2),j=td(j,O),he=E;do{switch(he.tag){case 3:x=j,he.flags|=4096,a&=-a,he.lanes|=a,jh(he,fm(0,x,a));break e;case 1:x=j;var tt=he.type,Ne=he.stateNode;if(!(64&he.flags)&&(typeof tt.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(Mr===null||!Mr.has(Ne)))){he.flags|=4096,a&=-a,he.lanes|=a,jh(he,pm(he,x,a));break e}}he=he.return}while(he!==null)}Om(l)}catch(ct){a=ct,rn===l&&l!==null&&(rn=l=l.return);continue}break}}function _m(){var r=Ql.current;return Ql.current=Xl,r===null?Xl:r}function xi(r,a){var l=ut;ut|=16;var h=_m();for(En===r&&yn===a||is(r,a);;)try{sx();break}catch(y){Tm(r,y)}if(Du(),ut=l,Ql.current=h,rn!==null)throw Error(b(261));return En=null,yn=0,ln}function sx(){for(;rn!==null;)km(rn)}function ix(){for(;rn!==null&&!q0();)km(rn)}function km(r){var a=Cm(r.alternate,r,pa);r.memoizedProps=r.pendingProps,a===null?Om(r):rn=a,sd.current=null}function Om(r){var a=r;do{var l=a.alternate;if(r=a.return,(2048&a.flags)==0){if((l=Z0(l,a,pa))!==null)return void(rn=l);if((l=a).tag!==24&&l.tag!==23||l.memoizedState===null||1073741824&pa||!(4&l.mode)){for(var h=0,y=l.child;y!==null;)h|=y.lanes|y.childLanes,y=y.sibling;l.childLanes=h}r!==null&&!(2048&r.flags)&&(r.firstEffect===null&&(r.firstEffect=a.firstEffect),a.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=a.firstEffect),r.lastEffect=a.lastEffect),1<a.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=a:r.firstEffect=a,r.lastEffect=a))}else{if((l=J0(a))!==null)return l.flags&=2047,void(rn=l);r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}if((a=a.sibling)!==null)return void(rn=a);rn=a=r}while(a!==null);ln===0&&(ln=5)}function ls(r){var a=Ya();return Za(99,lx.bind(null,r,a)),null}function lx(r,a){do ha();while(yi!==null);if(48&ut)throw Error(b(327));var l=r.finishedWork;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(b(177));r.callbackNode=null;var h=l.lanes|l.childLanes,y=h,x=r.pendingLanes&~y;r.pendingLanes=y,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=y,r.mutableReadLanes&=y,r.entangledLanes&=y,y=r.entanglements;for(var E=r.eventTimes,O=r.expirationTimes;0<x;){var j=31-Fe(x),U=1<<j;y[j]=0,E[j]=-1,O[j]=-1,x&=~U}if(ao!==null&&!(24&h)&&ao.has(r)&&ao.delete(r),r===En&&(rn=En=null,yn=0),1<l.flags?l.lastEffect!==null?(l.lastEffect.nextEffect=l,h=l.firstEffect):h=l:h=l.firstEffect,h!==null){if(y=ut,ut|=32,sd.current=null,Cu=nt,bu(E=eh())){if("selectionStart"in E)O={start:E.selectionStart,end:E.selectionEnd};else e:if(O=(O=E.ownerDocument)&&O.defaultView||window,(U=O.getSelection&&O.getSelection())&&U.rangeCount!==0){O=U.anchorNode,x=U.anchorOffset,j=U.focusNode,U=U.focusOffset;try{O.nodeType,j.nodeType}catch{O=null;break e}var oe=0,ke=-1,he=-1,Ie=0,Ye=0,Ze=E,X=null;t:for(;;){for(var F;Ze!==O||x!==0&&Ze.nodeType!==3||(ke=oe+x),Ze!==j||U!==0&&Ze.nodeType!==3||(he=oe+U),Ze.nodeType===3&&(oe+=Ze.nodeValue.length),(F=Ze.firstChild)!==null;)X=Ze,Ze=F;for(;;){if(Ze===E)break t;if(X===O&&++Ie===x&&(ke=oe),X===j&&++Ye===U&&(he=oe),(F=Ze.nextSibling)!==null)break;X=(Ze=X).parentNode}Ze=F}O=ke===-1||he===-1?null:{start:ke,end:he}}else O=null;O=O||{start:0,end:0}}else O=null;Eu={focusedElem:E,selectionRange:O},nt=!1,wi=null,Zl=!1,je=h;do try{cx()}catch(Ge){if(je===null)throw Error(b(330));Do(je,Ge),je=je.nextEffect}while(je!==null);wi=null,je=h;do try{for(E=r;je!==null;){var V=je.flags;if(16&V&&Qr(je.stateNode,""),128&V){var ce=je.alternate;if(ce!==null){var pe=ce.ref;pe!==null&&(typeof pe=="function"?pe(null):pe.current=null)}}switch(1038&V){case 2:vm(je),je.flags&=-3;break;case 6:vm(je),je.flags&=-3,ad(je.alternate,je);break;case 1024:je.flags&=-1025;break;case 1028:je.flags&=-1025,ad(je.alternate,je);break;case 4:ad(je.alternate,je);break;case 8:wm(E,O=je);var tt=O.alternate;ym(O),tt!==null&&ym(tt)}je=je.nextEffect}}catch(Ge){if(je===null)throw Error(b(330));Do(je,Ge),je=je.nextEffect}while(je!==null);if(pe=Eu,ce=eh(),V=pe.focusedElem,E=pe.selectionRange,ce!==V&&V&&V.ownerDocument&&Jp(V.ownerDocument.documentElement,V)){for(E!==null&&bu(V)&&(ce=E.start,(pe=E.end)===void 0&&(pe=ce),"selectionStart"in V?(V.selectionStart=ce,V.selectionEnd=Math.min(pe,V.value.length)):(pe=(ce=V.ownerDocument||document)&&ce.defaultView||window).getSelection&&(pe=pe.getSelection(),O=V.textContent.length,tt=Math.min(E.start,O),E=E.end===void 0?tt:Math.min(E.end,O),!pe.extend&&tt>E&&(O=E,E=tt,tt=O),O=Zp(V,tt),x=Zp(V,E),O&&x&&(pe.rangeCount!==1||pe.anchorNode!==O.node||pe.anchorOffset!==O.offset||pe.focusNode!==x.node||pe.focusOffset!==x.offset)&&((ce=ce.createRange()).setStart(O.node,O.offset),pe.removeAllRanges(),tt>E?(pe.addRange(ce),pe.extend(x.node,x.offset)):(ce.setEnd(x.node,x.offset),pe.addRange(ce))))),ce=[],pe=V;pe=pe.parentNode;)pe.nodeType===1&&ce.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<ce.length;V++)(pe=ce[V]).element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}nt=!!Cu,Eu=Cu=null,r.current=l,je=h;do try{for(V=r;je!==null;){var Ne=je.flags;if(36&Ne&&rx(V,je.alternate,je),128&Ne){ce=void 0;var ct=je.ref;if(ct!==null){var vt=je.stateNode;je.tag,ce=vt,typeof ct=="function"?ct(ce):ct.current=ce}}je=je.nextEffect}}catch(Ge){if(je===null)throw Error(b(330));Do(je,Ge),je=je.nextEffect}while(je!==null);je=null,V0(),ut=y}else r.current=l;if(Ao)Ao=!1,yi=r,bi=a;else for(je=h;je!==null;)a=je.nextEffect,je.nextEffect=null,8&je.flags&&((Ne=je).sibling=null,Ne.stateNode=null),je=a;if((h=r.pendingLanes)===0&&(Mr=null),h===1?r===md?vi++:(vi=0,md=r):vi=0,l=l.stateNode,ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(ju,l,void 0,(64&l.current.flags)==64)}catch{}if(Zn(r,gn()),Wl)throw Wl=!1,r=fd,fd=null,r;return 8&ut||no(),null}function cx(){for(;je!==null;){var r=je.alternate;Zl||wi===null||(8&je.flags?zs(je,wi)&&(Zl=!0):je.tag===13&&ox(r,je)&&zs(je,wi)&&(Zl=!0));var a=je.flags;256&a&&nx(r,je),!(512&a)||Ao||(Ao=!0,ri(97,function(){return ha(),null})),je=je.nextEffect}}function ha(){if(bi!==90){var r=97<bi?97:bi;return bi=90,Za(r,dx)}return!1}function ux(r,a){pd.push(a,r),Ao||(Ao=!0,ri(97,function(){return ha(),null}))}function Rm(r,a){hd.push(a,r),Ao||(Ao=!0,ri(97,function(){return ha(),null}))}function dx(){if(yi===null)return!1;var r=yi;if(yi=null,(48&ut)!=0)throw Error(b(331));var a=ut;ut|=32;var l=hd;hd=[];for(var h=0;h<l.length;h+=2){var y=l[h],x=l[h+1],E=y.destroy;if(y.destroy=void 0,typeof E=="function")try{E()}catch(j){if(x===null)throw Error(b(330));Do(x,j)}}for(l=pd,pd=[],h=0;h<l.length;h+=2){y=l[h],x=l[h+1];try{var O=y.create;y.destroy=O()}catch(j){if(x===null)throw Error(b(330));Do(x,j)}}for(O=r.current.firstEffect;O!==null;)r=O.nextEffect,O.nextEffect=null,8&O.flags&&(O.sibling=null,O.stateNode=null),O=r;return ut=a,no(),!0}function jm(r,a,l){jo(r,a=fm(0,a=td(l,a),1)),a=Fn(),(r=Jl(r,1))!==null&&(de(r,1,a),Zn(r,a))}function Do(r,a){if(r.tag===3)jm(r,r,a);else for(var l=r.return;l!==null;){if(l.tag===3){jm(l,r,a);break}if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Mr===null||!Mr.has(h))){var y=pm(l,r=td(a,r),1);if(jo(l,y),y=Fn(),(l=Jl(l,1))!==null)de(l,1,y),Zn(l,y);else if(typeof h.componentDidCatch=="function"&&(Mr===null||!Mr.has(h)))try{h.componentDidCatch(a,r)}catch{}break}}l=l.return}}function fx(r,a,l){var h=r.pingCache;h!==null&&h.delete(a),a=Fn(),r.pingedLanes|=r.suspendedLanes&l,En===r&&(yn&l)===l&&(ln===4||ln===3&&(62914560&yn)===yn&&500>gn()-ud?is(r,0):ld|=l),Zn(r,a)}function px(r,a){var l=r.stateNode;l!==null&&l.delete(a),(a=0)==0&&(2&(a=r.mode)?4&a?(Po===0&&(Po=rs),(a=re(62914560&~Po))===0&&(a=4194304)):a=Ya()===99?1:2:a=1),l=Fn(),(r=Jl(r,a))!==null&&(de(r,a,l),Zn(r,l))}function hx(r,a,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(r,a,l,h){return new hx(r,a,l,h)}function bd(r){return!(!(r=r.prototype)||!r.isReactComponent)}function Mo(r,a){var l=r.alternate;return l===null?((l=Jn(r.tag,a,r.key,r.mode)).elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null),l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function tc(r,a,l,h,y,x){var E=2;if(h=r,typeof r=="function")bd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case Y:return cs(l.children,y,x,a);case ue:E=8,y|=16;break;case ve:E=8,y|=1;break;case ie:return(r=Jn(12,l,a,8|y)).elementType=ie,r.type=ie,r.lanes=x,r;case Le:return(r=Jn(13,l,a,y)).type=Le,r.elementType=Le,r.lanes=x,r;case Je:return(r=Jn(19,l,a,y)).elementType=Je,r.lanes=x,r;case ae:return vd(l,y,x,a);case W:return(r=Jn(24,l,a,y)).elementType=W,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case we:E=10;break e;case ze:E=9;break e;case We:E=11;break e;case ft:E=14;break e;case I:E=16,h=null;break e;case M:E=22;break e}throw Error(b(130,r==null?r:typeof r,""))}return(a=Jn(E,l,a,y)).elementType=r,a.type=h,a.lanes=x,a}function cs(r,a,l,h){return(r=Jn(7,r,h,a)).lanes=l,r}function vd(r,a,l,h){return(r=Jn(23,r,h,a)).elementType=ae,r.lanes=l,r}function wd(r,a,l){return(r=Jn(6,r,null,a)).lanes=l,r}function xd(r,a,l){return(a=Jn(4,r.children!==null?r.children:[],r.key,a)).lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function mx(r,a,l){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=l,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=xe(0),this.expirationTimes=xe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.mutableSourceEagerHydrationData=null}function nc(r,a,l,h){var y=a.current,x=Fn(),E=No(y);e:if(l){t:{if(Kr(l=l._reactInternals)!==l||l.tag!==1)throw Error(b(170));var O=l;do{switch(O.tag){case 3:O=O.stateNode.context;break t;case 1:if(zn(O.type)){O=O.stateNode.__reactInternalMemoizedMergedChildContext;break t}}O=O.return}while(O!==null);throw Error(b(171))}if(l.tag===1){var j=l.type;if(zn(j)){l=bh(l,j,O);break e}}l=O}else l=ko;return a.context===null?a.context=l:a.pendingContext=l,(a=Ro(x,E)).payload={element:r},(h=h===void 0?null:h)!==null&&(a.callback=h),jo(y,a),Lo(y,E,x),E}function Cd(r){return(r=r.current).child?(r.child.tag,r.child.stateNode):null}function Im(r,a){if((r=r.memoizedState)!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Ed(r,a){Im(r,a),(r=r.alternate)&&Im(r,a)}function Sd(r,a,l){var h=l!=null&&l.hydrationOptions!=null&&l.hydrationOptions.mutableSources||null;if(l=new mx(r,a,l!=null&&l.hydrate===!0),a=Jn(3,null,null,a===2?7:a===1?3:0),l.current=a,a.stateNode=l,Bu(a),r[Ka]=l.current,ih(r.nodeType===8?r.parentNode:r),h)for(r=0;r<h.length;r++){var y=(a=h[r])._getVersion;y=y(a._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[a,y]:l.mutableSourceEagerHydrationData.push(a,y)}this._internalRoot=l}function Am(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Pm(r,a,l,h,y){var x=l._reactRootContainer;if(x){var E=x._internalRoot;if(typeof y=="function"){var O=y;y=function(){var U=Cd(E);O.call(U)}}nc(a,E,r,y)}else{if(x=l._reactRootContainer=function(U,oe){if(oe||(oe=!(!(oe=U?U.nodeType===9?U.documentElement:U.firstChild:null)||oe.nodeType!==1||!oe.hasAttribute("data-reactroot"))),!oe)for(var ke;ke=U.lastChild;)U.removeChild(ke);return new Sd(U,0,oe?{hydrate:!0}:void 0)}(l,h),E=x._internalRoot,typeof y=="function"){var j=y;y=function(){var U=Cd(E);j.call(U)}}Sm(function(){nc(a,E,r,y)})}return Cd(E)}Cm=function(r,a,l){var h=a.lanes;if(r!==null)if(r.memoizedProps!==a.pendingProps||jn.current)hr=!0;else{if(!(l&h)){switch(hr=!1,a.tag){case 3:om(a),qu();break;case 5:Bh(a);break;case 1:zn(a.type)&&Rl(a);break;case 4:$u(a,a.stateNode.containerInfo);break;case 10:h=a.memoizedProps.value;var y=a.type._context;Ht(Al,y._currentValue),y._currentValue=h;break;case 13:if(a.memoizedState!==null)return l&a.child.childLanes?lm(r,a,l):(Ht(Xt,1&Xt.current),(a=oo(r,a,l))!==null?a.sibling:null);Ht(Xt,1&Xt.current);break;case 19:if(h=(l&a.childLanes)!=0,(64&r.flags)!=0){if(h)return dm(r,a,l);a.flags|=64}if((y=a.memoizedState)!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ht(Xt,Xt.current),h)break;return null;case 23:case 24:return a.lanes=0,tm(r,a,l)}return oo(r,a,l)}hr=(16384&r.flags)!=0}else hr=!1;switch(a.lanes=0,a.tag){case 2:if(h=a.type,r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,y=Ga(a,mn.current),es(a,l),y=Xu(null,a,h,r,y,l),a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0){if(a.tag=1,a.memoizedState=null,a.updateQueue=null,zn(h)){var x=!0;Rl(a)}else x=!1;a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Bu(a);var E=h.getDerivedStateFromProps;typeof E=="function"&&Ll(a,h,E,r),y.updater=Dl,a.stateNode=y,y._reactInternals=a,zu(a,h,r,l),a=Zu(null,a,h,!0,x,l)}else a.tag=0,$n(null,a,y,l),a=a.child;return a;case 16:y=a.elementType;e:{switch(r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),r=a.pendingProps,y=(x=y._init)(y._payload),a.type=y,x=a.tag=function(oe){if(typeof oe=="function")return bd(oe)?1:0;if(oe!=null){if((oe=oe.$$typeof)===We)return 11;if(oe===ft)return 14}return 2}(y),r=pr(y,r),x){case 0:a=Yu(null,a,y,r,l);break e;case 1:a=rm(null,a,y,r,l);break e;case 11:a=Zh(null,a,y,r,l);break e;case 14:a=Jh(null,a,y,pr(y.type,r),h,l);break e}throw Error(b(306,y,""))}return a;case 0:return h=a.type,y=a.pendingProps,Yu(r,a,h,y=a.elementType===h?y:pr(h,y),l);case 1:return h=a.type,y=a.pendingProps,rm(r,a,h,y=a.elementType===h?y:pr(h,y),l);case 3:if(om(a),h=a.updateQueue,r===null||h===null)throw Error(b(282));if(h=a.pendingProps,y=(y=a.memoizedState)!==null?y.element:null,Rh(r,a),oi(a,h,null,l),(h=a.memoizedState.element)===y)qu(),a=oo(r,a,l);else{if((x=(y=a.stateNode).hydrate)&&(Io=Qa(a.stateNode.containerInfo.firstChild),ro=a,x=Lr=!0),x){if((r=y.mutableSourceEagerHydrationData)!=null)for(y=0;y<r.length;y+=2)(x=r[y])._workInProgressVersionPrimary=r[y+1],ns.push(x);for(l=Mh(a,null,h,l),a.child=l;l;)l.flags=-3&l.flags|1024,l=l.sibling}else $n(r,a,h,l),qu();a=a.child}return a;case 5:return Bh(a),r===null&&Uu(a),h=a.type,y=a.pendingProps,x=r!==null?r.memoizedProps:null,E=y.children,Su(h,y)?E=null:x!==null&&Su(h,x)&&(a.flags|=16),nm(r,a),$n(r,a,E,l),a.child;case 6:return r===null&&Uu(a),null;case 13:return lm(r,a,l);case 4:return $u(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=zl(a,null,h,l):$n(r,a,h,l),a.child;case 11:return h=a.type,y=a.pendingProps,Zh(r,a,h,y=a.elementType===h?y:pr(h,y),l);case 7:return $n(r,a,a.pendingProps,l),a.child;case 8:case 12:return $n(r,a,a.pendingProps.children,l),a.child;case 10:e:{h=a.type._context,y=a.pendingProps,E=a.memoizedProps,x=y.value;var O=a.type._context;if(Ht(Al,O._currentValue),O._currentValue=x,E!==null)if(O=E.value,(x=Wn(O,x)?0:0|(typeof h._calculateChangedBits=="function"?h._calculateChangedBits(O,x):1073741823))==0){if(E.children===y.children&&!jn.current){a=oo(r,a,l);break e}}else for((O=a.child)!==null&&(O.return=a);O!==null;){var j=O.dependencies;if(j!==null){E=O.child;for(var U=j.firstContext;U!==null;){if(U.context===h&&U.observedBits&x){O.tag===1&&((U=Ro(-1,l&-l)).tag=2,jo(O,U)),O.lanes|=l,(U=O.alternate)!==null&&(U.lanes|=l),Oh(O.return,l),j.lanes|=l;break}U=U.next}}else E=O.tag===10&&O.type===a.type?null:O.child;if(E!==null)E.return=O;else for(E=O;E!==null;){if(E===a){E=null;break}if((O=E.sibling)!==null){O.return=E.return,E=O;break}E=E.return}O=E}$n(r,a,y.children,l),a=a.child}return a;case 9:return y=a.type,h=(x=a.pendingProps).children,es(a,l),h=h(y=Gn(y,x.unstable_observedBits)),a.flags|=1,$n(r,a,h,l),a.child;case 14:return x=pr(y=a.type,a.pendingProps),Jh(r,a,y,x=pr(y.type,x),h,l);case 15:return em(r,a,a.type,a.pendingProps,h,l);case 17:return h=a.type,y=a.pendingProps,y=a.elementType===h?y:pr(h,y),r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2),a.tag=1,zn(h)?(r=!0,Rl(a)):r=!1,es(a,l),Nh(a,h,y),zu(a,h,y,l),Zu(null,a,h,!0,r,l);case 19:return dm(r,a,l);case 23:case 24:return tm(r,a,l)}throw Error(b(156,a.tag))},Sd.prototype.render=function(r){nc(r,this._internalRoot,null,null)},Sd.prototype.unmount=function(){var r=this._internalRoot,a=r.containerInfo;nc(null,r,null,function(){a[Ka]=null})},dt=function(r){r.tag===13&&(Lo(r,4,Fn()),Ed(r,4))},La=function(r){r.tag===13&&(Lo(r,67108864,Fn()),Ed(r,67108864))},pl=function(r){if(r.tag===13){var a=Fn(),l=No(r);Lo(r,l,a),Ed(r,l)}},hl=function(r,a){return a()},He=function(r,a,l){switch(a){case"input":if(dn(r,l),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==r&&h.form===r.form){var y=ku(h);if(!y)throw Error(b(90));_n(h),dn(h,y)}}}break;case"textarea":Pa(r,l);break;case"select":(a=l.value)!=null&&Sr(r,!!l.multiple,a,!1)}},Dt=function(r,a){var l=ut;ut|=1;try{return r(a)}finally{(ut=l)===0&&(as(),no())}},_t=function(r,a,l,h,y){var x=ut;ut|=4;try{return Za(98,r.bind(null,a,l,h,y))}finally{(ut=x)===0&&(as(),no())}},tn=function(){!(49&ut)&&(function(){if(ao!==null){var r=ao;ao=null,r.forEach(function(a){a.expiredLanes|=24&a.pendingLanes,Zn(a,gn())})}no()}(),ha())},wt=function(r,a){var l=ut;ut|=2;try{return r(a)}finally{(ut=l)===0&&(as(),no())}};var Ci={findFiberByHostInstance:ia,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},gx={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return(r=function(a){if(a=function(h){var y=h.alternate;if(!y){if((y=Kr(h))===null)throw Error(b(188));return y!==h?null:h}for(var x=h,E=y;;){var O=x.return;if(O===null)break;var j=O.alternate;if(j===null){if((E=O.return)!==null){x=E;continue}break}if(O.child===j.child){for(j=O.child;j;){if(j===x)return Na(O),h;if(j===E)return Na(O),y;j=j.sibling}throw Error(b(188))}if(x.return!==E.return)x=O,E=j;else{for(var U=!1,oe=O.child;oe;){if(oe===x){U=!0,x=O,E=j;break}if(oe===E){U=!0,E=O,x=j;break}oe=oe.sibling}if(!U){for(oe=j.child;oe;){if(oe===x){U=!0,x=j,E=O;break}if(oe===E){U=!0,E=j,x=O;break}oe=oe.sibling}if(!U)throw Error(b(189))}}if(x.alternate!==E)throw Error(b(190))}if(x.tag!==3)throw Error(b(188));return x.stateNode.current===x?h:y}(a),!a)return null;for(var l=a;;){if(l.tag===5||l.tag===6)return l;if(l.child)l.child.return=l,l=l.child;else{if(l===a)break;for(;!l.sibling;){if(!l.return||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}}return null}(r))===null?null:r.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ju=rc.inject(gx),ca=rc}catch{}}d.render=function(r,a,l){if(!Am(a))throw Error(b(200));return Pm(null,r,a,!1,l)},d.unmountComponentAtNode=function(r){if(!Am(r))throw Error(b(40));return!!r._reactRootContainer&&(Sm(function(){Pm(null,null,r,!1,function(){r._reactRootContainer=null,r[Ka]=null})}),!0)}},935:(c,d,f)=>{(function m(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE=="function")try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(p){console.error(p)}})(),c.exports=f(448)},590:c=>{var d=typeof Element<"u",f=typeof Map=="function",m=typeof Set=="function",p=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function g(b,v){if(b===v)return!0;if(b&&v&&typeof b=="object"&&typeof v=="object"){if(b.constructor!==v.constructor)return!1;var w,S,T,R;if(Array.isArray(b)){if((w=b.length)!=v.length)return!1;for(S=w;S--!=0;)if(!g(b[S],v[S]))return!1;return!0}if(f&&b instanceof Map&&v instanceof Map){if(b.size!==v.size)return!1;for(R=b.entries();!(S=R.next()).done;)if(!v.has(S.value[0]))return!1;for(R=b.entries();!(S=R.next()).done;)if(!g(S.value[1],v.get(S.value[0])))return!1;return!0}if(m&&b instanceof Set&&v instanceof Set){if(b.size!==v.size)return!1;for(R=b.entries();!(S=R.next()).done;)if(!v.has(S.value[0]))return!1;return!0}if(p&&ArrayBuffer.isView(b)&&ArrayBuffer.isView(v)){if((w=b.length)!=v.length)return!1;for(S=w;S--!=0;)if(b[S]!==v[S])return!1;return!0}if(b.constructor===RegExp)return b.source===v.source&&b.flags===v.flags;if(b.valueOf!==Object.prototype.valueOf)return b.valueOf()===v.valueOf();if(b.toString!==Object.prototype.toString)return b.toString()===v.toString();if((w=(T=Object.keys(b)).length)!==Object.keys(v).length)return!1;for(S=w;S--!=0;)if(!Object.prototype.hasOwnProperty.call(v,T[S]))return!1;if(d&&b instanceof Element)return!1;for(S=w;S--!=0;)if((T[S]!=="_owner"&&T[S]!=="__v"&&T[S]!=="__o"||!b.$$typeof)&&!g(b[T[S]],v[T[S]]))return!1;return!0}return b!=b&&v!=v}c.exports=function(b,v){try{return g(b,v)}catch(w){if((w.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw w}}},408:(c,d,f)=>{var m=f(418),p=60103,g=60106;d.Fragment=60107,d.StrictMode=60108,d.Profiler=60114;var b=60109,v=60110,w=60112;d.Suspense=60113;var S=60115,T=60116;if(typeof Symbol=="function"&&Symbol.for){var R=Symbol.for;p=R("react.element"),g=R("react.portal"),d.Fragment=R("react.fragment"),d.StrictMode=R("react.strict_mode"),d.Profiler=R("react.profiler"),b=R("react.provider"),v=R("react.context"),w=R("react.forward_ref"),d.Suspense=R("react.suspense"),S=R("react.memo"),T=R("react.lazy")}var L=typeof Symbol=="function"&&Symbol.iterator;function q(I){for(var M="https://reactjs.org/docs/error-decoder.html?invariant="+I,G=1;G<arguments.length;G++)M+="&args[]="+encodeURIComponent(arguments[G]);return"Minified React error #"+I+"; visit "+M+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee={};function D(I,M,G){this.props=I,this.context=M,this.refs=ee,this.updater=G||Q}function A(){}function P(I,M,G){this.props=I,this.context=M,this.refs=ee,this.updater=G||Q}D.prototype.isReactComponent={},D.prototype.setState=function(I,M){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error(q(85));this.updater.enqueueSetState(this,I,M,"setState")},D.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")},A.prototype=D.prototype;var H=P.prototype=new A;H.constructor=P,m(H,D.prototype),H.isPureReactComponent=!0;var fe={current:null},me=Object.prototype.hasOwnProperty,ge={key:!0,ref:!0,__self:!0,__source:!0};function ye(I,M,G){var ue,ae={},W=null,te=null;if(M!=null)for(ue in M.ref!==void 0&&(te=M.ref),M.key!==void 0&&(W=""+M.key),M)me.call(M,ue)&&!ge.hasOwnProperty(ue)&&(ae[ue]=M[ue]);var Ce=arguments.length-2;if(Ce===1)ae.children=G;else if(1<Ce){for(var Re=Array(Ce),Ee=0;Ee<Ce;Ee++)Re[Ee]=arguments[Ee+2];ae.children=Re}if(I&&I.defaultProps)for(ue in Ce=I.defaultProps)ae[ue]===void 0&&(ae[ue]=Ce[ue]);return{$$typeof:p,type:I,key:W,ref:te,props:ae,_owner:fe.current}}function Y(I){return typeof I=="object"&&I!==null&&I.$$typeof===p}var ve=/\/+/g;function ie(I,M){return typeof I=="object"&&I!==null&&I.key!=null?function(G){var ue={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ae){return ue[ae]})}(""+I.key):M.toString(36)}function we(I,M,G,ue,ae){var W=typeof I;W!=="undefined"&&W!=="boolean"||(I=null);var te=!1;if(I===null)te=!0;else switch(W){case"string":case"number":te=!0;break;case"object":switch(I.$$typeof){case p:case g:te=!0}}if(te)return ae=ae(te=I),I=ue===""?"."+ie(te,0):ue,Array.isArray(ae)?(G="",I!=null&&(G=I.replace(ve,"$&/")+"/"),we(ae,M,G,"",function(Ee){return Ee})):ae!=null&&(Y(ae)&&(ae=function(Ee,ot){return{$$typeof:p,type:Ee.type,key:ot,ref:Ee.ref,props:Ee.props,_owner:Ee._owner}}(ae,G+(!ae.key||te&&te.key===ae.key?"":(""+ae.key).replace(ve,"$&/")+"/")+I)),M.push(ae)),1;if(te=0,ue=ue===""?".":ue+":",Array.isArray(I))for(var Ce=0;Ce<I.length;Ce++){var Re=ue+ie(W=I[Ce],Ce);te+=we(W,M,G,Re,ae)}else if(Re=function(Ee){return Ee===null||typeof Ee!="object"?null:typeof(Ee=L&&Ee[L]||Ee["@@iterator"])=="function"?Ee:null}(I),typeof Re=="function")for(I=Re.call(I),Ce=0;!(W=I.next()).done;)te+=we(W=W.value,M,G,Re=ue+ie(W,Ce++),ae);else if(W==="object")throw M=""+I,Error(q(31,M==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":M));return te}function ze(I,M,G){if(I==null)return I;var ue=[],ae=0;return we(I,ue,"","",function(W){return M.call(G,W,ae++)}),ue}function We(I){if(I._status===-1){var M=I._result;M=M(),I._status=0,I._result=M,M.then(function(G){I._status===0&&(G=G.default,I._status=1,I._result=G)},function(G){I._status===0&&(I._status=2,I._result=G)})}if(I._status===1)return I._result;throw I._result}var Le={current:null};function Je(){var I=Le.current;if(I===null)throw Error(q(321));return I}var ft={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:fe,IsSomeRendererActing:{current:!1},assign:m};d.Children={map:ze,forEach:function(I,M,G){ze(I,function(){M.apply(this,arguments)},G)},count:function(I){var M=0;return ze(I,function(){M++}),M},toArray:function(I){return ze(I,function(M){return M})||[]},only:function(I){if(!Y(I))throw Error(q(143));return I}},d.Component=D,d.PureComponent=P,d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ft,d.cloneElement=function(I,M,G){if(I==null)throw Error(q(267,I));var ue=m({},I.props),ae=I.key,W=I.ref,te=I._owner;if(M!=null){if(M.ref!==void 0&&(W=M.ref,te=fe.current),M.key!==void 0&&(ae=""+M.key),I.type&&I.type.defaultProps)var Ce=I.type.defaultProps;for(Re in M)me.call(M,Re)&&!ge.hasOwnProperty(Re)&&(ue[Re]=M[Re]===void 0&&Ce!==void 0?Ce[Re]:M[Re])}var Re=arguments.length-2;if(Re===1)ue.children=G;else if(1<Re){Ce=Array(Re);for(var Ee=0;Ee<Re;Ee++)Ce[Ee]=arguments[Ee+2];ue.children=Ce}return{$$typeof:p,type:I.type,key:ae,ref:W,props:ue,_owner:te}},d.createContext=function(I,M){return M===void 0&&(M=null),(I={$$typeof:v,_calculateChangedBits:M,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:b,_context:I},I.Consumer=I},d.createElement=ye,d.createFactory=function(I){var M=ye.bind(null,I);return M.type=I,M},d.createRef=function(){return{current:null}},d.forwardRef=function(I){return{$$typeof:w,render:I}},d.isValidElement=Y,d.lazy=function(I){return{$$typeof:T,_payload:{_status:-1,_result:I},_init:We}},d.memo=function(I,M){return{$$typeof:S,type:I,compare:M===void 0?null:M}},d.useCallback=function(I,M){return Je().useCallback(I,M)},d.useContext=function(I,M){return Je().useContext(I,M)},d.useDebugValue=function(){},d.useEffect=function(I,M){return Je().useEffect(I,M)},d.useImperativeHandle=function(I,M,G){return Je().useImperativeHandle(I,M,G)},d.useLayoutEffect=function(I,M){return Je().useLayoutEffect(I,M)},d.useMemo=function(I,M){return Je().useMemo(I,M)},d.useReducer=function(I,M,G){return Je().useReducer(I,M,G)},d.useRef=function(I){return Je().useRef(I)},d.useState=function(I){return Je().useState(I)},d.version="17.0.2"},294:(c,d,f)=>{c.exports=f(408)},666:c=>{var d=function(f){var m,p=Object.prototype,g=p.hasOwnProperty,b=typeof Symbol=="function"?Symbol:{},v=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag";function T(I,M,G){return Object.defineProperty(I,M,{value:G,enumerable:!0,configurable:!0,writable:!0}),I[M]}try{T({},"")}catch{T=function(M,G,ue){return M[G]=ue}}function R(I,M,G,ue){var ae=M&&M.prototype instanceof P?M:P,W=Object.create(ae.prototype),te=new Le(ue||[]);return W._invoke=function(Ce,Re,Ee){var ot=q;return function(Tt,Gt){if(ot===ee)throw new Error("Generator is already running");if(ot===D){if(Tt==="throw")throw Gt;return ft()}for(Ee.method=Tt,Ee.arg=Gt;;){var Rt=Ee.delegate;if(Rt){var xt=we(Rt,Ee);if(xt){if(xt===A)continue;return xt}}if(Ee.method==="next")Ee.sent=Ee._sent=Ee.arg;else if(Ee.method==="throw"){if(ot===q)throw ot=D,Ee.arg;Ee.dispatchException(Ee.arg)}else Ee.method==="return"&&Ee.abrupt("return",Ee.arg);ot=ee;var lt=L(Ce,Re,Ee);if(lt.type==="normal"){if(ot=Ee.done?D:Q,lt.arg===A)continue;return{value:lt.arg,done:Ee.done}}lt.type==="throw"&&(ot=D,Ee.method="throw",Ee.arg=lt.arg)}}}(I,G,te),W}function L(I,M,G){try{return{type:"normal",arg:I.call(M,G)}}catch(ue){return{type:"throw",arg:ue}}}f.wrap=R;var q="suspendedStart",Q="suspendedYield",ee="executing",D="completed",A={};function P(){}function H(){}function fe(){}var me={};T(me,v,function(){return this});var ge=Object.getPrototypeOf,ye=ge&&ge(ge(Je([])));ye&&ye!==p&&g.call(ye,v)&&(me=ye);var Y=fe.prototype=P.prototype=Object.create(me);function ve(I){["next","throw","return"].forEach(function(M){T(I,M,function(G){return this._invoke(M,G)})})}function ie(I,M){function G(ae,W,te,Ce){var Re=L(I[ae],I,W);if(Re.type!=="throw"){var Ee=Re.arg,ot=Ee.value;return ot&&typeof ot=="object"&&g.call(ot,"__await")?M.resolve(ot.__await).then(function(Tt){G("next",Tt,te,Ce)},function(Tt){G("throw",Tt,te,Ce)}):M.resolve(ot).then(function(Tt){Ee.value=Tt,te(Ee)},function(Tt){return G("throw",Tt,te,Ce)})}Ce(Re.arg)}var ue;this._invoke=function(ae,W){function te(){return new M(function(Ce,Re){G(ae,W,Ce,Re)})}return ue=ue?ue.then(te,te):te()}}function we(I,M){var G=I.iterator[M.method];if(G===m){if(M.delegate=null,M.method==="throw"){if(I.iterator.return&&(M.method="return",M.arg=m,we(I,M),M.method==="throw"))return A;M.method="throw",M.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var ue=L(G,I.iterator,M.arg);if(ue.type==="throw")return M.method="throw",M.arg=ue.arg,M.delegate=null,A;var ae=ue.arg;return ae?ae.done?(M[I.resultName]=ae.value,M.next=I.nextLoc,M.method!=="return"&&(M.method="next",M.arg=m),M.delegate=null,A):ae:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,A)}function ze(I){var M={tryLoc:I[0]};1 in I&&(M.catchLoc=I[1]),2 in I&&(M.finallyLoc=I[2],M.afterLoc=I[3]),this.tryEntries.push(M)}function We(I){var M=I.completion||{};M.type="normal",delete M.arg,I.completion=M}function Le(I){this.tryEntries=[{tryLoc:"root"}],I.forEach(ze,this),this.reset(!0)}function Je(I){if(I){var M=I[v];if(M)return M.call(I);if(typeof I.next=="function")return I;if(!isNaN(I.length)){var G=-1,ue=function ae(){for(;++G<I.length;)if(g.call(I,G))return ae.value=I[G],ae.done=!1,ae;return ae.value=m,ae.done=!0,ae};return ue.next=ue}}return{next:ft}}function ft(){return{value:m,done:!0}}return H.prototype=fe,T(Y,"constructor",fe),T(fe,"constructor",H),H.displayName=T(fe,S,"GeneratorFunction"),f.isGeneratorFunction=function(I){var M=typeof I=="function"&&I.constructor;return!!M&&(M===H||(M.displayName||M.name)==="GeneratorFunction")},f.mark=function(I){return Object.setPrototypeOf?Object.setPrototypeOf(I,fe):(I.__proto__=fe,T(I,S,"GeneratorFunction")),I.prototype=Object.create(Y),I},f.awrap=function(I){return{__await:I}},ve(ie.prototype),T(ie.prototype,w,function(){return this}),f.AsyncIterator=ie,f.async=function(I,M,G,ue,ae){ae===void 0&&(ae=Promise);var W=new ie(R(I,M,G,ue),ae);return f.isGeneratorFunction(M)?W:W.next().then(function(te){return te.done?te.value:W.next()})},ve(Y),T(Y,S,"Generator"),T(Y,v,function(){return this}),T(Y,"toString",function(){return"[object Generator]"}),f.keys=function(I){var M=[];for(var G in I)M.push(G);return M.reverse(),function ue(){for(;M.length;){var ae=M.pop();if(ae in I)return ue.value=ae,ue.done=!1,ue}return ue.done=!0,ue}},f.values=Je,Le.prototype={constructor:Le,reset:function(I){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(We),!I)for(var M in this)M.charAt(0)==="t"&&g.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=m)},stop:function(){this.done=!0;var I=this.tryEntries[0].completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(I){if(this.done)throw I;var M=this;function G(Re,Ee){return W.type="throw",W.arg=I,M.next=Re,Ee&&(M.method="next",M.arg=m),!!Ee}for(var ue=this.tryEntries.length-1;ue>=0;--ue){var ae=this.tryEntries[ue],W=ae.completion;if(ae.tryLoc==="root")return G("end");if(ae.tryLoc<=this.prev){var te=g.call(ae,"catchLoc"),Ce=g.call(ae,"finallyLoc");if(te&&Ce){if(this.prev<ae.catchLoc)return G(ae.catchLoc,!0);if(this.prev<ae.finallyLoc)return G(ae.finallyLoc)}else if(te){if(this.prev<ae.catchLoc)return G(ae.catchLoc,!0)}else{if(!Ce)throw new Error("try statement without catch or finally");if(this.prev<ae.finallyLoc)return G(ae.finallyLoc)}}}},abrupt:function(I,M){for(var G=this.tryEntries.length-1;G>=0;--G){var ue=this.tryEntries[G];if(ue.tryLoc<=this.prev&&g.call(ue,"finallyLoc")&&this.prev<ue.finallyLoc){var ae=ue;break}}ae&&(I==="break"||I==="continue")&&ae.tryLoc<=M&&M<=ae.finallyLoc&&(ae=null);var W=ae?ae.completion:{};return W.type=I,W.arg=M,ae?(this.method="next",this.next=ae.finallyLoc,A):this.complete(W)},complete:function(I,M){if(I.type==="throw")throw I.arg;return I.type==="break"||I.type==="continue"?this.next=I.arg:I.type==="return"?(this.rval=this.arg=I.arg,this.method="return",this.next="end"):I.type==="normal"&&M&&(this.next=M),A},finish:function(I){for(var M=this.tryEntries.length-1;M>=0;--M){var G=this.tryEntries[M];if(G.finallyLoc===I)return this.complete(G.completion,G.afterLoc),We(G),A}},catch:function(I){for(var M=this.tryEntries.length-1;M>=0;--M){var G=this.tryEntries[M];if(G.tryLoc===I){var ue=G.completion;if(ue.type==="throw"){var ae=ue.arg;We(G)}return ae}}throw new Error("illegal catch attempt")},delegateYield:function(I,M,G){return this.delegate={iterator:Je(I),resultName:M,nextLoc:G},this.method==="next"&&(this.arg=m),A}},f}(c.exports);try{regeneratorRuntime=d}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}},53:(c,d)=>{var f,m,p,g;if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;d.unstable_now=function(){return b.now()}}else{var v=Date,w=v.now();d.unstable_now=function(){return v.now()-w}}if(typeof window>"u"||typeof MessageChannel!="function"){var S=null,T=null,R=function(){if(S!==null)try{var W=d.unstable_now();S(!0,W),S=null}catch(te){throw setTimeout(R,0),te}};f=function(W){S!==null?setTimeout(f,0,W):(S=W,setTimeout(R,0))},m=function(W,te){T=setTimeout(W,te)},p=function(){clearTimeout(T)},d.unstable_shouldYield=function(){return!1},g=d.unstable_forceFrameRate=function(){}}else{var L=window.setTimeout,q=window.clearTimeout;if(typeof console<"u"){var Q=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Q!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var ee=!1,D=null,A=-1,P=5,H=0;d.unstable_shouldYield=function(){return d.unstable_now()>=H},g=function(){},d.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5};var fe=new MessageChannel,me=fe.port2;fe.port1.onmessage=function(){if(D!==null){var W=d.unstable_now();H=W+P;try{D(!0,W)?me.postMessage(null):(ee=!1,D=null)}catch(te){throw me.postMessage(null),te}}else ee=!1},f=function(W){D=W,ee||(ee=!0,me.postMessage(null))},m=function(W,te){A=L(function(){W(d.unstable_now())},te)},p=function(){q(A),A=-1}}function ge(W,te){var Ce=W.length;W.push(te);e:for(;;){var Re=Ce-1>>>1,Ee=W[Re];if(!(Ee!==void 0&&0<ve(Ee,te)))break e;W[Re]=te,W[Ce]=Ee,Ce=Re}}function ye(W){return(W=W[0])===void 0?null:W}function Y(W){var te=W[0];if(te!==void 0){var Ce=W.pop();if(Ce!==te){W[0]=Ce;e:for(var Re=0,Ee=W.length;Re<Ee;){var ot=2*(Re+1)-1,Tt=W[ot],Gt=ot+1,Rt=W[Gt];if(Tt!==void 0&&0>ve(Tt,Ce))Rt!==void 0&&0>ve(Rt,Tt)?(W[Re]=Rt,W[Gt]=Ce,Re=Gt):(W[Re]=Tt,W[ot]=Ce,Re=ot);else{if(!(Rt!==void 0&&0>ve(Rt,Ce)))break e;W[Re]=Rt,W[Gt]=Ce,Re=Gt}}}return te}return null}function ve(W,te){var Ce=W.sortIndex-te.sortIndex;return Ce!==0?Ce:W.id-te.id}var ie=[],we=[],ze=1,We=null,Le=3,Je=!1,ft=!1,I=!1;function M(W){for(var te=ye(we);te!==null;){if(te.callback===null)Y(we);else{if(!(te.startTime<=W))break;Y(we),te.sortIndex=te.expirationTime,ge(ie,te)}te=ye(we)}}function G(W){if(I=!1,M(W),!ft)if(ye(ie)!==null)ft=!0,f(ue);else{var te=ye(we);te!==null&&m(G,te.startTime-W)}}function ue(W,te){ft=!1,I&&(I=!1,p()),Je=!0;var Ce=Le;try{for(M(te),We=ye(ie);We!==null&&(!(We.expirationTime>te)||W&&!d.unstable_shouldYield());){var Re=We.callback;if(typeof Re=="function"){We.callback=null,Le=We.priorityLevel;var Ee=Re(We.expirationTime<=te);te=d.unstable_now(),typeof Ee=="function"?We.callback=Ee:We===ye(ie)&&Y(ie),M(te)}else Y(ie);We=ye(ie)}if(We!==null)var ot=!0;else{var Tt=ye(we);Tt!==null&&m(G,Tt.startTime-te),ot=!1}return ot}finally{We=null,Le=Ce,Je=!1}}var ae=g;d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(W){W.callback=null},d.unstable_continueExecution=function(){ft||Je||(ft=!0,f(ue))},d.unstable_getCurrentPriorityLevel=function(){return Le},d.unstable_getFirstCallbackNode=function(){return ye(ie)},d.unstable_next=function(W){switch(Le){case 1:case 2:case 3:var te=3;break;default:te=Le}var Ce=Le;Le=te;try{return W()}finally{Le=Ce}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=ae,d.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ce=Le;Le=W;try{return te()}finally{Le=Ce}},d.unstable_scheduleCallback=function(W,te,Ce){var Re=d.unstable_now();switch(Ce=typeof Ce=="object"&&Ce!==null&&typeof(Ce=Ce.delay)=="number"&&0<Ce?Re+Ce:Re,W){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return W={id:ze++,callback:te,priorityLevel:W,startTime:Ce,expirationTime:Ee=Ce+Ee,sortIndex:-1},Ce>Re?(W.sortIndex=Ce,ge(we,W),ye(ie)===null&&W===ye(we)&&(I?p():I=!0,m(G,Ce-Re))):(W.sortIndex=Ee,ge(ie,W),ft||Je||(ft=!0,f(ue))),W},d.unstable_wrapCallback=function(W){var te=Le;return function(){var Ce=Le;Le=te;try{return W.apply(this,arguments)}finally{Le=Ce}}}},840:(c,d,f)=>{c.exports=f(53)},285:(c,d,f)=>{var m;c.exports=(m=f(294),function(p){var g={};function b(v){if(g[v])return g[v].exports;var w=g[v]={i:v,l:!1,exports:{}};return p[v].call(w.exports,w,w.exports,b),w.l=!0,w.exports}return b.m=p,b.c=g,b.d=function(v,w,S){b.o(v,w)||Object.defineProperty(v,w,{enumerable:!0,get:S})},b.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},b.t=function(v,w){if(1&w&&(v=b(v)),8&w||4&w&&typeof v=="object"&&v&&v.__esModule)return v;var S=Object.create(null);if(b.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:v}),2&w&&typeof v!="string")for(var T in v)b.d(S,T,function(R){return v[R]}.bind(null,T));return S},b.n=function(v){var w=v&&v.__esModule?function(){return v.default}:function(){return v};return b.d(w,"a",w),w},b.o=function(v,w){return Object.prototype.hasOwnProperty.call(v,w)},b.p="",b(b.s=9)}([function(p,g){p.exports=m},function(p,g,b){var v;(function(){var w={}.hasOwnProperty;function S(){for(var T=[],R=0;R<arguments.length;R++){var L=arguments[R];if(L){var q=typeof L;if(q==="string"||q==="number")T.push(L);else if(Array.isArray(L)){if(L.length){var Q=S.apply(null,L);Q&&T.push(Q)}}else if(q==="object")if(L.toString===Object.prototype.toString)for(var ee in L)w.call(L,ee)&&L[ee]&&T.push(ee);else T.push(L.toString())}}return T.join(" ")}p.exports?(S.default=S,p.exports=S):(v=function(){return S}.apply(g,[]))===void 0||(p.exports=v)})()},function(p,g,b){p.exports={count:"Count__count___VwSFw",label:"Count__label___UClje",smallLabel:"Count__smallLabel___E3KvK",iconCountWrapper:"Count__iconCountWrapper___CTSi2",sectionTallyIconCountWrapper:"Count__sectionTallyIconCountWrapper___lTlUR",expandedIconCount:"Count__expandedIconCount___c3tc2",number:"Count__number___4oBqJ",smallNumber:"Count__smallNumber___wi6E7",horizontal:"Count__horizontal___wp4Sz",small:"Count__small___kecST"}},function(p,g,b){p.exports={sectionTallyWidget:"SectionTally__sectionTallyWidget___aaCj5",sectionTallyWrapper:"SectionTally__sectionTallyWrapper___nwj2j",tally:"SectionTally__tally___es9p7",badgeTally:"SectionTally__badgeTally___ZYqar",horizontal:"SectionTally__horizontal___-hgL+",show:"SectionTally__show___wciqp",logo:"SectionTally__logo___pEojg",logoSmall:"SectionTally__logoSmall___yzxV+",small:"SectionTally__small___QBk26",forceCollapse:"SectionTally__forceCollapse___MexwG",chartSubheading:"SectionTally__chartSubheading___tm7gz",chartLabel:"SectionTally__chartLabel___Nm4F+"}},function(p,g,b){p.exports={tally:"Tally__tally___wF-n7",badgeTally:"Tally__badgeTally___AkCwi",horizontal:"Tally__horizontal___TYyqc",show:"Tally__show___EesAt",logo:"Tally__logo___k79zv",logoSmall:"Tally__logoSmall___JZuyy",small:"Tally__small___lrym1",forceCollapse:"Tally__forceCollapse___4k5aa"}},function(p,g,b){p.exports={tally:"HideableTally__tally___TXiqB",hideContainer:"HideableTally__hideContainer___w5Wlj",logoSingleLetter:"HideableTally__logoSingleLetter___OwmJA",logoContainer:"HideableTally__logoContainer___kXnxF",openingArrow:"HideableTally__openingArrow___yBpbp",closingArrow:"HideableTally__closingArrow___pKIyO"}},function(p,g,b){const v=b(10),w=b(11),S=b(12),T=b(13);function R(P){if(typeof P!="string"||P.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function L(P,H){return H.encode?H.strict?v(P):encodeURIComponent(P):P}function q(P,H){return H.decode?w(P):P}function Q(P){const H=P.indexOf("#");return H!==-1&&(P=P.slice(0,H)),P}function ee(P){const H=(P=Q(P)).indexOf("?");return H===-1?"":P.slice(H+1)}function D(P,H){return H.parseNumbers&&!Number.isNaN(Number(P))&&typeof P=="string"&&P.trim()!==""?P=Number(P):!H.parseBooleans||P===null||P.toLowerCase()!=="true"&&P.toLowerCase()!=="false"||(P=P.toLowerCase()==="true"),P}function A(P,H){R((H=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},H)).arrayFormatSeparator);const fe=function(ge){let ye;switch(ge.arrayFormat){case"index":return(Y,ve,ie)=>{ye=/\[(\d*)\]$/.exec(Y),Y=Y.replace(/\[\d*\]$/,""),ye?(ie[Y]===void 0&&(ie[Y]={}),ie[Y][ye[1]]=ve):ie[Y]=ve};case"bracket":return(Y,ve,ie)=>{ye=/(\[\])$/.exec(Y),Y=Y.replace(/\[\]$/,""),ye?ie[Y]!==void 0?ie[Y]=[].concat(ie[Y],ve):ie[Y]=[ve]:ie[Y]=ve};case"comma":case"separator":return(Y,ve,ie)=>{const we=typeof ve=="string"&&ve.includes(ge.arrayFormatSeparator),ze=typeof ve=="string"&&!we&&q(ve,ge).includes(ge.arrayFormatSeparator);ve=ze?q(ve,ge):ve;const We=we||ze?ve.split(ge.arrayFormatSeparator).map(Le=>q(Le,ge)):ve===null?ve:q(ve,ge);ie[Y]=We};default:return(Y,ve,ie)=>{ie[Y]!==void 0?ie[Y]=[].concat(ie[Y],ve):ie[Y]=ve}}}(H),me=Object.create(null);if(typeof P!="string"||!(P=P.trim().replace(/^[?#&]/,"")))return me;for(const ge of P.split("&")){if(ge==="")continue;let[ye,Y]=S(H.decode?ge.replace(/\+/g," "):ge,"=");Y=Y===void 0?null:["comma","separator"].includes(H.arrayFormat)?Y:q(Y,H),fe(q(ye,H),Y,me)}for(const ge of Object.keys(me)){const ye=me[ge];if(typeof ye=="object"&&ye!==null)for(const Y of Object.keys(ye))ye[Y]=D(ye[Y],H);else me[ge]=D(ye,H)}return H.sort===!1?me:(H.sort===!0?Object.keys(me).sort():Object.keys(me).sort(H.sort)).reduce((ge,ye)=>{const Y=me[ye];return Y&&typeof Y=="object"&&!Array.isArray(Y)?ge[ye]=function ve(ie){return Array.isArray(ie)?ie.sort():typeof ie=="object"?ve(Object.keys(ie)).sort((we,ze)=>Number(we)-Number(ze)).map(we=>ie[we]):ie}(Y):ge[ye]=Y,ge},Object.create(null))}g.extract=ee,g.parse=A,g.stringify=(P,H)=>{if(!P)return"";R((H=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},H)).arrayFormatSeparator);const fe=Y=>H.skipNull&&P[Y]==null||H.skipEmptyString&&P[Y]==="",me=function(Y){switch(Y.arrayFormat){case"index":return ve=>(ie,we)=>{const ze=ie.length;return we===void 0||Y.skipNull&&we===null||Y.skipEmptyString&&we===""?ie:we===null?[...ie,[L(ve,Y),"[",ze,"]"].join("")]:[...ie,[L(ve,Y),"[",L(ze,Y),"]=",L(we,Y)].join("")]};case"bracket":return ve=>(ie,we)=>we===void 0||Y.skipNull&&we===null||Y.skipEmptyString&&we===""?ie:we===null?[...ie,[L(ve,Y),"[]"].join("")]:[...ie,[L(ve,Y),"[]=",L(we,Y)].join("")];case"comma":case"separator":return ve=>(ie,we)=>we==null||we.length===0?ie:ie.length===0?[[L(ve,Y),"=",L(we,Y)].join("")]:[[ie,L(we,Y)].join(Y.arrayFormatSeparator)];default:return ve=>(ie,we)=>we===void 0||Y.skipNull&&we===null||Y.skipEmptyString&&we===""?ie:we===null?[...ie,L(ve,Y)]:[...ie,[L(ve,Y),"=",L(we,Y)].join("")]}}(H),ge={};for(const Y of Object.keys(P))fe(Y)||(ge[Y]=P[Y]);const ye=Object.keys(ge);return H.sort!==!1&&ye.sort(H.sort),ye.map(Y=>{const ve=P[Y];return ve===void 0?"":ve===null?L(Y,H):Array.isArray(ve)?ve.reduce(me(Y),[]).join("&"):L(Y,H)+"="+L(ve,H)}).filter(Y=>Y.length>0).join("&")},g.parseUrl=(P,H)=>{H=Object.assign({decode:!0},H);const[fe,me]=S(P,"#");return Object.assign({url:fe.split("?")[0]||"",query:A(ee(P),H)},H&&H.parseFragmentIdentifier&&me?{fragmentIdentifier:q(me,H)}:{})},g.stringifyUrl=(P,H)=>{H=Object.assign({encode:!0,strict:!0},H);const fe=Q(P.url).split("?")[0]||"",me=g.extract(P.url),ge=g.parse(me,{sort:!1}),ye=Object.assign(ge,P.query);let Y=g.stringify(ye,H);Y&&(Y="?"+Y);let ve=function(ie){let we="";const ze=ie.indexOf("#");return ze!==-1&&(we=ie.slice(ze)),we}(P.url);return P.fragmentIdentifier&&(ve="#"+L(P.fragmentIdentifier,H)),`${fe}${Y}${ve}`},g.pick=(P,H,fe)=>{fe=Object.assign({parseFragmentIdentifier:!0},fe);const{url:me,query:ge,fragmentIdentifier:ye}=g.parseUrl(P,fe);return g.stringifyUrl({url:me,query:T(ge,H),fragmentIdentifier:ye},fe)},g.exclude=(P,H,fe)=>{const me=Array.isArray(H)?ge=>!H.includes(ge):(ge,ye)=>!H(ge,ye);return g.pick(P,me,fe)}},function(p,g,b){p.exports={icon:"Icon__icon___rkFdu",unclassified:"Icon__unclassified___KG7dh",contrasting:"Icon__contrasting___XemUp",mentioning:"Icon__mentioning___eZSXr",supporting:"Icon__supporting___6A01H",retractions:"Icon__retractions___+fJ+N",notices:"Icon__notices___DbL2K",publications:"Icon__publications___3dd2q",smallIcon:"Icon__smallIcon___3rDRZ",openingArrow:"Icon__openingArrow___pSL8O",closingCaret:"Icon__closingCaret___EMT7i"}},function(p,g,b){p.exports={sectionIcon:"SectionIcon__sectionIcon___nqPTw",introduction:"SectionIcon__introduction___uhUFG",methods:"SectionIcon__methods___RVooU",results:"SectionIcon__results___1k9LI",discussion:"SectionIcon__discussion___Qeyb0",other:"SectionIcon__other___uF+vV",smallSectionIcon:"SectionIcon__smallSectionIcon___nCjHN"}},function(p,g,b){b.r(g),b.d(g,"HideableTally",function(){return we}),b.d(g,"Tally",function(){return Y}),b.d(g,"Count",function(){return P}),b.d(g,"TallyLoader",function(){return kn}),b.d(g,"SectionTally",function(){return Ms}),b.d(g,"SectionTallyCount",function(){return Vn});var v=b(0),w=b.n(v),S=b(6),T=b.n(S),R=b(1),L=b.n(R),q=b(7),Q=b.n(q),ee=({type:z,small:ne=!1})=>w.a.createElement("i",{className:L()(Q.a.icon,Q.a[z],{[Q.a.smallIcon]:ne})}),D=b(2),A=b.n(D),P=({className:z,horizontal:ne,type:Se,count:De,showLabels:be=!1,small:Te=!1})=>w.a.createElement("div",{className:L()(A.a.count,z,{[A.a.horizontal]:ne,[A.a.small]:Te})},be&&w.a.createElement("span",{className:L()(A.a.label,{[A.a.smallLabel]:Te})},Se),w.a.createElement("div",{className:L()(A.a.iconCountWrapper,{[A.a.expandedIconCount]:!be})},w.a.createElement(ee,{type:Se,small:!0}),w.a.createElement("span",{className:L()(A.a.number,{[A.a.smallNumber]:Te})},De))),H=b(4),fe=b.n(H);const me=["retract","withdraw","remove"],ge=z=>{for(const ne of me)if(z&&z.toLowerCase().includes(ne))return!1;return!0},ye=z=>{for(const ne of me)if(z&&z.toLowerCase().includes(ne))return!0;return!1};var Y=({source:z,campaign:ne,autologin:Se,rewardfulID:De,tally:be,forceCollapse:Te,showLabels:He,notices:Ae,small:$e=!1,horizontal:at=!1,isBadge:At=!1,showZero:pt=!0,showLogo:Dt=!0})=>{const _t={utm_medium:At?"badge":"plugin",utm_source:z||"generic",utm_campaign:ne||At?"badge":"plugin"};Se&&(_t.autologin=Se),De&&(_t.via=De);const tn=T.a.stringify(_t),wt={tally:L()("scite-tally",fe.a.tally,{[fe.a.horizontal]:at,[fe.a.small]:$e&&at,[fe.a.show]:pt?be:be&&(be.total>0||be.citingPublications>0),[fe.a.forceCollapse]:Te&&be.total===0&&be.citingPublications===0,[fe.a.badgeTally]:At})},nn=be&&be.citingPublications&&be.citingPublications.toLocaleString()||0,fn=be&&be.supporting&&be.supporting.toLocaleString()||0,kr=be&&be.contradicting&&be.contradicting.toLocaleString()||0,Mn=be&&be.mentioning&&be.mentioning.toLocaleString()||0,fr=Ae&&Ae.length>0&&Ae.filter(ye)||[],On=Ae&&Ae.length>0&&Ae.filter(ge)||[],Xn=fr.length.toLocaleString()||0,pn=On.length.toLocaleString()||0;return w.a.createElement("div",{className:wt.tally,onClick:()=>{window.open(`https://scite.ai/reports/${be&&be.doi}?${tn}`)}},!at&&Dt&&w.a.createElement("img",{className:L()(fe.a.logo,{[fe.a.logoSmall]:$e}),src:"https://cdn.scite.ai/assets/images/logo.svg"}),w.a.createElement(P,{type:"publications",count:nn,horizontal:at,showLabels:He,small:$e}),w.a.createElement(P,{type:"supporting",count:fn,horizontal:at,showLabels:He,small:$e}),w.a.createElement(P,{type:"mentioning",count:Mn,horizontal:at,showLabels:He,small:$e}),w.a.createElement(P,{type:"contrasting",count:kr,horizontal:at,showLabels:He,small:$e}),Xn>0&&w.a.createElement(P,{type:"retractions",count:Xn,horizontal:at,showLabels:He,small:$e}),pn>0&&w.a.createElement(P,{type:"notices",count:pn,horizontal:at,showLabels:He,small:$e}))},ve=b(5),ie=b.n(ve),we=({children:z,hide:ne=!1,clickFn:Se=()=>{}})=>{const[De,be]=Object(v.useState)(!ne),Te=()=>{be(!De),Se()};return w.a.createElement("div",{className:ie.a.tally},De?w.a.createElement(w.a.Fragment,null,z,w.a.createElement("div",{className:ie.a.hideContainer,onClick:Te},w.a.createElement("div",{className:ie.a.openingArrow},w.a.createElement(ee,{type:"openingArrow"})),w.a.createElement("div",null,"hide"))):w.a.createElement("div",{className:ie.a.logoContainer,onClick:Te},w.a.createElement("div",{className:ie.a.closingArrow},w.a.createElement(ee,{type:"closingCaret"})),w.a.createElement("img",{className:ie.a.logoSingleLetter,src:"https://cdn.scite.ai/assets/images/scite_single_letter.svg"})))},ze=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||ze!==void 0&&ze,We="URLSearchParams"in ze,Le="Symbol"in ze&&"iterator"in Symbol,Je="FileReader"in ze&&"Blob"in ze&&function(){try{return new Blob,!0}catch{return!1}}(),ft="FormData"in ze,I="ArrayBuffer"in ze;if(I)var M=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],G=ArrayBuffer.isView||function(z){return z&&M.indexOf(Object.prototype.toString.call(z))>-1};function ue(z){if(typeof z!="string"&&(z=String(z)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(z)||z==="")throw new TypeError('Invalid character in header field name: "'+z+'"');return z.toLowerCase()}function ae(z){return typeof z!="string"&&(z=String(z)),z}function W(z){var ne={next:function(){var Se=z.shift();return{done:Se===void 0,value:Se}}};return Le&&(ne[Symbol.iterator]=function(){return ne}),ne}function te(z){this.map={},z instanceof te?z.forEach(function(ne,Se){this.append(Se,ne)},this):Array.isArray(z)?z.forEach(function(ne){this.append(ne[0],ne[1])},this):z&&Object.getOwnPropertyNames(z).forEach(function(ne){this.append(ne,z[ne])},this)}function Ce(z){if(z.bodyUsed)return Promise.reject(new TypeError("Already read"));z.bodyUsed=!0}function Re(z){return new Promise(function(ne,Se){z.onload=function(){ne(z.result)},z.onerror=function(){Se(z.error)}})}function Ee(z){var ne=new FileReader,Se=Re(ne);return ne.readAsArrayBuffer(z),Se}function ot(z){if(z.slice)return z.slice(0);var ne=new Uint8Array(z.byteLength);return ne.set(new Uint8Array(z)),ne.buffer}function Tt(){return this.bodyUsed=!1,this._initBody=function(z){var ne;this.bodyUsed=this.bodyUsed,this._bodyInit=z,z?typeof z=="string"?this._bodyText=z:Je&&Blob.prototype.isPrototypeOf(z)?this._bodyBlob=z:ft&&FormData.prototype.isPrototypeOf(z)?this._bodyFormData=z:We&&URLSearchParams.prototype.isPrototypeOf(z)?this._bodyText=z.toString():I&&Je&&(ne=z)&&DataView.prototype.isPrototypeOf(ne)?(this._bodyArrayBuffer=ot(z.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):I&&(ArrayBuffer.prototype.isPrototypeOf(z)||G(z))?this._bodyArrayBuffer=ot(z):this._bodyText=z=Object.prototype.toString.call(z):this._bodyText="",this.headers.get("content-type")||(typeof z=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):We&&URLSearchParams.prototype.isPrototypeOf(z)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Je&&(this.blob=function(){var z=Ce(this);if(z)return z;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Ce(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(Ee)}),this.text=function(){var z,ne,Se,De=Ce(this);if(De)return De;if(this._bodyBlob)return z=this._bodyBlob,Se=Re(ne=new FileReader),ne.readAsText(z),Se;if(this._bodyArrayBuffer)return Promise.resolve(function(be){for(var Te=new Uint8Array(be),He=new Array(Te.length),Ae=0;Ae<Te.length;Ae++)He[Ae]=String.fromCharCode(Te[Ae]);return He.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ft&&(this.formData=function(){return this.text().then(xt)}),this.json=function(){return this.text().then(JSON.parse)},this}te.prototype.append=function(z,ne){z=ue(z),ne=ae(ne);var Se=this.map[z];this.map[z]=Se?Se+", "+ne:ne},te.prototype.delete=function(z){delete this.map[ue(z)]},te.prototype.get=function(z){return z=ue(z),this.has(z)?this.map[z]:null},te.prototype.has=function(z){return this.map.hasOwnProperty(ue(z))},te.prototype.set=function(z,ne){this.map[ue(z)]=ae(ne)},te.prototype.forEach=function(z,ne){for(var Se in this.map)this.map.hasOwnProperty(Se)&&z.call(ne,this.map[Se],Se,this)},te.prototype.keys=function(){var z=[];return this.forEach(function(ne,Se){z.push(Se)}),W(z)},te.prototype.values=function(){var z=[];return this.forEach(function(ne){z.push(ne)}),W(z)},te.prototype.entries=function(){var z=[];return this.forEach(function(ne,Se){z.push([Se,ne])}),W(z)},Le&&(te.prototype[Symbol.iterator]=te.prototype.entries);var Gt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Rt(z,ne){if(!(this instanceof Rt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Se,De,be=(ne=ne||{}).body;if(z instanceof Rt){if(z.bodyUsed)throw new TypeError("Already read");this.url=z.url,this.credentials=z.credentials,ne.headers||(this.headers=new te(z.headers)),this.method=z.method,this.mode=z.mode,this.signal=z.signal,be||z._bodyInit==null||(be=z._bodyInit,z.bodyUsed=!0)}else this.url=String(z);if(this.credentials=ne.credentials||this.credentials||"same-origin",!ne.headers&&this.headers||(this.headers=new te(ne.headers)),this.method=(De=(Se=ne.method||this.method||"GET").toUpperCase(),Gt.indexOf(De)>-1?De:Se),this.mode=ne.mode||this.mode||null,this.signal=ne.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&be)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(be),!(this.method!=="GET"&&this.method!=="HEAD"||ne.cache!=="no-store"&&ne.cache!=="no-cache")){var Te=/([?&])_=[^&]*/;Te.test(this.url)?this.url=this.url.replace(Te,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function xt(z){var ne=new FormData;return z.trim().split("&").forEach(function(Se){if(Se){var De=Se.split("="),be=De.shift().replace(/\+/g," "),Te=De.join("=").replace(/\+/g," ");ne.append(decodeURIComponent(be),decodeURIComponent(Te))}}),ne}function lt(z,ne){if(!(this instanceof lt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');ne||(ne={}),this.type="default",this.status=ne.status===void 0?200:ne.status,this.ok=this.status>=200&&this.status<300,this.statusText=ne.statusText===void 0?"":""+ne.statusText,this.headers=new te(ne.headers),this.url=ne.url||"",this._initBody(z)}Rt.prototype.clone=function(){return new Rt(this,{body:this._bodyInit})},Tt.call(Rt.prototype),Tt.call(lt.prototype),lt.prototype.clone=function(){return new lt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new te(this.headers),url:this.url})},lt.error=function(){var z=new lt(null,{status:0,statusText:""});return z.type="error",z};var Jt=[301,302,303,307,308];lt.redirect=function(z,ne){if(Jt.indexOf(ne)===-1)throw new RangeError("Invalid status code");return new lt(null,{status:ne,headers:{location:z}})};var mt=ze.DOMException;try{new mt}catch{(mt=function(ne,Se){this.message=ne,this.name=Se;var De=Error(ne);this.stack=De.stack}).prototype=Object.create(Error.prototype),mt.prototype.constructor=mt}function _n(z,ne){return new Promise(function(Se,De){var be=new Rt(z,ne);if(be.signal&&be.signal.aborted)return De(new mt("Aborted","AbortError"));var Te=new XMLHttpRequest;function He(){Te.abort()}Te.onload=function(){var Ae,$e,at={status:Te.status,statusText:Te.statusText,headers:(Ae=Te.getAllResponseHeaders()||"",$e=new te,Ae.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(pt){return pt.indexOf(`
`)===0?pt.substr(1,pt.length):pt}).forEach(function(pt){var Dt=pt.split(":"),_t=Dt.shift().trim();if(_t){var tn=Dt.join(":").trim();$e.append(_t,tn)}}),$e)};at.url="responseURL"in Te?Te.responseURL:at.headers.get("X-Request-URL");var At="response"in Te?Te.response:Te.responseText;setTimeout(function(){Se(new lt(At,at))},0)},Te.onerror=function(){setTimeout(function(){De(new TypeError("Network request failed"))},0)},Te.ontimeout=function(){setTimeout(function(){De(new TypeError("Network request failed"))},0)},Te.onabort=function(){setTimeout(function(){De(new mt("Aborted","AbortError"))},0)},Te.open(be.method,function(Ae){try{return Ae===""&&ze.location.href?ze.location.href:Ae}catch{return Ae}}(be.url),!0),be.credentials==="include"?Te.withCredentials=!0:be.credentials==="omit"&&(Te.withCredentials=!1),"responseType"in Te&&(Je?Te.responseType="blob":I&&be.headers.get("Content-Type")&&be.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(Te.responseType="arraybuffer")),!ne||typeof ne.headers!="object"||ne.headers instanceof te?be.headers.forEach(function(Ae,$e){Te.setRequestHeader($e,Ae)}):Object.getOwnPropertyNames(ne.headers).forEach(function(Ae){Te.setRequestHeader(Ae,ae(ne.headers[Ae]))}),be.signal&&(be.signal.addEventListener("abort",He),Te.onreadystatechange=function(){Te.readyState===4&&be.signal.removeEventListener("abort",He)}),Te.send(be._bodyInit===void 0?null:be._bodyInit)})}_n.polyfill=!0,ze.fetch||(ze.fetch=_n,ze.Headers=te,ze.Request=Rt,ze.Response=lt);const{fetch:un}=window,vn=["retracted","has expression of concern","withdrawn","has erratum","has correction"];var kn=({doi:z,children:ne})=>{const[Se,De]=Object(v.useState)(null),[be,Te]=Object(v.useState)(null),[He,Ae]=Object(v.useState)(null);return Object(v.useEffect)(()=>{(function $e({doi:at,setTally:At,setError:pt,retry:Dt=0,maxRetries:_t=8}={}){const tn=new Error("Failed to get Tally");un("https://api.scite.ai/tallies/"+at).then(wt=>{if(wt.status===404)return At({doi:at,total:0,citingPublications:0}),{};if(!wt.ok)throw tn;return wt.json()}).then(wt=>{typeof wt.total=="number"&&At(wt)}).catch(wt=>{if(wt===tn&&Dt<_t)return setTimeout(()=>$e({retry:++Dt,doi:at,setTally:At,setError:pt,maxRetries:_t}),1200);pt(wt)})})({doi:z,setTally:De,setError:Ae}),function $e({doi:at,setNotices:At,setError:pt,retry:Dt=0,maxRetries:_t=8}={}){const tn=new Error("Failed to get notices");un("https://api.scite.ai/papers/"+at).then(wt=>{if(wt.status===404)return At([]),{};if(!wt.ok)throw tn;return wt.json()}).then(({editorialNotices:wt})=>{const nn=[...new Set(wt.filter(({status:fn})=>vn.includes(fn.toLowerCase())).map(({status:fn})=>fn))];At(nn)}).catch(wt=>{if(wt===tn&&Dt<_t)return setTimeout(()=>$e({retry:++Dt,doi:at,maxRetries:_t,setError:pt,setNotices:At}),1200);pt(wt)})}({doi:z,setNotices:Te,setError:Ae})},[z]),ne({tally:Se,notices:be,error:He})},Cr=b(8),dn=b.n(Cr),Er=({type:z,small:ne=!1})=>w.a.createElement("i",{className:L()(dn.a.sectionIcon,dn.a[z],{[dn.a.smallSectionIcon]:ne})});const ur={PIE:"pie",BAR:"bar",DONUT:"donut"};var Vn=({className:z,horizontal:ne,type:Se,count:De,showLabels:be=!1,small:Te=!1})=>w.a.createElement("div",{className:L()(A.a.count,z,{[A.a.horizontal]:ne,[A.a.small]:Te})},w.a.createElement("div",{className:L()(A.a.sectionTallyIconCountWrapper,{[A.a.expandedIconCount]:!be})},w.a.createElement(Er,{type:Se,small:!0}),be&&w.a.createElement("span",{className:L()(A.a.label,{[A.a.smallLabel]:Te})},(He=>He==="introduction"?"Intro":He)(Se)),w.a.createElement("span",{className:L()(A.a.number,{[A.a.smallNumber]:Te})},De))),Sr=b(3),en=b.n(Sr);const ta=({col:z,barWidth:ne,chartHeight:Se,largestValue:De})=>{const be=(({height:Te,chartHeight:He,largestValue:Ae})=>Te/Ae*He)({height:z.value,chartHeight:Se,largestValue:De});return w.a.createElement("g",{transform:`translate(0, ${Se-be})`},w.a.createElement("rect",{width:ne-2,height:be,fill:z.color}))};var Pa=({chartWidth:z,chartHeight:ne,data:Se})=>{const De=Math.max.apply(Math,Se.map(He=>He.value)),be=Se.map((He,Ae)=>w.a.createElement("g",{key:"bar_"+Ae,transform:`translate(${30*Ae},0)`},w.a.createElement(ta,{col:He,barWidth:30,chartHeight:ne,largestValue:De}))),Te=(z-30*Se.length)/2;return w.a.createElement("svg",{width:z,height:ne,style:{marginRight:"25px"}},w.a.createElement("g",null,w.a.createElement("g",{transform:`translate(${Te}, 0)`},be)))};const Vr=({value:z,total:ne})=>z/ne,na=z=>[Math.cos(2*Math.PI*z),Math.sin(2*Math.PI*z)];var wn=({chartWidth:z,chartHeight:ne,data:Se})=>{const De=Se.reduce((Te,{value:He})=>Te+He,0),be=(Te=>{let He=0;const Ae=[];return Te.forEach($e=>{const[at,At]=na(He);He+=$e.percent;const[pt,Dt]=na(He),_t=[`M ${at} ${At}`,`A 1 1 0 ${$e.percent>.5?1:0} 1 ${pt} ${Dt}`,"L 0 0"].join(" ");Ae.push(w.a.createElement("path",{d:_t,fill:$e.color}))}),Ae})((({data:Te,total:He})=>Te.map(Ae=>({color:Ae.color,percent:Vr({value:Ae.value,total:He})})))({data:Se,total:De}));return w.a.createElement("svg",{width:z,height:ne,viewBox:"-1 -1 2 2",style:{marginRight:"25px"}},be)};function Dn(){return(Dn=Object.assign||function(z){for(var ne=1;ne<arguments.length;ne++){var Se=arguments[ne];for(var De in Se)Object.prototype.hasOwnProperty.call(Se,De)&&(z[De]=Se[De])}return z}).apply(this,arguments)}const dr=z=>z/(Math.PI/180),Tr=(z,ne)=>z/ne,Xr=(z,ne,Se)=>{const De=z*(Math.PI/180);return[Se-Math.cos(De)*ne,Se-Math.sin(De)*ne]},Qr=({chartConfig:z,paths:ne,subtotal:Se},{percent:De,color:be},Te)=>{const He=360*Se+90,Ae=He+360*De,$e=De>=z.minimumValue,at=$e?z.gapAngleOffsetInner:0,At=$e?z.gapAngleOffsetOuter:0,pt=He+at,Dt=He+At,_t=Ae-at,tn=Ae-At,[wt,nn]=Xr(pt,z.radiusInner,z.center),[fn,kr]=Xr(Dt,z.radiusOuter,z.center),[Mn,fr]=Xr(tn,z.radiusOuter,z.center),[On,Xn]=Xr(_t,z.radiusInner,z.center),pn=De>.5?1:0,Rn=[`M${wt} ${nn}`,`L${fn} ${kr}`,`A${z.radiusOuter} ${z.radiusOuter} 0 ${pn} 1 ${Mn} ${fr}`,`L${On} ${Xn}`,`A${z.radiusInner} ${z.radiusInner} 0 ${pn} 0 ${wt} ${nn}`],bo=be?{fill:be}:{};return ne.push(w.a.createElement("path",Dn({key:Te},bo,{stroke:"none",d:Rn.join(" ")}))),{chartConfig:z,paths:ne,subtotal:Se+De}};var _r=({data:z,size:ne})=>{const Se=(({data:Te})=>{const He=(Te||[]).filter(({value:$e})=>$e>0),Ae=He.reduce(($e,{value:at=0})=>$e+at,0);return He.map($e=>({...$e,percent:$e.value/Ae}))})({data:z});if(!(Se||[]).length)return null;const De=(({size:Te})=>{const He=Te/2,Ae=(Te-75)/2,$e=Te/2,at=$e-Ae,At=dr(Tr(1,at)),pt=dr(Tr(1,$e)),Dt=dr(Tr(2,at));return{center:He,innerHoleDiameter:75,thickness:Ae,radiusOuter:$e,radiusInner:at,gapSize:1,gapAngleOffsetInner:At,gapAngleOffsetOuter:pt,minimumAngleDeg:Dt,minimumValue:Dt/360}})({size:ne}),be=Se.reduce(Qr,{chartConfig:De,paths:[],subtotal:0}).paths;return w.a.createElement("div",null,w.a.createElement("div",null,w.a.createElement("svg",{width:ne,height:ne,style:{marginRight:"25px"}},be)))},Ms=({source:z,campaign:ne,autologin:Se,rewardfulID:De,tally:be,forceCollapse:Te,showLabels:He,small:Ae=!1,horizontal:$e=!1,isBadge:at=!1,showZero:At=!0,chartType:pt=null,showLogo:Dt=!0})=>{const _t={utm_medium:at?"badge":"plugin",utm_source:z||"generic",utm_campaign:ne||at?"badge":"plugin"};Se&&(_t.autologin=Se),De&&(_t.via=De);const tn=T.a.stringify(_t),wt={sectionTallyContainer:L()("scite-section-tally",en.a.sectionTallyWidget),sectionTally:L()(en.a.tally,{[en.a.horizontal]:$e,[en.a.small]:Ae&&$e,[en.a.show]:At?be:be&&be.total>0,[en.a.forceCollapse]:Te&&be.total===0,[en.a.badgeTally]:at})},nn=be&&be.introduction&&be.introduction.toLocaleString()||0,fn=be&&be.methods&&be.methods.toLocaleString()||0,kr=be&&be.results&&be.results.toLocaleString()||0,Mn=be&&be.discussion&&be.discussion.toLocaleString()||0,fr=be&&be.other&&be.other.toLocaleString()||0,On=`https://scite.ai/reports/${be&&be.doi}?${tn}`,Xn=((Rn={})=>[{name:"Intro",color:"#002AB2",value:Rn.introduction||0},{name:"Methods",color:"#0036E5",value:Rn.methods||0},{name:"Results",color:"#0062FF",value:Rn.results||0},{name:"Discussion",color:"#66A3FF",value:Rn.discussion||0},{name:"Other",color:"#9EC4F0",value:Rn.other||0}])(be),pn=Object.values(ur).includes(pt);return pt&&!pn&&console.warn(`Received unexpected chartType: ${pt}. Must be 'pie', 'bar', 'donut', or null.`),w.a.createElement("div",{className:wt.sectionTallyContainer},!$e&&Dt&&w.a.createElement("img",{className:L()(en.a.logo,{[en.a.logoSmall]:Ae}),src:"https://cdn.scite.ai/assets/images/logo.svg"}),w.a.createElement("div",{onClick:()=>{window.open(On)},className:en.a.sectionTallyWrapper},pt==="bar"&&w.a.createElement(Pa,{chartWidth:140,chartHeight:130,data:Xn}),pt==="pie"&&w.a.createElement(wn,{chartWidth:140,chartHeight:140,data:Xn}),pt==="donut"&&w.a.createElement(_r,{data:Xn,size:140}),w.a.createElement("div",{className:wt.sectionTally},w.a.createElement(Vn,{type:"introduction",count:nn,horizontal:$e,showLabels:He,small:Ae}),w.a.createElement(Vn,{type:"methods",count:fn,horizontal:$e,showLabels:He,small:Ae}),w.a.createElement(Vn,{type:"results",count:kr,horizontal:$e,showLabels:He,small:Ae}),w.a.createElement(Vn,{type:"discussion",count:Mn,horizontal:$e,showLabels:He,small:Ae}),w.a.createElement(Vn,{type:"other",count:fr,horizontal:$e,showLabels:He,small:Ae}))),pn&&w.a.createElement("div",{className:en.a.chartSubheading},w.a.createElement("span",{className:en.a.chartLabel},"Sections"),w.a.createElement("a",{href:On,target:"_blank",rel:"noopener noreferrer"},"See more details")))}},function(p,g,b){p.exports=v=>encodeURIComponent(v).replace(/[!'()*]/g,w=>"%"+w.charCodeAt(0).toString(16).toUpperCase())},function(p,g,b){var v=new RegExp("%[a-f0-9]{2}","gi"),w=new RegExp("(%[a-f0-9]{2})+","gi");function S(R,L){try{return decodeURIComponent(R.join(""))}catch{}if(R.length===1)return R;L=L||1;var q=R.slice(0,L),Q=R.slice(L);return Array.prototype.concat.call([],S(q),S(Q))}function T(R){try{return decodeURIComponent(R)}catch{for(var L=R.match(v),q=1;q<L.length;q++)L=(R=S(L,q).join("")).match(v);return R}}p.exports=function(R){if(typeof R!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof R+"`");try{return R=R.replace(/\+/g," "),decodeURIComponent(R)}catch{return function(q){for(var Q={"%FE%FF":"","%FF%FE":""},ee=w.exec(q);ee;){try{Q[ee[0]]=decodeURIComponent(ee[0])}catch{var D=T(ee[0]);D!==ee[0]&&(Q[ee[0]]=D)}ee=w.exec(q)}Q["%C2"]="";for(var A=Object.keys(Q),P=0;P<A.length;P++){var H=A[P];q=q.replace(new RegExp(H,"g"),Q[H])}return q}(R)}}},function(p,g,b){p.exports=(v,w)=>{if(typeof v!="string"||typeof w!="string")throw new TypeError("Expected the arguments to be of type `string`");if(w==="")return[v];const S=v.indexOf(w);return S===-1?[v]:[v.slice(0,S),v.slice(S+w.length)]}},function(p,g,b){p.exports=function(v,w){for(var S={},T=Object.keys(v),R=Array.isArray(w),L=0;L<T.length;L++){var q=T[L],Q=v[q];(R?w.indexOf(q)!==-1:w(q,Q,v))&&(S[q]=Q)}return S}}]))},379:(c,d,f)=>{var m,p=function(){var D={};return function(A){if(D[A]===void 0){var P=document.querySelector(A);if(window.HTMLIFrameElement&&P instanceof window.HTMLIFrameElement)try{P=P.contentDocument.head}catch{P=null}D[A]=P}return D[A]}}(),g=[];function b(D){for(var A=-1,P=0;P<g.length;P++)if(g[P].identifier===D){A=P;break}return A}function v(D,A){for(var P={},H=[],fe=0;fe<D.length;fe++){var me=D[fe],ge=A.base?me[0]+A.base:me[0],ye=P[ge]||0,Y="".concat(ge," ").concat(ye);P[ge]=ye+1;var ve=b(Y),ie={css:me[1],media:me[2],sourceMap:me[3]};ve!==-1?(g[ve].references++,g[ve].updater(ie)):g.push({identifier:Y,updater:ee(ie,A),references:1}),H.push(Y)}return H}function w(D){var A=document.createElement("style"),P=D.attributes||{};if(P.nonce===void 0){var H=f.nc;H&&(P.nonce=H)}if(Object.keys(P).forEach(function(me){A.setAttribute(me,P[me])}),typeof D.insert=="function")D.insert(A);else{var fe=p(D.insert||"head");if(!fe)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");fe.appendChild(A)}return A}var S,T=(S=[],function(D,A){return S[D]=A,S.filter(Boolean).join(`
`)});function R(D,A,P,H){var fe=P?"":H.media?"@media ".concat(H.media," {").concat(H.css,"}"):H.css;if(D.styleSheet)D.styleSheet.cssText=T(A,fe);else{var me=document.createTextNode(fe),ge=D.childNodes;ge[A]&&D.removeChild(ge[A]),ge.length?D.insertBefore(me,ge[A]):D.appendChild(me)}}function L(D,A,P){var H=P.css,fe=P.media,me=P.sourceMap;if(fe?D.setAttribute("media",fe):D.removeAttribute("media"),me&&typeof btoa<"u"&&(H+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(me))))," */")),D.styleSheet)D.styleSheet.cssText=H;else{for(;D.firstChild;)D.removeChild(D.firstChild);D.appendChild(document.createTextNode(H))}}var q=null,Q=0;function ee(D,A){var P,H,fe;if(A.singleton){var me=Q++;P=q||(q=w(A)),H=R.bind(null,P,me,!1),fe=R.bind(null,P,me,!0)}else P=w(A),H=L.bind(null,P,A),fe=function(){(function(ge){if(ge.parentNode===null)return!1;ge.parentNode.removeChild(ge)})(P)};return H(D),function(ge){if(ge){if(ge.css===D.css&&ge.media===D.media&&ge.sourceMap===D.sourceMap)return;H(D=ge)}else fe()}}c.exports=function(D,A){(A=A||{}).singleton||typeof A.singleton=="boolean"||(A.singleton=(m===void 0&&(m=!!(window&&document&&document.all&&!window.atob)),m));var P=v(D=D||[],A);return function(H){if(H=H||[],Object.prototype.toString.call(H)==="[object Array]"){for(var fe=0;fe<P.length;fe++){var me=b(P[fe]);g[me].references--}for(var ge=v(H,A),ye=0;ye<P.length;ye++){var Y=b(P[ye]);g[Y].references===0&&(g[Y].updater(),g.splice(Y,1))}P=ge}}}},473:c=>{c.exports=function(){}}},o={};function s(c){var d=o[c];if(d!==void 0)return d.exports;var f=o[c]={id:c,exports:{}};return n[c](f,f.exports,s),f.exports}s.n=c=>{var d=c&&c.__esModule?()=>c.default:()=>c;return s.d(d,{a:d}),d},s.d=(c,d)=>{for(var f in d)s.o(d,f)&&!s.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},s.o=(c,d)=>Object.prototype.hasOwnProperty.call(c,d),s.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var i={};return(()=>{s.r(i),s.d(i,{getConfig:()=>xo,insertBadge:()=>za,insertBadgeWrapper:()=>sa,insertBadges:()=>$a,main:()=>gl});var c=s(666),d=s.n(c),f=s(294),m=s(935),p=s(285);function g(_,C){(C==null||C>_.length)&&(C=_.length);for(var k=0,N=new Array(C);k<C;k++)N[k]=_[k];return N}function b(_,C,k,N,B,K,Z){try{var le=_[K](Z),J=le.value}catch(re){return void k(re)}le.done?C(J):Promise.resolve(J).then(N,B)}function v(_){return function(){var C=this,k=arguments;return new Promise(function(N,B){var K=_.apply(C,k);function Z(J){b(K,N,B,Z,le,"next",J)}function le(J){b(K,N,B,Z,le,"throw",J)}Z(void 0)})}}function w(_){return function(C){if(Array.isArray(C))return g(C)}(_)||function(C){if(typeof Symbol<"u"&&C[Symbol.iterator]!=null||C["@@iterator"]!=null)return Array.from(C)}(_)||function(C,k){if(C){if(typeof C=="string")return g(C,k);var N=Object.prototype.toString.call(C).slice(8,-1);return N==="Object"&&C.constructor&&(N=C.constructor.name),N==="Map"||N==="Set"?Array.from(N):N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?g(C,k):void 0}}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S,T=window.fetch,R=["retracted","has expression of concern","withdrawn","has erratum","has correction"],L=(S=v(d().mark(function _(C){var k,N,B,K,Z,le=arguments;return d().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(k=le.length>1&&le[1]!==void 0?le[1]:0,N=le.length>2&&le[2]!==void 0?le[2]:8,C&&C.length!==0){J.next=3;break}return J.abrupt("return",{tallies:{}});case 3:return B=new Error("Failed to get Tallies"),J.prev=4,J.next=7,T("https://api.scite.ai/tallies",{method:"POST",body:JSON.stringify(C),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if((K=J.sent).status!==404){J.next=10;break}return J.abrupt("return",{tallies:{}});case 10:if(K.ok){J.next=12;break}throw B;case 12:return J.next=14,K.json();case 14:return Z=J.sent,J.abrupt("return",Z||{});case 18:if(J.prev=18,J.t0=J.catch(4),!(J.t0===B&&k<N)){J.next=26;break}return J.next=23,new Promise(function(re){return setTimeout(function(){return re(L(C,++k))},600)});case 23:return J.abrupt("return",J.sent);case 26:console.error(B);case 27:return J.abrupt("return",{tallies:{}});case 28:case"end":return J.stop()}},_,null,[[4,18]])})),function(_){return S.apply(this,arguments)}),q=function(){var _=v(d().mark(function C(k){var N,B,K,Z,le,J,re,xe=arguments;return d().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(N=xe.length>1&&xe[1]!==void 0?xe[1]:0,B=xe.length>2&&xe[2]!==void 0?xe[2]:8,k&&k.length!==0){de.next=3;break}return de.abrupt("return",{notices:{}});case 3:return K=new Error("Failed to get notices"),de.prev=4,de.next=7,T("https://api.scite.ai/papers",{method:"POST",body:JSON.stringify(k),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if((Z=de.sent).status!==404){de.next=10;break}return de.abrupt("return",{notices:{}});case 10:if(Z.ok){de.next=12;break}throw K;case 12:return de.next=14,Z.json();case 14:le=de.sent,J={},de.t0=regeneratorRuntime.keys(le.papers);case 17:if((de.t1=de.t0()).done){de.next=25;break}if(re=de.t1.value,le.papers[re].editorialNotices){de.next=22;break}return J[re]=[],de.abrupt("continue",17);case 22:J[re]=w(new Set(le.papers[re].editorialNotices.filter(function(Fe){var Pe=Fe.status;return R.includes(Pe.toLowerCase())}).map(function(Fe){return Fe.status}))),de.next=17;break;case 25:return de.abrupt("return",{notices:J});case 28:if(de.prev=28,de.t2=de.catch(4),!(de.t2===K&&N<B)){de.next=36;break}return de.next=33,new Promise(function(Fe){return setTimeout(function(){return Fe(q(k,++N))},600)});case 33:return de.abrupt("return",de.sent);case 36:console.error(K);case 37:case"end":return de.stop()}},C,null,[[4,28]])}));return function(C){return _.apply(this,arguments)}}(),Q=function(){var _=v(d().mark(function C(k){var N,B,K,Z,le,J=arguments;return d().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(N=J.length>1&&J[1]!==void 0?J[1]:0,B=J.length>2&&J[2]!==void 0?J[2]:8,k&&k.length!==0){re.next=3;break}return re.abrupt("return",{tallies:{}});case 3:return K=new Error("Failed to get Section Tallies"),re.prev=4,re.next=7,T("https://api.scite.ai/tallies/cited-by-sections",{method:"POST",body:JSON.stringify(k),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:if((Z=re.sent).status!==404){re.next=10;break}return re.abrupt("return",{tallies:{}});case 10:if(Z.ok){re.next=12;break}throw K;case 12:return re.next=14,Z.json();case 14:return le=re.sent,re.abrupt("return",le||{});case 18:if(re.prev=18,re.t0=re.catch(4),!(re.t0===K&&N<B)){re.next=26;break}return re.next=23,new Promise(function(xe){return setTimeout(function(){return xe(Q(k,++N))},600)});case 23:return re.abrupt("return",re.sent);case 26:console.error(K);case 27:return re.abrupt("return",{tallies:{}});case 28:case"end":return re.stop()}},C,null,[[4,18]])}));return function(C){return _.apply(this,arguments)}}(),ee=s(184),D=s.n(ee),A=f.createContext(),P=f.createContext();function H(_){var C=_.children,k=f.useState(null),N=k[0],B=k[1],K=f.useRef(!1);f.useEffect(function(){return function(){K.current=!0}},[]);var Z=f.useCallback(function(le){K.current||B(le)},[]);return f.createElement(A.Provider,{value:N},f.createElement(P.Provider,{value:Z},C))}var fe=function(_){return Array.isArray(_)?_[0]:_},me=function(_){if(typeof _=="function"){for(var C=arguments.length,k=new Array(C>1?C-1:0),N=1;N<C;N++)k[N-1]=arguments[N];return _.apply(void 0,k)}},ge=function(_,C){if(typeof _=="function")return me(_,C);_!=null&&(_.current=C)},ye=function(_){return _.reduce(function(C,k){var N=k[0],B=k[1];return C[N]=B,C},{})},Y=typeof window<"u"&&window.document&&window.document.createElement?f.useLayoutEffect:f.useEffect;function ve(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var C=_.ownerDocument;return C&&C.defaultView||window}return _}function ie(_){return _ instanceof ve(_).Element||_ instanceof Element}function we(_){return _ instanceof ve(_).HTMLElement||_ instanceof HTMLElement}function ze(_){return typeof ShadowRoot<"u"&&(_ instanceof ve(_).ShadowRoot||_ instanceof ShadowRoot)}var We=Math.max,Le=Math.min,Je=Math.round;function ft(_,C){C===void 0&&(C=!1);var k=_.getBoundingClientRect(),N=1,B=1;if(we(_)&&C){var K=_.offsetHeight,Z=_.offsetWidth;Z>0&&(N=Je(k.width)/Z||1),K>0&&(B=Je(k.height)/K||1)}return{width:k.width/N,height:k.height/B,top:k.top/B,right:k.right/N,bottom:k.bottom/B,left:k.left/N,x:k.left/N,y:k.top/B}}function I(_){var C=ve(_);return{scrollLeft:C.pageXOffset,scrollTop:C.pageYOffset}}function M(_){return _?(_.nodeName||"").toLowerCase():null}function G(_){return((ie(_)?_.ownerDocument:_.document)||window.document).documentElement}function ue(_){return ft(G(_)).left+I(_).scrollLeft}function ae(_){return ve(_).getComputedStyle(_)}function W(_){var C=ae(_),k=C.overflow,N=C.overflowX,B=C.overflowY;return/auto|scroll|overlay|hidden/.test(k+B+N)}function te(_,C,k){k===void 0&&(k=!1);var N,B,K=we(C),Z=we(C)&&function(de){var Fe=de.getBoundingClientRect(),Pe=Je(Fe.width)/de.offsetWidth||1,Ve=Je(Fe.height)/de.offsetHeight||1;return Pe!==1||Ve!==1}(C),le=G(C),J=ft(_,Z),re={scrollLeft:0,scrollTop:0},xe={x:0,y:0};return(K||!K&&!k)&&((M(C)!=="body"||W(le))&&(re=(N=C)!==ve(N)&&we(N)?{scrollLeft:(B=N).scrollLeft,scrollTop:B.scrollTop}:I(N)),we(C)?((xe=ft(C,!0)).x+=C.clientLeft,xe.y+=C.clientTop):le&&(xe.x=ue(le))),{x:J.left+re.scrollLeft-xe.x,y:J.top+re.scrollTop-xe.y,width:J.width,height:J.height}}function Ce(_){var C=ft(_),k=_.offsetWidth,N=_.offsetHeight;return Math.abs(C.width-k)<=1&&(k=C.width),Math.abs(C.height-N)<=1&&(N=C.height),{x:_.offsetLeft,y:_.offsetTop,width:k,height:N}}function Re(_){return M(_)==="html"?_:_.assignedSlot||_.parentNode||(ze(_)?_.host:null)||G(_)}function Ee(_){return["html","body","#document"].indexOf(M(_))>=0?_.ownerDocument.body:we(_)&&W(_)?_:Ee(Re(_))}function ot(_,C){var k;C===void 0&&(C=[]);var N=Ee(_),B=N===((k=_.ownerDocument)==null?void 0:k.body),K=ve(N),Z=B?[K].concat(K.visualViewport||[],W(N)?N:[]):N,le=C.concat(Z);return B?le:le.concat(ot(Re(Z)))}function Tt(_){return["table","td","th"].indexOf(M(_))>=0}function Gt(_){return we(_)&&ae(_).position!=="fixed"?_.offsetParent:null}function Rt(_){for(var C=ve(_),k=Gt(_);k&&Tt(k)&&ae(k).position==="static";)k=Gt(k);return k&&(M(k)==="html"||M(k)==="body"&&ae(k).position==="static")?C:k||function(N){var B=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;if(navigator.userAgent.indexOf("Trident")!==-1&&we(N)&&ae(N).position==="fixed")return null;var K=Re(N);for(ze(K)&&(K=K.host);we(K)&&["html","body"].indexOf(M(K))<0;){var Z=ae(K);if(Z.transform!=="none"||Z.perspective!=="none"||Z.contain==="paint"||["transform","perspective"].indexOf(Z.willChange)!==-1||B&&Z.willChange==="filter"||B&&Z.filter&&Z.filter!=="none")return K;K=K.parentNode}return null}(_)||C}var xt="top",lt="bottom",Jt="right",mt="left",_n="auto",un=[xt,lt,Jt,mt],vn="start",kn="end",Cr="viewport",dn="popper",Er=un.reduce(function(_,C){return _.concat([C+"-"+vn,C+"-"+kn])},[]),ur=[].concat(un,[_n]).reduce(function(_,C){return _.concat([C,C+"-"+vn,C+"-"+kn])},[]),Vn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Sr(_){var C=new Map,k=new Set,N=[];function B(K){k.add(K.name),[].concat(K.requires||[],K.requiresIfExists||[]).forEach(function(Z){if(!k.has(Z)){var le=C.get(Z);le&&B(le)}}),N.push(K)}return _.forEach(function(K){C.set(K.name,K)}),_.forEach(function(K){k.has(K.name)||B(K)}),N}var en={placement:"bottom",modifiers:[],strategy:"absolute"};function ta(){for(var _=arguments.length,C=new Array(_),k=0;k<_;k++)C[k]=arguments[k];return!C.some(function(N){return!(N&&typeof N.getBoundingClientRect=="function")})}function Pa(_){_===void 0&&(_={});var C=_,k=C.defaultModifiers,N=k===void 0?[]:k,B=C.defaultOptions,K=B===void 0?en:B;return function(Z,le,J){J===void 0&&(J=K);var re,xe,de={placement:"bottom",orderedModifiers:[],options:Object.assign({},en,K),modifiersData:{},elements:{reference:Z,popper:le},attributes:{},styles:{}},Fe=[],Pe=!1,Ve={state:de,setOptions:function(Ue){var nt=typeof Ue=="function"?Ue(de.options):Ue;Ke(),de.options=Object.assign({},K,de.options,nt),de.scrollParents={reference:ie(Z)?ot(Z):Z.contextElement?ot(Z.contextElement):[],popper:ot(le)};var et,Xe,Qe=function(Be){var _e=Sr(Be);return Vn.reduce(function(qe,Me){return qe.concat(_e.filter(function(st){return st.phase===Me}))},[])}((et=[].concat(N,de.options.modifiers),Xe=et.reduce(function(Be,_e){var qe=Be[_e.name];return Be[_e.name]=qe?Object.assign({},qe,_e,{options:Object.assign({},qe.options,_e.options),data:Object.assign({},qe.data,_e.data)}):_e,Be},{}),Object.keys(Xe).map(function(Be){return Xe[Be]})));return de.orderedModifiers=Qe.filter(function(Be){return Be.enabled}),de.orderedModifiers.forEach(function(Be){var _e=Be.name,qe=Be.options,Me=qe===void 0?{}:qe,st=Be.effect;if(typeof st=="function"){var gt=st({state:de,name:_e,instance:Ve,options:Me});Fe.push(gt||function(){})}}),Ve.update()},forceUpdate:function(){if(!Pe){var Ue=de.elements,nt=Ue.reference,et=Ue.popper;if(ta(nt,et)){de.rects={reference:te(nt,Rt(et),de.options.strategy==="fixed"),popper:Ce(et)},de.reset=!1,de.placement=de.options.placement,de.orderedModifiers.forEach(function(st){return de.modifiersData[st.name]=Object.assign({},st.data)});for(var Xe=0;Xe<de.orderedModifiers.length;Xe++)if(de.reset!==!0){var Qe=de.orderedModifiers[Xe],Be=Qe.fn,_e=Qe.options,qe=_e===void 0?{}:_e,Me=Qe.name;typeof Be=="function"&&(de=Be({state:de,options:qe,name:Me,instance:Ve})||de)}else de.reset=!1,Xe=-1}}},update:(re=function(){return new Promise(function(Ue){Ve.forceUpdate(),Ue(de)})},function(){return xe||(xe=new Promise(function(Ue){Promise.resolve().then(function(){xe=void 0,Ue(re())})})),xe}),destroy:function(){Ke(),Pe=!0}};if(!ta(Z,le))return Ve;function Ke(){Fe.forEach(function(Ue){return Ue()}),Fe=[]}return Ve.setOptions(J).then(function(Ue){!Pe&&J.onFirstUpdate&&J.onFirstUpdate(Ue)}),Ve}}var Vr={passive:!0};const na={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var C=_.state,k=_.instance,N=_.options,B=N.scroll,K=B===void 0||B,Z=N.resize,le=Z===void 0||Z,J=ve(C.elements.popper),re=[].concat(C.scrollParents.reference,C.scrollParents.popper);return K&&re.forEach(function(xe){xe.addEventListener("scroll",k.update,Vr)}),le&&J.addEventListener("resize",k.update,Vr),function(){K&&re.forEach(function(xe){xe.removeEventListener("scroll",k.update,Vr)}),le&&J.removeEventListener("resize",k.update,Vr)}},data:{}};function wn(_){return _.split("-")[0]}function Dn(_){return _.split("-")[1]}function dr(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function Tr(_){var C,k=_.reference,N=_.element,B=_.placement,K=B?wn(B):null,Z=B?Dn(B):null,le=k.x+k.width/2-N.width/2,J=k.y+k.height/2-N.height/2;switch(K){case xt:C={x:le,y:k.y-N.height};break;case lt:C={x:le,y:k.y+k.height};break;case Jt:C={x:k.x+k.width,y:J};break;case mt:C={x:k.x-N.width,y:J};break;default:C={x:k.x,y:k.y}}var re=K?dr(K):null;if(re!=null){var xe=re==="y"?"height":"width";switch(Z){case vn:C[re]=C[re]-(k[xe]/2-N[xe]/2);break;case kn:C[re]=C[re]+(k[xe]/2-N[xe]/2)}}return C}const Xr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var C=_.state,k=_.name;C.modifiersData[k]=Tr({reference:C.rects.reference,element:C.rects.popper,strategy:"absolute",placement:C.placement})},data:{}};var Qr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _r(_){var C,k=_.popper,N=_.popperRect,B=_.placement,K=_.variation,Z=_.offsets,le=_.position,J=_.gpuAcceleration,re=_.adaptive,xe=_.roundOffsets,de=_.isFixed,Fe=Z.x,Pe=Fe===void 0?0:Fe,Ve=Z.y,Ke=Ve===void 0?0:Ve,Ue=typeof xe=="function"?xe({x:Pe,y:Ke}):{x:Pe,y:Ke};Pe=Ue.x,Ke=Ue.y;var nt=Z.hasOwnProperty("x"),et=Z.hasOwnProperty("y"),Xe=mt,Qe=xt,Be=window;if(re){var _e=Rt(k),qe="clientHeight",Me="clientWidth";_e===ve(k)&&ae(_e=G(k)).position!=="static"&&le==="absolute"&&(qe="scrollHeight",Me="scrollWidth"),_e=_e,(B===xt||(B===mt||B===Jt)&&K===kn)&&(Qe=lt,Ke-=(de&&_e===Be&&Be.visualViewport?Be.visualViewport.height:_e[qe])-N.height,Ke*=J?1:-1),B!==mt&&(B!==xt&&B!==lt||K!==kn)||(Xe=Jt,Pe-=(de&&_e===Be&&Be.visualViewport?Be.visualViewport.width:_e[Me])-N.width,Pe*=J?1:-1)}var st,gt=Object.assign({position:le},re&&Qr),it=xe===!0?function(jt){var rt=jt.x,Vt=jt.y,$t=window.devicePixelRatio||1;return{x:Je(rt*$t)/$t||0,y:Je(Vt*$t)/$t||0}}({x:Pe,y:Ke}):{x:Pe,y:Ke};return Pe=it.x,Ke=it.y,J?Object.assign({},gt,((st={})[Qe]=et?"0":"",st[Xe]=nt?"0":"",st.transform=(Be.devicePixelRatio||1)<=1?"translate("+Pe+"px, "+Ke+"px)":"translate3d("+Pe+"px, "+Ke+"px, 0)",st)):Object.assign({},gt,((C={})[Qe]=et?Ke+"px":"",C[Xe]=nt?Pe+"px":"",C.transform="",C))}const Ms={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var C=_.state,k=_.options,N=k.gpuAcceleration,B=N===void 0||N,K=k.adaptive,Z=K===void 0||K,le=k.roundOffsets,J=le===void 0||le,re={placement:wn(C.placement),variation:Dn(C.placement),popper:C.elements.popper,popperRect:C.rects.popper,gpuAcceleration:B,isFixed:C.options.strategy==="fixed"};C.modifiersData.popperOffsets!=null&&(C.styles.popper=Object.assign({},C.styles.popper,_r(Object.assign({},re,{offsets:C.modifiersData.popperOffsets,position:C.options.strategy,adaptive:Z,roundOffsets:J})))),C.modifiersData.arrow!=null&&(C.styles.arrow=Object.assign({},C.styles.arrow,_r(Object.assign({},re,{offsets:C.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:J})))),C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-placement":C.placement})},data:{}},z={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var C=_.state;Object.keys(C.elements).forEach(function(k){var N=C.styles[k]||{},B=C.attributes[k]||{},K=C.elements[k];we(K)&&M(K)&&(Object.assign(K.style,N),Object.keys(B).forEach(function(Z){var le=B[Z];le===!1?K.removeAttribute(Z):K.setAttribute(Z,le===!0?"":le)}))})},effect:function(_){var C=_.state,k={popper:{position:C.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(C.elements.popper.style,k.popper),C.styles=k,C.elements.arrow&&Object.assign(C.elements.arrow.style,k.arrow),function(){Object.keys(C.elements).forEach(function(N){var B=C.elements[N],K=C.attributes[N]||{},Z=Object.keys(C.styles.hasOwnProperty(N)?C.styles[N]:k[N]).reduce(function(le,J){return le[J]="",le},{});we(B)&&M(B)&&(Object.assign(B.style,Z),Object.keys(K).forEach(function(le){B.removeAttribute(le)}))})}},requires:["computeStyles"]},ne={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var C=_.state,k=_.options,N=_.name,B=k.offset,K=B===void 0?[0,0]:B,Z=ur.reduce(function(xe,de){return xe[de]=function(Fe,Pe,Ve){var Ke=wn(Fe),Ue=[mt,xt].indexOf(Ke)>=0?-1:1,nt=typeof Ve=="function"?Ve(Object.assign({},Pe,{placement:Fe})):Ve,et=nt[0],Xe=nt[1];return et=et||0,Xe=(Xe||0)*Ue,[mt,Jt].indexOf(Ke)>=0?{x:Xe,y:et}:{x:et,y:Xe}}(de,C.rects,K),xe},{}),le=Z[C.placement],J=le.x,re=le.y;C.modifiersData.popperOffsets!=null&&(C.modifiersData.popperOffsets.x+=J,C.modifiersData.popperOffsets.y+=re),C.modifiersData[N]=Z}};var Se={left:"right",right:"left",bottom:"top",top:"bottom"};function De(_){return _.replace(/left|right|bottom|top/g,function(C){return Se[C]})}var be={start:"end",end:"start"};function Te(_){return _.replace(/start|end/g,function(C){return be[C]})}function He(_,C){var k=C.getRootNode&&C.getRootNode();if(_.contains(C))return!0;if(k&&ze(k)){var N=C;do{if(N&&_.isSameNode(N))return!0;N=N.parentNode||N.host}while(N)}return!1}function Ae(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function $e(_,C){return C===Cr?Ae(function(k){var N=ve(k),B=G(k),K=N.visualViewport,Z=B.clientWidth,le=B.clientHeight,J=0,re=0;return K&&(Z=K.width,le=K.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(J=K.offsetLeft,re=K.offsetTop)),{width:Z,height:le,x:J+ue(k),y:re}}(_)):ie(C)?function(k){var N=ft(k);return N.top=N.top+k.clientTop,N.left=N.left+k.clientLeft,N.bottom=N.top+k.clientHeight,N.right=N.left+k.clientWidth,N.width=k.clientWidth,N.height=k.clientHeight,N.x=N.left,N.y=N.top,N}(C):Ae(function(k){var N,B=G(k),K=I(k),Z=(N=k.ownerDocument)==null?void 0:N.body,le=We(B.scrollWidth,B.clientWidth,Z?Z.scrollWidth:0,Z?Z.clientWidth:0),J=We(B.scrollHeight,B.clientHeight,Z?Z.scrollHeight:0,Z?Z.clientHeight:0),re=-K.scrollLeft+ue(k),xe=-K.scrollTop;return ae(Z||B).direction==="rtl"&&(re+=We(B.clientWidth,Z?Z.clientWidth:0)-le),{width:le,height:J,x:re,y:xe}}(G(_)))}function at(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function At(_,C){return C.reduce(function(k,N){return k[N]=_,k},{})}function pt(_,C){C===void 0&&(C={});var k=C,N=k.placement,B=N===void 0?_.placement:N,K=k.boundary,Z=K===void 0?"clippingParents":K,le=k.rootBoundary,J=le===void 0?Cr:le,re=k.elementContext,xe=re===void 0?dn:re,de=k.altBoundary,Fe=de!==void 0&&de,Pe=k.padding,Ve=Pe===void 0?0:Pe,Ke=at(typeof Ve!="number"?Ve:At(Ve,un)),Ue=xe===dn?"reference":dn,nt=_.rects.popper,et=_.elements[Fe?Ue:xe],Xe=function(it,jt,rt){var Vt=jt==="clippingParents"?function(ht){var Ct=ot(Re(ht)),Ot=["absolute","fixed"].indexOf(ae(ht).position)>=0&&we(ht)?Rt(ht):ht;return ie(Ot)?Ct.filter(function(Et){return ie(Et)&&He(Et,Ot)&&M(Et)!=="body"}):[]}(it):[].concat(jt),$t=[].concat(Vt,[rt]),kt=$t[0],yt=$t.reduce(function(ht,Ct){var Ot=$e(it,Ct);return ht.top=We(Ot.top,ht.top),ht.right=Le(Ot.right,ht.right),ht.bottom=Le(Ot.bottom,ht.bottom),ht.left=We(Ot.left,ht.left),ht},$e(it,kt));return yt.width=yt.right-yt.left,yt.height=yt.bottom-yt.top,yt.x=yt.left,yt.y=yt.top,yt}(ie(et)?et:et.contextElement||G(_.elements.popper),Z,J),Qe=ft(_.elements.reference),Be=Tr({reference:Qe,element:nt,strategy:"absolute",placement:B}),_e=Ae(Object.assign({},nt,Be)),qe=xe===dn?_e:Qe,Me={top:Xe.top-qe.top+Ke.top,bottom:qe.bottom-Xe.bottom+Ke.bottom,left:Xe.left-qe.left+Ke.left,right:qe.right-Xe.right+Ke.right},st=_.modifiersData.offset;if(xe===dn&&st){var gt=st[B];Object.keys(Me).forEach(function(it){var jt=[Jt,lt].indexOf(it)>=0?1:-1,rt=[xt,lt].indexOf(it)>=0?"y":"x";Me[it]+=gt[rt]*jt})}return Me}const Dt={name:"flip",enabled:!0,phase:"main",fn:function(_){var C=_.state,k=_.options,N=_.name;if(!C.modifiersData[N]._skip){for(var B=k.mainAxis,K=B===void 0||B,Z=k.altAxis,le=Z===void 0||Z,J=k.fallbackPlacements,re=k.padding,xe=k.boundary,de=k.rootBoundary,Fe=k.altBoundary,Pe=k.flipVariations,Ve=Pe===void 0||Pe,Ke=k.allowedAutoPlacements,Ue=C.options.placement,nt=wn(Ue),et=J||(nt!==Ue&&Ve?function(Et){if(wn(Et)===_n)return[];var Nt=De(Et);return[Te(Et),Nt,Te(Nt)]}(Ue):[De(Ue)]),Xe=[Ue].concat(et).reduce(function(Et,Nt){return Et.concat(wn(Nt)===_n?function(an,xn){xn===void 0&&(xn={});var hn=xn,Ar=hn.placement,Oe=hn.boundary,Wr=hn.rootBoundary,Vs=hn.padding,Xs=hn.flipVariations,Eo=hn.allowedAutoPlacements,Qs=Eo===void 0?ur:Eo,Gr=Dn(Ar),Ua=Gr?Xs?Er:Er.filter(function(Kn){return Dn(Kn)===Gr}):un,So=Ua.filter(function(Kn){return Qs.indexOf(Kn)>=0});So.length===0&&(So=Ua);var Yr=So.reduce(function(Kn,Zr){return Kn[Zr]=pt(an,{placement:Zr,boundary:Oe,rootBoundary:Wr,padding:Vs})[wn(Zr)],Kn},{});return Object.keys(Yr).sort(function(Kn,Zr){return Yr[Kn]-Yr[Zr]})}(C,{placement:Nt,boundary:xe,rootBoundary:de,padding:re,flipVariations:Ve,allowedAutoPlacements:Ke}):Nt)},[]),Qe=C.rects.reference,Be=C.rects.popper,_e=new Map,qe=!0,Me=Xe[0],st=0;st<Xe.length;st++){var gt=Xe[st],it=wn(gt),jt=Dn(gt)===vn,rt=[xt,lt].indexOf(it)>=0,Vt=rt?"width":"height",$t=pt(C,{placement:gt,boundary:xe,rootBoundary:de,altBoundary:Fe,padding:re}),kt=rt?jt?Jt:mt:jt?lt:xt;Qe[Vt]>Be[Vt]&&(kt=De(kt));var yt=De(kt),ht=[];if(K&&ht.push($t[it]<=0),le&&ht.push($t[kt]<=0,$t[yt]<=0),ht.every(function(Et){return Et})){Me=gt,qe=!1;break}_e.set(gt,ht)}if(qe)for(var Ct=function(Et){var Nt=Xe.find(function(an){var xn=_e.get(an);if(xn)return xn.slice(0,Et).every(function(hn){return hn})});if(Nt)return Me=Nt,"break"},Ot=Ve?3:1;Ot>0&&Ct(Ot)!=="break";Ot--);C.placement!==Me&&(C.modifiersData[N]._skip=!0,C.placement=Me,C.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _t(_,C,k){return We(_,Le(C,k))}const tn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var C=_.state,k=_.options,N=_.name,B=k.mainAxis,K=B===void 0||B,Z=k.altAxis,le=Z!==void 0&&Z,J=k.boundary,re=k.rootBoundary,xe=k.altBoundary,de=k.padding,Fe=k.tether,Pe=Fe===void 0||Fe,Ve=k.tetherOffset,Ke=Ve===void 0?0:Ve,Ue=pt(C,{boundary:J,rootBoundary:re,padding:de,altBoundary:xe}),nt=wn(C.placement),et=Dn(C.placement),Xe=!et,Qe=dr(nt),Be=Qe==="x"?"y":"x",_e=C.modifiersData.popperOffsets,qe=C.rects.reference,Me=C.rects.popper,st=typeof Ke=="function"?Ke(Object.assign({},C.rects,{placement:C.placement})):Ke,gt=typeof st=="number"?{mainAxis:st,altAxis:st}:Object.assign({mainAxis:0,altAxis:0},st),it=C.modifiersData.offset?C.modifiersData.offset[C.placement]:null,jt={x:0,y:0};if(_e){if(K){var rt,Vt=Qe==="y"?xt:mt,$t=Qe==="y"?lt:Jt,kt=Qe==="y"?"height":"width",yt=_e[Qe],ht=yt+Ue[Vt],Ct=yt-Ue[$t],Ot=Pe?-Me[kt]/2:0,Et=et===vn?qe[kt]:Me[kt],Nt=et===vn?-Me[kt]:-qe[kt],an=C.elements.arrow,xn=Pe&&an?Ce(an):{width:0,height:0},hn=C.modifiersData["arrow#persistent"]?C.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ar=hn[Vt],Oe=hn[$t],Wr=_t(0,qe[kt],xn[kt]),Vs=Xe?qe[kt]/2-Ot-Wr-Ar-gt.mainAxis:Et-Wr-Ar-gt.mainAxis,Xs=Xe?-qe[kt]/2+Ot+Wr+Oe+gt.mainAxis:Nt+Wr+Oe+gt.mainAxis,Eo=C.elements.arrow&&Rt(C.elements.arrow),Qs=Eo?Qe==="y"?Eo.clientTop||0:Eo.clientLeft||0:0,Gr=(rt=it?.[Qe])!=null?rt:0,Ua=yt+Xs-Gr,So=_t(Pe?Le(ht,yt+Vs-Gr-Qs):ht,yt,Pe?We(Ct,Ua):Ct);_e[Qe]=So,jt[Qe]=So-yt}if(le){var Yr,Kn=Qe==="x"?xt:mt,Zr=Qe==="x"?lt:Jt,Jr=_e[Be],qa=Be==="y"?"height":"width",yl=Jr+Ue[Kn],Ha=Jr-Ue[Zr],eo=[xt,mt].indexOf(nt)!==-1,bl=(Yr=it?.[Be])!=null?Yr:0,Ks=eo?yl:Jr-qe[qa]-Me[qa]-bl+gt.altAxis,Ws=eo?Jr+qe[qa]+Me[qa]-bl-gt.altAxis:Ha,Gs=Pe&&eo?function(vl,wl,Pr){var xl=_t(vl,wl,Pr);return xl>Pr?Pr:xl}(Ks,Jr,Ws):_t(Pe?Ks:yl,Jr,Pe?Ws:Ha);_e[Be]=Gs,jt[Be]=Gs-Jr}C.modifiersData[N]=jt}},requiresIfExists:["offset"]},wt={name:"arrow",enabled:!0,phase:"main",fn:function(_){var C,k=_.state,N=_.name,B=_.options,K=k.elements.arrow,Z=k.modifiersData.popperOffsets,le=wn(k.placement),J=dr(le),re=[mt,Jt].indexOf(le)>=0?"height":"width";if(K&&Z){var xe=function(Me,st){return at(typeof(Me=typeof Me=="function"?Me(Object.assign({},st.rects,{placement:st.placement})):Me)!="number"?Me:At(Me,un))}(B.padding,k),de=Ce(K),Fe=J==="y"?xt:mt,Pe=J==="y"?lt:Jt,Ve=k.rects.reference[re]+k.rects.reference[J]-Z[J]-k.rects.popper[re],Ke=Z[J]-k.rects.reference[J],Ue=Rt(K),nt=Ue?J==="y"?Ue.clientHeight||0:Ue.clientWidth||0:0,et=Ve/2-Ke/2,Xe=xe[Fe],Qe=nt-de[re]-xe[Pe],Be=nt/2-de[re]/2+et,_e=_t(Xe,Be,Qe),qe=J;k.modifiersData[N]=((C={})[qe]=_e,C.centerOffset=_e-Be,C)}},effect:function(_){var C=_.state,k=_.options.element,N=k===void 0?"[data-popper-arrow]":k;N!=null&&(typeof N!="string"||(N=C.elements.popper.querySelector(N)))&&He(C.elements.popper,N)&&(C.elements.arrow=N)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nn(_,C,k){return k===void 0&&(k={x:0,y:0}),{top:_.top-C.height-k.y,right:_.right-C.width+k.x,bottom:_.bottom-C.height+k.y,left:_.left-C.width-k.x}}function fn(_){return[xt,Jt,lt,mt].some(function(C){return _[C]>=0})}var Mn=Pa({defaultModifiers:[na,Xr,Ms,z,ne,Dt,tn,wt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var C=_.state,k=_.name,N=C.rects.reference,B=C.rects.popper,K=C.modifiersData.preventOverflow,Z=pt(C,{elementContext:"reference"}),le=pt(C,{altBoundary:!0}),J=nn(Z,N),re=nn(le,B,K),xe=fn(J),de=fn(re);C.modifiersData[k]={referenceClippingOffsets:J,popperEscapeOffsets:re,isReferenceHidden:xe,hasPopperEscaped:de},C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-reference-hidden":xe,"data-popper-escaped":de})}}]}),fr=s(590),On=s.n(fr),Xn=[],pn=function(){},Rn=function(){return Promise.resolve(null)},bo=[];function Bs(_){var C=_.placement,k=C===void 0?"bottom":C,N=_.strategy,B=N===void 0?"absolute":N,K=_.modifiers,Z=K===void 0?bo:K,le=_.referenceElement,J=_.onFirstUpdate,re=_.innerRef,xe=_.children,de=f.useContext(A),Fe=f.useState(null),Pe=Fe[0],Ve=Fe[1],Ke=f.useState(null),Ue=Ke[0],nt=Ke[1];f.useEffect(function(){ge(re,Pe)},[re,Pe]);var et=f.useMemo(function(){return{placement:k,strategy:B,onFirstUpdate:J,modifiers:[].concat(Z,[{name:"arrow",enabled:Ue!=null,options:{element:Ue}}])}},[k,B,J,Z,Ue]),Xe=function(st,gt,it){it===void 0&&(it={});var jt=f.useRef(null),rt={onFirstUpdate:it.onFirstUpdate,placement:it.placement||"bottom",strategy:it.strategy||"absolute",modifiers:it.modifiers||Xn},Vt=f.useState({styles:{popper:{position:rt.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),$t=Vt[0],kt=Vt[1],yt=f.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(Ot){var Et=Ot.state,Nt=Object.keys(Et.elements);kt({styles:ye(Nt.map(function(an){return[an,Et.styles[an]||{}]})),attributes:ye(Nt.map(function(an){return[an,Et.attributes[an]]}))})},requires:["computeStyles"]}},[]),ht=f.useMemo(function(){var Ot={onFirstUpdate:rt.onFirstUpdate,placement:rt.placement,strategy:rt.strategy,modifiers:[].concat(rt.modifiers,[yt,{name:"applyStyles",enabled:!1}])};return On()(jt.current,Ot)?jt.current||Ot:(jt.current=Ot,Ot)},[rt.onFirstUpdate,rt.placement,rt.strategy,rt.modifiers,yt]),Ct=f.useRef();return Y(function(){Ct.current&&Ct.current.setOptions(ht)},[ht]),Y(function(){if(st!=null&&gt!=null){var Ot=(it.createPopper||Mn)(st,gt,ht);return Ct.current=Ot,function(){Ot.destroy(),Ct.current=null}}},[st,gt,it.createPopper]),{state:Ct.current?Ct.current.state:null,styles:$t.styles,attributes:$t.attributes,update:Ct.current?Ct.current.update:null,forceUpdate:Ct.current?Ct.current.forceUpdate:null}}(le||de,Pe,et),Qe=Xe.state,Be=Xe.styles,_e=Xe.forceUpdate,qe=Xe.update,Me=f.useMemo(function(){return{ref:Ve,style:Be.popper,placement:Qe?Qe.placement:k,hasPopperEscaped:Qe&&Qe.modifiersData.hide?Qe.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:Qe&&Qe.modifiersData.hide?Qe.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:Be.arrow,ref:nt},forceUpdate:_e||pn,update:qe||Rn}},[Ve,nt,k,Qe,Be,qe,_e]);return fe(xe)(Me)}var hu=s(473),mu=s.n(hu);function Kr(_){var C=_.children,k=_.innerRef,N=f.useContext(P),B=f.useCallback(function(K){ge(k,K),me(N,K)},[k,N]);return f.useEffect(function(){return function(){return ge(k,null)}}),f.useEffect(function(){mu()(!!N,"`Reference` should not be used outside of a `Manager` component.")},[N]),fe(C)({ref:B})}var fl=s(379),Na=s.n(fl),zs=s(717);Na()(zs.Z,{insert:"head",singleton:!1});const dt=zs.Z.locals||{};function La(_,C){(C==null||C>_.length)&&(C=_.length);for(var k=0,N=new Array(C);k<C;k++)N[k]=_[k];return N}var pl=function(_){var C=_.className,k=_.tally;return f.createElement("div",{className:D()(dt.tally,C)},f.createElement("div",{className:dt.tallyCounts},f.createElement(p.SectionTallyCount,{type:"introduction",count:k&&k.introduction&&k.introduction.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"methods",count:k&&k.methods&&k.methods.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"results",count:k&&k.results&&k.results.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"discussion",count:k&&k.discussion&&k.discussion.toLocaleString()||0,showLabels:!0}),f.createElement(p.SectionTallyCount,{type:"other",count:k&&k.other&&k.other.toLocaleString()||0,showLabels:!0})))},hl=function(_){var C=_.className,k=_.tally,N=_.notices;return f.createElement("div",{className:D()(dt.tally,C)},N&&N.length>0&&f.createElement("div",{className:dt.notices},N.map(function(B,K){return f.createElement("div",{key:"".concat(K,"-").concat(B),className:dt.notice},f.createElement("div",{className:dt.tallyCounts},B==="Retracted"||B==="Withdrawn"?f.createElement(p.Count,{type:"retractions"}):f.createElement(p.Count,{type:"notices"})),f.createElement("div",{className:dt.noticeLabel},B==="Retracted"||B==="Withdrawn"?f.createElement("span",{className:D()(dt.retractionsCopy,dt[B])},"This paper has been ",B.toLowerCase()):f.createElement("span",{className:D()(dt.noticeCopy,dt[B])},"This paper ",B.toLowerCase())))})),f.createElement("div",{className:dt.tallyCounts},f.createElement(p.Count,{type:"publications",count:k&&k.citingPublications?k.citingPublications.toLocaleString():0,className:dt.tallyCount}),f.createElement(p.Count,{type:"supporting",count:k&&k.supporting?k.supporting.toLocaleString():0,className:dt.tallyCount}),f.createElement(p.Count,{type:"mentioning",count:k&&k.mentioning?k.mentioning.toLocaleString():0,className:dt.tallyCount}),f.createElement(p.Count,{type:"contrasting",count:k&&k.contradicting?k.contradicting.toLocaleString():0,className:dt.tallyCount})),f.createElement("div",{className:dt.labels},f.createElement("span",{className:dt.label},"Citing Publications"),f.createElement("span",{className:dt.label},"Supporting"),f.createElement("span",{className:dt.label},"Mentioning"),f.createElement("span",{className:dt.label},"Contrasting")))},$s=function(_){var C=_.className,k=_.href,N=_.children;return f.createElement("a",{className:D()(dt.link,C),href:k,target:"_blank",rel:"noopener noreferrer"},N)},Bn=function(_){var C=_.className;return f.createElement("div",{className:C},f.createElement("p",null,"See how this article has been cited at ",f.createElement($s,{href:"https://scite.ai"},"scite.ai")),f.createElement("p",{className:dt.message},"scite shows how a scientific paper has been cited by providing the context of the citation, a classification describing whether it supports, mentions, or contrasts the cited claim, and a label indicating in which section the citation was made"))},Or=function(_){var C=_.tally,k=_.notices;return f.createElement("div",{className:dt.tooltipContent},f.createElement("img",{className:dt.logo,src:"https://cdn.scite.ai/assets/images/logo.svg"}),f.createElement("span",{className:dt.slogan},"Smart Citations"),f.createElement(hl,{tally:C,notices:k}),C&&f.createElement("a",{className:dt.button,href:"https://scite.ai/reports/".concat(C.doi),target:"_blank",rel:"noopener noreferrer"},"View Citations"),f.createElement(Bn,null))},Rr=function(_){var C=_.tally;return f.createElement("div",null,f.createElement("img",{className:dt.logo,src:"https://cdn.scite.ai/assets/images/logo.svg"}),f.createElement("span",{className:dt.slogan},"Cited in Sections"),f.createElement(pl,{tally:C}),C&&f.createElement("a",{className:dt.button,href:"https://scite.ai/reports/".concat(C.doi),target:"_blank",rel:"noopener noreferrer"},"View Citations"),f.createElement(Bn,null))},jr=function(_){var C,k=_.show,N=_.doi,B=_.tally,K=_.notices,Z=_.placement,le=_.flip,J=_.slide,re=_.handleMouseEnter,xe=_.handleMouseLeave,de=_.tallyType;(0,f.useEffect)(function(){C&&setTimeout(C)},[B]);var Fe=function(){window.open("https://scite.ai/reports/".concat(N))};return f.createElement(Bs,{placement:Z,strategy:"fixed",modifiers:[{name:"preventOverflow",options:{mainAxis:!1}},{name:"offset",options:{offset:[J||0,12]}},{name:"flip",options:le?{}:{fallbackPlacements:[]}}]},function(Pe){var Ve,Ke,Ue,nt=Pe.ref,et=Pe.style,Xe=Pe.placement,Qe=(Pe.arrowProps,Pe.update);return C=Qe,f.createElement("div",{ref:nt,className:D()(dt.tooltip,(Ve={},Ke=dt.tooltipShow,Ue=k,Ke in Ve?Object.defineProperty(Ve,Ke,{value:Ue,enumerable:!0,configurable:!0,writable:!0}):Ve[Ke]=Ue,Ve)),style:et,"data-placement":Xe,onMouseEnter:re,onMouseLeave:xe,onClick:Fe},de==="smart_citations"&&f.createElement(Or,{tally:B,notices:K}),de==="sections"&&f.createElement(Rr,{tally:B}))})};const Ir=function(_){var C,k,N,B,K=_.doi,Z=_.tally,le=_.notices,J=_.showZero,re=_.placement,xe=re===void 0?"top":re,de=_.flip,Fe=_.slide,Pe=Fe===void 0?0:Fe,Ve=_.children,Ke=_.tallyType,Ue=Ke===void 0?"smart_citations":Ke,nt=(N=(0,f.useState)(!1),B=2,function(_e){if(Array.isArray(_e))return _e}(N)||function(_e,qe){var Me=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(Me!=null){var st,gt,it=[],jt=!0,rt=!1;try{for(Me=Me.call(_e);!(jt=(st=Me.next()).done)&&(it.push(st.value),!qe||it.length!==qe);jt=!0);}catch(Vt){rt=!0,gt=Vt}finally{try{jt||Me.return==null||Me.return()}finally{if(rt)throw gt}}return it}}(N,B)||function(_e,qe){if(_e){if(typeof _e=="string")return La(_e,qe);var Me=Object.prototype.toString.call(_e).slice(8,-1);return Me==="Object"&&_e.constructor&&(Me=_e.constructor.name),Me==="Map"||Me==="Set"?Array.from(Me):Me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Me)?La(_e,qe):void 0}}(N,B)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),et=nt[0],Xe=nt[1],Qe=function(){xe!=="none"&&(C&&clearTimeout(C),k=setTimeout(function(){Xe(!0)},500))},Be=function(){xe!=="none"&&(k&&clearTimeout(k),C=setTimeout(function(){Xe(!1)},300))};return xe==="none"?Ve:f.createElement(H,null,f.createElement(Kr,null,function(_e){var qe=_e.ref;return f.createElement("div",{className:dt.reference,ref:qe,onMouseEnter:Qe,onMouseLeave:Be},Ve)}),f.createElement(jr,{show:et&&!(Z&&Z.total===0&&!J),doi:K,tally:Z,notices:le,placement:xe,flip:de,slide:Pe,handleMouseEnter:Qe,handleMouseLeave:Be,tallyType:Ue}))};var vo=s(180);Na()(vo.Z,{insert:"head",singleton:!1}),vo.Z.locals;var wo=s(696);function Da(_,C){(C==null||C>_.length)&&(C=_.length);for(var k=0,N=new Array(C);k<C;k++)N[k]=_[k];return N}function Ma(_,C,k,N,B,K,Z){try{var le=_[K](Z),J=le.value}catch(re){return void k(re)}le.done?C(J):Promise.resolve(J).then(N,B)}function Fs(_){return function(){var C=this,k=arguments;return new Promise(function(N,B){var K=_.apply(C,k);function Z(J){Ma(K,N,B,Z,le,"next",J)}function le(J){Ma(K,N,B,Z,le,"throw",J)}Z(void 0)})}}function ra(_,C,k){return C in _?Object.defineProperty(_,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):_[C]=k,_}function Us(_){for(var C=1;C<arguments.length;C++){var k=arguments[C]!=null?arguments[C]:{},N=Object.keys(k);typeof Object.getOwnPropertySymbols=="function"&&(N=N.concat(Object.getOwnPropertySymbols(k).filter(function(B){return Object.getOwnPropertyDescriptor(k,B).enumerable}))),N.forEach(function(B){ra(_,B,k[B])})}return _}function Ba(_,C){return function(k){if(Array.isArray(k))return k}(_)||function(k,N){var B=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(B!=null){var K,Z,le=[],J=!0,re=!1;try{for(B=B.call(k);!(J=(K=B.next()).done)&&(le.push(K.value),!N||le.length!==N);J=!0);}catch(xe){re=!0,Z=xe}finally{try{J||B.return==null||B.return()}finally{if(re)throw Z}}return le}}(_,C)||ml(_,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qs(_){return function(C){if(Array.isArray(C))return Da(C)}(_)||function(C){if(typeof Symbol<"u"&&C[Symbol.iterator]!=null||C["@@iterator"]!=null)return Array.from(C)}(_)||ml(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ml(_,C){if(_){if(typeof _=="string")return Da(_,C);var k=Object.prototype.toString.call(_).slice(8,-1);return k==="Object"&&_.constructor&&(k=_.constructor.name),k==="Map"||k==="Set"?Array.from(k):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?Da(_,C):void 0}}Na()(wo.Z,{insert:"head",singleton:!1}),wo.Z.locals;var Qn=500,oa=window.location.hostname;function xo(_){var C=_.dataset,k={},N=aa(_);return N&&(k.doi=N),C.tallyShow?k.tallyShow=C.tallyShow==="true":k.tallyShow=!0,C.sectionTallyShow&&(k.sectionTallyShow=C.sectionTallyShow==="true"),C.showLogo&&(k.showLogo=C.showLogo==="true"),C.chartType&&(k.chartType=C.chartType),C.showZero&&(k.showZero=C.showZero==="true"),C.forceCollapse&&(k.forceCollapse=C.forceCollapse==="true"),C.layout&&(k.horizontal=C.layout==="horizontal"),C.sectionTallyLayout&&(k.horizontalSectionTally=C.sectionTallyLayout==="horizontal"),C.tooltipPlacement&&(k.placement=C.tooltipPlacement),C.tooltipSlide&&(k.slide=Number(C.tooltipSlide)),C.showLabels&&(k.showLabels=C.showLabels==="true"),C.targetEl&&(k.targetEl=C.targetEl),C.insertBefore&&(k.insertBefore=C.insertBefore==="true"),C.small&&(k.small=C.small==="true"),C.campaign&&(k.campaign=C.campaign),C.autologin&&(k.autologin=C.autologin),C.rewardfulId&&(k.rewardfulID=C.rewardfulId),k}function Co(_){var C,k=[],N=[],B=!0,K=!1,Z=void 0;try{for(var le,J=_[Symbol.iterator]();!(B=(le=J.next()).done);B=!0){var re=le.value,xe=aa(re);"tallyShow"in(C=re.dataset)&&C.tallyShow!==null&&C.tallyShow!=="true"||k.push(xe),re.dataset.sectionTallyShow==="true"&&N.push(xe)}}catch(de){K=!0,Z=de}finally{try{B||J.return==null||J.return()}finally{if(K)throw Z}}return{tallyDOIs:qs(new Set(k)),sectionTallyDOIs:qs(new Set(N))}}function aa(_){var C,k=_.dataset;if(k.doi&&/^meta:/.test(k.doi)){var N=k.doi.split("meta:").join(""),B="meta[name='".concat(N,"']"),K=document.querySelector(B);K?C=K.getAttribute("content"):console.warn('Scite badge could not find meta tag with name="'.concat(N,'"'))}else k.doi&&(C=k.doi);return C&&C.toLowerCase().trim()}function za(_,C,k,N){var B=xo(_),K=B.tallyShow||!1,Z=B.sectionTallyShow||!1,le=K&&Z,J=B.doi,re=B.showZero||!1,xe=B.forceCollapse||!1,de=B.horizontal||!1,Fe=B.placement||"top",Pe=B.showLabels||!1,Ve=B.slide||0,Ke=B.small||!1,Ue=B.campaign||void 0,nt=B.autologin||void 0,et=B.rewardfulID||void 0,Xe=B.showLogo||!0,Qe=B.chartType||null,Be=B.horizontalSectionTally,_e=!B.placement;try{(0,m.unmountComponentAtNode)(_)}catch{console.warn("Scite badge: unmounting component on another react DOM")}le?(0,m.render)(f.createElement(f.Fragment,null,f.createElement("div",{style:{display:"inline-block",marginBottom:"4px"}},f.createElement(Ir,{doi:J,tally:C,showZero:re,placement:Fe,flip:_e,slide:Ve,notices:k},f.createElement(p.Tally,{tally:C,horizontal:de,showZero:re,forceCollapse:xe,showLabels:Pe,notices:k,small:Ke,source:oa,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,showLogo:Xe}))),f.createElement("div",null,f.createElement(Ir,{doi:J,tally:N,showZero:re,placement:Fe,flip:_e,slide:Ve,tallyType:"sections"},f.createElement(p.SectionTally,{tally:N,horizontal:Be,showZero:re,forceCollapse:xe,showLabels:Pe,small:Ke,source:oa,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,chartType:Qe,showLogo:!1})))),_):K?(0,m.render)(f.createElement(Ir,{doi:J,tally:C,showZero:re,placement:Fe,flip:_e,slide:Ve,notices:k},f.createElement(p.Tally,{tally:C,horizontal:de,showZero:re,forceCollapse:xe,showLabels:Pe,notices:k,small:Ke,source:oa,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,showLogo:Xe})),_):Z&&(0,m.render)(f.createElement(Ir,{doi:J,tally:N,showZero:re,placement:Fe,flip:_e,slide:Ve,tallyType:"sections"},f.createElement(p.SectionTally,{tally:N,horizontal:Be,showZero:re,forceCollapse:xe,showLabels:Pe,small:Ke,source:oa,campaign:Ue,autologin:nt,rewardfulID:et,isBadge:!0,chartType:Qe,showLogo:Xe})),_)}function sa(_){var C=xo(_),k=C.targetEl,N=C.insertBefore,B=document.querySelector(k),K=document.createElement("div");K.className="scite-badge";var Z=Object.keys(_.dataset),le=!0,J=!1,re=void 0;try{for(var xe,de=Z[Symbol.iterator]();!(le=(xe=de.next()).done);le=!0){var Fe=xe.value;K.dataset[Fe]=_.dataset[Fe]}}catch(Pe){J=!0,re=Pe}finally{try{le||de.return==null||de.return()}finally{if(J)throw re}}return B||console.warn("Scite badge: could not find element to insert badge wrapper into"),N?B.parentNode.insertBefore(K,B):B.appendChild(K),K}function $a(){return Fa.apply(this,arguments)}function Fa(){return Fa=Fs(d().mark(function _(){var C,k,N,B,K,Z,le,J,re,xe,de,Fe,Pe,Ve,Ke,Ue,nt,et,Xe,Qe,Be,_e,qe,Me,st,gt,it,jt,rt,Vt,$t,kt,yt,ht,Ct,Ot,Et,Nt,an,xn,hn,Ar=arguments;return d().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(C=(Ar.length>0&&Ar[0]!==void 0?Ar[0]:{}).forceReload,document.body){Oe.next=3;break}return Oe.abrupt("return",[]);case 3:k=document.querySelectorAll(".scite-badge-config"),N=!0,B=!1,K=void 0,Oe.prev=5,Z=k[Symbol.iterator]();case 7:if(N=(le=Z.next()).done){Oe.next=16;break}if((J=le.value).dataset.injected!=="true"){Oe.next=11;break}return Oe.abrupt("continue",13);case 11:sa(J),J.dataset.injected="true";case 13:N=!0,Oe.next=7;break;case 16:Oe.next=22;break;case 18:Oe.prev=18,Oe.t0=Oe.catch(5),B=!0,K=Oe.t0;case 22:Oe.prev=22,Oe.prev=23,N||Z.return==null||Z.return();case 25:if(Oe.prev=25,!B){Oe.next=28;break}throw K;case 28:return Oe.finish(25);case 29:return Oe.finish(22);case 30:re=document.querySelectorAll(".scite-badge"),xe=[],de=!0,Fe=!1,Pe=void 0,Oe.prev=33,Ve=re[Symbol.iterator]();case 35:if(de=(Ke=Ve.next()).done){Oe.next=43;break}if((Ue=Ke.value).dataset.fetched!=="true"||C){Oe.next=39;break}return Oe.abrupt("continue",40);case 39:xe.push(Ue);case 40:de=!0,Oe.next=35;break;case 43:Oe.next=49;break;case 45:Oe.prev=45,Oe.t1=Oe.catch(33),Fe=!0,Pe=Oe.t1;case 49:Oe.prev=49,Oe.prev=50,de||Ve.return==null||Ve.return();case 52:if(Oe.prev=52,!Fe){Oe.next=55;break}throw Pe;case 55:return Oe.finish(52);case 56:return Oe.finish(49);case 57:if(nt=Co(xe),et=nt.tallyDOIs,Xe=nt.sectionTallyDOIs,et.length!==0||Xe.length!==0){Oe.next=60;break}return Oe.abrupt("return",re);case 60:Qe=Math.max(Math.ceil(et.length/Qn),Math.ceil(Xe.length/Qn)),Be={},_e={},qe={},Me=0;case 65:if(!(Me<Qe)){Oe.next=100;break}return st=et.slice(Me*Qn,(Me+1)*Qn),gt=Xe.slice(Me*Qn,(Me+1)*Qn),Oe.t2=Ba,Oe.next=71,Promise.all([L(st),q(st),Q(gt)]);case 71:for(Oe.t3=Oe.sent,it=(0,Oe.t2)(Oe.t3,3),jt=it[0].tallies,rt=it[1].notices,Vt=it[2],$t=Vt.tallies,Be=Us({},Be,jt),_e=Us({},_e,rt),qe=Us({},qe,$t),kt=!0,yt=!1,ht=void 0,Oe.prev=81,Ct=xe[Symbol.iterator]();!(kt=(Ot=Ct.next()).done);kt=!0)Et=Ot.value,(Nt=aa(Et))in Be||Nt in qe?(an=Nt in Be?Be[Nt]:{total:0,citingPublications:0},xn=Nt in Be?rt[Nt]:{},hn=Nt in qe?qe[Nt]:{},za(Et,an,xn,hn)):za(Et,{total:0,citingPublications:0},{},{}),Et.dataset.fetched="true";Oe.next=89;break;case 85:Oe.prev=85,Oe.t4=Oe.catch(81),yt=!0,ht=Oe.t4;case 89:Oe.prev=89,Oe.prev=90,kt||Ct.return==null||Ct.return();case 92:if(Oe.prev=92,!yt){Oe.next=95;break}throw ht;case 95:return Oe.finish(92);case 96:return Oe.finish(89);case 97:Me++,Oe.next=65;break;case 100:return Oe.abrupt("return",re);case 101:case"end":return Oe.stop()}},_,null,[[5,18,22,30],[23,,25,29],[33,45,49,57],[50,,52,56],[81,85,89,97],[90,,92,96]])})),Fa.apply(this,arguments)}function gl(){return Hs.apply(this,arguments)}function Hs(){return(Hs=Fs(d().mark(function _(){return d().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,$a();case 2:C.sent.length===0&&window.addEventListener("load",$a);case 4:case"end":return C.stop()}},_)}))).apply(this,arguments)}})(),i})())})(Jv);var Pk=Jv.exports;const Nk=window.React.memo,Lk=window.React.useEffect,Dk=window.React.useRef,ew=Nk(function(e){const{doi:n,layout:o="horizontal",showLabels:s=!1,showZero:i=!0,small:c=!1,tooltipPlacement:d="auto",tooltipSlide:f=0}=e,m=Dk(null);return Lk(()=>{m?.current?.removeAttribute("data-fetched"),Pk.insertBadges()}),u.jsx("div",{className:"scite-badge","data-doi":n,"data-layout":o,"data-show-labels":s.toString(),"data-show-zero":i.toString(),"data-small":c.toString(),"data-tooltip-placement":d,"data-tooltip-slide":f,ref:m})}),Mk=window.React.useMemo,{Provider:Bk,useSettings:tw}=new cr,zk="10.1126/science.1179052",$k=[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"}],Fk=[{label:"Auto",value:"auto"},{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Bottom",value:"bottom"}];function Uk(){const[{layout:t,showLabels:e,showZero:n,small:o,tooltipPlacement:s,tooltipSlide:i},c]=tw(),d=Mk(()=>{function f(p){c(g=>({...g,[p]:!g[p]}))}function m(p,g){c(b=>({...b,[p]:g}))}return{selectLayout:p=>m("layout",p),toggleLabels:()=>f("showLabels"),toggleZero:()=>f("showZero"),toggleSmall:()=>f("small"),selectTooltipPlacement:p=>m("tooltipPlacement",p),updateTooltipSlide:p=>m("tooltipSlide",p)}},[c]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{padding:"10px 0px",textAlign:"center"},children:u.jsx(ew,{doi:zk,layout:t,showLabels:e,showZero:n,small:o,tooltipPlacement:s,tooltipSlide:i})}),u.jsx(wr,{menuTitle:"Select the layout direction for the Scite badge",onSelect:d.selectLayout,options:$k,title:"Layout",value:t}),u.jsx(lo,{isChecked:e,label:"Toggle if category labels should be shown",onChange:d.toggleLabels,title:"Show labels"}),u.jsx(lo,{isChecked:n,label:"Toggle if categories with no items should be shown",onChange:d.toggleZero,title:"Show empty categories"}),u.jsx(lo,{isChecked:o,label:"Toggle if Scite badges should use a smaller styling",onChange:d.toggleSmall,title:"Use small styling"}),u.jsx(wr,{menuTitle:"Select the placement of the badge tooltip",onSelect:d.selectTooltipPlacement,options:Fk,title:"Tooltip Placement",value:s}),u.jsx(US,{label:"Indicate a numeric offset for the placement of the badge tooltip",setValue:d.updateTooltipSlide,title:"Tooltip Offset",value:i})]})}const qk=window.React.useCallback,Hk=window.Blueprint.Core.parseKeyCombo,{Provider:Vk,useSettings:Ls}=new cr,Xk=t=>{if(t=="")return!0;try{return Hk(t),!0}catch{return!1}};function Qk(){const[t,e]=Ls(),n=qk((o,s)=>{e(i=>({...i,[o]:s}))},[e]);return u.jsx(u.Fragment,{children:Object.keys(t).map(o=>u.jsx(po,{ifEmpty:!0,label:"Enter a keyboard shortcut to use to"+Uc(o),onChange:s=>n(o,s),title:Uc(o),validate:Xk,value:t[o]},o))})}const Kk=window.React.useCallback,{Provider:Wk,useSettings:Aa}=new cr({afterUpdate:(t,e)=>{window?.zoteroRoam?.updateSetting?.("typemap",e)}});function Gk(){const[t,e]=Aa(),n=Kk((o,s)=>{e(i=>({...i,[o]:s}))},[e]);return u.jsx(u.Fragment,{children:Object.keys(t).map(o=>u.jsx(po,{ifEmpty:!0,label:"Enter a mapping for"+Uc(o),onChange:s=>n(o,s),title:o,value:t[o]},o))})}const Yk=window.React.useMemo,{Provider:Zk,useSettings:nw}=new cr;function Jk(){const[{tags:t},e]=nw(),n=Yk(()=>{function o(i){e(c=>({...c,tags:Array.from(new Set([...c.tags,i]))}))}function s(i){e(c=>({...c,tags:c.tags.filter(d=>d!=i)}))}return{addTag:o,removeTag:s}},[e]);return u.jsx(u.Fragment,{children:u.jsx(qi,{title:"Tags",description:"Select tags for which to show the import button",children:u.jsx(wp,{onRemove:n.removeTag,onSelect:n.addTag,selectedTags:t})})})}const eO=window.Blueprint.Core.AnchorButton,yr=t=>{const{children:e=null,href:n,minimal:o=!0,...s}=t;return u.jsx(eO,{href:n,intent:"primary",minimal:o,rel:"noreferrer",target:"_blank",...s,children:e})},rw=[{component:Ik,id:"requests",widget:Ak},{component:YS,id:"annotations",widget:rT},{component:aT,id:"autocomplete",widget:uT},{component:fT,id:"copy",widget:yT},{component:vT,id:"metadata",widget:CT},{component:ST,id:"notes",widget:AT},{component:ek,id:"pageMenu",widget:rk},{component:Bk,id:"sciteBadge",widget:Uk},{component:Vk,id:"shortcuts",widget:Qk},{component:Wk,id:"typemap",widget:Gk},{component:Zk,id:"webimport",widget:Jk},{component:NT,id:"other",widget:LT}],tO=window.Blueprint.Core.Classes,nO=window.Blueprint.Core.Tab,Og=window.Blueprint.Core.Tabs,rO={className:"zr-settings-tab",panelClassName:"zr-settings-panel"};function oO({isOpen:t,onClose:e}){return u.jsx(Qo,{className:"settings",isOpen:t,label:"zoteroRoam settings",onClose:e,children:u.jsx("div",{className:tO.DIALOG_BODY,children:u.jsx("div",{className:"zr-settings--main",children:u.jsxs(Og,{animate:!1,className:[$.TABS,"zr-settings-tabs-wrapper"].join(" "),id:"zr-settings--tabs",vertical:!0,children:[rw.filter(n=>n.widget).map(n=>{const{id:o,widget:s}=n;return u.jsx(nO,{id:o,panel:u.jsx(Ln,{children:u.jsx(s,{})}),title:Uc(o),...rO},o)}),u.jsx(Og.Expander,{}),u.jsx(yr,{active:!0,fill:!0,href:"https://alix-lahuec.gitbook.io/zotero-roam/customization/user-settings",intent:"primary",rightIcon:"document-open",text:"Docs"})]})})})})}const aO=window.React.useCallback,sO=({extensionAPI:t={},children:e,init:n})=>{const o=aO((s,i)=>{if(t.settings)t.settings.set(s,i);else return null},[t]);return u.jsx(u.Fragment,{children:rw.reduceRight((s,i)=>{const{component:c,id:d}=i;return u.jsx(c,{init:n[d],updater:f=>o(d,f),children:s})},e)})},iO=window.React.memo,Rg=window.React.useCallback,lO=window.React.useMemo,jg=window.Blueprint.Core.Button,cO=window.Blueprint.Core.ControlGroup,Go=({className:t=null,children:e,...n})=>u.jsx("li",{className:[t,$.DATALIST_ITEM].filter(St).join(" "),...n,children:e}),Yo=({children:t})=>u.jsx("ul",{className:$.DATALIST_WRAPPER,children:t}),il=iO(function({arrows:e="last",currentPage:n,itemsPerPage:o=30,nbItems:s,setCurrentPage:i}){const c=lO(()=>s==0?0:Math.ceil(s/o),[o,s]),d=Rg(()=>{n<c&&i(n+1)},[n,c,i]),f=Rg(()=>{n>1&&i(n-1)},[n,i]),m=u.jsxs("span",{className:$.TEXT_SMALL,"zr-role":"items-count",children:[u.jsxs("strong",{children:[(n-1)*o+1,"-",Math.min(n*o,s)]})," / ",Wt(s,"item")]}),p=u.jsxs(cO,{children:[u.jsx(jg,{"aria-disabled":n==1,disabled:n==1,icon:"chevron-left",minimal:!0,onClick:f,title:"Go to previous page of results"}),u.jsx(jg,{"aria-disabled":n>=c,disabled:n>=c,icon:"chevron-right",minimal:!0,onClick:d,title:"Go to next page of results"})]});return u.jsx("div",{className:$.DATALIST_PAGINATION,children:s>0?u.jsxs(u.Fragment,{children:[e=="first"&&p,m,e=="last"&&p]}):null})}),mo=({children:t})=>u.jsx("div",{className:$.DATALIST_TOOLBAR,children:t}),uO=window.React.createContext,dO=window.React.useCallback,fO=window.React.useContext,pO=window.React.useMemo,hO=window.React.useState,ow=uO(null),mO=({children:t})=>{const[e,n]=hO(()=>xg()),o=dO(()=>{n(()=>xg())},[]),s=pO(()=>[e,o],[e,o]);return u.jsx(ow.Provider,{value:s,children:t})},Zo=()=>{const t=fO(ow);if(!t)throw new Error("No context provided");return t},gO=window.Blueprint.Core.Classes;var Cp=gO.getClassNamespace(),cu="".concat(Cp,"-context-menu2"),yO="".concat(cu,"-virtual-target"),bO="".concat(cu,"-popover2"),vO="".concat(cu,"-backdrop"),Tn="".concat(Cp,"-popover2"),Nd="".concat(Tn,"-arrow"),wO="".concat(Tn,"-backdrop"),Ig="".concat(Tn,"-capturing-dismiss"),xO="".concat(Tn,"-content"),CO="".concat(Tn,"-placement"),Sf="".concat(Tn,"-dismiss"),EO="".concat(Sf,"-override"),SO="".concat(Tn,"-open"),TO="".concat(Tn,"-popper-escaped"),_O="".concat(Tn,"-reference-hidden"),kO="".concat(Tn,"-target"),OO="".concat(Tn,"-transition-container"),RO="".concat(Cp,"-tooltip2"),Jo="[Blueprint]",jO="".concat(Jo," <Popover2> requires renderTarget prop or a child element."),IO="".concat(Jo,' <Popover2 hasBackdrop={true}> requires interactionKind="click".'),AO="".concat(Jo," <Popover2> supports only one child which is rendered as its target; additional children are ignored."),PO=Jo+" <Popover2> with children ignores renderTarget prop; use either prop or children.",NO=Jo+" Disabling <Popover2> with empty/whitespace content...",LO=Jo+" <Popover2 usePortal={false}> ignores hasBackdrop",DO=Jo+" <Popover2> supports either placement or position prop, not both.",MO=Jo+" <Popover2> onInteraction is ignored when uncontrolled.";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Tf=function(t,e){return Tf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},Tf(t,e)};function Ep(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Bt=function(){return Bt=Object.assign||function(e){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bt.apply(this,arguments)};function aw(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}var sw={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o=[],s=0;s<arguments.length;s++){var i=arguments[s];if(i){var c=typeof i;if(c==="string"||c==="number")o.push(i);else if(Array.isArray(i)){if(i.length){var d=n.apply(null,i);d&&o.push(d)}}else if(c==="object")if(i.toString===Object.prototype.toString)for(var f in i)e.call(i,f)&&i[f]&&o.push(f);else o.push(i.toString())}}return o.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(sw);var BO=sw.exports;const hs=Zc(BO),$o=window.React;var iw=$o.createContext(),lw=$o.createContext();function zO(t){var e=t.children,n=$o.useState(null),o=n[0],s=n[1],i=$o.useRef(!1);$o.useEffect(function(){return function(){i.current=!0}},[]);var c=$o.useCallback(function(d){i.current||s(d)},[]);return $o.createElement(iw.Provider,{value:o},$o.createElement(lw.Provider,{value:c},e))}const Ag=window.React;var cw=function(e){return Array.isArray(e)?e[0]:e},uw=function(e){if(typeof e=="function"){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return e.apply(void 0,o)}},_f=function(e,n){if(typeof e=="function")return uw(e,n);e!=null&&(e.current=n)},Pg=function(e){return e.reduce(function(n,o){var s=o[0],i=o[1];return n[s]=i,n},{})},Ng=typeof window<"u"&&window.document&&window.document.createElement?Ag.useLayoutEffect:Ag.useEffect,Pn="top",ir="bottom",lr="right",Nn="left",Sp="auto",ll=[Pn,ir,lr,Nn],Ts="start",Vi="end",$O="clippingParents",dw="viewport",Si="popper",FO="reference",Lg=ll.reduce(function(t,e){return t.concat([e+"-"+Ts,e+"-"+Vi])},[]),fw=[].concat(ll,[Sp]).reduce(function(t,e){return t.concat([e,e+"-"+Ts,e+"-"+Vi])},[]),UO="beforeRead",qO="read",HO="afterRead",VO="beforeMain",XO="main",QO="afterMain",KO="beforeWrite",WO="write",GO="afterWrite",YO=[UO,qO,HO,VO,XO,QO,KO,WO,GO];function qr(t){return t?(t.nodeName||"").toLowerCase():null}function qn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function _a(t){var e=qn(t).Element;return t instanceof e||t instanceof Element}function sr(t){var e=qn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Tp(t){if(typeof ShadowRoot>"u")return!1;var e=qn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function ZO(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var o=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!sr(i)||!qr(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(c){var d=s[c];d===!1?i.removeAttribute(c):i.setAttribute(c,d===!0?"":d)}))})}function JO(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(o){var s=e.elements[o],i=e.attributes[o]||{},c=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:n[o]),d=c.reduce(function(f,m){return f[m]="",f},{});!sr(s)||!qr(s)||(Object.assign(s.style,d),Object.keys(i).forEach(function(f){s.removeAttribute(f)}))})}}const eR={name:"applyStyles",enabled:!0,phase:"write",fn:ZO,effect:JO,requires:["computeStyles"]};function Fr(t){return t.split("-")[0]}var Ea=Math.max,qc=Math.min,_s=Math.round;function kf(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function pw(){return!/^((?!chrome|android).)*safari/i.test(kf())}function ks(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var o=t.getBoundingClientRect(),s=1,i=1;e&&sr(t)&&(s=t.offsetWidth>0&&_s(o.width)/t.offsetWidth||1,i=t.offsetHeight>0&&_s(o.height)/t.offsetHeight||1);var c=_a(t)?qn(t):window,d=c.visualViewport,f=!pw()&&n,m=(o.left+(f&&d?d.offsetLeft:0))/s,p=(o.top+(f&&d?d.offsetTop:0))/i,g=o.width/s,b=o.height/i;return{width:g,height:b,top:p,right:m+g,bottom:p+b,left:m,x:m,y:p}}function _p(t){var e=ks(t),n=t.offsetWidth,o=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:o}}function hw(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Tp(n)){var o=e;do{if(o&&t.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function go(t){return qn(t).getComputedStyle(t)}function tR(t){return["table","td","th"].indexOf(qr(t))>=0}function ea(t){return((_a(t)?t.ownerDocument:t.document)||window.document).documentElement}function uu(t){return qr(t)==="html"?t:t.assignedSlot||t.parentNode||(Tp(t)?t.host:null)||ea(t)}function Dg(t){return!sr(t)||go(t).position==="fixed"?null:t.offsetParent}function nR(t){var e=/firefox/i.test(kf()),n=/Trident/i.test(kf());if(n&&sr(t)){var o=go(t);if(o.position==="fixed")return null}var s=uu(t);for(Tp(s)&&(s=s.host);sr(s)&&["html","body"].indexOf(qr(s))<0;){var i=go(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function cl(t){for(var e=qn(t),n=Dg(t);n&&tR(n)&&go(n).position==="static";)n=Dg(n);return n&&(qr(n)==="html"||qr(n)==="body"&&go(n).position==="static")?e:n||nR(t)||e}function kp(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Pi(t,e,n){return Ea(t,qc(e,n))}function rR(t,e,n){var o=Pi(t,e,n);return o>n?n:o}function mw(){return{top:0,right:0,bottom:0,left:0}}function gw(t){return Object.assign({},mw(),t)}function yw(t,e){return e.reduce(function(n,o){return n[o]=t,n},{})}var oR=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,gw(typeof e!="number"?e:yw(e,ll))};function aR(t){var e,n=t.state,o=t.name,s=t.options,i=n.elements.arrow,c=n.modifiersData.popperOffsets,d=Fr(n.placement),f=kp(d),m=[Nn,lr].indexOf(d)>=0,p=m?"height":"width";if(!(!i||!c)){var g=oR(s.padding,n),b=_p(i),v=f==="y"?Pn:Nn,w=f==="y"?ir:lr,S=n.rects.reference[p]+n.rects.reference[f]-c[f]-n.rects.popper[p],T=c[f]-n.rects.reference[f],R=cl(i),L=R?f==="y"?R.clientHeight||0:R.clientWidth||0:0,q=S/2-T/2,Q=g[v],ee=L-b[p]-g[w],D=L/2-b[p]/2+q,A=Pi(Q,D,ee),P=f;n.modifiersData[o]=(e={},e[P]=A,e.centerOffset=A-D,e)}}function sR(t){var e=t.state,n=t.options,o=n.element,s=o===void 0?"[data-popper-arrow]":o;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||hw(e.elements.popper,s)&&(e.elements.arrow=s))}const iR={name:"arrow",enabled:!0,phase:"main",fn:aR,effect:sR,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Os(t){return t.split("-")[1]}var lR={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cR(t,e){var n=t.x,o=t.y,s=e.devicePixelRatio||1;return{x:_s(n*s)/s||0,y:_s(o*s)/s||0}}function Mg(t){var e,n=t.popper,o=t.popperRect,s=t.placement,i=t.variation,c=t.offsets,d=t.position,f=t.gpuAcceleration,m=t.adaptive,p=t.roundOffsets,g=t.isFixed,b=c.x,v=b===void 0?0:b,w=c.y,S=w===void 0?0:w,T=typeof p=="function"?p({x:v,y:S}):{x:v,y:S};v=T.x,S=T.y;var R=c.hasOwnProperty("x"),L=c.hasOwnProperty("y"),q=Nn,Q=Pn,ee=window;if(m){var D=cl(n),A="clientHeight",P="clientWidth";if(D===qn(n)&&(D=ea(n),go(D).position!=="static"&&d==="absolute"&&(A="scrollHeight",P="scrollWidth")),D=D,s===Pn||(s===Nn||s===lr)&&i===Vi){Q=ir;var H=g&&D===ee&&ee.visualViewport?ee.visualViewport.height:D[A];S-=H-o.height,S*=f?1:-1}if(s===Nn||(s===Pn||s===ir)&&i===Vi){q=lr;var fe=g&&D===ee&&ee.visualViewport?ee.visualViewport.width:D[P];v-=fe-o.width,v*=f?1:-1}}var me=Object.assign({position:d},m&&lR),ge=p===!0?cR({x:v,y:S},qn(n)):{x:v,y:S};if(v=ge.x,S=ge.y,f){var ye;return Object.assign({},me,(ye={},ye[Q]=L?"0":"",ye[q]=R?"0":"",ye.transform=(ee.devicePixelRatio||1)<=1?"translate("+v+"px, "+S+"px)":"translate3d("+v+"px, "+S+"px, 0)",ye))}return Object.assign({},me,(e={},e[Q]=L?S+"px":"",e[q]=R?v+"px":"",e.transform="",e))}function uR(t){var e=t.state,n=t.options,o=n.gpuAcceleration,s=o===void 0?!0:o,i=n.adaptive,c=i===void 0?!0:i,d=n.roundOffsets,f=d===void 0?!0:d,m={placement:Fr(e.placement),variation:Os(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Mg(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Mg(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const dR={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uR,data:{}};var lc={passive:!0};function fR(t){var e=t.state,n=t.instance,o=t.options,s=o.scroll,i=s===void 0?!0:s,c=o.resize,d=c===void 0?!0:c,f=qn(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&m.forEach(function(p){p.addEventListener("scroll",n.update,lc)}),d&&f.addEventListener("resize",n.update,lc),function(){i&&m.forEach(function(p){p.removeEventListener("scroll",n.update,lc)}),d&&f.removeEventListener("resize",n.update,lc)}}const pR={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:fR,data:{}};var hR={left:"right",right:"left",bottom:"top",top:"bottom"};function Oc(t){return t.replace(/left|right|bottom|top/g,function(e){return hR[e]})}var mR={start:"end",end:"start"};function Bg(t){return t.replace(/start|end/g,function(e){return mR[e]})}function Op(t){var e=qn(t),n=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:n,scrollTop:o}}function Rp(t){return ks(ea(t)).left+Op(t).scrollLeft}function gR(t,e){var n=qn(t),o=ea(t),s=n.visualViewport,i=o.clientWidth,c=o.clientHeight,d=0,f=0;if(s){i=s.width,c=s.height;var m=pw();(m||!m&&e==="fixed")&&(d=s.offsetLeft,f=s.offsetTop)}return{width:i,height:c,x:d+Rp(t),y:f}}function yR(t){var e,n=ea(t),o=Op(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=Ea(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),c=Ea(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),d=-o.scrollLeft+Rp(t),f=-o.scrollTop;return go(s||n).direction==="rtl"&&(d+=Ea(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:c,x:d,y:f}}function jp(t){var e=go(t),n=e.overflow,o=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+o)}function bw(t){return["html","body","#document"].indexOf(qr(t))>=0?t.ownerDocument.body:sr(t)&&jp(t)?t:bw(uu(t))}function Ni(t,e){var n;e===void 0&&(e=[]);var o=bw(t),s=o===((n=t.ownerDocument)==null?void 0:n.body),i=qn(o),c=s?[i].concat(i.visualViewport||[],jp(o)?o:[]):o,d=e.concat(c);return s?d:d.concat(Ni(uu(c)))}function Of(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function bR(t,e){var n=ks(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function zg(t,e,n){return e===dw?Of(gR(t,n)):_a(e)?bR(e,n):Of(yR(ea(t)))}function vR(t){var e=Ni(uu(t)),n=["absolute","fixed"].indexOf(go(t).position)>=0,o=n&&sr(t)?cl(t):t;return _a(o)?e.filter(function(s){return _a(s)&&hw(s,o)&&qr(s)!=="body"}):[]}function wR(t,e,n,o){var s=e==="clippingParents"?vR(t):[].concat(e),i=[].concat(s,[n]),c=i[0],d=i.reduce(function(f,m){var p=zg(t,m,o);return f.top=Ea(p.top,f.top),f.right=qc(p.right,f.right),f.bottom=qc(p.bottom,f.bottom),f.left=Ea(p.left,f.left),f},zg(t,c,o));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function vw(t){var e=t.reference,n=t.element,o=t.placement,s=o?Fr(o):null,i=o?Os(o):null,c=e.x+e.width/2-n.width/2,d=e.y+e.height/2-n.height/2,f;switch(s){case Pn:f={x:c,y:e.y-n.height};break;case ir:f={x:c,y:e.y+e.height};break;case lr:f={x:e.x+e.width,y:d};break;case Nn:f={x:e.x-n.width,y:d};break;default:f={x:e.x,y:e.y}}var m=s?kp(s):null;if(m!=null){var p=m==="y"?"height":"width";switch(i){case Ts:f[m]=f[m]-(e[p]/2-n[p]/2);break;case Vi:f[m]=f[m]+(e[p]/2-n[p]/2);break}}return f}function Xi(t,e){e===void 0&&(e={});var n=e,o=n.placement,s=o===void 0?t.placement:o,i=n.strategy,c=i===void 0?t.strategy:i,d=n.boundary,f=d===void 0?$O:d,m=n.rootBoundary,p=m===void 0?dw:m,g=n.elementContext,b=g===void 0?Si:g,v=n.altBoundary,w=v===void 0?!1:v,S=n.padding,T=S===void 0?0:S,R=gw(typeof T!="number"?T:yw(T,ll)),L=b===Si?FO:Si,q=t.rects.popper,Q=t.elements[w?L:b],ee=wR(_a(Q)?Q:Q.contextElement||ea(t.elements.popper),f,p,c),D=ks(t.elements.reference),A=vw({reference:D,element:q,strategy:"absolute",placement:s}),P=Of(Object.assign({},q,A)),H=b===Si?P:D,fe={top:ee.top-H.top+R.top,bottom:H.bottom-ee.bottom+R.bottom,left:ee.left-H.left+R.left,right:H.right-ee.right+R.right},me=t.modifiersData.offset;if(b===Si&&me){var ge=me[s];Object.keys(fe).forEach(function(ye){var Y=[lr,ir].indexOf(ye)>=0?1:-1,ve=[Pn,ir].indexOf(ye)>=0?"y":"x";fe[ye]+=ge[ve]*Y})}return fe}function xR(t,e){e===void 0&&(e={});var n=e,o=n.placement,s=n.boundary,i=n.rootBoundary,c=n.padding,d=n.flipVariations,f=n.allowedAutoPlacements,m=f===void 0?fw:f,p=Os(o),g=p?d?Lg:Lg.filter(function(w){return Os(w)===p}):ll,b=g.filter(function(w){return m.indexOf(w)>=0});b.length===0&&(b=g);var v=b.reduce(function(w,S){return w[S]=Xi(t,{placement:S,boundary:s,rootBoundary:i,padding:c})[Fr(S)],w},{});return Object.keys(v).sort(function(w,S){return v[w]-v[S]})}function CR(t){if(Fr(t)===Sp)return[];var e=Oc(t);return[Bg(t),e,Bg(e)]}function ER(t){var e=t.state,n=t.options,o=t.name;if(!e.modifiersData[o]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,c=n.altAxis,d=c===void 0?!0:c,f=n.fallbackPlacements,m=n.padding,p=n.boundary,g=n.rootBoundary,b=n.altBoundary,v=n.flipVariations,w=v===void 0?!0:v,S=n.allowedAutoPlacements,T=e.options.placement,R=Fr(T),L=R===T,q=f||(L||!w?[Oc(T)]:CR(T)),Q=[T].concat(q).reduce(function(M,G){return M.concat(Fr(G)===Sp?xR(e,{placement:G,boundary:p,rootBoundary:g,padding:m,flipVariations:w,allowedAutoPlacements:S}):G)},[]),ee=e.rects.reference,D=e.rects.popper,A=new Map,P=!0,H=Q[0],fe=0;fe<Q.length;fe++){var me=Q[fe],ge=Fr(me),ye=Os(me)===Ts,Y=[Pn,ir].indexOf(ge)>=0,ve=Y?"width":"height",ie=Xi(e,{placement:me,boundary:p,rootBoundary:g,altBoundary:b,padding:m}),we=Y?ye?lr:Nn:ye?ir:Pn;ee[ve]>D[ve]&&(we=Oc(we));var ze=Oc(we),We=[];if(i&&We.push(ie[ge]<=0),d&&We.push(ie[we]<=0,ie[ze]<=0),We.every(function(M){return M})){H=me,P=!1;break}A.set(me,We)}if(P)for(var Le=w?3:1,Je=function(G){var ue=Q.find(function(ae){var W=A.get(ae);if(W)return W.slice(0,G).every(function(te){return te})});if(ue)return H=ue,"break"},ft=Le;ft>0;ft--){var I=Je(ft);if(I==="break")break}e.placement!==H&&(e.modifiersData[o]._skip=!0,e.placement=H,e.reset=!0)}}const SR={name:"flip",enabled:!0,phase:"main",fn:ER,requiresIfExists:["offset"],data:{_skip:!1}};function $g(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Fg(t){return[Pn,lr,ir,Nn].some(function(e){return t[e]>=0})}function TR(t){var e=t.state,n=t.name,o=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,c=Xi(e,{elementContext:"reference"}),d=Xi(e,{altBoundary:!0}),f=$g(c,o),m=$g(d,s,i),p=Fg(f),g=Fg(m);e.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:m,isReferenceHidden:p,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":g})}const _R={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:TR};function kR(t,e,n){var o=Fr(t),s=[Nn,Pn].indexOf(o)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,c=i[0],d=i[1];return c=c||0,d=(d||0)*s,[Nn,lr].indexOf(o)>=0?{x:d,y:c}:{x:c,y:d}}function OR(t){var e=t.state,n=t.options,o=t.name,s=n.offset,i=s===void 0?[0,0]:s,c=fw.reduce(function(p,g){return p[g]=kR(g,e.rects,i),p},{}),d=c[e.placement],f=d.x,m=d.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=m),e.modifiersData[o]=c}const RR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:OR};function jR(t){var e=t.state,n=t.name;e.modifiersData[n]=vw({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const IR={name:"popperOffsets",enabled:!0,phase:"read",fn:jR,data:{}};function AR(t){return t==="x"?"y":"x"}function PR(t){var e=t.state,n=t.options,o=t.name,s=n.mainAxis,i=s===void 0?!0:s,c=n.altAxis,d=c===void 0?!1:c,f=n.boundary,m=n.rootBoundary,p=n.altBoundary,g=n.padding,b=n.tether,v=b===void 0?!0:b,w=n.tetherOffset,S=w===void 0?0:w,T=Xi(e,{boundary:f,rootBoundary:m,padding:g,altBoundary:p}),R=Fr(e.placement),L=Os(e.placement),q=!L,Q=kp(R),ee=AR(Q),D=e.modifiersData.popperOffsets,A=e.rects.reference,P=e.rects.popper,H=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,fe=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),me=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ge={x:0,y:0};if(D){if(i){var ye,Y=Q==="y"?Pn:Nn,ve=Q==="y"?ir:lr,ie=Q==="y"?"height":"width",we=D[Q],ze=we+T[Y],We=we-T[ve],Le=v?-P[ie]/2:0,Je=L===Ts?A[ie]:P[ie],ft=L===Ts?-P[ie]:-A[ie],I=e.elements.arrow,M=v&&I?_p(I):{width:0,height:0},G=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:mw(),ue=G[Y],ae=G[ve],W=Pi(0,A[ie],M[ie]),te=q?A[ie]/2-Le-W-ue-fe.mainAxis:Je-W-ue-fe.mainAxis,Ce=q?-A[ie]/2+Le+W+ae+fe.mainAxis:ft+W+ae+fe.mainAxis,Re=e.elements.arrow&&cl(e.elements.arrow),Ee=Re?Q==="y"?Re.clientTop||0:Re.clientLeft||0:0,ot=(ye=me?.[Q])!=null?ye:0,Tt=we+te-ot-Ee,Gt=we+Ce-ot,Rt=Pi(v?qc(ze,Tt):ze,we,v?Ea(We,Gt):We);D[Q]=Rt,ge[Q]=Rt-we}if(d){var xt,lt=Q==="x"?Pn:Nn,Jt=Q==="x"?ir:lr,mt=D[ee],_n=ee==="y"?"height":"width",un=mt+T[lt],vn=mt-T[Jt],kn=[Pn,Nn].indexOf(R)!==-1,Cr=(xt=me?.[ee])!=null?xt:0,dn=kn?un:mt-A[_n]-P[_n]-Cr+fe.altAxis,Er=kn?mt+A[_n]+P[_n]-Cr-fe.altAxis:vn,ur=v&&kn?rR(dn,mt,Er):Pi(v?dn:un,mt,v?Er:vn);D[ee]=ur,ge[ee]=ur-mt}e.modifiersData[o]=ge}}const NR={name:"preventOverflow",enabled:!0,phase:"main",fn:PR,requiresIfExists:["offset"]};function LR(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function DR(t){return t===qn(t)||!sr(t)?Op(t):LR(t)}function MR(t){var e=t.getBoundingClientRect(),n=_s(e.width)/t.offsetWidth||1,o=_s(e.height)/t.offsetHeight||1;return n!==1||o!==1}function BR(t,e,n){n===void 0&&(n=!1);var o=sr(e),s=sr(e)&&MR(e),i=ea(e),c=ks(t,s,n),d={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(o||!o&&!n)&&((qr(e)!=="body"||jp(i))&&(d=DR(e)),sr(e)?(f=ks(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):i&&(f.x=Rp(i))),{x:c.left+d.scrollLeft-f.x,y:c.top+d.scrollTop-f.y,width:c.width,height:c.height}}function zR(t){var e=new Map,n=new Set,o=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var c=[].concat(i.requires||[],i.requiresIfExists||[]);c.forEach(function(d){if(!n.has(d)){var f=e.get(d);f&&s(f)}}),o.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),o}function $R(t){var e=zR(t);return YO.reduce(function(n,o){return n.concat(e.filter(function(s){return s.phase===o}))},[])}function FR(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function UR(t){var e=t.reduce(function(n,o){var s=n[o.name];return n[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,n},{});return Object.keys(e).map(function(n){return e[n]})}var Ug={placement:"bottom",modifiers:[],strategy:"absolute"};function qg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function qR(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,o=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?Ug:s;return function(d,f,m){m===void 0&&(m=i);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ug,i),modifiersData:{},elements:{reference:d,popper:f},attributes:{},styles:{}},g=[],b=!1,v={state:p,setOptions:function(R){var L=typeof R=="function"?R(p.options):R;S(),p.options=Object.assign({},i,p.options,L),p.scrollParents={reference:_a(d)?Ni(d):d.contextElement?Ni(d.contextElement):[],popper:Ni(f)};var q=$R(UR([].concat(o,p.options.modifiers)));return p.orderedModifiers=q.filter(function(Q){return Q.enabled}),w(),v.update()},forceUpdate:function(){if(!b){var R=p.elements,L=R.reference,q=R.popper;if(qg(L,q)){p.rects={reference:BR(L,cl(q),p.options.strategy==="fixed"),popper:_p(q)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(fe){return p.modifiersData[fe.name]=Object.assign({},fe.data)});for(var Q=0;Q<p.orderedModifiers.length;Q++){if(p.reset===!0){p.reset=!1,Q=-1;continue}var ee=p.orderedModifiers[Q],D=ee.fn,A=ee.options,P=A===void 0?{}:A,H=ee.name;typeof D=="function"&&(p=D({state:p,options:P,name:H,instance:v})||p)}}}},update:FR(function(){return new Promise(function(T){v.forceUpdate(),T(p)})}),destroy:function(){S(),b=!0}};if(!qg(d,f))return v;v.setOptions(m).then(function(T){!b&&m.onFirstUpdate&&m.onFirstUpdate(T)});function w(){p.orderedModifiers.forEach(function(T){var R=T.name,L=T.options,q=L===void 0?{}:L,Q=T.effect;if(typeof Q=="function"){var ee=Q({state:p,name:R,instance:v,options:q}),D=function(){};g.push(ee||D)}})}function S(){g.forEach(function(T){return T()}),g=[]}return v}}var HR=[pR,IR,dR,eR,RR,SR,NR,iR,_R],VR=qR({defaultModifiers:HR}),XR=typeof Element<"u",QR=typeof Map=="function",KR=typeof Set=="function",WR=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Rc(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,o,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(o=n;o--!==0;)if(!Rc(t[o],e[o]))return!1;return!0}var i;if(QR&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(o=i.next()).done;)if(!e.has(o.value[0]))return!1;for(i=t.entries();!(o=i.next()).done;)if(!Rc(o.value[1],e.get(o.value[0])))return!1;return!0}if(KR&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(o=i.next()).done;)if(!e.has(o.value[0]))return!1;return!0}if(WR&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(o=n;o--!==0;)if(t[o]!==e[o])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[o]))return!1;if(XR&&t instanceof Element)return!1;for(o=n;o--!==0;)if(!((s[o]==="_owner"||s[o]==="__v"||s[o]==="__o")&&t.$$typeof)&&!Rc(t[s[o]],e[s[o]]))return!1;return!0}return t!==t&&e!==e}var GR=function(e,n){try{return Rc(e,n)}catch(o){if((o.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw o}};const YR=Zc(GR),Ti=window.React,ZR=window.ReactDOM;var JR=[],e1=function(e,n,o){o===void 0&&(o={});var s=Ti.useRef(null),i={onFirstUpdate:o.onFirstUpdate,placement:o.placement||"bottom",strategy:o.strategy||"absolute",modifiers:o.modifiers||JR},c=Ti.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),d=c[0],f=c[1],m=Ti.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(v){var w=v.state,S=Object.keys(w.elements);ZR.flushSync(function(){f({styles:Pg(S.map(function(T){return[T,w.styles[T]||{}]})),attributes:Pg(S.map(function(T){return[T,w.attributes[T]]}))})})},requires:["computeStyles"]}},[]),p=Ti.useMemo(function(){var b={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[m,{name:"applyStyles",enabled:!1}])};return YR(s.current,b)?s.current||b:(s.current=b,b)},[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,m]),g=Ti.useRef();return Ng(function(){g.current&&g.current.setOptions(p)},[p]),Ng(function(){if(!(e==null||n==null)){var b=o.createPopper||VR,v=b(e,n,p);return g.current=v,function(){v.destroy(),g.current=null}}},[e,n,o.createPopper]),{state:g.current?g.current.state:null,styles:d.styles,attributes:d.attributes,update:g.current?g.current.update:null,forceUpdate:g.current?g.current.forceUpdate:null}};const ds=window.React;var t1=function(){},n1=function(){return Promise.resolve(null)},r1=[];function o1(t){var e=t.placement,n=e===void 0?"bottom":e,o=t.strategy,s=o===void 0?"absolute":o,i=t.modifiers,c=i===void 0?r1:i,d=t.referenceElement,f=t.onFirstUpdate,m=t.innerRef,p=t.children,g=ds.useContext(iw),b=ds.useState(null),v=b[0],w=b[1],S=ds.useState(null),T=S[0],R=S[1];ds.useEffect(function(){_f(m,v)},[m,v]);var L=ds.useMemo(function(){return{placement:n,strategy:s,onFirstUpdate:f,modifiers:[].concat(c,[{name:"arrow",enabled:T!=null,options:{element:T}}])}},[n,s,f,c,T]),q=e1(d||g,v,L),Q=q.state,ee=q.styles,D=q.forceUpdate,A=q.update,P=ds.useMemo(function(){return{ref:w,style:ee.popper,placement:Q?Q.placement:n,hasPopperEscaped:Q&&Q.modifiersData.hide?Q.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:Q&&Q.modifiersData.hide?Q.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:ee.arrow,ref:R},forceUpdate:D||t1,update:A||n1}},[w,R,n,Q,ee,A,D]);return cw(p)(P)}var a1=function(){},s1=a1;const i1=Zc(s1),cc=window.React;function l1(t){var e=t.children,n=t.innerRef,o=cc.useContext(lw),s=cc.useCallback(function(i){_f(n,i),uw(o,i)},[n,o]);return cc.useEffect(function(){return function(){return _f(n,null)}},[]),cc.useEffect(function(){i1(!!o,"`Reference` should not be used outside of a `Manager` component.")},[o]),cw(e)({ref:s})}function du(t){return t.split("-")[0]}function Hg(t){return["left","right"].indexOf(t)!==-1}function uc(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";default:return"left"}}function Vg(t){var e=t.split("-")[1];switch(e){case"start":return"left";case"end":return"right";default:return"center"}}function c1(t,e){var n=du(t);if(e===void 0)return Hg(n)?"".concat(uc(n)," ").concat(Vg(n)):"".concat(Vg(n)," ").concat(uc(n));var o=15;return Hg(n)?"".concat(uc(n)," ").concat(parseInt(e.top,10)+o,"px"):"".concat(parseInt(e.left,10)+o,"px ").concat(uc(n))}const dc=window.React,u1=window.Blueprint.Core.DISPLAYNAME_PREFIX;var d1="M8.11 6.302c1.015-.936 1.887-2.922 1.887-4.297v26c0-1.378-.868-3.357-1.888-4.297L.925 17.09c-1.237-1.14-1.233-3.034 0-4.17L8.11 6.302z",f1="M8.787 7.036c1.22-1.125 2.21-3.376 2.21-5.03V0v30-2.005c0-1.654-.983-3.9-2.21-5.03l-7.183-6.616c-.81-.746-.802-1.96 0-2.7l7.183-6.614z",p1=4,Hc=30,h1=22;function m1(t){if(t==null)return 0;switch(du(t)){case"top":return-90;case"left":return 180;case"bottom":return 90;default:return 0}}function g1(t){var e=Hc/2-p1;switch(du(t)){case"top":return{bottom:-e};case"left":return{right:-e};case"bottom":return{top:-e};default:return{left:-e}}}var ww=function(t){var e=t.arrowProps,n=e.ref,o=e.style,s=t.placement;return dc.createElement("div",{className:Nd,"data-popper-arrow":!0,ref:n,style:Bt(Bt({},o),g1(s))},dc.createElement("svg",{viewBox:"0 0 ".concat(Hc," ").concat(Hc),style:{transform:"rotate(".concat(m1(s),"deg)")}},dc.createElement("path",{className:Nd+"-border",d:d1}),dc.createElement("path",{className:Nd+"-fill",d:f1})))};ww.displayName="".concat(u1,".Popover2Arrow");const er=window.Blueprint.Core.PopoverPosition;function y1(t){switch(t){case er.TOP_LEFT:return"top-start";case er.TOP:return"top";case er.TOP_RIGHT:return"top-end";case er.RIGHT_TOP:return"right-start";case er.RIGHT:return"right";case er.RIGHT_BOTTOM:return"right-end";case er.BOTTOM_RIGHT:return"bottom-end";case er.BOTTOM:return"bottom";case er.BOTTOM_LEFT:return"bottom-start";case er.LEFT_BOTTOM:return"left-end";case er.LEFT:return"left";case er.LEFT_TOP:return"left-start";case"auto":case"auto-start":case"auto-end":return t;default:return b1(t)}}function b1(t){throw new Error("Unexpected position: "+t)}var Sa=[],v1=function(){return Sa.some(function(t){return t.activeTargets.length>0})},w1=function(){return Sa.some(function(t){return t.skippedTargets.length>0})},Xg="ResizeObserver loop completed with undelivered notifications.",x1=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Xg}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Xg),window.dispatchEvent(t)},Qi;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Qi||(Qi={}));var Ta=function(t){return Object.freeze(t)},C1=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Ta(this)}return t}(),xw=function(){function t(e,n,o,s){return this.x=e,this.y=n,this.width=o,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ta(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,o=e.y,s=e.top,i=e.right,c=e.bottom,d=e.left,f=e.width,m=e.height;return{x:n,y:o,top:s,right:i,bottom:c,left:d,width:f,height:m}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Ip=function(t){return t instanceof SVGElement&&"getBBox"in t},Cw=function(t){if(Ip(t)){var e=t.getBBox(),n=e.width,o=e.height;return!n&&!o}var s=t,i=s.offsetWidth,c=s.offsetHeight;return!(i||c||t.getClientRects().length)},Qg=function(t){var e;if(t instanceof Element)return!0;var n=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},E1=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Li=typeof window<"u"?window:{},fc=new WeakMap,Kg=/auto|scroll/,S1=/^tb|vertical/,T1=/msie|trident/i.test(Li.navigator&&Li.navigator.userAgent),Br=function(t){return parseFloat(t||"0")},ms=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new C1((n?e:t)||0,(n?t:e)||0)},Wg=Ta({devicePixelContentBoxSize:ms(),borderBoxSize:ms(),contentBoxSize:ms(),contentRect:new xw(0,0,0,0)}),Ew=function(t,e){if(e===void 0&&(e=!1),fc.has(t)&&!e)return fc.get(t);if(Cw(t))return fc.set(t,Wg),Wg;var n=getComputedStyle(t),o=Ip(t)&&t.ownerSVGElement&&t.getBBox(),s=!T1&&n.boxSizing==="border-box",i=S1.test(n.writingMode||""),c=!o&&Kg.test(n.overflowY||""),d=!o&&Kg.test(n.overflowX||""),f=o?0:Br(n.paddingTop),m=o?0:Br(n.paddingRight),p=o?0:Br(n.paddingBottom),g=o?0:Br(n.paddingLeft),b=o?0:Br(n.borderTopWidth),v=o?0:Br(n.borderRightWidth),w=o?0:Br(n.borderBottomWidth),S=o?0:Br(n.borderLeftWidth),T=g+m,R=f+p,L=S+v,q=b+w,Q=d?t.offsetHeight-q-t.clientHeight:0,ee=c?t.offsetWidth-L-t.clientWidth:0,D=s?T+L:0,A=s?R+q:0,P=o?o.width:Br(n.width)-D-ee,H=o?o.height:Br(n.height)-A-Q,fe=P+T+ee+L,me=H+R+Q+q,ge=Ta({devicePixelContentBoxSize:ms(Math.round(P*devicePixelRatio),Math.round(H*devicePixelRatio),i),borderBoxSize:ms(fe,me,i),contentBoxSize:ms(P,H,i),contentRect:new xw(g,f,P,H)});return fc.set(t,ge),ge},Sw=function(t,e,n){var o=Ew(t,n),s=o.borderBoxSize,i=o.contentBoxSize,c=o.devicePixelContentBoxSize;switch(e){case Qi.DEVICE_PIXEL_CONTENT_BOX:return c;case Qi.BORDER_BOX:return s;default:return i}},_1=function(){function t(e){var n=Ew(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Ta([n.borderBoxSize]),this.contentBoxSize=Ta([n.contentBoxSize]),this.devicePixelContentBoxSize=Ta([n.devicePixelContentBoxSize])}return t}(),Tw=function(t){if(Cw(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},k1=function(){var t=1/0,e=[];Sa.forEach(function(c){if(c.activeTargets.length!==0){var d=[];c.activeTargets.forEach(function(m){var p=new _1(m.target),g=Tw(m.target);d.push(p),m.lastReportedSize=Sw(m.target,m.observedBox),g<t&&(t=g)}),e.push(function(){c.callback.call(c.observer,d,c.observer)}),c.activeTargets.splice(0,c.activeTargets.length)}});for(var n=0,o=e;n<o.length;n++){var s=o[n];s()}return t},Gg=function(t){Sa.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(Tw(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},O1=function(){var t=0;for(Gg(t);v1();)t=k1(),Gg(t);return w1()&&x1(),t>0},Ld,_w=[],R1=function(){return _w.splice(0).forEach(function(t){return t()})},j1=function(t){if(!Ld){var e=0,n=document.createTextNode(""),o={characterData:!0};new MutationObserver(function(){return R1()}).observe(n,o),Ld=function(){n.textContent="".concat(e?e--:e++)}}_w.push(t),Ld()},I1=function(t){j1(function(){requestAnimationFrame(t)})},jc=0,A1=function(){return!!jc},P1=250,N1={attributes:!0,characterData:!0,childList:!0,subtree:!0},Yg=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Zg=function(t){return t===void 0&&(t=0),Date.now()+t},Dd=!1,L1=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=P1),!Dd){Dd=!0;var o=Zg(e);I1(function(){var s=!1;try{s=O1()}finally{if(Dd=!1,e=o-Zg(),!A1())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,N1)};document.body?n():Li.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Yg.forEach(function(n){return Li.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Yg.forEach(function(n){return Li.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),Rf=new L1,Jg=function(t){!jc&&t>0&&Rf.start(),jc+=t,!jc&&Rf.stop()},D1=function(t){return!Ip(t)&&!E1(t)&&getComputedStyle(t).display==="inline"},M1=function(){function t(e,n){this.target=e,this.observedBox=n||Qi.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Sw(this.target,this.observedBox,!0);return D1(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),B1=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),pc=new WeakMap,ey=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},hc=function(){function t(){}return t.connect=function(e,n){var o=new B1(e,n);pc.set(e,o)},t.observe=function(e,n,o){var s=pc.get(e),i=s.observationTargets.length===0;ey(s.observationTargets,n)<0&&(i&&Sa.push(s),s.observationTargets.push(new M1(n,o&&o.box)),Jg(1),Rf.schedule())},t.unobserve=function(e,n){var o=pc.get(e),s=ey(o.observationTargets,n),i=o.observationTargets.length===1;s>=0&&(i&&Sa.splice(Sa.indexOf(o),1),o.observationTargets.splice(s,1),Jg(-1))},t.disconnect=function(e){var n=this,o=pc.get(e);o.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),o.activeTargets.splice(0,o.activeTargets.length)},t}(),z1=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");hc.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Qg(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");hc.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Qg(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");hc.unobserve(this,e)},t.prototype.disconnect=function(){hc.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();const Md=window.React,$1=window.Blueprint.Core.AbstractPureComponent2,F1=window.Blueprint.Core.DISPLAYNAME_PREFIX;var ty=function(t){Ep(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.targetRef=Md.createRef(),n.prevElement=void 0,n.observer=new z1(function(o){var s,i;return(i=(s=n.props).onResize)===null||i===void 0?void 0:i.call(s,o)}),n}return e.prototype.render=function(){var n=Md.Children.only(this.props.children);return this.props.targetRef!==void 0?n:Md.cloneElement(n,{ref:this.targetRef})},e.prototype.componentDidMount=function(){this.observeElement()},e.prototype.componentDidUpdate=function(n){this.observeElement(this.props.observeParents!==n.observeParents)},e.prototype.componentWillUnmount=function(){this.observer.disconnect()},e.prototype.observeElement=function(n){if(n===void 0&&(n=!1),!(this.targetRef.current instanceof Element)){this.observer.disconnect();return}if(!(this.targetRef.current===this.prevElement&&!n)&&(this.observer.disconnect(),this.prevElement=this.targetRef.current,this.observer.observe(this.targetRef.current),this.props.observeParents))for(var o=this.targetRef.current.parentElement;o!=null;)this.observer.observe(o),o=o.parentElement},e.displayName="".concat(F1,".ResizeSensor2"),e}($1);const Ic=window.React;var U1=function(){return null},Ap=Ic.createContext([{},U1]),q1=function(t,e){switch(e.type){case"FORCE_DISABLED_STATE":return{forceDisabled:!0};case"RESET_DISABLED_STATE":return{};default:return t}},kw=function(t){var e=t.children,n=t.forceDisable,o=Ic.useReducer(q1,{}),s=o[0],i=o[1];return Ic.useEffect(function(){i(n?{type:"FORCE_DISABLED_STATE"}:{type:"RESET_DISABLED_STATE"})},[n]),Ic.createElement(Ap.Provider,{value:[s,i]},typeof e=="function"?e(s):e)};const mc=window.React,ny=window.Blueprint.Core.Classes,H1=window.Blueprint.Core.DISPLAYNAME_PREFIX;var Ow=function(t){Ep(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.popover=null,n.renderPopover=function(o){var s,i,c=n.props,d=c.children,f=c.disabled,m=c.intent,p=c.popoverClassName,g=aw(c,["children","disabled","intent","popoverClassName"]),b=hs(RO,(s={},s[ny.MINIMAL]=n.props.minimal,s),ny.intentClass(m),p);return mc.createElement(Ds,Bt({interactionKind:zr.HOVER_TARGET_ONLY,modifiers:{arrow:{enabled:!n.props.minimal},offset:{options:{offset:[0,h1/2]}}}},g,{autoFocus:!1,canEscapeKeyClose:!1,disabled:(i=o.forceDisabled)!==null&&i!==void 0?i:f,enforceFocus:!1,lazy:!0,popoverClassName:b,portalContainer:n.props.portalContainer,ref:function(v){return n.popover=v}}),d)},n}return e.prototype.render=function(){var n=this;return mc.createElement(Ap.Consumer,null,function(o){var s=o[0];return mc.createElement(kw,Bt({},s),n.renderPopover)})},e.prototype.reposition=function(){this.popover!=null&&this.popover.reposition()},e.displayName="".concat(H1,".Tooltip2"),e.defaultProps={hoverCloseDelay:0,hoverOpenDelay:100,minimal:!1,transitionDuration:100},e}(mc.PureComponent);const An=window.React,V1=window.Blueprint.Core.AbstractPureComponent2,tr=window.Blueprint.Core.Classes,X1=window.Blueprint.Core.DISPLAYNAME_PREFIX,ry=window.Blueprint.Core.Keys,Q1=window.Blueprint.Core.refHandler,K1=window.Blueprint.Core.mergeRefs,W1=window.Blueprint.Core.Overlay,gc=window.Blueprint.Core.Utils;var zr={CLICK:"click",CLICK_TARGET_ONLY:"click-target",HOVER:"hover",HOVER_TARGET_ONLY:"hover-target"},Ds=function(t){Ep(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasDarkParent:!1,isOpen:n.getIsOpen(n.props)},n.popoverElement=null,n.targetElement=null,n.popoverRef=Q1(n,"popoverElement",n.props.popoverRef),n.targetRef=function(o){return n.targetElement=o},n.isMouseInTargetOrPopover=!1,n.lostFocusOnSamePage=!0,n.isControlled=function(){return n.props.isOpen!==void 0},n.isArrowEnabled=function(){var o,s;return!n.props.minimal&&((s=(o=n.props.modifiers)===null||o===void 0?void 0:o.arrow)===null||s===void 0?void 0:s.enabled)!==!1},n.isHoverInteractionKind=function(){return n.props.interactionKind===zr.HOVER||n.props.interactionKind===zr.HOVER_TARGET_ONLY},n.reposition=function(){var o;return(o=n.popperScheduleUpdate)===null||o===void 0?void 0:o.call(n)},n.renderTarget=function(o){var s,i,c,d=o.ref,f=n.props,m=f.children,p=f.className,g=f.fill,b=f.openOnTargetFocus,v=f.renderTarget,w=n.state.isOpen,S=n.isControlled(),T=n.isHoverInteractionKind(),R=n.props.targetTagName;g&&(R="div");var L=K1(d,n.targetRef),q=T?{onBlur:n.handleTargetBlur,onContextMenu:n.handleTargetContextMenu,onFocus:n.handleTargetFocus,onMouseEnter:n.handleMouseEnter,onMouseLeave:n.handleMouseLeave}:{onClick:n.handleTargetClick,onKeyDown:function(me){return ry.isKeyboardClick(me.keyCode)&&n.handleTargetClick(me)}},Q=b&&T?0:void 0,ee=Bt({"aria-haspopup":"true",className:hs(p,kO,(s={},s[SO]=w,s[tr.ACTIVE]=!S&&w&&!T,s)),ref:L},q),D;if(v!==void 0)D=v(Bt(Bt({},ee),{isOpen:w,tabIndex:Q}));else{var A=gc.ensureElement(An.Children.toArray(m)[0]);if(A===void 0)return null;var P=(i={},i[tr.ACTIVE]=w&&!S&&!T,i[tr.FILL]=g,i),H=An.cloneElement(A,{className:hs(A.props.className,P),disabled:w&&gc.isElementOfType(A,Ow)?!0:A.props.disabled,tabIndex:(c=A.props.tabIndex)!==null&&c!==void 0?c:Q}),fe=An.createElement(R,ee,H);D=fe}return An.createElement(ty,{targetRef:L,onResize:n.reposition},D)},n.renderPopover=function(o){var s,i,c=n.props,d=c.interactionKind,f=c.shouldReturnFocusOnClose,m=c.usePortal,p=n.state.isOpen,g=c1(o.placement,n.isArrowEnabled()?o.arrowProps.style:void 0);n.popperScheduleUpdate=o.update;var b={onClick:n.handlePopoverClick,onKeyDown:function(T){return ry.isKeyboardClick(T.keyCode)&&n.handlePopoverClick(T)}};(d===zr.HOVER||!m&&d===zr.HOVER_TARGET_ONLY)&&(b.onMouseEnter=n.handleMouseEnter,b.onMouseLeave=n.handleMouseLeave);var v=du(o.placement),w=hs(Tn,(s={},s[tr.DARK]=n.props.inheritDarkTheme&&n.state.hasDarkParent,s[tr.MINIMAL]=n.props.minimal,s[Ig]=n.props.captureDismiss,s[_O]=o.isReferenceHidden===!0,s[TO]=o.hasPopperEscaped===!0,s),"".concat(CO,"-").concat(v),n.props.popoverClassName),S=n.isHoverInteractionKind()?!1:void 0;return An.createElement(W1,{autoFocus:(i=n.props.autoFocus)!==null&&i!==void 0?i:S,backdropClassName:wO,backdropProps:n.props.backdropProps,canEscapeKeyClose:n.props.canEscapeKeyClose,canOutsideClickClose:n.props.interactionKind===zr.CLICK,enforceFocus:n.props.enforceFocus,hasBackdrop:n.props.hasBackdrop,isOpen:p,onClose:n.handleOverlayClose,onClosed:n.props.onClosed,onClosing:n.props.onClosing,onOpened:n.props.onOpened,onOpening:n.props.onOpening,transitionDuration:n.props.transitionDuration,transitionName:Tn,usePortal:n.props.usePortal,portalClassName:n.props.portalClassName,portalContainer:n.props.portalContainer,shouldReturnFocusOnClose:n.isHoverInteractionKind()?!1:f},An.createElement("div",{className:OO,ref:o.ref,style:o.style},An.createElement(ty,{onResize:n.reposition},An.createElement("div",Bt({className:w,style:{transformOrigin:g},ref:n.popoverRef},b),n.isArrowEnabled()&&An.createElement(ww,{arrowProps:o.arrowProps,placement:o.placement}),An.createElement("div",{className:xO},n.props.content)))))},n.handleTargetFocus=function(o){if(n.props.openOnTargetFocus&&n.isHoverInteractionKind()){if(o.relatedTarget==null&&!n.lostFocusOnSamePage)return;n.handleMouseEnter(o)}},n.handleTargetBlur=function(o){n.props.openOnTargetFocus&&n.isHoverInteractionKind()&&(o.relatedTarget!=null?o.relatedTarget!==n.popoverElement&&!n.isElementInPopover(o.relatedTarget)&&n.handleMouseLeave(o):n.handleMouseLeave(o)),n.lostFocusOnSamePage=o.relatedTarget!=null},n.handleTargetContextMenu=function(o){o.defaultPrevented&&n.setOpenState(!1,o)},n.handleMouseEnter=function(o){n.isMouseInTargetOrPopover=!0,!n.props.usePortal&&n.isElementInPopover(o.target)&&n.props.interactionKind===zr.HOVER_TARGET_ONLY&&!n.props.openOnTargetFocus?n.handleMouseLeave(o):n.props.disabled||n.setOpenState(!0,o,n.props.hoverOpenDelay)},n.handleMouseLeave=function(o){n.isMouseInTargetOrPopover=!1,n.setTimeout(function(){n.isMouseInTargetOrPopover||n.setOpenState(!1,o,n.props.hoverCloseDelay)})},n.handlePopoverClick=function(o){var s,i,c,d,f=o.target,m=f.closest(".".concat(Tn)),p=f.closest(".".concat(tr.POPOVER)),g=(m??p)===n.getPopoverElement(),b=(i=(s=m?.classList.contains(Ig))!==null&&s!==void 0?s:p?.classList.contains(tr.POPOVER_CAPTURING_DISMISS))!==null&&i!==void 0?i:!1,v=f.closest(".".concat(Sf,", .").concat(EO)),w=f.closest(".".concat(tr.POPOVER_DISMISS,", .").concat(tr.POPOVER_DISMISS_OVERRIDE)),S=(d=(c=v?.classList.contains(Sf))!==null&&c!==void 0?c:w?.classList.contains(tr.POPOVER_DISMISS))!==null&&d!==void 0?d:!1,T=f.closest(":disabled, .".concat(tr.DISABLED))!=null;S&&!T&&(!b||g)&&n.setOpenState(!1,o)},n.handleOverlayClose=function(o){if(!(n.targetElement===null||o===void 0)){var s=o.target;(!gc.elementIsOrContains(n.targetElement,s)||o.nativeEvent instanceof KeyboardEvent)&&n.setOpenState(!1,o)}},n.handleTargetClick=function(o){!n.props.disabled&&!n.isElementInPopover(o.target)&&(n.props.isOpen==null?n.setState(function(s){return{isOpen:!s.isOpen}}):n.setOpenState(!n.props.isOpen,o))},n}return e.prototype.getPopoverElement=function(){var n;return(n=this.popoverElement)===null||n===void 0?void 0:n.querySelector(".".concat(Tn))},e.prototype.getIsOpen=function(n){var o;return n.disabled?!1:(o=n.isOpen)!==null&&o!==void 0?o:n.defaultIsOpen},e.prototype.render=function(){var n=this.props,o=n.disabled,s=n.content,i=n.placement,c=n.position,d=c===void 0?"auto":c,f=n.positioningStrategy,m=this.state.isOpen,p=s==null||typeof s=="string"&&s.trim()==="";return p?(!o&&m!==!1&&!gc.isNodeEnv("production")&&console.warn(NO),this.renderTarget({ref:G1})):An.createElement(zO,null,An.createElement(l1,null,this.renderTarget),An.createElement(o1,{innerRef:this.popoverRef,placement:i??y1(d),strategy:f,modifiers:this.getPopperModifiers()},this.renderPopover))},e.prototype.componentDidMount=function(){this.updateDarkParent()},e.prototype.componentDidUpdate=function(n,o){t.prototype.componentDidUpdate.call(this,n,o),this.updateDarkParent();var s=this.getIsOpen(this.props);this.props.isOpen!=null&&s!==this.state.isOpen?(this.setOpenState(s),this.setState({isOpen:s})):this.props.disabled&&this.state.isOpen&&this.props.isOpen==null&&this.setOpenState(!1)},e.prototype.validateProps=function(n){n.isOpen==null&&n.onInteraction!=null&&console.warn(MO),n.hasBackdrop&&!n.usePortal&&console.warn(LO),n.hasBackdrop&&n.interactionKind!==zr.CLICK&&console.warn(IO),n.placement!==void 0&&n.position!==void 0&&console.warn(DO);var o=An.Children.count(n.children),s=n.renderTarget!==void 0;o===0&&!s&&console.warn(jO),o>1&&console.warn(AO),o>0&&s&&console.warn(PO)},e.prototype.getPopperModifiers=function(){var n,o,s,i,c=this.props.modifiers;return[Bt({enabled:this.isArrowEnabled(),name:"arrow"},c?.arrow),Bt(Bt({name:"computeStyles"},c?.computeStyles),{options:Bt({adaptive:!0,gpuAcceleration:!1},(n=c?.computeStyles)===null||n===void 0?void 0:n.options)}),Bt(Bt({enabled:this.isArrowEnabled(),name:"offset"},c?.offset),{options:Bt({offset:[0,Hc/2]},(o=c?.offset)===null||o===void 0?void 0:o.options)}),Bt(Bt({name:"flip"},c?.flip),{options:Bt({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(s=c?.flip)===null||s===void 0?void 0:s.options)}),Bt(Bt({name:"preventOverflow"},c?.preventOverflow),{options:Bt({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(i=c?.preventOverflow)===null||i===void 0?void 0:i.options)})]},e.prototype.setOpenState=function(n,o,s){var i=this,c,d,f,m,p;(c=this.cancelOpenTimeout)===null||c===void 0||c.call(this),s!==void 0&&s>0?this.cancelOpenTimeout=this.setTimeout(function(){return i.setOpenState(n,o)},s):(this.props.isOpen==null?this.setState({isOpen:n}):(f=(d=this.props).onInteraction)===null||f===void 0||f.call(d,n,o),n||(p=(m=this.props).onClose)===null||p===void 0||p.call(m,o))},e.prototype.updateDarkParent=function(){if(this.props.usePortal&&this.state.isOpen){var n=this.targetElement!=null&&this.targetElement.closest(".".concat(tr.DARK))!=null;this.setState({hasDarkParent:n})}},e.prototype.isElementInPopover=function(n){var o,s;return(s=(o=this.getPopoverElement())===null||o===void 0?void 0:o.contains(n))!==null&&s!==void 0?s:!1},e.displayName="".concat(X1,".Popover2"),e.defaultProps={boundary:"clippingParents",captureDismiss:!1,defaultIsOpen:!1,disabled:!1,fill:!1,hasBackdrop:!1,hoverCloseDelay:300,hoverOpenDelay:150,inheritDarkTheme:!0,interactionKind:zr.CLICK,minimal:!1,openOnTargetFocus:!0,positioningStrategy:"absolute",renderTarget:void 0,shouldReturnFocusOnClose:!1,targetTagName:"span",transitionDuration:300,usePortal:!0},e}(V1);function G1(){}const Yt=window.React,Y1=window.Blueprint.Core.Classes,Z1=window.Blueprint.Core.Portal,yc=window.Blueprint.Core.Utils,J1=window.Blueprint.Core.mergeRefs;var Rw=Yt.forwardRef(function(t,e){var n,o,s=t.className,i=t.children,c=t.content,d=t.disabled,f=d===void 0?!1:d,m=t.onContextMenu,p=t.popoverProps,g=t.tagName,b=g===void 0?"div":g,v=aw(t,["className","children","content","disabled","onContextMenu","popoverProps","tagName"]),w=Yt.useContext(Ap),S=w[1],T=Yt.useState(void 0),R=T[0],L=T[1],q=Yt.useState(),Q=q[0],ee=q[1],D=Yt.useState(!1),A=D[0],P=D[1],H=Yt.useRef(null);Yt.useEffect(function(){P(!1),S({type:"RESET_DISABLED_STATE"})},[f]);var fe=Yt.useCallback(function(Le){return Le.preventDefault()},[]),me=Yt.useCallback(function(Le){Le||(P(!1),ee(void 0),S({type:"RESET_DISABLED_STATE"}))},[]),ge=Yt.useCallback(function(Le){var Je=Le.ref;return Yt.createElement(Z1,null,Yt.createElement("div",{className:yO,style:R,ref:Je}))},[R]),ye=Yt.useMemo(function(){return yc.isDarkTheme(H.current)},[H,A]),Y={isOpen:A,mouseEvent:Q,targetOffset:R},ve=f?void 0:yc.isFunction(c)?c(Y):c,ie=ve===void 0?void 0:Yt.createElement(Ds,Bt({},p,{content:Yt.createElement("div",{onContextMenu:fe},ve),enforceFocus:!1,key:ej(R),hasBackdrop:!0,backdropProps:{className:vO},isOpen:A,minimal:!0,onInteraction:me,popoverClassName:hs(bO,p?.popoverClassName,(n={},n[Y1.DARK]=ye,n)),placement:"right-start",positioningStrategy:"fixed",rootBoundary:"viewport",renderTarget:ge,transitionDuration:(o=p?.transitionDuration)!==null&&o!==void 0?o:100})),we=Yt.useCallback(function(Le){if(!Le.defaultPrevented){var Je=!f&&(yc.isFunction(i)||ie!==void 0);Je&&(Le.preventDefault(),Le.persist(),ee(Le),L({left:Le.clientX,top:Le.clientY}),P(!0),S({type:"FORCE_DISABLED_STATE"})),m?.(Le)}},[m,f]),ze=hs(s,cu),We=yc.isFunction(i)?i({className:ze,contentProps:Y,onContextMenu:we,popover:ie,ref:H}):Yt.createElement(Yt.Fragment,null,ie,Yt.createElement(b,Bt({className:ze,onContextMenu:we,ref:J1(H,e)},v),i));return Yt.createElement(kw,{forceDisable:A},We)});Rw.displayName="Blueprint.ContextMenu2";function ej(t){return t===void 0?"default":"".concat(t.left,"x").concat(t.top)}const tj=window.React.memo,_i=window.React.useCallback,bc=window.React.useMemo,nj=window.Blueprint.Core.Button,rj=window.Blueprint.Core.Intent,oy=window.Blueprint.Core.Menu,Bd=window.Blueprint.Core.MenuDivider,ya=window.Blueprint.Core.MenuItem,oj={autoFocus:!0,boundary:"window",className:"zr-library-item-popover",interactionKind:zr.HOVER,lazy:!0,placement:"right-start",popoverClassName:$.POPOVER},ul=tj(function(e){const{closeDialog:n,inGraph:o,item:s,notes:i=[],pdfs:c=[]}=e,[d]=Ps(),[f]=ol(),[m]=Ia(),[p]=Aa(),[,g]=Zo(),b=_i(()=>{n&&n()},[n]),v=bc(()=>o?{className:$.TEXT_SMALL,onClick:()=>Cf(o)}:{className:[$.TEXT_SMALL,$.TEXT_AUXILIARY].join(" ")},[o]),w=bc(()=>u.jsxs(u.Fragment,{children:[u.jsx(ya,{icon:"application",text:"Open in Zotero (app)",href:js(s,{format:"target"}),target:"_blank"}),u.jsx(ya,{icon:"cloud",text:"Open in Zotero (web)",href:Is(s,{format:"target"}),target:"_blank"})]}),[s]),S=_i(async()=>{const ee=await lu({item:s,pdfs:c,notes:i},o,f,p,m,d);return ee.success&&ee.page.new&&g(),ee},[d,o,s,f,c,i,m,p,g]),T=_i(async()=>{const{success:ee,args:{uid:D}}=await S();ee&&Cg(D)},[S]),R=_i(()=>{o!=!1&&(Cf(o),b())},[b,o]),L=_i(()=>{o!=!1&&Cg(o)},[o]),q=bc(()=>{if(c.length>0){const ee=s.library.type=="group"?"groups/"+s.library.id:"library";return u.jsxs(u.Fragment,{children:[u.jsx(Bd,{title:"PDF Attachments"}),c.map((D,A)=>{const P=["linked_file","imported_file","imported_url"].includes(D.data.linkMode)?`zotero://open-pdf/${ee}/items/${D.data.key}`:D.data.url;return u.jsx(ya,{href:P,icon:"paperclip",rel:"noreferrer",target:"_blank",text:D.data.filename||D.data.title},A)})]})}else return null},[s.library,c]),Q=bc(()=>o?u.jsxs(oy,{className:$.TEXT_SMALL,children:[u.jsx(ya,{icon:"arrow-right",text:"Go to Roam page",onClick:R}),u.jsx(ya,{icon:"inheritance",text:"Open in sidebar",onClick:L}),u.jsx(Bd,{}),w,q]}):u.jsxs(oy,{className:$.TEXT_SMALL,children:[u.jsx(ya,{icon:"add",text:"Import metadata",onClick:S}),u.jsx(ya,{icon:"inheritance",text:"Import & open in sidebar",onClick:T}),u.jsx(Bd,{}),w,q]}),[S,T,o,R,L,q,w]);return u.jsx(Ds,{...oj,content:Q,children:u.jsx(nj,{intent:o!=!1?rj.SUCCESS:void 0,minimal:!0,rightIcon:"chevron-right",small:!0,text:"@"+s.key,...v})})}),aj=window.Blueprint.Core.Button,sj=window.Blueprint.Core.Classes,ij=window.Blueprint.Core.Drawer,lj=window.Blueprint.Core.Tab,ay=window.Blueprint.Core.Tabs;function cj({item:t}){return u.jsx("pre",{className:[sj.CODE_BLOCK,$.TEXT_AUXILIARY].join(" "),children:JSON.stringify(t,null,"  ")})}function Pp({item:t,isOpen:e,onClose:n}){return u.jsx(ij,{canEscapeKeyClose:!1,canOutsideClickClose:!0,className:$.PREFIX_DRAWER+"data",isOpen:e,lazy:!1,onClose:n,size:"40%",children:u.jsx(Ln,{children:u.jsxs(ay,{animate:!1,className:$.TABS_MINIMAL,id:"zr-drawer--data",children:[u.jsx(lj,{id:"item",panel:u.jsx(cj,{item:t}),title:"Item"}),u.jsx(ay.Expander,{}),u.jsx(aj,{icon:"cross",minimal:!0,onClick:n})]})})})}function uj(t){return t.map(e=>{const{dateAdded:n,dateModified:o,parentItem:s,note:i,tags:c}=e.data,d=e.library.type+"s/"+e.library.id,m=`zotero://select/${d.startsWith("groups/")?d:"library"}/items/${e.key}`;return{date_added:n,date_modified:o,key:e.key,location:d,link_note:m,note:i,parent_item:s,raw:e,tags:c.map(p=>p.tag)}})}const dj=window.React.memo,Vc=window.React.useMemo,jw=window.Blueprint.Core.Button,Iw=window.Blueprint.Core.ButtonGroup,jf=window.Blueprint.Core.Classes,fj=window.Blueprint.Core.Dialog,pj=window.Blueprint.Core.Drawer,hj=window.Blueprint.Core.Icon,sy=window.Blueprint.Core.Tab,iy=window.Blueprint.Core.Tabs,Aw=window.Blueprint.Core.Tag;function Pw({item:t}){const[e,{on:n,off:o}]=It(!1);return u.jsxs(u.Fragment,{children:[u.jsx(jw,{icon:"eye-open",minimal:!0,onClick:n}),u.jsx(fj,{canEscapeKeyClose:!1,className:"zr-raw-item-dialog",isOpen:e,lazy:!0,onClose:o,children:u.jsx("div",{className:jf.DIALOG_BODY,children:u.jsx("pre",{className:[jf.CODE_BLOCK,$.TEXT_AUXILIARY].join(" "),children:JSON.stringify(t,null,"  ")})})})]})}function mj({annot:t}){const{color:e,comment:n,date_modified:o,link_page:s,link_pdf:i,page_label:c,raw:d,tags:f,text:m,type:p}=t,g=Vc(()=>({backgroundImage:`linear-gradient(120deg, ${e}50 0%, ${e}50 100%)`}),[e]);return u.jsxs("div",{className:[$.PREFIX_DRAWER+"notes-card",$.TEXT_SMALL].join(" "),children:[u.jsxs("div",{"zr-role":"card-header",children:[u.jsx("span",{children:f.map((b,v)=>u.jsx(Aw,{minimal:!0,children:b},v))}),u.jsxs(Iw,{minimal:!0,children:[u.jsx(Pw,{item:d}),u.jsx(yr,{className:$.TEXT_SMALL,href:i,icon:"paperclip",children:"PDF"}),u.jsxs(yr,{className:$.TEXT_SMALL,href:s,children:["Page ",c]})]})]}),u.jsxs("div",{className:"zr-annotation--highlight",children:[m&&u.jsx("span",{style:g,children:m}),p=="image"&&u.jsx("code",{className:jf.CODE,children:"Images are currently not supported"})]}),n&&u.jsxs("div",{className:"zr-annotation--comment",children:[u.jsx(hj,{icon:"nest",intent:"primary",size:14}),n]}),u.jsx("div",{"zr-role":"card-footer",children:u.jsx("span",{className:$.TEXT_SECONDARY,children:fp(o)})})]})}function gj({note:t}){const{date_modified:e,link_note:n,raw:o,tags:s}=t,[i]=Ia(),c=Vc(()=>cv([o],i),[i,o]);return u.jsxs("div",{className:[$.PREFIX_DRAWER+"notes-card",$.TEXT_SMALL].join(" "),children:[u.jsxs("div",{"zr-role":"card-header",children:[u.jsx("span",{children:s.map((d,f)=>u.jsx(Aw,{minimal:!0,children:d},f))}),u.jsxs(Iw,{minimal:!0,children:[u.jsx(Pw,{item:o}),u.jsx(yr,{className:$.TEXT_SMALL,href:n,icon:"comment",children:"View in Zotero"})]})]}),c.map((d,f)=>u.jsx("div",{className:"zr-note--contents",children:d},f)),u.jsx("div",{"zr-role":"card-footer",children:u.jsx("span",{className:$.TEXT_SECONDARY,children:fp(e)})})]})}function yj({annots:t}){const e=au(t).sort((n,o)=>cp(n.sortIndex,o.sortIndex));return u.jsx(u.Fragment,{children:e.map(n=>u.jsx(mj,{annot:n},n.key))})}function bj({notes:t}){const e=uj(t);return u.jsx(u.Fragment,{children:e.map(n=>u.jsx(gj,{note:n},n.key))})}const fu=dj(function(e){const{isOpen:n,notes:o,onClose:s}=e,i=Vc(()=>o.filter(el),[o]),c=Vc(()=>o.filter(tl),[o]);return u.jsx(pj,{canEscapeKeyClose:!1,canOutsideClickClose:!0,className:$.PREFIX_DRAWER+"notes",isOpen:n,lazy:!1,onClose:s,size:"40%",children:u.jsx(Ln,{children:u.jsxs(iy,{animate:!1,className:$.TABS_MINIMAL,id:"zr-drawer--notes",children:[i.length>0&&u.jsx(sy,{id:"annotations",panel:u.jsx(yj,{annots:i}),title:"Annotations"}),c.length>0&&u.jsx(sy,{id:"notes",panel:u.jsx(bj,{notes:c}),title:"Notes"}),u.jsx(iy.Expander,{}),u.jsx(jw,{icon:"cross",minimal:!0,onClick:s})]})})})}),ly=window.Blueprint.Core.Button;function vj({item:t,onClose:e}){const{children:n,inGraph:o,itemType:s,meta:i,publication:c,raw:d,title:f}=t,[m,{on:p,off:g}]=It(!1),[b,{on:v,off:w}]=It(!1);return u.jsxs(u.Fragment,{children:[u.jsx(Go,{className:"zr-query--result",children:u.jsxs("div",{"zr-role":"item-header",children:[u.jsxs("div",{"zr-role":"item-details",children:[u.jsx("span",{className:$.TEXT_AUXILIARY,"data-item-type":s,"zr-role":"item-title",children:f}),u.jsx("span",{className:$.TEXT_ACCENT_1,children:i}),u.jsx("span",{className:$.TEXT_SECONDARY,children:c}),u.jsx(ly,{icon:"eye-open",minimal:!0,onClick:p,title:"Show the item's raw metadata"}),n.notes.length>0?u.jsx(ly,{className:$.TEXT_SMALL,icon:"duplicate",minimal:!0,text:Wt(n.notes.length,"linked note"),onClick:v,title:"Show the item's linked notes"}):null]}),u.jsx(ul,{closeDialog:e,inGraph:o,item:d,notes:n.notes,pdfs:n.pdfs})]})}),u.jsx(Pp,{item:d,isOpen:m,onClose:g}),n.notes.length>0&&u.jsx(fu,{notes:n.notes,isOpen:b,onClose:w})]})}var on=(t=>(t.DATE="date",t.DATE_RANGE="date-range",t.ITEM_TAGS="tags",t.ITEM_TYPE="item-type",t.SELECT="select",t.TEXT="text",t))(on||{});const cy=window.React.useCallback,wj=window.React.useMemo;function xj({value:t,setValue:e}){const[n]=Aa(),o=wj(()=>Object.keys(n).map(s=>({value:s,label:n[s]})),[n]);return u.jsx(vv,{options:o,value:t,setValue:e})}function Cj({value:t,setValue:e}){const n=cy(s=>e([...t,s]),[e,t]),o=cy(s=>e(t.filter(i=>i!=s)),[e,t]);return u.jsx(wp,{onRemove:o,onSelect:n,selectedTags:t})}function Ej({inputType:t,...e}){switch(t){case on.ITEM_TYPE:return u.jsx(xj,{...e});case on.ITEM_TAGS:return u.jsx(Cj,{...e});case on.DATE:return u.jsx(zT,{...e});case on.DATE_RANGE:return u.jsx($T,{...e});case on.TEXT:return u.jsx(KT,{...e});case null:default:return null}}const Np={property:"Citekey",relationship:"exists",value:null},ba={Abstract:{contains:{checkInput:t=>t?.constructor===String,defaultInput:"",inputType:on.TEXT,testItem:(t,e="")=>t.abstract?Un(e,t.abstract):!1},"does not contain":{checkInput:t=>t?.constructor===String,defaultInput:"",inputType:on.TEXT,testItem:(t,e="")=>t.abstract?e?!Un(e,t.abstract):!0:!1},"does not exist":{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>!t.abstract},exists:{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>!!t.abstract}},Citekey:{exists:{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>!!t.raw.has_citekey},"does not exist":{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>!t.raw.has_citekey}},DOI:{exists:{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>!!t.raw.data.DOI},"does not exist":{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>!t.raw.data.DOI}},"Item added":{before:{checkInput:t=>t instanceof Date,defaultInput:new Date,inputType:on.DATE,stringify:t=>vr(t,{brackets:!1}),testItem:(t,e)=>{if(e==null)return!0;{const n=e;return n.setHours(0,0,0),new Date(t.raw.data.dateAdded)<n}}},after:{checkInput:t=>t instanceof Date,defaultInput:new Date,inputType:on.DATE,stringify:t=>vr(t,{brackets:!1}),testItem:(t,e)=>{if(e==null)return!0;{const n=e;return n.setHours(0,0,0),new Date(t.raw.data.dateAdded)>n}}},between:{checkInput:t=>t?.constructor===Array&&t.length==2&&t.every(e=>e==null||e?.constructor===Date),defaultInput:[null,null],inputType:on.DATE_RANGE,stringify:t=>t.map(e=>e?vr(e,{brackets:!1}):"...").join("-"),testItem:(t,e)=>{const[n,o]=e;let s,i;if(n==null)s=!0;else{const c=n;c.setHours(0,0,0),s=new Date(t.raw.data.dateAdded)>c}if(o==null)i=!0;else{const c=o;c.setHours(0,0,0),i=new Date(t.raw.data.dateAdded)<c}return s&&i}}},"Item type":{"is any of":{checkInput:t=>t?.constructor===Array&&t.length>0&&t.every(e=>e?.constructor===String),defaultInput:[],inputType:on.ITEM_TYPE,stringify:t=>t.join(", "),testItem:(t,e)=>e.includes(t.itemType)},"is not":{checkInput:t=>t?.constructor===Array&&t.length>0&&t.every(e=>e?.constructor===String),defaultInput:[],inputType:on.ITEM_TYPE,stringify:t=>t.join(", "),testItem:(t,e)=>!e.includes(t.itemType)}},Notes:{exist:{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>t.children.notes.length>0},"do not exist":{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>t.children.notes.length==0}},PDF:{exists:{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>t.children.pdfs.length>0},"does not exist":{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>t.children.pdfs.length==0}},"Roam page":{exists:{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>!!t.inGraph},"does not exist":{checkInput:()=>!1,defaultInput:null,inputType:null,testItem:t=>t.inGraph==!1}},Tags:{include:{checkInput:t=>t?.constructor===Array&&(t.length==0||t.every(e=>e?.constructor===String)),defaultInput:[],inputType:on.ITEM_TAGS,stringify:t=>t.join(", "),testItem:(t,e=[])=>t.tags.length==0||e.length==0?!1:e.every(n=>Un(n,t.tags,{match:"exact"}))},"include any of":{checkInput:t=>t?.constructor===Array&&(t.length==0||t.every(e=>e?.constructor===String)),defaultInput:[],inputType:on.ITEM_TAGS,stringify:t=>t.join(", "),testItem:(t,e=[])=>t.tags.length==0||e.length==0?!1:e.some(n=>Un(n,t.tags,{match:"exact"}))},"do not include":{checkInput:t=>t?.constructor===Array&&(t.length==0||t.every(e=>e?.constructor===String)),defaultInput:[],inputType:on.ITEM_TAGS,stringify:t=>t.join(", "),testItem:(t,e)=>t.tags.length==0||e.length==0?!0:e.every(n=>!Un(n,t.tags,{match:"exact"}))}},Title:{contains:{checkInput:t=>t?.constructor===String,defaultInput:"",inputType:on.TEXT,testItem:(t,e="")=>Un(e,t.title)},"does not contain":{checkInput:t=>t?.constructor===String,defaultInput:"",inputType:on.TEXT,testItem:(t,e)=>!Un(e,t.title)}}};function uy(t,e=!1,n){if(Array.isArray(t))return Nw(t,e,n);if(typeof t=="object"){const{property:o,relationship:s,value:i}=t;if(!o||!s)return!0;{const c=ba[o][s];return c.inputType===null?c.testItem(n):c.testItem(n,i)}}else throw new Error(`Unexpected query input of type ${typeof t}, expected Array or Object`)}function Nw(t=[],e=!0,n){return t.length==0?!0:e?t.some(o=>uy(o,!e,n)):t.every(o=>uy(o,!e,n))}function Lp(t,e){return Array.isArray(t)?iv(t,e):[t,e]}const fs=window.React.useCallback,vc=window.Blueprint.Core.Button,Sj=window.Blueprint.Core.Intent,Tj=window.Blueprint.Core.MenuItem,dy=window.Blueprint.Select.Select,Lw={minimal:!0,placement:"bottom",popoverClassName:$.POPOVER},_j={...Lw,targetProps:{title:"Select a property to query"}},kj={...Lw,targetProps:{title:"Select a relationship to test for the property"}};function fy(t,e){const{handleClick:n}=e;return u.jsx(Tj,{onClick:n,text:t},t)}function Oj({dispatch:t,isFirstChild:e,isOnlyChild:n,term:o,useOR:s=!1}){const{property:i,relationship:c,value:d=""}=o,f=fs(()=>{t({type:"updateSelf",value:Lp(o,Np)})},[t,o]),m=fs(()=>t({type:"removeSelf"}),[t]),p=fs(w=>{t({type:"updateSelf",value:{...o,...w}})},[t,o]),g=fs(w=>{const S={property:w},T=ba[w];if(c in T||(S.relationship=Object.keys(T)[0]),S.relationship){const R=T[S.relationship];R.checkInput(d)||(S.value=R.defaultInput)}p(S)},[p,c,d]),b=fs(w=>{const S={relationship:w},T=ba[i][w];T.checkInput(d)||(S.value=T.defaultInput),p(S)},[p,i,d]),v=fs(w=>p({value:w}),[p]);return u.jsxs("div",{className:"zr-query-entry",children:[!e&&u.jsx("span",{"zr-role":"query-entry-operator",children:s?"AND":"OR"}),u.jsxs("div",{children:[u.jsx(dy,{filterable:!1,itemRenderer:fy,items:Object.keys(ba),onItemSelect:g,popoverProps:_j,children:u.jsx(vc,{minimal:!0,rightIcon:"caret-down",text:i})}),u.jsx(dy,{filterable:!1,itemRenderer:fy,items:Object.keys(ba[i]),onItemSelect:b,popoverProps:kj,children:u.jsx(vc,{minimal:!0,rightIcon:"caret-down",text:c})}),u.jsx(Ej,{inputType:ba[i][c].inputType,value:d,setValue:v})]}),n?null:u.jsxs("div",{children:[u.jsx(vc,{className:["zr-query-entry--add-sibling",$.TEXT_SMALL].join(" "),icon:"small-plus",minimal:!0,onClick:f,small:!0,text:s?"OR":"AND"}),u.jsx(vc,{className:"zr-query-entry--remove-self",icon:n?"cross":"small-cross",intent:n?void 0:Sj.DANGER,minimal:!0,onClick:m,title:"Remove query term"})]})]})}const Rj=window.React.Fragment,zd=window.React.useCallback,py=window.Blueprint.Core.Button;function Dp({dispatch:t,isFirstChild:e,isOnlyChild:n,terms:o=[],useOR:s=!0}){const i=zd(()=>t({type:"removeSelf"}),[t]),c=zd(()=>t({type:"updateSelf",value:Lp(o,Np)}),[t,o]),d=zd((f,m)=>{switch(m.type){case"removeSelf":return t({type:"updateSelf",value:sp(o,f)});case"updateSelf":return t({type:"updateSelf",value:ip(o,f,m.value)});default:return}},[t,o]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"zr-query-box",children:[!e&&u.jsx("span",{"zr-role":"query-entry-operator",children:s?"OR":"AND"}),u.jsx("div",{children:o.map((f,m)=>{const p={dispatch:g=>d(m,g),isFirstChild:m==0,isOnlyChild:o.length==1,useOR:!s};return u.jsx(Rj,{children:Array.isArray(f)?u.jsx(Dp,{terms:f,...p}):u.jsx(Oj,{term:f,...p})},m)})}),!n&&u.jsx(py,{className:"zr-query-box--remove-self",icon:"cross",minimal:!0,onClick:i,title:"Remove query group"})]}),u.jsx(py,{className:["zr-query-box--add-sibling",$.TEXT_SMALL].join(" "),minimal:!0,onClick:c,rightIcon:"small-plus",small:!0,text:s?"OR":"AND"})]})}const ho=window.React.useCallback,jj=window.React.useState,gs=window.Blueprint.Core.Button,ys=window.Blueprint.Core.Classes,Dw=window.Blueprint.Core.Dialog,Ij=window.Blueprint.Core.Tag;function Aj({property:t,relationship:e,value:n}){return n==null?"":ba[t][e].stringify?.(n)||`${n}`}function Pj(t){const{property:e,relationship:n}=t,o=Aj(t);return[e,n,o].filter(St).join(" ")}function Mw(t,e,{parentheses:n=!0}={}){if(Array.isArray(t)){const o=t.map(s=>Mw(s,!e)).join(e?" or ":" and ");return n?`(${o})`:o}else return Pj(t)}function Bw({addTerm:t,buttonProps:e={},useOR:n}){const[o,{on:s,off:i}]=It(!1),[c,d]=jj([Np]),f=ho(p=>{switch(p.type){case"removeSelf":return;case"updateSelf":return d(p.value);default:return}},[]),m=ho(()=>{t(c),i()},[t,i,c]);return u.jsxs(u.Fragment,{children:[u.jsx(gs,{className:$.TEXT_SMALL,minimal:!0,onClick:s,rightIcon:"small-plus",small:!0,...e}),u.jsxs(Dw,{canEscapeKeyClose:!1,className:"zr-query-term-dialog",isOpen:o,lazy:!0,onClose:i,children:[u.jsx("div",{className:ys.DIALOG_BODY,children:u.jsx(Dp,{dispatch:f,isFirstChild:!0,isOnlyChild:!0,terms:c,useOR:!n})}),u.jsx("div",{className:ys.DIALOG_FOOTER,children:u.jsxs("div",{className:ys.DIALOG_FOOTER_ACTIONS,children:[u.jsx(gs,{minimal:!0,onClick:i,text:"Cancel"}),u.jsx(gs,{intent:"primary",minimal:!0,onClick:m,text:"OK"})]})})]})]})}function Nj({dispatch:t,isLast:e,term:n,useOR:o}){const[s,{on:i,off:c}]=It(!1),d=ho(()=>{c(),t({type:"removeSelf"})},[c,t]),f=ho(m=>{switch(m.type){case"removeSelf":d();break;case"updateSelf":return t({type:"updateSelf",value:m.value});default:return}},[t,d]);return u.jsxs(u.Fragment,{children:[u.jsx(Ij,{"zr-role":"filter-tag",interactive:!0,minimal:!0,onClick:i,onRemove:d,children:Mw(n,!o,{parentheses:!1})}),!e&&u.jsx("span",{className:$.TEXT_AUXILIARY,"zr-role":"filter-operator",children:o?"OR":"AND"}),u.jsxs(Dw,{canEscapeKeyClose:!1,className:"zr-query-term-dialog",isOpen:s,lazy:!0,onClose:c,children:[u.jsx("div",{className:ys.DIALOG_BODY,children:u.jsx(Dp,{dispatch:f,isFirstChild:!0,isOnlyChild:!0,terms:n,useOR:!o})}),u.jsx("div",{className:ys.DIALOG_FOOTER,children:u.jsxs("div",{className:ys.DIALOG_FOOTER_ACTIONS,children:[u.jsx(gs,{minimal:!0,onClick:d,text:"Remove term"}),u.jsx(gs,{intent:"primary",minimal:!0,onClick:c,text:"OK"})]})})]})]})}function Lj({dispatch:t,filter:e,isOnlyChild:n,useOR:o}){const s=ho(d=>t({type:"add",value:d}),[t]),i=ho(()=>t({type:"removeSelf"}),[t]),c=ho((d,f)=>{switch(f.type){case"updateSelf":return t({type:"update",index:d,value:f.value});case"removeSelf":return e.length==1?t({type:"removeSelf"}):t({type:"remove",index:d});default:return}},[t,e.length]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"zr-query-filter--elements",children:[e.map((d,f)=>u.jsx(Nj,{dispatch:m=>c(f,m),isLast:f==e.length-1,term:d,useOR:o},f)),u.jsx(Bw,{addTerm:s,buttonProps:{intent:"primary",text:o?"OR":"AND"},useOR:!o})]}),!n&&u.jsx(gs,{className:"zr-filter--remove-self",icon:"small-cross",minimal:!0,onClick:i,title:"Remove query group"})]})}function Dj({dispatch:t,terms:e,useOR:n}){const o=ho(i=>t({type:"add",value:i}),[t]),s=ho((i,c)=>{const d=e[i];switch(c.type){case"removeSelf":return t({type:"remove",index:i});case"add":return t({type:"update",index:i,value:[Lp(d,c.value)]});case"remove":return t({type:"update",index:i,value:sp(d,c.index)});case"update":return t({type:"update",index:i,value:ip(d,c.index,c.value)});default:return}},[t,e]);return u.jsxs("div",{className:"zr-query-filters",children:[e.map((i,c)=>u.jsxs("div",{className:"zr-query-filter",children:[c>0&&u.jsx("span",{"zr-role":"filter-list-operator",children:n?"OR":"AND"}),u.jsx(Lj,{dispatch:d=>s(c,d),isOnlyChild:e.length==1,filter:i,useOR:!n})]},c)),u.jsx(Bw,{addTerm:o,buttonProps:{text:e.length==0?"Set filter":n?"OR":"AND"},useOR:!n})]})}const zw=window.React.useEffect,Mj=window.React.useMemo,$w=window.React.useState,Bj=window.Blueprint.Core.NonIdealState,zj=window.Blueprint.Core.Spinner;function $j(t,e){return new Promise(n=>{setTimeout(()=>{const o=t.items.map(s=>{const i=s.data.key,c=s.library.type+"s/"+s.library.id,{pdfs:d,notes:f}=Ra(i,c,{pdfs:t.pdfs,notes:t.notes});return lp(s,d,f,e)});n(o)},0)})}const hy=20;function Fj({items:t,onClose:e}){const{currentPage:n,pageLimits:o,setCurrentPage:s}=nl({itemsPerPage:hy}),[i]=$w(!0),[c,d]=pv([]),f=Mj(()=>t.filter(m=>Nw(c,i,m)),[t,c,i]);return zw(()=>{s(1)},[t,f,s]),u.jsxs("div",{className:"zr-query-builder",children:[u.jsx(mo,{children:u.jsx(Dj,{dispatch:d,terms:c,useOR:i})}),u.jsx("div",{className:"zr-queryitems--datalist",children:f.length==0?u.jsx(Bj,{className:$.TEXT_AUXILIARY,description:"No items to display"}):u.jsx(Yo,{children:f.slice(...o).map(m=>u.jsx(vj,{item:m,onClose:e},[m.location,m.key].join("-")))})}),u.jsx(mo,{children:u.jsx(il,{arrows:"first",currentPage:n,itemsPerPage:hy,nbItems:f.length,setCurrentPage:s})})]})}function Uj({itemList:t,onClose:e}){const[n]=Zo(),[o,s]=$w(null);return zw(()=>{t&&$j(t,n).then(i=>{s(i)})},[t,n]),o==null?u.jsx(zj,{size:15}):u.jsx(Fj,{items:o,onClose:e})}const qj=window.React.useEffect,Hj=window.React.useState,Vj=window.Blueprint.Core.Spinner;function Xj({items:t}){return u.jsx(Yo,{children:t.slice(0,20).map((e,n)=>u.jsx(Go,{children:e.key},e.key+"-"+n))})}function Qj({itemList:t}){const[e,n]=Hj(null);return qj(()=>{t&&n(t.notes)},[t]),e==null?u.jsx(Vj,{size:15}):u.jsx(Xj,{items:e})}const my=window.Blueprint.Core.Button;function Kj({item:t}){const[e,{on:n,off:o}]=It(!1),[s,{on:i,off:c}]=It(!1);return u.jsxs(u.Fragment,{children:[u.jsx(Go,{className:"zr-query--result",children:u.jsxs("div",{"zr-role":"item-header",children:[u.jsxs("div",{"zr-role":"item-details",children:[u.jsx("span",{className:$.TEXT_AUXILIARY,"zr-role":"item-title",children:t.title}),t.parent.key&&u.jsxs("span",{className:$.TEXT_ACCENT_1,children:["@",t.parent.key]}),u.jsx(my,{className:$.TEXT_SMALL,icon:"eye-open",minimal:!0,onClick:n,title:"Show the item's raw metadata"}),t.annotations.length>0?u.jsx(my,{className:$.TEXT_SMALL,icon:"duplicate",minimal:!0,text:Wt(t.annotations.length,"linked note"),onClick:i}):null]}),u.jsx(yr,{className:$.TEXT_SMALL,href:t.link,icon:"paperclip",children:"Open PDF"})]})}),u.jsx(Pp,{item:t.raw,isOpen:e,onClose:o}),t.annotations.length>0&&u.jsx(fu,{notes:t.annotations,isOpen:s,onClose:c})]})}function Wj(t,e={},n=[]){return{annotations:n,key:t.data.key,link:dp(t,"href"),parent:e,title:t.data.filename||t.data.title,raw:t,tags:t.data.tags.map(o=>o.tag)}}function Gj(t,e,n,{items:o=[],notes:s=[]}){const i=o.find(d=>d.data.key==e&&d.library.type+"s/"+d.library.id==n),c=s.filter(el).filter(d=>d.data.parentItem==t&&d.library.type+"s/"+d.library.id==n);return{parent:i,annotations:c}}const Fw=window.React.useEffect,Yj=window.React.useState,Zj=window.Blueprint.Core.NonIdealState,Jj=window.Blueprint.Core.Spinner;function eI(t){return new Promise(e=>{setTimeout(()=>{const n=t.pdfs.map(o=>{const s=o.data.key,i=o.data.parentItem,c=o.library.type+"s/"+o.library.id,{parent:d,annotations:f}=Gj(s,i,c,{items:t.items,notes:t.notes});return Wj(o,d,f)});e(n)},0)})}const gy=20;function tI({items:t}){const{currentPage:e,pageLimits:n,setCurrentPage:o}=nl({itemsPerPage:gy});return Fw(()=>{o(1)},[t,o]),u.jsxs("div",{className:"zr-query-builder",children:[u.jsx("div",{className:"zr-querypdfs--datalist",children:t.length==0?u.jsx(Zj,{className:$.TEXT_AUXILIARY,description:"No items to display"}):u.jsx(Yo,{children:t.slice(...n).map((s,i)=>u.jsx(Kj,{item:s},[s.key,i].join("-")))})}),u.jsx(mo,{children:u.jsx(il,{arrows:"first",currentPage:e,itemsPerPage:gy,nbItems:t.length,setCurrentPage:o})})]})}function nI({itemList:t}){const[e,n]=Yj(null);return Fw(()=>{t&&eI(t).then(o=>{n(o)})},[t]),e==null?u.jsx(Jj,{size:15}):u.jsx(tI,{items:e})}const rI=qt.create({baseURL:"https://en.wikipedia.org/api/rest_v1/data/citation/zotero"});async function oI(t){let e;try{const{data:n,...o}=await rI.get(encodeURIComponent(t));return e={data:n,...o},{item:n[0],query:t}}catch(n){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch metadata from Wikipedia",context:{error:Kt(n),query:t,response:e}}),Promise.reject(n)}}const Uw=(t,e={})=>{const{cacheTime:n=1/0,retry:o=(d,f)=>d<1&&f.toJSON().status!=404,staleTime:s=1e3*60*10,...i}=e,c=t.map(d=>({queryKey:["citoid",{url:d}],queryFn:m=>oI(d),cacheTime:n,retry:o,staleTime:s,...i}));return Gi({queries:c})},qw=qt.create({baseURL:"https://api.semanticscholar.org/v1/paper/",params:{include_unknown_references:"true"}});Wo(qw,{retries:3});async function aI(t){let e;try{const n=await qw.get(`${t}`),{data:{citations:o,references:s}}=n;return e=n,{doi:t,citations:ug(o),references:ug(s)}}catch(n){return window.zoteroRoam?.error?.({origin:"API",message:"Failed to fetch data from SemanticScholar",context:{error:Kt(n),response:e}}),Promise.reject(n)}}const sI=(t,e={})=>{const{cacheTime:n=1/0,...o}=e;return hC({queryKey:["semantic",{doi:t}],queryFn:i=>aI(t),cacheTime:n,...o})},Di=window.React.useMemo,Hw=(t,e={})=>{const{staleTime:n=1e3*60*5,refetchInterval:o=1e3*60*5,...s}=e,i=Xo(),c=t.map(d=>{const{path:f}=d,m=["collections",{library:f}],{data:p,lastUpdated:g}=i.getQueryData(m)||{};return{queryKey:m,queryFn:b=>d_(d,g,{match:p}),staleTime:n,refetchInterval:o,...s}});return Gi({queries:c})},yo=(t,e={})=>{const n=Xo(),o=Di(()=>{const{staleTime:s=1e3*60,refetchInterval:i=1e3*60,...c}=e;return t.map(d=>{const{apikey:f,library:{path:m},...p}=d;return{queryKey:["items",m,{...p}],queryFn:b=>x_(d,n),staleTime:s,refetchInterval:i,...c}})},[t,n,e]);return Gi({queries:o})},Vw=(t,e={})=>{const{staleTime:n=1e3*60*60,refetchInterval:o=1e3*60*60,...s}=e,i=t.map(c=>({queryKey:["permissions",{apikey:c}],queryFn:f=>p_(c),staleTime:n,refetchInterval:o,...s}));return Gi({queries:i})},Xw=(t,e={})=>{const n=Di(()=>{const{staleTime:o=18e4,...s}=e;return t.map(i=>{const{apikey:c,path:d}=i;return{queryKey:["tags",{library:d}],queryFn:m=>h_({apikey:c,path:d}),staleTime:o,...s}})},[t,e]);return Gi({queries:n})},Qw=t=>{const e=Di(()=>Array.from(new Set(t.map(c=>c.apikey))),[t]),n=Vw(e,{notifyOnChangeProps:["data","isLoading"]}),o=n.some(c=>c.isLoading),s=Di(()=>n.map(c=>c.data||[]).flat(1),[n]);return{data:Di(()=>t.filter(c=>{const d=s.find(f=>f.key==c.apikey);if(d){const{access:f}=d,[m,p]=c.path.split("/");return((m=="users"?f.user:f.groups?.[p]||f.groups?.all)||{}).write||!1}else return!1}),[t,s]),isLoading:o}},iI=window.React.useCallback,yy=window.React.useMemo,lI=window.React.useState,cI=window.Blueprint.Core.Spinner,uI=window.Blueprint.Core.Tab,dI=window.Blueprint.Core.Tabs,fI=[{show:"items",title:"Items"},{show:"pdfs",title:"PDFs"}];function pI({itemList:t,onClose:e,show:n}){return n=="items"?u.jsx(Uj,{itemList:t,onClose:e}):n=="pdfs"?u.jsx(nI,{itemList:t}):u.jsx(Qj,{itemList:t})}function hI({itemList:t,onClose:e}){const[n,o]=lI("items"),s=iI((i,c,d)=>o(i),[]);return u.jsx(dI,{animate:!1,className:$.TABS_MINIMAL,id:"explorer-lists",onChange:s,renderActiveTabPanelOnly:!1,selectedTabId:n,children:fI.map(i=>u.jsx(uI,{id:i.show,panel:u.jsx(pI,{itemList:t,onClose:e,show:i.show}),title:i.title},i.show))})}function mI({onClose:t}){const[{dataRequests:e}]=Hn(),n=yo(e,{notifyOnChangeProps:["data"],select:c=>c.data}),o=n.some(c=>c.isLoading),s=yy(()=>n.map(c=>c.data||[]).flat(1),[n]),i=yy(()=>Oa(s),[s]);return u.jsx(Ln,{children:u.jsx("div",{children:o?u.jsx(cI,{}):u.jsx(hI,{itemList:i,onClose:t})})})}const gI=window.React.memo,yI=window.React.useEffect,bI=window.Blueprint.Core.Button;function vI({abstract:t,allAbstractsShown:e}){const[n,{set:o,toggle:s}]=It(e);return yI(()=>{o(e)},[e,o]),t?u.jsxs("div",{className:"zr-log-item--abstract",children:[u.jsx(bI,{className:$.TEXT_SMALL,"zr-role":"abstract-toggle",icon:n?"chevron-down":"chevron-right",onClick:s,minimal:!0,small:!0,children:"Abstract"}),n?u.jsx("span",{"zr-role":"abstract-text",className:[$.TEXT_SMALL,$.TEXT_AUXILIARY].join(" "),children:t}):null]}):null}const wI=gI(function({allAbstractsShown:e,item:n,onClose:o}){const{abstract:s,children:i,inGraph:c,itemType:d,meta:f,publication:m,raw:p,title:g}=n;return u.jsxs(Go,{className:"zr-log-entry","data-in-graph":(c!=!1).toString(),children:[u.jsxs("div",{"zr-role":"item-header",children:[u.jsxs("div",{"zr-role":"item-details",children:[u.jsx("span",{className:$.TEXT_AUXILIARY,"data-item-type":d,"zr-role":"item-title",children:g}),u.jsx("span",{className:$.TEXT_ACCENT_1,children:f}),u.jsx("span",{className:$.TEXT_SECONDARY,children:m})]}),u.jsx(ul,{closeDialog:o,inGraph:c,item:p,notes:i.notes,pdfs:i.pdfs})]}),u.jsx(vI,{abstract:s,allAbstractsShown:e})]})}),xI=wI;function CI(t,{edited:e,inGraph:n,notes:o,pdfs:s}){const i=t.key,c=t.library.type+"s/"+t.library.id,d=t.meta.creatorSummary||"",f=t.meta.parsedDate?`(${new Date(t.meta.parsedDate).getUTCFullYear()})`:"",m=Ra(i,c,{pdfs:s,notes:o});return{abstract:t.data.abstractNote||"",children:m,edited:e,inGraph:n,itemType:t.data.itemType,key:i,location:c,meta:[d,f].filter(St).join(" "),publication:t.data.publicationTitle||t.data.bookTitle||t.data.university||"",raw:t,title:t.data.title||""}}function EI(t,e=7){return new Promise(n=>{setTimeout(()=>{const{items:o=[],pdfs:s=[],notes:i=[]}=t,c=F_(),d=new Date;d.setHours(0,0,0);const f=new Date;f.setDate(d.getDate()-1),f.setHours(0,0,0);const m=new Date;m.setDate(d.getDate()-e),m.setHours(0,0,0);const p=o.reduce((g,b)=>{const v=c.get("@"+b.key),{edited:w=null,uid:S=!1}=v||{},T=new Date(b.data.dateModified),R=new Date(Math.max(...[w,T].filter(St).map(L=>Number(L))));if(R<=m)return g;{const L=CI(b,{edited:R,inGraph:S,notes:i,pdfs:s});return R>d?(g.today.push(L),g.numItems+=1):R>f?(g.yesterday.push(L),g.numItems+=1):R>m&&(g.recent.push(L),g.numItems+=1),g}},{today:[],yesterday:[],recent:[],numItems:0});Object.values(p).filter(Array.isArray).forEach(g=>g.sort((b,v)=>b.edited<v.edited?1:-1)),n(p)},0)})}const Mp=window.React.memo,SI=window.React.useEffect,by=window.React.useMemo,vy=window.React.useState,TI=window.Blueprint.Core.NonIdealState,_I=window.Blueprint.Core.Slider,Kw=window.Blueprint.Core.Spinner,kI=window.Blueprint.Core.Switch,$d=Mp(function({allAbstractsShown:e,items:n,label:o,onClose:s}){return n.length==0?null:u.jsxs(u.Fragment,{children:[u.jsx("h5",{children:o}),n.map(i=>u.jsx(xI,{allAbstractsShown:e,item:i,onClose:s},[i.location,i.key].join("/")))]})}),OI={labelRenderer:(t,e={isHandleTooltip:!1})=>e.isHandleTooltip?`Last ${t} days`:"",min:3,max:30,stepSize:1},RI=Mp(function({itemList:e,onClose:n}){const[o,s]=vy(7),[i,{toggle:c}]=It(!1),[d,f]=vy(null);return SI(()=>{e&&EI(e,o).then(m=>f(m))},[o,e]),d==null?u.jsx(Kw,{size:15}):u.jsxs("div",{className:"zr-recentitems--datalist",children:[d.numItems==0?u.jsx(TI,{className:$.TEXT_AUXILIARY,description:"No items to display"}):u.jsxs(Yo,{children:[u.jsx($d,{allAbstractsShown:i,items:d.today,label:"Today",onClose:n}),u.jsx($d,{allAbstractsShown:i,items:d.yesterday,label:"Yesterday",onClose:n}),u.jsx($d,{allAbstractsShown:i,items:d.recent,label:"Recently",onClose:n})]}),u.jsxs(mo,{children:[u.jsx(_I,{onChange:s,value:o,...OI}),u.jsx(kI,{"aria-checked":i,checked:i,label:"Show all abstracts",role:"switch",onChange:c})]})]})}),jI=Mp(function({onClose:e}){const[{dataRequests:n}]=Hn(),o=yo(n,{notifyOnChangeProps:["data"],select:d=>d.data}),s=o.some(d=>d.isLoading),i=by(()=>o.map(d=>d.data||[]).flat(1),[o]),c=by(()=>Oa(i),[i]);return u.jsx(Ln,{children:u.jsx("div",{style:{height:"100%"},children:s?u.jsx(Kw,{}):u.jsx(RI,{itemList:c,onClose:e})})})}),II=jI,AI=window.React.memo,PI=window.Blueprint.Core.Button,NI=window.Blueprint.Core.MenuItem,LI=window.Blueprint.Select.Select,DI={filterable:!1,itemRenderer:(t,e)=>{const{handleClick:n}=e;return u.jsx(NI,{onClick:n,text:t},t)},matchTargetWidth:!0,popoverProps:{minimal:!0,placement:"bottom-right",popoverClassName:$.POPOVER}},MI=AI(function({libProps:e}){const{currentLibrary:{path:n},onSelect:o,options:s}=e;return u.jsx(LI,{items:s,onItemSelect:o,...DI,children:u.jsx(PI,{className:["zr-dashboard--library-select",$.TEXT_AUXILIARY,$.TEXT_SMALL].join(" "),icon:"folder-open",minimal:!0,text:n})})}),BI=MI,zI=window.React.useCallback,$I=window.Blueprint.Core.ButtonGroup,FI=window.Blueprint.Core.Icon;function UI(t){const{icon:e=null,isSelected:n,label:o,name:s,onClick:i,value:c}=t,d=[s,c].join("_"),f=zI(()=>i(c),[i,c]);return u.jsxs("span",{className:"zr-sort-option",onClick:f,children:[u.jsx("input",{type:"radio",checked:n,disabled:n,id:d,name:s,onChange:()=>{},value:c}),u.jsx(FI,{icon:e}),u.jsx("label",{className:$.TEXT_SMALL,htmlFor:d,children:o})]})}function qI(t){const{name:e,onSelect:n,options:o,selectedOption:s}=t;return u.jsx($I,{minimal:!0,children:o.map(i=>u.jsx(UI,{isSelected:i.value==s,name:e,onClick:n,...i},i.value))})}const HI=()=>{const t=Xo();return Wf(e=>{const{library:{apikey:n,path:o},tags:s}=e,{lastUpdated:i=0}=t.getQueryData(["tags",{library:o}])||{};return l_(s,{apikey:n,path:o},i)},{onSettled:(e,n,o,s)=>{const{library:{path:i},tags:c}=o;n||t.invalidateQueries(["items",i],{refetchType:"all"},{throwOnError:!0}),Ur({args:{tags:c},error:n,library:i,_type:"tags-deleted"})}})},VI=()=>{const t=Xo();return Wf(e=>{const{collections:n=[],items:o,library:s,tags:i=[]}=e,c=i.map(f=>({tag:f})),d=o.map(f=>{const{key:m,version:p,...g}=f;return{...g,collections:n,tags:c}});return Iv(d,s)},{onSettled:(e=[],n,o,s)=>{const{collections:i,items:c,library:{path:d},tags:f}=o,m=e.reduce((p,g)=>(ov(g)?p.successful.push(g.value.data):p.failed.push(g.reason),p),{successful:[],failed:[]});!n&&m.successful.length>0&&t.invalidateQueries(["items",d],{refetchType:"all"}),Ur({_type:"write",args:{collections:i,items:c,tags:f},data:m,error:n,library:d})}})},Bp=()=>{const t=Xo();return Wf(e=>{const{into:n,library:{apikey:o,path:s},tags:i}=e,c=[];return t.getQueriesData(["items",s]).map(f=>(f[1]||{}).data||[]).flat(1).filter(ap).filter(f=>f.data.tags.length>0).forEach(f=>{const m=f.data.tags,p=m.findIndex(b=>b.tag==n&&(b.type==0||!b.type));p>-1&&m.splice(p,1);const g=m.filter(b=>!i.includes(b.tag));g.length<m.length&&(g.push({tag:n,type:0}),c.push({key:f.data.key,version:f.version,tags:g}))}),Iv(c,{apikey:o,path:s})},{onSettled:(e=[],n,o,s)=>{const{into:i,library:{path:c},tags:d}=o,f=e.reduce((m,p)=>(ov(p)?m.successful.push(p.value.data):m.failed.push(p.reason),m),{successful:[],failed:[]});f.successful.length>0&&t.invalidateQueries(["items",c],{refetchType:"all"}),Ur({args:{into:i,tags:d},data:f,error:n,library:c,_type:"tags-modified"})}})},Ww=window.React.useCallback,XI=window.React.useEffect,wy=window.React.useMemo,QI=window.React.useRef,KI=window.Blueprint.Core.Button,Fd=window.Blueprint.Core.Classes,WI=window.Blueprint.Core.Dialog,GI=window.Blueprint.Core.InputGroup,YI=window.Blueprint.Core.MenuDivider,If=window.Blueprint.Core.MenuItem,ZI=window.Blueprint.Core.Tag,JI=window.Blueprint.Core.UL;function eA({handleChange:t,status:e,value:n}){const o=QI(null);return XI(()=>{o?.current?.focus()},[]),u.jsx(GI,{disabled:e=="loading",fill:!0,inputRef:o,onChange:t,placeholder:"Enter a value",value:n})}function tA({disabled:t,library:e,tags:n}){const[o,{on:s,off:i}]=It(!1),[c,d]=hv(""),{mutate:f,status:m}=Bp(),p=Ww(()=>{f({into:c,library:e,tags:n},{onSuccess:()=>i()})},[i,e,f,n,c]);return u.jsxs(u.Fragment,{children:[u.jsx(If,{disabled:t,htmlTitle:"Choose custom value...",intent:"primary",multiline:!0,onClick:s,shouldDismissPopover:!1,text:"Choose custom value..."}),u.jsxs(WI,{isOpen:o,lazy:!0,onClose:i,children:[u.jsxs("div",{className:Fd.DIALOG_BODY,children:["The following tags will be merged :",u.jsx(JI,{children:n.map(g=>u.jsx("li",{children:g},g))}),u.jsx(eA,{handleChange:d,status:m,value:c})]}),u.jsx("div",{className:Fd.DIALOG_FOOTER,children:u.jsx("div",{className:Fd.DIALOG_FOOTER_ACTIONS,children:u.jsx(KI,{disabled:c.length==0,loading:m=="loading",minimal:!0,onClick:p,text:"OK",title:"Confirm modification of tag(s)"})})})]})]})}function Gw({library:t,options:e}){const{roam:n=[],zotero:o=[]}=e,s=wy(()=>[...n,...o],[n,o]),{mutate:i,status:c}=Bp(),d=wy(()=>["error","success","loading"].includes(c),[c]),f=Ww(m=>{i({into:m,library:t,tags:s})},[t,i,s]);return u.jsxs(u.Fragment,{children:[n.map(m=>u.jsx(If,{disabled:d,labelElement:u.jsx(ZI,{intent:"success",minimal:!0,children:"In Roam"}),multiline:!0,onClick:()=>f(m),text:m},m)),o.map(m=>u.jsx(If,{disabled:d,multiline:!0,onClick:()=>f(m),text:m},m)),u.jsx(YI,{}),u.jsx(tA,{disabled:["error","success","loading"].includes(c),library:t,tags:s})]})}const nA=window.React.useCallback,rA=window.Blueprint.Core.Menu,xy=window.Blueprint.Core.MenuItem;function Yw({deleteTags:t=!0,library:e,mergeAs:n=!0,suggestion:o}){const{mutate:s,status:i}=HI(),c=nA(()=>{s({library:e,tags:[...o.use.roam,...o.use.zotero]})},[o.use,e,s]);return u.jsxs(rA,{className:$.TEXT_SMALL,children:[n&&o.type?u.jsx(xy,{disabled:["loading","success"].includes(i),icon:"group-objects",text:"Merge as",children:u.jsx(Gw,{library:e,options:o.use})}):null,t?u.jsx(xy,{disabled:["loading","success"].includes(i),icon:i=="success"?"tick":"trash",intent:"danger",text:i=="success"?"Deleted":"Delete tag(s)",onClick:c}):null]})}const oA=window.Blueprint.Core.Tag;function aA({text:t,uid:e=null}){return u.jsx(oA,{active:!0,intent:"primary",minimal:!0,multiline:!0,"data-tag-source":"roam","data-tag":t,"data-uid":e,children:t})}const sA=window.Blueprint.Core.Tag;function iA({tagElement:t}){const{tag:e,meta:{numItems:n,type:o=0}}=t;return u.jsx(sA,{active:!0,intent:"warning",minimal:!0,multiline:!1,"data-tag-source":"zotero","data-tag":e,"data-tag-type":o,children:e+" ("+n+")"})}var bs=(t=>(t.ALL="all",t.SUGGESTIONS="suggestions",t))(bs||{}),Af=(t=>(t.ALL="all-items",t.SUGGESTIONS="suggestions",t))(Af||{}),vs=(t=>(t.ALPHABETICAL="alphabetical",t.ROAM="roam",t.USAGE="usage",t))(vs||{});function lA(t){return t.map(e=>({nTags:e.zotero.length,nAuto:e.zotero.length==0?0:e.zotero.filter(n=>n.meta.type==1).length,in_roam:e.roam.length>0?1:0})).reduce((e,n)=>(e.nTags+=n.nTags,e.nAuto+=n.nAuto,e.nRoam+=n.in_roam,e),{nTags:0,nAuto:0,nRoam:0,nTotal:t.length})}function Pf(t,{count_roam:e=!1}={}){return t.zotero.reduce((n,o)=>n+o.meta.numItems,0)+(e?t.roam.length:0)}function Zw(t){return t.zotero.length==1&&(t.roam.length==0||t.roam.length==1&&t.zotero[0].tag==t.roam[0].title)}function Jw(t){const e=t.roam.map(s=>s.title),n=t.zotero.reduce((s,i)=>(e.includes(i.tag)||s.includes(i.tag)||s.push(i.tag),s),[]),o={roam:e,zotero:n};return e.length==0?t.zotero.length==1?{recommend:n[0],type:null,use:o}:n.length==1?{recommend:n[0],type:"auto",use:o}:{recommend:t.zotero.find(s=>s.meta.type==0)?.tag||null,type:"manual",use:o}:e.length==1?n.length==0?{recommend:e[0],type:t.zotero.length==1?null:"auto",use:o}:{recommend:e[0],type:"auto",use:o}:{recommend:null,type:"manual",use:o}}function cA(t){return new Promise(e=>{setTimeout(()=>{const n=Object.keys(t).map(o=>{const s=H_(Array.from(new Set([o,o.toUpperCase()]))).sort((c,d)=>c.title>d.title?-1:1),i=Array.from(t[o]);for(const c of s){const d=i.findIndex(f=>Un(c.title,f.token,{match:"exact"}));if(d>=0){const{roam:f,...m}=i[d];i[d]={roam:[...f,c],...m}}}return i}).flat(1);e(n)},0)})}function uA(t,e=vs.ALPHABETICAL){const n=[...t];switch(e){case"usage":return n.sort((o,s)=>Pf(o)>Pf(s)?-1:1);case"roam":return n.sort((o,s)=>o.roam.length>s.roam.length?-1:1);case"alphabetical":default:return n}}const dA=window.React.memo,Cy=window.Blueprint.Core.Icon,fA=dA(function({entry:e,library:n}){const o=Zw(e),s=Jw(e),i=Pf(e);return u.jsx(Go,{className:"zr-tag-entry","data-token":e.token,"in-graph":(e.roam.length>0).toString(),children:u.jsxs("div",{"zr-role":"item-header",children:[u.jsxs("div",{"zr-role":"item-info",children:[e.roam.length>0?u.jsx(Cy,{htmlTitle:"This tag exists in Roam ("+e.roam.map(c=>c.title).join(", ")+")",icon:"tick-circle",intent:"success",size:14}):u.jsx(Cy,{icon:"blank"}),u.jsx("span",{className:$.TEXT_AUXILIARY,"zr-role":"title",children:e.token}),!o&&u.jsxs("span",{className:$.TEXT_SMALL,"zr-role":"item-additional",children:[e.roam.map(c=>u.jsx(aA,{text:c.title,uid:c.uid},c.title)),e.zotero.map(c=>{const{tag:d,meta:{type:f}}=c;return u.jsx(iA,{tagElement:c},[d,f].join("_"))})]})]}),u.jsx("span",{className:[$.TEXT_SECONDARY,$.TEXT_SMALL].join(" "),"zr-role":"item-count",children:Wt(i,"item")}),u.jsx("div",{"zr-role":"item-actions",children:u.jsx(Yw,{deleteTags:!0,library:n,mergeAs:!0,suggestion:s})})]})})}),pA=fA,hA=window.React.useCallback,mA=window.React.useMemo,zp=window.Blueprint.Core.Button,gA=window.Blueprint.Core.ButtonGroup,Ey=window.Blueprint.Core.Intent,yA=window.Blueprint.Core.Menu;function bA({library:t,suggestion:e}){const{recommend:n,use:o}=e,{mutate:s,status:i}=Bp(),c=hA(()=>{s({into:n,library:t,tags:[...o.roam,...o.zotero]})},[t,s,n,o]),d=mA(()=>i=="error"?{disabled:!0,icon:"warning",intent:Ey.DANGER}:i=="success"?{disabled:!0,icon:"tick",intent:Ey.SUCCESS,text:"Merged"}:{icon:"many-to-one"},[i]);return u.jsx(zp,{active:!0,className:["zr-tag-suggestion--auto-merge",$.TEXT_SMALL].join(" "),intent:"primary",loading:i=="loading",onClick:c,text:"Auto-merge",title:"Suggestion : "+n,...d})}function vA({library:t,suggestion:e}){return u.jsx(Ds,{content:u.jsx(yA,{children:u.jsx(Gw,{library:t,options:e.use})}),interactionKind:"click",popoverClassName:$.POPOVER,children:u.jsx(zp,{className:["zr-tag-suggestion--merge-as",$.TEXT_SMALL].join(" "),intent:"primary",rightIcon:"caret-down",text:"Merge as ..."})})}function wA({entry:t,library:e}){const n=Jw(t);switch(n.type){case"auto":case"manual":return u.jsxs(gA,{minimal:!0,children:[n.type=="auto"&&u.jsx(bA,{library:e,suggestion:n}),n.type=="manual"&&u.jsx(vA,{library:e,suggestion:n}),u.jsx(Ds,{content:u.jsx(Yw,{library:e,mergeAs:n.type=="auto",suggestion:n}),interactionKind:"click",placement:"bottom-start",popoverClassName:$.POPOVER,children:u.jsx(zp,{icon:"more"})})]});case null:default:return null}}const xA=window.React.memo,Sy=window.Blueprint.Core.Icon,CA=window.Blueprint.Core.Tag,EA=xA(function({entry:e,library:n}){return u.jsx(Go,{className:"zr-tag-suggestion","data-token":e.token,"in-graph":(e.roam.length>0).toString(),children:u.jsxs("div",{"zr-role":"item-header",children:[u.jsxs("span",{"zr-role":"item-info",children:[e.roam.length>0?u.jsx(Sy,{htmlTitle:"This tag exists in Roam ("+e.roam.map(o=>o.title).join(", ")+")",icon:"tick-circle",intent:"success",size:14}):u.jsx(Sy,{icon:"blank",size:14}),u.jsx("span",{className:$.TEXT_AUXILIARY,"zr-role":"title",children:e.token})]}),u.jsx(CA,{htmlTitle:e.zotero.map(o=>o.tag).join(" - "),intent:"warning",icon:"tag",minimal:!0,"zr-role":"item-count",children:Wt(e.zotero.length,"tag")}),u.jsx("div",{"zr-role":"item-actions",children:u.jsx(wA,{entry:e,library:n})})]})})}),SA=EA,TA=window.React.memo,Ty=window.Blueprint.Core.ProgressBar,_A=TA(function({stats:e}){if(e){const{nTags:n,nRoam:o,nAuto:s,nTotal:i}=e,c=Math.round(s/n*100)/100,d=Math.round(o/i*100)/100;return u.jsxs("div",{className:[$.TEXT_AUXILIARY,$.TEXT_SMALL].join(" "),"zr-role":"list-stats",children:[u.jsxs("span",{"zr-role":"stats-text",children:["Zotero has ",n," tags, matched in ",i," groups"]}),u.jsxs("span",{"zr-role":"stats-figures",children:[u.jsxs("span",{"zr-role":"stats-bar",children:["Automatic : ",c*100,"%",u.jsx(Ty,{animate:!1,intent:"warning",stripes:!1,value:c})]}),u.jsxs("span",{"zr-role":"stats-bar",children:["In Roam : ",d*100,"%",u.jsx(Ty,{animate:!1,intent:"primary",stripes:!1,value:d})]})]})]})}else return null}),kA=_A,OA=window.React.memo,RA=window.React.useCallback,jA=window.React.useEffect,_y=window.React.useMemo,Ud=window.React.useState,IA=window.Blueprint.Core.NonIdealState,AA=window.Blueprint.Core.Spinner,ky=30,PA=[{icon:"sort-desc",label:"Most Used",value:vs.USAGE},{icon:"sort-alphabetical",label:"Name",value:vs.ALPHABETICAL},{icon:"star",label:"In Roam",value:vs.ROAM}],NA=OA(function({filter:e,items:n,library:o}){const{currentPage:s,pageLimits:i,setCurrentPage:c}=nl({itemsPerPage:ky}),[d,f]=Ud(vs.USAGE),[m,p]=Ud(),[g,b]=Ud();jA(()=>{n&&(cA(n).then(T=>{p(T),b(()=>lA(T))}),c(1))},[n,c]);const v=_y(()=>m?e==bs.SUGGESTIONS?m.filter(T=>!Zw(T)):m:[],[e,m]),w=RA(T=>{f(()=>T),c(1)},[c]),S=_y(()=>uA(v,d),[v,d]);return m==null?u.jsx(AA,{size:15}):u.jsxs("div",{className:"zr-tagmanager--datalist",children:[u.jsxs(mo,{children:[u.jsx(qI,{name:"zr-tagmanager-sort-"+e,onSelect:w,options:PA,selectedOption:d}),u.jsx(il,{currentPage:s,itemsPerPage:ky,nbItems:v.length,setCurrentPage:c})]}),u.jsx("div",{className:"zr-tagmanager--datalist--contents",children:S.length==0?u.jsx(IA,{className:$.TEXT_AUXILIARY,description:"No items to display"}):u.jsx(Yo,{children:S.slice(...i).map(T=>e==bs.SUGGESTIONS?u.jsx(SA,{entry:T,library:o},T.token):u.jsx(pA,{entry:T,library:o},T.token))})}),e==bs.ALL&&u.jsx(kA,{stats:g})]})}),LA=NA,e0=window.React.useCallback,Oy=window.React.useMemo,t0=window.React.useState,n0=window.Blueprint.Core.Spinner,DA=window.Blueprint.Core.Tab,Ry=window.Blueprint.Core.Tabs,MA=[{id:Af.SUGGESTIONS,filterValue:bs.SUGGESTIONS,title:"Suggestions"},{id:Af.ALL,filterValue:bs.ALL,title:"All tags"}];function BA({items:t,libProps:e}){const[n,o]=t0("suggestions"),s=e0((i,c,d)=>o(i),[]);return u.jsxs(Ry,{animate:!1,className:$.TABS_MINIMAL,id:"tag-lists",onChange:s,renderActiveTabPanelOnly:!1,selectedTabId:n,children:[MA.map(i=>u.jsx(DA,{id:i.id,panel:u.jsx(LA,{filter:i.filterValue,items:t,library:e.currentLibrary}),title:i.title},i.id)),u.jsx(Ry.Expander,{}),u.jsx(BI,{libProps:e})]})}function zA({libraries:t}){const[e,n]=t0(t[0]),{isLoading:o,data:s}=Xw([e],{notifyOnChangeProps:["data"],select:f=>f.data})[0],i=Oy(()=>t.map(f=>f.path),[t]),c=e0(f=>n(t.find(m=>m.path==f)),[t]),d=Oy(()=>({currentLibrary:e,onSelect:c,options:i}),[c,i,e]);return u.jsx("div",{children:o?u.jsx(n0,{}):u.jsx(BA,{items:s,libProps:d})})}function $A(){const[{libraries:t}]=Hn(),{data:e,isLoading:n}=Qw(t);return u.jsx(Ln,{children:n?u.jsx(n0,{}):e.length==0?u.jsx(fv,{}):u.jsx(zA,{libraries:e})})}const r0=window.React.memo,FA=window.React.useCallback,UA=window.React.useEffect,qA=window.React.useState,HA=window.Blueprint.Core.Classes,qd=window.Blueprint.Core.Icon,Hd=window.Blueprint.Core.Tab,jy=window.Blueprint.Core.Tabs,Vd={className:"zr-dashboard-tab",panelClassName:"zr-dashboard-panel"},VA=r0(function(e){const{defaultTab:n,onClose:o}=e,[s,i]=qA(n);UA(()=>{i(n)},[n]);const c=FA((d,f,m)=>i(d),[]);return u.jsxs(jy,{animate:!1,className:[$.TABS,"zr-dashboard-tabs-wrapper"].join(" "),id:"zr-dashboard--tabs",onChange:c,selectedTabId:s,vertical:!0,children:[u.jsx(Hd,{id:"recent-items",panel:u.jsx(II,{onClose:o}),title:u.jsxs(u.Fragment,{children:[u.jsx(qd,{htmlTitle:"Recent Items",icon:"history"}),u.jsx("span",{children:"Recent Items"})]}),...Vd}),u.jsx(Hd,{id:"tag-manager",panel:u.jsx($A,{}),title:u.jsxs(u.Fragment,{children:[u.jsx(qd,{htmlTitle:"Tag Manager",icon:"tag"}),u.jsx("span",{children:"Tag Manager"})]}),...Vd}),u.jsx(jy.Expander,{}),u.jsx(Hd,{id:"explorer",panel:u.jsx(mI,{onClose:o}),title:u.jsxs(u.Fragment,{children:[u.jsx(qd,{htmlTitle:"Explorer",icon:"code-block"}),u.jsx("span",{children:"Explorer"})]}),...Vd})]})}),XA=r0(function({isOpen:e,onClose:n}){return u.jsx(Qo,{className:"dashboard",isOpen:e,label:"zoteroRoam Dashboard",onClose:n,children:u.jsx("div",{className:HA.DIALOG_BODY,children:u.jsx("div",{className:"zr-dashboard--main",children:u.jsx(VA,{defaultTab:"recent-items",onClose:n})})})})});var Zt=(t=>(t.DISABLED="disabled",t.OFF="off",t.ON="on",t))(Zt||{});const o0=window.React.memo,a0=window.React.useCallback,QA=window.React.useEffect,ps=window.React.useMemo,Nf=window.Blueprint.Core.Button,KA=window.Blueprint.Core.Classes,Iy=window.Blueprint.Core.Divider,Ay=window.Blueprint.Core.Icon,Xd=window.Blueprint.Core.Intent,WA=window.Blueprint.Core.Menu,ki=window.Blueprint.Core.MenuItem,GA=window.Blueprint.Core.Spinner,YA=window.Blueprint.Core.Switch,$p=window.Blueprint.Core.Tag,ZA=u.jsx($p,{intent:"primary",minimal:!0,children:"Beta"}),JA=u.jsx($p,{intent:"success",minimal:!0,children:"NEW"}),Py=()=>document.getElementsByTagName("body")[0].getAttribute("zr-dark-theme")=="true";function eP(){const[{darkTheme:t}]=al(),[e,{set:n,toggle:o}]=It(t),s=a0(()=>{const i=Py();document.getElementsByTagName("body")[0].setAttribute("zr-dark-theme",(!i).toString()),o()},[o]);return QA(()=>{n(Py())},[n]),u.jsx(YA,{alignIndicator:"right",checked:e,inline:!1,label:"Dark Theme",onChange:s})}const tP=o0(function(){const{version:e}=pu();return u.jsxs("div",{className:"zr-icon-tooltip-footer",children:[u.jsx(eP,{}),u.jsxs("span",{className:"zr-icon-tooltip-footer--row",children:[u.jsx("a",{href:"https://alix-lahuec.gitbook.io/zotero-roam/",target:"_blank",rel:"noreferrer",children:"Docs"}),u.jsxs($p,{className:"zr-version-tag",children:["v",e]})]})]})});function nP(t){const{queries:e}=t,n=e.map(g=>g.dataUpdatedAt).filter(St),o=n.length>0?u.jsx("span",{"zr-role":"timestamp",children:Fi(Math.max(...n))}):null,s=e.some(g=>g.isFetching),i=e.every(g=>g.isSuccess),c=e.some(g=>g.isLoadingError),d=e.some(g=>g.isRefetchError),f=a0(()=>{e.forEach(g=>{g.refetch()})},[e]);let m="blank",p={};return i?(m="tick",p={intent:Xd.SUCCESS,color:"#00e676",title:"The last update was successful"}):c?(m="delete",p={intent:Xd.DANGER,title:"The extension was unable to retrieve the data"}):d&&(m="error",p={intent:Xd.WARNING,title:"The last update was unsuccessful"}),u.jsxs("span",{"zr-role":"status",children:[o,s?u.jsx(GA,{size:16}):u.jsx(Ay,{size:16,icon:m,...p}),u.jsx(Nf,{minimal:!0,onClick:f,disabled:s,title:"Refresh data",children:u.jsx(Ay,{size:16,icon:"refresh"})})]})}function rP(t){const{queries:e}=t;return u.jsx("ul",{className:KA.LIST_UNSTYLED,children:Object.keys(e).map(n=>u.jsxs("li",{className:"zr-queries-status",children:[u.jsx("span",{"zr-role":"entry",children:n}),u.jsx(nP,{queries:e[n]})]},n))})}const oP=o0(function(e){const{openDashboard:n,openLogger:o,openSearchPanel:s,openSettingsPanel:i,status:c,toggleExtension:d}=e,[{apiKeys:f,dataRequests:m,libraries:p}]=Hn(),g=ps(()=>({enabled:c==Zt.ON,notifyOnChangeProps:["dataUpdatedAt","status","isFetching"]}),[c]),b=yo(m,g),v=Vw(f,g),w=Xw(p,g),S=Hw(p,g),T=[...v,...b,...w,...S].some(H=>H.isLoading),R=[...v,...b,...w,...S].some(H=>H.fetchStatus=="fetching"),L=[...v,...b,...w,...S].some(H=>H.isLoadingError),q=b.some(H=>H.data),Q=ps(()=>L?"error":T&&R?"loading":"ready",[R,T,L]),ee=ps(()=>c==Zt.DISABLED?"warning-sign":L?"issue":"manual",[L,c]),D=ps(()=>({Permissions:v,Collections:S,Tags:w,Items:b}),[S,b,v,w]),A=ps(()=>u.jsxs(u.Fragment,{children:[u.jsxs("span",{children:[u.jsx("strong",{children:"Status : "})," ",c]}),c==Zt.DISABLED&&u.jsx(Nf,{"aria-haspopup":"dialog",icon:"warning-sign",intent:"warning",minimal:!0,onClick:i,text:"Click to finish setting up zoteroRoam",title:"Click to open zoteroRoam settings"}),u.jsx(Iy,{}),c==Zt.ON?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"zr-icon-tooltip-body",children:u.jsx(rP,{queries:D})}),u.jsx(Iy,{})]}):null,u.jsx(tP,{})]}),[i,D,c]),P=ps(()=>u.jsxs(WA,{children:[u.jsx(ki,{text:"Settings",icon:"settings",onClick:i}),u.jsx(ki,{disabled:!q,text:"Dashboard",icon:"dashboard",labelElement:ZA,onClick:n}),u.jsx(ki,{disabled:!q,text:"Search in library",icon:"search",onClick:s}),u.jsx(ki,{text:"View logs",icon:"console",onClick:o}),u.jsx(ki,{text:"Roadmap",icon:"map-create",href:"https://alix.canny.io/zoteroroam",target:"_blank",labelElement:JA})]}),[q,n,o,s,i]);return u.jsx(Ow,{popoverClassName:"zr-icon-tooltip",usePortal:!1,content:A,placement:"auto",interactionKind:"hover",hoverOpenDelay:450,hoverCloseDelay:450,children:u.jsx(Rw,{content:P,children:u.jsx(Nf,{id:"zotero-roam-icon","data-extension-status":c,"data-fetching-status":Q,disabled:c==Zt.DISABLED,icon:ee,minimal:!0,small:!0,onClick:d,"aria-haspopup":"true",title:c==Zt.DISABLED?"zoteroRoam is disabled":"Click to toggle the zoteroRoam extension"})})})});Array.prototype.find||(Array.prototype.find=function(t){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof t!="function")throw new TypeError("predicate must be a function");for(var e=Object(this),n=e.length>>>0,o=arguments[1],s,i=0;i<n;i++)if(s=e[i],t.call(o,s,i,e))return s});if(window&&typeof window.CustomEvent!="function"){let t=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),o};typeof window.Event<"u"&&(t.prototype=window.Event.prototype),window.CustomEvent=t}class Xc{constructor(e){this.tribute=e,this.tribute.events=this}static keys(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}bind(e){e.boundKeydown=this.keydown.bind(e,this),e.boundKeyup=this.keyup.bind(e,this),e.boundInput=this.input.bind(e,this),e.addEventListener("keydown",e.boundKeydown,!1),e.addEventListener("keyup",e.boundKeyup,!1),e.addEventListener("input",e.boundInput,!1)}unbind(e){e.removeEventListener("keydown",e.boundKeydown,!1),e.removeEventListener("keyup",e.boundKeyup,!1),e.removeEventListener("input",e.boundInput,!1),delete e.boundKeydown,delete e.boundKeyup,delete e.boundInput}keydown(e,n){e.shouldDeactivate(n)&&(e.tribute.isActive=!1,e.tribute.hideMenu());let o=this;e.commandEvent=!1,Xc.keys().forEach(s=>{s.key===n.keyCode&&(e.commandEvent=!0,e.callbacks()[s.value.toLowerCase()](n,o))})}input(e,n){e.inputEvent=!0,e.keyup.call(this,e,n)}click(e,n){let o=e.tribute;if(o.menu&&o.menu.contains(n.target)){let s=n.target;for(n.preventDefault(),n.stopPropagation();s.nodeName.toLowerCase()!=="li";)if(s=s.parentNode,!s||s===o.menu)throw new Error("cannot find the <li> container for the click");o.selectItemAtIndex(s.getAttribute("data-index"),n),o.hideMenu()}else o.current.element&&!o.current.externalTrigger&&(o.current.externalTrigger=!1,setTimeout(()=>o.hideMenu()))}keyup(e,n){if(e.inputEvent&&(e.inputEvent=!1),e.updateSelection(this),n.keyCode!==27){if(!e.tribute.allowSpaces&&e.tribute.hasTrailingSpace){e.tribute.hasTrailingSpace=!1,e.commandEvent=!0,e.callbacks().space(n,this);return}if(!e.tribute.isActive)if(e.tribute.autocompleteMode)e.callbacks().triggerChar(n,this,"");else{let o=e.getKeyCode(e,this,n);if(isNaN(o)||!o)return;let s=e.tribute.triggers().find(i=>i.charCodeAt(0)===o);typeof s<"u"&&e.callbacks().triggerChar(n,this,s)}e.tribute.current.mentionText.length<e.tribute.current.collection.menuShowMinLength||((e.tribute.current.trigger||e.tribute.autocompleteMode)&&e.commandEvent===!1||e.tribute.isActive&&n.keyCode===8)&&e.tribute.showMenuFor(this,!0)}}shouldDeactivate(e){if(!this.tribute.isActive)return!1;if(this.tribute.current.mentionText.length===0){let n=!1;return Xc.keys().forEach(o=>{e.keyCode===o.key&&(n=!0)}),!n}return!1}getKeyCode(e,n,o){let s=e.tribute,i=s.range.getTriggerInfo(!1,s.hasTrailingSpace,!0,s.allowSpaces,s.autocompleteMode);return i?i.mentionTriggerChar.charCodeAt(0):!1}updateSelection(e){this.tribute.current.element=e;let n=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);n&&(this.tribute.current.selectedPath=n.mentionSelectedPath,this.tribute.current.mentionText=n.mentionText,this.tribute.current.selectedOffset=n.mentionSelectedOffset)}callbacks(){return{triggerChar:(e,n,o)=>{let s=this.tribute;s.current.trigger=o;let i=s.collection.find(c=>c.trigger===o);s.current.collection=i,s.current.mentionText.length>=s.current.collection.menuShowMinLength&&s.inputEvent&&s.showMenuFor(n,!0)},enter:(e,n)=>{this.tribute.isActive&&this.tribute.current.filteredItems&&(e.preventDefault(),e.stopPropagation(),setTimeout(()=>{this.tribute.selectItemAtIndex(this.tribute.menuSelected,e),this.tribute.hideMenu()},0))},escape:(e,n)=>{this.tribute.isActive&&(e.preventDefault(),e.stopPropagation(),this.tribute.isActive=!1,this.tribute.hideMenu())},tab:(e,n)=>{this.callbacks().enter(e,n)},space:(e,n)=>{this.tribute.isActive&&(this.tribute.spaceSelectsMatch?this.callbacks().enter(e,n):this.tribute.allowSpaces||(e.stopPropagation(),setTimeout(()=>{this.tribute.hideMenu(),this.tribute.isActive=!1},0)))},up:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let o=this.tribute.current.filteredItems.length,s=this.tribute.menuSelected;o>s&&s>0?(this.tribute.menuSelected--,this.setActiveLi()):s===0&&(this.tribute.menuSelected=o-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight)}},down:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let o=this.tribute.current.filteredItems.length-1,s=this.tribute.menuSelected;o>s?(this.tribute.menuSelected++,this.setActiveLi()):o===s&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0)}},delete:(e,n)=>{this.tribute.isActive&&this.tribute.current.mentionText.length<1?this.tribute.hideMenu():this.tribute.isActive&&this.tribute.showMenuFor(n)}}}setActiveLi(e){let n=this.tribute.menu.querySelectorAll("li"),o=n.length>>>0;e&&(this.tribute.menuSelected=parseInt(e));for(let s=0;s<o;s++){let i=n[s];if(s===this.tribute.menuSelected){i.classList.add(this.tribute.current.collection.selectClass);let c=i.getBoundingClientRect(),d=this.tribute.menu.getBoundingClientRect();if(c.bottom>d.bottom){let f=c.bottom-d.bottom;this.tribute.menu.scrollTop+=f}else if(c.top<d.top){let f=d.top-c.top;this.tribute.menu.scrollTop-=f}}else i.classList.remove(this.tribute.current.collection.selectClass)}}getFullHeight(e,n){let o=e.getBoundingClientRect().height;if(n){let s=e.currentStyle||window.getComputedStyle(e);return o+parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return o}}class aP{constructor(e){this.tribute=e,this.tribute.menuEvents=this,this.menu=this.tribute.menu}bind(e){this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.showMenuFor(this.tribute.current.element,!1)},300,!1),this.windowResizeEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.range.positionMenuAtCaret(!0)},300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}unbind(e){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}debounce(e,n,o){var s;return()=>{var i=this,c=arguments,d=()=>{s=null,o||e.apply(i,c)},f=o&&!s;clearTimeout(s),s=setTimeout(d,n),f&&e.apply(i,c)}}}class sP{constructor(e){this.tribute=e,this.tribute.range=this}getDocument(){let e;return this.tribute.current.collection&&(e=this.tribute.current.collection.iframe),e?e.contentWindow.document:document}positionMenuAtCaret(e){let n=this.tribute.current,o,s=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(typeof s<"u"){if(!this.tribute.positionMenu){this.tribute.menu.style.cssText="display: block;";return}this.isContentEditable(n.element)?o=this.getContentEditableCaretPosition(s.mentionPosition):o=this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,s.mentionPosition),this.tribute.menu.style.cssText=`top: ${o.top}px;
                                     left: ${o.left}px;
                                     right: ${o.right}px;
                                     bottom: ${o.bottom}px;
                                     position: absolute;
                                     display: block;`,o.left==="auto"&&(this.tribute.menu.style.left="auto"),o.top==="auto"&&(this.tribute.menu.style.top="auto"),e&&this.scrollIntoView(),window.setTimeout(()=>{let i={width:this.tribute.menu.offsetWidth,height:this.tribute.menu.offsetHeight},c=this.isMenuOffScreen(o,i),d=window.innerWidth>i.width&&(c.left||c.right),f=window.innerHeight>i.height&&(c.top||c.bottom);(d||f)&&(this.tribute.menu.style.cssText="display: none",this.positionMenuAtCaret(e))},0)}else this.tribute.menu.style.cssText="display: none"}get menuContainerIsBody(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}selectElement(e,n,o){let s,i=e;if(n)for(var c=0;c<n.length;c++){if(i=i.childNodes[n[c]],i===void 0)return;for(;i.length<o;)o-=i.length,i=i.nextSibling;i.childNodes.length===0&&!i.length&&(i=i.previousSibling)}let d=this.getWindowSelection();s=this.getDocument().createRange(),s.setStart(i,o),s.setEnd(i,o),s.collapse(!0);try{d.removeAllRanges()}catch{}d.addRange(s),e.focus()}replaceTriggerText(e,n,o,s,i){let c=this.getTriggerInfo(!0,o,n,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(c!==void 0){let d=this.tribute.current,f=new CustomEvent("tribute-replaced",{detail:{item:i,instance:d,context:c,event:s}});if(this.isContentEditable(d.element)){let m=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:"";e+=m;let p=c.mentionPosition+c.mentionText.length;this.tribute.autocompleteMode||(p+=c.mentionTriggerChar.length),this.pasteHtml(e,c.mentionPosition,p)}else{let m=this.tribute.current.element,p=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:" ";e+=p;let g=c.mentionPosition,b=c.mentionPosition+c.mentionText.length+p.length;this.tribute.autocompleteMode||(b+=c.mentionTriggerChar.length-1),m.value=m.value.substring(0,g)+e+m.value.substring(b,m.value.length),m.selectionStart=g+e.length,m.selectionEnd=g+e.length}d.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),d.element.dispatchEvent(f)}}pasteHtml(e,n,o){let s,i;i=this.getWindowSelection(),s=this.getDocument().createRange(),s.setStart(i.anchorNode,n),s.setEnd(i.anchorNode,o),s.deleteContents();let c=this.getDocument().createElement("div");c.innerHTML=e;let d=this.getDocument().createDocumentFragment(),f,m;for(;f=c.firstChild;)m=d.appendChild(f);s.insertNode(d),m&&(s=s.cloneRange(),s.setStartAfter(m),s.collapse(!0),i.removeAllRanges(),i.addRange(s))}getWindowSelection(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}getNodePositionInParent(e){if(e.parentNode===null)return 0;for(var n=0;n<e.parentNode.childNodes.length;n++)if(e.parentNode.childNodes[n]===e)return n}getContentEditableSelectedPath(e){let n=this.getWindowSelection(),o=n.anchorNode,s=[],i;if(o!=null){let c,d=o.contentEditable;for(;o!==null&&d!=="true";)c=this.getNodePositionInParent(o),s.push(c),o=o.parentNode,o!==null&&(d=o.contentEditable);return s.reverse(),i=n.getRangeAt(0).startOffset,{selected:o,path:s,offset:i}}}getTextPrecedingCurrentSelection(){let e=this.tribute.current,n="";if(this.isContentEditable(e.element)){let o=this.getWindowSelection().anchorNode;if(o!=null){let s=o.textContent,i=this.getWindowSelection().getRangeAt(0).startOffset;s&&i>=0&&(n=s.substring(0,i))}}else{let o=this.tribute.current.element;if(o){let s=o.selectionStart;o.value&&s>=0&&(n=o.value.substring(0,s))}}return n}getLastWordInText(e){e=e.replace(/\u00A0/g," ");let n=e.split(/\s+/),o=n.length-1;return n[o].trim()}getTriggerInfo(e,n,o,s,i){let c=this.tribute.current,d,f,m;if(!this.isContentEditable(c.element))d=this.tribute.current.element;else{let b=this.getContentEditableSelectedPath(c);b&&(d=b.selected,f=b.path,m=b.offset)}let p=this.getTextPrecedingCurrentSelection(),g=this.getLastWordInText(p);if(i)return{mentionPosition:p.length-g.length,mentionText:g,mentionSelectedElement:d,mentionSelectedPath:f,mentionSelectedOffset:m};if(p!=null){let b=-1,v;if(this.tribute.collection.forEach(w=>{let S=w.trigger,T=w.requireLeadingSpace?this.lastIndexWithLeadingSpace(p,S):p.lastIndexOf(S);T>b&&(b=T,v=S,o=w.requireLeadingSpace)}),b>=0&&(b===0||!o||/[\xA0\s]/g.test(p.substring(b-1,b)))){let w=p.substring(b+v.length,p.length);v=p.substring(b,b+v.length);let S=w.substring(0,1),T=w.length>0&&(S===" "||S==="");n&&(w=w.trim());let R=s?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=R.test(w),!T&&(e||!R.test(w)))return{mentionPosition:b,mentionText:w,mentionSelectedElement:d,mentionSelectedPath:f,mentionSelectedOffset:m,mentionTriggerChar:v}}}}lastIndexWithLeadingSpace(e,n){let o=e.split("").reverse().join(""),s=-1;for(let i=0,c=e.length;i<c;i++){let d=i===e.length-1,f=/\s/.test(o[i+1]),m=!0;for(let p=n.length-1;p>=0;p--)if(n[p]!==o[i-p]){m=!1;break}if(m&&(d||f)){s=e.length-1-i;break}}return s}isContentEditable(e){return e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"}isMenuOffScreen(e,n){let o=window.innerWidth,s=window.innerHeight,i=document.documentElement,c=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),d=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),f=typeof e.top=="number"?e.top:d+s-e.bottom-n.height,m=typeof e.right=="number"?e.right:e.left+n.width,p=typeof e.bottom=="number"?e.bottom:e.top+n.height,g=typeof e.left=="number"?e.left:c+o-e.right-n.width;return{top:f<Math.floor(d),right:m>Math.ceil(c+o),bottom:p>Math.ceil(d+s),left:g<Math.floor(c)}}getMenuDimensions(){let e={width:null,height:null};return this.tribute.menu.style.cssText=`top: 0px;
                                 left: 0px;
                                 position: fixed;
                                 display: block;
                                 visibility; hidden;`,e.width=this.tribute.menu.offsetWidth,e.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",e}getTextAreaOrInputUnderlinePosition(e,n,o){let s=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],i=window.mozInnerScreenX!==null,c=this.getDocument().createElement("div");c.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(c);let d=c.style,f=window.getComputedStyle?getComputedStyle(e):e.currentStyle;d.whiteSpace="pre-wrap",e.nodeName!=="INPUT"&&(d.wordWrap="break-word"),d.position="absolute",d.visibility="hidden",s.forEach(D=>{d[D]=f[D]}),i?(d.width=`${parseInt(f.width)-2}px`,e.scrollHeight>parseInt(f.height)&&(d.overflowY="scroll")):d.overflow="hidden",c.textContent=e.value.substring(0,n),e.nodeName==="INPUT"&&(c.textContent=c.textContent.replace(/\s/g,""));let m=this.getDocument().createElement("span");m.textContent=e.value.substring(n)||".",c.appendChild(m);let p=e.getBoundingClientRect(),g=document.documentElement,b=(window.pageXOffset||g.scrollLeft)-(g.clientLeft||0),v=(window.pageYOffset||g.scrollTop)-(g.clientTop||0),w=0,S=0;this.menuContainerIsBody&&(w=p.top,S=p.left);let T={top:w+v+m.offsetTop+parseInt(f.borderTopWidth)+parseInt(f.fontSize)-e.scrollTop,left:S+b+m.offsetLeft+parseInt(f.borderLeftWidth)},R=window.innerWidth,L=window.innerHeight,q=this.getMenuDimensions(),Q=this.isMenuOffScreen(T,q);Q.right&&(T.right=R-T.left,T.left="auto");let ee=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(Q.bottom){let D=this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect(),A=ee-(L-D.top);T.bottom=A+(L-p.top-m.offsetTop),T.top="auto"}return Q=this.isMenuOffScreen(T,q),Q.left&&(T.left=R>q.width?b+R-q.width:b,delete T.right),Q.top&&(T.top=L>q.height?v+L-q.height:v,delete T.bottom),this.getDocument().body.removeChild(c),T}getContentEditableCaretPosition(e){let n,o=this.getWindowSelection();n=this.getDocument().createRange(),n.setStart(o.anchorNode,e),n.setEnd(o.anchorNode,e),n.collapse(!1);let s=n.getBoundingClientRect(),i=document.documentElement,c=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),d=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),f=s.left,m=s.top,p={left:f+c,top:m+s.height+d},g=window.innerWidth,b=window.innerHeight,v=this.getMenuDimensions(),w=this.isMenuOffScreen(p,v);w.right&&(p.left="auto",p.right=g-s.left-c);let S=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(w.bottom){let T=this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect(),R=S-(b-T.top);p.top="auto",p.bottom=R+(b-s.top)}return w=this.isMenuOffScreen(p,v),w.left&&(p.left=g>v.width?c+g-v.width:c,delete p.right),w.top&&(p.top=b>v.height?d+b-v.height:d,delete p.bottom),this.menuContainerIsBody||(p.left=p.left?p.left-this.tribute.menuContainer.offsetLeft:p.left,p.top=p.top?p.top-this.tribute.menuContainer.offsetTop:p.top),p}scrollIntoView(e){let n=20,o,s=100,i=this.menu;if(typeof i>"u")return;for(;o===void 0||o.height===0;)if(o=i.getBoundingClientRect(),o.height===0&&(i=i.childNodes[0],i===void 0||!i.getBoundingClientRect))return;let c=o.top,d=c+o.height;if(c<0)window.scrollTo(0,window.pageYOffset+o.top-n);else if(d>window.innerHeight){let f=window.pageYOffset+o.top-n;f-window.pageYOffset>s&&(f=window.pageYOffset+s);let m=window.pageYOffset-(window.innerHeight-d);m>f&&(m=f),window.scrollTo(0,m)}}}class iP{constructor(e){this.tribute=e,this.tribute.search=this}simpleFilter(e,n){return n.filter(o=>this.test(e,o))}test(e,n){return this.match(e,n)!==null}match(e,n,o){o=o||{},n.length;let s=o.pre||"",i=o.post||"",c=o.caseSensitive&&n||n.toLowerCase();if(o.skip)return{rendered:n,score:0};e=o.caseSensitive&&e||e.toLowerCase();let d=this.traverse(c,e,0,0,[]);return d?{rendered:this.render(n,d.cache,s,i),score:d.score}:null}traverse(e,n,o,s,i){if(n.length===s)return{score:this.calculateScore(i),cache:i.slice()};if(e.length===o||n.length-s>e.length-o)return;let c=n[s],d=e.indexOf(c,o),f,m;for(;d>-1;){if(i.push(d),m=this.traverse(e,n,d+1,s+1,i),i.pop(),!m)return f;(!f||f.score<m.score)&&(f=m),d=e.indexOf(c,d+1)}return f}calculateScore(e){let n=0,o=1;return e.forEach((s,i)=>{i>0&&(e[i-1]+1===s?o+=o+1:o=1),n+=o}),n}render(e,n,o,s){var i=e.substring(0,n[0]);return n.forEach((c,d)=>{i+=o+e[c]+s+e.substring(c+1,n[d+1]?n[d+1]:e.length)}),i}filter(e,n,o){return o=o||{},n.reduce((s,i,c,d)=>{let f=i;o.extract&&(f=o.extract(i),f||(f=""));let m=this.match(e,f,o);return m!=null&&(s[s.length]={string:m.rendered,score:m.score,index:c,original:i}),s},[]).sort((s,i)=>{let c=i.score-s.score;return c||s.index-i.index})}}class va{constructor({values:e=null,iframe:n=null,selectClass:o="highlight",containerClass:s="tribute-container",itemClass:i="",trigger:c="@",autocompleteMode:d=!1,selectTemplate:f=null,menuItemTemplate:m=null,lookup:p="key",fillAttr:g="value",collection:b=null,menuContainer:v=null,noMatchTemplate:w=null,requireLeadingSpace:S=!0,allowSpaces:T=!1,replaceTextSuffix:R=null,positionMenu:L=!0,spaceSelectsMatch:q=!1,searchOpts:Q={},menuItemLimit:ee=null,menuShowMinLength:D=0}){if(this.autocompleteMode=d,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=v,this.allowSpaces=T,this.replaceTextSuffix=R,this.positionMenu=L,this.hasTrailingSpace=!1,this.spaceSelectsMatch=q,this.autocompleteMode&&(c="",T=!1),e)this.collection=[{trigger:c,iframe:n,selectClass:o,containerClass:s,itemClass:i,selectTemplate:(f||va.defaultSelectTemplate).bind(this),menuItemTemplate:(m||va.defaultMenuItemTemplate).bind(this),noMatchTemplate:(A=>typeof A=="string"?A.trim()===""?null:A:typeof A=="function"?A.bind(this):w||function(){return"<li>No Match Found!</li>"}.bind(this))(w),lookup:p,fillAttr:g,values:e,requireLeadingSpace:S,searchOpts:Q,menuItemLimit:ee,menuShowMinLength:D}];else if(b)this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=b.map(A=>({trigger:A.trigger||c,iframe:A.iframe||n,selectClass:A.selectClass||o,containerClass:A.containerClass||s,itemClass:A.itemClass||i,selectTemplate:(A.selectTemplate||va.defaultSelectTemplate).bind(this),menuItemTemplate:(A.menuItemTemplate||va.defaultMenuItemTemplate).bind(this),noMatchTemplate:(P=>typeof P=="string"?P.trim()===""?null:P:typeof P=="function"?P.bind(this):w||function(){return"<li>No Match Found!</li>"}.bind(this))(w),lookup:A.lookup||p,fillAttr:A.fillAttr||g,values:A.values,requireLeadingSpace:A.requireLeadingSpace,searchOpts:A.searchOpts||Q,menuItemLimit:A.menuItemLimit||ee,menuShowMinLength:A.menuShowMinLength||D}));else throw new Error("[Tribute] No collection specified.");new sP(this),new Xc(this),new aP(this),new iP(this)}get isActive(){return this._isActive}set isActive(e){if(this._isActive!=e&&(this._isActive=e,this.current.element)){let n=new CustomEvent(`tribute-active-${e}`);this.current.element.dispatchEvent(n)}}static defaultSelectTemplate(e){return typeof e>"u"?`${this.current.collection.trigger}${this.current.mentionText}`:this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+e.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+e.original[this.current.collection.fillAttr]}static defaultMenuItemTemplate(e){return e.string}static inputTypes(){return["TEXTAREA","INPUT"]}triggers(){return this.collection.map(e=>e.trigger)}attach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let o=e.length;for(var n=0;n<o;++n)this._attach(e[n])}else this._attach(e)}_attach(e){e.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+e.nodeName),this.ensureEditable(e),this.events.bind(e),e.setAttribute("data-tribute",!0)}ensureEditable(e){if(va.inputTypes().indexOf(e.nodeName)===-1)if(e.contentEditable)e.contentEditable=!0;else throw new Error("[Tribute] Cannot bind to "+e.nodeName)}createMenu(e){let n=this.range.getDocument().createElement("div"),o=this.range.getDocument().createElement("ul");return n.className=e,n.appendChild(o),this.menuContainer?this.menuContainer.appendChild(n):this.range.getDocument().body.appendChild(n)}showMenuFor(e,n){if(this.isActive&&this.current.element===e&&this.current.mentionText===this.currentMentionTextSnapshot)return;this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),e.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");const o=s=>{if(!this.isActive)return;let i=this.search.filter(this.current.mentionText,s,{pre:this.current.collection.searchOpts.pre||"<span>",post:this.current.collection.searchOpts.post||"</span>",skip:this.current.collection.searchOpts.skip,extract:f=>{if(typeof this.current.collection.lookup=="string")return f[this.current.collection.lookup];if(typeof this.current.collection.lookup=="function")return this.current.collection.lookup(f,this.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});this.current.collection.menuItemLimit&&(i=i.slice(0,this.current.collection.menuItemLimit)),this.current.filteredItems=i;let c=this.menu.querySelector("ul");if(this.range.positionMenuAtCaret(n),!i.length){let f=new CustomEvent("tribute-no-match",{detail:this.menu});this.current.element.dispatchEvent(f),typeof this.current.collection.noMatchTemplate=="function"&&!this.current.collection.noMatchTemplate()||!this.current.collection.noMatchTemplate?this.hideMenu():typeof this.current.collection.noMatchTemplate=="function"?c.innerHTML=this.current.collection.noMatchTemplate():c.innerHTML=this.current.collection.noMatchTemplate;return}c.innerHTML="";let d=this.range.getDocument().createDocumentFragment();i.forEach((f,m)=>{let p=this.range.getDocument().createElement("li");p.setAttribute("data-index",m),p.className=this.current.collection.itemClass,p.addEventListener("mousemove",g=>{let[b,v]=this._findLiTarget(g.target);g.movementY!==0&&this.events.setActiveLi(v)}),this.menuSelected===m&&p.classList.add(this.current.collection.selectClass),p.innerHTML=this.current.collection.menuItemTemplate(f),d.appendChild(p)}),c.appendChild(d)};typeof this.current.collection.values=="function"?this.current.collection.values(this.current.mentionText,o):o(this.current.collection.values)}_findLiTarget(e){if(!e)return[];const n=e.getAttribute("data-index");return n?[e,n]:this._findLiTarget(e.parentNode)}showMenuForCollection(e,n){e!==document.activeElement&&this.placeCaretAtEnd(e),this.current.collection=this.collection[n||0],this.current.externalTrigger=!0,this.current.element=e,e.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(e,this.current.collection.trigger),this.showMenuFor(e)}placeCaretAtEnd(e){if(e.focus(),typeof window.getSelection<"u"&&typeof document.createRange<"u"){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(n)}else if(typeof document.body.createTextRange<"u"){var s=document.body.createTextRange();s.moveToElementText(e),s.collapse(!1),s.select()}}insertTextAtCursor(e){var n,o;n=window.getSelection(),o=n.getRangeAt(0),o.deleteContents();var s=document.createTextNode(e);o.insertNode(s),o.selectNodeContents(s),o.collapse(!1),n.removeAllRanges(),n.addRange(o)}insertAtCaret(e,n){var o=e.scrollTop,s=e.selectionStart,i=e.value.substring(0,s),c=e.value.substring(e.selectionEnd,e.value.length);e.value=i+n+c,s=s+n.length,e.selectionStart=s,e.selectionEnd=s,e.focus(),e.scrollTop=o}hideMenu(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}selectItemAtIndex(e,n){if(e=parseInt(e),typeof e!="number"||isNaN(e))return;let o=this.current.filteredItems[e],s=this.current.collection.selectTemplate(o);s!==null&&this.replaceText(s,n,o)}replaceText(e,n,o){this.range.replaceTriggerText(e,!0,!0,n,o)}_append(e,n,o){if(typeof e.values=="function")throw new Error("Unable to append to values, as it is a function.");o?e.values=n:e.values=e.values.concat(n)}append(e,n,o){let s=parseInt(e);if(typeof s!="number")throw new Error("please provide an index for the collection to update.");let i=this.collection[s];this._append(i,n,o)}appendCurrent(e,n){if(this.isActive)this._append(this.current.collection,e,n);else throw new Error("No active state. Please use append instead and pass an index.")}detach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let o=e.length;for(var n=0;n<o;++n)this._detach(e[n])}else this._detach(e)}_detach(e){this.events.unbind(e),e.tributeMenu&&this.menuEvents.unbind(e.tributeMenu),setTimeout(()=>{e.removeAttribute("data-tribute"),this.isActive=!1,e.tributeMenu&&e.tributeMenu.remove()})}}const lP=window.React.memo,s0=window.React.useCallback,cP=window.React.useEffect,Ac=window.React.useMemo,i0="display",uP={selectClass:$.TRIBUTE_SELECTED,containerClass:$.TRIBUTE,lookup:i0,menuShowMinLength:1,menuItemLimit:25,menuItemTemplate:t=>{const{itemType:e,display:n}=t.original;return`
        <span data-item-type="${e}"></span>
        <span class="${$.TRIBUTE_DETAILS}">${n}</span>
        `},noMatchTemplate:function(){return'<span style:"visibility: hidden;"></span>'},requireLeadingSpace:!0,selectTemplate:t=>t.original.value,searchOpts:{pre:"<span>",post:"</span>",skip:!0}},dP=(t,e="citekey",n="citekey")=>{const o=s0(c=>c.data?c.data.filter(ap).sort((d,f)=>d.data.dateModified>f.data.dateModified?-1:1).map(d=>({key:d.key,itemType:d.data.itemType,source:"zotero",value:vf(d,e,{accent_class:$.TEXT_ACCENT_1})||d.key,display:vf(d,n,{accent_class:$.TEXT_ACCENT_1})||d.key})):[],[n,e]),s=yo(t,{select:o,notifyOnChangeProps:["data"]});return Ac(()=>s.map(c=>c.data||[]).flat(1),[s])},fP=lP(function(){const[{dataRequests:e}]=Hn(),[{trigger:n,display_char:o,display_use:s="preset",display:i="citekey",format_char:c,format_use:d="preset",format:f="citation"}]=hp(),m=Ac(()=>s=="preset"?i:o,[i,o,s]),p=Ac(()=>d=="preset"?f:c,[f,c,d]),g=dP(e,p,m)||[],b=Ac(()=>({trigger:n,...uP,values:(w,S)=>{S(g.filter(T=>T[i0].toLowerCase().includes(w.toLowerCase())))}}),[g,n]),v=s0(()=>{const w=document.querySelector("textarea.rm-block-input");if(!w||w.getAttribute("zotero-tribute")!=null)return;document.querySelectorAll(`.${$.TRIBUTE}`).forEach(T=>T.remove()),w.setAttribute("zotero-tribute","active"),new va(b).attach(w),w.addEventListener("tribute-replaced",T=>{if(T.detail.item.original.source=="zotero"){const L=T.detail.context.mentionTriggerChar+T.detail.context.mentionText,q=T.detail.context.mentionPosition,Q=T.detail.item.original.value,ee=T.target.defaultValue,D=bf(L),A=new RegExp(D,"g"),P=ee.replaceAll(A,(me,ge)=>ge==q?Q:me);Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value").set.call(w,P);const fe=new Event("input",{bubbles:!0});w.dispatchEvent(fe)}})},[b]);return cP(()=>{const w=new MutationObserver(v);return w.observe(document,{childList:!0,subtree:!0}),()=>{w.disconnect();try{document.querySelector(`.${$.TRIBUTE}`).remove()}catch{}}},[v]),null}),l0=window.React.memo,Uo=window.React.useCallback,Ny=window.React.useEffect,Pc=window.React.useMemo,Qd=window.React.useState,pP=window.ReactDOM.createPortal,hP=window.Blueprint.Core.Classes,mP=window.Blueprint.Core.Menu,Kd=window.Blueprint.Core.MenuDivider,Oi=window.Blueprint.Core.MenuItem,gP=window.Blueprint.Core.Overlay,yP=1e3,bP=t=>{const e=Uo(s=>{if(s.data){const i=Oa(s.data);return i.items.map(c=>{const d=c.data.url,f=As(c.data.DOI),m=d?{href:d,title:d}:f?{href:"https://doi/org/"+f,title:f}:!1,p=c.library.type+"s/"+c.library.id,g=Ra(c.data.key,p,{pdfs:i.pdfs,notes:i.notes});return["@"+c.key,{citation:vf(c,"inline")||"@"+c.key,data:{children:g,location:p,raw:c,weblink:m,zotero:{local:js(c,{format:"target"}),web:Is(c,{format:"target"})}}}]})}else return[]},[]),n=yo(t,{notifyOnChangeProps:["data"],select:e}),o=Pc(()=>n.map(s=>s.data||[]).flat(1),[n]);return new Map(o)},vP=l0(function(e){const{coords:n,isOpen:o,itemsMap:s,onClose:i,target:c}=e,[d]=Ps(),[f]=ol(),[m]=Ia(),[p]=Aa(),[g,{on:b,off:v}]=It(!1),w=c?.parentElement?.dataset.linkTitle,S=c?.parentElement?.dataset.linkUid||!1,T=Pc(()=>w?s.get(w).data:null,[w,s]),R=Uo(()=>{setTimeout(()=>{try{document.querySelector("body > .bp3-context-menu+.bp3-portal").style.display="none"}catch{}},100)},[]),L=Uo(()=>{if(T){const{pdfs:D=[],notes:A=[]}=T.children;lu({item:T.raw,pdfs:D,notes:A},S,f,p,m,d),i()}},[d,T,f,m,i,S,p]),q=Uo(()=>{v(),i()},[i,v]),Q=Pc(()=>{if(!T||T.children.pdfs.length==0)return null;{const D=T.location.startsWith("groups/")?T.location:"library";return u.jsxs(u.Fragment,{children:[u.jsx(Kd,{title:"PDF Attachments"}),T.children.pdfs.map((A,P)=>{const H=["linked_file","imported_file","imported_url"].includes(A.data.linkMode)?`zotero://open-pdf/${D}/items/${A.data.key}`:A.data.url;return u.jsx(Oi,{className:"zr-context-menu--option",href:H,icon:"paperclip",rel:"noreferrer",target:"_blank",text:A.data.filename||A.data.title},P)})]})}},[T]),ee=Pc(()=>!T||T.children.notes.length==0?null:u.jsxs(u.Fragment,{children:[u.jsx(Kd,{}),u.jsx(Oi,{className:"zr-context-menu--option",icon:"comment",text:"Show notes",onClick:b,shouldDismissPopover:!1}),u.jsx(fu,{isOpen:g,notes:T.children.notes,onClose:q})]}),[q,g,T,b]);return u.jsx(gP,{isOpen:o,hasBackdrop:!1,lazy:!1,onClose:i,onOpening:R,usePortal:!1,children:u.jsx("div",{className:["zr-context-menu--wrapper",hP.POPOVER].join(" "),style:n,children:u.jsxs(mP,{className:"zr-context-menu",children:[u.jsx(Oi,{className:"zr-context-menu--option",icon:"add",text:"Import metadata",intent:"primary",onClick:L}),u.jsx(Kd,{}),T&&u.jsx(Oi,{className:"zr-context-menu-option",icon:"application",text:"Open in Zotero",href:T.zotero.local}),T&&u.jsx(Oi,{className:"zr-context-menu-option",icon:"cloud",text:"Open in Zotero (web)",href:T.zotero.web}),Q,ee]})})})}),wP=l0(function(){const{portalId:e}=pu(),[{dataRequests:n}]=Hn(),[{render_inline:o}]=al(),[s,i]=Qd(!1),[c,d]=Qd({left:0,top:0}),[f,m]=Qd(null),p=bP(n),g=Uo(S=>{S.preventDefault();const{pageX:T,pageY:R,target:L}=S;d({left:T,top:R}),m(L),i(!0)},[]),b=Uo(()=>{i(!1),m(null)},[]),v=Uo(()=>{const S=document.querySelectorAll("span[data-link-title^='@']");for(let T=0;T<S.length;T++){const R=S[T],L=R.getElementsByClassName("rm-page-ref")[0],q=R.getAttribute("data-link-title"),Q=R.getAttribute("data-in-library"),ee=p.has(q).toString();if(!(Q!=null&&Q==ee)){if(R.setAttribute("data-in-library",ee),Q==null&&ee=="false")continue;ee=="true"?(o==!0&&(L.textContent=p.get(q).citation),L.addEventListener("contextmenu",g)):(L.textContent=q,L.removeEventListener("contextmenu",g))}}},[p,o,g]),w=Uo(()=>{document.querySelectorAll("span[data-link-title^='@'][data-in-library]").forEach(T=>{T.removeAttribute("data-in-library");const R=T.getElementsByClassName("rm-page-ref")[0];R.textContent=T.getAttribute("data-link-title"),R.removeEventListener("contextmenu",g)})},[g]);return Ny(()=>{const S=setInterval(()=>{v()},yP);return function(){clearInterval(S),w()}},[v,w]),Ny(()=>{document.querySelectorAll("span[data-link-title^='@'][data-in-library]").forEach(T=>{const R=T.getElementsByClassName("rm-page-ref")[0],L=T.getAttribute("data-link-title"),q=T.getAttribute("data-in-library")=="true";R.textContent=q?p.get(L).citation:L})},[o,p]),pP(u.jsx(vP,{coords:c,isOpen:s,itemsMap:p,onClose:b,target:f}),document.getElementById(e))}),xP=wP,CP=window.Blueprint.Core.Tag,Mi=({action:t,text:e})=>u.jsx(CP,{className:"zr-shortcut-sequence",htmlTitle:"Press "+e+" to "+t,minimal:!0,children:e});function EP(t,e){const n=Oa(t);return n.items.map(o=>{const s=o.data.key,i=o.library.type+"s/"+o.library.id,{pdfs:c,notes:d}=Ra(s,i,{pdfs:n.pdfs,notes:n.notes});return lp(o,c,d,e)})}function Lf(t,e){const{authors:n,key:o,title:s,year:i}=t,{preset:c,template:d,useAsDefault:f}=e;switch(f){case"template":{let m=d;const p={authors:n,key:o,title:s,year:i};for(const g in p)m=m.replaceAll(`{{${g}}}`,`${p[g]}`);return m}case"preset":default:return SP(t,c)}}function SP(t,e){const n=t.key,o="[[@"+n+"]]";switch(!0){case e=="page-reference":return o;case e=="raw":return n;case e=="tag":return"#"+o;case e=="citation":return"["+t.authors+" ("+t.year+")]("+o+")";case e=="citekey":default:return"@"+n}}const TP=window.React.memo,Bi=window.React.useCallback,Sn=window.React.useMemo,_P=window.Blueprint.Core.Classes,kP=window.Blueprint.Core.Menu,Ly=window.Blueprint.Core.MenuDivider,mr=window.Blueprint.Core.MenuItem,Df=window.Blueprint.Core.Tag,c0=window.Blueprint.Core.useHotkeys,OP={popoverClassName:$.POPOVER},ji=(t,e,n)=>{const o="[[@"+t+"]]";switch(e){case"page-reference":return o;case"tag":return"#"+o;case"citation":return"["+n.authors+" ("+n.year+")]("+o+")";case"citekey":default:return"@"+t}};function RP(t){const{citekey:e,format:n,item:o}=t,[s]=Ls(),i=Sn(()=>Ns(s),[s]),c=Sn(()=>ji(e,n,o),[e,n,o]),d=Bi(()=>Fo(c),[c]),f=Sn(()=>{const m={citation:{action:"copy as citation",command:"copyCitation"},citekey:{action:"copy as citekey",command:"copyCitekey"},"page-reference":{action:"copy as page reference",command:"copyPageRef"},tag:{action:"copy as tag",command:"copyTag"}};if(m[n]){const{action:p,command:g}=m[n];if(i[g]!=="")return u.jsx(Mi,{action:p,text:i[g]})}return null},[n,i]);return u.jsx(mr,{htmlTitle:c,labelElement:f,onClick:d,text:c})}function jP(t){const{citekey:e,item:n}=t,[o]=iu(),[s]=Ls(),i=Sn(()=>Ns(s),[s]),c=Sn(()=>Lf(n,o),[o,n]),d=Bi(()=>{Fo(c)},[c]),f=Sn(()=>{let g=["citation","citekey","page-reference","tag"];return o.useAsDefault=="preset"&&(g=g.filter(b=>b!=o.preset)),u.jsxs(u.Fragment,{children:[u.jsx(mr,{htmlTitle:c,labelElement:u.jsx(Df,{intent:"success",minimal:!0,children:"Default"}),onClick:d,text:c}),g.map(b=>u.jsx(RP,{citekey:e,format:b,item:n},b))]})},[e,d,o,c,n]),m=Sn(()=>{const g=i.copyDefault||"";return g!==""?u.jsx(Mi,{action:"copy as default",text:g}):null},[i]),p=Sn(()=>{const g={allowInInput:!1,global:!0,preventDefault:!0,stopPropagation:!0},b={copyDefault:{label:"Copy the item in view (default format)",onKeyDown:()=>d()},copyCitation:{label:"Copy the item in view (as citation)",onKeyDown:()=>Fo(ji(e,"citation",n))},copyCitekey:{label:"Copy the item in view (as citekey)",onKeyDown:()=>Fo(ji(e,"citekey",n))},copyPageRef:{label:"Copy the item in view (as page reference)",onKeyDown:()=>Fo(ji(e,"page-reference",n))},copyTag:{label:"Copy the item in view (as page reference)",onKeyDown:()=>Fo(ji(e,"tag",n))}};return Object.keys(b).map(v=>{const w=i[v]||"";return w!==""?{...g,...b[v],combo:w}:!1}).filter(St)},[e,d,n,i]);return c0(p,{showDialogKeyCombo:"shift+Z+R"}),u.jsx(mr,{icon:"clipboard",labelElement:m,multiline:!0,onClick:d,popoverProps:OP,text:"Copy reference",children:f})}const wc=({direction:t="row",label:e,children:n})=>u.jsxs("div",{"zr-role":"metadata-"+t,children:[u.jsx("span",{className:$.TEXT_AUXILIARY,children:e}),u.jsx("div",{children:n})]}),u0=TP(function({closeDialog:e,item:n}){const{abstract:o,authors:s,authorsFull:i,authorsRoles:c,children:d,createdByUser:f,inGraph:m,key:p,publication:g,raw:b,tags:v,title:w,weblink:S,year:T,zotero:R}=n,[L,{toggle:q,on:Q,off:ee}]=It(!1),[D,{on:A,off:P}]=It(!1),[H]=Ps(),[fe]=ol(),[me]=Ia(),[ge]=Ls(),ye=Sn(()=>Ns(ge),[ge]),[Y]=Aa(),[,ve]=Zo(),ie=Bi(async()=>{const{pdfs:G=[],notes:ue=[]}=d,ae=await lu({item:n.raw,pdfs:G,notes:ue},m,fe,Y,me,H);return ae.success&&ve(),ae},[H,d,m,n.raw,fe,me,Y,ve]),we=Bi(async()=>{const G=await Qv({item:n.raw,notes:d.notes},m,me,H);return G.success&&ve(),G},[H,d.notes,m,n,me,ve]),ze=Bi(()=>{m!=!1&&(Cf(m),e())},[e,m]),We=Sn(()=>{const G=ye.goToItemPage||"",ue=G!==""?u.jsx(Mi,{action:"go to the item's page",text:G}):null;return m?u.jsx(mr,{icon:"arrow-right",labelElement:ue,onClick:ze,text:"Go to Roam page"}):null},[m,ze,ye]),Le=Sn(()=>{const G=ye.importMetadata||"",ue=G!==""?u.jsx(Mi,{action:"import the item's metadata",text:G}):null;return u.jsx(mr,{icon:"add",labelElement:ue,onClick:ie,text:"Import metadata"})},[ie,ye]),Je=Sn(()=>{if(d.pdfs.length==0)return null;{const G=d.pdfs[0],ue=G.library.type=="group"?`groups/${G.library.id}`:"library";return d.pdfs.map(ae=>{const W=["linked_file","imported_file","imported_url"].includes(ae.data.linkMode)?`zotero://open-pdf/${ue}/items/${ae.data.key}`:ae.data.url;return u.jsx(mr,{href:W,icon:"paperclip",multiline:!0,rel:"noreferrer",target:"_blank",text:ae.data.filename||ae.data.title},ae.key)})}},[d.pdfs]),ft=Sn(()=>{if(d.notes.length==0)return null;{const G=ye.toggleNotes||"",ue=G!==""?u.jsx(Mi,{action:"toggle the notes panel",text:G}):null;return u.jsxs(u.Fragment,{children:[u.jsx(mr,{icon:"highlight",labelElement:ue,onClick:Q,text:"Highlights & Notes"}),u.jsx(fu,{isOpen:L,notes:d.notes,onClose:ee})]})}},[d.notes,ee,L,ye,Q]),I=Sn(()=>u.jsxs(u.Fragment,{children:[u.jsx(mr,{icon:"eye-open",onClick:A,text:"View raw metadata"}),u.jsx(Pp,{item:n.raw,isOpen:D,onClose:P})]}),[P,n.raw,D,A]),M=Sn(()=>{const G={allowInInput:!1,global:!0,preventDefault:!0,stopPropagation:!0},ue={goToItemPage:{disabled:!m,label:"Go to the item's Roam page",onKeyDown:()=>ze()},importMetadata:{label:"Import the item's metadata to Roam",onKeyDown:()=>ie()},toggleNotes:{disabled:d.notes.length==0,label:"Show the item's linked notes",onKeyDown:()=>q()}};return Object.keys(ue).map(ae=>{const W=ye[ae]||"";return W!==""?{...G,...ue[ae],combo:W}:!1}).filter(St)},[d.notes,ie,m,ze,ye,q]);return c0(M,{showDialogKeyCombo:"shift+Z+R"}),u.jsx("div",{id:"zr-item-details",children:u.jsxs(Ln,{children:[u.jsxs("div",{"zr-role":"item-metadata",children:[u.jsxs("div",{"zr-role":"item-metadata--header",children:[u.jsx("h5",{children:w}),u.jsx("span",{className:$.TEXT_ACCENT_1,children:s+" ("+T+")"}),g?u.jsx("span",{className:$.TEXT_SECONDARY,children:g}):null,S?u.jsx("span",{"zr-role":"item-weblink",className:$.TEXT_SECONDARY,children:u.jsx("a",{href:S.href,rel:"noreferrer",target:"_blank",children:S.title})}):null]}),u.jsx(wc,{direction:"col",label:"Abstract",children:u.jsx("p",{"zr-role":"item-abstract",className:[$.TEXT_SMALL,_P.RUNNING_TEXT].join(" "),children:o})}),u.jsxs("div",{"zr-role":"item-metadata--footer",children:[u.jsxs(wc,{label:"Added",children:[u.jsx("span",{className:$.TEXT_SECONDARY,children:fp(b.data.dateAdded)}),f?u.jsxs("span",{children:["by ",u.jsx("b",{children:f})]}):null]}),i.length>0?u.jsx(wc,{label:"Contributors",children:i.map((G,ue)=>u.jsxs(Df,{className:$.TEXT_SMALL,intent:"primary",minimal:!0,children:[G,c[ue]=="author"?"":" ("+c[ue]+")"]},ue))}):null,v.length>0?u.jsx(wc,{label:"Tags",children:u.jsx("div",{children:v.map((G,ue)=>u.jsxs(Df,{className:$.TEXT_SMALL,minimal:!0,children:["#",G]},ue))})}):null]})]}),u.jsx("div",{"zr-role":"item-actions",children:u.jsxs(kP,{className:$.TEXT_SMALL,"data-in-graph":m.toString(),children:[navigator.clipboard&&u.jsx(jP,{citekey:p,item:n}),u.jsx(Ly,{className:$.DIVIDER_MINIMAL,title:"Actions"}),We,Le,d.notes.length>0&&u.jsx(mr,{icon:"chat",onClick:we,text:"Import notes"}),u.jsx(mr,{href:R.local,icon:"application",rel:"noreferrer",target:"_blank",text:"Open in Zotero"}),u.jsx(mr,{href:R.web,icon:"cloud",rel:"noreferrer",target:"_blank",text:"Open in Zotero (web)"}),I,u.jsx(Ly,{className:$.DIVIDER_MINIMAL,title:"Linked Content"}),Je,ft]})})]})})}),IP=window.React.useCallback,Qc=window.React.useMemo,Wd=window.Blueprint.Core.Classes,AP=window.Blueprint.Core.Checkbox,PP=window.Blueprint.Core.Tag;function NP({annotation:t}){const{color:e,comment:n,text:o,type:s}=Qc(()=>au([t])[0],[t]),i=Qc(()=>({backgroundImage:`linear-gradient(120deg, ${e}50 0%, ${e}50 100%)`}),[e]);return u.jsxs("div",{className:$.TEXT_SMALL,"zr-role":"note-contents",children:[o&&u.jsx("span",{title:o,className:[$.TEXT_AUXILIARY,Wd.TEXT_OVERFLOW_ELLIPSIS].join(" "),style:i,children:o}),s=="image"&&u.jsx("code",{className:Wd.CODE,children:"Images are currently not supported"}),n&&u.jsx("div",{title:n,className:[$.TEXT_SECONDARY,Wd.TEXT_OVERFLOW_ELLIPSIS].join(" "),children:n})]})}function LP({note:t}){const e=Qc(()=>lv([t]).join(" "),[t]);return u.jsx("div",{className:[$.TEXT_SMALL,$.TEXT_AUXILIARY].join(" "),"zr-role":"note-contents",children:u.jsx("p",{title:e,children:e})})}function DP({note:t,isSelected:e,isSingleChild:n,onToggle:o}){const s=IP(()=>o(t.data.key),[t.data.key,o]),i=Qc(()=>tl(t)?u.jsx(LP,{note:t}):u.jsx(NP,{annotation:t}),[t]);return u.jsxs(Go,{className:"zr-notesimport-item","aria-label":t.data.key,onClick:s,children:[u.jsx("div",{className:"zr-notesimport-item--header",children:n?i:u.jsx(AP,{checked:e,className:"zr-notesimport-item--title",inline:!1,labelElement:i,onChange:s})}),u.jsx("div",{className:["zr-notesimport-item--contents",$.TEXT_SMALL].join(" "),children:u.jsx("div",{children:t.data.tags.map((c,d)=>u.jsx(PP,{minimal:!0,children:c.tag},d))})})]})}const MP=window.React.useCallback,Dy=window.React.useMemo,BP=window.Blueprint.Core.Checkbox,zP=window.Blueprint.Core.Classes,$P=window.Blueprint.Core.H6;function FP({date:t,itemSelectProps:e,notes:n,selectedKeys:o}){const{bulkCheck:s,bulkUncheck:i,toggleNoteSelection:c}=e,d=Dy(()=>n.every(g=>o.includes(g.data.key)),[n,o]),f=n.length==1,m=Dy(()=>n.sort((g,b)=>new Date(g.data.dateAdded)>new Date(b.data.dateAdded)?-1:1),[n]),p=MP(()=>{const g=n.map(b=>b.data.key);d?i(g):s(g)},[d,s,i,n]);return u.jsxs("li",{className:"zr-notesimport-daylist",children:[u.jsx(BP,{checked:d,className:"zr-notesimport-day",inline:!1,labelElement:u.jsx($P,{children:t}),onChange:p}),u.jsx("div",{children:u.jsx("ul",{className:zP.LIST_UNSTYLED,children:m.map(g=>u.jsx(DP,{isSelected:o.includes(g.data.key),isSingleChild:f,note:g,onToggle:c},g.data.key))})})]})}const My=window.React.useCallback,Mf=window.React.useMemo,By=window.Blueprint.Core.Button,UP=window.Blueprint.Core.Classes,qP=window.Blueprint.Core.Tag;function HP({notes:t,selectedKeys:e,selectProps:n}){const{setSelectedKeys:o,toggleNoteSelection:s}=n,i=Mf(()=>{const d=t.sort((f,m)=>new Date(f.data.dateAdded)>new Date(m.data.dateAdded)?-1:1).reduce((f,m)=>{const p=new Date(m.data.dateAdded).toLocaleDateString("en-CA");return f[p]?f[p].push(m):f[p]=[m],f},{});return Object.keys(d).sort((f,m)=>new Date(f)>new Date(m)?-1:1).map(f=>({date:vr(f,{brackets:!1}),notes:d[f]}))},[t]),c=Mf(()=>({bulkCheck:d=>{const f=d.filter(m=>!e.includes(m));o([...e,...f])},bulkUncheck:d=>{o(e.filter(f=>!d.includes(f)))},toggleNoteSelection:s}),[e,o,s]);return u.jsx(Yo,{children:i.map(d=>u.jsx(FP,{date:d.date,notes:d.notes,itemSelectProps:c,selectedKeys:e},d.date))})}function VP({closeDialog:t,item:e,notes:n,pageUID:o}){const[s]=Ps(),[i]=Ia(),[c,{set:d,toggle:f}]=Ui({start:n.map(b=>b.data.key)}),m=My(()=>{c.length==0?d(n.map(b=>b.data.key)):d([])},[n,c,d]),p=My(async()=>{const b=n.filter(v=>c.includes(v.data.key));try{await Qv({item:e,notes:b},o,i,s),t()}catch{}},[s,t,e,n,i,o,c]),g=Mf(()=>({setSelectedKeys:d,toggleNoteSelection:f}),[d,f]);return u.jsx("div",{className:UP.DIALOG_BODY,children:u.jsxs(Ln,{children:[u.jsxs(mo,{children:[u.jsx(By,{className:[$.TEXT_SMALL,$.TEXT_SECONDARY].join(" "),minimal:!0,onClick:m,children:c.length==0?"Select all":"Unselect all"}),u.jsx(By,{active:!0,disabled:c.length==0,intent:"success",minimal:!0,onClick:p,rightIcon:u.jsx(qP,{intent:"success",children:c.length}),text:"Import notes"})]}),u.jsx("div",{className:"zr-notesimport--datalist",children:u.jsx(HP,{notes:n,selectedKeys:c,selectProps:g})})]})})}const XP=window.React.useCallback,QP=window.React.useMemo,KP=window.Blueprint.Core.Button,WP=window.Blueprint.Core.Icon,GP=window.Blueprint.Core.Menu,YP=window.Blueprint.Core.MenuItem,ZP=window.Blueprint.Core.Tag,JP=window.Blueprint.Select.Select,eN={canEscapeKeyClose:!1,minimal:!0,placement:"bottom-start",popoverClassName:$.POPOVER},tN={itemRenderer:(t,e)=>{const{handleClick:n}=e;return u.jsx(YP,{className:$.TEXT_SECONDARY,htmlTitle:t.label,labelElement:t.active?u.jsx(WP,{icon:"small-tick"}):null,onClick:n,"aria-selected":t.active,text:t.label},t.value)},itemListRenderer:({items:t,itemsParentRef:e,renderItem:n})=>{const o=t.map(n).filter(s=>s!=null);return u.jsx(GP,{ulRef:e,children:o})}};function nN({options:t,toggleFilter:e}){const n=QP(()=>t.filter(s=>s.active).length,[t]),o=XP(s=>e(s.value),[e]);return u.jsx(JP,{className:$.TEXT_SMALL,filterable:!1,items:t,matchTargetWidth:!1,onItemSelect:o,popoverProps:eN,...tN,children:u.jsx(KP,{className:$.TEXT_SECONDARY,minimal:!0,outlined:!0,rightIcon:n>0?u.jsx(ZP,{minimal:!0,children:n}):"caret-down",text:"Filter"})})}const rN=window.React.useMemo,oN=window.Blueprint.Core.H6,aN=window.Blueprint.Core.Icon;function sN({children:t}){return u.jsx(oN,{children:t})}function d0({href:t,text:e}){return u.jsx("a",{href:t,rel:"noreferrer",target:"_blank",children:e})}const iN=u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Metadata is obtained through the ",u.jsx(d0,{href:"https://en.wikipedia.org/api/rest_v1/#/Citation/getCitation",text:"Wikimedia API"}),". It should give the same results as the Zotero Connector (note : PDFs are currently not added automatically)."]}),u.jsx("p",{children:"If the API was unable to retrieve metadata for a given URL, the item will not appear below."})]}),lN=u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["References, citations, and their metadata are obtained through the ",u.jsx(d0,{href:"https://api.semanticscholar.org/corpus",text:"Semantic Scholar API"}),"."]}),u.jsx("p",{children:"Note that the API does not guarantee the identification of all papers, and that the metadata available is limited (for example, abstracts are currently not available)."})]});function f0({content:t,header:e=""}){const n=rN(()=>u.jsxs(u.Fragment,{children:[e&&u.jsx(sN,{children:e}),t]}),[t,e]);return u.jsx(Ds,{className:"zr-guide-popover--target",content:n,interactionKind:"hover-target",popoverClassName:[$.POPOVER,"zr-guide-popover"].join(" "),children:u.jsx(aN,{icon:"help",size:14,tabIndex:-1})})}const cN=()=>u.jsx(f0,{header:"About this data",content:iN}),uN=()=>u.jsx(f0,{header:"About this data",content:lN});var br=(t=>(t.ADDED_ON="added_on",t.WITH_ABSTRACT="with_abstract",t.WITH_TAG="with_tag",t))(br||{}),co=(t=>(t.CITATIONS="is_citation",t.REFERENCES="is_reference",t))(co||{});const dN=window.React.memo,fN=window.React.useCallback,Gd=window.React.useMemo,pN=window.Blueprint.Core.Button,xc=window.Blueprint.Core.Classes,hN=window.Blueprint.Core.Icon,mN=window.Blueprint.Core.Tag,gN=dN(function(e){const{handleRemove:n,handleSelect:o,inGraph:s,isSelected:i,item:c,type:d}=e,{inLibrary:f}=c,m=fN(()=>{i?n(c):o(c)},[i,c,n,o]),p=Gd(()=>{if(f){const{children:{pdfs:v,notes:w},raw:S}=f;return u.jsx(ul,{inGraph:s,item:S,notes:w,pdfs:v})}else return u.jsxs(u.Fragment,{children:[c.url?u.jsx("a",{"zr-role":"item-url",href:c.url,target:"_blank",rel:"noreferrer",className:$.TEXT_SMALL,children:c.doi||"Semantic Scholar"}):null,c.doi?u.jsx(pN,{text:i?"Remove":"Add to Zotero",active:i,className:$.TEXT_SMALL,icon:i?"small-cross":"small-plus",intent:"primary",minimal:!0,onClick:m,small:!0}):null]})},[m,s,f,i,c.doi,c.url]),g=Gd(()=>u.jsx("div",{className:"zr-related-item--intents",children:c.intent.length>0?c.intent.map(v=>{const w=v.charAt(0).toUpperCase()+v.slice(1);return u.jsx(mN,{"data-semantic-intent":v,htmlTitle:"This citation was classified as related to "+w+" by Semantic Scholar",minimal:!0,children:w},v)}):null}),[c.intent]),b=Gd(()=>u.jsx("div",{className:"zr-related-item--links",children:Object.keys(c.links).map(v=>u.jsx("span",{"data-service":v,children:u.jsx("a",{href:c.links[v],className:[$.TEXT_SMALL,$.TEXT_AUXILIARY].join(" "),target:"_blank",rel:"noreferrer",children:v.split("-").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ")})},v))}),[c.links]);return u.jsx("li",{className:"zr-related-item","data-semantic-type":d,"data-in-library":f!=!1,"data-in-graph":s!=!1,children:u.jsxs("div",{className:xc.MENU_ITEM,children:[u.jsx("span",{className:[xc.MENU_ITEM_LABEL,$.TEXT_SMALL,"zr-related-item--timestamp"].join(" "),children:c.year}),u.jsxs("div",{className:[xc.FILL,"zr-related-item-contents"].join(" "),children:[u.jsxs("div",{className:xc.FILL,style:{display:"flex"},children:[u.jsxs("div",{className:"zr-related-item-contents--metadata",children:[c.authors&&u.jsx("span",{className:d==co.REFERENCES?$.TEXT_ACCENT_1:$.TEXT_ACCENT_2,children:c.authors}),c.meta&&u.jsx("span",{className:$.TEXT_SECONDARY,children:c.meta}),c.isInfluential?u.jsx(hN,{className:"zr-related-item--decorating-icon",color:"#f8c63a",htmlTitle:"This item was classified as influential by Semantic Scholar",icon:"trending-up"}):null,u.jsx("span",{className:"zr-related-item--title",children:c.title}),b]}),u.jsx("span",{className:"zr-related-item-contents--actions",children:p})]}),g]})]})})}),yN=gN,bN=window.React.memo,vN=window.React.useCallback,zy=window.React.useMemo,wN=window.Blueprint.Core.InputGroup,xN=window.Blueprint.Core.NonIdealState,$y=30,CN=[{active:!1,label:"In Library",value:"library"},{active:!1,label:"Highly Influential",value:"influential"},{active:!1,label:"Has DOI",value:"doi"}];function EN(t,e){let n=[...t];return e.filter(s=>s.active==!0).forEach(s=>{switch(s.value){case"library":n=n.filter(av);break;case"influential":n=n.filter(i=>i.isInfluential);break;case"doi":n=n.filter(i=>i.doi);break;default:window.zoteroRoam?.warn?.({origin:"Interface",message:`Filter not recognized: ${s.value}`,context:{...s}})}}),n}function SN(t,e){return e.filter(n=>Un(t,n._multiField,{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"}))}function TN({item:t,selectProps:e,type:n}){const{handleRemove:o,handleSelect:s,items:i}=e,c=i.findIndex(d=>d.doi==t.doi||d.url==t.url)>=0;return u.jsx(yN,{handleRemove:o,handleSelect:s,inGraph:t.inGraph,isSelected:c,item:t,type:n})}const _N=bN(function(e){const{items:n,selectProps:o,type:s}=e,{currentPage:i,pageLimits:c,setCurrentPage:d}=nl({itemsPerPage:$y}),[f,m]=hv(""),[p,g]=uS(CN),b=vN(S=>{g(S),d(1)},[d,g]),v=zy(()=>EN(n,p),[p,n]),w=zy(()=>f?SN(f,v):v,[v,f]);return u.jsxs("div",{className:"rendered-div",children:[u.jsxs(mo,{children:[u.jsx(nN,{options:p,toggleFilter:b}),u.jsx(wN,{"aria-label":"Search by title, authors (last names), or year",autoComplete:"off",id:"semantic-search--"+s,leftIcon:"search",onChange:m,placeholder:"Search items",spellCheck:"false",title:"Search by title, authors (last names), or year",value:f})]}),u.jsx("div",{className:"zr-semantic--datalist",children:w.length==0?u.jsx(xN,{className:$.TEXT_AUXILIARY,description:"No results found"}):u.jsx(Yo,{children:w.slice(...c).map(S=>u.jsx(TN,{item:S,selectProps:o,type:s},[S.doi,S.url,S.title].filter(St).join("-")))})}),u.jsxs(mo,{children:[u.jsx(il,{arrows:"first",currentPage:i,itemsPerPage:$y,nbItems:w.length,setCurrentPage:d}),u.jsx(uN,{})]})]})}),Fy=_N,p0=window.React.memo,kN=window.React.useCallback,ON=window.Blueprint.Core.Checkbox,RN=window.Blueprint.Core.Spinner,jN=p0(function(e){const{collection:n,isChecked:o,onSelect:s}=e,{data:{name:i},depth:c,key:d}=n,f=kN(()=>{s(d)},[d,s]);return u.jsx(ON,{checked:o,className:[$.TEXT_SMALL,`depth-${c}`].join(" "),inline:!1,label:i,onChange:f})}),IN=p0(function(e){const{collections:n,onSelect:o,selectedCollections:s}=e;return n.length==0?u.jsx(RN,{size:12}):u.jsx("div",{className:"options-collections-list",children:n.map(i=>u.jsx(jN,{collection:i,isChecked:s.includes(i.key),onSelect:o},i.key))})}),AN=IN,PN=window.React.memo,NN=window.React.useMemo,LN=window.Blueprint.Core.RadioGroup,DN=PN(function({libraries:e,selectedLib:n,onSelect:o}){const s=NN(()=>e.map(i=>({value:i.path})),[e]);return u.jsx(LN,{className:$.TEXT_SMALL,inline:!1,name:"import-library",onChange:o,options:s,selectedValue:n.path})}),MN=DN;function h0(t,e,n=0){const o={...t,depth:n},s=e.filter(i=>i.data.parentCollection==o.key);if(s.length>0){const i=[o];for(let c=0;c<s.length;c++)i.push(...h0(s[c],e,n+1));return i}else return[o]}function BN(t){if(t.length>0){const e=[...t].sort((i,c)=>i.data.name.toLowerCase()<c.data.name.toLowerCase()?-1:1),n=e.filter(i=>i.data.parentCollection),o=e.filter(i=>!i.data.parentCollection).map(i=>({...i,depth:0})),s=[];for(let i=0;i<o.length;i++)n.filter(d=>d.data.parentCollection==o[i].key).length>0?s.push(...h0(o[i],n)):s.push(o[i]);return s}else return[]}const Fp=window.React.memo,m0=window.React.useCallback,Bf=window.React.useMemo,g0=window.Blueprint.Core.Button,zN=window.Blueprint.Core.ButtonGroup,Uy=window.Blueprint.Core.Intent,$N=window.Blueprint.Core.Spinner,FN=Fp(function(e){const{identifiers:n,importProps:o,isActive:s,resetImport:i}=e,c=Uw(n,{enabled:s&&n.length>0,select:v=>v.item}),d=c.every(v=>v.data),f=c.map(v=>v.data).filter(St),{mutate:m,status:p}=VI(),g=m0(()=>{const{collections:v,library:w,tags:S}=o;m({collections:v,items:f,library:w,tags:S},{onSuccess:()=>i()})},[f,o,m,i]),b=Bf(()=>p=="loading"?{disabled:!0,text:"Loading...",title:"Importing items..."}:p=="error"?{disabled:!0,intent:Uy.DANGER,rightIcon:"error",text:"Error",title:"Error while importing items"}:{disabled:!s,intent:Uy.PRIMARY,loading:!d,rightIcon:"chevron-right",text:"Send to Zotero",title:d?"Import items to Zotero":"Loading items data..."},[s,d,p]);return u.jsx(g0,{className:[$.TEXT_SMALL,"zr-import--trigger"].join(" "),minimal:!0,onClick:g,...b})}),UN=Fp(function(e){const{collections:n,identifiers:o,isActive:s,libraries:i,resetImport:c}=e,[d,f]=wS({start:i[0],transform:L=>i.find(q=>q.path==L)}),[m,{set:p,toggle:g}]=Ui({start:[]}),[b,{add:v,remove:w}]=Ui({start:[]}),S=m0(L=>{f(L),p([])},[f,p]),T=Bf(()=>{const L=n.filter(q=>{const{id:Q,type:ee}=q.library;return ee+"s/"+Q==d.path});return BN(L)},[n,d]),R=Bf(()=>({collections:m,library:d,tags:b}),[m,d,b]);return u.jsxs(Ln,{children:[u.jsx("div",{className:"import-header",children:u.jsxs(zN,{fill:!0,minimal:!0,children:[u.jsx(g0,{className:[$.TEXT_SMALL,"zr-import--cancel"].join(" "),icon:"chevron-left",intent:"warning",minimal:!0,onClick:c,children:"Cancel"}),u.jsx(FN,{identifiers:o,importProps:R,isActive:s,resetImport:c})]})}),u.jsxs("div",{className:"import-options",children:[u.jsx("div",{className:"options-library-list",children:u.jsx(MN,{libraries:i,selectedLib:d,onSelect:S})}),u.jsx(AN,{collections:T,onSelect:g,selectedCollections:m}),u.jsx(wp,{onRemove:w,onSelect:v,selectedTags:b})]})]})}),y0=Fp(function(e){const{identifiers:n,isActive:o,resetImport:s}=e,[{libraries:i}]=Hn(),{data:c,isLoading:d}=Qw(i),m=Hw(i,{enabled:c.length>0,notifyOnChangeProps:["data"],select:p=>p.data}).map(p=>p?.data||[]).flat(1);return d?u.jsx($N,{}):c.length==0?u.jsx(fv,{}):u.jsx(UN,{collections:m,identifiers:n,isActive:o,libraries:c,resetImport:s})}),b0=window.React.memo,qN=window.React.useCallback,HN=window.React.useMemo,VN=window.Blueprint.Core.Button,v0=window.Blueprint.Core.Classes,XN=b0(function(e){const{handleRemove:n,item:o}=e,s=qN(()=>{n(o)},[n,o]);return u.jsxs("li",{className:["import-items_selected",$.TEXT_SMALL].join(" "),children:[u.jsxs("div",{className:"selected_info",children:[u.jsx("span",{className:[v0.TEXT_MUTED,"selected_title"].join(" "),children:o.title}),u.jsx("span",{className:[$.TEXT_SECONDARY,"selected_origin"].join(" "),children:o.meta})]}),u.jsx("div",{className:"selected_state",children:u.jsx(VN,{className:"selected_remove-button",icon:"cross",intent:"danger",minimal:!0,onClick:s,title:"Remove item from import"})})]})}),QN=b0(function({selectProps:e}){const{handleRemove:n,items:o,resetImport:s}=e,i=o.length>0,c=HN(()=>o.map(d=>d.doi?"https://doi.org/"+d.doi:d.url),[o]);return u.jsxs("div",{className:"zr-semantic-panel--side",tabIndex:0,children:[u.jsx(y0,{identifiers:c,isActive:i,resetImport:s}),u.jsx("ul",{className:[v0.LIST_UNSTYLED,"import-items"].join(" "),children:e.items.map(d=>u.jsx(XN,{handleRemove:n,item:d},[d.doi,d.url].join("-")))})]})}),KN=QN;function zf(t,{pdfs:e=[],notes:n=[]},o){const s=t.meta.creatorSummary||"",i=t.meta.parsedDate?`(${new Date(t.meta.parsedDate).getUTCFullYear()})`:"",c=t.data.key,d=t.library.type+"s/"+t.library.id,f=Ra(c,d,{pdfs:e,notes:n});return{abstract:t.data.abstractNote||"",added:t.data.dateAdded,children:f,inGraph:o.get("@"+t.key)||!1,itemType:t.data.itemType,key:t.key,location:d,meta:[s,i].filter(St).join(" "),raw:t,timestamp:Fi(t.data.dateAdded),title:t.data.title||""}}function $f(t,e){const n=Array.from(t),o=Array.from(e);return n.length+o.length!=0&&(n.length!==o.length||n.some((s,i)=>s!==o[i]))}function Ff(t,e){return t.sort((n,o)=>`${n[e]}`.toLowerCase()<`${o[e]}`.toLowerCase()?-1:1)}const w0=window.React.memo,x0=window.React.useCallback,WN=window.React.useEffect,Ii=window.React.useMemo,GN=window.React.useState,YN=window.Blueprint.Core.Button,ZN=window.Blueprint.Core.Classes,qy=window.Blueprint.Core.Icon,Hy=window.Blueprint.Core.Tab,Vy=window.Blueprint.Core.Tabs,C0="zr-semantic-panel-label",JN=w0(function(e){const{defaultTab:n,items:o,onClose:s,selectProps:i,title:c}=e,[d,f]=GN(n);WN(()=>{f(n)},[n]);const m=x0((w,S,T)=>f(w),[]),p=Ii(()=>Ff(o.references,"year"),[o.references]),g=Ii(()=>Ff(o.citations,"year"),[o.citations]),b=Ii(()=>u.jsxs(u.Fragment,{children:[u.jsx(qy,{icon:"citation"}),u.jsx("span",{children:Wt(p.length,"reference")})]}),[p.length]),v=Ii(()=>u.jsxs(u.Fragment,{children:[u.jsx(qy,{icon:"chat"}),u.jsx("span",{children:Wt(g.length,"citing paper")})]}),[g.length]);return u.jsxs(Vy,{id:"zr-semantic-panel",className:$.TABS,selectedTabId:d,onChange:m,animate:!1,children:[u.jsx(Hy,{id:co.REFERENCES,panel:u.jsx(Fy,{items:p,selectProps:i,type:co.REFERENCES}),disabled:p.length==0,title:b}),u.jsx(Hy,{id:co.CITATIONS,panel:u.jsx(Fy,{items:g,selectProps:i,type:co.CITATIONS}),disabled:g.length==0,title:v}),u.jsx(Vy.Expander,{}),u.jsx("span",{className:$.TEXT_AUXILIARY,id:C0,title:"Works related to "+c,children:c}),u.jsx(YN,{icon:"cross",minimal:!0,large:!0,onClick:s,title:"Close dialog"})]})}),eL=w0(function(e){const{isOpen:n,items:o,onClose:s,show:i}=e,[c,{set:d,add:f,remove:m}]=Ui({start:[],identify:(v,w)=>v.doi==w.doi&&v.url==w.url}),p=c.length>0,g=Ii(()=>({handleRemove:m,handleSelect:f,items:c,resetImport:()=>d([])}),[f,c,m,d]),b=x0(()=>{d([]),s()},[s,d]);return u.jsx(Qo,{ariaLabelledBy:C0,className:"citations",extraClasses:p?["has-selected-items"]:[],isOpen:n,onClose:b,children:u.jsx("div",{className:ZN.DIALOG_BODY,children:u.jsxs(Ln,{children:[u.jsx("div",{className:"zr-semantic-panel--main",children:u.jsx(JN,{defaultTab:i.type,items:o,onClose:b,selectProps:g,title:i.title})}),u.jsx(KN,{selectProps:g})]})})})}),tL=eL,nL=["citekey","dnp","tag"],Up="zr-page-menu--",ws=nL.reduce((t,e)=>(t[e]=Up+e,t),{}),rL=["references","citations","backlinks"],oL="zr-page-menu-show--",Yd=rL.reduce((t,e)=>(t[e]=oL+e,t),{}),Kc="zr-webimport-div";function aL(t,e,n){const{items:o=[],pdfs:s=[],notes:i=[]}=t,c=o.filter(g=>g.data.DOI),{citations:d=[],references:f=[]}=e,m=d.map(g=>({...Xy(g,{items:c,pdfs:s,notes:i},n),_type:gf.CITING})),p=f.map(g=>({...Xy(g,{items:c,pdfs:s,notes:i},n),_type:gf.CITED}));return{citations:m,references:p,backlinks:[...p,...m].filter(av)}}function sL(t){const e={authors:"",authorsLastNames:[],authorsString:"",doi:t.doi,intent:t.intent,isInfluential:t.isInfluential,links:{},meta:t.venue.split(/ ?:/)[0],title:t.title,url:t.url||"",year:t.year?t.year.toString():"",_multiField:""};return e.authorsLastNames=t.authors.map(n=>lL(n.name)),e.authorsString=e.authorsLastNames.join(" "),e.authors=cL(e.authorsLastNames),t.paperId&&(e.links["semantic-scholar"]=`https://www.semanticscholar.org/paper/${t.paperId}`),t.arxivId&&(e.links.arxiv=`https://arxiv.org/abs/${t.arxivId}`),(t.doi||t.title)&&(e.links["connected-papers"]="https://www.connectedpapers.com/"+(t.doi?"api/redirect/doi/"+t.doi:"search?q="+encodeURIComponent(t.title)),e.links["google-scholar"]="https://scholar.google.com/scholar?q="+(t.doi||encodeURIComponent(t.title))),e._multiField=[e.authorsString,e.year,e.title].filter(St).join(" "),e}function iL(t,e){if(t.meta.parsedDate)if(e.meta.parsedDate){const n=new Date(t.meta.parsedDate).getUTCFullYear()-new Date(e.meta.parsedDate).getUTCFullYear();return n<0||n==0&&t.meta.creatorSummary<e.meta.creatorSummary?-1:1}else return-1;else return e.meta.parsedDate?1:t.meta.creatorSummary<e.meta.creatorSummary?-1:1}function lL(t){const e=t.replaceAll("."," ").split(" ").filter(St);return e.length==1?e[0]:e.slice(1).filter(n=>n.length>1).join(" ")}function cL(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t[0]+" & "+t[1];case 3:return t[0]+", "+t[1]+" & "+t[2];default:return t[0]+" et al."}}function Xy(t,e,n){const{items:o=[],pdfs:s=[],notes:i=[]}=e,c=sL(t);if(c.doi){const d=o.find(f=>As(f.data.DOI)==c.doi);if(d){const f=d.data.key,m=d.library.type+"s/"+d.library.id,p=Ra(f,m,{pdfs:s,notes:i});return{...c,inGraph:n.get("@"+d.key)||!1,inLibrary:{children:p,raw:d}}}else return{...c,inGraph:!1,inLibrary:!1}}else return{...c,inGraph:!1,inLibrary:!1}}const E0=window.React.memo,Uf=window.React.useCallback,nr=window.React.useMemo,uL=window.React.useState,xs=window.Blueprint.Core.Button,S0=window.Blueprint.Core.ButtonGroup,dL=window.Blueprint.Core.Card,Qy=window.Blueprint.Core.Classes,fL=window.Blueprint.Core.Collapse,pL=window.Blueprint.Core.Tag;function Ky({entry:t}){const{_type:e,inLibrary:n,inGraph:o}=t,{children:{pdfs:s,notes:i},raw:c}=n,{key:d,data:f,meta:m}=c,p=m.parsedDate?new Date(m.parsedDate).getUTCFullYear():"",g=e=="cited"?"reference":"citation",b=nr(()=>u.jsx(ul,{inGraph:o,item:c,notes:i,pdfs:s}),[o,c,i,s]);return u.jsxs("li",{className:"zr-backlink-item","data-backlink-type":g,"data-in-graph":(o!=!1).toString(),"data-item-year":p,"data-key":"@"+d,children:[u.jsx("div",{className:"zr-backlink-item--year",children:p}),u.jsxs("div",{className:"zr-backlink-item--info","data-item-type":f.itemType,children:[u.jsx("span",{"zr-role":"item-authors",className:g=="reference"?$.TEXT_ACCENT_1:$.TEXT_ACCENT_2,children:m.creatorSummary||""}),u.jsx("span",{"zr-role":"item-publication",className:$.TEXT_SECONDARY,children:f.publicationTitle||f.bookTitle||f.university||""}),u.jsx("span",{"zr-role":"item-title",children:f.title})]}),u.jsx("div",{className:"zr-backlink-item--state",children:b})]})}const hL=E0(function(e){const{isOpen:n,items:o=[],origin:s}=e;if(o.length==0)return null;{const c=[...o].sort((p,g)=>iL(p.inLibrary.raw,g.inLibrary.raw)),d=c.filter(p=>p._type=="cited"),f=c.filter(p=>p._type=="citing"),m=u.jsx(pL,{className:"zr-backlinks-divider--tag",fill:!0,minimal:!0,multiline:!0,children:s});return u.jsx(fL,{isOpen:n,keepChildrenMounted:!0,children:u.jsxs("div",{className:"zr-citekey-menu--backlinks",children:[d.length>0?u.jsx("ul",{className:Qy.LIST_UNSTYLED,"zr-role":"sublist","list-type":"references",children:d.map(p=>u.jsx(Ky,{entry:p},`${p.doi}`))}):null,d.length>0&&f.length>0?m:null,f.length>0?u.jsx("ul",{className:Qy.LIST_UNSTYLED,"zr-role":"sublist","list-type":"citations",children:f.map(p=>u.jsx(Ky,{entry:p},`${p.doi}`))}):null]})})}});function mL(t){const{doi:e,itemList:n,origin:o,title:s}=t,[i]=Zo(),{isLoading:c,isError:d,data:f,error:m}=sI(e),[p,{toggle:g}]=It(!1),[b,{on:v,off:w}]=It(!1),[S,T]=uL({title:s,type:co.REFERENCES}),R=Uf(()=>{T({title:s,type:co.REFERENCES}),v()},[s,v]),L=Uf(()=>{T({title:s,type:co.CITATIONS}),v()},[s,v]),q=(f||{}).references?.length||0,Q=(f||{}).citations?.length||0,ee=nr(()=>{if(f){const{citations:A,references:P}=f;return aL(n,{citations:A,references:P},i)}else return{backlinks:[],citations:[],references:[]}},[f,n,i]),D=nr(()=>ee.backlinks.length==0?{"aria-disabled":!0,disabled:!0,icon:null,text:"No related library items"}:{icon:p?"caret-down":"caret-right",text:Wt(ee.backlinks.length,"related library item")},[ee.backlinks.length,p]);return u.jsx("div",{className:"zotero-roam-page-menu-citations",children:d?u.jsx(Zf,{error:m}):u.jsxs(u.Fragment,{children:[u.jsxs(S0,{minimal:!0,fill:!0,role:"menubar",children:[u.jsx(xs,{"aria-disabled":q==0,disabled:q==0,className:Yd.references,loading:c,minimal:!0,onClick:R,icon:"citation",intent:"primary",role:"menuitem","aria-haspopup":"dialog",title:"Show references",children:Wt(q,"reference")}),u.jsx(xs,{"aria-disabled":Q==0,disabled:Q==0,className:Yd.citations,loading:c,minimal:!0,onClick:L,icon:"chat",intent:"warning",role:"menuitem","aria-haspopup":"dialog",title:"Show citations",children:Wt(Q,"citation")}),u.jsx(xs,{className:Yd.backlinks,loading:c,minimal:!0,onClick:g,...D,role:"menuitem",title:"Show backlinks"})]}),q+Q>0?u.jsx(tL,{isOpen:b,items:ee,onClose:w,show:S}):null,u.jsx(hL,{isOpen:p,items:ee.backlinks,origin:o})]})})}function gL({item:t}){const[e,{on:n,off:o}]=It(!1);return u.jsxs(u.Fragment,{children:[u.jsx(xs,{icon:"info-sign",onClick:n,role:"menuitem","aria-haspopup":"dialog",children:"View item information"}),u.jsx(Qo,{className:"view-item-information",isOpen:e,onClose:o,children:u.jsx(u0,{closeDialog:o,item:t})})]})}function yL({item:t,notes:e,pageUID:n}){const[o,{on:s,off:i}]=It(!1);return u.jsxs(u.Fragment,{children:[u.jsx(xs,{icon:"comment",onClick:s,role:"menuitem","aria-haspopup":"dialog",children:"Import notes"}),u.jsx(Qo,{className:"import-item-notes",isOpen:o,label:"Import notes",onClose:i,children:u.jsx(VP,{closeDialog:i,item:t,notes:e,pageUID:n})})]})}const bL=E0(function({item:e,itemList:n}){const[o]=Ps(),[s]=ol(),[i]=Ia(),[{defaults:c}]=sl(),[d]=tw(),[f]=Aa(),[m]=Zo(),p=As(e.data.DOI),g=vp("@"+e.key),b=nr(()=>{const D=e.data.key,A=e.library.type+"s/"+e.library.id,{pdfs:P,notes:H}=n;return Ra(D,A,{pdfs:P,notes:H})},[n,e]),v=nr(()=>p?u.jsx("span",{className:"zr-citekey-doi","data-doi":p,children:u.jsx("a",{href:"https://doi.org/"+p,target:"_blank",rel:"noreferrer",children:p})}):null,[p]),w=Uf(async()=>{const{pdfs:D,notes:A}=b;return await lu({item:e,pdfs:D,notes:A},g,s,f,i,o)},[o,b,e,s,i,g,f]),S=nr(()=>b.pdfs.length==0||!c.includes("pdfLinks")?null:b.pdfs.map(D=>u.jsx(yr,{"zr-role":"pdf-link",alignText:"left",href:dp(D,"href"),icon:"paperclip",intent:"none",minimal:!0,role:"menuitem",text:D.data.filename||D.data.title},D.key)),[c,b.pdfs]),T=nr(()=>b.notes.length==0||!c.includes("importNotes")?null:u.jsx(yL,{item:e,notes:b.notes,pageUID:g}),[c,b.notes,e,g]),R=nr(()=>u.jsxs(u.Fragment,{children:[c.includes("openZoteroLocal")?u.jsx(yr,{icon:"application",intent:"none",text:"Open in Zotero",href:js(e,{format:"target"}),role:"menuitem"}):null,c.includes("openZoteroWeb")?u.jsx(yr,{icon:"cloud",intent:"none",text:"Open in Zotero [Web library]",href:Is(e,{format:"target"}),role:"menuitem"}):null]}),[c,e]),L=nr(()=>p&&c.includes("sciteBadge")?u.jsx(ew,{doi:p,...d}):null,[c,p,d]),q=nr(()=>{const D=c.includes("connectedPapers")?u.jsx(yr,{icon:"layout",intent:"primary",text:"Connected Papers",href:"https://www.connectedpapers.com/"+(p?"api/redirect/doi/"+p:"search?q="+encodeURIComponent(e.data.title)),role:"menuitem"}):null,A=p&&c.includes("semanticScholar")?u.jsx(yr,{icon:"bookmark",intent:"primary",text:"Semantic Scholar",href:"https://api.semanticscholar.org/"+p,role:"menuitem"}):null,P=c.includes("googleScholar")?u.jsx(yr,{icon:"learning",intent:"primary",text:"Google Scholar",href:"https://scholar.google.com/scholar?q="+(p||encodeURIComponent(e.data.title)),role:"menuitem"}):null;return u.jsxs(u.Fragment,{children:[D,A,P]})},[c,p,e.data.title]),Q=nr(()=>p&&c.includes("citingPapers")?u.jsx(mL,{doi:p,itemList:n,origin:e.meta.parsedDate?new Date(e.meta.parsedDate).getUTCFullYear().toString():"",title:"@"+e.key}):null,[c,p,e.key,e.meta.parsedDate,n]),ee=nr(()=>lp(e,b.pdfs,b.notes,m),[b,e,m]);return u.jsxs(Ln,{children:[v,u.jsxs(dL,{elevation:0,className:"zr-citekey-menu",children:[u.jsxs("div",{className:"zr-citekey-menu--header",children:[u.jsxs(S0,{className:"zr-citekey-menu--actions",minimal:!0,role:"menubar",children:[c.includes("addMetadata")?u.jsx(xs,{icon:"add",onClick:w,role:"menuitem",children:"Add metadata"}):null,T,c.includes("viewItemInfo")?u.jsx(gL,{item:ee}):null,R,S,q]}),L]}),Q]})]})}),vL=bL,dl=window.React.memo,wL=window.React.useEffect,Nc=window.React.useMemo,qf=window.Blueprint.Core.Button,Cs=window.Blueprint.Core.Classes,Wy="zr-related-panel-label",xL=dl(function({abstract:e,allAbstractsShown:n}){const[o,{set:s,toggle:i}]=It(n);return wL(()=>{s(n)},[n,s]),e?u.jsxs("div",{className:"zr-related-item--abstract",children:[u.jsx(qf,{className:$.TEXT_SMALL,"zr-role":"abstract-toggle",icon:o?"chevron-down":"chevron-right",onClick:i,minimal:!0,small:!0,children:"Abstract"}),o?u.jsx("span",{"zr-role":"abstract-text",className:[$.TEXT_SMALL,$.TEXT_AUXILIARY].join(" "),children:e}):null]}):null}),CL=dl(function({timestamp:e,type:n}){return n=="added_on"?u.jsx("span",{className:[Cs.MENU_ITEM_LABEL,$.TEXT_SMALL,"zr-related-item--timestamp"].join(" "),children:e}):null}),EL=dl(function(e){const{allAbstractsShown:n,closeDialog:o,item:s,type:i}=e,{children:{pdfs:c,notes:d},raw:f}=s;return u.jsx("li",{className:"zr-related-item","data-in-graph":(s.inGraph!=!1).toString(),children:u.jsxs("div",{className:Cs.MENU_ITEM,children:[u.jsx(CL,{timestamp:s.timestamp,type:i}),u.jsxs("div",{className:[Cs.FILL,"zr-related-item-contents"].join(" "),children:[u.jsxs("div",{className:Cs.FILL,style:{display:"flex"},children:[u.jsxs("div",{className:"zr-related-item-contents--metadata",children:[u.jsx("span",{className:"zr-related-item--title","data-item-type":s.itemType,children:s.title}),u.jsx("span",{className:$.TEXT_ACCENT_1,children:s.meta})]}),u.jsx("span",{className:"zr-related-item-contents--actions",children:u.jsx(ul,{closeDialog:o,inGraph:s.inGraph,item:f,notes:d,pdfs:c})})]}),u.jsx(xL,{abstract:s.abstract,allAbstractsShown:n})]})]})})}),SL=dl(function(e){const{allAbstractsShown:n,closeDialog:o,items:s,type:i}=e,c=Nc(()=>{const d=i==br.ADDED_ON?"added":"meta";return Ff(s,d)},[s,i]);return u.jsx("ul",{className:Cs.LIST_UNSTYLED,children:c.map(d=>u.jsx(EL,{allAbstractsShown:n,closeDialog:o,item:d,type:i},[d.location,d.key].join("-")))})}),TL=dl(function(e){const{isOpen:n,items:o,onClose:s,show:i}=e,[c,{toggle:d}]=It(!1),f=Nc(()=>{const{title:g,type:b}=i;switch(b){case br.ADDED_ON:return{string:"item",suffix:" added on "+g};case br.WITH_ABSTRACT:return{string:"abstract",suffix:" containing "+g};case br.WITH_TAG:default:return{string:"item",suffix:" tagged with "+g}}},[i]),m=Nc(()=>u.jsx("h5",{id:Wy,className:"panel-tt",children:Wt(o.length,f.string,f.suffix)}),[o.length,f]),p=Nc(()=>u.jsx("div",{className:["header-right",$.TEXT_AUXILIARY].join(" "),children:u.jsx(qf,{icon:"cross",minimal:!0,onClick:s,title:"Close dialog"})}),[s]);return u.jsx(Qo,{ariaLabelledBy:Wy,className:"related",isOpen:n,onClose:s,children:u.jsx("div",{className:Cs.DIALOG_BODY,children:u.jsxs(Ln,{children:[u.jsxs("div",{className:"header-content",children:[u.jsxs("div",{className:"header-left",children:[m,u.jsxs(qf,{className:$.TEXT_SMALL,minimal:!0,onClick:d,"zr-role":"toggle-abstracts",children:[c?"Hide":"Show"," abstracts"]})]}),p]}),u.jsx("div",{className:"rendered-div",children:u.jsx(SL,{allAbstractsShown:c,closeDialog:s,items:o,type:i.type})})]})})})}),T0=TL,_L=window.React.useMemo,kL=window.Blueprint.Core.Button;function OL({added:t,title:e}){const[n,{on:o,off:s}]=It(!1),i=t.length>0,c=_L(()=>Wt(t.length,"item"," added"),[t.length]);return u.jsx(u.Fragment,{children:i?u.jsxs(u.Fragment,{children:[u.jsx(kL,{minimal:!0,icon:"calendar",onClick:o,children:c}),u.jsx(T0,{isOpen:n,items:t,onClose:s,show:{title:e,type:br.ADDED_ON}})]}):null})}const Gy=window.React.useCallback,Zd=window.React.useMemo,RL=window.React.useState,Yy=window.Blueprint.Core.Button;function jL(t){const{inAbstract:e=[],tag:n,tagged:o=[]}=t,[s,{on:i,off:c}]=It(!1),[d,f]=RL(),m=o.length>0,p=e.length>0,g=Zd(()=>({title:n,type:o.length>0?br.WITH_TAG:br.WITH_ABSTRACT}),[n,o.length]),b=Gy(()=>{i(),f({title:n,type:br.WITH_ABSTRACT})},[n,i]),v=Gy(()=>{i(),f({title:n,type:br.WITH_TAG})},[n,i]),w=Zd(()=>Wt(e.length,"abstract"),[e.length]),S=Zd(()=>Wt(o.length,"tagged item"),[o.length]);return u.jsxs(u.Fragment,{children:[m&&u.jsx(Yy,{minimal:!0,icon:"manual",onClick:v,children:S}),p&&u.jsx(Yy,{minimal:!0,icon:"manually-entered-data",onClick:b,children:w}),(m||p)&&u.jsx(T0,{isOpen:s,items:(d||g).type==br.WITH_TAG?o:e,onClose:c,show:d||g})]})}const qp=window.ReactDOM.createPortal,uo=window.React.useMemo;function IL({menus:t}){const[{trigger:e}]=sl(),[{dataRequests:n}]=Hn(),o=yo(n,{select:f=>f.data,notifyOnChangeProps:["data"]}),s=uo(()=>o.map(f=>f.data||[]).flat(1),[o]),i=uo(()=>Oa(s),[s]),c=uo(()=>i.items.filter(f=>f.has_citekey),[i]),d=uo(()=>c?t.filter(f=>e.constructor===Boolean?e:!0).map(f=>{const m=c.find(p=>p.key==f.getAttribute("data-citekey"));return{div:f,item:m}}).map((f,m)=>{if(f.item){const{item:p,div:g}=f;return qp(u.jsx(vL,{item:p,itemList:i},m),g)}}):null,[c,i,t,e]);return u.jsx(u.Fragment,{children:d})}function AL({menus:t}){const[{trigger:e}]=sl(),[{dataRequests:n}]=Hn(),[o]=Zo(),i=yo(n,{notifyOnChangeProps:["data"],select:f=>f.data}).map(f=>f.data||[]).flat(1),c=uo(()=>Oa(i),[i]),d=uo(()=>{const{items:f,pdfs:m,notes:p}=c;return f?t.filter(g=>typeof e=="boolean"?e:!0).map(g=>{const b=g.getAttribute("data-title"),v=JSON.parse(g.getAttribute("data-dnp-date")),w=new Date(...v).toDateString(),S=f.filter(T=>new Date(T.data.dateAdded).toDateString()==w).map(T=>zf(T,{pdfs:m,notes:p},o));return{div:g,added:S,title:b}}).filter(g=>g.added).map((g,b)=>{const{added:v,div:w,title:S}=g;return qp(u.jsx(OL,{added:v,title:S},b),w)}):null},[c,t,o,e]);return u.jsx(u.Fragment,{children:d})}function PL({menus:t}){const[{trigger:e}]=sl(),[{dataRequests:n}]=Hn(),[o]=Zo(),i=yo(n,{notifyOnChangeProps:["data"],select:m=>m.data}).map(m=>m.data||[]).flat(1),c=uo(()=>Oa(i),[i]),d=uo(()=>c.items.filter(m=>m.data.abstractNote||m.data.tags.length>0).map(m=>({itemData:m,abstract:m.data.abstractNote||"",tagList:m.data.tags.map(p=>p.tag)})),[c.items]),f=uo(()=>{const{items:m,pdfs:p,notes:g}=c;return m?t.filter(b=>typeof e=="boolean"?e:b.getAttribute("data-title").length>5).map(b=>{const v=b.getAttribute("data-title"),w=d.reduce((S,T)=>(T.abstract.includes(v)&&S.with_abstract.push(zf(T.itemData,{pdfs:p,notes:g},o)),T.tagList.includes(v)&&S.with_tags.push(zf(T.itemData,{pdfs:p,notes:g},o)),S),{with_tags:[],with_abstract:[]});return{div:b,tag:v,...w}}).filter(b=>b.with_tags.length>0||b.with_abstract.length>0).map((b,v)=>{const{with_tags:w,with_abstract:S,div:T,tag:R}=b;return qp(u.jsx(jL,{tag:R,inAbstract:S,tagged:w},v),T)}):null},[c,t,o,e,d]);return u.jsx(u.Fragment,{children:f})}const _0=window.React.memo,k0=window.React.useCallback,NL=window.Blueprint.Core.Button,LL=window.Blueprint.Core.Checkbox,Hf=window.Blueprint.Core.Classes,DL=window.Blueprint.Core.Tag;function ML(t,e={}){return Uw(t,{...e,select:n=>{const{item:o,query:s}=n;return{abstract:o.abstractNote||"",creators:o.creators?.map(i=>"name"in i?i.name:[i.firstName,i.lastName].filter(St).join(" ")).join(", "),itemType:o.itemType,publication:o.publicationTitle||o.bookTitle||o.websiteTitle||"",title:o.title,url:s}},notifyOnChangeProps:["data","isLoading"]})}const BL=_0(function(e){const{isSelected:n,item:o,onSelect:s}=e,[i]=Aa(),c=k0(()=>{s(o.url)},[o.url,s]);return u.jsx("li",{className:"zr-webimport-item","aria-label":o.url,onClick:c,children:u.jsxs("div",{className:Hf.MENU_ITEM,children:[u.jsxs("div",{className:"zr-webimport-item--header",children:[u.jsx(LL,{checked:n,className:"zr-webimport-item--title",inline:!1,labelElement:u.jsxs(u.Fragment,{children:[u.jsx("a",{target:"_blank",rel:"noreferrer",href:o.url,children:o.title}),o.creators?u.jsxs("span",{className:$.TEXT_SECONDARY,"zr-role":"item-creators",children:[" (",o.creators,")"]}):null]}),onChange:c}),o.itemType?u.jsx(DL,{htmlTitle:o.publication,minimal:!0,"zr-role":"item-type",children:u.jsx("span",{"data-item-type":o.itemType,children:i[o.itemType]||o.itemType})}):null]}),u.jsx("div",{className:"zr-webimport-item--contents",children:u.jsx("span",{className:[$.TEXT_SMALL,$.TEXT_AUXILIARY].join(" "),"zr-role":"item-abstract",children:o.abstract})})]})})}),zL=_0(function(e){const{isOpen:n,onClose:o,urls:s}=e,[i,{set:c,toggle:d}]=Ui({start:[]}),f=i.length>0,m=ML(s,{enabled:n}),p=m.every(v=>v.isLoading),g=m.filter(v=>v.isSuccess).map(v=>v.data).filter(St),b=k0(()=>{c([]),o()},[o,c]);return u.jsx(Qo,{ariaLabelledBy:"zr-webimport-dialog--title",className:"webimport",extraClasses:f?["has-selected-items"]:[],isOpen:n,onClose:b,children:u.jsx("div",{className:Hf.DIALOG_BODY,children:u.jsxs(Ln,{children:[u.jsxs("div",{className:"zr-webimport-panel--main",children:[u.jsxs("div",{className:"header-content",children:[u.jsxs("div",{className:"header-left",children:[u.jsx("h5",{id:"zr-webimport-dialog--title",className:"panel-tt",children:p?"Parsing links...":Wt(g.length,"link"," found")}),!p&&u.jsx(cN,{})]}),u.jsx("div",{className:["header-right",$.TEXT_AUXILIARY].join(" "),children:u.jsx(NL,{icon:"cross",large:!0,minimal:!0,onClick:b,title:"Close dialog"})})]}),u.jsx("div",{className:"rendered-div",children:u.jsx("ul",{className:Hf.LIST_UNSTYLED,children:g.map(v=>u.jsx(BL,{item:v,isSelected:i.includes(v.url),onSelect:d},v.url))})})]}),u.jsx("div",{className:"zr-webimport-panel--side",tabIndex:0,children:u.jsx(y0,{identifiers:i,isActive:f,resetImport:()=>c([])})})]})})})}),$L=zL,FL=window.React.memo,UL=window.React.useCallback,qL=window.React.useEffect,HL=window.React.useRef,VL=window.React.useState,XL=window.ReactDOM.createPortal,QL=window.Blueprint.Core.Button,KL=FL(function({urls:e}){const[n,{on:o,off:s}]=It(!1);return u.jsxs(u.Fragment,{children:[u.jsx(QL,{className:"zr-webimport-button",icon:"geosearch",minimal:!0,onClick:o}),u.jsx($L,{isOpen:n,onClose:s,urls:e})]})});function WL({divs:t}){const e=HL(!1),[n,o]=VL([]),s=UL(()=>{o(i=>{const c=Array.from(t).filter(d=>(d?.parentElement?.querySelectorAll(".rm-block a:not(.rm-alias--page):not(.rm-alias--block)")||[]).length>0);return $f(i,c)?c:i})},[t]);return qL(()=>{e.current=!0;const i=setInterval(()=>{e.current&&s()},1e3);return()=>{e.current=!1,clearInterval(i)}},[s]),u.jsx(u.Fragment,{children:Array.from(n).map(i=>({div:i,links:i.parentElement?.querySelectorAll(".rm-block a:not(.rm-alias--page):not(.rm-alias--block)")||[]})).filter(i=>i.links.length>0).map((i,c)=>{const{div:d,links:f}=i,m=Array.from(f).map(p=>p.href);return XL(u.jsx(KL,{urls:m},c),d)})})}const GL=new RegExp(/(.+) ([0-9]+).{2}, ([0-9]{4})/),YL=()=>{const t=Array.from(document.querySelectorAll("h1.rm-title-display")).filter(e=>!e.parentElement?.querySelector(`[class*=${Up}]`));for(const e of t){const n=e.querySelector("span")?.innerText||e.innerText,o=vp(n),s=document.createElement("div");switch(s.setAttribute("data-title",n),o&&s.setAttribute("data-uid",o),!0){case n.startsWith("@"):s.classList.add(ws.citekey),s.setAttribute("data-citekey",n.slice(1));break;case GL.test(n):s.classList.add(ws.dnp),s.setAttribute("data-dnp-date",JSON.stringify(JE(n,{as_date:!1})));break;default:s.classList.add(ws.tag)}e.insertAdjacentElement("afterend",s)}},ZL=()=>({citekeyMenus:Array.from(document.querySelectorAll(`[class=${ws.citekey}]`)),dnpMenus:Array.from(document.querySelectorAll(`[class=${ws.dnp}]`)),tagMenus:Array.from(document.querySelectorAll(`[class=${ws.tag}]`))}),O0=()=>Array.from(document.querySelectorAll(`[class="${Kc}"]`));function Zy(t,e){return t.some(n=>e.includes(n))}const JL=t=>{O0().filter(o=>!Zy(t,JSON.parse(o.parentElement?.getAttribute("data-page-links")||"[]"))).forEach(o=>o.remove());const e=Array.from(document.querySelectorAll(".rm-block:not(.rm-block--ghost)")).filter(o=>!o.querySelector(`[class=${Kc}]`)&&Zy(t,JSON.parse(o.getAttribute("data-page-links")||"[]"))),n=document.createElement("span");n.classList.add(Kc),e.forEach(o=>o.insertAdjacentElement("afterbegin",n.cloneNode(!0)))},eD=window.React.memo,tD=window.React.useCallback,nD=window.React.useEffect,rD=window.React.useRef,Jy=window.React.useState,oD=eD(function(){const e=rD(!1),[{citekeyMenus:n,dnpMenus:o,tagMenus:s},i]=Jy({citekeyMenus:[],dnpMenus:[],tagMenus:[]}),[c,d]=Jy([]),[{trigger:f}]=hp(),[{tags:m}]=nw(),p=tD(()=>{i(g=>{const b={},v=ZL();for(const w of Object.keys(v))$f(g[w],v[w])&&(b[w]=v[w]);return JSON.stringify(b)==="{}"?g:{...g,...b}}),d(g=>{const b=O0();return $f(g,b)?b:g})},[]);return nD(()=>{e.current=!0;const g=setInterval(()=>{YL(),JL(m),e.current&&p()},1e3);return()=>{e.current=!1,clearInterval(g),Array.from(document.querySelectorAll(`[class*=${Up}]`)).forEach(b=>b.remove()),Array.from(document.querySelectorAll(`[class=${Kc}]`)).forEach(b=>b.remove())}},[p,m]),u.jsxs(u.Fragment,{children:[n?u.jsx(IL,{menus:n}):null,o?u.jsx(AL,{menus:o}):null,s?u.jsx(PL,{menus:s}):null,f?u.jsx(fP,{}):null,u.jsx(WL,{divs:c}),u.jsx(xP,{})]})}),aD=window.React.memo,sD=window.React.useMemo,iD=window.Blueprint.Core.Button,Cc=window.Blueprint.Core.Classes,lD=window.Blueprint.Core.Collapse,eb=window.Blueprint.Core.Tag,cD=aD(function({log:e}){const[n,{toggle:o}]=It(!1),s=sD(()=>JSON.stringify(e.context||{})!="{}",[e.context]);return u.jsxs(Go,{className:"zr-logger--entry","data-log-level":e.level,children:[u.jsxs("div",{className:"zr-log--header",children:[u.jsxs("div",{className:["zr-log--metadata",Cc.MONOSPACE_TEXT].join(" "),children:[u.jsx("span",{className:"zr-log--timestamp",children:Fi(e.timestamp)}),u.jsx(eb,{className:"zr-log--level",intent:e.intent,minimal:!0,children:e.level}),u.jsx(eb,{minimal:!0,children:e.origin})]}),u.jsxs("div",{className:["zr-log--summary",$.TEXT_SMALL].join(" "),children:[u.jsxs("div",{children:[u.jsx("span",{className:Cc.MONOSPACE_TEXT,children:e.message}),e.detail&&u.jsx("span",{className:[Cc.MONOSPACE_TEXT,$.TEXT_SECONDARY,$.TEXT_SMALL].join(" "),children:e.detail})]}),s&&u.jsx(iD,{className:$.TEXT_SECONDARY,rightIcon:n?"chevron-up":"chevron-down",minimal:!0,onClick:o,small:!0,text:n?"Hide":"View",title:"Show details"})]})]}),u.jsx("div",{className:"zr-log--details",children:s&&u.jsx(lD,{isOpen:n,children:u.jsx("pre",{className:[Cc.CODE_BLOCK,$.TEXT_AUXILIARY].join(" "),children:JSON.stringify(e.context,null,"  ")})})})]})}),uD=cD,dD=window.React.memo,R0=window.React.useEffect,fD=window.React.useMemo,pD=window.React.useState,hD=window.Blueprint.Core.Classes,mD=window.Blueprint.Core.NonIdealState,gD=window.Blueprint.Core.Spinner,yD=window.Blueprint.Core.Switch,tb=20;function bD({items:t}){const[e,{toggle:n}]=It(!1),{currentPage:o,pageLimits:s,setCurrentPage:i}=nl({itemsPerPage:tb}),c=fD(()=>e?t:t.filter(d=>d.level=="error"),[t,e]);return R0(()=>{i(1)},[t,c,i]),u.jsxs("div",{className:"zr-logger--datalist",children:[c.length==0?u.jsx(mD,{className:$.TEXT_AUXILIARY,description:"No items to display"}):u.jsx(Yo,{children:c.sort((d,f)=>d.timestamp>f.timestamp?-1:1).slice(...s).map((d,f)=>u.jsx(uD,{log:d},f))}),u.jsxs(mo,{children:[u.jsx(il,{arrows:"first",currentPage:o,itemsPerPage:tb,nbItems:c.length,setCurrentPage:i}),u.jsx(yD,{"aria-checked":e,checked:e,label:"Show all entries",role:"switch",onChange:n})]})]})}const vD=dD(function({isOpen:e,onClose:n}){const[o,s]=pD(null);return R0(()=>{try{const i=window.zoteroRoam.logs;s(i)}catch(i){console.error(i),s([])}},[]),u.jsx(Qo,{className:"logger",isOpen:e,label:"zoteroRoam Logs",onClose:n,children:u.jsx("div",{className:hD.DIALOG_BODY,children:o==null?u.jsx(gD,{size:15}):u.jsx(bD,{items:o})})})}),nb=window.React.useMemo,wD=window.ReactDOM.createPortal,xD=window.Blueprint.Core.Classes,CD=window.Blueprint.Core.Dialog,ED=t=>{const{ariaLabelledBy:e,children:n,className:o,isOpen:s,lazy:i=!0,onClose:c,onOpening:d,...f}=t,{portalId:m}=pu(),p=nb(()=>$.PREFIX_DIALOG_OVERLAY+o,[o]),g=nb(()=>({flex:"1 1 100%"}),[]);return wD(u.jsx(CD,{"aria-labelledby":e,canEscapeKeyClose:!0,canOutsideClickClose:!0,className:p,enforceFocus:!1,isOpen:s,lazy:i,onClose:c,onOpening:d,usePortal:!1,...f,children:u.jsx("div",{className:xD.DIALOG_BODY,children:u.jsx("div",{className:"main-panel",style:g,children:n})})}),document.getElementById(m))},j0=window.Blueprint.Core.Classes,SD="search-library",I0="zr-library-search-dialogtitle",TD=[j0.TEXT_OVERFLOW_ELLIPSIS,"zr-library-item--contents"].join(" "),_D=[j0.MENU_ITEM_LABEL,"zr-library-item--key"].join(" "),kD=window.React.memo,Ec=window.React.useMemo,OD=window.Blueprint.Core.Button,Jd=window.Blueprint.Core.Classes,RD=window.Blueprint.Core.Icon,jD=window.Blueprint.Core.InputGroup,ID=window.Blueprint.Core.Switch,AD=window.Blueprint.Core.useHotkeys,PD=kD(function(e){const{handleClose:n,handleKeyDown:o,handleKeyUp:s,handleQueryChange:i,quickCopyProps:{isActive:c,toggle:d},searchbar:f}=e,[m]=Ls(),p=Ec(()=>Ns(m),[m]),g=Ec(()=>u.jsx(RD,{id:I0,title:"Search in Zotero items",htmlTitle:"Search in Zotero items",intent:"primary",icon:"learning"}),[]),b=Ec(()=>u.jsxs(u.Fragment,{children:[u.jsx(ID,{className:["zr-quick-copy",$.TEXT_AUXILIARY].join(" "),label:"Quick Copy",checked:c,onChange:d,role:"switch","aria-checked":c}),u.jsx(OD,{className:Jd.MINIMAL,large:!0,icon:"cross",onClick:n,title:"Close searchbar"})]}),[n,c,d]),v=Ec(()=>{const w={allowInInput:!0,global:!0,preventDefault:!0,stopPropagation:!0},S={focusSearchBar:{label:"Focus the searchbar",onKeyDown:()=>f?.current?.focus()},toggleQuickCopy:{label:"Toggle QuickCopy",onKeyDown:()=>d()}};return Object.keys(S).map(T=>{const R=p[T]||"";return R!==""?{...w,...S[T],combo:R}:!1}).filter(St)},[f,p,d]);return AD(v,{showDialogKeyCombo:"shift+Z+R"}),u.jsx(jD,{className:[Jd.INPUT,Jd.FILL,"zr-library-search-input-group"].join(" "),id:"zotero-roam-search-autocomplete",placeholder:"Search in abstract, title, authors (last names), year, tags, or citekey",spellCheck:"false",autoComplete:"off",type:"text",large:!0,onChange:i,onKeyDown:o,onKeyUp:s,inputRef:f,leftElement:g,rightElement:b})}),ND=PD,Hp=window.React.memo,ef=window.React.useCallback,LD=window.React.useEffect,DD=window.React.useMemo,MD=window.React.useRef,rb=window.React.useState,BD=window.Blueprint.Core.Menu,zD=window.Blueprint.Core.MenuItem,$D=window.Blueprint.Select.QueryList,FD=window.Blueprint.Select.renderFilteredItems,UD=300,qD=0,tf=50,HD={itemListPredicate:(t,e)=>t.length<qD?[]:e.filter(n=>Un(t,[n.key,n._multiField],{any_case:!0,match:"partial",search_compounds:!0,word_order:"loose"})),itemListRenderer:t=>{const{filteredItems:e,itemsParentRef:n,...o}=t,s=null,i=null,c=e.length,d=FD({filteredItems:e.slice(0,tf),itemsParentRef:n,...o},s,i);return d==null?null:u.jsxs(u.Fragment,{children:[u.jsx(BD,{ulRef:n,children:d}),c>tf&&u.jsxs("div",{className:"zr-querylist--more-results",children:["Showing ",tf," out of ",Wt(c,"result")]})]})},itemRenderer:(t,e)=>{const{handleClick:n,modifiers:o}=e,s=[t.location,t.key].join("-");return u.jsx(VD,{handleClick:n,item:t,modifiers:o},s)},itemsEqual:(t,e)=>t.itemKey==e.itemKey&&t.location==e.location},VD=Hp(function(e){const{item:n,handleClick:o,modifiers:s}=e,{inGraph:i,itemType:c,key:d,meta:f,publication:m,title:p}=n;return u.jsx(zD,{onClick:o,className:"zotero-roam-search_result",role:"menuitem","data-item-type":c,"data-in-graph":(i!=!1).toString(),htmlTitle:p,labelElement:"@"+d,labelClassName:_D,"aria-selected":s.active,tagName:"div",text:u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"zr-library-item--title",children:p}),u.jsxs("span",{className:"zr-details",children:[u.jsx("span",{className:$.TEXT_ACCENT_1,children:f}),u.jsx("span",{className:$.TEXT_SECONDARY,children:m})]})]}),textClassName:TD})}),XD=Hp(function(e){const{handleClose:n,itemList:o,selectedItem:s}=e;return s?u.jsx(u0,{item:s,closeDialog:n}):u.jsx("div",{id:"zotero-roam-library-rendered",children:o})}),QD=Hp(function(e){const{handleClose:n,isOpen:o,items:s,quickCopyProps:i}=e,[c]=iu(),d=MD(null),[f,m]=rb(null),[p,g]=rb(),[b]=iS(R=>{},UD),v=ef((R,L)=>{if(!R)m(null);else{const{key:q,location:Q}=R;if(JSON.stringify(f)===JSON.stringify({key:q,location:Q}))return;i.isActive?(Fo(Lf(R,c)),c.overrideKey&&L?.[c.overrideKey]==!0?(d?.current?.blur(),m({key:q,location:Q})):n()):(c.always==!0&&Fo(Lf(R,c)),d?.current?.blur(),m({key:q,location:Q}))}},[c,n,i.isActive,d,f]),w=DD(()=>{if(f==null)return null;{const{key:R,location:L}=f;return s.find(q=>q.key==R&&q.location==L)}},[s,f]),S=ef((R,L)=>{m(null),g(R),b(R)},[b]),T=ef(R=>{const{handleKeyUp:L,handleKeyDown:q,handleQueryChange:Q,itemList:ee}=R;return u.jsxs("div",{className:"zr-querylist",children:[u.jsx(ND,{handleClose:n,handleKeyDown:q,handleKeyUp:L,handleQueryChange:Q,quickCopyProps:i,searchbar:d}),u.jsx(XD,{handleClose:n,itemList:ee,selectedItem:w})]})},[n,i,d,w]);return LD(()=>{o?d?.current?.focus():(g(""),m(null))},[o,d]),u.jsx($D,{items:s,onItemSelect:v,onQueryChange:S,query:p,renderer:T,...HD})}),KD=QD,WD=window.React.memo,GD=window.React.useCallback,YD=window.React.useMemo;function ZD(t,e,n={}){const o=GD(c=>c.data?EP(c.data,e):[],[e]),s=yo(t,{...n,notifyOnChangeProps:["data"],select:o});return YD(()=>s.map(c=>c.data||[]).flat(1),[s])}const JD=WD(function({isOpen:e,onClose:n,status:o}){const[{useQuickCopy:s}]=iu(),[{dataRequests:i}]=Hn(),[c]=Zo(),[d,{toggle:f}]=It(s),m=ZD(i,c,{enabled:o==Zt.ON});return u.jsx(ED,{ariaLabelledBy:I0,className:SD,isOpen:e,lazy:!1,onClose:n,children:u.jsx(Ln,{children:u.jsx(KD,{handleClose:n,isOpen:e,items:m,quickCopyProps:{isActive:d,toggle:f}})})})}),eM=window.React.Component,tM=window.React.createContext,nM=window.React.useContext,Lc=window.React.useMemo,rM=window.Blueprint.Core.HotkeysTarget2,ob="zoteroRoam : Open Search Panel",ab="zoteroRoam : Open Dashboard",A0=tM(null),pu=()=>{const t=nM(A0);if(!t)throw new Error("No context provided");return t},Wc=new qx({defaultOptions:{queries:{cacheTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchIntervalInBackground:!0,retryOnMount:!1,staleTime:1e3*60}}}),oM=({children:t,idbDatabase:e})=>{const[{cacheEnabled:n}]=al(),o=Lc(()=>uk(e),[e]),s=Lc(()=>({onSuccess:()=>{window.zoteroRoam?.info?.({origin:"Database",message:"Initialization complete"})},persistOptions:{buster:"v1.0",dehydrateOptions:{shouldDehydrateQuery:dk},maxAge:1e3*60*60*24*3,persister:o}}),[o]),i=Lc(()=>n?vC:Sb,[n]);return u.jsx(i,{client:Wc,...s,children:t})},aM=t=>{const[{autoload:e}]=al(),[n]=Hn(),[o]=Ls(),s=Lc(()=>Ns(o),[o]);return u.jsx(sM,{autoload:e,requests:n,shortcuts:s,...t})};class sM extends eM{constructor(n){super(n);Ut(this,"shortcutsConfig",{toggleDashboard:{label:"Show/hide the dashboard",onKeyDown:()=>this.toggleDashboard()},toggleSearchPanel:{label:"Show/hide the search panel",onKeyDown:()=>this.toggleSearchPanel()},toggleSettingsPanel:{label:"Show/hide the settings panel",onKeyDown:()=>this.toggleSettings()}});Ut(this,"hotkeysOptions",{showDialogKeyCombo:"shift+Z+R"});this.state={isDashboardOpen:!1,isLoggerOpen:!1,isSearchPanelOpen:!1,isSettingsPanelOpen:!1,lastCursorLocation:null,status:this.props.requests.dataRequests.length==0?Zt.DISABLED:this.props.autoload?Zt.ON:Zt.OFF},this.toggleExtension=this.toggleExtension.bind(this),this.closeSearchPanel=this.closeSearchPanel.bind(this),this.openSearchPanel=this.openSearchPanel.bind(this),this.toggleSearchPanel=this.toggleSearchPanel.bind(this),this.closeDashboard=this.closeDashboard.bind(this),this.openDashboard=this.openDashboard.bind(this),this.toggleDashboard=this.toggleDashboard.bind(this),this.closeSettings=this.closeSettings.bind(this),this.openSettings=this.openSettings.bind(this),this.toggleSettings=this.toggleSettings.bind(this),this.closeLogger=this.closeLogger.bind(this),this.openLogger=this.openLogger.bind(this)}componentDidMount(){wg(ob,this.openSearchPanel,this.props.extensionAPI),wg(ab,this.openDashboard,this.props.extensionAPI)}componentDidUpdate(n){this.props.requests.dataRequests.length==0&&n.requests.dataRequests.length>0?this.setState(o=>(Wc.clear(),{status:Zt.DISABLED})):n.requests.dataRequests.length==0&&this.props.requests.dataRequests.length>0&&this.setState(o=>({status:Zt.ON}))}componentWillUnmount(){Eg(ob,this.props.extensionAPI),Eg(ab,this.props.extensionAPI)}render(){const{status:n,isDashboardOpen:o,isLoggerOpen:s,isSearchPanelOpen:i,isSettingsPanelOpen:c}=this.state,{extension:d,idbDatabase:f}=this.props,m=Object.keys(this.shortcutsConfig).map(p=>{const g=this.props.shortcuts[p]||"";return g!==""?{allowInInput:!0,combo:g,global:!0,...this.shortcutsConfig[p]}:!1}).filter(St);return u.jsx(rM,{hotkeys:m,options:this.hotkeysOptions,children:u.jsxs(A0.Provider,{value:d,children:[u.jsxs(oM,{idbDatabase:f,children:[u.jsx(oP,{openDashboard:this.openDashboard,openLogger:this.openLogger,openSearchPanel:this.openSearchPanel,openSettingsPanel:this.openSettings,status:n,toggleExtension:this.toggleExtension}),u.jsxs(mO,{children:[n==Zt.ON?u.jsx(oD,{}):null,u.jsx(JD,{isOpen:i,onClose:this.closeSearchPanel,status:n}),u.jsx(XA,{isOpen:o,onClose:this.closeDashboard})]})]}),u.jsx(vD,{isOpen:s,onClose:this.closeLogger}),u.jsx(oO,{isOpen:c,onClose:this.closeSettings})]})})}toggleExtension(){this.setState(n=>{const{status:o}=n;return o==Zt.ON&&Wc.clear(),{status:o==Zt.OFF?Zt.ON:Zt.OFF}})}closeSearchPanel(){this.setState(n=>(V_(n.lastCursorLocation),{isSearchPanelOpen:!1,lastCursorLocation:null}))}openSearchPanel(){this.setState(n=>({lastCursorLocation:U_(),isSearchPanelOpen:!0}))}toggleSearchPanel(){this.state.status==Zt.ON&&this.setState(n=>({isSearchPanelOpen:!n.isSearchPanelOpen}))}closeDashboard(){this.setState(n=>({isDashboardOpen:!1}))}openDashboard(){this.setState(n=>({isDashboardOpen:!0}))}toggleDashboard(){this.state.status==Zt.ON&&this.setState(n=>({isDashboardOpen:!n.isDashboardOpen}))}closeSettings(){this.setState(n=>({isSettingsPanelOpen:!1}))}openSettings(){this.setState(n=>({isSettingsPanelOpen:!0}))}toggleSettings(){this.setState(n=>({isSettingsPanelOpen:!n.isSettingsPanelOpen}))}closeLogger(){this.setState(n=>({isLoggerOpen:!1}))}openLogger(){this.setState(n=>({isLoggerOpen:!0}))}}const sb=window.React.useCallback,iM=window.React.useEffect,lM=window.React.useMemo,cM=window.React.useState,uM=window.Blueprint.Core.Button,dM=window.Blueprint.Core.Intent;function fM(){const[t,e]=cM(),n=sb(()=>{window.zoteroRoam?.isDataCached?.().then(i=>e(i)).catch(i=>{window.zoteroRoam?.error?.({origin:"Cache",message:"Failed to update caching status",context:{error:Kt(i)}})})},[e]);iM(()=>n(),[n]);const o=lM(()=>t?{intent:dM.WARNING,text:"Clear cache",title:"Click to clear the extension's data cache"}:{disabled:!0,text:"No cached data",title:"The extension's data cache is empty"},[t]),s=sb(()=>{window.zoteroRoam?.clearDataCache?.().then(()=>n())},[n]);return u.jsx(uM,{loading:t==null,onClick:s,...o})}const pM=window.idb.deleteDB,hM=window.idb.openDB,mM=[Ca];class gM{constructor(){Ut(this,"connection");Ut(this,"dbName");let e="";try{e=q_()}catch{}const n=[CC,e].filter(St).join("_");this.dbName=n,this.connection=hM(this.dbName,EC,{upgrade:(o,s,i,c)=>{mM.forEach(d=>o.createObjectStore(d))},blocking:()=>{console.log(`${this.dbName} - Connection is blocking another, will close`),this.connection.then(o=>o.close()).then(()=>console.log(`${this.dbName} - Connection successfully closed`))},blocked:()=>{console.log(`${this.dbName} - Connection blocked by another`)}})}async close(){(await this.connection).close()}async deleteSelf(){try{return await pM(this.dbName,{blocked:()=>{console.log(`${this.dbName} - Database deletion is blocked`)}})}catch(e){console.error(e)}}async selectStore(e){const n=await this.connection;return{async get(o){return await n.get(e,o)},async set(o,s){return await n.put(e,s,o)},async delete(o){return await n.delete(e,o)},async clear(){return await n.clear(e)}}}}const yM=window.ReactDOM.render,bM=window.Blueprint.Core.HotkeysProvider,vM={tabTitle:"zoteroRoam",settings:[{id:"cache-clear",name:"Clear cache",description:"Remove all data from the extension's local cache.",action:{type:"reactComponent",component:fM}}]};function wM({extensionAPI:t}){const e="roam/depot";gk();const{requests:n,settings:o}=hk({context:e,extensionAPI:t}),s=new gM;window.zoteroRoam=new k_({idbDatabase:s,queryClient:Wc,requests:n,settings:o}),t.settings.panel.create(vM),yk({settings:o}),yM(u.jsx(bM,{dialogProps:{globalGroupName:"zoteroRoam"},children:u.jsx(sO,{extensionAPI:t,init:{...o,requests:n},children:u.jsx(aM,{extension:{portalId:Gf,version:xC},extensionAPI:t,idbDatabase:s})})}),document.getElementById(Yf))}function xM(){i_(),qv(),Gv(),window.zoteroRoam.deleteDatabase(),delete window.zoteroRoam}const FM={onload:wM,onunload:xM};export{FM as default};
//# sourceMappingURL=extension.js.map
